import{d as x,s as r,V as m,m as S,W as _,G as g,o as h,c as y,X as E,D as P,E as b,H as z,S as F,I as c,J as f,K as k,M as G,L,N as M,_ as V}from"./index-C7PG-n9s.js";const q={id:"map",class:"map"},N=x({__name:"index",setup(T){let t=r(),l=r(),i=r();const p={center:[108.5525,34.3227],zoom:5,constrainResolution:!1,projection:"EPSG:4326"},v=new m(p);let u=r(),s=r();const w=async()=>{i.value=new E({wrapX:!1,url:"http://172.16.34.120:6080/arcgis/rest/services/xiamen/MapServer/tile/{z}/{y}/{x}",projection:"EPSG:4326"}),l.value=new P({source:i.value,zIndex:0}),s.value=new b,u.value=new z({source:s.value,zIndex:1,style:a=>{const e=a.get("NAME");return new F({stroke:new c({color:"rgba(255, 0, 0, 0.5)",width:2}),fill:new f({color:"rgba(255, 0, 0, 0.1)"}),text:new k({text:e,font:"14px Calibri,sans-serif",fill:new f({color:"#000"}),stroke:new c({color:"#fff",width:3})})})}}),t.value=new G({target:"map",view:v,controls:L({zoom:!1,rotate:!1,attribution:!1}),interactions:M({doubleClickZoom:!1}),layers:[l.value,u.value]}),t.value.on("pointermove",a=>{var n,o;if(a.dragging)return;const e=(n=t.value)==null?void 0:n.getEventPixel(a.originalEvent);if(e&&((o=t.value)!=null&&o.getViewport())){const d=t.value.hasFeatureAtPixel(e);t.value.getViewport().style.cursor=d?"pointer":""}})};return S(()=>{w().then(()=>{if(t.value&&s.value){const a=new _().writeGetFeature({featureNS:"http://218.5.80.6:6600/geoserver/xiaqu/ows",featureTypes:["xiaqu:PaiChuSouXQ_polygon"],srsName:"EPSG:4326",outputFormat:"application/json",featurePrefix:"xiaqu"});fetch("http://218.5.80.6:6600/geoserver/xiaqu/ows",{method:"POST",body:new XMLSerializer().serializeToString(a)}).then(function(e){return e.json()}).then(e=>{var o;const n=new g().readFeatures(e);(o=s.value)==null||o.addFeatures(n)})}})}),(a,e)=>(h(),y("div",q))}}),j=V(N,[["__scopeId","data-v-8d472fba"]]);export{j as default};

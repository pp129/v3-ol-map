const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CPpzI3-0.js","assets/index-CPStmqWj.css","assets/index-BayJES45.js","assets/index-BeSuJJQj.css","assets/index-OlA2kHjP.js","assets/vue-CSDdYaJw.js","assets/index-Dh-ewV7W.css","assets/index-DQOo0YRf.js","assets/index-g-ARNR-o.js","assets/index-DUd72P4m.js","assets/index-BJG-_Yfi.css","assets/index-D_oyuPrV.js","assets/index-oyQ9ozER.css","assets/index-Dx6CBGNg.js","assets/index-jzPFgXxP.css","assets/index-BAXof-BV.js","assets/index-DJ3XRrYW.css","assets/index-D9IMc81Y.js","assets/index-BYruxbJ5.css","assets/index-BSZ_fa1R.js","assets/index-Dmpbfv54.css","assets/raw-Dt1HMqYc.js","assets/basedecoder-DvumDe3Y.js","assets/lzw-DVs0DlZL.js","assets/jpeg-Db2tRqaG.js","assets/deflate-CUkHh1nh.js","assets/pako.esm-CPws4d4z.js","assets/packbits-DQnG8s9w.js","assets/lerc-Di_X-Xub.js","assets/webimage-BcnuJlio.js"])))=>i.map(i=>d[i]);
var EK=Object.defineProperty;var CK=(r,t,e)=>t in r?EK(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ee=(r,t,e)=>CK(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hR(r){const t=Object.create(null);for(const e of r.split(","))t[e]=1;return e=>e in t}const dr={},bd=[],rs=()=>{},MK=()=>!1,LS=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),cR=r=>r.startsWith("onUpdate:"),jr=Object.assign,fR=(r,t)=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)},AK=Object.prototype.hasOwnProperty,Qe=(r,t)=>AK.call(r,t),Jt=Array.isArray,Ed=r=>my(r)==="[object Map]",DS=r=>my(r)==="[object Set]",YD=r=>my(r)==="[object Date]",fe=r=>typeof r=="function",Vr=r=>typeof r=="string",go=r=>typeof r=="symbol",vr=r=>r!==null&&typeof r=="object",h6=r=>(vr(r)||fe(r))&&fe(r.then)&&fe(r.catch),c6=Object.prototype.toString,my=r=>c6.call(r),IK=r=>my(r).slice(8,-1),f6=r=>my(r)==="[object Object]",dR=r=>Vr(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Ev=hR(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),OS=r=>{const t=Object.create(null);return e=>t[e]||(t[e]=r(e))},RK=/-(\w)/g,Ua=OS(r=>r.replace(RK,(t,e)=>e?e.toUpperCase():"")),PK=/\B([A-Z])/g,Zc=OS(r=>r.replace(PK,"-$1").toLowerCase()),NS=OS(r=>r.charAt(0).toUpperCase()+r.slice(1)),vT=OS(r=>r?`on${NS(r)}`:""),pu=(r,t)=>!Object.is(r,t),o1=(r,...t)=>{for(let e=0;e<r.length;e++)r[e](...t)},d6=(r,t,e,n=!1)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,writable:n,value:e})},V1=r=>{const t=parseFloat(r);return isNaN(t)?r:t},LK=r=>{const t=Vr(r)?Number(r):NaN;return isNaN(t)?r:t};let XD;const FS=()=>XD||(XD=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kS(r){if(Jt(r)){const t={};for(let e=0;e<r.length;e++){const n=r[e],i=Vr(n)?FK(n):kS(n);if(i)for(const a in i)t[a]=i[a]}return t}else if(Vr(r)||vr(r))return r}const DK=/;(?![^(]*\))/g,OK=/:([^]+)/,NK=/\/\*[^]*?\*\//g;function FK(r){const t={};return r.replace(NK,"").split(DK).forEach(e=>{if(e){const n=e.split(OK);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Cd(r){let t="";if(Vr(r))t=r;else if(Jt(r))for(let e=0;e<r.length;e++){const n=Cd(r[e]);n&&(t+=n+" ")}else if(vr(r))for(const e in r)r[e]&&(t+=e+" ");return t.trim()}const kK="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GK=hR(kK);function g6(r){return!!r||r===""}function BK(r,t){if(r.length!==t.length)return!1;let e=!0;for(let n=0;e&&n<r.length;n++)e=GS(r[n],t[n]);return e}function GS(r,t){if(r===t)return!0;let e=YD(r),n=YD(t);if(e||n)return e&&n?r.getTime()===t.getTime():!1;if(e=go(r),n=go(t),e||n)return r===t;if(e=Jt(r),n=Jt(t),e||n)return e&&n?BK(r,t):!1;if(e=vr(r),n=vr(t),e||n){if(!e||!n)return!1;const i=Object.keys(r).length,a=Object.keys(t).length;if(i!==a)return!1;for(const o in r){const s=r.hasOwnProperty(o),l=t.hasOwnProperty(o);if(s&&!l||!s&&l||!GS(r[o],t[o]))return!1}}return String(r)===String(t)}function zK(r,t){return r.findIndex(e=>GS(e,t))}const p6=r=>!!(r&&r.__v_isRef===!0),v6=r=>Vr(r)?r:r==null?"":Jt(r)||vr(r)&&(r.toString===c6||!fe(r.toString))?p6(r)?v6(r.value):JSON.stringify(r,m6,2):String(r),m6=(r,t)=>p6(t)?m6(r,t.value):Ed(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,i],a)=>(e[mT(n,a)+" =>"]=i,e),{})}:DS(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>mT(e))}:go(t)?mT(t):vr(t)&&!Jt(t)&&!f6(t)?String(t):t,mT=(r,t="")=>{var e;return go(r)?`Symbol(${(e=r.description)!=null?e:t})`:r};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ki;class VK{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ki,!t&&Ki&&(this.index=(Ki.scopes||(Ki.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Ki;try{return Ki=this,t()}finally{Ki=e}}}on(){Ki=this}off(){Ki=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function UK(){return Ki}let mr;const yT=new WeakSet;class y6{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ki&&Ki.active&&Ki.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yT.has(this)&&(yT.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||x6(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ZD(this),S6(this);const t=mr,e=uo;mr=this,uo=!0;try{return this.fn()}finally{w6(this),mr=t,uo=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)vR(t);this.deps=this.depsTail=void 0,ZD(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yT.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){hM(this)&&this.run()}get dirty(){return hM(this)}}let _6=0,Cv,Mv;function x6(r,t=!1){if(r.flags|=8,t){r.next=Mv,Mv=r;return}r.next=Cv,Cv=r}function gR(){_6++}function pR(){if(--_6>0)return;if(Mv){let t=Mv;for(Mv=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let r;for(;Cv;){let t=Cv;for(Cv=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){r||(r=n)}t=e}}if(r)throw r}function S6(r){for(let t=r.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function w6(r){let t,e=r.depsTail,n=e;for(;n;){const i=n.prevDep;n.version===-1?(n===e&&(e=i),vR(n),WK(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}r.deps=t,r.depsTail=e}function hM(r){for(let t=r.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(T6(t.dep.computed)||t.dep.version!==t.version))return!0;return!!r._dirty}function T6(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===um))return;r.globalVersion=um;const t=r.dep;if(r.flags|=2,t.version>0&&!r.isSSR&&r.deps&&!hM(r)){r.flags&=-3;return}const e=mr,n=uo;mr=r,uo=!0;try{S6(r);const i=r.fn(r._value);(t.version===0||pu(i,r._value))&&(r._value=i,t.version++)}catch(i){throw t.version++,i}finally{mr=e,uo=n,w6(r),r.flags&=-3}}function vR(r,t=!1){const{dep:e,prevSub:n,nextSub:i}=r;if(n&&(n.nextSub=i,r.prevSub=void 0),i&&(i.prevSub=n,r.nextSub=void 0),e.subs===r&&(e.subs=n,!n&&e.computed)){e.computed.flags&=-5;for(let a=e.computed.deps;a;a=a.nextDep)vR(a,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function WK(r){const{prevDep:t,nextDep:e}=r;t&&(t.nextDep=e,r.prevDep=void 0),e&&(e.prevDep=t,r.nextDep=void 0)}let uo=!0;const b6=[];function $u(){b6.push(uo),uo=!1}function Yu(){const r=b6.pop();uo=r===void 0?!0:r}function ZD(r){const{cleanup:t}=r;if(r.cleanup=void 0,t){const e=mr;mr=void 0;try{t()}finally{mr=e}}}let um=0;class HK{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class mR{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!mr||!uo||mr===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==mr)e=this.activeLink=new HK(mr,this),mr.deps?(e.prevDep=mr.depsTail,mr.depsTail.nextDep=e,mr.depsTail=e):mr.deps=mr.depsTail=e,E6(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const n=e.nextDep;n.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=n),e.prevDep=mr.depsTail,e.nextDep=void 0,mr.depsTail.nextDep=e,mr.depsTail=e,mr.deps===e&&(mr.deps=n)}return e}trigger(t){this.version++,um++,this.notify(t)}notify(t){gR();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{pR()}}}function E6(r){if(r.dep.sc++,r.sub.flags&4){const t=r.dep.computed;if(t&&!r.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)E6(n)}const e=r.dep.subs;e!==r&&(r.prevSub=e,e&&(e.nextSub=r)),r.dep.subs=r}}const cM=new WeakMap,mc=Symbol(""),fM=Symbol(""),hm=Symbol("");function Wn(r,t,e){if(uo&&mr){let n=cM.get(r);n||cM.set(r,n=new Map);let i=n.get(e);i||(n.set(e,i=new mR),i.map=n,i.key=e),i.track()}}function Bs(r,t,e,n,i,a){const o=cM.get(r);if(!o){um++;return}const s=l=>{l&&l.trigger()};if(gR(),t==="clear")o.forEach(s);else{const l=Jt(r),u=l&&dR(e);if(l&&e==="length"){const h=Number(n);o.forEach((c,f)=>{(f==="length"||f===hm||!go(f)&&f>=h)&&s(c)})}else switch((e!==void 0||o.has(void 0))&&s(o.get(e)),u&&s(o.get(hm)),t){case"add":l?u&&s(o.get("length")):(s(o.get(mc)),Ed(r)&&s(o.get(fM)));break;case"delete":l||(s(o.get(mc)),Ed(r)&&s(o.get(fM)));break;case"set":Ed(r)&&s(o.get(mc));break}}pR()}function hf(r){const t=je(r);return t===r?t:(Wn(t,"iterate",hm),Ba(r)?t:t.map(Hn))}function BS(r){return Wn(r=je(r),"iterate",hm),r}const $K={__proto__:null,[Symbol.iterator](){return _T(this,Symbol.iterator,Hn)},concat(...r){return hf(this).concat(...r.map(t=>Jt(t)?hf(t):t))},entries(){return _T(this,"entries",r=>(r[1]=Hn(r[1]),r))},every(r,t){return bs(this,"every",r,t,void 0,arguments)},filter(r,t){return bs(this,"filter",r,t,e=>e.map(Hn),arguments)},find(r,t){return bs(this,"find",r,t,Hn,arguments)},findIndex(r,t){return bs(this,"findIndex",r,t,void 0,arguments)},findLast(r,t){return bs(this,"findLast",r,t,Hn,arguments)},findLastIndex(r,t){return bs(this,"findLastIndex",r,t,void 0,arguments)},forEach(r,t){return bs(this,"forEach",r,t,void 0,arguments)},includes(...r){return xT(this,"includes",r)},indexOf(...r){return xT(this,"indexOf",r)},join(r){return hf(this).join(r)},lastIndexOf(...r){return xT(this,"lastIndexOf",r)},map(r,t){return bs(this,"map",r,t,void 0,arguments)},pop(){return cp(this,"pop")},push(...r){return cp(this,"push",r)},reduce(r,...t){return jD(this,"reduce",r,t)},reduceRight(r,...t){return jD(this,"reduceRight",r,t)},shift(){return cp(this,"shift")},some(r,t){return bs(this,"some",r,t,void 0,arguments)},splice(...r){return cp(this,"splice",r)},toReversed(){return hf(this).toReversed()},toSorted(r){return hf(this).toSorted(r)},toSpliced(...r){return hf(this).toSpliced(...r)},unshift(...r){return cp(this,"unshift",r)},values(){return _T(this,"values",Hn)}};function _T(r,t,e){const n=BS(r),i=n[t]();return n!==r&&!Ba(r)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.value&&(a.value=e(a.value)),a}),i}const YK=Array.prototype;function bs(r,t,e,n,i,a){const o=BS(r),s=o!==r&&!Ba(r),l=o[t];if(l!==YK[t]){const c=l.apply(r,a);return s?Hn(c):c}let u=e;o!==r&&(s?u=function(c,f){return e.call(this,Hn(c),f,r)}:e.length>2&&(u=function(c,f){return e.call(this,c,f,r)}));const h=l.call(o,u,n);return s&&i?i(h):h}function jD(r,t,e,n){const i=BS(r);let a=e;return i!==r&&(Ba(r)?e.length>3&&(a=function(o,s,l){return e.call(this,o,s,l,r)}):a=function(o,s,l){return e.call(this,o,Hn(s),l,r)}),i[t](a,...n)}function xT(r,t,e){const n=je(r);Wn(n,"iterate",hm);const i=n[t](...e);return(i===-1||i===!1)&&xR(e[0])?(e[0]=je(e[0]),n[t](...e)):i}function cp(r,t,e=[]){$u(),gR();const n=je(r)[t].apply(r,e);return pR(),Yu(),n}const XK=hR("__proto__,__v_isRef,__isVue"),C6=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(go));function ZK(r){go(r)||(r=String(r));const t=je(this);return Wn(t,"has",r),t.hasOwnProperty(r)}class M6{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,n){const i=this._isReadonly,a=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return a;if(e==="__v_raw")return n===(i?a?iq:P6:a?R6:I6).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=Jt(t);if(!i){let l;if(o&&(l=$K[e]))return l;if(e==="hasOwnProperty")return ZK}const s=Reflect.get(t,e,wn(t)?t:n);return(go(e)?C6.has(e):XK(e))||(i||Wn(t,"get",e),a)?s:wn(s)?o&&dR(e)?s:s.value:vr(s)?i?D6(s):zS(s):s}}class A6 extends M6{constructor(t=!1){super(!1,t)}set(t,e,n,i){let a=t[e];if(!this._isShallow){const l=Pc(a);if(!Ba(n)&&!Pc(n)&&(a=je(a),n=je(n)),!Jt(t)&&wn(a)&&!wn(n))return l?!1:(a.value=n,!0)}const o=Jt(t)&&dR(e)?Number(e)<t.length:Qe(t,e),s=Reflect.set(t,e,n,wn(t)?t:i);return t===je(i)&&(o?pu(n,a)&&Bs(t,"set",e,n):Bs(t,"add",e,n)),s}deleteProperty(t,e){const n=Qe(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&Bs(t,"delete",e,void 0),i}has(t,e){const n=Reflect.has(t,e);return(!go(e)||!C6.has(e))&&Wn(t,"has",e),n}ownKeys(t){return Wn(t,"iterate",Jt(t)?"length":mc),Reflect.ownKeys(t)}}class jK extends M6{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const KK=new A6,qK=new jK,JK=new A6(!0);const dM=r=>r,f0=r=>Reflect.getPrototypeOf(r);function QK(r,t,e){return function(...n){const i=this.__v_raw,a=je(i),o=Ed(a),s=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=i[r](...n),h=e?dM:t?gM:Hn;return!t&&Wn(a,"iterate",l?fM:mc),{next(){const{value:c,done:f}=u.next();return f?{value:c,done:f}:{value:s?[h(c[0]),h(c[1])]:h(c),done:f}},[Symbol.iterator](){return this}}}}function d0(r){return function(...t){return r==="delete"?!1:r==="clear"?void 0:this}}function tq(r,t){const e={get(i){const a=this.__v_raw,o=je(a),s=je(i);r||(pu(i,s)&&Wn(o,"get",i),Wn(o,"get",s));const{has:l}=f0(o),u=t?dM:r?gM:Hn;if(l.call(o,i))return u(a.get(i));if(l.call(o,s))return u(a.get(s));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!r&&Wn(je(i),"iterate",mc),Reflect.get(i,"size",i)},has(i){const a=this.__v_raw,o=je(a),s=je(i);return r||(pu(i,s)&&Wn(o,"has",i),Wn(o,"has",s)),i===s?a.has(i):a.has(i)||a.has(s)},forEach(i,a){const o=this,s=o.__v_raw,l=je(s),u=t?dM:r?gM:Hn;return!r&&Wn(l,"iterate",mc),s.forEach((h,c)=>i.call(a,u(h),u(c),o))}};return jr(e,r?{add:d0("add"),set:d0("set"),delete:d0("delete"),clear:d0("clear")}:{add(i){!t&&!Ba(i)&&!Pc(i)&&(i=je(i));const a=je(this);return f0(a).has.call(a,i)||(a.add(i),Bs(a,"add",i,i)),this},set(i,a){!t&&!Ba(a)&&!Pc(a)&&(a=je(a));const o=je(this),{has:s,get:l}=f0(o);let u=s.call(o,i);u||(i=je(i),u=s.call(o,i));const h=l.call(o,i);return o.set(i,a),u?pu(a,h)&&Bs(o,"set",i,a):Bs(o,"add",i,a),this},delete(i){const a=je(this),{has:o,get:s}=f0(a);let l=o.call(a,i);l||(i=je(i),l=o.call(a,i)),s&&s.call(a,i);const u=a.delete(i);return l&&Bs(a,"delete",i,void 0),u},clear(){const i=je(this),a=i.size!==0,o=i.clear();return a&&Bs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=QK(i,r,t)}),e}function yR(r,t){const e=tq(r,t);return(n,i,a)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(Qe(e,i)&&i in n?e:n,i,a)}const eq={get:yR(!1,!1)},rq={get:yR(!1,!0)},nq={get:yR(!0,!1)};const I6=new WeakMap,R6=new WeakMap,P6=new WeakMap,iq=new WeakMap;function aq(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oq(r){return r.__v_skip||!Object.isExtensible(r)?0:aq(IK(r))}function zS(r){return Pc(r)?r:_R(r,!1,KK,eq,I6)}function L6(r){return _R(r,!1,JK,rq,R6)}function D6(r){return _R(r,!0,qK,nq,P6)}function _R(r,t,e,n,i){if(!vr(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const a=i.get(r);if(a)return a;const o=oq(r);if(o===0)return r;const s=new Proxy(r,o===2?n:e);return i.set(r,s),s}function Md(r){return Pc(r)?Md(r.__v_raw):!!(r&&r.__v_isReactive)}function Pc(r){return!!(r&&r.__v_isReadonly)}function Ba(r){return!!(r&&r.__v_isShallow)}function xR(r){return r?!!r.__v_raw:!1}function je(r){const t=r&&r.__v_raw;return t?je(t):r}function sq(r){return!Qe(r,"__v_skip")&&Object.isExtensible(r)&&d6(r,"__v_skip",!0),r}const Hn=r=>vr(r)?zS(r):r,gM=r=>vr(r)?D6(r):r;function wn(r){return r?r.__v_isRef===!0:!1}function ir(r){return O6(r,!1)}function Er(r){return O6(r,!0)}function O6(r,t){return wn(r)?r:new lq(r,t)}class lq{constructor(t,e){this.dep=new mR,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:je(t),this._value=e?t:Hn(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,n=this.__v_isShallow||Ba(t)||Pc(t);t=n?t:je(t),pu(t,e)&&(this._rawValue=t,this._value=n?t:Hn(t),this.dep.trigger())}}function qt(r){return wn(r)?r.value:r}const uq={get:(r,t,e)=>t==="__v_raw"?r:qt(Reflect.get(r,t,e)),set:(r,t,e,n)=>{const i=r[t];return wn(i)&&!wn(e)?(i.value=e,!0):Reflect.set(r,t,e,n)}};function N6(r){return Md(r)?r:new Proxy(r,uq)}class hq{constructor(t,e,n){this.fn=t,this.setter=e,this._value=void 0,this.dep=new mR(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=um-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&mr!==this)return x6(this,!0),!0}get value(){const t=this.dep.track();return T6(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function cq(r,t,e=!1){let n,i;return fe(r)?n=r:(n=r.get,i=r.set),new hq(n,i,e)}const g0={},U1=new WeakMap;let zh;function fq(r,t=!1,e=zh){if(e){let n=U1.get(e);n||U1.set(e,n=[]),n.push(r)}}function dq(r,t,e=dr){const{immediate:n,deep:i,once:a,scheduler:o,augmentJob:s,call:l}=e,u=x=>i?x:Ba(x)||i===!1||i===0?zs(x,1):zs(x);let h,c,f,d,g=!1,p=!1;if(wn(r)?(c=()=>r.value,g=Ba(r)):Md(r)?(c=()=>u(r),g=!0):Jt(r)?(p=!0,g=r.some(x=>Md(x)||Ba(x)),c=()=>r.map(x=>{if(wn(x))return x.value;if(Md(x))return u(x);if(fe(x))return l?l(x,2):x()})):fe(r)?t?c=l?()=>l(r,2):r:c=()=>{if(f){$u();try{f()}finally{Yu()}}const x=zh;zh=h;try{return l?l(r,3,[d]):r(d)}finally{zh=x}}:c=rs,t&&i){const x=c,w=i===!0?1/0:i;c=()=>zs(x(),w)}const v=UK(),m=()=>{h.stop(),v&&fR(v.effects,h)};if(a&&t){const x=t;t=(...w)=>{x(...w),m()}}let y=p?new Array(r.length).fill(g0):g0;const _=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(t){const w=h.run();if(i||g||(p?w.some((S,T)=>pu(S,y[T])):pu(w,y))){f&&f();const S=zh;zh=h;try{const T=[w,y===g0?void 0:p&&y[0]===g0?[]:y,d];l?l(t,3,T):t(...T),y=w}finally{zh=S}}}else h.run()};return s&&s(_),h=new y6(c),h.scheduler=o?()=>o(_,!1):_,d=x=>fq(x,!1,h),f=h.onStop=()=>{const x=U1.get(h);if(x){if(l)l(x,4);else for(const w of x)w();U1.delete(h)}},t?n?_(!0):y=h.run():o?o(_.bind(null,!0),!0):h.run(),m.pause=h.pause.bind(h),m.resume=h.resume.bind(h),m.stop=m,m}function zs(r,t=1/0,e){if(t<=0||!vr(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),t--,wn(r))zs(r.value,t,e);else if(Jt(r))for(let n=0;n<r.length;n++)zs(r[n],t,e);else if(DS(r)||Ed(r))r.forEach(n=>{zs(n,t,e)});else if(f6(r)){for(const n in r)zs(r[n],t,e);for(const n of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,n)&&zs(r[n],t,e)}return r}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yy(r,t,e,n){try{return n?r(...n):r()}catch(i){VS(i,t,e)}}function po(r,t,e,n){if(fe(r)){const i=yy(r,t,e,n);return i&&h6(i)&&i.catch(a=>{VS(a,t,e)}),i}if(Jt(r)){const i=[];for(let a=0;a<r.length;a++)i.push(po(r[a],t,e,n));return i}}function VS(r,t,e,n=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||dr;if(t){let s=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${e}`;for(;s;){const h=s.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](r,l,u)===!1)return}s=s.parent}if(a){$u(),yy(a,null,10,[r,l,u]),Yu();return}}gq(r,e,i,n,o)}function gq(r,t,e,n=!0,i=!1){if(i)throw r}const fi=[];let zo=-1;const Ad=[];let $l=null,Zf=0;const F6=Promise.resolve();let W1=null;function SR(r){const t=W1||F6;return r?t.then(this?r.bind(this):r):t}function pq(r){let t=zo+1,e=fi.length;for(;t<e;){const n=t+e>>>1,i=fi[n],a=cm(i);a<r||a===r&&i.flags&2?t=n+1:e=n}return t}function wR(r){if(!(r.flags&1)){const t=cm(r),e=fi[fi.length-1];!e||!(r.flags&2)&&t>=cm(e)?fi.push(r):fi.splice(pq(t),0,r),r.flags|=1,k6()}}function k6(){W1||(W1=F6.then(B6))}function vq(r){Jt(r)?Ad.push(...r):$l&&r.id===-1?$l.splice(Zf+1,0,r):r.flags&1||(Ad.push(r),r.flags|=1),k6()}function KD(r,t,e=zo+1){for(;e<fi.length;e++){const n=fi[e];if(n&&n.flags&2){if(r&&n.id!==r.uid)continue;fi.splice(e,1),e--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function G6(r){if(Ad.length){const t=[...new Set(Ad)].sort((e,n)=>cm(e)-cm(n));if(Ad.length=0,$l){$l.push(...t);return}for($l=t,Zf=0;Zf<$l.length;Zf++){const e=$l[Zf];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}$l=null,Zf=0}}const cm=r=>r.id==null?r.flags&2?-1:1/0:r.id;function B6(r){try{for(zo=0;zo<fi.length;zo++){const t=fi[zo];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),yy(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;zo<fi.length;zo++){const t=fi[zo];t&&(t.flags&=-2)}zo=-1,fi.length=0,G6(),W1=null,(fi.length||Ad.length)&&B6()}}let _n=null,z6=null;function H1(r){const t=_n;return _n=r,z6=r&&r.type.__scopeId||null,t}function TR(r,t=_n,e){if(!t||r._n)return r;const n=(...i)=>{n._d&&sO(-1);const a=H1(t);let o;try{o=r(...i)}finally{H1(a),n._d&&sO(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function qD(r,t){if(_n===null)return r;const e=YS(_n),n=r.dirs||(r.dirs=[]);for(let i=0;i<t.length;i++){let[a,o,s,l=dr]=t[i];a&&(fe(a)&&(a={mounted:a,updated:a}),a.deep&&zs(o),n.push({dir:a,instance:e,value:o,oldValue:void 0,arg:s,modifiers:l}))}return r}function nh(r,t,e,n){const i=r.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let l=s.dir[n];l&&($u(),po(l,e,8,[r.el,s,r,t]),Yu())}}const mq=Symbol("_vte"),V6=r=>r.__isTeleport,Yl=Symbol("_leaveCb"),p0=Symbol("_enterCb");function yq(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fn(()=>{r.isMounted=!0}),jc(()=>{r.isUnmounting=!0}),r}const va=[Function,Array],U6={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:va,onEnter:va,onAfterEnter:va,onEnterCancelled:va,onBeforeLeave:va,onLeave:va,onAfterLeave:va,onLeaveCancelled:va,onBeforeAppear:va,onAppear:va,onAfterAppear:va,onAppearCancelled:va},W6=r=>{const t=r.subTree;return t.component?W6(t.component):t},_q={name:"BaseTransition",props:U6,setup(r,{slots:t}){const e=gJ(),n=yq();return()=>{const i=t.default&&Y6(t.default(),!0);if(!i||!i.length)return;const a=H6(i),o=je(r),{mode:s}=o;if(n.isLeaving)return ST(a);const l=JD(a);if(!l)return ST(a);let u=pM(l,o,n,e,f=>u=f);l.type!==gi&&fm(l,u);const h=e.subTree,c=h&&JD(h);if(c&&c.type!==gi&&!Jh(l,c)&&W6(e).type!==gi){const f=pM(c,o,n,e);if(fm(c,f),s==="out-in"&&l.type!==gi)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,e.job.flags&8||e.update(),delete f.afterLeave},ST(a);s==="in-out"&&l.type!==gi&&(f.delayLeave=(d,g,p)=>{const v=$6(n,c);v[String(c.key)]=c,d[Yl]=()=>{g(),d[Yl]=void 0,delete u.delayedLeave},u.delayedLeave=p})}return a}}};function H6(r){let t=r[0];if(r.length>1){for(const e of r)if(e.type!==gi){t=e;break}}return t}const xq=_q;function $6(r,t){const{leavingVNodes:e}=r;let n=e.get(t.type);return n||(n=Object.create(null),e.set(t.type,n)),n}function pM(r,t,e,n,i){const{appear:a,mode:o,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:c,onBeforeLeave:f,onLeave:d,onAfterLeave:g,onLeaveCancelled:p,onBeforeAppear:v,onAppear:m,onAfterAppear:y,onAppearCancelled:_}=t,x=String(r.key),w=$6(e,r),S=(E,C)=>{E&&po(E,n,9,C)},T=(E,C)=>{const M=C[1];S(E,C),Jt(E)?E.every(A=>A.length<=1)&&M():E.length<=1&&M()},b={mode:o,persisted:s,beforeEnter(E){let C=l;if(!e.isMounted)if(a)C=v||l;else return;E[Yl]&&E[Yl](!0);const M=w[x];M&&Jh(r,M)&&M.el[Yl]&&M.el[Yl](),S(C,[E])},enter(E){let C=u,M=h,A=c;if(!e.isMounted)if(a)C=m||u,M=y||h,A=_||c;else return;let R=!1;const P=E[p0]=L=>{R||(R=!0,L?S(A,[E]):S(M,[E]),b.delayedLeave&&b.delayedLeave(),E[p0]=void 0)};C?T(C,[E,P]):P()},leave(E,C){const M=String(r.key);if(E[p0]&&E[p0](!0),e.isUnmounting)return C();S(f,[E]);let A=!1;const R=E[Yl]=P=>{A||(A=!0,C(),P?S(p,[E]):S(g,[E]),E[Yl]=void 0,w[M]===r&&delete w[M])};w[M]=r,d?T(d,[E,R]):R()},clone(E){const C=pM(E,t,e,n,i);return i&&i(C),C}};return b}function ST(r){if(US(r))return r=bu(r),r.children=null,r}function JD(r){if(!US(r))return V6(r.type)&&r.children?H6(r.children):r;const{shapeFlag:t,children:e}=r;if(e){if(t&16)return e[0];if(t&32&&fe(e.default))return e.default()}}function fm(r,t){r.shapeFlag&6&&r.component?(r.transition=t,fm(r.component.subTree,t)):r.shapeFlag&128?(r.ssContent.transition=t.clone(r.ssContent),r.ssFallback.transition=t.clone(r.ssFallback)):r.transition=t}function Y6(r,t=!1,e){let n=[],i=0;for(let a=0;a<r.length;a++){let o=r[a];const s=e==null?o.key:String(e)+String(o.key!=null?o.key:a);o.type===Pi?(o.patchFlag&128&&i++,n=n.concat(Y6(o.children,t,s))):(t||o.type!==gi)&&n.push(s!=null?bu(o,{key:s}):o)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Wr(r,t){return fe(r)?jr({name:r.name},t,{setup:r}):r}function X6(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}function vM(r,t,e,n,i=!1){if(Jt(r)){r.forEach((g,p)=>vM(g,t&&(Jt(t)?t[p]:t),e,n,i));return}if(Id(n)&&!i)return;const a=n.shapeFlag&4?YS(n.component):n.el,o=i?null:a,{i:s,r:l}=r,u=t&&t.r,h=s.refs===dr?s.refs={}:s.refs,c=s.setupState,f=je(c),d=c===dr?()=>!1:g=>Qe(f,g);if(u!=null&&u!==l&&(Vr(u)?(h[u]=null,d(u)&&(c[u]=null)):wn(u)&&(u.value=null)),fe(l))yy(l,s,12,[o,h]);else{const g=Vr(l),p=wn(l);if(g||p){const v=()=>{if(r.f){const m=g?d(l)?c[l]:h[l]:l.value;i?Jt(m)&&fR(m,a):Jt(m)?m.includes(a)||m.push(a):g?(h[l]=[a],d(l)&&(c[l]=h[l])):(l.value=[a],r.k&&(h[r.k]=l.value))}else g?(h[l]=o,d(l)&&(c[l]=o)):p&&(l.value=o,r.k&&(h[r.k]=o))};o?(v.id=-1,Zi(v,e)):v()}}}FS().requestIdleCallback;FS().cancelIdleCallback;const Id=r=>!!r.type.__asyncLoader,US=r=>r.type.__isKeepAlive;function Sq(r,t){Z6(r,"a",t)}function wq(r,t){Z6(r,"da",t)}function Z6(r,t,e=In){const n=r.__wdc||(r.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(WS(t,n,e),e){let i=e.parent;for(;i&&i.parent;)US(i.parent.vnode)&&Tq(n,t,e,i),i=i.parent}}function Tq(r,t,e,n){const i=WS(t,r,n,!0);K6(()=>{fR(n[t],i)},e)}function WS(r,t,e=In,n=!1){if(e){const i=e[r]||(e[r]=[]),a=t.__weh||(t.__weh=(...o)=>{$u();const s=_y(e),l=po(t,e,r,o);return s(),Yu(),l});return n?i.unshift(a):i.push(a),a}}const pl=r=>(t,e=In)=>{(!vm||r==="sp")&&WS(r,(...n)=>t(...n),e)},j6=pl("bm"),fn=pl("m"),bq=pl("bu"),Eq=pl("u"),jc=pl("bum"),K6=pl("um"),Cq=pl("sp"),Mq=pl("rtg"),Aq=pl("rtc");function Iq(r,t=In){WS("ec",r,t)}const Rq="components";function q6(r,t){return Lq(Rq,r,!0,t)||r}const Pq=Symbol.for("v-ndc");function Lq(r,t,e=!0,n=!1){const i=_n||In;if(i){const a=i.type;{const s=_J(a,!1);if(s&&(s===t||s===Ua(t)||s===NS(Ua(t))))return a}const o=QD(i[r]||a[r],t)||QD(i.appContext[r],t);return!o&&n?a:o}}function QD(r,t){return r&&(r[t]||r[Ua(t)]||r[NS(Ua(t))])}function fBt(r,t,e,n){let i;const a=e,o=Jt(r);if(o||Vr(r)){const s=o&&Md(r);let l=!1;s&&(l=!Ba(r),r=BS(r)),i=new Array(r.length);for(let u=0,h=r.length;u<h;u++)i[u]=t(l?Hn(r[u]):r[u],u,void 0,a)}else if(typeof r=="number"){i=new Array(r);for(let s=0;s<r;s++)i[s]=t(s+1,s,void 0,a)}else if(vr(r))if(r[Symbol.iterator])i=Array.from(r,(s,l)=>t(s,l,void 0,a));else{const s=Object.keys(r);i=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const h=s[l];i[l]=t(r[h],h,l,a)}}else i=[];return i}function Ya(r,t,e={},n,i){if(_n.ce||_n.parent&&Id(_n.parent)&&_n.parent.ce)return nl(),gm(Pi,null,[an("slot",e,n)],64);let a=r[t];a&&a._c&&(a._d=!1),nl();const o=a&&J6(a(e)),s=e.key||o&&o.key,l=gm(Pi,{key:(s&&!go(s)?s:`_${t}`)+(!o&&n?"_fb":"")},o||[],o&&r._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function J6(r){return r.some(t=>pm(t)?!(t.type===gi||t.type===Pi&&!J6(t.children)):!0)?r:null}const mM=r=>r?m8(r)?YS(r):mM(r.parent):null,Av=jr(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>mM(r.parent),$root:r=>mM(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>bR(r),$forceUpdate:r=>r.f||(r.f=()=>{wR(r.update)}),$nextTick:r=>r.n||(r.n=SR.bind(r.proxy)),$watch:r=>Qq.bind(r)}),wT=(r,t)=>r!==dr&&!r.__isScriptSetup&&Qe(r,t),Dq={get({_:r},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:n,data:i,props:a,accessCache:o,type:s,appContext:l}=r;let u;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return e[t];case 3:return a[t]}else{if(wT(n,t))return o[t]=1,n[t];if(i!==dr&&Qe(i,t))return o[t]=2,i[t];if((u=r.propsOptions[0])&&Qe(u,t))return o[t]=3,a[t];if(e!==dr&&Qe(e,t))return o[t]=4,e[t];yM&&(o[t]=0)}}const h=Av[t];let c,f;if(h)return t==="$attrs"&&Wn(r.attrs,"get",""),h(r);if((c=s.__cssModules)&&(c=c[t]))return c;if(e!==dr&&Qe(e,t))return o[t]=4,e[t];if(f=l.config.globalProperties,Qe(f,t))return f[t]},set({_:r},t,e){const{data:n,setupState:i,ctx:a}=r;return wT(i,t)?(i[t]=e,!0):n!==dr&&Qe(n,t)?(n[t]=e,!0):Qe(r.props,t)||t[0]==="$"&&t.slice(1)in r?!1:(a[t]=e,!0)},has({_:{data:r,setupState:t,accessCache:e,ctx:n,appContext:i,propsOptions:a}},o){let s;return!!e[o]||r!==dr&&Qe(r,o)||wT(t,o)||(s=a[0])&&Qe(s,o)||Qe(n,o)||Qe(Av,o)||Qe(i.config.globalProperties,o)},defineProperty(r,t,e){return e.get!=null?r._.accessCache[t]=0:Qe(e,"value")&&this.set(r,t,e.value,null),Reflect.defineProperty(r,t,e)}};function tO(r){return Jt(r)?r.reduce((t,e)=>(t[e]=null,t),{}):r}let yM=!0;function Oq(r){const t=bR(r),e=r.proxy,n=r.ctx;yM=!1,t.beforeCreate&&eO(t.beforeCreate,r,"bc");const{data:i,computed:a,methods:o,watch:s,provide:l,inject:u,created:h,beforeMount:c,mounted:f,beforeUpdate:d,updated:g,activated:p,deactivated:v,beforeDestroy:m,beforeUnmount:y,destroyed:_,unmounted:x,render:w,renderTracked:S,renderTriggered:T,errorCaptured:b,serverPrefetch:E,expose:C,inheritAttrs:M,components:A,directives:R,filters:P}=t;if(u&&Nq(u,n,null),o)for(const k in o){const F=o[k];fe(F)&&(n[k]=F.bind(e))}if(i){const k=i.call(e,e);vr(k)&&(r.data=zS(k))}if(yM=!0,a)for(const k in a){const F=a[k],B=fe(F)?F.bind(e,e):fe(F.get)?F.get.bind(e,e):rs,V=!fe(F)&&fe(F.set)?F.set.bind(e):rs,Y=Zn({get:B,set:V});Object.defineProperty(n,k,{enumerable:!0,configurable:!0,get:()=>Y.value,set:q=>Y.value=q})}if(s)for(const k in s)Q6(s[k],n,e,k);if(l){const k=fe(l)?l.call(e):l;Reflect.ownKeys(k).forEach(F=>{ns(F,k[F])})}h&&eO(h,r,"c");function D(k,F){Jt(F)?F.forEach(B=>k(B.bind(e))):F&&k(F.bind(e))}if(D(j6,c),D(fn,f),D(bq,d),D(Eq,g),D(Sq,p),D(wq,v),D(Iq,b),D(Aq,S),D(Mq,T),D(jc,y),D(K6,x),D(Cq,E),Jt(C))if(C.length){const k=r.exposed||(r.exposed={});C.forEach(F=>{Object.defineProperty(k,F,{get:()=>e[F],set:B=>e[F]=B})})}else r.exposed||(r.exposed={});w&&r.render===rs&&(r.render=w),M!=null&&(r.inheritAttrs=M),A&&(r.components=A),R&&(r.directives=R),E&&X6(r)}function Nq(r,t,e=rs){Jt(r)&&(r=_M(r));for(const n in r){const i=r[n];let a;vr(i)?"default"in i?a=$e(i.from||n,i.default,!0):a=$e(i.from||n):a=$e(i),wn(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[n]=a}}function eO(r,t,e){po(Jt(r)?r.map(n=>n.bind(t.proxy)):r.bind(t.proxy),t,e)}function Q6(r,t,e,n){let i=n.includes(".")?f8(e,n):()=>e[n];if(Vr(r)){const a=t[r];fe(a)&&He(i,a)}else if(fe(r))He(i,r.bind(e));else if(vr(r))if(Jt(r))r.forEach(a=>Q6(a,t,e,n));else{const a=fe(r.handler)?r.handler.bind(e):t[r.handler];fe(a)&&He(i,a,r)}}function bR(r){const t=r.type,{mixins:e,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=r.appContext,s=a.get(t);let l;return s?l=s:!i.length&&!e&&!n?l=t:(l={},i.length&&i.forEach(u=>$1(l,u,o,!0)),$1(l,t,o)),vr(t)&&a.set(t,l),l}function $1(r,t,e,n=!1){const{mixins:i,extends:a}=t;a&&$1(r,a,e,!0),i&&i.forEach(o=>$1(r,o,e,!0));for(const o in t)if(!(n&&o==="expose")){const s=Fq[o]||e&&e[o];r[o]=s?s(r[o],t[o]):t[o]}return r}const Fq={data:rO,props:nO,emits:nO,methods:nv,computed:nv,beforeCreate:ii,created:ii,beforeMount:ii,mounted:ii,beforeUpdate:ii,updated:ii,beforeDestroy:ii,beforeUnmount:ii,destroyed:ii,unmounted:ii,activated:ii,deactivated:ii,errorCaptured:ii,serverPrefetch:ii,components:nv,directives:nv,watch:Gq,provide:rO,inject:kq};function rO(r,t){return t?r?function(){return jr(fe(r)?r.call(this,this):r,fe(t)?t.call(this,this):t)}:t:r}function kq(r,t){return nv(_M(r),_M(t))}function _M(r){if(Jt(r)){const t={};for(let e=0;e<r.length;e++)t[r[e]]=r[e];return t}return r}function ii(r,t){return r?[...new Set([].concat(r,t))]:t}function nv(r,t){return r?jr(Object.create(null),r,t):t}function nO(r,t){return r?Jt(r)&&Jt(t)?[...new Set([...r,...t])]:jr(Object.create(null),tO(r),tO(t??{})):t}function Gq(r,t){if(!r)return t;if(!t)return r;const e=jr(Object.create(null),r);for(const n in t)e[n]=ii(r[n],t[n]);return e}function t8(){return{app:null,config:{isNativeTag:MK,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bq=0;function zq(r,t){return function(n,i=null){fe(n)||(n=jr({},n)),i!=null&&!vr(i)&&(i=null);const a=t8(),o=new WeakSet,s=[];let l=!1;const u=a.app={_uid:Bq++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:SJ,get config(){return a.config},set config(h){},use(h,...c){return o.has(h)||(h&&fe(h.install)?(o.add(h),h.install(u,...c)):fe(h)&&(o.add(h),h(u,...c))),u},mixin(h){return a.mixins.includes(h)||a.mixins.push(h),u},component(h,c){return c?(a.components[h]=c,u):a.components[h]},directive(h,c){return c?(a.directives[h]=c,u):a.directives[h]},mount(h,c,f){if(!l){const d=u._ceVNode||an(n,i);return d.appContext=a,f===!0?f="svg":f===!1&&(f=void 0),c&&t?t(d,h):r(d,h,f),l=!0,u._container=h,h.__vue_app__=u,YS(d.component)}},onUnmount(h){s.push(h)},unmount(){l&&(po(s,u._instance,16),r(null,u._container),delete u._container.__vue_app__)},provide(h,c){return a.provides[h]=c,u},runWithContext(h){const c=Rd;Rd=u;try{return h()}finally{Rd=c}}};return u}}let Rd=null;function ns(r,t){if(In){let e=In.provides;const n=In.parent&&In.parent.provides;n===e&&(e=In.provides=Object.create(n)),e[r]=t}}function $e(r,t,e=!1){const n=In||_n;if(n||Rd){const i=Rd?Rd._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&r in i)return i[r];if(arguments.length>1)return e&&fe(t)?t.call(n&&n.proxy):t}}const e8={},r8=()=>Object.create(e8),n8=r=>Object.getPrototypeOf(r)===e8;function Vq(r,t,e,n=!1){const i={},a=r8();r.propsDefaults=Object.create(null),i8(r,t,i,a);for(const o in r.propsOptions[0])o in i||(i[o]=void 0);e?r.props=n?i:L6(i):r.type.props?r.props=i:r.props=a,r.attrs=a}function Uq(r,t,e,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=r,s=je(i),[l]=r.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=r.vnode.dynamicProps;for(let c=0;c<h.length;c++){let f=h[c];if(HS(r.emitsOptions,f))continue;const d=t[f];if(l)if(Qe(a,f))d!==a[f]&&(a[f]=d,u=!0);else{const g=Ua(f);i[g]=xM(l,s,g,d,r,!1)}else d!==a[f]&&(a[f]=d,u=!0)}}}else{i8(r,t,i,a)&&(u=!0);let h;for(const c in s)(!t||!Qe(t,c)&&((h=Zc(c))===c||!Qe(t,h)))&&(l?e&&(e[c]!==void 0||e[h]!==void 0)&&(i[c]=xM(l,s,c,void 0,r,!0)):delete i[c]);if(a!==s)for(const c in a)(!t||!Qe(t,c))&&(delete a[c],u=!0)}u&&Bs(r.attrs,"set","")}function i8(r,t,e,n){const[i,a]=r.propsOptions;let o=!1,s;if(t)for(let l in t){if(Ev(l))continue;const u=t[l];let h;i&&Qe(i,h=Ua(l))?!a||!a.includes(h)?e[h]=u:(s||(s={}))[h]=u:HS(r.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(a){const l=je(e),u=s||dr;for(let h=0;h<a.length;h++){const c=a[h];e[c]=xM(i,l,c,u[c],r,!Qe(u,c))}}return o}function xM(r,t,e,n,i,a){const o=r[e];if(o!=null){const s=Qe(o,"default");if(s&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&fe(l)){const{propsDefaults:u}=i;if(e in u)n=u[e];else{const h=_y(i);n=u[e]=l.call(null,t),h()}}else n=l;i.ce&&i.ce._setProp(e,n)}o[0]&&(a&&!s?n=!1:o[1]&&(n===""||n===Zc(e))&&(n=!0))}return n}const Wq=new WeakMap;function a8(r,t,e=!1){const n=e?Wq:t.propsCache,i=n.get(r);if(i)return i;const a=r.props,o={},s=[];let l=!1;if(!fe(r)){const h=c=>{l=!0;const[f,d]=a8(c,t,!0);jr(o,f),d&&s.push(...d)};!e&&t.mixins.length&&t.mixins.forEach(h),r.extends&&h(r.extends),r.mixins&&r.mixins.forEach(h)}if(!a&&!l)return vr(r)&&n.set(r,bd),bd;if(Jt(a))for(let h=0;h<a.length;h++){const c=Ua(a[h]);iO(c)&&(o[c]=dr)}else if(a)for(const h in a){const c=Ua(h);if(iO(c)){const f=a[h],d=o[c]=Jt(f)||fe(f)?{type:f}:jr({},f),g=d.type;let p=!1,v=!0;if(Jt(g))for(let m=0;m<g.length;++m){const y=g[m],_=fe(y)&&y.name;if(_==="Boolean"){p=!0;break}else _==="String"&&(v=!1)}else p=fe(g)&&g.name==="Boolean";d[0]=p,d[1]=v,(p||Qe(d,"default"))&&s.push(c)}}const u=[o,s];return vr(r)&&n.set(r,u),u}function iO(r){return r[0]!=="$"&&!Ev(r)}const o8=r=>r[0]==="_"||r==="$stable",ER=r=>Jt(r)?r.map(Ho):[Ho(r)],Hq=(r,t,e)=>{if(t._n)return t;const n=TR((...i)=>ER(t(...i)),e);return n._c=!1,n},s8=(r,t,e)=>{const n=r._ctx;for(const i in r){if(o8(i))continue;const a=r[i];if(fe(a))t[i]=Hq(i,a,n);else if(a!=null){const o=ER(a);t[i]=()=>o}}},l8=(r,t)=>{const e=ER(t);r.slots.default=()=>e},u8=(r,t,e)=>{for(const n in t)(e||n!=="_")&&(r[n]=t[n])},$q=(r,t,e)=>{const n=r.slots=r8();if(r.vnode.shapeFlag&32){const i=t._;i?(u8(n,t,e),e&&d6(n,"_",i,!0)):s8(t,n)}else t&&l8(r,t)},Yq=(r,t,e)=>{const{vnode:n,slots:i}=r;let a=!0,o=dr;if(n.shapeFlag&32){const s=t._;s?e&&s===1?a=!1:u8(i,t,e):(a=!t.$stable,s8(t,i)),o=t}else t&&(l8(r,t),o={default:1});if(a)for(const s in i)!o8(s)&&o[s]==null&&delete i[s]},Zi=oJ;function Xq(r){return Zq(r)}function Zq(r,t){const e=FS();e.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:h,parentNode:c,nextSibling:f,setScopeId:d=rs,insertStaticContent:g}=r,p=(O,N,H,Q=null,J=null,ot=null,ct=void 0,gt=null,pt=!!N.dynamicChildren)=>{if(O===N)return;O&&!Jh(O,N)&&(Q=$(O),q(O,J,ot,!0),O=null),N.patchFlag===-2&&(pt=!1,N.dynamicChildren=null);const{type:ut,ref:Lt,shapeFlag:Tt}=N;switch(ut){case $S:v(O,N,H,Q);break;case gi:m(O,N,H,Q);break;case ET:O==null&&y(N,H,Q,ct);break;case Pi:A(O,N,H,Q,J,ot,ct,gt,pt);break;default:Tt&1?w(O,N,H,Q,J,ot,ct,gt,pt):Tt&6?R(O,N,H,Q,J,ot,ct,gt,pt):(Tt&64||Tt&128)&&ut.process(O,N,H,Q,J,ot,ct,gt,pt,W)}Lt!=null&&J&&vM(Lt,O&&O.ref,ot,N||O,!N)},v=(O,N,H,Q)=>{if(O==null)n(N.el=s(N.children),H,Q);else{const J=N.el=O.el;N.children!==O.children&&u(J,N.children)}},m=(O,N,H,Q)=>{O==null?n(N.el=l(N.children||""),H,Q):N.el=O.el},y=(O,N,H,Q)=>{[O.el,O.anchor]=g(O.children,N,H,Q,O.el,O.anchor)},_=({el:O,anchor:N},H,Q)=>{let J;for(;O&&O!==N;)J=f(O),n(O,H,Q),O=J;n(N,H,Q)},x=({el:O,anchor:N})=>{let H;for(;O&&O!==N;)H=f(O),i(O),O=H;i(N)},w=(O,N,H,Q,J,ot,ct,gt,pt)=>{N.type==="svg"?ct="svg":N.type==="math"&&(ct="mathml"),O==null?S(N,H,Q,J,ot,ct,gt,pt):E(O,N,J,ot,ct,gt,pt)},S=(O,N,H,Q,J,ot,ct,gt)=>{let pt,ut;const{props:Lt,shapeFlag:Tt,transition:bt,dirs:Kt}=O;if(pt=O.el=o(O.type,ot,Lt&&Lt.is,Lt),Tt&8?h(pt,O.children):Tt&16&&b(O.children,pt,null,Q,J,TT(O,ot),ct,gt),Kt&&nh(O,null,Q,"created"),T(pt,O,O.scopeId,ct,Q),Lt){for(const Be in Lt)Be!=="value"&&!Ev(Be)&&a(pt,Be,null,Lt[Be],ot,Q);"value"in Lt&&a(pt,"value",null,Lt.value,ot),(ut=Lt.onVnodeBeforeMount)&&Eo(ut,Q,O)}Kt&&nh(O,null,Q,"beforeMount");const Se=jq(J,bt);Se&&bt.beforeEnter(pt),n(pt,N,H),((ut=Lt&&Lt.onVnodeMounted)||Se||Kt)&&Zi(()=>{ut&&Eo(ut,Q,O),Se&&bt.enter(pt),Kt&&nh(O,null,Q,"mounted")},J)},T=(O,N,H,Q,J)=>{if(H&&d(O,H),Q)for(let ot=0;ot<Q.length;ot++)d(O,Q[ot]);if(J){let ot=J.subTree;if(N===ot||g8(ot.type)&&(ot.ssContent===N||ot.ssFallback===N)){const ct=J.vnode;T(O,ct,ct.scopeId,ct.slotScopeIds,J.parent)}}},b=(O,N,H,Q,J,ot,ct,gt,pt=0)=>{for(let ut=pt;ut<O.length;ut++){const Lt=O[ut]=gt?Xl(O[ut]):Ho(O[ut]);p(null,Lt,N,H,Q,J,ot,ct,gt)}},E=(O,N,H,Q,J,ot,ct)=>{const gt=N.el=O.el;let{patchFlag:pt,dynamicChildren:ut,dirs:Lt}=N;pt|=O.patchFlag&16;const Tt=O.props||dr,bt=N.props||dr;let Kt;if(H&&ih(H,!1),(Kt=bt.onVnodeBeforeUpdate)&&Eo(Kt,H,N,O),Lt&&nh(N,O,H,"beforeUpdate"),H&&ih(H,!0),(Tt.innerHTML&&bt.innerHTML==null||Tt.textContent&&bt.textContent==null)&&h(gt,""),ut?C(O.dynamicChildren,ut,gt,H,Q,TT(N,J),ot):ct||F(O,N,gt,null,H,Q,TT(N,J),ot,!1),pt>0){if(pt&16)M(gt,Tt,bt,H,J);else if(pt&2&&Tt.class!==bt.class&&a(gt,"class",null,bt.class,J),pt&4&&a(gt,"style",Tt.style,bt.style,J),pt&8){const Se=N.dynamicProps;for(let Be=0;Be<Se.length;Be++){const Ie=Se[Be],En=Tt[Ie],Tr=bt[Ie];(Tr!==En||Ie==="value")&&a(gt,Ie,En,Tr,J,H)}}pt&1&&O.children!==N.children&&h(gt,N.children)}else!ct&&ut==null&&M(gt,Tt,bt,H,J);((Kt=bt.onVnodeUpdated)||Lt)&&Zi(()=>{Kt&&Eo(Kt,H,N,O),Lt&&nh(N,O,H,"updated")},Q)},C=(O,N,H,Q,J,ot,ct)=>{for(let gt=0;gt<N.length;gt++){const pt=O[gt],ut=N[gt],Lt=pt.el&&(pt.type===Pi||!Jh(pt,ut)||pt.shapeFlag&70)?c(pt.el):H;p(pt,ut,Lt,null,Q,J,ot,ct,!0)}},M=(O,N,H,Q,J)=>{if(N!==H){if(N!==dr)for(const ot in N)!Ev(ot)&&!(ot in H)&&a(O,ot,N[ot],null,J,Q);for(const ot in H){if(Ev(ot))continue;const ct=H[ot],gt=N[ot];ct!==gt&&ot!=="value"&&a(O,ot,gt,ct,J,Q)}"value"in H&&a(O,"value",N.value,H.value,J)}},A=(O,N,H,Q,J,ot,ct,gt,pt)=>{const ut=N.el=O?O.el:s(""),Lt=N.anchor=O?O.anchor:s("");let{patchFlag:Tt,dynamicChildren:bt,slotScopeIds:Kt}=N;Kt&&(gt=gt?gt.concat(Kt):Kt),O==null?(n(ut,H,Q),n(Lt,H,Q),b(N.children||[],H,Lt,J,ot,ct,gt,pt)):Tt>0&&Tt&64&&bt&&O.dynamicChildren?(C(O.dynamicChildren,bt,H,J,ot,ct,gt),(N.key!=null||J&&N===J.subTree)&&h8(O,N,!0)):F(O,N,H,Lt,J,ot,ct,gt,pt)},R=(O,N,H,Q,J,ot,ct,gt,pt)=>{N.slotScopeIds=gt,O==null?N.shapeFlag&512?J.ctx.activate(N,H,Q,ct,pt):P(N,H,Q,J,ot,ct,pt):L(O,N,pt)},P=(O,N,H,Q,J,ot,ct)=>{const gt=O.component=dJ(O,Q,J);if(US(O)&&(gt.ctx.renderer=W),pJ(gt,!1,ct),gt.asyncDep){if(J&&J.registerDep(gt,D,ct),!O.el){const pt=gt.subTree=an(gi);m(null,pt,N,H)}}else D(gt,O,N,H,J,ot,ct)},L=(O,N,H)=>{const Q=N.component=O.component;if(iJ(O,N,H))if(Q.asyncDep&&!Q.asyncResolved){k(Q,N,H);return}else Q.next=N,Q.update();else N.el=O.el,Q.vnode=N},D=(O,N,H,Q,J,ot,ct)=>{const gt=()=>{if(O.isMounted){let{next:Tt,bu:bt,u:Kt,parent:Se,vnode:Be}=O;{const Jr=c8(O);if(Jr){Tt&&(Tt.el=Be.el,k(O,Tt,ct)),Jr.asyncDep.then(()=>{O.isUnmounted||gt()});return}}let Ie=Tt,En;ih(O,!1),Tt?(Tt.el=Be.el,k(O,Tt,ct)):Tt=Be,bt&&o1(bt),(En=Tt.props&&Tt.props.onVnodeBeforeUpdate)&&Eo(En,Se,Tt,Be),ih(O,!0);const Tr=bT(O),ei=O.subTree;O.subTree=Tr,p(ei,Tr,c(ei.el),$(ei),O,J,ot),Tt.el=Tr.el,Ie===null&&aJ(O,Tr.el),Kt&&Zi(Kt,J),(En=Tt.props&&Tt.props.onVnodeUpdated)&&Zi(()=>Eo(En,Se,Tt,Be),J)}else{let Tt;const{el:bt,props:Kt}=N,{bm:Se,m:Be,parent:Ie,root:En,type:Tr}=O,ei=Id(N);if(ih(O,!1),Se&&o1(Se),!ei&&(Tt=Kt&&Kt.onVnodeBeforeMount)&&Eo(Tt,Ie,N),ih(O,!0),bt&&at){const Jr=()=>{O.subTree=bT(O),at(bt,O.subTree,O,J,null)};ei&&Tr.__asyncHydrate?Tr.__asyncHydrate(bt,O,Jr):Jr()}else{En.ce&&En.ce._injectChildStyle(Tr);const Jr=O.subTree=bT(O);p(null,Jr,H,Q,O,J,ot),N.el=Jr.el}if(Be&&Zi(Be,J),!ei&&(Tt=Kt&&Kt.onVnodeMounted)){const Jr=N;Zi(()=>Eo(Tt,Ie,Jr),J)}(N.shapeFlag&256||Ie&&Id(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&O.a&&Zi(O.a,J),O.isMounted=!0,N=H=Q=null}};O.scope.on();const pt=O.effect=new y6(gt);O.scope.off();const ut=O.update=pt.run.bind(pt),Lt=O.job=pt.runIfDirty.bind(pt);Lt.i=O,Lt.id=O.uid,pt.scheduler=()=>wR(Lt),ih(O,!0),ut()},k=(O,N,H)=>{N.component=O;const Q=O.vnode.props;O.vnode=N,O.next=null,Uq(O,N.props,Q,H),Yq(O,N.children,H),$u(),KD(O),Yu()},F=(O,N,H,Q,J,ot,ct,gt,pt=!1)=>{const ut=O&&O.children,Lt=O?O.shapeFlag:0,Tt=N.children,{patchFlag:bt,shapeFlag:Kt}=N;if(bt>0){if(bt&128){V(ut,Tt,H,Q,J,ot,ct,gt,pt);return}else if(bt&256){B(ut,Tt,H,Q,J,ot,ct,gt,pt);return}}Kt&8?(Lt&16&&mt(ut,J,ot),Tt!==ut&&h(H,Tt)):Lt&16?Kt&16?V(ut,Tt,H,Q,J,ot,ct,gt,pt):mt(ut,J,ot,!0):(Lt&8&&h(H,""),Kt&16&&b(Tt,H,Q,J,ot,ct,gt,pt))},B=(O,N,H,Q,J,ot,ct,gt,pt)=>{O=O||bd,N=N||bd;const ut=O.length,Lt=N.length,Tt=Math.min(ut,Lt);let bt;for(bt=0;bt<Tt;bt++){const Kt=N[bt]=pt?Xl(N[bt]):Ho(N[bt]);p(O[bt],Kt,H,null,J,ot,ct,gt,pt)}ut>Lt?mt(O,J,ot,!0,!1,Tt):b(N,H,Q,J,ot,ct,gt,pt,Tt)},V=(O,N,H,Q,J,ot,ct,gt,pt)=>{let ut=0;const Lt=N.length;let Tt=O.length-1,bt=Lt-1;for(;ut<=Tt&&ut<=bt;){const Kt=O[ut],Se=N[ut]=pt?Xl(N[ut]):Ho(N[ut]);if(Jh(Kt,Se))p(Kt,Se,H,null,J,ot,ct,gt,pt);else break;ut++}for(;ut<=Tt&&ut<=bt;){const Kt=O[Tt],Se=N[bt]=pt?Xl(N[bt]):Ho(N[bt]);if(Jh(Kt,Se))p(Kt,Se,H,null,J,ot,ct,gt,pt);else break;Tt--,bt--}if(ut>Tt){if(ut<=bt){const Kt=bt+1,Se=Kt<Lt?N[Kt].el:Q;for(;ut<=bt;)p(null,N[ut]=pt?Xl(N[ut]):Ho(N[ut]),H,Se,J,ot,ct,gt,pt),ut++}}else if(ut>bt)for(;ut<=Tt;)q(O[ut],J,ot,!0),ut++;else{const Kt=ut,Se=ut,Be=new Map;for(ut=Se;ut<=bt;ut++){const _r=N[ut]=pt?Xl(N[ut]):Ho(N[ut]);_r.key!=null&&Be.set(_r.key,ut)}let Ie,En=0;const Tr=bt-Se+1;let ei=!1,Jr=0;const To=new Array(Tr);for(ut=0;ut<Tr;ut++)To[ut]=0;for(ut=Kt;ut<=Tt;ut++){const _r=O[ut];if(En>=Tr){q(_r,J,ot,!0);continue}let Cn;if(_r.key!=null)Cn=Be.get(_r.key);else for(Ie=Se;Ie<=bt;Ie++)if(To[Ie-Se]===0&&Jh(_r,N[Ie])){Cn=Ie;break}Cn===void 0?q(_r,J,ot,!0):(To[Cn-Se]=ut+1,Cn>=Jr?Jr=Cn:ei=!0,p(_r,N[Cn],H,null,J,ot,ct,gt,pt),En++)}const Tl=ei?Kq(To):bd;for(Ie=Tl.length-1,ut=Tr-1;ut>=0;ut--){const _r=Se+ut,Cn=N[_r],eh=_r+1<Lt?N[_r+1].el:Q;To[ut]===0?p(null,Cn,H,eh,J,ot,ct,gt,pt):ei&&(Ie<0||ut!==Tl[Ie]?Y(Cn,H,eh,2):Ie--)}}},Y=(O,N,H,Q,J=null)=>{const{el:ot,type:ct,transition:gt,children:pt,shapeFlag:ut}=O;if(ut&6){Y(O.component.subTree,N,H,Q);return}if(ut&128){O.suspense.move(N,H,Q);return}if(ut&64){ct.move(O,N,H,W);return}if(ct===Pi){n(ot,N,H);for(let Tt=0;Tt<pt.length;Tt++)Y(pt[Tt],N,H,Q);n(O.anchor,N,H);return}if(ct===ET){_(O,N,H);return}if(Q!==2&&ut&1&&gt)if(Q===0)gt.beforeEnter(ot),n(ot,N,H),Zi(()=>gt.enter(ot),J);else{const{leave:Tt,delayLeave:bt,afterLeave:Kt}=gt,Se=()=>n(ot,N,H),Be=()=>{Tt(ot,()=>{Se(),Kt&&Kt()})};bt?bt(ot,Se,Be):Be()}else n(ot,N,H)},q=(O,N,H,Q=!1,J=!1)=>{const{type:ot,props:ct,ref:gt,children:pt,dynamicChildren:ut,shapeFlag:Lt,patchFlag:Tt,dirs:bt,cacheIndex:Kt}=O;if(Tt===-2&&(J=!1),gt!=null&&vM(gt,null,H,O,!0),Kt!=null&&(N.renderCache[Kt]=void 0),Lt&256){N.ctx.deactivate(O);return}const Se=Lt&1&&bt,Be=!Id(O);let Ie;if(Be&&(Ie=ct&&ct.onVnodeBeforeUnmount)&&Eo(Ie,N,O),Lt&6)St(O.component,H,Q);else{if(Lt&128){O.suspense.unmount(H,Q);return}Se&&nh(O,null,N,"beforeUnmount"),Lt&64?O.type.remove(O,N,H,W,Q):ut&&!ut.hasOnce&&(ot!==Pi||Tt>0&&Tt&64)?mt(ut,N,H,!1,!0):(ot===Pi&&Tt&384||!J&&Lt&16)&&mt(pt,N,H),Q&&lt(O)}(Be&&(Ie=ct&&ct.onVnodeUnmounted)||Se)&&Zi(()=>{Ie&&Eo(Ie,N,O),Se&&nh(O,null,N,"unmounted")},H)},lt=O=>{const{type:N,el:H,anchor:Q,transition:J}=O;if(N===Pi){X(H,Q);return}if(N===ET){x(O);return}const ot=()=>{i(H),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(O.shapeFlag&1&&J&&!J.persisted){const{leave:ct,delayLeave:gt}=J,pt=()=>ct(H,ot);gt?gt(O.el,ot,pt):pt()}else ot()},X=(O,N)=>{let H;for(;O!==N;)H=f(O),i(O),O=H;i(N)},St=(O,N,H)=>{const{bum:Q,scope:J,job:ot,subTree:ct,um:gt,m:pt,a:ut}=O;aO(pt),aO(ut),Q&&o1(Q),J.stop(),ot&&(ot.flags|=8,q(ct,O,N,H)),gt&&Zi(gt,N),Zi(()=>{O.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},mt=(O,N,H,Q=!1,J=!1,ot=0)=>{for(let ct=ot;ct<O.length;ct++)q(O[ct],N,H,Q,J)},$=O=>{if(O.shapeFlag&6)return $(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const N=f(O.anchor||O.el),H=N&&N[mq];return H?f(H):N};let K=!1;const et=(O,N,H)=>{O==null?N._vnode&&q(N._vnode,null,null,!0):p(N._vnode||null,O,N,null,null,null,H),N._vnode=O,K||(K=!0,KD(),G6(),K=!1)},W={p,um:q,m:Y,r:lt,mt:P,mc:b,pc:F,pbc:C,n:$,o:r};let Z,at;return{render:et,hydrate:Z,createApp:zq(et,Z)}}function TT({type:r,props:t},e){return e==="svg"&&r==="foreignObject"||e==="mathml"&&r==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function ih({effect:r,job:t},e){e?(r.flags|=32,t.flags|=4):(r.flags&=-33,t.flags&=-5)}function jq(r,t){return(!r||r&&!r.pendingBranch)&&t&&!t.persisted}function h8(r,t,e=!1){const n=r.children,i=t.children;if(Jt(n)&&Jt(i))for(let a=0;a<n.length;a++){const o=n[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=Xl(i[a]),s.el=o.el),!e&&s.patchFlag!==-2&&h8(o,s)),s.type===$S&&(s.el=o.el)}}function Kq(r){const t=r.slice(),e=[0];let n,i,a,o,s;const l=r.length;for(n=0;n<l;n++){const u=r[n];if(u!==0){if(i=e[e.length-1],r[i]<u){t[n]=i,e.push(n);continue}for(a=0,o=e.length-1;a<o;)s=a+o>>1,r[e[s]]<u?a=s+1:o=s;u<r[e[a]]&&(a>0&&(t[n]=e[a-1]),e[a]=n)}}for(a=e.length,o=e[a-1];a-- >0;)e[a]=o,o=t[o];return e}function c8(r){const t=r.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:c8(t)}function aO(r){if(r)for(let t=0;t<r.length;t++)r[t].flags|=8}const qq=Symbol.for("v-scx"),Jq=()=>$e(qq);function Kc(r,t){return CR(r,null,t)}function He(r,t,e){return CR(r,t,e)}function CR(r,t,e=dr){const{immediate:n,deep:i,flush:a,once:o}=e,s=jr({},e),l=t&&n||!t&&a!=="post";let u;if(vm){if(a==="sync"){const d=Jq();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=rs,d.resume=rs,d.pause=rs,d}}const h=In;s.call=(d,g,p)=>po(d,h,g,p);let c=!1;a==="post"?s.scheduler=d=>{Zi(d,h&&h.suspense)}:a!=="sync"&&(c=!0,s.scheduler=(d,g)=>{g?d():wR(d)}),s.augmentJob=d=>{t&&(d.flags|=4),c&&(d.flags|=2,h&&(d.id=h.uid,d.i=h))};const f=dq(r,t,s);return vm&&(u?u.push(f):l&&f()),f}function Qq(r,t,e){const n=this.proxy,i=Vr(r)?r.includes(".")?f8(n,r):()=>n[r]:r.bind(n,n);let a;fe(t)?a=t:(a=t.handler,e=t);const o=_y(this),s=CR(i,a.bind(n),e);return o(),s}function f8(r,t){const e=t.split(".");return()=>{let n=r;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}const tJ=(r,t)=>t==="modelValue"||t==="model-value"?r.modelModifiers:r[`${t}Modifiers`]||r[`${Ua(t)}Modifiers`]||r[`${Zc(t)}Modifiers`];function eJ(r,t,...e){if(r.isUnmounted)return;const n=r.vnode.props||dr;let i=e;const a=t.startsWith("update:"),o=a&&tJ(n,t.slice(7));o&&(o.trim&&(i=e.map(h=>Vr(h)?h.trim():h)),o.number&&(i=e.map(V1)));let s,l=n[s=vT(t)]||n[s=vT(Ua(t))];!l&&a&&(l=n[s=vT(Zc(t))]),l&&po(l,r,6,i);const u=n[s+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,po(u,r,6,i)}}function d8(r,t,e=!1){const n=t.emitsCache,i=n.get(r);if(i!==void 0)return i;const a=r.emits;let o={},s=!1;if(!fe(r)){const l=u=>{const h=d8(u,t,!0);h&&(s=!0,jr(o,h))};!e&&t.mixins.length&&t.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!a&&!s?(vr(r)&&n.set(r,null),null):(Jt(a)?a.forEach(l=>o[l]=null):jr(o,a),vr(r)&&n.set(r,o),o)}function HS(r,t){return!r||!LS(t)?!1:(t=t.slice(2).replace(/Once$/,""),Qe(r,t[0].toLowerCase()+t.slice(1))||Qe(r,Zc(t))||Qe(r,t))}function bT(r){const{type:t,vnode:e,proxy:n,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:l,render:u,renderCache:h,props:c,data:f,setupState:d,ctx:g,inheritAttrs:p}=r,v=H1(r);let m,y;try{if(e.shapeFlag&4){const x=i||n,w=x;m=Ho(u.call(w,x,h,c,d,f,g)),y=s}else{const x=t;m=Ho(x.length>1?x(c,{attrs:s,slots:o,emit:l}):x(c,null)),y=t.props?s:rJ(s)}}catch(x){Iv.length=0,VS(x,r,1),m=an(gi)}let _=m;if(y&&p!==!1){const x=Object.keys(y),{shapeFlag:w}=_;x.length&&w&7&&(a&&x.some(cR)&&(y=nJ(y,a)),_=bu(_,y,!1,!0))}return e.dirs&&(_=bu(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(e.dirs):e.dirs),e.transition&&fm(_,e.transition),m=_,H1(v),m}const rJ=r=>{let t;for(const e in r)(e==="class"||e==="style"||LS(e))&&((t||(t={}))[e]=r[e]);return t},nJ=(r,t)=>{const e={};for(const n in r)(!cR(n)||!(n.slice(9)in t))&&(e[n]=r[n]);return e};function iJ(r,t,e){const{props:n,children:i,component:a}=r,{props:o,children:s,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return n?oO(n,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let c=0;c<h.length;c++){const f=h[c];if(o[f]!==n[f]&&!HS(u,f))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?oO(n,o,u):!0:!!o;return!1}function oO(r,t,e){const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==r[a]&&!HS(e,a))return!0}return!1}function aJ({vnode:r,parent:t},e){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=t.vnode).el=e,t=t.parent;else break}}const g8=r=>r.__isSuspense;function oJ(r,t){t&&t.pendingBranch?Jt(r)?t.effects.push(...r):t.effects.push(r):vq(r)}const Pi=Symbol.for("v-fgt"),$S=Symbol.for("v-txt"),gi=Symbol.for("v-cmt"),ET=Symbol.for("v-stc"),Iv=[];let ea=null;function nl(r=!1){Iv.push(ea=r?null:[])}function sJ(){Iv.pop(),ea=Iv[Iv.length-1]||null}let dm=1;function sO(r){dm+=r,r<0&&ea&&(ea.hasOnce=!0)}function p8(r){return r.dynamicChildren=dm>0?ea||bd:null,sJ(),dm>0&&ea&&ea.push(r),r}function Y1(r,t,e,n,i,a){return p8(Ta(r,t,e,n,i,a,!0))}function gm(r,t,e,n,i){return p8(an(r,t,e,n,i,!0))}function pm(r){return r?r.__v_isVNode===!0:!1}function Jh(r,t){return r.type===t.type&&r.key===t.key}const v8=({key:r})=>r??null,s1=({ref:r,ref_key:t,ref_for:e})=>(typeof r=="number"&&(r=""+r),r!=null?Vr(r)||wn(r)||fe(r)?{i:_n,r,k:t,f:!!e}:r:null);function Ta(r,t=null,e=null,n=0,i=null,a=r===Pi?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&v8(t),ref:t&&s1(t),scopeId:z6,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:_n};return s?(MR(l,e),a&128&&r.normalize(l)):e&&(l.shapeFlag|=Vr(e)?8:16),dm>0&&!o&&ea&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&ea.push(l),l}const an=lJ;function lJ(r,t=null,e=null,n=0,i=null,a=!1){if((!r||r===Pq)&&(r=gi),pm(r)){const s=bu(r,t,!0);return e&&MR(s,e),dm>0&&!a&&ea&&(s.shapeFlag&6?ea[ea.indexOf(r)]=s:ea.push(s)),s.patchFlag=-2,s}if(xJ(r)&&(r=r.__vccOpts),t){t=uJ(t);let{class:s,style:l}=t;s&&!Vr(s)&&(t.class=Cd(s)),vr(l)&&(xR(l)&&!Jt(l)&&(l=jr({},l)),t.style=kS(l))}const o=Vr(r)?1:g8(r)?128:V6(r)?64:vr(r)?4:fe(r)?2:0;return Ta(r,t,e,n,i,o,a,!0)}function uJ(r){return r?xR(r)||n8(r)?jr({},r):r:null}function bu(r,t,e=!1,n=!1){const{props:i,ref:a,patchFlag:o,children:s,transition:l}=r,u=t?AR(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:r.type,props:u,key:u&&v8(u),ref:t&&t.ref?e&&a?Jt(a)?a.concat(s1(t)):[a,s1(t)]:s1(t):a,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:s,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==Pi?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:l,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&bu(r.ssContent),ssFallback:r.ssFallback&&bu(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return l&&n&&fm(h,l.clone(h)),h}function hJ(r=" ",t=0){return an($S,null,r,t)}function Xu(r="",t=!1){return t?(nl(),gm(gi,null,r)):an(gi,null,r)}function Ho(r){return r==null||typeof r=="boolean"?an(gi):Jt(r)?an(Pi,null,r.slice()):pm(r)?Xl(r):an($S,null,String(r))}function Xl(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:bu(r)}function MR(r,t){let e=0;const{shapeFlag:n}=r;if(t==null)t=null;else if(Jt(t))e=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),MR(r,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!n8(t)?t._ctx=_n:i===3&&_n&&(_n.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else fe(t)?(t={default:t,_ctx:_n},e=32):(t=String(t),n&64?(e=16,t=[hJ(t)]):e=8);r.children=t,r.shapeFlag|=e}function AR(...r){const t={};for(let e=0;e<r.length;e++){const n=r[e];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Cd([t.class,n.class]));else if(i==="style")t.style=kS([t.style,n.style]);else if(LS(i)){const a=t[i],o=n[i];o&&a!==o&&!(Jt(a)&&a.includes(o))&&(t[i]=a?[].concat(a,o):o)}else i!==""&&(t[i]=n[i])}return t}function Eo(r,t,e,n=null){po(r,t,7,[e,n])}const cJ=t8();let fJ=0;function dJ(r,t,e){const n=r.type,i=(t?t.appContext:r.appContext)||cJ,a={uid:fJ++,vnode:r,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new VK(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:a8(n,i),emitsOptions:d8(n,i),emit:null,emitted:null,propsDefaults:dr,inheritAttrs:n.inheritAttrs,ctx:dr,data:dr,props:dr,attrs:dr,slots:dr,refs:dr,setupState:dr,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=eJ.bind(null,a),r.ce&&r.ce(a),a}let In=null;const gJ=()=>In||_n;let X1,SM;{const r=FS(),t=(e,n)=>{let i;return(i=r[e])||(i=r[e]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};X1=t("__VUE_INSTANCE_SETTERS__",e=>In=e),SM=t("__VUE_SSR_SETTERS__",e=>vm=e)}const _y=r=>{const t=In;return X1(r),r.scope.on(),()=>{r.scope.off(),X1(t)}},lO=()=>{In&&In.scope.off(),X1(null)};function m8(r){return r.vnode.shapeFlag&4}let vm=!1;function pJ(r,t=!1,e=!1){t&&SM(t);const{props:n,children:i}=r.vnode,a=m8(r);Vq(r,n,a,t),$q(r,i,e);const o=a?vJ(r,t):void 0;return t&&SM(!1),o}function vJ(r,t){const e=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,Dq);const{setup:n}=e;if(n){$u();const i=r.setupContext=n.length>1?yJ(r):null,a=_y(r),o=yy(n,r,0,[r.props,i]),s=h6(o);if(Yu(),a(),(s||r.sp)&&!Id(r)&&X6(r),s){if(o.then(lO,lO),t)return o.then(l=>{uO(r,l,t)}).catch(l=>{VS(l,r,0)});r.asyncDep=o}else uO(r,o,t)}else y8(r,t)}function uO(r,t,e){fe(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:vr(t)&&(r.setupState=N6(t)),y8(r,e)}let hO;function y8(r,t,e){const n=r.type;if(!r.render){if(!t&&hO&&!n.render){const i=n.template||bR(r).template;if(i){const{isCustomElement:a,compilerOptions:o}=r.appContext.config,{delimiters:s,compilerOptions:l}=n,u=jr(jr({isCustomElement:a,delimiters:s},o),l);n.render=hO(i,u)}}r.render=n.render||rs}{const i=_y(r);$u();try{Oq(r)}finally{Yu(),i()}}}const mJ={get(r,t){return Wn(r,"get",""),r[t]}};function yJ(r){const t=e=>{r.exposed=e||{}};return{attrs:new Proxy(r.attrs,mJ),slots:r.slots,emit:r.emit,expose:t}}function YS(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(N6(sq(r.exposed)),{get(t,e){if(e in t)return t[e];if(e in Av)return Av[e](r)},has(t,e){return e in t||e in Av}})):r.proxy}function _J(r,t=!0){return fe(r)?r.displayName||r.name:r.name||t&&r.__name}function xJ(r){return fe(r)&&"__vccOpts"in r}const Zn=(r,t)=>cq(r,t,vm);function mm(r,t,e){const n=arguments.length;return n===2?vr(t)&&!Jt(t)?pm(t)?an(r,null,[t]):an(r,t):an(r,null,t):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&pm(e)&&(e=[e]),an(r,t,e))}const SJ="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wM;const cO=typeof window<"u"&&window.trustedTypes;if(cO)try{wM=cO.createPolicy("vue",{createHTML:r=>r})}catch{}const _8=wM?r=>wM.createHTML(r):r=>r,wJ="http://www.w3.org/2000/svg",TJ="http://www.w3.org/1998/Math/MathML",Ds=typeof document<"u"?document:null,fO=Ds&&Ds.createElement("template"),bJ={insert:(r,t,e)=>{t.insertBefore(r,e||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,e,n)=>{const i=t==="svg"?Ds.createElementNS(wJ,r):t==="mathml"?Ds.createElementNS(TJ,r):e?Ds.createElement(r,{is:e}):Ds.createElement(r);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>Ds.createTextNode(r),createComment:r=>Ds.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Ds.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},insertStaticContent(r,t,e,n,i,a){const o=e?e.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===a||!(i=i.nextSibling)););else{fO.innerHTML=_8(n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r);const s=fO.content;if(n==="svg"||n==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},bl="transition",fp="animation",ym=Symbol("_vtc"),x8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},EJ=jr({},U6,x8),CJ=r=>(r.displayName="Transition",r.props=EJ,r),dBt=CJ((r,{slots:t})=>mm(xq,MJ(r),t)),ah=(r,t=[])=>{Jt(r)?r.forEach(e=>e(...t)):r&&r(...t)},dO=r=>r?Jt(r)?r.some(t=>t.length>1):r.length>1:!1;function MJ(r){const t={};for(const A in r)A in x8||(t[A]=r[A]);if(r.css===!1)return t;const{name:e="v",type:n,duration:i,enterFromClass:a=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:s=`${e}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:h=s,leaveFromClass:c=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:d=`${e}-leave-to`}=r,g=AJ(i),p=g&&g[0],v=g&&g[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:_,onLeave:x,onLeaveCancelled:w,onBeforeAppear:S=m,onAppear:T=y,onAppearCancelled:b=_}=t,E=(A,R,P)=>{oh(A,R?h:s),oh(A,R?u:o),P&&P()},C=(A,R)=>{A._isLeaving=!1,oh(A,c),oh(A,d),oh(A,f),R&&R()},M=A=>(R,P)=>{const L=A?T:y,D=()=>E(R,A,P);ah(L,[R,D]),gO(()=>{oh(R,A?l:a),El(R,A?h:s),dO(L)||pO(R,n,p,D)})};return jr(t,{onBeforeEnter(A){ah(m,[A]),El(A,a),El(A,o)},onBeforeAppear(A){ah(S,[A]),El(A,l),El(A,u)},onEnter:M(!1),onAppear:M(!0),onLeave(A,R){A._isLeaving=!0;const P=()=>C(A,R);El(A,c),El(A,f),PJ(),gO(()=>{A._isLeaving&&(oh(A,c),El(A,d),dO(x)||pO(A,n,v,P))}),ah(x,[A,P])},onEnterCancelled(A){E(A,!1),ah(_,[A])},onAppearCancelled(A){E(A,!0),ah(b,[A])},onLeaveCancelled(A){C(A),ah(w,[A])}})}function AJ(r){if(r==null)return null;if(vr(r))return[CT(r.enter),CT(r.leave)];{const t=CT(r);return[t,t]}}function CT(r){return LK(r)}function El(r,t){t.split(/\s+/).forEach(e=>e&&r.classList.add(e)),(r[ym]||(r[ym]=new Set)).add(t)}function oh(r,t){t.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const e=r[ym];e&&(e.delete(t),e.size||(r[ym]=void 0))}function gO(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let IJ=0;function pO(r,t,e,n){const i=r._endId=++IJ,a=()=>{i===r._endId&&n()};if(e!=null)return setTimeout(a,e);const{type:o,timeout:s,propCount:l}=RJ(r,t);if(!o)return n();const u=o+"end";let h=0;const c=()=>{r.removeEventListener(u,f),a()},f=d=>{d.target===r&&++h>=l&&c()};setTimeout(()=>{h<l&&c()},s+1),r.addEventListener(u,f)}function RJ(r,t){const e=window.getComputedStyle(r),n=g=>(e[g]||"").split(", "),i=n(`${bl}Delay`),a=n(`${bl}Duration`),o=vO(i,a),s=n(`${fp}Delay`),l=n(`${fp}Duration`),u=vO(s,l);let h=null,c=0,f=0;t===bl?o>0&&(h=bl,c=o,f=a.length):t===fp?u>0&&(h=fp,c=u,f=l.length):(c=Math.max(o,u),h=c>0?o>u?bl:fp:null,f=h?h===bl?a.length:l.length:0);const d=h===bl&&/\b(transform|all)(,|$)/.test(n(`${bl}Property`).toString());return{type:h,timeout:c,propCount:f,hasTransform:d}}function vO(r,t){for(;r.length<t.length;)r=r.concat(r);return Math.max(...t.map((e,n)=>mO(e)+mO(r[n])))}function mO(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function PJ(){return document.body.offsetHeight}function LJ(r,t,e){const n=r[ym];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?r.removeAttribute("class"):e?r.setAttribute("class",t):r.className=t}const Z1=Symbol("_vod"),S8=Symbol("_vsh"),gBt={beforeMount(r,{value:t},{transition:e}){r[Z1]=r.style.display==="none"?"":r.style.display,e&&t?e.beforeEnter(r):dp(r,t)},mounted(r,{value:t},{transition:e}){e&&t&&e.enter(r)},updated(r,{value:t,oldValue:e},{transition:n}){!t!=!e&&(n?t?(n.beforeEnter(r),dp(r,!0),n.enter(r)):n.leave(r,()=>{dp(r,!1)}):dp(r,t))},beforeUnmount(r,{value:t}){dp(r,t)}};function dp(r,t){r.style.display=t?r[Z1]:"none",r[S8]=!t}const DJ=Symbol(""),OJ=/(^|;)\s*display\s*:/;function NJ(r,t,e){const n=r.style,i=Vr(e);let a=!1;if(e&&!i){if(t)if(Vr(t))for(const o of t.split(";")){const s=o.slice(0,o.indexOf(":")).trim();e[s]==null&&l1(n,s,"")}else for(const o in t)e[o]==null&&l1(n,o,"");for(const o in e)o==="display"&&(a=!0),l1(n,o,e[o])}else if(i){if(t!==e){const o=n[DJ];o&&(e+=";"+o),n.cssText=e,a=OJ.test(e)}}else t&&r.removeAttribute("style");Z1 in r&&(r[Z1]=a?n.display:"",r[S8]&&(n.display="none"))}const yO=/\s*!important$/;function l1(r,t,e){if(Jt(e))e.forEach(n=>l1(r,t,n));else if(e==null&&(e=""),t.startsWith("--"))r.setProperty(t,e);else{const n=FJ(r,t);yO.test(e)?r.setProperty(Zc(n),e.replace(yO,""),"important"):r[n]=e}}const _O=["Webkit","Moz","ms"],MT={};function FJ(r,t){const e=MT[t];if(e)return e;let n=Ua(t);if(n!=="filter"&&n in r)return MT[t]=n;n=NS(n);for(let i=0;i<_O.length;i++){const a=_O[i]+n;if(a in r)return MT[t]=a}return t}const xO="http://www.w3.org/1999/xlink";function SO(r,t,e,n,i,a=GK(t)){n&&t.startsWith("xlink:")?e==null?r.removeAttributeNS(xO,t.slice(6,t.length)):r.setAttributeNS(xO,t,e):e==null||a&&!g6(e)?r.removeAttribute(t):r.setAttribute(t,a?"":go(e)?String(e):e)}function wO(r,t,e,n,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(r[t]=t==="innerHTML"?_8(e):e);return}const a=r.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?r.getAttribute("value")||"":r.value,l=e==null?r.type==="checkbox"?"on":"":String(e);(s!==l||!("_value"in r))&&(r.value=l),e==null&&r.removeAttribute(t),r._value=e;return}let o=!1;if(e===""||e==null){const s=typeof r[t];s==="boolean"?e=g6(e):e==null&&s==="string"?(e="",o=!0):s==="number"&&(e=0,o=!0)}try{r[t]=e}catch{}o&&r.removeAttribute(i||t)}function Qh(r,t,e,n){r.addEventListener(t,e,n)}function kJ(r,t,e,n){r.removeEventListener(t,e,n)}const TO=Symbol("_vei");function GJ(r,t,e,n,i=null){const a=r[TO]||(r[TO]={}),o=a[t];if(n&&o)o.value=n;else{const[s,l]=BJ(t);if(n){const u=a[t]=UJ(n,i);Qh(r,s,u,l)}else o&&(kJ(r,s,o,l),a[t]=void 0)}}const bO=/(?:Once|Passive|Capture)$/;function BJ(r){let t;if(bO.test(r)){t={};let n;for(;n=r.match(bO);)r=r.slice(0,r.length-n[0].length),t[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Zc(r.slice(2)),t]}let AT=0;const zJ=Promise.resolve(),VJ=()=>AT||(zJ.then(()=>AT=0),AT=Date.now());function UJ(r,t){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;po(WJ(n,e.value),t,5,[n])};return e.value=r,e.attached=VJ(),e}function WJ(r,t){if(Jt(t)){const e=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{e.call(r),r._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const EO=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,HJ=(r,t,e,n,i,a)=>{const o=i==="svg";t==="class"?LJ(r,n,o):t==="style"?NJ(r,e,n):LS(t)?cR(t)||GJ(r,t,e,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):$J(r,t,n,o))?(wO(r,t,n),!r.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&SO(r,t,n,o,a,t!=="value")):r._isVueCE&&(/[A-Z]/.test(t)||!Vr(n))?wO(r,Ua(t),n,a,t):(t==="true-value"?r._trueValue=n:t==="false-value"&&(r._falseValue=n),SO(r,t,n,o))};function $J(r,t,e,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in r&&EO(t)&&fe(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=r.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return EO(t)&&Vr(e)?!1:t in r}const j1=r=>{const t=r.props["onUpdate:modelValue"]||!1;return Jt(t)?e=>o1(t,e):t};function YJ(r){r.target.composing=!0}function CO(r){const t=r.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Pd=Symbol("_assign"),MO={created(r,{modifiers:{lazy:t,trim:e,number:n}},i){r[Pd]=j1(i);const a=n||i.props&&i.props.type==="number";Qh(r,t?"change":"input",o=>{if(o.target.composing)return;let s=r.value;e&&(s=s.trim()),a&&(s=V1(s)),r[Pd](s)}),e&&Qh(r,"change",()=>{r.value=r.value.trim()}),t||(Qh(r,"compositionstart",YJ),Qh(r,"compositionend",CO),Qh(r,"change",CO))},mounted(r,{value:t}){r.value=t??""},beforeUpdate(r,{value:t,oldValue:e,modifiers:{lazy:n,trim:i,number:a}},o){if(r[Pd]=j1(o),r.composing)return;const s=(a||r.type==="number")&&!/^0\d/.test(r.value)?V1(r.value):r.value,l=t??"";s!==l&&(document.activeElement===r&&r.type!=="range"&&(n&&t===e||i&&r.value.trim()===l)||(r.value=l))}},pBt={deep:!0,created(r,{value:t,modifiers:{number:e}},n){const i=DS(t);Qh(r,"change",()=>{const a=Array.prototype.filter.call(r.options,o=>o.selected).map(o=>e?V1(K1(o)):K1(o));r[Pd](r.multiple?i?new Set(a):a:a[0]),r._assigning=!0,SR(()=>{r._assigning=!1})}),r[Pd]=j1(n)},mounted(r,{value:t}){AO(r,t)},beforeUpdate(r,t,e){r[Pd]=j1(e)},updated(r,{value:t}){r._assigning||AO(r,t)}};function AO(r,t){const e=r.multiple,n=Jt(t);if(!(e&&!n&&!DS(t))){for(let i=0,a=r.options.length;i<a;i++){const o=r.options[i],s=K1(o);if(e)if(n){const l=typeof s;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(s)):o.selected=zK(t,s)>-1}else o.selected=t.has(s);else if(GS(K1(o),t)){r.selectedIndex!==i&&(r.selectedIndex=i);return}}!e&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function K1(r){return"_value"in r?r._value:r.value}const XJ=jr({patchProp:HJ},bJ);let IO;function ZJ(){return IO||(IO=Xq(XJ))}const jJ=(...r)=>{const t=ZJ().createApp(...r),{mount:e}=t;return t.mount=n=>{const i=qJ(n);if(!i)return;const a=t._component;!fe(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,KJ(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function KJ(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function qJ(r){return Vr(r)?document.querySelector(r):r}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const jf=typeof document<"u";function w8(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function JJ(r){return r.__esModule||r[Symbol.toStringTag]==="Module"||r.default&&w8(r.default)}const nr=Object.assign;function IT(r,t){const e={};for(const n in t){const i=t[n];e[n]=vo(i)?i.map(r):r(i)}return e}const Rv=()=>{},vo=Array.isArray,T8=/#/g,QJ=/&/g,tQ=/\//g,eQ=/=/g,rQ=/\?/g,b8=/\+/g,nQ=/%5B/g,iQ=/%5D/g,E8=/%5E/g,aQ=/%60/g,C8=/%7B/g,oQ=/%7C/g,M8=/%7D/g,sQ=/%20/g;function IR(r){return encodeURI(""+r).replace(oQ,"|").replace(nQ,"[").replace(iQ,"]")}function lQ(r){return IR(r).replace(C8,"{").replace(M8,"}").replace(E8,"^")}function TM(r){return IR(r).replace(b8,"%2B").replace(sQ,"+").replace(T8,"%23").replace(QJ,"%26").replace(aQ,"`").replace(C8,"{").replace(M8,"}").replace(E8,"^")}function uQ(r){return TM(r).replace(eQ,"%3D")}function hQ(r){return IR(r).replace(T8,"%23").replace(rQ,"%3F")}function cQ(r){return r==null?"":hQ(r).replace(tQ,"%2F")}function _m(r){try{return decodeURIComponent(""+r)}catch{}return""+r}const fQ=/\/$/,dQ=r=>r.replace(fQ,"");function RT(r,t,e="/"){let n,i={},a="",o="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(n=t.slice(0,l),a=t.slice(l+1,s>-1?s:t.length),i=r(a)),s>-1&&(n=n||t.slice(0,s),o=t.slice(s,t.length)),n=mQ(n??t,e),{fullPath:n+(a&&"?")+a+o,path:n,query:i,hash:_m(o)}}function gQ(r,t){const e=t.query?r(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function RO(r,t){return!t||!r.toLowerCase().startsWith(t.toLowerCase())?r:r.slice(t.length)||"/"}function pQ(r,t,e){const n=t.matched.length-1,i=e.matched.length-1;return n>-1&&n===i&&Zd(t.matched[n],e.matched[i])&&A8(t.params,e.params)&&r(t.query)===r(e.query)&&t.hash===e.hash}function Zd(r,t){return(r.aliasOf||r)===(t.aliasOf||t)}function A8(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(!vQ(r[e],t[e]))return!1;return!0}function vQ(r,t){return vo(r)?PO(r,t):vo(t)?PO(t,r):r===t}function PO(r,t){return vo(t)?r.length===t.length&&r.every((e,n)=>e===t[n]):r.length===1&&r[0]===t}function mQ(r,t){if(r.startsWith("/"))return r;if(!r)return t;const e=t.split("/"),n=r.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let a=e.length-1,o,s;for(o=0;o<n.length;o++)if(s=n[o],s!==".")if(s==="..")a>1&&a--;else break;return e.slice(0,a).join("/")+"/"+n.slice(o).join("/")}const Cl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xm;(function(r){r.pop="pop",r.push="push"})(xm||(xm={}));var Pv;(function(r){r.back="back",r.forward="forward",r.unknown=""})(Pv||(Pv={}));function yQ(r){if(!r)if(jf){const t=document.querySelector("base");r=t&&t.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),dQ(r)}const _Q=/^[^#]+#/;function xQ(r,t){return r.replace(_Q,"#")+t}function SQ(r,t){const e=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:t.behavior,left:n.left-e.left-(t.left||0),top:n.top-e.top-(t.top||0)}}const XS=()=>({left:window.scrollX,top:window.scrollY});function wQ(r){let t;if("el"in r){const e=r.el,n=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=SQ(i,r)}else t=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function LO(r,t){return(history.state?history.state.position-t:-1)+r}const bM=new Map;function TQ(r,t){bM.set(r,t)}function bQ(r){const t=bM.get(r);return bM.delete(r),t}let EQ=()=>location.protocol+"//"+location.host;function I8(r,t){const{pathname:e,search:n,hash:i}=t,a=r.indexOf("#");if(a>-1){let s=i.includes(r.slice(a))?r.slice(a).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),RO(l,"")}return RO(e,r)+n+i}function CQ(r,t,e,n){let i=[],a=[],o=null;const s=({state:f})=>{const d=I8(r,location),g=e.value,p=t.value;let v=0;if(f){if(e.value=d,t.value=f,o&&o===g){o=null;return}v=p?f.position-p.position:0}else n(d);i.forEach(m=>{m(e.value,g,{delta:v,type:xm.pop,direction:v?v>0?Pv.forward:Pv.back:Pv.unknown})})};function l(){o=e.value}function u(f){i.push(f);const d=()=>{const g=i.indexOf(f);g>-1&&i.splice(g,1)};return a.push(d),d}function h(){const{history:f}=window;f.state&&f.replaceState(nr({},f.state,{scroll:XS()}),"")}function c(){for(const f of a)f();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:c}}function DO(r,t,e,n=!1,i=!1){return{back:r,current:t,forward:e,replaced:n,position:window.history.length,scroll:i?XS():null}}function MQ(r){const{history:t,location:e}=window,n={value:I8(r,e)},i={value:t.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,u,h){const c=r.indexOf("#"),f=c>-1?(e.host&&document.querySelector("base")?r:r.slice(c))+l:EQ()+r+l;try{t[h?"replaceState":"pushState"](u,"",f),i.value=u}catch{e[h?"replace":"assign"](f)}}function o(l,u){const h=nr({},t.state,DO(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});a(l,h,!0),n.value=l}function s(l,u){const h=nr({},i.value,t.state,{forward:l,scroll:XS()});a(h.current,h,!0);const c=nr({},DO(n.value,l,null),{position:h.position+1},u);a(l,c,!1),n.value=l}return{location:n,state:i,push:s,replace:o}}function AQ(r){r=yQ(r);const t=MQ(r),e=CQ(r,t.state,t.location,t.replace);function n(a,o=!0){o||e.pauseListeners(),history.go(a)}const i=nr({location:"",base:r,go:n,createHref:xQ.bind(null,r)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function IQ(r){return typeof r=="string"||r&&typeof r=="object"}function R8(r){return typeof r=="string"||typeof r=="symbol"}const P8=Symbol("");var OO;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(OO||(OO={}));function jd(r,t){return nr(new Error,{type:r,[P8]:!0},t)}function Es(r,t){return r instanceof Error&&P8 in r&&(t==null||!!(r.type&t))}const NO="[^/]+?",RQ={sensitive:!1,strict:!1,start:!0,end:!0},PQ=/[.+*?^${}()[\]/\\]/g;function LQ(r,t){const e=nr({},RQ,t),n=[];let i=e.start?"^":"";const a=[];for(const u of r){const h=u.length?[]:[90];e.strict&&!u.length&&(i+="/");for(let c=0;c<u.length;c++){const f=u[c];let d=40+(e.sensitive?.25:0);if(f.type===0)c||(i+="/"),i+=f.value.replace(PQ,"\\$&"),d+=40;else if(f.type===1){const{value:g,repeatable:p,optional:v,regexp:m}=f;a.push({name:g,repeatable:p,optional:v});const y=m||NO;if(y!==NO){d+=10;try{new RegExp(`(${y})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+x.message)}}let _=p?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;c||(_=v&&u.length<2?`(?:/${_})`:"/"+_),v&&(_+="?"),i+=_,d+=20,v&&(d+=-8),p&&(d+=-20),y===".*"&&(d+=-50)}h.push(d)}n.push(h)}if(e.strict&&e.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&(i+="(?:/|$)");const o=new RegExp(i,e.sensitive?"":"i");function s(u){const h=u.match(o),c={};if(!h)return null;for(let f=1;f<h.length;f++){const d=h[f]||"",g=a[f-1];c[g.name]=d&&g.repeatable?d.split("/"):d}return c}function l(u){let h="",c=!1;for(const f of r){(!c||!h.endsWith("/"))&&(h+="/"),c=!1;for(const d of f)if(d.type===0)h+=d.value;else if(d.type===1){const{value:g,repeatable:p,optional:v}=d,m=g in u?u[g]:"";if(vo(m)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=vo(m)?m.join("/"):m;if(!y)if(v)f.length<2&&(h.endsWith("/")?h=h.slice(0,-1):c=!0);else throw new Error(`Missing required param "${g}"`);h+=y}}return h||"/"}return{re:o,score:n,keys:a,parse:s,stringify:l}}function DQ(r,t){let e=0;for(;e<r.length&&e<t.length;){const n=t[e]-r[e];if(n)return n;e++}return r.length<t.length?r.length===1&&r[0]===80?-1:1:r.length>t.length?t.length===1&&t[0]===80?1:-1:0}function L8(r,t){let e=0;const n=r.score,i=t.score;for(;e<n.length&&e<i.length;){const a=DQ(n[e],i[e]);if(a)return a;e++}if(Math.abs(i.length-n.length)===1){if(FO(n))return 1;if(FO(i))return-1}return i.length-n.length}function FO(r){const t=r[r.length-1];return r.length>0&&t[t.length-1]<0}const OQ={type:0,value:""},NQ=/[a-zA-Z0-9_]/;function FQ(r){if(!r)return[[]];if(r==="/")return[[OQ]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function t(d){throw new Error(`ERR (${e})/"${u}": ${d}`)}let e=0,n=e;const i=[];let a;function o(){a&&i.push(a),a=[]}let s=0,l,u="",h="";function c(){u&&(e===0?a.push({type:0,value:u}):e===1||e===2||e===3?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;s<r.length;){if(l=r[s++],l==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:l==="/"?(u&&c(),o()):l===":"?(c(),e=1):f();break;case 4:f(),e=n;break;case 1:l==="("?e=2:NQ.test(l)?f():(c(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:e=3:h+=l;break;case 3:c(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,h="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),c(),o(),i}function kQ(r,t,e){const n=LQ(FQ(r.path),e),i=nr(n,{record:r,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function GQ(r,t){const e=[],n=new Map;t=zO({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function a(c,f,d){const g=!d,p=GO(c);p.aliasOf=d&&d.record;const v=zO(t,c),m=[p];if("alias"in c){const x=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of x)m.push(GO(nr({},p,{components:d?d.record.components:p.components,path:w,aliasOf:d?d.record:p})))}let y,_;for(const x of m){const{path:w}=x;if(f&&w[0]!=="/"){const S=f.record.path,T=S[S.length-1]==="/"?"":"/";x.path=f.record.path+(w&&T+w)}if(y=kQ(x,f,v),d?d.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),g&&c.name&&!BO(y)&&o(c.name)),D8(y)&&l(y),p.children){const S=p.children;for(let T=0;T<S.length;T++)a(S[T],y,d&&d.children[T])}d=d||y}return _?()=>{o(_)}:Rv}function o(c){if(R8(c)){const f=n.get(c);f&&(n.delete(c),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(c);f>-1&&(e.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function s(){return e}function l(c){const f=VQ(c,e);e.splice(f,0,c),c.record.name&&!BO(c)&&n.set(c.record.name,c)}function u(c,f){let d,g={},p,v;if("name"in c&&c.name){if(d=n.get(c.name),!d)throw jd(1,{location:c});v=d.record.name,g=nr(kO(f.params,d.keys.filter(_=>!_.optional).concat(d.parent?d.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),c.params&&kO(c.params,d.keys.map(_=>_.name))),p=d.stringify(g)}else if(c.path!=null)p=c.path,d=e.find(_=>_.re.test(p)),d&&(g=d.parse(p),v=d.record.name);else{if(d=f.name?n.get(f.name):e.find(_=>_.re.test(f.path)),!d)throw jd(1,{location:c,currentLocation:f});v=d.record.name,g=nr({},f.params,c.params),p=d.stringify(g)}const m=[];let y=d;for(;y;)m.unshift(y.record),y=y.parent;return{name:v,path:p,params:g,matched:m,meta:zQ(m)}}r.forEach(c=>a(c));function h(){e.length=0,n.clear()}return{addRoute:a,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:s,getRecordMatcher:i}}function kO(r,t){const e={};for(const n of t)n in r&&(e[n]=r[n]);return e}function GO(r){const t={path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:r.aliasOf,beforeEnter:r.beforeEnter,props:BQ(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function BQ(r){const t={},e=r.props||!1;if("component"in r)t.default=e;else for(const n in r.components)t[n]=typeof e=="object"?e[n]:e;return t}function BO(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function zQ(r){return r.reduce((t,e)=>nr(t,e.meta),{})}function zO(r,t){const e={};for(const n in r)e[n]=n in t?t[n]:r[n];return e}function VQ(r,t){let e=0,n=t.length;for(;e!==n;){const a=e+n>>1;L8(r,t[a])<0?n=a:e=a+1}const i=UQ(r);return i&&(n=t.lastIndexOf(i,n-1)),n}function UQ(r){let t=r;for(;t=t.parent;)if(D8(t)&&L8(r,t)===0)return t}function D8({record:r}){return!!(r.name||r.components&&Object.keys(r.components).length||r.redirect)}function WQ(r){const t={};if(r===""||r==="?")return t;const n=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(b8," "),o=a.indexOf("="),s=_m(o<0?a:a.slice(0,o)),l=o<0?null:_m(a.slice(o+1));if(s in t){let u=t[s];vo(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function VO(r){let t="";for(let e in r){const n=r[e];if(e=uQ(e),n==null){n!==void 0&&(t+=(t.length?"&":"")+e);continue}(vo(n)?n.map(a=>a&&TM(a)):[n&&TM(n)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+e,a!=null&&(t+="="+a))})}return t}function HQ(r){const t={};for(const e in r){const n=r[e];n!==void 0&&(t[e]=vo(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const $Q=Symbol(""),UO=Symbol(""),ZS=Symbol(""),O8=Symbol(""),EM=Symbol("");function gp(){let r=[];function t(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function e(){r=[]}return{add:t,list:()=>r.slice(),reset:e}}function Zl(r,t,e,n,i,a=o=>o()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,l)=>{const u=f=>{f===!1?l(jd(4,{from:e,to:t})):f instanceof Error?l(f):IQ(f)?l(jd(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),s())},h=a(()=>r.call(n&&n.instances[i],t,e,u));let c=Promise.resolve(h);r.length<3&&(c=c.then(u)),c.catch(f=>l(f))})}function PT(r,t,e,n,i=a=>a()){const a=[];for(const o of r)for(const s in o.components){let l=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(w8(l)){const h=(l.__vccOpts||l)[t];h&&a.push(Zl(h,e,n,o,s,i))}else{let u=l();a.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${s}" at "${o.path}"`);const c=JJ(h)?h.default:h;o.mods[s]=h,o.components[s]=c;const d=(c.__vccOpts||c)[t];return d&&Zl(d,e,n,o,s,i)()}))}}return a}function WO(r){const t=$e(ZS),e=$e(O8),n=Zn(()=>{const l=qt(r.to);return t.resolve(l)}),i=Zn(()=>{const{matched:l}=n.value,{length:u}=l,h=l[u-1],c=e.matched;if(!h||!c.length)return-1;const f=c.findIndex(Zd.bind(null,h));if(f>-1)return f;const d=HO(l[u-2]);return u>1&&HO(h)===d&&c[c.length-1].path!==d?c.findIndex(Zd.bind(null,l[u-2])):f}),a=Zn(()=>i.value>-1&&jQ(e.params,n.value.params)),o=Zn(()=>i.value>-1&&i.value===e.matched.length-1&&A8(e.params,n.value.params));function s(l={}){return ZQ(l)?t[qt(r.replace)?"replace":"push"](qt(r.to)).catch(Rv):Promise.resolve()}return{route:n,href:Zn(()=>n.value.href),isActive:a,isExactActive:o,navigate:s}}const YQ=Wr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:WO,setup(r,{slots:t}){const e=zS(WO(r)),{options:n}=$e(ZS),i=Zn(()=>({[$O(r.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[$O(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const a=t.default&&t.default(e);return r.custom?a:mm("a",{"aria-current":e.isExactActive?r.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},a)}}}),XQ=YQ;function ZQ(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const t=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return r.preventDefault&&r.preventDefault(),!0}}function jQ(r,t){for(const e in t){const n=t[e],i=r[e];if(typeof n=="string"){if(n!==i)return!1}else if(!vo(i)||i.length!==n.length||n.some((a,o)=>a!==i[o]))return!1}return!0}function HO(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const $O=(r,t,e)=>r??t??e,KQ=Wr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:t,slots:e}){const n=$e(EM),i=Zn(()=>r.route||n.value),a=$e(UO,0),o=Zn(()=>{let u=qt(a);const{matched:h}=i.value;let c;for(;(c=h[u])&&!c.components;)u++;return u}),s=Zn(()=>i.value.matched[o.value]);ns(UO,Zn(()=>o.value+1)),ns($Q,s),ns(EM,i);const l=ir();return He(()=>[l.value,s.value,r.name],([u,h,c],[f,d,g])=>{h&&(h.instances[c]=u,d&&d!==h&&u&&u===f&&(h.leaveGuards.size||(h.leaveGuards=d.leaveGuards),h.updateGuards.size||(h.updateGuards=d.updateGuards))),u&&h&&(!d||!Zd(h,d)||!f)&&(h.enterCallbacks[c]||[]).forEach(p=>p(u))},{flush:"post"}),()=>{const u=i.value,h=r.name,c=s.value,f=c&&c.components[h];if(!f)return YO(e.default,{Component:f,route:u});const d=c.props[h],g=d?d===!0?u.params:typeof d=="function"?d(u):d:null,v=mm(f,nr({},g,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(c.instances[h]=null)},ref:l}));return YO(e.default,{Component:v,route:u})||v}}});function YO(r,t){if(!r)return null;const e=r(t);return e.length===1?e[0]:e}const qQ=KQ;function JQ(r){const t=GQ(r.routes,r),e=r.parseQuery||WQ,n=r.stringifyQuery||VO,i=r.history,a=gp(),o=gp(),s=gp(),l=Er(Cl);let u=Cl;jf&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=IT.bind(null,$=>""+$),c=IT.bind(null,cQ),f=IT.bind(null,_m);function d($,K){let et,W;return R8($)?(et=t.getRecordMatcher($),W=K):W=$,t.addRoute(W,et)}function g($){const K=t.getRecordMatcher($);K&&t.removeRoute(K)}function p(){return t.getRoutes().map($=>$.record)}function v($){return!!t.getRecordMatcher($)}function m($,K){if(K=nr({},K||l.value),typeof $=="string"){const N=RT(e,$,K.path),H=t.resolve({path:N.path},K),Q=i.createHref(N.fullPath);return nr(N,H,{params:f(H.params),hash:_m(N.hash),redirectedFrom:void 0,href:Q})}let et;if($.path!=null)et=nr({},$,{path:RT(e,$.path,K.path).path});else{const N=nr({},$.params);for(const H in N)N[H]==null&&delete N[H];et=nr({},$,{params:c(N)}),K.params=c(K.params)}const W=t.resolve(et,K),Z=$.hash||"";W.params=h(f(W.params));const at=gQ(n,nr({},$,{hash:lQ(Z),path:W.path})),O=i.createHref(at);return nr({fullPath:at,hash:Z,query:n===VO?HQ($.query):$.query||{}},W,{redirectedFrom:void 0,href:O})}function y($){return typeof $=="string"?RT(e,$,l.value.path):nr({},$)}function _($,K){if(u!==$)return jd(8,{from:K,to:$})}function x($){return T($)}function w($){return x(nr(y($),{replace:!0}))}function S($){const K=$.matched[$.matched.length-1];if(K&&K.redirect){const{redirect:et}=K;let W=typeof et=="function"?et($):et;return typeof W=="string"&&(W=W.includes("?")||W.includes("#")?W=y(W):{path:W},W.params={}),nr({query:$.query,hash:$.hash,params:W.path!=null?{}:$.params},W)}}function T($,K){const et=u=m($),W=l.value,Z=$.state,at=$.force,O=$.replace===!0,N=S(et);if(N)return T(nr(y(N),{state:typeof N=="object"?nr({},Z,N.state):Z,force:at,replace:O}),K||et);const H=et;H.redirectedFrom=K;let Q;return!at&&pQ(n,W,et)&&(Q=jd(16,{to:H,from:W}),Y(W,W,!0,!1)),(Q?Promise.resolve(Q):C(H,W)).catch(J=>Es(J)?Es(J,2)?J:V(J):F(J,H,W)).then(J=>{if(J){if(Es(J,2))return T(nr({replace:O},y(J.to),{state:typeof J.to=="object"?nr({},Z,J.to.state):Z,force:at}),K||H)}else J=A(H,W,!0,O,Z);return M(H,W,J),J})}function b($,K){const et=_($,K);return et?Promise.reject(et):Promise.resolve()}function E($){const K=X.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext($):$()}function C($,K){let et;const[W,Z,at]=QQ($,K);et=PT(W.reverse(),"beforeRouteLeave",$,K);for(const N of W)N.leaveGuards.forEach(H=>{et.push(Zl(H,$,K))});const O=b.bind(null,$,K);return et.push(O),mt(et).then(()=>{et=[];for(const N of a.list())et.push(Zl(N,$,K));return et.push(O),mt(et)}).then(()=>{et=PT(Z,"beforeRouteUpdate",$,K);for(const N of Z)N.updateGuards.forEach(H=>{et.push(Zl(H,$,K))});return et.push(O),mt(et)}).then(()=>{et=[];for(const N of at)if(N.beforeEnter)if(vo(N.beforeEnter))for(const H of N.beforeEnter)et.push(Zl(H,$,K));else et.push(Zl(N.beforeEnter,$,K));return et.push(O),mt(et)}).then(()=>($.matched.forEach(N=>N.enterCallbacks={}),et=PT(at,"beforeRouteEnter",$,K,E),et.push(O),mt(et))).then(()=>{et=[];for(const N of o.list())et.push(Zl(N,$,K));return et.push(O),mt(et)}).catch(N=>Es(N,8)?N:Promise.reject(N))}function M($,K,et){s.list().forEach(W=>E(()=>W($,K,et)))}function A($,K,et,W,Z){const at=_($,K);if(at)return at;const O=K===Cl,N=jf?history.state:{};et&&(W||O?i.replace($.fullPath,nr({scroll:O&&N&&N.scroll},Z)):i.push($.fullPath,Z)),l.value=$,Y($,K,et,O),V()}let R;function P(){R||(R=i.listen(($,K,et)=>{if(!St.listening)return;const W=m($),Z=S(W);if(Z){T(nr(Z,{replace:!0}),W).catch(Rv);return}u=W;const at=l.value;jf&&TQ(LO(at.fullPath,et.delta),XS()),C(W,at).catch(O=>Es(O,12)?O:Es(O,2)?(T(O.to,W).then(N=>{Es(N,20)&&!et.delta&&et.type===xm.pop&&i.go(-1,!1)}).catch(Rv),Promise.reject()):(et.delta&&i.go(-et.delta,!1),F(O,W,at))).then(O=>{O=O||A(W,at,!1),O&&(et.delta&&!Es(O,8)?i.go(-et.delta,!1):et.type===xm.pop&&Es(O,20)&&i.go(-1,!1)),M(W,at,O)}).catch(Rv)}))}let L=gp(),D=gp(),k;function F($,K,et){V($);const W=D.list();return W.length&&W.forEach(Z=>Z($,K,et)),Promise.reject($)}function B(){return k&&l.value!==Cl?Promise.resolve():new Promise(($,K)=>{L.add([$,K])})}function V($){return k||(k=!$,P(),L.list().forEach(([K,et])=>$?et($):K()),L.reset()),$}function Y($,K,et,W){const{scrollBehavior:Z}=r;if(!jf||!Z)return Promise.resolve();const at=!et&&bQ(LO($.fullPath,0))||(W||!et)&&history.state&&history.state.scroll||null;return SR().then(()=>Z($,K,at)).then(O=>O&&wQ(O)).catch(O=>F(O,$,K))}const q=$=>i.go($);let lt;const X=new Set,St={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:p,resolve:m,options:r,push:x,replace:w,go:q,back:()=>q(-1),forward:()=>q(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:D.add,isReady:B,install($){const K=this;$.component("RouterLink",XQ),$.component("RouterView",qQ),$.config.globalProperties.$router=K,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>qt(l)}),jf&&!lt&&l.value===Cl&&(lt=!0,x(i.location).catch(Z=>{}));const et={};for(const Z in Cl)Object.defineProperty(et,Z,{get:()=>l.value[Z],enumerable:!0});$.provide(ZS,K),$.provide(O8,L6(et)),$.provide(EM,l);const W=$.unmount;X.add($),$.unmount=function(){X.delete($),X.size<1&&(u=Cl,R&&R(),R=null,l.value=Cl,lt=!1,k=!1),W()}}};function mt($){return $.reduce((K,et)=>K.then(()=>E(et)),Promise.resolve())}return St}function QQ(r,t){const e=[],n=[],i=[],a=Math.max(t.matched.length,r.matched.length);for(let o=0;o<a;o++){const s=t.matched[o];s&&(r.matched.find(u=>Zd(u,s))?n.push(s):e.push(s));const l=r.matched[o];l&&(t.matched.find(u=>Zd(u,l))||i.push(l))}return[e,n,i]}function ttt(){return $e(ZS)}const ett=Wr({__name:"App",setup(r){const t=ttt(),e=ir(t.currentRoute),n=Zn(()=>e.value.path==="/"),i=()=>{t.push({name:"home"})};return(a,o)=>{const s=q6("router-view");return nl(),Y1(Pi,null,[n.value?Xu("",!0):(nl(),Y1("div",{key:0,class:"back-home",onClick:i})),an(s)],64)}}}),rtt=(r,t)=>{const e=r.__vccOpts||r;for(const[n,i]of t)e[n]=i;return e},ntt=rtt(ett,[["__scopeId","data-v-d47df0b2"]]),itt="modulepreload",att=function(r){return"/v3-ol-map/"+r},XO={},ur=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(e.map(l=>{if(l=att(l),l in XO)return;XO[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":itt,u||(c.as="script"),c.crossOrigin="",c.href=l,s&&c.setAttribute("nonce",s),document.head.appendChild(c),u)return new Promise((f,d)=>{c.addEventListener("load",f),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})},ott=[{name:"home",path:"/",component:()=>ur(()=>import("./index-CPpzI3-0.js"),__vite__mapDeps([0,1]))},{path:"/map",name:"map",component:()=>ur(()=>import("./index-DQyGj_OQ.js"),[]),meta:{title:"",description:""}},{name:"tile",path:"/tile",component:()=>ur(()=>import("./index-BayJES45.js"),__vite__mapDeps([2,3])),meta:{title:"",description:""}},{name:"vectorJson",path:"/vectorJson",component:()=>ur(()=>import("./index-DY_4qCRH.js"),[]),meta:{title:"vectorLayer + Geojson",description:"geojson"}},{name:"vector",path:"/vector",component:()=>ur(()=>import("./index-OlA2kHjP.js"),__vite__mapDeps([4,5,6])),meta:{title:"++",description:"++"}},{name:"featureStyle",path:"/featureStyle",component:()=>ur(()=>import("./index-DQOo0YRf.js"),__vite__mapDeps([7,5])),meta:{title:"",description:"styleFunction"}},{name:"modifyFeature",path:"/modifyFeature",component:()=>ur(()=>import("./index-CdJxlFIF.js"),[]),meta:{title:"",description:""}},{name:"wfs",path:"/wfs",component:()=>ur(()=>import("./index-CD1Fv-1b.js"),[]),meta:{title:"WFS",description:"WFS"}},{name:"wms",path:"/wms",component:()=>ur(()=>import("./index-DWSFzvyp.js"),[]),meta:{title:"WMS",description:"WMS30w"}},{name:"heatmap",path:"/heatmap",component:()=>ur(()=>import("./index-DtEKzTcX.js"),[]),meta:{title:"",description:""}},{name:"tiff",path:"/tiff",component:()=>ur(()=>import("./index-CZfpW4Ft.js"),[]),meta:{title:"TIFF",description:"TIFF"}},{name:"cluster",path:"/cluster",component:()=>ur(()=>import("./index-g-ARNR-o.js"),__vite__mapDeps([8,5])),meta:{title:"",description:"SuperCluster"}},{name:"overview",path:"/overview",component:()=>ur(()=>import("./index-CZeZdoTa.js"),[]),meta:{title:"",description:""}},{name:"draw",path:"/draw",component:()=>ur(()=>import("./index-DUd72P4m.js"),__vite__mapDeps([9,10])),meta:{title:"",description:""}},{name:"measure",path:"/measure",component:()=>ur(()=>import("./index-D_oyuPrV.js"),__vite__mapDeps([11,12])),meta:{title:"",description:""}},{name:"pin",path:"/pin",component:()=>ur(()=>import("./index-Dx6CBGNg.js"),__vite__mapDeps([13,14])),meta:{title:"//",description:""}},{name:"path",path:"/path",component:()=>ur(()=>import("./index-BAXof-BV.js"),__vite__mapDeps([15,16])),meta:{title:"",description:""}},{name:"route",path:"/route",component:()=>ur(()=>import("./index-D9IMc81Y.js"),__vite__mapDeps([17,18])),meta:{title:"",description:"arcgisgraphhopper"}},{name:"echarts",path:"/echarts",component:()=>ur(()=>import("./index-efG70JRz.js"),[]),meta:{title:"echarts",description:"echartsol-echarts"}},{path:"/test",name:"test",component:()=>ur(()=>import("./index-BSZ_fa1R.js"),__vite__mapDeps([19,20])),meta:{hidden:!0}}],stt=JQ({scrollBehavior:()=>({left:0,top:0}),history:AQ("/v3-ol-map/"),routes:ott});class ca{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Lc={PROPERTYCHANGE:"propertychange"};class jS{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function ltt(r,t,e){let n,i;e=e||$s;let a=0,o=r.length,s=!1;for(;a<o;)n=a+(o-a>>1),i=+e(r[n],t),i<0?a=n+1:(o=n,s=!i);return s?a:~a}function $s(r,t){return r>t?1:r<t?-1:0}function utt(r,t){return r<t?1:r>t?-1:0}function KS(r,t,e){if(r[0]<=t)return 0;const n=r.length;if(t<=r[n-1])return n-1;if(typeof e=="function"){for(let i=1;i<n;++i){const a=r[i];if(a===t)return i;if(a<t)return e(t,r[i-1],a)>0?i-1:i}return n-1}if(e>0){for(let i=1;i<n;++i)if(r[i]<t)return i-1;return n-1}if(e<0){for(let i=1;i<n;++i)if(r[i]<=t)return i;return n-1}for(let i=1;i<n;++i){if(r[i]==t)return i;if(r[i]<t)return r[i-1]-t<t-r[i]?i-1:i}return n-1}function htt(r,t,e){for(;t<e;){const n=r[t];r[t]=r[e],r[e]=n,++t,--e}}function Ne(r,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let i=0;i<n;i++)r[r.length]=e[i]}function vs(r,t){const e=r.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}function ctt(r,t,e){const n=t||$s;return r.every(function(i,a){if(a===0)return!0;const o=n(r[a-1],i);return!(o>0||o===0)})}function Dc(){return!0}function qc(){return!1}function Kd(){}function N8(r){let t,e,n;return function(){const i=Array.prototype.slice.call(arguments);return(!e||this!==n||!vs(i,e))&&(n=this,e=i,t=r.apply(this,arguments)),t}}function RR(r){function t(){let e;try{e=r()}catch(n){return Promise.reject(n)}return e instanceof Promise?e:Promise.resolve(e)}return t()}function Eg(r){for(const t in r)delete r[t]}function Eu(r){let t;for(t in r)return!1;return!t}class Cg extends jS{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const a=e?new ca(t):t;a.target||(a.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,s[n]=0),++o[n];let l;for(let u=0,h=i.length;u<h;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(a):l=i[u].call(this,a),l===!1||a.propagationStopped){l=!1;break}if(--o[n]===0){let u=s[n];for(delete s[n];u--;)this.removeEventListener(n,Kd);delete o[n]}return l}disposeInternal(){this.listeners_&&Eg(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);i!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=Kd,++this.pendingRemovals_[t]):(n.splice(i,1),n.length===0&&delete this.listeners_[t]))}}const Bt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function se(r,t,e,n,i){if(i){const o=e;e=function(){r.removeEventListener(t,e),o.apply(n??this,arguments)}}else n&&n!==r&&(e=e.bind(n));const a={target:r,type:t,listener:e};return r.addEventListener(t,e),a}function Sm(r,t,e,n){return se(r,t,e,n,!0)}function Ve(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Eg(r))}class xy extends Cg{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Bt.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=se(this,t[a],e);return i}return se(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let a=0;a<i;++a)n[a]=Sm(this,t[a],e)}else n=Sm(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)Cu(n);else if(Array.isArray(t))for(let i=0,a=t.length;i<a;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}xy.prototype.on;xy.prototype.once;xy.prototype.un;function Cu(r){if(Array.isArray(r))for(let t=0,e=r.length;t<e;++t)Ve(r[t]);else Ve(r)}function Ut(){throw new Error("Unimplemented abstract method.")}let ftt=0;function zt(r){return r.ol_uid||(r.ol_uid=String(++ftt))}const dtt="10.1.0";class ZO extends ca{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class Xa extends xy{constructor(t){super(),this.on,this.once,this.un,zt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new ZO(n,t,e)),n=Lc.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new ZO(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const a=i[t];i[t]=e,a!==e&&this.notify(t,a)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],Eu(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const mn={ADD:"add",REMOVE:"remove"},jO={LENGTH:"length"};class v0 extends ca{constructor(t,e,n){super(t),this.element=e,this.index=n}}class Bi extends Xa{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(jO.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new v0(mn.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new v0(mn.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new v0(mn.REMOVE,i,t)),this.dispatchEvent(new v0(mn.ADD,e,t))}updateLength_(){this.set(jO.LENGTH,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}}function pe(r,t){if(!r)throw new Error(t)}class Le extends Xa{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Le(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ve(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=se(t,Bt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?gtt(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function gtt(r){if(typeof r=="function")return r;let t;return Array.isArray(r)?t=r:(pe(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[r]),function(){return t}}const PR=new Array(6);function on(){return[1,0,0,1,0,0]}function ptt(r){return JS(r,1,0,0,1,0,0)}function qS(r,t){const e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=t[0],u=t[1],h=t[2],c=t[3],f=t[4],d=t[5];return r[0]=e*l+i*u,r[1]=n*l+a*u,r[2]=e*h+i*c,r[3]=n*h+a*c,r[4]=e*f+i*d+o,r[5]=n*f+a*d+s,r}function JS(r,t,e,n,i,a,o){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r}function vtt(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function Nr(r,t){const e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function mtt(r,t){const e=Math.cos(t),n=Math.sin(t);return qS(r,JS(PR,e,n,-n,e,0,0))}function KO(r,t,e){return qS(r,JS(PR,t,0,0,e,0,0))}function F8(r,t,e){return qS(r,JS(PR,1,0,0,1,t,e))}function Wa(r,t,e,n,i,a,o,s){const l=Math.sin(a),u=Math.cos(a);return r[0]=n*u,r[1]=i*l,r[2]=-n*l,r[3]=i*u,r[4]=o*n*u-s*n*l+t,r[5]=o*i*l+s*i*u+e,r}function LR(r,t){const e=ytt(t);pe(e!==0,"Transformation matrix cannot be inverted");const n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5];return r[0]=o/e,r[1]=-i/e,r[2]=-a/e,r[3]=n/e,r[4]=(a*l-o*s)/e,r[5]=-(n*l-i*s)/e,r}function ytt(r){return r[0]*r[3]-r[1]*r[2]}const qO=[1e6,1e6,1e6,1e6,2,2];function _tt(r){return"matrix("+r.map((e,n)=>Math.round(e*qO[n])/qO[n]).join(", ")+")"}const pn={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function rn(r){const t=qn();for(let e=0,n=r.length;e<n;++e)Lv(t,r[e]);return t}function xtt(r,t,e){const n=Math.min.apply(null,r),i=Math.min.apply(null,t),a=Math.max.apply(null,r),o=Math.max.apply(null,t);return Ha(n,i,a,o,e)}function il(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function k8(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function Jc(r,t,e){let n,i;return t<r[0]?n=r[0]-t:r[2]<t?n=t-r[2]:n=0,e<r[1]?i=r[1]-e:r[3]<e?i=e-r[3]:i=0,n*n+i*i}function mo(r,t){return DR(r,t[0],t[1])}function Oa(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function DR(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function CM(r,t){const e=r[0],n=r[1],i=r[2],a=r[3],o=t[0],s=t[1];let l=pn.UNKNOWN;return o<e?l=l|pn.LEFT:o>i&&(l=l|pn.RIGHT),s<n?l=l|pn.BELOW:s>a&&(l=l|pn.ABOVE),l===pn.UNKNOWN&&(l=pn.INTERSECTING),l}function qn(){return[1/0,1/0,-1/0,-1/0]}function Ha(r,t,e,n,i){return i?(i[0]=r,i[1]=t,i[2]=e,i[3]=n,i):[r,t,e,n]}function Mg(r){return Ha(1/0,1/0,-1/0,-1/0,r)}function Ld(r,t){const e=r[0],n=r[1];return Ha(e,n,e,n,t)}function OR(r,t,e,n,i){const a=Mg(i);return B8(a,r,t,e,n)}function Mu(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function G8(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function Lv(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function B8(r,t,e,n,i){for(;e<n;e+=i)Stt(r,t[e],t[e+1]);return r}function Stt(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function NR(r,t){let e;return e=t(qd(r)),e||(e=t(Ag(r)),e)||(e=t(vu(r)),e)||(e=t(za(r)),e)?e:!1}function wm(r){let t=0;return Zu(r)||(t=Me(r)*kr(r)),t}function qd(r){return[r[0],r[1]]}function Ag(r){return[r[2],r[1]]}function ua(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function wtt(r,t){let e;if(t==="bottom-left")e=qd(r);else if(t==="bottom-right")e=Ag(r);else if(t==="top-left")e=za(r);else if(t==="top-right")e=vu(r);else throw new Error("Invalid corner");return e}function Tm(r,t,e,n,i){const[a,o,s,l,u,h,c,f]=Ttt(r,t,e,n);return Ha(Math.min(a,s,u,c),Math.min(o,l,h,f),Math.max(a,s,u,c),Math.max(o,l,h,f),i)}function Ttt(r,t,e,n){const i=t*n[0]/2,a=t*n[1]/2,o=Math.cos(e),s=Math.sin(e),l=i*o,u=i*s,h=a*o,c=a*s,f=r[0],d=r[1];return[f-l+c,d-u-h,f-l-c,d-u+h,f+l-c,d+u+h,f+l+c,d+u-h,f-l+c,d-u-h]}function kr(r){return r[3]-r[1]}function Rn(r,t,e){const n=e||qn();return jn(r,t)?(r[0]>t[0]?n[0]=r[0]:n[0]=t[0],r[1]>t[1]?n[1]=r[1]:n[1]=t[1],r[2]<t[2]?n[2]=r[2]:n[2]=t[2],r[3]<t[3]?n[3]=r[3]:n[3]=t[3]):Mg(n),n}function za(r){return[r[0],r[3]]}function vu(r){return[r[2],r[3]]}function Me(r){return r[2]-r[0]}function jn(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function Zu(r){return r[2]<r[0]||r[3]<r[1]}function btt(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function Ett(r,t){const e=(r[2]-r[0])/2*(t-1),n=(r[3]-r[1])/2*(t-1);r[0]-=e,r[2]+=e,r[1]-=n,r[3]+=n}function Ctt(r,t,e){let n=!1;const i=CM(r,t),a=CM(r,e);if(i===pn.INTERSECTING||a===pn.INTERSECTING)n=!0;else{const o=r[0],s=r[1],l=r[2],u=r[3],h=t[0],c=t[1],f=e[0],d=e[1],g=(d-c)/(f-h);let p,v;a&pn.ABOVE&&!(i&pn.ABOVE)&&(p=f-(d-u)/g,n=p>=o&&p<=l),!n&&a&pn.RIGHT&&!(i&pn.RIGHT)&&(v=d-(f-l)*g,n=v>=s&&v<=u),!n&&a&pn.BELOW&&!(i&pn.BELOW)&&(p=f-(d-s)/g,n=p>=o&&p<=l),!n&&a&pn.LEFT&&!(i&pn.LEFT)&&(v=d-(f-o)*g,n=v>=s&&v<=u)}return n}function Mtt(r,t,e,n){if(Zu(r))return Mg(e);let i=[];i=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]],t(i,i,2);const a=[],o=[];for(let s=0,l=i.length;s<l;s+=2)a.push(i[s]),o.push(i[s+1]);return xtt(a,o,e)}function z8(r,t){const e=t.getExtent(),n=ua(r);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){const i=Me(e),o=Math.floor((n[0]-e[0])/i)*i;r[0]-=o,r[2]-=o}return r}function FR(r,t,e){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];z8(r,t);const i=Me(n);if(Me(r)>i&&!e)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+i,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-i,r[3]]]}return[r]}const Att={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function JO(r){return Att[r]}const kR={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let zi=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||kR[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Sy=6378137,ld=Math.PI*Sy,Itt=[-ld,-ld,ld,ld],Rtt=[-180,-85,180,85],m0=Sy*Math.log(Math.tan(Math.PI/2));class cf extends zi{constructor(t){super({code:t,units:"m",extent:Itt,global:!0,worldExtent:Rtt,getPointResolution:function(e,n){return e/Math.cosh(n[1]/Sy)}})}}const q1=[new cf("EPSG:3857"),new cf("EPSG:102100"),new cf("EPSG:102113"),new cf("EPSG:900913"),new cf("http://www.opengis.net/def/crs/EPSG/0/3857"),new cf("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ptt(r,t,e,n){const i=r.length;e=e>1?e:2,n=n??e,t===void 0&&(e>2?t=r.slice():t=new Array(i));for(let a=0;a<i;a+=n){t[a]=ld*r[a]/180;let o=Sy*Math.log(Math.tan(Math.PI*(+r[a+1]+90)/360));o>m0?o=m0:o<-m0&&(o=-m0),t[a+1]=o}return t}function Ltt(r,t,e,n){const i=r.length;e=e>1?e:2,n=n??e,t===void 0&&(e>2?t=r.slice():t=new Array(i));for(let a=0;a<i;a+=n)t[a]=180*r[a]/ld,t[a+1]=360*Math.atan(Math.exp(r[a+1]/Sy))/Math.PI-90;return t}const Dtt=6378137,QO=[-180,-90,180,90],Ott=Math.PI*Dtt/180;class sh extends zi{constructor(t,e){super({code:t,units:"degrees",extent:QO,axisOrientation:e,global:!0,metersPerUnit:Ott,worldExtent:QO})}}const J1=[new sh("CRS:84"),new sh("EPSG:4326","neu"),new sh("urn:ogc:def:crs:OGC:1.3:CRS84"),new sh("urn:ogc:def:crs:OGC:2:84"),new sh("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new sh("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new sh("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let MM={};function Ntt(r){return MM[r]||MM[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Ftt(r,t){MM[r]=t}let Dd={};function Jd(r,t,e){const n=r.getCode(),i=t.getCode();n in Dd||(Dd[n]={}),Dd[n][i]=e}function V8(r,t){let e;return r in Dd&&t in Dd[r]&&(e=Dd[r][t]),e}function gr(r,t,e){return Math.min(Math.max(r,t),e)}function ktt(r,t,e,n,i,a){const o=i-e,s=a-n;if(o!==0||s!==0){const l=((r-e)*o+(t-n)*s)/(o*o+s*s);l>1?(e=i,n=a):l>0&&(e+=o*l,n+=s*l)}return Ys(r,t,e,n)}function Ys(r,t,e,n){const i=e-r,a=n-t;return i*i+a*a}function Gtt(r){const t=r.length;for(let n=0;n<t;n++){let i=n,a=Math.abs(r[n][n]);for(let s=n+1;s<t;s++){const l=Math.abs(r[s][n]);l>a&&(a=l,i=s)}if(a===0)return null;const o=r[i];r[i]=r[n],r[n]=o;for(let s=n+1;s<t;s++){const l=-r[s][n]/r[n][n];for(let u=n;u<t+1;u++)n==u?r[s][u]=0:r[s][u]+=l*r[n][u]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=r[n][t]/r[n][n];for(let i=n-1;i>=0;i--)r[i][t]-=r[i][n]*e[n]}return e}function mu(r){return r*Math.PI/180}function Xs(r,t){const e=r%t;return e*t<0?e+t:e}function qi(r,t,e){return r+e*(t-r)}function wy(r,t){const e=Math.pow(10,t);return Math.round(r*e)/e}function tN(r,t){return Math.round(wy(r,t))}function ud(r,t){return Math.floor(wy(r,t))}function eu(r,t){return Math.ceil(wy(r,t))}function pp(r,t,e){const n=e!==void 0?r.toFixed(e):""+r;let i=n.indexOf(".");return i=i===-1?n.length:i,i>t?n:new Array(1+t-i).join("0")+n}function GR(r,t){const e=(""+r).split("."),n=(""+t).split(".");for(let i=0;i<Math.max(e.length,n.length);i++){const a=parseInt(e[i]||"0",10),o=parseInt(n[i]||"0",10);if(a>o)return 1;if(o>a)return-1}return 0}function U8(r,t){return r[0]+=+t[0],r[1]+=+t[1],r}function Btt(r,t){const e=t.getRadius(),n=t.getCenter(),i=n[0],a=n[1],o=r[0],s=r[1];let l=o-i;const u=s-a;l===0&&u===0&&(l=1);const h=Math.sqrt(l*l+u*u),c=i+e*l/h,f=a+e*u/h;return[c,f]}function BR(r,t){const e=r[0],n=r[1],i=t[0],a=t[1],o=i[0],s=i[1],l=a[0],u=a[1],h=l-o,c=u-s,f=h===0&&c===0?0:(h*(e-o)+c*(n-s))/(h*h+c*c||0);let d,g;return f<=0?(d=o,g=s):f>=1?(d=l,g=u):(d=o+f*h,g=s+f*c),[d,g]}function io(r,t){let e=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=t[n]){e=!1;break}return e}function zR(r,t){const e=Math.cos(t),n=Math.sin(t),i=r[0]*e-r[1]*n,a=r[1]*e+r[0]*n;return r[0]=i,r[1]=a,r}function W8(r,t){return r[0]*=t,r[1]*=t,r}function is(r,t){const e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function Q1(r,t){return Math.sqrt(is(r,t))}function ztt(r,t){return is(r,BR(r,t))}function H8(r,t){if(t.canWrapX()){const e=Me(t.getExtent()),n=$8(r,t,e);n&&(r[0]-=n*e)}return r}function $8(r,t,e){const n=t.getExtent();let i=0;return t.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(e=e||Me(n),i=Math.floor((r[0]-n[0])/e)),i}const VR=63710088e-1;function AM(r,t,e){e=e||VR;const n=mu(r[1]),i=mu(t[1]),a=(i-n)/2,o=mu(t[0]-r[0])/2,s=Math.sin(a)*Math.sin(a)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(i);return 2*e*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}function LT(r,t){let e=0;for(let n=0,i=r.length;n<i-1;++n)e+=AM(r[n],r[n+1],t);return e}function Y8(r,t){t=t||{};const e=t.radius||VR,n=t.projection||"EPSG:3857",i=r.getType();i!=="GeometryCollection"&&(r=r.clone().transform(n,"EPSG:4326"));let a=0,o,s,l,u,h,c;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=r.getCoordinates(),a=LT(o,e);break}case"MultiLineString":case"Polygon":{for(o=r.getCoordinates(),l=0,u=o.length;l<u;++l)a+=LT(o[l],e);break}case"MultiPolygon":{for(o=r.getCoordinates(),l=0,u=o.length;l<u;++l)for(s=o[l],h=0,c=s.length;h<c;++h)a+=LT(s[h],e);break}case"GeometryCollection":{const f=r.getGeometries();for(l=0,u=f.length;l<u;++l)a+=Y8(f[l],t);break}default:throw new Error("Unsupported geometry type: "+i)}return a}function y0(r,t){let e=0;const n=r.length;let i=r[n-1][0],a=r[n-1][1];for(let o=0;o<n;o++){const s=r[o][0],l=r[o][1];e+=mu(s-i)*(2+Math.sin(mu(a))+Math.sin(mu(l))),i=s,a=l}return e*t*t/2}function X8(r,t){t=t||{};const e=t.radius||VR,n=t.projection||"EPSG:3857",i=r.getType();i!=="GeometryCollection"&&(r=r.clone().transform(n,"EPSG:4326"));let a=0,o,s,l,u,h,c;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=r.getCoordinates(),a=Math.abs(y0(o[0],e)),l=1,u=o.length;l<u;++l)a-=Math.abs(y0(o[l],e));break}case"MultiPolygon":{for(o=r.getCoordinates(),l=0,u=o.length;l<u;++l)for(s=o[l],a+=Math.abs(y0(s[0],e)),h=1,c=s.length;h<c;++h)a-=Math.abs(y0(s[h],e));break}case"GeometryCollection":{const f=r.getGeometries();for(l=0,u=f.length;l<u;++l)a+=X8(f[l],t);break}default:throw new Error("Unsupported geometry type: "+i)}return a}function Z8(...r){}function eN(...r){}let IM=!0;function j8(r){IM=!1}function UR(r,t){if(t!==void 0){for(let e=0,n=r.length;e<n;++e)t[e]=r[e];t=t}else t=r.slice();return t}function K8(r,t){if(t!==void 0&&r!==t){for(let e=0,n=r.length;e<n;++e)t[e]=r[e];r=t}return r}function tx(r){Ftt(r.getCode(),r),Jd(r,r,UR)}function Vtt(r){r.forEach(tx)}function Xt(r){return typeof r=="string"?Ntt(r):r||null}function rN(r,t,e,n){r=Xt(r);let i;const a=r.getPointResolutionFunc();if(a)i=a(t,e);else{const o=r.getUnits();if(o=="degrees"&&!n||n=="degrees")i=t;else{const s=HR(r,Xt("EPSG:4326"));if(s===K8&&o!=="degrees")i=t*r.getMetersPerUnit();else{let u=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];u=s(u,u,2);const h=AM(u.slice(0,2),u.slice(2,4)),c=AM(u.slice(4,6),u.slice(6,8));i=(h+c)/2}const l=r.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function bm(r){Vtt(r),r.forEach(function(t){r.forEach(function(e){t!==e&&Jd(t,e,UR)})})}function Vh(r,t,e,n){r.forEach(function(i){t.forEach(function(a){Jd(i,a,e),Jd(a,i,n)})})}function WR(r,t){return r?typeof r=="string"?Xt(r):r:Xt(t)}function nN(r){return function(t,e,n,i){const a=t.length;n=n!==void 0?n:2,i=i??n,e=e!==void 0?e:new Array(a);for(let o=0;o<a;o+=i){const s=r(t.slice(o,o+n)),l=s.length;for(let u=0,h=i;u<h;++u)e[o+u]=u>=l?t[o+u]:s[u]}return e}}function Uh(r,t,e,n){const i=Xt(r),a=Xt(t);Jd(i,a,nN(e)),Jd(a,i,nN(n))}function q8(r,t){return j8(),Ig(r,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function iN(r,t){const e=Ig(r,t!==void 0?t:"EPSG:3857","EPSG:4326"),n=e[0];return(n<-180||n>180)&&(e[0]=Xs(n+180,360)-180),e}function ra(r,t){if(r===t)return!0;const e=r.getUnits()===t.getUnits();return(r.getCode()===t.getCode()||HR(r,t)===UR)&&e}function HR(r,t){const e=r.getCode(),n=t.getCode();let i=V8(e,n);return i||(i=K8),i}function Qd(r,t){const e=Xt(r),n=Xt(t);return HR(e,n)}function Ig(r,t,e){return Qd(t,e)(r,void 0,r.length)}function Utt(r,t,e,n){const i=Qd(t,e);return Mtt(r,i,void 0)}function Au(r,t){return r}function cr(r,t){return IM&&!io(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(IM=!1,Z8("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function Ty(r,t){return r}function na(r,t){return r}function aN(r,t,e){return function(n){let i,a;if(r.canWrapX()){const o=r.getExtent(),s=Me(o);n=n.slice(0),a=$8(n,r,s),a&&(n[0]=n[0]-a*s),n[0]=gr(n[0],o[0],o[2]),n[1]=gr(n[1],o[1],o[3]),i=e(n)}else i=e(n);return a&&t.canWrapX()&&(i[0]+=a*Me(t.getExtent())),i}}function Wtt(){bm(q1),bm(J1),Vh(J1,q1,Ptt,Ltt)}Wtt();function yu(r,t,e,n,i,a,o){a=a||[],o=o||2;let s=0;for(let l=t;l<e;l+=n){const u=r[l],h=r[l+1];a[s++]=i[0]*u+i[2]*h+i[4],a[s++]=i[1]*u+i[3]*h+i[5];for(let c=2;c<o;c++)a[s++]=r[l+c]}return a&&a.length!=s&&(a.length=s),a}function $R(r,t,e,n,i,a,o){o=o||[];const s=Math.cos(i),l=Math.sin(i),u=a[0],h=a[1];let c=0;for(let f=t;f<e;f+=n){const d=r[f]-u,g=r[f+1]-h;o[c++]=u+d*s-g*l,o[c++]=h+d*l+g*s;for(let p=f+2;p<f+n;++p)o[c++]=r[p]}return o&&o.length!=c&&(o.length=c),o}function Htt(r,t,e,n,i,a,o,s){s=s||[];const l=o[0],u=o[1];let h=0;for(let c=t;c<e;c+=n){const f=r[c]-l,d=r[c+1]-u;s[h++]=l+i*f,s[h++]=u+a*d;for(let g=c+2;g<c+n;++g)s[h++]=r[g]}return s&&s.length!=h&&(s.length=h),s}function $tt(r,t,e,n,i,a,o){o=o||[];let s=0;for(let l=t;l<e;l+=n){o[s++]=r[l]+i,o[s++]=r[l+1]+a;for(let u=l+2;u<l+n;++u)o[s++]=r[u]}return o&&o.length!=s&&(o.length=s),o}const oN=on();class YR extends Xa{constructor(){super(),this.extent_=qn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=N8((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Ut()}closestPointXY(t,e,n,i){return Ut()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Ut()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Mg(e),this.extentRevision_=this.getRevision()}return btt(this.extent_,t)}rotate(t,e){Ut()}scale(t,e,n){Ut()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Ut()}getType(){return Ut()}applyTransform(t){Ut()}intersectsExtent(t){return Ut()}translate(t,e){Ut()}transform(t,e){const n=Xt(t),i=n.getUnits()=="tile-pixels"?function(a,o,s){const l=n.getExtent(),u=n.getWorldExtent(),h=kr(u)/kr(l);return Wa(oN,u[0],u[3],h,-h,0,0,0),yu(a,0,a.length,s,oN,o),Qd(n,e)(a,o,s)}:Qd(n,e);return this.applyTransform(i),this}}class ls extends YR{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return OR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Ut()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Em(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Ut()}setLayout(t,e,n){let i;if(t)i=Em(t);else{for(let a=0;a<n;++a){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}i=e.length,t=Qc(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();$R(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=ua(this.getExtent()));const i=this.getFlatCoordinates();if(i){const a=this.getStride();Htt(i,0,i.length,a,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();$tt(n,0,n.length,i,t,e,n),this.changed()}}}function Qc(r){let t;return r==2?t="XY":r==3?t="XYZ":r==4&&(t="XYZM"),t}function Em(r){let t;return r=="XY"?t=2:r=="XYZ"||r=="XYM"?t=3:r=="XYZM"&&(t=4),t}function Ytt(r,t,e){const n=r.getFlatCoordinates();if(!n)return null;const i=r.getStride();return yu(n,0,n.length,i,t,e)}function sN(r,t,e,n,i,a,o){const s=r[t],l=r[t+1],u=r[e]-s,h=r[e+1]-l;let c;if(u===0&&h===0)c=t;else{const f=((i-s)*u+(a-l)*h)/(u*u+h*h);if(f>1)c=e;else if(f>0){for(let d=0;d<n;++d)o[d]=qi(r[t+d],r[e+d],f);o.length=n;return}else c=t}for(let f=0;f<n;++f)o[f]=r[c+f];o.length=n}function XR(r,t,e,n,i){let a=r[t],o=r[t+1];for(t+=n;t<e;t+=n){const s=r[t],l=r[t+1],u=Ys(a,o,s,l);u>i&&(i=u),a=s,o=l}return i}function ZR(r,t,e,n,i){for(let a=0,o=e.length;a<o;++a){const s=e[a];i=XR(r,t,s,n,i),t=s}return i}function Xtt(r,t,e,n,i){for(let a=0,o=e.length;a<o;++a){const s=e[a];i=ZR(r,t,s,n,i),t=s[s.length-1]}return i}function jR(r,t,e,n,i,a,o,s,l,u,h){if(t==e)return u;let c,f;if(i===0){if(f=Ys(o,s,r[t],r[t+1]),f<u){for(c=0;c<n;++c)l[c]=r[t+c];return l.length=n,f}return u}h=h||[NaN,NaN];let d=t+n;for(;d<e;)if(sN(r,d-n,d,n,o,s,h),f=Ys(o,s,h[0],h[1]),f<u){for(u=f,c=0;c<n;++c)l[c]=h[c];l.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(u))/i|0,1);if(a&&(sN(r,e-n,t,n,o,s,h),f=Ys(o,s,h[0],h[1]),f<u)){for(u=f,c=0;c<n;++c)l[c]=h[c];l.length=n}return u}function KR(r,t,e,n,i,a,o,s,l,u,h){h=h||[NaN,NaN];for(let c=0,f=e.length;c<f;++c){const d=e[c];u=jR(r,t,d,n,i,a,o,s,l,u,h),t=d}return u}function Ztt(r,t,e,n,i,a,o,s,l,u,h){h=h||[NaN,NaN];for(let c=0,f=e.length;c<f;++c){const d=e[c];u=KR(r,t,d,n,i,a,o,s,l,u,h),t=d[d.length-1]}return u}function J8(r,t,e,n){for(let i=0,a=e.length;i<a;++i)r[t++]=e[i];return t}function by(r,t,e,n){for(let i=0,a=e.length;i<a;++i){const o=e[i];for(let s=0;s<n;++s)r[t++]=o[s]}return t}function Ey(r,t,e,n,i){i=i||[];let a=0;for(let o=0,s=e.length;o<s;++o){const l=by(r,t,e[o],n);i[a++]=l,t=l}return i.length=a,i}function Q8(r,t,e,n,i){i=i||[];let a=0;for(let o=0,s=e.length;o<s;++o){const l=Ey(r,t,e[o],n,i[a]);l.length===0&&(l[0]=t),i[a++]=l,t=l[l.length-1]}return i.length=a,i}function QS(r,t,e,n,i,a,o){const s=(e-t)/n;if(s<3){for(;t<e;t+=n)a[o++]=r[t],a[o++]=r[t+1];return o}const l=new Array(s);l[0]=1,l[s-1]=1;const u=[t,e-n];let h=0;for(;u.length>0;){const c=u.pop(),f=u.pop();let d=0;const g=r[f],p=r[f+1],v=r[c],m=r[c+1];for(let y=f+n;y<c;y+=n){const _=r[y],x=r[y+1],w=ktt(_,x,g,p,v,m);w>d&&(h=y,d=w)}d>i&&(l[(h-t)/n]=1,f+n<h&&u.push(f,h),h+n<c&&u.push(h,c))}for(let c=0;c<s;++c)l[c]&&(a[o++]=r[t+c*n],a[o++]=r[t+c*n+1]);return o}function tU(r,t,e,n,i,a,o,s){for(let l=0,u=e.length;l<u;++l){const h=e[l];o=QS(r,t,h,n,i,a,o),s.push(o),t=h}return o}function Wh(r,t){return t*Math.round(r/t)}function jtt(r,t,e,n,i,a,o){if(t==e)return o;let s=Wh(r[t],i),l=Wh(r[t+1],i);t+=n,a[o++]=s,a[o++]=l;let u,h;do if(u=Wh(r[t],i),h=Wh(r[t+1],i),t+=n,t==e)return a[o++]=u,a[o++]=h,o;while(u==s&&h==l);for(;t<e;){const c=Wh(r[t],i),f=Wh(r[t+1],i);if(t+=n,c==u&&f==h)continue;const d=u-s,g=h-l,p=c-s,v=f-l;if(d*v==g*p&&(d<0&&p<d||d==p||d>0&&p>d)&&(g<0&&v<g||g==v||g>0&&v>g)){u=c,h=f;continue}a[o++]=u,a[o++]=h,s=u,l=h,u=c,h=f}return a[o++]=u,a[o++]=h,o}function qR(r,t,e,n,i,a,o,s){for(let l=0,u=e.length;l<u;++l){const h=e[l];o=jtt(r,t,h,n,i,a,o),s.push(o),t=h}return o}function Ktt(r,t,e,n,i,a,o,s){for(let l=0,u=e.length;l<u;++l){const h=e[l],c=[];o=qR(r,t,h,n,i,a,o,c),s.push(c),t=h[h.length-1]}return o}function Vs(r,t,e,n,i){i=i!==void 0?i:[];let a=0;for(let o=t;o<e;o+=n)i[a++]=r.slice(o,o+n);return i.length=a,i}function Cm(r,t,e,n,i){i=i!==void 0?i:[];let a=0;for(let o=0,s=e.length;o<s;++o){const l=e[o];i[a++]=Vs(r,t,l,n,i[a]),t=l}return i.length=a,i}function RM(r,t,e,n,i){i=i!==void 0?i:[];let a=0;for(let o=0,s=e.length;o<s;++o){const l=e[o];i[a++]=l.length===1&&l[0]===t?[]:Cm(r,t,l,n,i[a]),t=l[l.length-1]}return i.length=a,i}function eU(r,t,e,n){let i=0;const a=r[e-n],o=r[e-n+1];let s=0,l=0;for(;t<e;t+=n){const u=r[t]-a,h=r[t+1]-o;i+=l*u-s*h,s=u,l=h}return i/2}function rU(r,t,e,n){let i=0;for(let a=0,o=e.length;a<o;++a){const s=e[a];i+=eU(r,t,s,n),t=s}return i}function qtt(r,t,e,n){let i=0;for(let a=0,o=e.length;a<o;++a){const s=e[a];i+=rU(r,t,s,n),t=s[s.length-1]}return i}class al extends ls{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new al(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<Jc(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(XR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return eU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Vs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=QS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new al(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=by(this.flatCoordinates,0,t,this.stride),this.changed()}}let rr=class nU extends ls{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new nU(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const a=this.flatCoordinates,o=Ys(t,e,a[0],a[1]);if(o<i){const s=this.stride;for(let l=0;l<s;++l)n[l]=a[l];return n.length=s,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return Ld(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return DR(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=J8(this.flatCoordinates,0,t,this.stride),this.changed()}};function Jtt(r,t,e,n,i){return!NR(i,function(o){return!ac(r,t,e,n,o[0],o[1])})}function ac(r,t,e,n,i,a){let o=0,s=r[e-n],l=r[e-n+1];for(;t<e;t+=n){const u=r[t],h=r[t+1];l<=a?h>a&&(u-s)*(a-l)-(i-s)*(h-l)>0&&o++:h<=a&&(u-s)*(a-l)-(i-s)*(h-l)<0&&o--,s=u,l=h}return o!==0}function JR(r,t,e,n,i,a){if(e.length===0||!ac(r,t,e[0],n,i,a))return!1;for(let o=1,s=e.length;o<s;++o)if(ac(r,e[o-1],e[o],n,i,a))return!1;return!0}function Qtt(r,t,e,n,i,a){if(e.length===0)return!1;for(let o=0,s=e.length;o<s;++o){const l=e[o];if(JR(r,t,l,n,i,a))return!0;t=l[l.length-1]}return!1}function QR(r,t,e,n,i,a,o){let s,l,u,h,c,f,d;const g=i[a+1],p=[];for(let y=0,_=e.length;y<_;++y){const x=e[y];for(h=r[x-n],f=r[x-n+1],s=t;s<x;s+=n)c=r[s],d=r[s+1],(g<=f&&d<=g||f<=g&&g<=d)&&(u=(g-f)/(d-f)*(c-h)+h,p.push(u)),h=c,f=d}let v=NaN,m=-1/0;for(p.sort($s),h=p[0],s=1,l=p.length;s<l;++s){c=p[s];const y=Math.abs(c-h);y>m&&(u=(h+c)/2,JR(r,t,e,n,u,g)&&(v=u,m=y)),h=c}return isNaN(v)&&(v=i[a]),o?(o.push(v,g,m),o):[v,g,m]}function iU(r,t,e,n,i){let a=[];for(let o=0,s=e.length;o<s;++o){const l=e[o];a=QR(r,t,l,n,i,2*o,a),t=l[l.length-1]}return a}function aU(r,t,e,n,i){let a;for(t+=n;t<e;t+=n)if(a=i(r.slice(t-n,t),r.slice(t,t+n)),a)return a;return!1}function tw(r,t,e,n,i){const a=B8(qn(),r,t,e,n);return jn(i,a)?Oa(i,a)||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]?!0:aU(r,t,e,n,function(o,s){return Ctt(i,o,s)}):!1}function tet(r,t,e,n,i){for(let a=0,o=e.length;a<o;++a){if(tw(r,t,e[a],n,i))return!0;t=e[a]}return!1}function oU(r,t,e,n,i){return!!(tw(r,t,e,n,i)||ac(r,t,e,n,i[0],i[1])||ac(r,t,e,n,i[0],i[3])||ac(r,t,e,n,i[2],i[1])||ac(r,t,e,n,i[2],i[3]))}function sU(r,t,e,n,i){if(!oU(r,t,e[0],n,i))return!1;if(e.length===1)return!0;for(let a=1,o=e.length;a<o;++a)if(Jtt(r,e[a-1],e[a],n,i)&&!tw(r,e[a-1],e[a],n,i))return!1;return!0}function eet(r,t,e,n,i){for(let a=0,o=e.length;a<o;++a){const s=e[a];if(sU(r,t,s,n,i))return!0;t=s[s.length-1]}return!1}function ret(r,t,e,n){for(;t<e-n;){for(let i=0;i<n;++i){const a=r[t+i];r[t+i]=r[e-n+i],r[e-n+i]=a}t+=n,e-=n}}function ew(r,t,e,n){let i=0,a=r[e-n],o=r[e-n+1];for(;t<e;t+=n){const s=r[t],l=r[t+1];i+=(s-a)*(l+o),a=s,o=l}return i===0?void 0:i>0}function t2(r,t,e,n,i){i=i!==void 0?i:!1;for(let a=0,o=e.length;a<o;++a){const s=e[a],l=ew(r,t,s,n);if(a===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;t=s}return!0}function lU(r,t,e,n,i){for(let a=0,o=e.length;a<o;++a){const s=e[a];if(!t2(r,t,s,n,i))return!1;s.length&&(t=s[s.length-1])}return!0}function ex(r,t,e,n,i){i=i!==void 0?i:!1;for(let a=0,o=e.length;a<o;++a){const s=e[a],l=ew(r,t,s,n);(a===0?i&&l||!i&&!l:i&&!l||!i&&l)&&ret(r,t,s,n),t=s}return t}function PM(r,t,e,n,i){for(let a=0,o=e.length;a<o;++a)t=ex(r,t,e[a],n,i);return t}function uU(r,t){const e=[];let n=0,i=0,a;for(let o=0,s=t.length;o<s;++o){const l=t[o],u=ew(r,n,l,2);if(a===void 0&&(a=u),u===a)e.push(t.slice(i,o+1));else{if(e.length===0)continue;e[e.length-1].push(t[i])}i=o+1,n=l}return e}let Kr=class LM extends ls{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Ne(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new LM(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Jc(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ZR(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),KR(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return JR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return rU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),ex(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Cm(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=ua(this.getExtent());this.flatInteriorPoint_=QR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new rr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new al(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let a=0;for(let o=0,s=n.length;o<s;++o){const l=n[o],u=new al(e.slice(a,l),t);i.push(u),a=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;t2(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ex(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=qR(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new LM(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return sU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ey(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}};function DM(r){if(Zu(r))throw new Error("Cannot create polygon from empty extent");const t=r[0],e=r[1],n=r[2],i=r[3],a=[t,e,t,i,n,i,n,e,t,e];return new Kr(a,"XY",[a.length])}function hU(r,t,e){t=t||32;const n=r.getStride(),i=r.getLayout(),a=r.getCenter(),o=n*(t+1),s=new Array(o);for(let h=0;h<o;h+=n){s[h]=0,s[h+1]=0;for(let c=2;c<n;c++)s[h+c]=a[c]}const l=[s.length],u=new Kr(s,i,l);return cU(u,a,r.getRadius(),e),u}function cU(r,t,e,n){const i=r.getFlatCoordinates(),a=r.getStride(),o=i.length/a-1,s=n||0;for(let l=0;l<=o;++l){const u=l*a,h=s+Xs(l,o)*2*Math.PI/o;i[u]=t[0]+e*Math.cos(h),i[u+1]=t[1]+e*Math.sin(h)}r.changed()}const yn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ot={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Mm={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Pn={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Pn.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Pn.max=Pn.whitepoint[2].D65;Pn.rgb=function(r,t){t=t||Pn.whitepoint[2].E;var e=r[0]/t[0],n=r[1]/t[1],i=r[2]/t[2],a,o,s;return a=e*3.240969941904521+n*-1.537383177570093+i*-.498610760293,o=e*-.96924363628087+n*1.87596750150772+i*.041555057407175,s=e*.055630079696993+n*-.20397695888897+i*1.056971514242878,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[a*255,o*255,s*255]};Mm.xyz=function(r,t){var e=r[0]/255,n=r[1]/255,i=r[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var a=e*.41239079926595+n*.35758433938387+i*.18048078840183,o=e*.21263900587151+n*.71516867876775+i*.072192315360733,s=e*.019330818715591+n*.11919477979462+i*.95053215224966;return t=t||Pn.whitepoint[2].E,[a*t[0],o*t[1],s*t[2]]};const e2={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,t,e){var n,i,a,o,s,l,u,h,c,f,d,g,p;if(a=r[0],o=r[1],s=r[2],a===0)return[0,0,0];var v=.0011070564598794539;return t=t||"D65",e=e||2,c=Pn.whitepoint[e][t][0],f=Pn.whitepoint[e][t][1],d=Pn.whitepoint[e][t][2],g=4*c/(c+15*f+3*d),p=9*f/(c+15*f+3*d),n=o/(13*a)+g||0,i=s/(13*a)+p||0,u=a>8?f*Math.pow((a+16)/116,3):f*a*v,l=u*9*n/(4*i)||0,h=u*(12-3*n-20*i)/(4*i)||0,[l,u,h]}};Pn.luv=function(r,t,e){var n,i,a,o,s,l,u,h,c,f,d,g,p,v=.008856451679035631,m=903.2962962962961;t=t||"D65",e=e||2,c=Pn.whitepoint[e][t][0],f=Pn.whitepoint[e][t][1],d=Pn.whitepoint[e][t][2],g=4*c/(c+15*f+3*d),p=9*f/(c+15*f+3*d),l=r[0],u=r[1],h=r[2],n=4*l/(l+15*u+3*h)||0,i=9*u/(l+15*u+3*h)||0;var y=u/f;return a=y<=v?m*y:116*Math.pow(y,1/3)-16,o=13*a*(n-g),s=13*a*(i-p),[a,o,s]};var fU={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var t=r[0],e=r[1],n=r[2],i,a,o;return o=n/360*2*Math.PI,i=e*Math.cos(o),a=e*Math.sin(o),[t,i,a]},xyz:function(r){return e2.xyz(fU.luv(r))}};e2.lchuv=function(r){var t=r[0],e=r[1],n=r[2],i=Math.sqrt(e*e+n*n),a=Math.atan2(n,e),o=a*360/2/Math.PI;return o<0&&(o+=360),[t,i,o]};Pn.lchuv=function(r){return e2.lchuv(Pn.luv(r))};const lN={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var uN={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function net(r){var h,c;var t,e=[],n=1,i;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),lN[r])e=lN[r].slice(),i="rgb";else if(r==="transparent")n=0,i="rgb",e=[0,0,0];else if(r[0]==="#"){var a=r.slice(1),o=a.length,s=o<=4;n=1,s?(e=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],o===4&&(n=parseInt(a[3]+a[3],16)/255)):(e=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],o===8&&(n=parseInt(a[6]+a[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),i="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var l=t[1];i=l.replace(/a$/,"");var u=i==="cmyk"?4:i==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=e.shift()),e=e.map(function(f,d){if(f[f.length-1]==="%")return f=parseFloat(f)/100,d===3?f:i==="rgb"?f*255:i[0]==="h"||i[0]==="l"&&!d?f*100:i==="lab"?f*125:i==="lch"?d<2?f*150:f*360:i[0]==="o"&&!d?f:i==="oklab"?f*.4:i==="oklch"?d<2?f*.4:f*360:f;if(i[d]==="h"||d===2&&i[i.length-1]==="h"){if(uN[f]!==void 0)return uN[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return parseFloat(f)*360;if(f.endsWith("grad"))return parseFloat(f)*360/400;if(f.endsWith("rad"))return parseFloat(f)*180/Math.PI}return f==="none"?0:parseFloat(f)}),n=e.length>u?e.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(e=r.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),i=((c=(h=r.match(/([a-z])/ig))==null?void 0:h.join(""))==null?void 0:c.toLowerCase())||"rgb");return{space:i,values:e,alpha:n}}const DT={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var t=r[0]/360,e=r[1]/100,n=r[2]/100,i,a,o,s,l,u=0;if(e===0)return l=n*255,[l,l,l];for(a=n<.5?n*(1+e):n+e-n*e,i=2*n-a,s=[0,0,0];u<3;)o=t+1/3*-(u-1),o<0?o++:o>1&&o--,l=6*o<1?i+(a-i)*6*o:2*o<1?a:3*o<2?i+(a-i)*(2/3-o)*6:i,s[u++]=l*255;return s}};Mm.hsl=function(r){var t=r[0]/255,e=r[1]/255,n=r[2]/255,i=Math.min(t,e,n),a=Math.max(t,e,n),o=a-i,s,l,u;return a===i?s=0:t===a?s=(e-n)/o:e===a?s=2+(n-t)/o:n===a&&(s=4+(t-e)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(i+a)/2,a===i?l=0:u<=.5?l=o/(a+i):l=o/(2-a-i),[s,l*100,u*100]};function iet(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var t,e=net(r);if(!e.space)return[];const n=e.space[0]==="h"?DT.min:Mm.min,i=e.space[0]==="h"?DT.max:Mm.max;return t=Array(3),t[0]=Math.min(Math.max(e.values[0],n[0]),i[0]),t[1]=Math.min(Math.max(e.values[1],n[1]),i[1]),t[2]=Math.min(Math.max(e.values[2],n[2]),i[2]),e.space[0]==="h"&&(t=DT.rgb(t)),t.push(Math.min(Math.max(e.alpha,0),1)),t}const r2=[NaN,NaN,NaN,0];function aet(r){return typeof r=="string"?r:i2(r)}const oet=1024,vp={};let OT=0;function set(r){if(r.length===4)return r;const t=r.slice();return t[3]=1,t}function hN(r){const t=Pn.lchuv(Mm.xyz(r));return t[3]=r[3],t}function uet(r){const t=Pn.rgb(fU.xyz(r));return t[3]=r[3],t}function n2(r){if(r==="none")return r2;if(vp.hasOwnProperty(r))return vp[r];if(OT>=oet){let e=0;for(const n in vp)e++&3||(delete vp[n],--OT)}const t=iet(r);if(t.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const e of t)if(isNaN(e))throw new Error('failed to parse "'+r+'" as color');return dU(t),vp[r]=t,++OT,t}function Iu(r){return Array.isArray(r)?r:n2(r)}function dU(r){return r[0]=gr(r[0]+.5|0,0,255),r[1]=gr(r[1]+.5|0,0,255),r[2]=gr(r[2]+.5|0,0,255),r[3]=gr(r[3],0,1),r}function i2(r){let t=r[0];t!=(t|0)&&(t=t+.5|0);let e=r[1];e!=(e|0)&&(e=e+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const i=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+t+","+e+","+n+","+i+")"}const Ru=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",het=Ru.includes("firefox"),cet=Ru.includes("safari")&&!Ru.includes("chrom"),fet=cet&&(Ru.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ru)),det=Ru.includes("webkit")&&!Ru.includes("edge"),gU=Ru.includes("macintosh"),pU=typeof devicePixelRatio<"u"?devicePixelRatio:1,vU=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,a2=typeof Image<"u"&&Image.prototype.decode,get=typeof createImageBitmap=="function",mU=function(){let r=!1;try{const t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return r}();function Dr(r,t,e,n){let i;return e&&e.length?i=e.shift():vU?i=new OffscreenCanvas(r||300,t||300):i=document.createElement("canvas"),r&&(i.width=r),t&&(i.height=t),i.getContext("2d",n)}let NT;function rx(){return NT||(NT=Dr(1,1)),NT}function tg(r){const t=r.canvas;t.width=1,t.height=1,r.clearRect(0,0,1,1)}function pet(r){let t=r.offsetWidth;const e=getComputedStyle(r);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function vet(r){let t=r.offsetHeight;const e=getComputedStyle(r);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function nx(r,t){const e=t.parentNode;e&&e.replaceChild(r,t)}function yU(r){for(;r.lastChild;)r.lastChild.remove()}function met(r,t){const e=r.childNodes;for(let n=0;;++n){const i=e[n],a=t[n];if(!i&&!a)break;if(i!==a){if(!i){r.appendChild(a);continue}if(!a){r.removeChild(i),--n;continue}r.insertBefore(a,i)}}}class _U extends Cg{constructor(t,e,n,i){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=typeof i=="function"?Ot.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(Bt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ot.IDLE&&this.loader){this.state=Ot.LOADING,this.changed();const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;RR(()=>this.loader(this.getExtent(),e,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=Ot.LOADED}).catch(n=>{this.state=Ot.ERROR}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function yet(r,t,e){const n=r;let i=!0,a=!1,o=!1;const s=[Sm(n,Bt.LOAD,function(){o=!0,a||t()})];return n.src&&a2?(a=!0,n.decode().then(function(){i&&t()}).catch(function(l){i&&(o?t():e())})):s.push(Sm(n,Bt.ERROR,e)),function(){i=!1,s.forEach(Ve)}}function _et(r,t){return new Promise((e,n)=>{function i(){o(),e(r)}function a(){o(),n(new Error("Image load error"))}function o(){r.removeEventListener("load",i),r.removeEventListener("error",a)}r.addEventListener("load",i),r.addEventListener("error",a)})}function xU(r,t){return t&&(r.src=t),r.src&&a2?new Promise((e,n)=>r.decode().then(()=>e(r)).catch(i=>r.complete&&r.width?e(r):n(i))):_et(r)}function SU(r,t){return t&&(r.src=t),r.src&&a2&&get?r.decode().then(()=>createImageBitmap(r)).catch(e=>{if(r.complete&&r.width)return r;throw e}):xU(r)}class xet{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];!(t++&3)&&!n.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,n){const i=FT(t,e,n);return i in this.cache_?this.cache_[i]:null}getPattern(t,e,n){const i=FT(t,e,n);return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,n,i,a){const o=FT(t,e,n),s=o in this.cache_;this.cache_[o]=i,a&&(i.getImageState()===Ot.IDLE&&i.load(),i.getImageState()===Ot.LOADING?i.ready().then(()=>{this.patternCache_[o]=rx().createPattern(i.getImage(1),"repeat")}):this.patternCache_[o]=rx().createPattern(i.getImage(1),"repeat")),s||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function FT(r,t,e){const n=e?Iu(e):"null";return t+":"+r+":"+n}const Ko=new xet;let mp=null;class wet extends Cg{constructor(t,e,n,i,a){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=a,this.imageState_=i===void 0?Ot.IDLE:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ot.LOADED){mp||(mp=Dr(1,1,void 0,{willReadFrequently:!0})),mp.drawImage(this.image_,0,0);try{mp.getImageData(0,0,1,1),this.tainted_=!1}catch{mp=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Bt.CHANGE)}handleImageError_(){this.imageState_=Ot.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ot.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=Dr(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ot.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ot.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&xU(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Ot.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const i=n.getContext("2d");i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=aet(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===Ot.LOADED||this.imageState_===Ot.ERROR)t();else{const e=()=>{(this.imageState_===Ot.LOADED||this.imageState_===Ot.ERROR)&&(this.removeEventListener(Bt.CHANGE,e),t())};this.addEventListener(Bt.CHANGE,e)}})),this.ready_}}function o2(r,t,e,n,i,a){let o=t===void 0?void 0:Ko.get(t,e,i);return o||(o=new wet(r,r&&"src"in r?r.src||void 0:t,e,n,i),Ko.set(t,e,i,o,a)),a&&o&&!Ko.getPattern(t,e,i)&&Ko.set(t,e,i,o,a),o}class Ee{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Ee({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=o2(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===Ot.IDLE&&e.load(),e.getImageState()===Ot.LOADING&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ix(r,t,e,n,i,a,o){let s,l;const u=(e-t)/n;if(u===1)s=t;else if(u===2)s=t,l=i;else if(u!==0){let h=r[t],c=r[t+1],f=0;const d=[0];for(let v=t+n;v<e;v+=n){const m=r[v],y=r[v+1];f+=Math.sqrt((m-h)*(m-h)+(y-c)*(y-c)),d.push(f),h=m,c=y}const g=i*f,p=ltt(d,g);p<0?(l=(g-d[-p-2])/(d[-p-1]-d[-p-2]),s=t+(-p-2)*n):s=t+p*n}o=o>1?o:2,a=a||new Array(o);for(let h=0;h<o;++h)a[h]=s===void 0?NaN:l===void 0?r[s+h]:qi(r[s+h],r[s+n+h],l);return a}function OM(r,t,e,n,i,a){if(e==t)return null;let o;if(i<r[t+n-1])return a?(o=r.slice(t,t+n),o[n-1]=i,o):null;if(r[e-1]<i)return a?(o=r.slice(e-n,e),o[n-1]=i,o):null;if(i==r[t+n-1])return r.slice(t,t+n);let s=t/n,l=e/n;for(;s<l;){const f=s+l>>1;i<r[(f+1)*n-1]?l=f:s=f+1}const u=r[s*n-1];if(i==u)return r.slice((s-1)*n,(s-1)*n+n);const h=r[(s+1)*n-1],c=(i-u)/(h-u);o=[];for(let f=0;f<n-1;++f)o.push(qi(r[(s-1)*n+f],r[s*n+f],c));return o.push(i),o}function Tet(r,t,e,n,i,a,o){if(o)return OM(r,t,e[e.length-1],n,i,a);let s;if(i<r[n-1])return a?(s=r.slice(0,n),s[n-1]=i,s):null;if(r[r.length-1]<i)return a?(s=r.slice(r.length-n),s[n-1]=i,s):null;for(let l=0,u=e.length;l<u;++l){const h=e[l];if(t!=h){if(i<r[t+n-1])return null;if(i<=r[h-1])return OM(r,t,h,n,i,!1);t=h}}return null}function wU(r,t,e,n){let i=r[t],a=r[t+1],o=0;for(let s=t+n;s<e;s+=n){const l=r[s],u=r[s+1];o+=Math.sqrt((l-i)*(l-i)+(u-a)*(u-a)),i=l,a=u}return o}class ke extends ls{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){Ne(this.flatCoordinates,t),this.changed()}clone(){const t=new ke(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Jc(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(XR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return aU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,OM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Vs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return ix(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return wU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=QS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new ke(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return tw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=by(this.flatCoordinates,0,t,this.stride),this.changed()}}class or{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new or({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}function cN(r){return r[0]>0&&r[1]>0}function bet(r,t,e){return e===void 0&&(e=[0,0]),e[0]=r[0]*t+.5|0,e[1]=r[1]*t+.5|0,e}function Gr(r,t){return Array.isArray(r)?r:(t===void 0?t=[r,r]:(t[0]=r,t[1]=r),t)}class rw{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Gr(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new rw({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ut()}getImage(t){return Ut()}getHitDetectionImage(){return Ut()}getPixelRatio(t){return 1}getImageState(){return Ut()}getImageSize(){return Ut()}getOrigin(){return Ut()}getSize(){return Ut()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Gr(t)}listenImageChange(t){Ut()}load(){Ut()}unlistenImageChange(t){Ut()}ready(){return Promise.resolve()}}function qo(r){return r?Array.isArray(r)?i2(r):typeof r=="object"&&"src"in r?Eet(r):r:null}function Eet(r){if(!r.offset||!r.size)return Ko.getPattern(r.src,"anonymous",r.color);const t=r.src+":"+r.offset,e=Ko.getPattern(t,void 0,r.color);if(e)return e;const n=Ko.get(r.src,"anonymous",null);if(n.getImageState()!==Ot.LOADED)return null;const i=Dr(r.size[0],r.size[1]);return i.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),o2(i.canvas,t,void 0,Ot.LOADED,r.color,!0),Ko.getPattern(t,void 0,r.color)}const _0="ol-hidden",Cet="ol-selectable",Cy="ol-unselectable",nw="ol-control",ax="ol-collapsed",Met=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fN=["style","variant","weight","size","lineHeight","family"],TU=function(r){const t=r.match(Met);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,i=fN.length;n<i;++n){const a=t[n+1];a!==void 0&&(e[fN[n]]=a)}return e.families=e.family.split(/,\s?/),e},bU="10px sans-serif",Li="#000",eg="round",Zs=[],js=0,rg="round",Am=10,Im="#000",Rm="center",ox="middle",oc=[0,0,0,0],Pm=1,Ps=new Xa;let Kf=null,NM;const FM={},Aet=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10";let a,o;function s(u,h,c){let f=!0;for(let d=0;d<n;++d){const g=e[d];if(o=sx(u+" "+h+" "+t+g,i),c!=g){const p=sx(u+" "+h+" "+t+c+","+g,i);f=f&&p!=o}}return!!f}function l(){let u=!0;const h=Ps.getKeys();for(let c=0,f=h.length;c<f;++c){const d=h[c];if(Ps.get(d)<100){const[g,p,v]=d.split(`
`);s(g,p,v)?(Eg(FM),Kf=null,NM=void 0,Ps.set(d,100)):(Ps.set(d,Ps.get(d)+1,!0),u=!1)}}u&&(clearInterval(a),a=void 0)}return function(u){const h=TU(u);if(!h)return;const c=h.families;for(let f=0,d=c.length;f<d;++f){const g=c[f],p=h.style+`
`+h.weight+`
`+g;Ps.get(p)===void 0&&(Ps.set(p,100,!0),s(h.style,h.weight,g)||(Ps.set(p,0,!0),a===void 0&&(a=setInterval(l,32))))}}}(),Iet=function(){let r;return function(t){let e=FM[t];if(e==null){if(vU){const n=TU(t),i=EU(t,"g");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=t,document.body.appendChild(r),e=r.offsetHeight,document.body.removeChild(r);FM[t]=e}return e}}();function EU(r,t){return Kf||(Kf=Dr(1,1)),r!=NM&&(Kf.font=r,NM=Kf.font),Kf.measureText(t)}function sx(r,t){return EU(r,t).width}function dN(r,t,e){if(t in e)return e[t];const n=t.split(`
`).reduce((i,a)=>Math.max(i,sx(r,a)),0);return e[t]=n,n}function Ret(r,t){const e=[],n=[],i=[];let a=0,o=0,s=0,l=0;for(let u=0,h=t.length;u<=h;u+=2){const c=t[u];if(c===`
`||u===h){a=Math.max(a,o),i.push(o),o=0,s+=l,l=0;continue}const f=t[u+1]||r.font,d=sx(f,c);e.push(d),o+=d;const g=Iet(f);n.push(g),l=Math.max(l,g)}return{width:a,height:s,widths:e,heights:n,lineWidths:i}}function Pet(r,t,e,n,i,a,o,s,l,u,h){r.save(),e!==1&&(r.globalAlpha===void 0?r.globalAlpha=c=>c.globalAlpha*=e:r.globalAlpha*=e),t&&r.transform.apply(r,t),n.contextInstructions?(r.translate(l,u),r.scale(h[0],h[1]),Let(n,r)):h[0]<0||h[1]<0?(r.translate(l,u),r.scale(h[0],h[1]),r.drawImage(n,i,a,o,s,0,0,o,s)):r.drawImage(n,i,a,o,s,l,u,o*h[0],s*h[1]),r.restore()}function Let(r,t){const e=r.contextInstructions;for(let n=0,i=e.length;n<i;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}class Oc extends rw{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ot.LOADING:Ot.LOADED,this.imageState_===Ot.LOADING&&this.ready().then(()=>this.imageState_=Ot.LOADED),this.render()}clone(){const t=this.getScale(),e=new Oc({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){const n=this.renderOptions_,i=Dr(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let i=this.radius,a=this.radius2_===void 0?i:this.radius2_;if(i<a){const S=i;i=a,a=S}const o=this.radius2_===void 0?this.points_:this.points_*2,s=2*Math.PI/o,l=a*Math.sin(s),u=Math.sqrt(a*a-l*l),h=i-u,c=Math.sqrt(l*l+h*h),f=c/l;if(t==="miter"&&f<=n)return f*e;const d=e/2/f,g=e/2*(h/c),v=Math.sqrt((i+d)*(i+d)+g*g)-i;if(this.radius2_===void 0||t==="bevel")return v*2;const m=i*Math.sin(s),y=Math.sqrt(i*i-m*m),_=a-y,w=Math.sqrt(m*m+_*_)/m;if(w<=n){const S=w*e/2-a-i;return 2*Math.max(v,S)}return v*2}createRenderOptions(){let t=eg,e=rg,n=0,i=null,a=0,o,s=0;this.stroke_&&(o=qo(this.stroke_.getColor()??Im),s=this.stroke_.getWidth()??Pm,i=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??rg,t=this.stroke_.getLineCap()??eg,n=this.stroke_.getMiterLimit()??Am);const l=this.calculateLineJoinSize_(e,s,n),u=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:s,size:h,lineCap:t,lineDash:i,lineDashOffset:a,lineJoin:e,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let i=this.fill_.getColor();i===null&&(i=Li),e.fillStyle=qo(i),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let n=this.fill_.getColor(),i=0;typeof n=="string"&&(n=Iu(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0&&(e=Dr(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const n=this.radius;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(e*=2);const a=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let s=0;s<e;s++){const l=a+s*o,u=s%2===0?n:i;t.lineTo(u*Math.cos(l),u*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Li,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class ha extends Oc{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new ha({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class Te{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=gN,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Te({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=gN,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Det(r){let t;if(typeof r=="function")t=r;else{let e;Array.isArray(r)?e=r:(pe(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[r]),t=function(){return e}}return t}let kT=null;function CU(r,t){if(!kT){const e=new Ee({color:"rgba(255,255,255,0.4)"}),n=new or({color:"#3399CC",width:1.25});kT=[new Te({image:new ha({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return kT}function MU(){const r={},t=[255,255,255,1],e=[0,153,255,1],n=3;return r.Polygon=[new Te({fill:new Ee({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new Te({stroke:new or({color:t,width:n+2})}),new Te({stroke:new or({color:e,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new Te({image:new ha({radius:n*2,fill:new Ee({color:e}),stroke:new or({color:t,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function gN(r){return r.getGeometry()}const Oet="#333";class Kn{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Gr(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Ee({color:Oet}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Kn({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Gr(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const We={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class AU extends Xa{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[We.OPACITY]=t.opacity!==void 0?t.opacity:1,pe(typeof e[We.OPACITY]=="number","Layer opacity must be a number"),e[We.VISIBLE]=t.visible!==void 0?t.visible:!0,e[We.Z_INDEX]=t.zIndex,e[We.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[We.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[We.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[We.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return e.opacity=gr(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Ut()}getLayerStatesArray(t){return Ut()}getExtent(){return this.get(We.EXTENT)}getMaxResolution(){return this.get(We.MAX_RESOLUTION)}getMinResolution(){return this.get(We.MIN_RESOLUTION)}getMinZoom(){return this.get(We.MIN_ZOOM)}getMaxZoom(){return this.get(We.MAX_ZOOM)}getOpacity(){return this.get(We.OPACITY)}getSourceState(){return Ut()}getVisible(){return this.get(We.VISIBLE)}getZIndex(){return this.get(We.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(We.EXTENT,t)}setMaxResolution(t){this.set(We.MAX_RESOLUTION,t)}setMinResolution(t){this.set(We.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(We.MAX_ZOOM,t)}setMinZoom(t){this.set(We.MIN_ZOOM,t)}setOpacity(t){pe(typeof t=="number","Layer opacity must be a number"),this.set(We.OPACITY,t)}setVisible(t){this.set(We.VISIBLE,t)}setZIndex(t){this.set(We.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Yr={ANIMATING:0,INTERACTING:1},ji={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Net=42,s2=256;function pN(r,t,e){return function(n,i,a,o,s){if(!n)return;if(!i&&!t)return n;const l=t?0:a[0]*i,u=t?0:a[1]*i,h=s?s[0]:0,c=s?s[1]:0;let f=r[0]+l/2+h,d=r[2]-l/2+h,g=r[1]+u/2+c,p=r[3]-u/2+c;f>d&&(f=(d+f)/2,d=f),g>p&&(g=(p+g)/2,p=g);let v=gr(n[0],f,d),m=gr(n[1],g,p);if(o&&e&&i){const y=30*i;v+=-y*Math.log(1+Math.max(0,f-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-d)/y),m+=-y*Math.log(1+Math.max(0,g-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-p)/y)}return[v,m]}}function Fet(r){return r}function l2(r,t,e,n){const i=Me(t)/e[0],a=kr(t)/e[1];return n?Math.min(r,Math.max(i,a)):Math.min(r,Math.min(i,a))}function u2(r,t,e){let n=Math.min(r,t);const i=50;return n*=Math.log(1+i*Math.max(0,r/t-1))/i+1,e&&(n=Math.max(n,e),n/=Math.log(1+i*Math.max(0,e/r-1))/i+1),gr(n,e/2,t*2)}function ket(r,t,e,n){return t=t!==void 0?t:!0,function(i,a,o,s){if(i!==void 0){const l=r[0],u=r[r.length-1],h=e?l2(l,e,o,n):l;if(s)return t?u2(i,h,u):gr(i,u,h);const c=Math.min(h,i),f=Math.floor(KS(r,c,a));return r[f]>h&&f<r.length-1?r[f+1]:r[f]}}}function Get(r,t,e,n,i,a){return n=n!==void 0?n:!0,e=e!==void 0?e:0,function(o,s,l,u){if(o!==void 0){const h=i?l2(t,i,l,a):t;if(u)return n?u2(o,h,e):gr(o,e,h);const c=1e-9,f=Math.ceil(Math.log(t/h)/Math.log(r)-c),d=-s*(.5-c)+.5,g=Math.min(h,o),p=Math.floor(Math.log(t/g)/Math.log(r)+d),v=Math.max(f,p),m=t/Math.pow(r,v);return gr(m,e,h)}}}function vN(r,t,e,n,i){return e=e!==void 0?e:!0,function(a,o,s,l){if(a!==void 0){const u=n?l2(r,n,s,i):r;return!e||!l?gr(a,t,u):u2(a,u,t)}}}function h2(r){if(r!==void 0)return 0}function mN(r){if(r!==void 0)return r}function Bet(r){const t=2*Math.PI/r;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function zet(r){const t=mu(5);return function(e,n){return n||e===void 0?e:Math.abs(e)<=t?0:e}}function IU(r){return Math.pow(r,3)}function Rg(r){return 1-IU(1-r)}function Vet(r){return 3*r*r-2*r*r*r}function Uet(r){return r}const GT=0;let ao=class extends Xa{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=WR(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&j8(),t.center&&(t.center=cr(t.center,this.projection_)),t.extent&&(t.extent=na(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const s in ji)delete e[s];this.setProperties(e,!0);const n=Het(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=Wet(t),a=n.constraint,o=$et(t);this.constraints_={center:i,resolution:a,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const a=this.getResolution(),o=a/2*(i[3]-e[3]+e[1]-i[1]),s=a/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let i=arguments[n];i.center&&(i=Object.assign({},i),i.center=cr(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=cr(i.anchor,this.getProjection())),e[n]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let i=0;for(;i<e&&!this.isDef();++i){const h=arguments[i];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(i===e){n&&x0(n,!0);return}let a=Date.now(),o=this.targetCenter_.slice(),s=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<e;++i){const h=arguments[i],c={start:a,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Vet,callback:n};if(h.center&&(c.sourceCenter=o,c.targetCenter=h.center.slice(),o=c.targetCenter),h.zoom!==void 0?(c.sourceResolution=s,c.targetResolution=this.getResolutionForZoom(h.zoom),s=c.targetResolution):h.resolution&&(c.sourceResolution=s,c.targetResolution=h.resolution,s=c.targetResolution),h.rotation!==void 0){c.sourceRotation=l;const f=Xs(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=l+f,l=c.targetRotation}Yet(c)?c.complete=!0:a+=c.duration,u.push(c)}this.animations_.push(u),this.setHint(Yr.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Yr.ANIMATING]>0}getInteracting(){return this.hints_[Yr.INTERACTING]>0}cancelAnimations(){this.setHint(Yr.ANIMATING,-this.hints_[Yr.ANIMATING]);let t;for(let e=0,n=this.animations_.length;e<n;++e){const i=this.animations_[e];if(i[0].callback&&x0(i[0].callback,!1),!t)for(let a=0,o=i.length;a<o;++a){const s=i[a];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let a=!0;for(let o=0,s=i.length;o<s;++o){const l=i[o];if(l.complete)continue;const u=t-l.start;let h=l.duration>0?u/l.duration:1;h>=1?(l.complete=!0,h=1):a=!1;const c=l.easing(h);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const v=f+c*(g-f),m=d+c*(p-d);this.targetCenter_=[v,m]}if(l.sourceResolution&&l.targetResolution){const f=c===1?l.targetResolution:l.sourceResolution+c*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=c===1?Xs(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+c*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(a){this.animations_[n]=null,this.setHint(Yr.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&x0(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return i!==void 0&&(n=[i[0]-e[0],i[1]-e[1]],zR(n,t-this.getRotation()),U8(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){const o=e[0]-t*(e[0]-i[0])/a,s=e[1]-t*(e[1]-i[1])/a;n=[o,s]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Au(t,this.getProjection())}getCenterInternal(){return this.get(ji.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Ty(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();pe(e,"The view center is not defined");const n=this.getResolution();pe(n!==void 0,"The view resolution is not defined");const i=this.getRotation();return pe(i!==void 0,"The view rotation is not defined"),Tm(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ji.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(na(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Me(t)/e[0],i=kr(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(a){return e/Math.pow(t,a*i)}}getRotation(){return this.get(ji.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(n/i)/e;return function(o){return Math.log(n/o)/e/a}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const a=this.padding_;if(a){const o=this.getViewportSizeMinusPadding_();i=BT(i,this.getViewportSize_(),[o[0]/2+a[3],o[1]/2+a[0]],e,n)}return{center:i.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,n,i;if(this.resolutions_){const a=KS(this.resolutions_,t,1);e=a,n=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=n/this.resolutions_[a+1]}else n=this.maxResolution_,i=this.zoomFactor_;return e+Math.log(n/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=gr(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,gr(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(pe(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){pe(!Zu(t),"Cannot fit empty extent provided as `geometry`");const i=na(t,this.getProjection());n=DM(i)}else if(t.getType()==="Circle"){const i=na(t.getExtent(),this.getProjection());n=DM(i),n.rotate(this.getRotation(),ua(i))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),a=t.getFlatCoordinates(),o=t.getStride();let s=1/0,l=1/0,u=-1/0,h=-1/0;for(let c=0,f=a.length;c<f;c+=o){const d=a[c]*n-a[c+1]*i,g=a[c]*i+a[c+1]*n;s=Math.min(s,d),l=Math.min(l,g),u=Math.max(u,d),h=Math.max(h,g)}return[s,l,u,h]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const i=e.padding!==void 0?e.padding:[0,0,0,0],a=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const s=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,a?0:1);const u=this.getRotation(),h=Math.sin(u),c=Math.cos(u),f=ua(s);f[0]+=(i[1]-i[3])/2*l,f[1]+=(i[0]-i[2])/2*l;const d=f[0]*c-f[1]*h,g=f[1]*c+f[0]*h,p=this.getConstrainedCenter([d,g],l),v=e.callback?e.callback:Kd;e.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:e.duration,easing:e.easing},v):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),x0(v,!0))}centerOn(t,e,n){this.centerOnInternal(cr(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(BT(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let a;const o=this.padding_;if(o&&t){const s=this.getViewportSizeMinusPadding_(-n),l=BT(t,i,[s[0]/2+o[3],s[1]/2+o[0]],e,n);a=[t[0]-l[0],t[1]-l[1]]}return a}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Au(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&cr(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(a,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=cr(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&cr(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),a=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,a,n),s=this.constraints_.center(this.targetCenter_,o,a,n,this.calculateCenterShift(this.targetCenter_,o,i,a));this.get(ji.ROTATION)!==i&&this.set(ji.ROTATION,i),this.get(ji.RESOLUTION)!==o&&(this.set(ji.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!s||!this.get(ji.CENTER)||!io(this.get(ji.CENTER),s))&&this.set(ji.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=t!==void 0?t:200;const i=e||0,a=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(a),s=this.constraints_.resolution(this.targetResolution_,i,o),l=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,a,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=s,this.targetRotation_=a,this.targetCenter_=l,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==s||this.getRotation()!==a||!this.getCenterInternal()||!io(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:l,resolution:s,duration:t,easing:Rg,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Yr.INTERACTING,1)}endInteraction(t,e,n){n=n&&cr(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(Yr.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}};function x0(r,t){setTimeout(function(){r(t)},0)}function Wet(r){if(r.extent!==void 0){const e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return pN(r.extent,r.constrainOnlyCenter,e)}const t=WR(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,pN(e,!1,!1)}return Fet}function Het(r){let t,e,n,o=r.minZoom!==void 0?r.minZoom:GT,s=r.maxZoom!==void 0?r.maxZoom:28;const l=r.zoomFactor!==void 0?r.zoomFactor:2,u=r.multiWorld!==void 0?r.multiWorld:!1,h=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,c=r.showFullExtent!==void 0?r.showFullExtent:!1,f=WR(r.projection,"EPSG:3857"),d=f.getExtent();let g=r.constrainOnlyCenter,p=r.extent;if(!u&&!p&&f.isGlobal()&&(g=!1,p=d),r.resolutions!==void 0){const v=r.resolutions;e=v[o],n=v[s]!==void 0?v[s]:v[v.length-1],r.constrainResolution?t=ket(v,h,!g&&p,c):t=vN(e,n,h,!g&&p,c)}else{const m=(d?Math.max(Me(d),kr(d)):360*kR.degrees/f.getMetersPerUnit())/s2/Math.pow(2,GT),y=m/Math.pow(2,28-GT);e=r.maxResolution,e!==void 0?o=0:e=m/Math.pow(l,o),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=e/Math.pow(l,s):n=m/Math.pow(l,s):n=y),s=o+Math.floor(Math.log(e/n)/Math.log(l)),n=e/Math.pow(l,s-o),r.constrainResolution?t=Get(l,e,n,h,!g&&p,c):t=vN(e,n,h,!g&&p,c)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:o,zoomFactor:l}}function $et(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const e=r.constrainRotation;return e===void 0||e===!0?zet():e===!1?mN:typeof e=="number"?Bet(e):mN}return h2}function Yet(r){return!(r.sourceCenter&&r.targetCenter&&!io(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function BT(r,t,e,n,i){const a=Math.cos(-i);let o=Math.sin(-i),s=r[0]*a-r[1]*o,l=r[1]*a+r[0]*o;s+=(t[0]/2-e[0])*n,l+=(e[1]-t[1]/2)*n,o=-o;const u=s*a-l*o,h=l*a+s*o;return[u,h]}let My=class extends AU{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(We.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(We.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ve(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=se(t,Bt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof ao?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let i;e.layerStatesArray?i=e.layerStatesArray.find(o=>o.layer===this):i=this.getLayerState();const a=this.getExtent();return c2(i,e.viewState)&&(!a||jn(a,e.extent))}getAttributions(t){var a;if(!this.isVisible(t))return[];const e=(a=this.getSource())==null?void 0:a.getAttributions();if(!e)return[];const n=t instanceof ao?t.getViewStateAndExtent():t;let i=e(n);return Array.isArray(i)||(i=[i]),i}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(We.MAP,t)}getMapInternal(){return this.get(We.MAP)}setMap(t){this.mapPrecomposeKey_&&(Ve(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Ve(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=se(t,yn.PRECOMPOSE,e=>{const i=e.frameState.layerStatesArray,a=this.getLayerState(!1);pe(!i.some(function(o){return o.layer===a.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(a)}),this.mapRenderKey_=se(this,Bt.CHANGE,t.render,t),this.changed())}setSource(t){this.set(We.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function c2(r,t){if(!r.visible)return!1;const e=t.resolution;if(e<r.minResolution||e>=r.maxResolution)return!1;const n=t.zoom;return n>r.minZoom&&n<=r.maxZoom}function RU(r,t,e=0,n=r.length-1,i=Xet){for(;n>e;){if(n-e>600){const l=n-e+1,u=t-e+1,h=Math.log(l),c=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*c*(l-c)/l)*(u-l/2<0?-1:1),d=Math.max(e,Math.floor(t-u*c/l+f)),g=Math.min(n,Math.floor(t+(l-u)*c/l+f));RU(r,t,d,g,i)}const a=r[t];let o=e,s=n;for(yp(r,e,t),i(r[n],a)>0&&yp(r,e,n);o<s;){for(yp(r,o,s),o++,s--;i(r[o],a)<0;)o++;for(;i(r[s],a)>0;)s--}i(r[e],a)===0?yp(r,e,s):(s++,yp(r,s,n)),s<=t&&(e=s+1),t<=s&&(n=s-1)}}function yp(r,t,e){const n=r[t];r[t]=r[e],r[e]=n}function Xet(r,t){return r<t?-1:r>t?1:0}let PU=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!w0(t,e))return n;const i=this.toBBox,a=[];for(;e;){for(let o=0;o<e.children.length;o++){const s=e.children[o],l=e.leaf?i(s):s;w0(t,l)&&(e.leaf?n.push(s):VT(t,l)?this._all(s,n):a.push(s))}e=a.pop()}return n}collides(t){let e=this.data;if(!w0(t,e))return!1;const n=[];for(;e;){for(let i=0;i<e.children.length;i++){const a=e.children[i],o=e.leaf?this.toBBox(a):a;if(w0(t,o)){if(e.leaf||VT(t,o))return!0;n.push(a)}}e=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=qf([]),this}remove(t,e){if(!t)return this;let n=this.data;const i=this.toBBox(t),a=[],o=[];let s,l,u;for(;n||a.length;){if(n||(n=a.pop(),l=a[a.length-1],s=o.pop(),u=!0),n.leaf){const h=Zet(t,n.children,e);if(h!==-1)return n.children.splice(h,1),a.push(n),this._condense(a),this}!u&&!n.leaf&&VT(n,i)?(a.push(n),o.push(s),s=0,l=n,n=n.children[0]):l?(s++,n=l.children[s],u=!1):n=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,i){const a=n-e+1;let o=this._maxEntries,s;if(a<=o)return s=qf(t.slice(e,n+1)),ff(s,this.toBBox),s;i||(i=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,i-1))),s=qf([]),s.leaf=!1,s.height=i;const l=Math.ceil(a/o),u=l*Math.ceil(Math.sqrt(o));yN(t,e,n,u,this.compareMinX);for(let h=e;h<=n;h+=u){const c=Math.min(h+u-1,n);yN(t,h,c,l,this.compareMinY);for(let f=h;f<=c;f+=l){const d=Math.min(f+l-1,c);s.children.push(this._build(t,f,d,i-1))}}return ff(s,this.toBBox),s}_chooseSubtree(t,e,n,i){for(;i.push(e),!(e.leaf||i.length-1===n);){let a=1/0,o=1/0,s;for(let l=0;l<e.children.length;l++){const u=e.children[l],h=zT(u),c=qet(t,u)-h;c<o?(o=c,a=h<a?h:a,s=u):c===o&&h<a&&(a=h,s=u)}e=s||e.children[0]}return e}_insert(t,e,n){const i=n?t:this.toBBox(t),a=[],o=this._chooseSubtree(i,this.data,e,a);for(o.children.push(t),av(o,i);e>=0&&a[e].children.length>this._maxEntries;)this._split(a,e),e--;this._adjustParentBBoxes(i,a,e)}_split(t,e){const n=t[e],i=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,i);const o=this._chooseSplitIndex(n,a,i),s=qf(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,ff(n,this.toBBox),ff(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,e){this.data=qf([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ff(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,a=1/0,o=1/0;for(let s=e;s<=n-e;s++){const l=iv(t,0,s,this.toBBox),u=iv(t,s,n,this.toBBox),h=Jet(l,u),c=zT(l)+zT(u);h<a?(a=h,i=s,o=c<o?c:o):h===a&&c<o&&(o=c,i=s)}return i||n-e}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:jet,a=t.leaf?this.compareMinY:Ket,o=this._allDistMargin(t,e,n,i),s=this._allDistMargin(t,e,n,a);o<s&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const a=this.toBBox,o=iv(t,0,e,a),s=iv(t,n-e,n,a);let l=S0(o)+S0(s);for(let u=e;u<n-e;u++){const h=t.children[u];av(o,t.leaf?a(h):h),l+=S0(o)}for(let u=n-e-1;u>=e;u--){const h=t.children[u];av(s,t.leaf?a(h):h),l+=S0(s)}return l}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)av(e[i],t)}_condense(t){for(let e=t.length-1,n;e>=0;e--)t[e].children.length===0?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():ff(t[e],this.toBBox)}};function Zet(r,t,e){if(!e)return t.indexOf(r);for(let n=0;n<t.length;n++)if(e(r,t[n]))return n;return-1}function ff(r,t){iv(r,0,r.children.length,t,r)}function iv(r,t,e,n,i){i||(i=qf(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let a=t;a<e;a++){const o=r.children[a];av(i,r.leaf?n(o):o)}return i}function av(r,t){return r.minX=Math.min(r.minX,t.minX),r.minY=Math.min(r.minY,t.minY),r.maxX=Math.max(r.maxX,t.maxX),r.maxY=Math.max(r.maxY,t.maxY),r}function jet(r,t){return r.minX-t.minX}function Ket(r,t){return r.minY-t.minY}function zT(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function S0(r){return r.maxX-r.minX+(r.maxY-r.minY)}function qet(r,t){return(Math.max(t.maxX,r.maxX)-Math.min(t.minX,r.minX))*(Math.max(t.maxY,r.maxY)-Math.min(t.minY,r.minY))}function Jet(r,t){const e=Math.max(r.minX,t.minX),n=Math.max(r.minY,t.minY),i=Math.min(r.maxX,t.maxX),a=Math.min(r.maxY,t.maxY);return Math.max(0,i-e)*Math.max(0,a-n)}function VT(r,t){return r.minX<=t.minX&&r.minY<=t.minY&&t.maxX<=r.maxX&&t.maxY<=r.maxY}function w0(r,t){return t.minX<=r.maxX&&t.minY<=r.maxY&&t.maxX>=r.minX&&t.maxY>=r.minY}function qf(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function yN(r,t,e,n,i){const a=[t,e];for(;a.length;){if(e=a.pop(),t=a.pop(),e-t<=n)continue;const o=t+Math.ceil((e-t)/n/2)*n;RU(r,o,t,e,i),a.push(t,o,o,e)}}function _N(r,t,e,n){return e!==void 0&&n!==void 0?[e/r,n/t]:e!==void 0?e/r:n!==void 0?n/t:1}class ia extends rw{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,i=t.scale!==void 0?t.scale:1,a=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:n,scale:i,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:a,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let s=t.src;pe(!(s!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(s===void 0||s.length===0)&&o&&(s=o.src||zt(o)),pe(s!==void 0&&s.length>0,"A defined and non-empty `src` or `image` must be provided"),pe(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=Ot.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?Ot.LOADED:Ot.IDLE:l=Ot.LOADING:l=Ot.LOADED),this.color_=t.color!==void 0?Iu(t.color):null,this.iconImage_=o2(o,s,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let u,h;if(t.size)[u,h]=t.size;else{const c=this.getImage(1);if(c.width&&c.height)u=c.width,h=c.height;else if(c instanceof HTMLImageElement){this.initialOptions_=t;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(_N(d[0],d[1],t.width,t.height))};this.listenImageChange(f);return}}u!==void 0&&this.setScale(_N(u,h,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new ia({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=i[0]),this.anchorYUnits_=="fraction"&&(t[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Bt.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Bt.CHANGE,t)}ready(){return this.iconImage_.ready()}}let tf=0;const $n=1<<tf++,ge=1<<tf++,Yn=1<<tf++,Ji=1<<tf++,Pu=1<<tf++,hd=1<<tf++,T0=Math.pow(2,tf)-1,f2={[$n]:"boolean",[ge]:"number",[Yn]:"string",[Ji]:"color",[Pu]:"number[]",[hd]:"size"},Qet=Object.keys(f2).map(Number).sort($s);function trt(r){return r in f2}function cd(r){const t=[];for(const e of Qet)ov(r,e)&&t.push(f2[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function ov(r,t){return(r&t)===t}function Ml(r,t){return r===t}class tn{constructor(t,e){if(!trt(t))throw new Error(`literal expressions must have a specific type, got ${cd(t)}`);this.type=t,this.value=e}}class LU{constructor(t,e,...n){this.type=t,this.operator=e,this.args=n}}function d2(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function xn(r,t,e){switch(typeof r){case"boolean":{if(Ml(t,Yn))return new tn(Yn,r?"true":"false");if(!ov(t,$n))throw new Error(`got a boolean, but expected ${cd(t)}`);return new tn($n,r)}case"number":{if(Ml(t,hd))return new tn(hd,Gr(r));if(Ml(t,$n))return new tn($n,!!r);if(Ml(t,Yn))return new tn(Yn,r.toString());if(!ov(t,ge))throw new Error(`got a number, but expected ${cd(t)}`);return new tn(ge,r)}case"string":{if(Ml(t,Ji))return new tn(Ji,n2(r));if(Ml(t,$n))return new tn($n,!!r);if(!ov(t,Yn))throw new Error(`got a string, but expected ${cd(t)}`);return new tn(Yn,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return crt(r,t,e);for(const n of r)if(typeof n!="number")throw new Error("expected an array of numbers");if(Ml(t,hd)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new tn(hd,r)}if(Ml(t,Ji)){if(r.length===3)return new tn(Ji,[...r,1]);if(r.length===4)return new tn(Ji,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!ov(t,Pu))throw new Error(`got an array of numbers, but expected ${cd(t)}`);return new tn(Pu,r)}const j={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},ert={[j.Get]:oe(ye(1,1/0),xN),[j.Var]:oe(ye(1,1),rrt),[j.Has]:oe(ye(1,1/0),xN),[j.Id]:oe(nrt,df),[j.Concat]:oe(ye(2,1/0),Xe(Yn)),[j.GeometryType]:oe(irt,df),[j.LineMetric]:oe(df),[j.Resolution]:oe(df),[j.Zoom]:oe(df),[j.Time]:oe(df),[j.Any]:oe(ye(2,1/0),Xe($n)),[j.All]:oe(ye(2,1/0),Xe($n)),[j.Not]:oe(ye(1,1),Xe($n)),[j.Equal]:oe(ye(2,2),Xe(T0)),[j.NotEqual]:oe(ye(2,2),Xe(T0)),[j.GreaterThan]:oe(ye(2,2),Xe(ge)),[j.GreaterThanOrEqualTo]:oe(ye(2,2),Xe(ge)),[j.LessThan]:oe(ye(2,2),Xe(ge)),[j.LessThanOrEqualTo]:oe(ye(2,2),Xe(ge)),[j.Multiply]:oe(ye(2,1/0),SN),[j.Coalesce]:oe(ye(2,1/0),SN),[j.Divide]:oe(ye(2,2),Xe(ge)),[j.Add]:oe(ye(2,1/0),Xe(ge)),[j.Subtract]:oe(ye(2,2),Xe(ge)),[j.Clamp]:oe(ye(3,3),Xe(ge)),[j.Mod]:oe(ye(2,2),Xe(ge)),[j.Pow]:oe(ye(2,2),Xe(ge)),[j.Abs]:oe(ye(1,1),Xe(ge)),[j.Floor]:oe(ye(1,1),Xe(ge)),[j.Ceil]:oe(ye(1,1),Xe(ge)),[j.Round]:oe(ye(1,1),Xe(ge)),[j.Sin]:oe(ye(1,1),Xe(ge)),[j.Cos]:oe(ye(1,1),Xe(ge)),[j.Atan]:oe(ye(1,2),Xe(ge)),[j.Sqrt]:oe(ye(1,1),Xe(ge)),[j.Match]:oe(ye(4,1/0),wN,ort),[j.Between]:oe(ye(3,3),Xe(ge)),[j.Interpolate]:oe(ye(6,1/0),wN,srt),[j.Case]:oe(ye(3,1/0),art,lrt),[j.In]:oe(ye(2,2),urt),[j.Number]:oe(ye(1,1/0),Xe(T0)),[j.String]:oe(ye(1,1/0),Xe(T0)),[j.Array]:oe(ye(1,1/0),Xe(ge)),[j.Color]:oe(ye(1,4),Xe(ge)),[j.Band]:oe(ye(1,3),Xe(ge)),[j.Palette]:oe(ye(2,2),hrt),[j.ToString]:oe(ye(1,1),Xe($n|ge|Yn|Ji))};function xN(r,t,e){const n=r.length-1,i=new Array(n);for(let a=0;a<n;++a){const o=r[a+1];switch(typeof o){case"number":{i[a]=new tn(ge,o);break}case"string":{i[a]=new tn(Yn,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}a===0&&e.properties.add(String(o))}return i}function rrt(r,t,e){const n=r[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return e.variables.add(n),[new tn(Yn,n)]}function nrt(r,t,e){e.featureId=!0}function irt(r,t,e){e.geometryType=!0}function df(r,t,e){const n=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function ye(r,t){return function(e,n,i){const a=e[0],o=e.length-1;if(r===t){if(o!==r){const s=r===1?"":"s";throw new Error(`expected ${r} argument${s} for ${a}, got ${o}`)}}else if(o<r||o>t){const s=t===1/0?`${r} or more`:`${r} to ${t}`;throw new Error(`expected ${s} arguments for ${a}, got ${o}`)}}}function SN(r,t,e){const n=r.length-1,i=new Array(n);for(let a=0;a<n;++a){const o=xn(r[a+1],t,e);i[a]=o}return i}function Xe(r){return function(t,e,n){const i=t.length-1,a=new Array(i);for(let o=0;o<i;++o){const s=xn(t[o+1],r,n);a[o]=s}return a}}function art(r,t,e){const n=r[0],i=r.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${i} instead`)}function wN(r,t,e){const n=r[0],i=r.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${i} instead`)}function ort(r,t,e){const n=r.length-1,i=Yn|ge|$n,a=xn(r[1],i,e),o=xn(r[r.length-1],t,e),s=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const u=xn(r[l+2],a.type,e);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=xn(r[l+3],o.type,e);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[a,...s,o]}function srt(r,t,e){const n=r[1];let i;switch(n[0]){case"linear":i=1;break;case"exponential":const l=n[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const a=new tn(ge,i);let o;try{o=xn(r[2],ge,e)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const s=new Array(r.length-3);for(let l=0;l<s.length;l+=2){try{const u=xn(r[l+3],ge,e);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=xn(r[l+4],t,e);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[a,o,...s]}function lrt(r,t,e){const n=xn(r[r.length-1],t,e),i=new Array(r.length-1);for(let a=0;a<i.length-1;a+=2){try{const o=xn(r[a+1],$n,e);i[a]=o}catch(o){throw new Error(`failed to parse argument ${a} of case expression: ${o.message}`)}try{const o=xn(r[a+2],n.type,e);i[a+1]=o}catch(o){throw new Error(`failed to parse argument ${a+1} of case expression: ${o.message}`)}}return i[i.length-1]=n,i}function urt(r,t,e){let n=r[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],i=Yn}else i=ge;const a=new Array(n.length);for(let s=0;s<a.length;s++)try{const l=xn(n[s],i,e);a[s]=l}catch(l){throw new Error(`failed to parse haystack item ${s} for "in" expression: ${l.message}`)}return[xn(r[1],i,e),...a]}function hrt(r,t,e){let n;try{n=xn(r[1],ge,e)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const i=r[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const a=new Array(i.length);for(let o=0;o<a.length;o++){let s;try{s=xn(i[o],Ji,e)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(s instanceof tn))throw new Error(`the palette color at index ${o} must be a literal value`);a[o]=s}return[n,...a]}function oe(...r){return function(t,e,n){const i=t[0];let a;for(let o=0;o<r.length;o++){const s=r[o](t,e,n);if(o==r.length-1){if(!s)throw new Error("expected last argument validator to return the parsed args");a=s}}return new LU(e,i,...a)}}function crt(r,t,e){const n=r[0],i=ert[n];if(!i)throw new Error(`unknown operator: ${n}`);return i(r,t,e)}function g2(r){if(!r)return"";const t=r.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return g2(r.getGeometries()[0]);default:return""}}function DU(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function vl(r,t,e){const n=xn(r,t,e);return yo(n)}function yo(r,t){if(r instanceof tn){if(r.type===Ji&&typeof r.value=="string"){const n=n2(r.value);return function(){return n}}return function(){return r.value}}const e=r.operator;switch(e){case j.Number:case j.String:case j.Coalesce:return frt(r);case j.Get:case j.Var:case j.Has:return drt(r);case j.Id:return n=>n.featureId;case j.GeometryType:return n=>n.geometryType;case j.Concat:{const n=r.args.map(i=>yo(i));return i=>"".concat(...n.map(a=>a(i).toString()))}case j.Resolution:return n=>n.resolution;case j.Any:case j.All:case j.Between:case j.In:case j.Not:return prt(r);case j.Equal:case j.NotEqual:case j.LessThan:case j.LessThanOrEqualTo:case j.GreaterThan:case j.GreaterThanOrEqualTo:return grt(r);case j.Multiply:case j.Divide:case j.Add:case j.Subtract:case j.Clamp:case j.Mod:case j.Pow:case j.Abs:case j.Floor:case j.Ceil:case j.Round:case j.Sin:case j.Cos:case j.Atan:case j.Sqrt:return vrt(r);case j.Case:return mrt(r);case j.Match:return yrt(r);case j.Interpolate:return _rt(r);case j.ToString:return xrt(r);default:throw new Error(`Unsupported operator ${e}`)}}function frt(r,t){const e=r.operator,n=r.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=yo(r.args[a]);switch(e){case j.Coalesce:return a=>{for(let o=0;o<n;++o){const s=i[o](a);if(typeof s<"u"&&s!==null)return s}throw new Error("Expected one of the values to be non-null")};case j.Number:case j.String:return a=>{for(let o=0;o<n;++o){const s=i[o](a);if(typeof s===e)return s}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function drt(r,t){const n=r.args[0].value;switch(r.operator){case j.Get:return i=>{const a=r.args;let o=i.properties[n];for(let s=1,l=a.length;s<l;++s){const h=a[s].value;o=o[h]}return o};case j.Var:return i=>i.variables[n];case j.Has:return i=>{const a=r.args;if(!(n in i.properties))return!1;let o=i.properties[n];for(let s=1,l=a.length;s<l;++s){const h=a[s].value;if(!o||!Object.hasOwn(o,h))return!1;o=o[h]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function grt(r,t){const e=r.operator,n=yo(r.args[0]),i=yo(r.args[1]);switch(e){case j.Equal:return a=>n(a)===i(a);case j.NotEqual:return a=>n(a)!==i(a);case j.LessThan:return a=>n(a)<i(a);case j.LessThanOrEqualTo:return a=>n(a)<=i(a);case j.GreaterThan:return a=>n(a)>i(a);case j.GreaterThanOrEqualTo:return a=>n(a)>=i(a);default:throw new Error(`Unsupported comparison operator ${e}`)}}function prt(r,t){const e=r.operator,n=r.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=yo(r.args[a]);switch(e){case j.Any:return a=>{for(let o=0;o<n;++o)if(i[o](a))return!0;return!1};case j.All:return a=>{for(let o=0;o<n;++o)if(!i[o](a))return!1;return!0};case j.Between:return a=>{const o=i[0](a),s=i[1](a),l=i[2](a);return o>=s&&o<=l};case j.In:return a=>{const o=i[0](a);for(let s=1;s<n;++s)if(o===i[s](a))return!0;return!1};case j.Not:return a=>!i[0](a);default:throw new Error(`Unsupported logical operator ${e}`)}}function vrt(r,t){const e=r.operator,n=r.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=yo(r.args[a]);switch(e){case j.Multiply:return a=>{let o=1;for(let s=0;s<n;++s)o*=i[s](a);return o};case j.Divide:return a=>i[0](a)/i[1](a);case j.Add:return a=>{let o=0;for(let s=0;s<n;++s)o+=i[s](a);return o};case j.Subtract:return a=>i[0](a)-i[1](a);case j.Clamp:return a=>{const o=i[0](a),s=i[1](a);if(o<s)return s;const l=i[2](a);return o>l?l:o};case j.Mod:return a=>i[0](a)%i[1](a);case j.Pow:return a=>Math.pow(i[0](a),i[1](a));case j.Abs:return a=>Math.abs(i[0](a));case j.Floor:return a=>Math.floor(i[0](a));case j.Ceil:return a=>Math.ceil(i[0](a));case j.Round:return a=>Math.round(i[0](a));case j.Sin:return a=>Math.sin(i[0](a));case j.Cos:return a=>Math.cos(i[0](a));case j.Atan:return n===2?a=>Math.atan2(i[0](a),i[1](a)):a=>Math.atan(i[0](a));case j.Sqrt:return a=>Math.sqrt(i[0](a));default:throw new Error(`Unsupported numeric operator ${e}`)}}function mrt(r,t){const e=r.args.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=yo(r.args[i]);return i=>{for(let a=0;a<e-1;a+=2)if(n[a](i))return n[a+1](i);return n[e-1](i)}}function yrt(r,t){const e=r.args.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=yo(r.args[i]);return i=>{const a=n[0](i);for(let o=1;o<e;o+=2)if(a===n[o](i))return n[o+1](i);return n[e-1](i)}}function _rt(r,t){const e=r.args.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=yo(r.args[i]);return i=>{const a=n[0](i),o=n[1](i);let s,l;for(let u=2;u<e;u+=2){const h=n[u](i);let c=n[u+1](i);const f=Array.isArray(c);if(f&&(c=set(c)),h>=o)return u===2?c:f?Srt(a,o,s,l,h,c):sv(a,o,s,l,h,c);s=h,l=c}return l}}function xrt(r,t){const e=r.operator,n=r.args.length,i=new Array(n);for(let a=0;a<n;++a)i[a]=yo(r.args[a]);switch(e){case j.ToString:return a=>{const o=i[0](a);return r.args[0].type===Ji?i2(o):o.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function sv(r,t,e,n,i,a){const o=i-e;if(o===0)return n;const s=t-e,l=r===1?s/o:(Math.pow(r,s)-1)/(Math.pow(r,o)-1);return n+l*(a-n)}function Srt(r,t,e,n,i,a){if(i-e===0)return n;const s=hN(n),l=hN(a);let u=l[2]-s[2];u>180?u-=360:u<-180&&(u+=360);const h=[sv(r,t,e,s[0],i,l[0]),sv(r,t,e,s[1],i,l[1]),s[2]+sv(r,t,e,0,i,u),sv(r,t,e,n[3],i,a[3])];return dU(uet(h))}function wrt(r){return!0}function Trt(r){const t=d2(),e=brt(r,t),n=DU();return function(i,a){if(n.properties=i.getPropertiesInternal(),n.resolution=a,t.featureId){const o=i.getId();o!==void 0?n.featureId=o:n.featureId=null}return t.geometryType&&(n.geometryType=g2(i.getGeometry())),e(n)}}function TN(r){const t=d2(),e=r.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=kM(r[o],t);const i=DU(),a=new Array(e);return function(o,s){if(i.properties=o.getPropertiesInternal(),i.resolution=s,t.featureId){const u=o.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<e;++u){const h=n[u](i);h&&(a[l]=h,l+=1)}return a.length=l,a}}function brt(r,t){const e=r.length,n=new Array(e);for(let i=0;i<e;++i){const a=r[i],o="filter"in a?vl(a.filter,$n,t):wrt;let s;if(Array.isArray(a.style)){const l=a.style.length;s=new Array(l);for(let u=0;u<l;++u)s[u]=kM(a.style[u],t)}else s=[kM(a.style,t)];n[i]={filter:o,styles:s}}return function(i){const a=[];let o=!1;for(let s=0;s<e;++s){const l=n[s].filter;if(l(i)&&!(r[s].else&&o)){o=!0;for(const u of n[s].styles){const h=u(i);h&&a.push(h)}}}return a}}function kM(r,t){const e=Lm(r,"",t),n=Dm(r,"",t),i=Ert(r,t),a=Crt(r,t),o=Fi(r,"z-index",t);if(!e&&!n&&!i&&!a&&!Eu(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const s=new Te;return function(l){let u=!0;if(e){const h=e(l);h&&(u=!1),s.setFill(h)}if(n){const h=n(l);h&&(u=!1),s.setStroke(h)}if(i){const h=i(l);h&&(u=!1),s.setText(h)}if(a){const h=a(l);h&&(u=!1),s.setImage(h)}return o&&s.setZIndex(o(l)),u?null:s}}function Lm(r,t,e){let n;if(t+"fill-pattern-src"in r)n=Rrt(r,t+"fill-",e);else{if(r[t+"fill-color"]==="none")return a=>null;n=p2(r,t+"fill-color",e)}if(!n)return null;const i=new Ee;return function(a){const o=n(a);return o===r2?null:(i.setColor(o),i)}}function Dm(r,t,e){const n=Fi(r,t+"stroke-width",e),i=p2(r,t+"stroke-color",e);if(!n&&!i)return null;const a=ks(r,t+"stroke-line-cap",e),o=ks(r,t+"stroke-line-join",e),s=OU(r,t+"stroke-line-dash",e),l=Fi(r,t+"stroke-line-dash-offset",e),u=Fi(r,t+"stroke-miter-limit",e),h=new or;return function(c){if(i){const f=i(c);if(f===r2)return null;h.setColor(f)}if(n&&h.setWidth(n(c)),a){const f=a(c);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(f)}if(o){const f=o(c);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(f)}return s&&h.setLineDash(s(c)),l&&h.setLineDashOffset(l(c)),u&&h.setMiterLimit(u(c)),h}}function Ert(r,t){const e="text-",n=ks(r,e+"value",t);if(!n)return null;const i=Lm(r,e,t),a=Lm(r,e+"background-",t),o=Dm(r,e,t),s=Dm(r,e+"background-",t),l=ks(r,e+"font",t),u=Fi(r,e+"max-angle",t),h=Fi(r,e+"offset-x",t),c=Fi(r,e+"offset-y",t),f=Om(r,e+"overflow",t),d=ks(r,e+"placement",t),g=Fi(r,e+"repeat",t),p=iw(r,e+"scale",t),v=Om(r,e+"rotate-with-view",t),m=Fi(r,e+"rotation",t),y=ks(r,e+"align",t),_=ks(r,e+"justify",t),x=ks(r,e+"baseline",t),w=OU(r,e+"padding",t),S=aw(r,e+"declutter-mode"),T=new Kn({declutterMode:S});return function(b){if(T.setText(n(b)),i&&T.setFill(i(b)),a&&T.setBackgroundFill(a(b)),o&&T.setStroke(o(b)),s&&T.setBackgroundStroke(s(b)),l&&T.setFont(l(b)),u&&T.setMaxAngle(u(b)),h&&T.setOffsetX(h(b)),c&&T.setOffsetY(c(b)),f&&T.setOverflow(f(b)),d){const E=d(b);if(E!=="point"&&E!=="line")throw new Error("Expected point or line for text-placement");T.setPlacement(E)}if(g&&T.setRepeat(g(b)),p&&T.setScale(p(b)),v&&T.setRotateWithView(v(b)),m&&T.setRotation(m(b)),y){const E=y(b);if(E!=="left"&&E!=="center"&&E!=="right"&&E!=="end"&&E!=="start")throw new Error("Expected left, right, center, start, or end for text-align");T.setTextAlign(E)}if(_){const E=_(b);if(E!=="left"&&E!=="right"&&E!=="center")throw new Error("Expected left, right, or center for text-justify");T.setJustify(E)}if(x){const E=x(b);if(E!=="bottom"&&E!=="top"&&E!=="middle"&&E!=="alphabetic"&&E!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");T.setTextBaseline(E)}return w&&T.setPadding(w(b)),T}}function Crt(r,t){return"icon-src"in r?Mrt(r,t):"shape-points"in r?Art(r,t):"circle-radius"in r?Irt(r,t):null}function Mrt(r,t){const e="icon-",n=e+"src",i=NU(r[n],n),a=lx(r,e+"anchor",t),o=iw(r,e+"scale",t),s=Fi(r,e+"opacity",t),l=lx(r,e+"displacement",t),u=Fi(r,e+"rotation",t),h=Om(r,e+"rotate-with-view",t),c=EN(r,e+"anchor-origin"),f=CN(r,e+"anchor-x-units"),d=CN(r,e+"anchor-y-units"),g=Ort(r,e+"color"),p=Lrt(r,e+"cross-origin"),v=Drt(r,e+"offset"),m=EN(r,e+"offset-origin"),y=ux(r,e+"width"),_=ux(r,e+"height"),x=Prt(r,e+"size"),w=aw(r,e+"declutter-mode"),S=new ia({src:i,anchorOrigin:c,anchorXUnits:f,anchorYUnits:d,color:g,crossOrigin:p,offset:v,offsetOrigin:m,height:_,width:y,size:x,declutterMode:w});return function(T){return s&&S.setOpacity(s(T)),l&&S.setDisplacement(l(T)),u&&S.setRotation(u(T)),h&&S.setRotateWithView(h(T)),o&&S.setScale(o(T)),a&&S.setAnchor(a(T)),S}}function Art(r,t){const e="shape-",n=e+"points",i=e+"radius",a=GM(r[n],n),o=GM(r[i],i),s=Lm(r,e,t),l=Dm(r,e,t),u=iw(r,e+"scale",t),h=lx(r,e+"displacement",t),c=Fi(r,e+"rotation",t),f=Om(r,e+"rotate-with-view",t),d=ux(r,e+"radius2"),g=ux(r,e+"angle"),p=aw(r,e+"declutter-mode"),v=new Oc({points:a,radius:o,radius2:d,angle:g,declutterMode:p});return function(m){return s&&v.setFill(s(m)),l&&v.setStroke(l(m)),h&&v.setDisplacement(h(m)),c&&v.setRotation(c(m)),f&&v.setRotateWithView(f(m)),u&&v.setScale(u(m)),v}}function Irt(r,t){const e="circle-",n=Lm(r,e,t),i=Dm(r,e,t),a=Fi(r,e+"radius",t),o=iw(r,e+"scale",t),s=lx(r,e+"displacement",t),l=Fi(r,e+"rotation",t),u=Om(r,e+"rotate-with-view",t),h=aw(r,e+"declutter-mode"),c=new ha({radius:5,declutterMode:h});return function(f){return a&&c.setRadius(a(f)),n&&c.setFill(n(f)),i&&c.setStroke(i(f)),s&&c.setDisplacement(s(f)),l&&c.setRotation(l(f)),u&&c.setRotateWithView(u(f)),o&&c.setScale(o(f)),c}}function Fi(r,t,e){if(!(t in r))return;const n=vl(r[t],ge,e);return function(i){return GM(n(i),t)}}function ks(r,t,e){if(!(t in r))return null;const n=vl(r[t],Yn,e);return function(i){return NU(n(i),t)}}function Rrt(r,t,e){const n=ks(r,t+"pattern-src",e),i=bN(r,t+"pattern-offset",e),a=bN(r,t+"pattern-size",e),o=p2(r,t+"color",e);return function(s){return{src:n(s),offset:i&&i(s),size:a&&a(s),color:o&&o(s)}}}function Om(r,t,e){if(!(t in r))return null;const n=vl(r[t],$n,e);return function(i){const a=n(i);if(typeof a!="boolean")throw new Error(`Expected a boolean for ${t}`);return a}}function p2(r,t,e){if(!(t in r))return null;const n=vl(r[t],Ji,e);return function(i){return FU(n(i),t)}}function OU(r,t,e){if(!(t in r))return null;const n=vl(r[t],Pu,e);return function(i){return Ay(n(i),t)}}function lx(r,t,e){if(!(t in r))return null;const n=vl(r[t],Pu,e);return function(i){const a=Ay(n(i),t);if(a.length!==2)throw new Error(`Expected two numbers for ${t}`);return a}}function bN(r,t,e){if(!(t in r))return null;const n=vl(r[t],Pu,e);return function(i){return kU(n(i),t)}}function iw(r,t,e){if(!(t in r))return null;const n=vl(r[t],Pu|ge,e);return function(i){return Nrt(n(i),t)}}function ux(r,t){const e=r[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function Prt(r,t){const e=r[t];if(e!==void 0){if(typeof e=="number")return Gr(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function Lrt(r,t){const e=r[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function EN(r,t){const e=r[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function CN(r,t){const e=r[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function Drt(r,t){const e=r[t];if(e!==void 0)return Ay(e,t)}function aw(r,t){const e=r[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function Ort(r,t){const e=r[t];if(e!==void 0)return FU(e,t)}function Ay(r,t){if(!Array.isArray(r))throw new Error(`Expected an array for ${t}`);const e=r.length;for(let n=0;n<e;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${t}`);return r}function NU(r,t){if(typeof r!="string")throw new Error(`Expected a string for ${t}`);return r}function GM(r,t){if(typeof r!="number")throw new Error(`Expected a number for ${t}`);return r}function FU(r,t){if(typeof r=="string")return r;const e=Ay(r,t),n=e.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function kU(r,t){const e=Ay(r,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function Nrt(r,t){return typeof r=="number"?r:kU(r,t)}const MN={RENDER_ORDER:"renderOrder"};class ow extends My{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(MN.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const n=this.getDeclutter();n in t.declutter||(t.declutter[n]=new PU(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(MN.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?CU:t;const e=Frt(t);this.styleFunction_=t===null?void 0:Det(e),this.changed()}}function Frt(r){if(r===void 0)return CU;if(!r)return null;if(typeof r=="function"||r instanceof Te)return r;if(!Array.isArray(r))return TN([r]);if(r.length===0)return[];const t=r.length,e=r[0];if(e instanceof Te){const i=new Array(t);for(let a=0;a<t;++a){const o=r[a];if(!(o instanceof Te))throw new Error("Expected a list of style instances");i[a]=o}return i}if("style"in e){const i=new Array(t);for(let a=0;a<t;++a){const o=r[a];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[a]=o}return Trt(i)}return TN(r)}const Yt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},b0=[Yt.FILL],ru=[Yt.STROKE],sc=[Yt.BEGIN_PATH],AN=[Yt.CLOSE_PATH];class GU{drawCustom(t,e,n,i,a){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,n){}drawFeature(t,e,n){}drawGeometryCollection(t,e,n){}drawLineString(t,e,n){}drawMultiLineString(t,e,n){}drawMultiPoint(t,e,n){}drawMultiPolygon(t,e,n){}drawPoint(t,e,n){}drawPolygon(t,e,n){}drawText(t,e,n){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}class Iy extends GU{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(n){return n*e})}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,a=this.coordinates;let o=a.length;for(let s=0,l=t.length;s<l;s+=e)i[0]=t[s],i[1]=t[s+1],mo(n,i)&&(a[o++]=i[0],a[o++]=i[1]);return o}appendFlatLineCoordinates(t,e,n,i,a,o){const s=this.coordinates;let l=s.length;const u=this.getBufferedMaxExtent();o&&(e+=i);let h=t[e],c=t[e+1];const f=this.tmpCoordinate_;let d=!0,g,p,v;for(g=e+i;g<n;g+=i)f[0]=t[g],f[1]=t[g+1],v=CM(u,f),v!==p?(d&&(s[l++]=h,s[l++]=c,d=!1),s[l++]=f[0],s[l++]=f[1]):v===pn.INTERSECTING?(s[l++]=f[0],s[l++]=f[1],d=!1):d=!0,h=f[0],c=f[1],p=v;return(a&&d||g===e+i)&&(s[l++]=h,s[l++]=c),l}drawCustomCoordinates_(t,e,n,i,a){for(let o=0,s=n.length;o<s;++o){const l=n[o],u=this.appendFlatLineCoordinates(t,e,l,i,!1,!1);a.push(u),e=l}return e}drawCustom(t,e,n,i,a){this.beginGeometry(t,e,a);const o=t.getType(),s=t.getStride(),l=this.coordinates.length;let u,h,c,f,d;switch(o){case"MultiPolygon":u=t.getOrientedFlatCoordinates(),f=[];const g=t.getEndss();d=0;for(let p=0,v=g.length;p<v;++p){const m=[];d=this.drawCustomCoordinates_(u,d,g[p],s,m),f.push(m)}this.instructions.push([Yt.CUSTOM,l,f,t,n,RM,a]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,f,t,i||n,RM,a]);break;case"Polygon":case"MultiLineString":c=[],u=o=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(u,0,t.getEnds(),s,c),this.instructions.push([Yt.CUSTOM,l,c,t,n,Cm,a]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,c,t,i||n,Cm,a]);break;case"LineString":case"Circle":u=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(u,0,u.length,s,!1,!1),this.instructions.push([Yt.CUSTOM,l,h,t,n,Vs,a]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,h,t,i||n,Vs,a]);break;case"MultiPoint":u=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(u,s),h>l&&(this.instructions.push([Yt.CUSTOM,l,h,t,n,Vs,a]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,h,t,i||n,Vs,a]));break;case"Point":u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([Yt.CUSTOM,l,h,t,n,void 0,a]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,h,t,i||n,void 0,a]);break}this.endGeometry(e)}beginGeometry(t,e,n){this.beginGeometryInstruction1_=[Yt.BEGIN_GEOMETRY,e,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Yt.BEGIN_GEOMETRY,e,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const n=t.length;let i,a,o=-1;for(e=0;e<n;++e)i=t[e],a=i[0],a==Yt.END_GEOMETRY?o=e:a==Yt.BEGIN_GEOMETRY&&(i[2]=e,htt(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const i=t.getColor();n.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,n.fillStyle=qo(i||Li)}else n.fillStyle=void 0;if(e){const i=e.getColor();n.strokeStyle=qo(i||Im);const a=e.getLineCap();n.lineCap=a!==void 0?a:eg;const o=e.getLineDash();n.lineDash=o?o.slice():Zs;const s=e.getLineDashOffset();n.lineDashOffset=s||js;const l=e.getLineJoin();n.lineJoin=l!==void 0?l:rg;const u=e.getWidth();n.lineWidth=u!==void 0?u:Pm;const h=e.getMiterLimit();n.miterLimit=h!==void 0?h:Am,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[Yt.SET_FILL_STYLE,e];return typeof e!="string"&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[Yt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,a=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,l=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||a!=t.currentLineDash&&!vs(t.currentLineDash,a)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=l||t.currentMiterLimit!=u)&&(n!==void 0&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=a,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=l,t.currentMiterLimit=u)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[Yt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=k8(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;il(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class krt extends Iy{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,n){if(!this.image_||this.maxExtent&&!mo(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(i,a);this.instructions.push([Yt.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Yt.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,n){if(!this.image_)return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),a=[];for(let l=0,u=i.length;l<u;l+=t.getStride())(!this.maxExtent||mo(this.maxExtent,i.slice(l,l+2)))&&a.push(i[l],i[l+1]);const o=this.coordinates.length,s=this.appendFlatPointCoordinates(a,2);this.instructions.push([Yt.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Yt.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class Grt extends Iy{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const a=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),s=[Yt.MOVE_TO_LINE_TO,a,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}drawLineString(t,e,n){const i=this.state,a=i.strokeStyle,o=i.lineWidth;if(a===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zs,js],sc);const s=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(s,0,s.length,l),this.hitDetectionInstructions.push(ru),this.endGeometry(e)}drawMultiLineString(t,e,n){const i=this.state,a=i.strokeStyle,o=i.lineWidth;if(a===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zs,js],sc);const s=t.getEnds(),l=t.getFlatCoordinates(),u=t.getStride();let h=0;for(let c=0,f=s.length;c<f;++c)h=this.drawFlatCoordinates_(l,h,s[c],u);this.hitDetectionInstructions.push(ru),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ru),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(ru),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(sc)}}class IN extends Iy{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const a=this.state,o=a.fillStyle!==void 0,s=a.strokeStyle!==void 0,l=n.length;this.instructions.push(sc),this.hitDetectionInstructions.push(sc);for(let u=0;u<l;++u){const h=n[u],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,h,i,!0,!s),d=[Yt.MOVE_TO_LINE_TO,c,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),s&&(this.instructions.push(AN),this.hitDetectionInstructions.push(AN)),e=h}return o&&(this.instructions.push(b0),this.hitDetectionInstructions.push(b0)),s&&(this.instructions.push(ru),this.hitDetectionInstructions.push(ru)),e}drawCircle(t,e,n){const i=this.state,a=i.fillStyle,o=i.strokeStyle;if(a===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_FILL_STYLE,Li]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zs,js]);const s=t.getFlatCoordinates(),l=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,l,!1,!1);const h=[Yt.CIRCLE,u];this.instructions.push(sc,h),this.hitDetectionInstructions.push(sc,h),i.fillStyle!==void 0&&(this.instructions.push(b0),this.hitDetectionInstructions.push(b0)),i.strokeStyle!==void 0&&(this.instructions.push(ru),this.hitDetectionInstructions.push(ru)),this.endGeometry(e)}drawPolygon(t,e,n){const i=this.state,a=i.fillStyle,o=i.strokeStyle;if(a===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_FILL_STYLE,Li]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zs,js]);const s=t.getEnds(),l=t.getOrientedFlatCoordinates(),u=t.getStride();this.drawFlatCoordinatess_(l,0,s,u),this.endGeometry(e)}drawMultiPolygon(t,e,n){const i=this.state,a=i.fillStyle,o=i.strokeStyle;if(a===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_FILL_STYLE,Li]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zs,js]);const s=t.getEndss(),l=t.getOrientedFlatCoordinates(),u=t.getStride();let h=0;for(let c=0,f=s.length;c<f;++c)h=this.drawFlatCoordinatess_(l,h,s[c],u);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=Wh(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function Brt(r,t,e,n,i){const a=[];let o=e,s=0,l=t.slice(e,2);for(;s<r&&o+i<n;){const[u,h]=l.slice(-2),c=t[o+i],f=t[o+i+1],d=Math.sqrt((c-u)*(c-u)+(f-h)*(f-h));if(s+=d,s>=r){const g=(r-s+d)/d,p=qi(u,c,g),v=qi(h,f,g);l.push(p,v),a.push(l),l=[p,v],s==r&&(o+=i),s=0}else if(s<r)l.push(t[o+i],t[o+i+1]),o+=i;else{const g=d-s,p=qi(u,c,g/d),v=qi(h,f,g/d);l.push(p,v),a.push(l),l=[p,v],s=0,o+=i}}return s>0&&a.push(l),a}function zrt(r,t,e,n,i){let a=e,o=e,s=0,l=0,u=e,h,c,f,d,g,p,v,m,y,_;for(c=e;c<n;c+=i){const x=t[c],w=t[c+1];g!==void 0&&(y=x-g,_=w-p,d=Math.sqrt(y*y+_*_),v!==void 0&&(l+=f,h=Math.acos((v*y+m*_)/(f*d)),h>r&&(l>s&&(s=l,a=u,o=c),l=0,u=c-i)),f=d,v=y,m=_),g=x,p=w}return l+=d,l>s?[u,c]:[a,o]}const hx={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Vrt extends Iy{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Li]={fillStyle:Li},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,n){const i=this.textFillState_,a=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!a)return;const s=this.coordinates;let l=s.length;const u=t.getType();let h=null,c=t.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!jn(this.maxExtent,t.getExtent()))return;let f;if(h=t.getFlatCoordinates(),u=="LineString")f=[h.length];else if(u=="MultiLineString")f=t.getEnds();else if(u=="Polygon")f=t.getEnds().slice(0,1);else if(u=="MultiPolygon"){const v=t.getEndss();f=[];for(let m=0,y=v.length;m<y;++m)f.push(v[m][0])}this.beginGeometry(t,e,n);const d=o.repeat,g=d?void 0:o.textAlign;let p=0;for(let v=0,m=f.length;v<m;++v){let y;d?y=Brt(d*this.resolution,h,p,f[v],c):y=[h.slice(p,f[v])];for(let _=0,x=y.length;_<x;++_){const w=y[_];let S=0,T=w.length;if(g==null){const E=zrt(o.maxAngle,w,0,w.length,2);S=E[0],T=E[1]}for(let E=S;E<T;E+=c)s.push(w[E],w[E+1]);const b=s.length;p=f[v],this.drawChars_(l,b),l=b}}this.endGeometry(e)}else{let f=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),o.overflow||f.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":const y=t.getFlatInteriorPoints();h=[];for(let _=0,x=y.length;_<x;_+=3)o.overflow||f.push(y[_+2]/this.resolution),h.push(y[_],y[_+1]);if(h.length===0)return;c=2;break}const d=this.appendFlatPointCoordinates(h,c);if(d===l)return;if(f&&(d-l)/2!==h.length/c){let y=l/2;f=f.filter((_,x)=>{const w=s[(y+x)*2]===h[x*c]&&s[(y+x)*2+1]===h[x*c+1];return w||--y,w})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,n);let g=o.padding;if(g!=oc&&(o.scale[0]<0||o.scale[1]<0)){let y=o.padding[0],_=o.padding[1],x=o.padding[2],w=o.padding[3];o.scale[0]<0&&(_=-_,w=-w),o.scale[1]<0&&(y=-y,x=-x),g=[y,_,x,w]}const p=this.pixelRatio;this.instructions.push([Yt.DRAW_IMAGE,l,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==oc?oc:g.map(function(y){return y*p}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const v=1/p,m=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Li,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Yt.DRAW_IMAGE,l,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterMode_,this.declutterImageWithText_,g,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Li:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),o.backgroundFill&&(this.state.fillStyle=m,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:e.font,textAlign:e.textAlign||Rm,justify:e.justify,textBaseline:e.textBaseline||ox,scale:e.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,a=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=hx[i.textBaseline],h=this.textOffsetY_*l,c=this.text_,f=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Yt.DRAW_CHARS,t,e,u,i.overflow,s,i.maxAngle,l,h,a,f*l,c,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([Yt.DRAW_CHARS,t,e,u,i.overflow,s&&Li,i.maxAngle,l,h,a,f*l,c,o,1/l,this.declutterMode_])}setTextStyle(t,e){let n,i,a;if(!t)this.text_="";else{const o=t.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=qo(o.getColor()||Li)):(i=null,this.textFillState_=i);const s=t.getStroke();if(!s)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const g=s.getLineDash(),p=s.getLineDashOffset(),v=s.getWidth(),m=s.getMiterLimit();a.lineCap=s.getLineCap()||eg,a.lineDash=g?g.slice():Zs,a.lineDashOffset=p===void 0?js:p,a.lineJoin=s.getLineJoin()||rg,a.lineWidth=v===void 0?Pm:v,a.miterLimit=m===void 0?Am:m,a.strokeStyle=qo(s.getColor()||Im)}n=this.textState_;const l=t.getFont()||bU;Aet(l);const u=t.getScaleArray();n.overflow=t.getOverflow(),n.font=l,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||ox,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||oc,n.scale=u===void 0?[1,1]:u;const h=t.getOffsetX(),c=t.getOffsetY(),f=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:zt(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+zt(i.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const Urt={Circle:IN,Default:Iy,Image:krt,LineString:Grt,Polygon:IN,Text:Vrt};class Wrt{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const a=n[i].finish();t[e][i]=a}}return t}getBuilder(t,e){const n=t!==void 0?t.toString():"0";let i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);let a=i[e];if(a===void 0){const o=Urt[e];a=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=a}return a}}const Hrt=5;class BU extends xy{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=Hrt}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return Ut()}getData(t){return null}prepareFrame(t){return Ut()}renderFrame(t,e){return Ut()}forEachFeatureAtCoordinate(t,e,n,i,a){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===Ot.LOADED||e.getState()===Ot.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Ot.LOADED&&e!=Ot.ERROR&&t.addEventListener(Bt.CHANGE,this.boundHandleImageChange_),e==Ot.IDLE&&(t.load(),e=t.getState()),e==Ot.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Dv extends ca{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}class zU{constructor(){ee(this,"pushMethodArgs_",(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(rx(),{get:(t,e)=>{if(typeof rx()[e]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let n=0,i=e.length;n<i;++n){const a=e[n];if(typeof a=="function"){a(t);continue}const o=e[++n];if(typeof t[a]=="function")t[a](...o);else{if(typeof o=="function"){t[a]=o(t);continue}t[a]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const RN=[];let Jf=null;function $rt(){Jf=Dr(1,1,void 0,{willReadFrequently:!0})}class v2 extends BU{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=on(),this.pixelTransform=on(),this.inversePixelTransform=on(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,n){Jf||$rt(),Jf.clearRect(0,0,1,1);let i;try{Jf.drawImage(t,e,n,1,1,0,0,1,1),i=Jf.getImageData(0,0,1,1).data}catch{return Jf=null,null}return i}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let a,o;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&vs(Iu(t.style.backgroundColor),Iu(n)))){const s=t.firstElementChild;s instanceof HTMLCanvasElement&&(o=s.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=document.createElement("div"),a.className=i;let s=a.style;s.position="absolute",s.width="100%",s.height="100%",o=Dr();const l=o.canvas;a.appendChild(l),s=l.style,s.position="absolute",s.left="0",s.transformOrigin="top left",this.container=a,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=za(n),a=vu(n),o=Ag(n),s=qd(n);Nr(e.coordinateToPixelTransform,i),Nr(e.coordinateToPixelTransform,a),Nr(e.coordinateToPixelTransform,o),Nr(e.coordinateToPixelTransform,s);const l=this.inversePixelTransform;Nr(l,i),Nr(l,a),Nr(l,o),Nr(l,s),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()}prepareContainer(t,e){const n=t.extent,i=t.viewState.resolution,a=t.viewState.rotation,o=t.pixelRatio,s=Math.round(Me(n)/i*o),l=Math.round(kr(n)/i*o);Wa(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/o,1/o,a,-s/2,-l/2),LR(this.inversePixelTransform,this.pixelTransform);const u=_tt(this.pixelTransform);if(this.useContainer(e,u,this.getBackground(t)),!this.containerReused){const h=this.context.canvas;h.width!=s||h.height!=l?(h.width=s,h.height=l):this.context.clearRect(0,0,s,l),u!==h.style.transform&&(h.style.transform=u)}}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const a=new Dv(t,this.inversePixelTransform,n,e);i.dispatchEvent(a)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(yn.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(yn.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new zU),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(yn.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(yn.POSTRENDER,this.context,t))}getRenderTransform(t,e,n,i,a,o,s){const l=a/2,u=o/2,h=i/e,c=-h,f=-t[0]+s,d=-t[1];return Wa(this.tempTransform,l,u,h,c,-n,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Yrt(r,t,e,n,i,a,o,s,l,u,h,c){let f=r[t],d=r[t+1],g=0,p=0,v=0,m=0;function y(){g=f,p=d,t+=n,f=r[t],d=r[t+1],m+=v,v=Math.sqrt((f-g)*(f-g)+(d-p)*(d-p))}do y();while(t<e-n&&m+v<a);let _=v===0?0:(a-m)/v;const x=qi(g,f,_),w=qi(p,d,_),S=t-n,T=m,b=a+s*l(u,i,h);for(;t<e-n&&m+v<b;)y();_=v===0?0:(b-m)/v;const E=qi(g,f,_),C=qi(p,d,_);let M;if(c){const D=[x,w,E,C];$R(D,0,4,2,c,D,D),M=D[0]>D[2]}else M=x>E;const A=Math.PI,R=[],P=S+n===t;t=S,v=0,m=T,f=r[t],d=r[t+1];let L;if(P){y(),L=Math.atan2(d-p,f-g),M&&(L+=L>0?-A:A);const D=(E+x)/2,k=(C+w)/2;return R[0]=[D,k,(b-a)/2,L,i],R}i=i.replace(/\n/g," ");for(let D=0,k=i.length;D<k;){y();let F=Math.atan2(d-p,f-g);if(M&&(F+=F>0?-A:A),L!==void 0){let X=F-L;if(X+=X>A?-2*A:X<-A?2*A:0,Math.abs(X)>o)return null}L=F;const B=D;let V=0;for(;D<k;++D){const X=M?k-D-1:D,St=s*l(u,i[X],h);if(t+n<e&&m+v<a+V+St/2)break;V+=St}if(D===B)continue;const Y=M?i.substring(k-B,k-D):i.substring(B,D);_=v===0?0:(a+V/2-m)/v;const q=qi(g,f,_),lt=qi(p,d,_);R.push([q,lt,V/2,F,Y]),a+=V}return R}const gf=qn(),Al=[],Cs=[],Ms=[],Il=[];function PN(r){return r[3].declutterBox}const LN=new RegExp("[-----]");function UT(r,t){return t==="start"?t=LN.test(r)?"right":"left":t==="end"&&(t=LN.test(r)?"left":"right"),hx[t]}function Xrt(r,t,e){return e>0&&r.push(`
`,""),r.push(t,""),r}class Zrt{constructor(t,e,n,i,a){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=on(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=a?new zU:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,n,i){const a=t+e+n+i;if(this.labels_[a])return this.labels_[a];const o=i?this.strokeStates[i]:null,s=n?this.fillStates[n]:null,l=this.textStates[e],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],c=l.justify?hx[l.justify]:UT(Array.isArray(t)?t[0]:t,l.textAlign||Rm),f=i&&o.lineWidth?o.lineWidth:0,d=Array.isArray(t)?t:String(t).split(`
`).reduce(Xrt,[]),{width:g,height:p,widths:v,heights:m,lineWidths:y}=Ret(l,d),_=g+f,x=[],w=(_+2)*h[0],S=(p+f)*h[1],T={width:w<0?Math.floor(w):Math.ceil(w),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:x};(h[0]!=1||h[1]!=1)&&x.push("scale",h),i&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",f),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),n&&x.push("fillStyle",s.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const b=.5-c;let E=c*_+b*f;const C=[],M=[];let A=0,R=0,P=0,L=0,D;for(let k=0,F=d.length;k<F;k+=2){const B=d[k];if(B===`
`){R+=A,A=0,E=c*_+b*f,++L;continue}const V=d[k+1]||l.font;V!==D&&(i&&C.push("font",V),n&&M.push("font",V),D=V),A=Math.max(A,m[P]);const Y=[B,E+b*v[P]+c*(v[P]-y[L]),.5*(f+A)+R];E+=v[P],i&&C.push("strokeText",Y),n&&M.push("fillText",Y),++P}return Array.prototype.push.apply(x,C),Array.prototype.push.apply(x,M),this.labels_[a]=T,T}replayTextBackground_(t,e,n,i,a,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,a,o,s,l,u,h,c,f,d,g,p,v){s*=f[0],l*=f[1];let m=n-s,y=i-l;const _=a+u>t?t-u:a,x=o+h>e?e-h:o,w=g[3]+_*f[0]+g[1],S=g[0]+x*f[1]+g[2],T=m-g[3],b=y-g[0];(p||c!==0)&&(Al[0]=T,Il[0]=T,Al[1]=b,Cs[1]=b,Cs[0]=T+w,Ms[0]=Cs[0],Ms[1]=b+S,Il[1]=Ms[1]);let E;return c!==0?(E=Wa(on(),n,i,1,1,c,-n,-i),Nr(E,Al),Nr(E,Cs),Nr(E,Ms),Nr(E,Il),Ha(Math.min(Al[0],Cs[0],Ms[0],Il[0]),Math.min(Al[1],Cs[1],Ms[1],Il[1]),Math.max(Al[0],Cs[0],Ms[0],Il[0]),Math.max(Al[1],Cs[1],Ms[1],Il[1]),gf)):Ha(Math.min(T,T+w),Math.min(b,b+S),Math.max(T,T+w),Math.max(b,b+S),gf),d&&(m=Math.round(m),y=Math.round(y)),{drawImageX:m,drawImageY:y,drawImageW:_,drawImageH:x,originX:u,originY:h,declutterBox:{minX:gf[0],minY:gf[1],maxX:gf[2],maxY:gf[3],value:v},canvasTransform:E,scale:f}}replayImageOrLabel_(t,e,n,i,a,o,s){const l=!!(o||s),u=i.declutterBox,h=s?s[2]*i.scale[0]/2:0;return u.minX-h<=e[0]&&u.maxX+h>=0&&u.minY-h<=e[1]&&u.maxY+h>=0&&(l&&this.replayTextBackground_(t,Al,Cs,Ms,Il,o,s),Pet(t,i.canvasTransform,a,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const n=Nr(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const a=this.textStates[e],o=this.createLabel(t,e,i,n),s=this.strokeStates[n],l=this.pixelRatio,u=UT(Array.isArray(t)?t[0]:t,a.textAlign||Rm),h=hx[a.textBaseline||ox],c=s&&s.lineWidth?s.lineWidth:0,f=o.width/l-2*a.scale[0],d=u*f+2*(.5-u)*c,g=h*o.height/l+2*(.5-h)*c;return{label:o,anchorX:d,anchorY:g}}execute_(t,e,n,i,a,o,s,l){const u=this.zIndexContext_;let h;this.pixelCoordinates_&&vs(n,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=yu(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),vtt(this.renderedTransform_,n));let c=0;const f=i.length;let d=0,g,p,v,m,y,_,x,w,S,T,b,E,C,M=0,A=0,R=null,P=null;const L=this.coordinateCache_,D=this.viewRotation_,k=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,F={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:D},B=this.instructions!=i||this.overlaps?0:200;let V,Y,q,lt;for(;c<f;){const X=i[c];switch(X[0]){case Yt.BEGIN_GEOMETRY:V=X[1],lt=X[3],V.getGeometry()?s!==void 0&&!jn(s,lt.getExtent())?c=X[2]+1:++c:c=X[2],u&&(u.zIndex=X[4]);break;case Yt.BEGIN_PATH:M>B&&(this.fill_(t),M=0),A>B&&(t.stroke(),A=0),!M&&!A&&(t.beginPath(),y=NaN,_=NaN),++c;break;case Yt.CIRCLE:d=X[1];const mt=h[d],$=h[d+1],K=h[d+2],et=h[d+3],W=K-mt,Z=et-$,at=Math.sqrt(W*W+Z*Z);t.moveTo(mt+at,$),t.arc(mt,$,at,0,2*Math.PI,!0),++c;break;case Yt.CLOSE_PATH:t.closePath(),++c;break;case Yt.CUSTOM:d=X[1],g=X[2];const O=X[3],N=X[4],H=X[5];F.geometry=O,F.feature=V,c in L||(L[c]=[]);const Q=L[c];H?H(h,d,g,2,Q):(Q[0]=h[d],Q[1]=h[d+1],Q.length=2),u&&(u.zIndex=X[6]),N(Q,F),++c;break;case Yt.DRAW_IMAGE:d=X[1],g=X[2],S=X[3],p=X[4],v=X[5];let J=X[6];const ot=X[7],ct=X[8],gt=X[9],pt=X[10];let ut=X[11];const Lt=X[12];let Tt=X[13];m=X[14]||"declutter";const bt=X[15];if(!S&&X.length>=20){T=X[19],b=X[20],E=X[21],C=X[22];const da=this.drawLabelWithPointPlacement_(T,b,E,C);S=da.label,X[3]=S;const rh=X[23];p=(da.anchorX-rh)*this.pixelRatio,X[4]=p;const ga=X[24];v=(da.anchorY-ga)*this.pixelRatio,X[5]=v,J=S.height,X[6]=J,Tt=S.width,X[13]=Tt}let Kt;X.length>25&&(Kt=X[25]);let Se,Be,Ie;X.length>17?(Se=X[16],Be=X[17],Ie=X[18]):(Se=oc,Be=!1,Ie=!1),pt&&k?ut+=D:!pt&&!k&&(ut-=D);let En=0;for(;d<g;d+=2){if(Kt&&Kt[En++]<Tt/this.pixelRatio)continue;const da=this.calculateImageOrLabelDimensions_(S.width,S.height,h[d],h[d+1],Tt,J,p,v,ct,gt,ut,Lt,a,Se,Be||Ie,V),rh=[t,e,S,da,ot,Be?R:null,Ie?P:null];if(l){let ga,bo,pa;if(bt){const Ar=g-d;if(!bt[Ar]){bt[Ar]={args:rh,declutterMode:m};continue}const ri=bt[Ar];ga=ri.args,bo=ri.declutterMode,delete bt[Ar],pa=PN(ga)}let Ss,ws;if(ga&&(bo!=="declutter"||!l.collides(pa))&&(Ss=!0),(m!=="declutter"||!l.collides(da.declutterBox))&&(ws=!0),bo==="declutter"&&m==="declutter"){const Ar=Ss&&ws;Ss=Ar,ws=Ar}Ss&&(bo!=="none"&&l.insert(pa),this.replayImageOrLabel_.apply(this,ga)),ws&&(m!=="none"&&l.insert(da.declutterBox),this.replayImageOrLabel_.apply(this,rh))}else this.replayImageOrLabel_.apply(this,rh)}++c;break;case Yt.DRAW_CHARS:const Tr=X[1],ei=X[2],Jr=X[3],To=X[4];C=X[5];const Tl=X[6],_r=X[7],Cn=X[8];E=X[9];const eh=X[10];T=X[11],b=X[12];const WD=[X[13],X[13]];m=X[14]||"declutter";const pT=this.textStates[b],lp=pT.font,up=[pT.scale[0]*_r,pT.scale[1]*_r];let hp;lp in this.widths_?hp=this.widths_[lp]:(hp={},this.widths_[lp]=hp);const HD=wU(h,Tr,ei,2),$D=Math.abs(up[0])*dN(lp,T,hp);if(To||$D<=HD){const da=this.textStates[b].textAlign,rh=(HD-$D)*UT(T,da),ga=Yrt(h,Tr,ei,2,T,rh,Tl,Math.abs(up[0]),dN,lp,hp,k?0:this.viewRotation_);t:if(ga){const bo=[];let pa,Ss,ws,Ar,ri;if(E)for(pa=0,Ss=ga.length;pa<Ss;++pa){ri=ga[pa],ws=ri[4],Ar=this.createLabel(ws,b,"",E),p=ri[2]+(up[0]<0?-eh:eh),v=Jr*Ar.height+(.5-Jr)*2*eh*up[1]/up[0]-Cn;const Ts=this.calculateImageOrLabelDimensions_(Ar.width,Ar.height,ri[0],ri[1],Ar.width,Ar.height,p,v,0,0,ri[3],WD,!1,oc,!1,V);if(l&&m==="declutter"&&l.collides(Ts.declutterBox))break t;bo.push([t,e,Ar,Ts,1,null,null])}if(C)for(pa=0,Ss=ga.length;pa<Ss;++pa){ri=ga[pa],ws=ri[4],Ar=this.createLabel(ws,b,C,""),p=ri[2],v=Jr*Ar.height-Cn;const Ts=this.calculateImageOrLabelDimensions_(Ar.width,Ar.height,ri[0],ri[1],Ar.width,Ar.height,p,v,0,0,ri[3],WD,!1,oc,!1,V);if(l&&m==="declutter"&&l.collides(Ts.declutterBox))break t;bo.push([t,e,Ar,Ts,1,null,null])}l&&m!=="none"&&l.load(bo.map(PN));for(let Ts=0,bK=bo.length;Ts<bK;++Ts)this.replayImageOrLabel_.apply(this,bo[Ts])}}++c;break;case Yt.END_GEOMETRY:if(o!==void 0){V=X[1];const da=o(V,lt,m);if(da)return da}++c;break;case Yt.FILL:B?M++:this.fill_(t),++c;break;case Yt.MOVE_TO_LINE_TO:for(d=X[1],g=X[2],Y=h[d],q=h[d+1],t.moveTo(Y,q),y=Y+.5|0,_=q+.5|0,d+=2;d<g;d+=2)Y=h[d],q=h[d+1],x=Y+.5|0,w=q+.5|0,(d==g-2||x!==y||w!==_)&&(t.lineTo(Y,q),y=x,_=w);++c;break;case Yt.SET_FILL_STYLE:R=X,this.alignAndScaleFill_=X[2],M&&(this.fill_(t),M=0,A&&(t.stroke(),A=0)),t.fillStyle=X[1],++c;break;case Yt.SET_STROKE_STYLE:P=X,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,X),++c;break;case Yt.STROKE:B?A++:t.stroke(),++c;break;default:++c;break}}M&&this.fill_(t),A&&t.stroke()}execute(t,e,n,i,a,o){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,a,void 0,void 0,o)}executeHitDetection(t,e,n,i,a){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,a)}}const fd=["Polygon","Circle","LineString","Image","Text","Default"],VU=["Image","Text"],jrt=fd.filter(r=>!VU.includes(r));class Krt{constructor(t,e,n,i,a,o,s){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=on(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(a,s)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,e){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const a=t[n];for(const o in a){const s=a[o];i[o]=new Zrt(this.resolution_,this.pixelRatio_,this.overlaps_,s,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let i=0,a=t.length;i<a;++i)if(t[i]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,a,o){i=Math.round(i);const s=i*2+1,l=Wa(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Dr(s,s,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==s||h.canvas.height!==s?(h.canvas.width=s,h.canvas.height=s):u||h.clearRect(0,0,s,s);let c;this.renderBuffer_!==void 0&&(c=qn(),Lv(c,t),il(c,e*(this.renderBuffer_+i),c));const f=qrt(i);let d;function g(w,S,T){const b=h.getImageData(0,0,s,s).data;for(let E=0,C=f.length;E<C;E++)if(b[f[E]]>0){if(!o||T==="none"||d!=="Image"&&d!=="Text"||o.includes(w)){const M=(f[E]-3)/4,A=i-M%s,R=i-(M/s|0),P=a(w,S,A*A+R*R);if(P)return P}h.clearRect(0,0,s,s);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort($s);let v,m,y,_,x;for(v=p.length-1;v>=0;--v){const w=p[v].toString();for(y=this.executorsByZIndex_[w],m=fd.length-1;m>=0;--m)if(d=fd[m],_=y[d],_!==void 0&&(x=_.executeHitDetection(h,l,n,g,c),x))return x}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],a=e[2],o=e[3],s=[n,i,n,o,a,o,a,i];return yu(s,0,8,2,t,s),s}isEmpty(){return Eu(this.executorsByZIndex_)}execute(t,e,n,i,a,o,s){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort($s),o=o||fd;const u=fd.length;let h,c,f,d,g;for(s&&l.reverse(),h=0,c=l.length;h<c;++h){const p=l[h].toString();for(g=this.executorsByZIndex_[p],f=0,d=o.length;f<d;++f){const v=o[f],m=g[v];if(m!==void 0){const y=s===null?void 0:m.getZIndexContext(),_=y?y.getContext():t,x=this.maxExtent_&&v!=="Image"&&v!=="Text";if(x&&(_.save(),this.clip(_,n)),!y||v==="Text"||v==="Image"?m.execute(_,e,n,i,a,s):y.pushFunction(w=>m.execute(w,e,n,i,a,s)),x&&_.restore(),y){y.offset();const w=l[h]*u+f;this.deferredZIndexContexts_[w]||(this.deferredZIndexContexts_[w]=[]),this.deferredZIndexContexts_[w].push(y)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort($s);for(let n=0,i=e.length;n<i;++n)t[e[n]].forEach(a=>{a.draw(this.renderedContext_),a.clear()}),t[e[n]].length=0}}const WT={};function qrt(r){if(WT[r]!==void 0)return WT[r];const t=r*2+1,e=r*r,n=new Array(e+1);for(let a=0;a<=r;++a)for(let o=0;o<=r;++o){const s=a*a+o*o;if(s>e)break;let l=n[s];l||(l=[],n[s]=l),l.push(((r+a)*t+(r+o))*4+3),a>0&&l.push(((r-a)*t+(r+o))*4+3),o>0&&(l.push(((r+a)*t+(r-o))*4+3),a>0&&l.push(((r-a)*t+(r-o))*4+3))}const i=[];for(let a=0,o=n.length;a<o;++a)n[a]&&i.push(...n[a]);return WT[r]=i,i}class Jrt extends GU{constructor(t,e,n,i,a,o,s){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.transformRotation_=i?wy(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=a,this.squaredTolerance_=o,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=on()}drawImages_(t,e,n,i){if(!this.image_)return;const a=yu(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let h=0,c=a.length;h<c;h+=2){const f=a[h]-this.imageAnchorX_,d=a[h+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=f+this.imageAnchorX_,p=d+this.imageAnchorY_;Wa(s,g,p,1,1,u,-g,-p),o.save(),o.transform.apply(o,s),o.translate(g,p),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,n,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=yu(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_;let s=this.textRotation_;for(this.transformRotation_===0&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){const l=a[e]+this.textOffsetX_,u=a[e+1]+this.textOffsetY_;s!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(s),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(t,e,n,i,a){const o=this.context_,s=yu(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);let l=s.length;a&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(s[u],s[u+1]);return a&&o.closePath(),n}drawRings_(t,e,n,i){for(let a=0,o=n.length;a<o;++a)e=this.moveToLineTo_(t,e,n[a],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!jn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=Ytt(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],a=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],a,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!jn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(jn(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();let a=0;const o=t.getEnds(),s=t.getStride();n.beginPath();for(let l=0,u=o.length;l<u;++l)a=this.moveToLineTo_(i,a,o[l],s,!1);n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!jn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!jn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const a=t.getEndss(),o=t.getStride();e.beginPath();for(let s=0,l=a.length;s<l;++s){const u=a[s];i=this.drawRings_(n,i,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),vs(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:Rm;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const n=t.getColor();this.fillState_={fillStyle:qo(n||Li)}}if(!e)this.strokeState_=null;else{const n=e.getColor(),i=e.getLineCap(),a=e.getLineDash(),o=e.getLineDashOffset(),s=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit(),h=a||Zs;this.strokeState_={lineCap:i!==void 0?i:eg,lineDash:this.pixelRatio_===1?h:h.map(c=>c*this.pixelRatio_),lineDashOffset:(o||js)*this.pixelRatio_,lineJoin:s!==void 0?s:rg,lineWidth:(l!==void 0?l:Pm)*this.pixelRatio_,miterLimit:u!==void 0?u:Am,strokeStyle:qo(n||Im)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const d=e.getColor();this.textFillState_={fillStyle:qo(d||Li)}}const n=t.getStroke();if(!n)this.textStrokeState_=null;else{const d=n.getColor(),g=n.getLineCap(),p=n.getLineDash(),v=n.getLineDashOffset(),m=n.getLineJoin(),y=n.getWidth(),_=n.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:eg,lineDash:p||Zs,lineDashOffset:v||js,lineJoin:m!==void 0?m:rg,lineWidth:y!==void 0?y:Pm,miterLimit:_!==void 0?_:Am,strokeStyle:qo(d||Im)}}const i=t.getFont(),a=t.getOffsetX(),o=t.getOffsetY(),s=t.getRotateWithView(),l=t.getRotation(),u=t.getScaleArray(),h=t.getText(),c=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:i!==void 0?i:bU,textAlign:c!==void 0?c:Rm,textBaseline:f!==void 0?f:ox},this.text_=h!==void 0?Array.isArray(h)?h.reduce((d,g,p)=>d+=p%2?" ":g,""):h:"",this.textOffsetX_=a!==void 0?this.pixelRatio_*a:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=s!==void 0?s:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const Yo=.5;function Qrt(r,t,e,n,i,a,o,s,l){const u=i,h=r[0]*Yo,c=r[1]*Yo,f=Dr(h,c);f.imageSmoothingEnabled=!1;const d=f.canvas,g=new Jrt(f,Yo,i,null,o,s,null),p=e.length,v=Math.floor((256*256*256-1)/p),m={};for(let _=1;_<=p;++_){const x=e[_-1],w=x.getStyleFunction()||n;if(!w)continue;let S=w(x,a);if(!S)continue;Array.isArray(S)||(S=[S]);const b=(_*v).toString(16).padStart(7,"#00000");for(let E=0,C=S.length;E<C;++E){const M=S[E],A=M.getGeometryFunction()(x);if(!A||!jn(u,A.getExtent()))continue;const R=M.clone(),P=R.getFill();P&&P.setColor(b);const L=R.getStroke();L&&(L.setColor(b),L.setLineDash(null)),R.setText(void 0);const D=M.getImage();if(D){const V=D.getImageSize();if(!V)continue;const Y=Dr(V[0],V[1],void 0,{alpha:!1}),q=Y.canvas;Y.fillStyle=b,Y.fillRect(0,0,q.width,q.height),R.setImage(new ia({img:q,anchor:D.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}const k=R.getZIndex()||0;let F=m[k];F||(F={},m[k]=F,F.Polygon=[],F.Circle=[],F.LineString=[],F.Point=[]);const B=A.getType();if(B==="GeometryCollection"){const V=A.getGeometriesArrayRecursive();for(let Y=0,q=V.length;Y<q;++Y){const lt=V[Y];F[lt.getType().replace("Multi","")].push(lt,R)}}else F[B.replace("Multi","")].push(A,R)}}const y=Object.keys(m).map(Number).sort($s);for(let _=0,x=y.length;_<x;++_){const w=m[y[_]];for(const S in w){const T=w[S];for(let b=0,E=T.length;b<E;b+=2){g.setStyle(T[b+1]);for(let C=0,M=t.length;C<M;++C)g.setTransform(t[C]),g.drawGeometry(T[b])}}}return f.getImageData(0,0,d.width,d.height)}function tnt(r,t,e){const n=[];if(e){const i=Math.floor(Math.round(r[0])*Yo),a=Math.floor(Math.round(r[1])*Yo),o=(gr(i,0,e.width-1)+gr(a,0,e.height-1)*e.width)*4,s=e.data[o],l=e.data[o+1],h=e.data[o+2]+256*(l+256*s),c=Math.floor((256*256*256-1)/t.length);h&&h%c===0&&n.push(t[h/c-1])}return n}const ent=.5,UU={Point:unt,LineString:ont,Polygon:cnt,MultiPoint:hnt,MultiLineString:snt,MultiPolygon:lnt,GeometryCollection:ant,Circle:nnt};function rnt(r,t){return parseInt(zt(r),10)-parseInt(zt(t),10)}function DN(r,t){const e=WU(r,t);return e*e}function WU(r,t){return ent*r/t}function nnt(r,t,e,n,i){const a=e.getFill(),o=e.getStroke();if(a||o){const l=r.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(a,o),l.drawCircle(t,n,i)}const s=e.getText();if(s&&s.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(s),l.drawText(t,n)}}function ON(r,t,e,n,i,a,o,s){const l=[],u=e.getImage();if(u){let f=!0;const d=u.getImageState();d==Ot.LOADED||d==Ot.ERROR?f=!1:d==Ot.IDLE&&u.load(),f&&l.push(u.ready())}const h=e.getFill();h&&h.loading()&&l.push(h.ready());const c=l.length>0;return c&&Promise.all(l).then(()=>i(null)),int(r,t,e,n,a,o,s),c}function int(r,t,e,n,i,a,o){const s=e.getGeometryFunction()(t);if(!s)return;const l=s.simplifyTransformed(n,i);if(e.getRenderer())HU(r,l,e,t,o);else{const h=UU[l.getType()];h(r,l,e,t,o,a)}}function HU(r,t,e,n,i){if(t.getType()=="GeometryCollection"){const o=t.getGeometries();for(let s=0,l=o.length;s<l;++s)HU(r,o[s],e,n,i);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer(),i)}function ant(r,t,e,n,i,a){const o=t.getGeometriesArray();let s,l;for(s=0,l=o.length;s<l;++s){const u=UU[o[s].getType()];u(r,o[s],e,n,i,a)}}function ont(r,t,e,n,i){const a=e.getStroke();if(a){const s=r.getBuilder(e.getZIndex(),"LineString");s.setFillStrokeStyle(null,a),s.drawLineString(t,n,i)}const o=e.getText();if(o&&o.getText()){const s=r.getBuilder(e.getZIndex(),"Text");s.setTextStyle(o),s.drawText(t,n,i)}}function snt(r,t,e,n,i){const a=e.getStroke();if(a){const s=r.getBuilder(e.getZIndex(),"LineString");s.setFillStrokeStyle(null,a),s.drawMultiLineString(t,n,i)}const o=e.getText();if(o&&o.getText()){const s=r.getBuilder(e.getZIndex(),"Text");s.setTextStyle(o),s.drawText(t,n,i)}}function lnt(r,t,e,n,i){const a=e.getFill(),o=e.getStroke();if(o||a){const l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(a,o),l.drawMultiPolygon(t,n,i)}const s=e.getText();if(s&&s.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(s),l.drawText(t,n,i)}}function unt(r,t,e,n,i,a){const o=e.getImage(),s=e.getText(),l=s&&s.getText(),u=a&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Ot.LOADED)return;const h=r.getBuilder(e.getZIndex(),"Image");h.setImageStyle(o,u),h.drawPoint(t,n,i)}if(l){const h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(s,u),h.drawText(t,n,i)}}function hnt(r,t,e,n,i,a){const o=e.getImage(),s=o&&o.getOpacity()!==0,l=e.getText(),u=l&&l.getText(),h=a&&s&&u?{}:void 0;if(s){if(o.getImageState()!=Ot.LOADED)return;const c=r.getBuilder(e.getZIndex(),"Image");c.setImageStyle(o,h),c.drawMultiPoint(t,n,i)}if(u){const c=r.getBuilder(e.getZIndex(),"Text");c.setTextStyle(l,h),c.drawText(t,n,i)}}function cnt(r,t,e,n,i){const a=e.getFill(),o=e.getStroke();if(a||o){const l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(a,o),l.drawPolygon(t,n,i)}const s=e.getText();if(s&&s.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(s),l.drawText(t,n,i)}}class fnt extends v2{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=qn(),this.wrappedRenderedExtent_=qn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,a=e.viewState,o=a.center,s=a.resolution,l=a.projection,u=a.rotation,h=l.getExtent(),c=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),d=e.pixelRatio,g=e.viewHints,p=!(g[Yr.ANIMATING]||g[Yr.INTERACTING]),v=this.context,m=Math.round(Me(i)/s*d),y=Math.round(kr(i)/s*d),_=c.getWrapX()&&l.canWrapX(),x=_?Me(h):null,w=_?Math.ceil((i[2]-h[2])/x)+1:1;let S=_?Math.floor((i[0]-h[0])/x):0;do{let T=this.getRenderTransform(o,s,0,d,m,y,S*x);e.declutter&&(T=T.slice(0)),t.execute(v,[v.canvas.width,v.canvas.height],T,u,p,n===void 0?fd:n?VU:jrt,n?f&&e.declutter[f]:void 0)}while(++S<w)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Dr(this.context.canvas.width,this.context.canvas.height,RN))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,tg(this.context),RN.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex];this.opacity_=n.opacity;const i=t.viewState;this.prepareContainer(t,e);const a=this.context,o=this.replayGroup_;let s=o&&!o.isEmpty();if(!s&&!(this.getLayer().hasListener(yn.PRERENDER)||this.getLayer().hasListener(yn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(a,t),i.projection,this.clipped_=!1,s&&n.extent&&this.clipping){const l=na(n.extent);s=jn(l,t.extent),this.clipped_=s&&!Oa(l,t.extent),this.clipped_&&this.clipUnrotated(a,t,l)}return s&&this.renderWorlds(o,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&a.restore(),this.postRender(a,t),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),i=this.renderedCenter_,a=this.renderedResolution_,o=this.renderedRotation_,s=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),h=[],c=n[0]*Yo,f=n[1]*Yo;h.push(this.getRenderTransform(i,a,o,Yo,c,f,0).slice());const d=u.getSource(),g=s.getExtent();if(d.getWrapX()&&s.canWrapX()&&!Oa(g,l)){let p=l[0];const v=Me(g);let m=0,y;for(;p<g[0];)--m,y=v*m,h.push(this.getRenderTransform(i,a,o,Yo,c,f,y).slice()),p+=v;for(m=0,p=l[2];p>g[2];)++m,y=v*m,h.push(this.getRenderTransform(i,a,o,Yo,c,f,y).slice()),p-=v}this.hitDetectionImageData_=Qrt(n,h,this.renderedFeatures_,u.getStyleFunction(),l,a,o,DN(a,this.renderedPixelRatio_))}e(tnt(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,n,i,a){if(!this.replayGroup_)return;const o=e.viewState.resolution,s=e.viewState.rotation,l=this.getLayer(),u={},h=function(g,p,v){const m=zt(g),y=u[m];if(y){if(y!==!0&&v<y.distanceSq){if(v===0)return u[m]=!0,a.splice(a.lastIndexOf(y),1),i(g,l,p);y.geometry=p,y.distanceSq=v}}else{if(v===0)return u[m]=!0,i(g,l,p);a.push(u[m]={feature:g,layer:l,geometry:p,distanceSq:v,callback:i})}};let c;const f=[this.replayGroup_],d=this.getLayer().getDeclutter();return f.some(g=>c=g.forEachFeatureAtCoordinate(t,o,s,n,h,d&&e.declutter[d]?e.declutter[d].all().map(p=>p.value):null)),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[Yr.ANIMATING],a=t.viewHints[Yr.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(this.ready&&!o&&i||!s&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,u=t.viewState,h=u.projection,c=u.resolution,f=t.pixelRatio,d=e.getRevision(),g=e.getRenderBuffer();let p=e.getRenderOrder();p===void 0&&(p=rnt);const v=u.center.slice(),m=il(l,g*c),y=m.slice(),_=[m.slice()],x=h.getExtent();if(n.getWrapX()&&h.canWrapX()&&!Oa(x,t.extent)){const P=Me(x),L=Math.max(Me(m)/2,P);m[0]=x[0]-L,m[2]=x[2]+L,H8(v,h);const D=z8(_[0],h);D[0]<x[0]&&D[2]<x[2]?_.push([D[0]+P,D[1],D[2]+P,D[3]]):D[0]>x[0]&&D[2]>x[2]&&_.push([D[0]-P,D[1],D[2]-P,D[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==p&&this.renderedFrameDeclutter_===!!t.declutter&&Oa(this.wrappedRenderedExtent_,m))return vs(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new Wrt(WU(c,f),m,c,f);let S;for(let P=0,L=_.length;P<L;++P)n.loadFeatures(_[P],c,h);const T=DN(c,f);let b=!0;const E=(P,L)=>{let D;const k=P.getStyleFunction()||e.getStyleFunction();if(k&&(D=k(P,c)),D){const F=this.renderFeature(P,T,D,w,S,this.getLayer().getDeclutter(),L);b=b&&!F}},C=Ty(m),M=n.getFeaturesInExtent(C);p&&M.sort(p);for(let P=0,L=M.length;P<L;++P)E(M[P],P);this.renderedFeatures_=M,this.ready=b;const A=w.finish(),R=new Krt(m,c,f,n.getOverlaps(),A,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=p,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=m,this.renderedCenter_=v,this.renderedProjection_=h,this.renderedPixelRatio_=f,this.replayGroup_=R,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,a,o,s){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let u=0,h=n.length;u<h;++u)l=ON(i,t,n[u],e,this.boundHandleStyleImageChange_,a,o,s)||l;else l=ON(i,t,n,e,this.boundHandleStyleImageChange_,a,o,s);return l}}class Pa extends ow{constructor(t){super(t)}createRenderer(){return new fnt(this)}}class cx{constructor(t){this.rbush_=new PU(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[zt(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,a=e.length;i<a;i++){const o=t[i],s=e[i],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[i]=l,this.items_[zt(s)]=l}this.rbush_.load(n)}remove(t){const e=zt(t),n=this.items_[e];return delete this.items_[e],this.rbush_.remove(n)!==null}update(t,e){const n=this.items_[zt(e)],i=[n.minX,n.minY,n.maxX,n.maxY];Mu(i,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(i){return i.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,a=t.length;i<a;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return Eu(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Ha(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}let sw=class $U extends ls{constructor(t,e,n){super(),n!==void 0&&e===void 0?this.setFlatCoordinates(n,t):(e=e||0,this.setCenterAndRadius(t,e,n))}clone(){const t=new $U(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const a=this.flatCoordinates,o=t-a[0],s=e-a[1],l=o*o+s*s;if(l<i){if(l===0)for(let u=0;u<this.stride;++u)n[u]=a[u];else{const u=this.getRadius()/Math.sqrt(l);n[0]=a[0]+u*o,n[1]=a[1]+u*s;for(let h=2;h<this.stride;++h)n[h]=a[h]}return n.length=this.stride,l}return i}containsXY(t,e){const n=this.flatCoordinates,i=t-n[0],a=e-n[1];return i*i+a*a<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,n=e[this.stride]-e[0];return Ha(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if(jn(t,e)){const n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||t[1]<=n[1]&&t[3]>=n[1]?!0:NR(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(let a=1;a<e;++a)i[e+a]=t[a];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let a=J8(i,0,t,this.stride);i[a++]=i[0]+e;for(let o=1,s=this.stride;o<s;++o)i[a++]=i[o];i.length=a,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const n=this.getCenter(),i=this.getStride();this.setCenter($R(n,0,n.length,i,t,e,n)),this.changed()}};sw.prototype.transform;class zr extends YR{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ve),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,n=t.length;e<n;++e)this.changeEventsKeys_.push(se(t[e],Bt.CHANGE,this.changed,this))}clone(){const t=new zr(HT(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<Jc(this.getExtent(),t,e))return i;const a=this.geometries_;for(let o=0,s=a.length;o<s;++o)i=a[o].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,a=n.length;i<a;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){Mg(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)G8(t,e[n].getExtent());return t}getGeometries(){return HT(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let a=0,o=n.length;a<o;++a){const s=n[a],l=s.getSimplifiedGeometry(t);e.push(l),l!==s&&(i=!0)}return i?new zr(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const n=this.geometries_;for(let i=0,a=n.length;i<a;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=ua(this.getExtent()));const i=this.geometries_;for(let a=0,o=i.length;a<o;++a)i[a].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(HT(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,a=n.length;i<a;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function HT(r){return r.map(t=>t.clone())}class Dn extends ls{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const i=t,a=[],o=[];for(let l=0,u=i.length;l<u;++l){const h=i[l];Ne(a,h.getFlatCoordinates()),o.push(a.length)}const s=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(s,a),this.ends_=o}}appendLineString(t){Ne(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Dn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Jc(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ZR(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),KR(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,n=n!==void 0?n:!1,Tet(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return Cm(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new ke(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let a=0;for(let o=0,s=e.length;o<s;++o){const l=e[o],u=new ke(t.slice(a,l),n);i.push(u),a=l}return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,a=this.stride;for(let o=0,s=i.length;o<s;++o){const l=i[o],u=ix(e,n,l,a,.5);Ne(t,u),n=l}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=tU(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new Dn(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return tet(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ey(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class fa extends ls{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){Ne(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new fa(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<Jc(this.getExtent(),t,e))return i;const a=this.flatCoordinates,o=this.stride;for(let s=0,l=a.length;s<l;s+=o){const u=Ys(t,e,a[s],a[s+1]);if(u<i){i=u;for(let h=0;h<o;++h)n[h]=a[s+h];n.length=o}}return i}getCoordinates(){return Vs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new rr(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let a=0,o=t.length;a<o;a+=n){const s=new rr(t.slice(a,a+n),e);i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,a=e.length;i<a;i+=n){const o=e[i],s=e[i+1];if(DR(t,o,s))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=by(this.flatCoordinates,0,t,this.stride),this.changed()}}function YU(r,t,e,n){const i=[];let a=qn();for(let o=0,s=e.length;o<s;++o){const l=e[o];a=OR(r,t,l[0],n),i.push((a[0]+a[2])/2,(a[1]+a[3])/2),t=l[l.length-1]}return i}class yi extends ls{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const i=t,a=[],o=[];for(let s=0,l=i.length;s<l;++s){const u=i[s],h=a.length,c=u.getEnds();for(let f=0,d=c.length;f<d;++f)c[f]+=h;Ne(a,u.getFlatCoordinates()),o.push(c)}e=i.length===0?this.getLayout():i[0].getLayout(),t=a,n=o}e!==void 0&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Ne(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let i=0,a=e.length;i<a;++i)e[i]+=n}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const n=new yi(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<Jc(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xtt(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ztt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Qtt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return qtt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),PM(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,RM(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=YU(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=iU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new fa(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;lU(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=PM(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Ktt(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new yi(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const a=this.endss_[t-1];e=a[a.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(e!==0)for(let a=0,o=n.length;a<o;++a)n[a]-=e;return new Kr(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let a=0;for(let o=0,s=n.length;o<s;++o){const l=n[o].slice(),u=l[l.length-1];if(a!==0)for(let c=0,f=l.length;c<f;++c)l[c]-=a;const h=new Kr(e.slice(a,u),t,l);i.push(h),a=u}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return eet(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Q8(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const NN=on();class di{constructor(t,e,n,i,a,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=a,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Ld(this.flatCoordinates_):OR(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=ua(this.getExtent());this.flatInteriorPoints_=QR(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=uU(this.flatCoordinates_,this.ends_),e=YU(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=iU(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=ix(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let i=0,a=n.length;i<a;++i){const o=n[i],s=ix(t,e,o,2,.5);Ne(this.flatMidpoints_,s),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=Xt(t);const e=t.getExtent(),n=t.getWorldExtent();if(e&&n){const i=kr(n)/kr(e);Wa(NN,n[0],n[3],i,-i,0,0,0),yu(this.flatCoordinates_,0,this.flatCoordinates_.length,2,NN,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new di(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=N8((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=QS(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=tU(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i);break;case"Polygon":i=[],n.length=qR(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i);break}return i&&(this.simplifiedGeometry_=new di(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}di.prototype.getFlatCoordinates=di.prototype.getOrientedFlatCoordinates;class m2 extends Xa{constructor(t){super(),this.projection=Xt(t.projection),this.attributions_=FN(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,i){e.viewResolver=n,e.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=FN(t),this.changed()}setState(t){this.state_=t,this.changed()}}function FN(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),t=>r):null}const $r={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function dnt(r,t){return[[-1/0,-1/0,1/0,1/0]]}function E0(r,t){return[r]}let gnt=!1;function pnt(r,t,e,n,i,a,o){const s=new XMLHttpRequest;s.open("GET",typeof r=="function"?r(e,n,i):r,!0),t.getType()=="arraybuffer"&&(s.responseType="arraybuffer"),s.withCredentials=gnt,s.onload=function(l){if(!s.status||s.status>=200&&s.status<300){const u=t.getType();try{let h;u=="text"||u=="json"?h=s.responseText:u=="xml"?h=s.responseXML||s.responseText:u=="arraybuffer"&&(h=s.response),h?a(t.readFeatures(h,{extent:e,featureProjection:i}),t.readProjection(h)):o()}catch{o()}}else o()},s.onerror=o,s.send()}function kN(r,t){return function(e,n,i,a,o){const s=this;pnt(r,t,e,n,i,function(l,u){s.addFeatures(l),a!==void 0&&a(l)},o||Kd)}}class Rl extends ca{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class Na extends m2{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Kd,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(pe(this.format_,"`format` must be set when `url` is set"),this.loader_=kN(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:dnt;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new cx:null,this.loadedExtentsRtree_=new cx,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,i;Array.isArray(t.features)?i=t.features:t.features&&(n=t.features,i=n.getArray()),!e&&n===void 0&&(n=new Bi(i)),i!==void 0&&this.addFeaturesInternal(i),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=zt(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Rl($r.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof di||(this.featureChangeKeys_[t]=[se(e,Bt.CHANGE,this.handleFeatureChange_,this),se(e,Lc.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0;if(e.getId()!==void 0){const i=String(e.getId());if(!(i in this.idIndex_))this.idIndex_[i]=e;else if(e instanceof di){const a=this.idIndex_[i];a instanceof di?Array.isArray(a)?a.push(e):this.idIndex_[i]=[a,e]:n=!1}else n=!1}return n&&(pe(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let a=0,o=t.length;a<o;a++){const s=t[a],l=zt(s);this.addToIndex_(l,s)&&n.push(s)}for(let a=0,o=n.length;a<o;a++){const s=n[a],l=zt(s);this.setupChangeEvents_(l,s);const u=s.getGeometry();if(u){const h=u.getExtent();e.push(h),i.push(s)}else this.nullGeometryFeatures_[l]=s}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener($r.ADDFEATURE))for(let a=0,o=n.length;a<o;a++)this.dispatchEvent(new Rl($r.ADDFEATURE,n[a]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener($r.ADDFEATURE,function(n){e||(e=!0,t.push(n.feature),e=!1)}),this.addEventListener($r.REMOVEFEATURE,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),t.addEventListener(mn.ADD,n=>{e||(e=!0,this.addFeature(n.element),e=!1)}),t.addEventListener(mn.REMOVE,n=>{e||(e=!0,this.removeFeature(n.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Ve);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(n);for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Rl($r.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(i){const a=i.getGeometry();if(a instanceof di||a.intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(n){const i=n.getGeometry();if(i instanceof di||i.intersectsExtent(t)){const a=e(n);if(a)return a}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Eu(this.nullGeometryFeatures_)||Ne(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){e.push(n)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=FR(t,e);return[].concat(...i.map(a=>this.featuresRtree_.getInExtent(a)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let a=null;const o=[NaN,NaN];let s=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||Dc,this.featuresRtree_.forEachInExtent(l,function(u){if(e(u)){const h=u.getGeometry(),c=s;if(s=h instanceof di?0:h.closestPointXY(n,i,o,s),s<c){a=u;const f=Math.sqrt(s);l[0]=n-f,l[1]=i-f,l[2]=n+f,l[3]=i+f}}}),a}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=zt(e),i=e.getGeometry();if(!i)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);else{const o=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const a=e.getId();if(a!==void 0){const o=a.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new Rl($r.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:zt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Eu(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,a=this.strategy_(t,e,n);for(let o=0,s=a.length;o<s;++o){const l=a[o];i.forEachInExtent(l,function(h){return Oa(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Rl($r.FEATURESLOADSTART)),this.loader_.call(this,l,e,n,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new Rl($r.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Rl($r.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(i){if(Mu(i.extent,t))return n=i,!0}),n&&e.remove(n)}removeFeatures(t){let e=!1;for(let n=0,i=t.length;n<i;++n)e=this.removeFeatureInternal(t[n])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=zt(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const n=this.featureChangeKeys_[e];n==null||n.forEach(Ve),delete this.featureChangeKeys_[e];const i=t.getId();if(i!==void 0){const a=i.toString(),o=this.idIndex_[a];o===t?delete this.idIndex_[a]:Array.isArray(o)&&(o.splice(o.indexOf(t),1),o.length===1&&(this.idIndex_[a]=o[0]))}return delete this.uidIndex_[e],this.hasListener($r.REMOVEFEATURE)&&this.dispatchEvent(new Rl($r.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){pe(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(kN(t,this.format_))}}const Et={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class y2 extends Cg{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Bt.CHANGE)}release(){this.state===Et.ERROR&&this.setState(Et.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Et.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Ut()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=e,this.transitionStarts_[t]=n;else if(n===-1)return 1;const i=e-n+1e3/60;return i>=this.transition_?1:IU(i/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}class lw extends y2{constructor(t,e,n,i,a,o){super(t,e,o),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=a}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Et.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Et.ERROR,this.unlistenImage_(),this.image_=vnt(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Et.LOADED:this.state=Et.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Et.ERROR&&(this.state=Et.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Et.IDLE&&(this.state=Et.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=yet(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function vnt(){const r=Dr(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class mnt{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const a=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,a),this.initialVelocity_=Math.sqrt(a*a+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class ynt extends jS{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Ut()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Wa(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),LR(i,n)}forEachFeatureAtCoordinate(t,e,n,i,a,o,s,l){let u;const h=e.viewState;function c(x,w,S,T){return a.call(o,w,x?S:null,T)}const f=h.projection,d=H8(t.slice(),f),g=[[0,0]];if(f.canWrapX()&&i){const x=f.getExtent(),w=Me(x);g.push([-w,0],[w,0])}const p=e.layerStatesArray,v=p.length,m=[],y=[];for(let x=0;x<g.length;x++)for(let w=v-1;w>=0;--w){const S=p[w],T=S.layer;if(T.hasRenderer()&&c2(S,h)&&s.call(l,T)){const b=T.getRenderer(),E=T.getSource();if(b&&E){const C=E.getWrapX()?d:t,M=c.bind(null,S.managed);y[0]=C[0]+g[x][0],y[1]=C[1]+g[x][1],u=b.forEachFeatureAtCoordinate(y,e,n,M,m)}if(u)return u}}if(m.length===0)return;const _=1/m.length;return m.forEach((x,w)=>x.distanceSq+=w*_),m.sort((x,w)=>x.distanceSq-w.distanceSq),m.some(x=>u=x.callback(x.feature,x.layer,x.geometry)),u}hasFeatureAtCoordinate(t,e,n,i,a,o){return this.forEachFeatureAtCoordinate(t,e,n,i,Dc,this,a,o)!==void 0}getMap(){return this.map_}renderFrame(t){Ut()}scheduleExpireIconCache(t){Ko.canExpireCache()&&t.postRenderFunctions.push(_nt)}}function _nt(r,t){Ko.expire()}class xnt extends ynt{constructor(t){super(t),this.fontChangeListenerKey_=se(Ps,Lc.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Cy+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new Dv(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){Ve(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(yn.PRECOMPOSE,t);const e=t.layerStatesArray.sort((s,l)=>s.zIndex-l.zIndex);e.some(s=>s.layer instanceof ow&&s.layer.getDeclutter())&&(t.declutter={});const i=t.viewState;this.children_.length=0;const a=[];let o=null;for(let s=0,l=e.length;s<l;++s){const u=e[s];t.layerIndex=s;const h=u.layer,c=h.getSourceState();if(!c2(u,i)||c!="ready"&&c!="undefined"){h.unrender();continue}const f=h.render(t,o);f&&(f!==o&&(this.children_.push(f),o=f),a.push(u))}this.declutter(t,a),met(this.element_,this.children_),this.dispatchRenderEvent(yn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let n=e.length-1;n>=0;--n){const i=e[n],a=i.layer;a.getDeclutter()&&a.renderDeclutter(t,i)}e.forEach(n=>n.layer.renderDeferred(t))}}}class jl extends ca{constructor(t,e){super(t),this.layer=e}}const $T={LAYERS:"layers"};class Qi extends AU{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener($T.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Bi(n.slice(),{unique:!0}):pe(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Bi(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ve),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(se(t,mn.ADD,this.handleLayersAdd_,this),se(t,mn.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Ve);Eg(this.listenerKeys_);const e=t.getArray();for(let n=0,i=e.length;n<i;n++){const a=e[n];this.registerLayerListeners_(a),this.dispatchEvent(new jl("addlayer",a))}this.changed()}registerLayerListeners_(t){const e=[se(t,Lc.PROPERTYCHANGE,this.handleLayerChange_,this),se(t,Bt.CHANGE,this.handleLayerChange_,this)];t instanceof Qi&&e.push(se(t,"addlayer",this.handleLayerGroupAdd_,this),se(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[zt(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new jl("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new jl("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new jl("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=zt(e);this.listenerKeys_[n].forEach(Ve),delete this.listenerKeys_[n],this.dispatchEvent(new jl("removelayer",e)),this.changed()}getLayers(){return this.get($T.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let i=0,a=n.length;i<a;++i)this.dispatchEvent(new jl("removelayer",n[i]))}this.set($T.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],n=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const i=this.getLayerState();let a=i.zIndex;!t&&i.zIndex===void 0&&(a=0);for(let o=n,s=e.length;o<s;o++){const l=e[o];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=Rn(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=a)}return e}getSourceState(){return"ready"}}class Qf extends ca{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}class Os extends Qf{constructor(t,e,n,i,a,o){super(t,e,a),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const De={SINGLECLICK:"singleclick",CLICK:Bt.CLICK,DBLCLICK:Bt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},BM={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Snt extends Cg{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=se(n,BM.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=se(n,BM.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Bt.TOUCHMOVE,this.boundHandleTouchMove_,mU?{passive:!1}:!1)}emulateClick_(t){let e=new Os(De.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Os(De.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Os(De.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==De.POINTERUP||e.type==De.POINTERCANCEL){delete this.trackedTouches_[n];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==e.target){delete this.trackedTouches_[i];break}}else(e.type==De.POINTERDOWN||e.type==De.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Os(De.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ve),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Os(De.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(se(n,De.POINTERMOVE,this.handlePointerMove_,this),se(n,De.POINTERUP,this.handlePointerUp_,this),se(this.element_,De.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(se(this.element_.getRootNode(),De.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Os(De.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Os(De.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ve(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Bt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ve(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ve),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Vo={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},en={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},fx=1/0;class wnt{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Eg(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){pe(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=fx?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,a=e[t],o=n[t],s=t;for(;t<i>>1;){const l=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),h=u<i&&n[u]<n[l]?u:l;e[t]=e[h],n[t]=n[h],t=h}e[t]=a,n[t]=o,this.siftDown_(s,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,a=n[e],o=i[e];for(;e>t;){const s=this.getParentIndex_(e);if(i[s]>o)n[e]=n[s],i[e]=i[s],e=s;else break}n[e]=a,i[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const a=e.length;let o,s,l;for(s=0;s<a;++s)o=e[s],l=t(o),l==fx?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=l,e[i++]=o);e.length=i,n.length=i,this.heapify_()}}class Tnt extends wnt{constructor(t,e){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(Bt.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===Et.LOADED||n===Et.ERROR||n===Et.EMPTY){n!==Et.ERROR&&e.removeEventListener(Bt.CHANGE,this.boundHandleTileChange_);const i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;){const i=this.dequeue()[0],a=i.getKey();i.getState()===Et.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++n,i.load())}}}function bnt(r,t,e,n,i){if(!r||!(e in r.wantedTiles)||!r.wantedTiles[e][t.getKey()])return fx;const a=r.viewState.center,o=n[0]-a[0],s=n[1]-a[1];return 65536*Math.log(i)+Math.sqrt(o*o+s*s)/i}class uw extends Xa{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var e;this.map_&&((e=this.element)==null||e.remove());for(let n=0,i=this.listenerKeys.length;n<i;++n)Ve(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_??t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Kd&&this.listenerKeys.push(se(t,Vo.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class Ent extends uw{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",i=t.expandClassName!==void 0?t.expandClassName:e+"-expand",a=t.collapseLabel!==void 0?t.collapseLabel:"",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a,this.collapseLabel_.className=o):this.collapseLabel_=a;const s=t.label!==void 0?t.label:"i";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Bt.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+Cy+" "+nw+(this.collapsed_&&this.collapsible_?" "+ax:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),n=new Set(e.flatMap(i=>i.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>n.add(i)):n.add(this.attributions_)),!this.overrideCollapsible_){const i=!e.some(a=>{var o;return((o=a.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(n)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(i=>RR(()=>i))),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!vs(e,this.renderedAttributions_)){yU(this.ulElement_);for(let i=0,a=e.length;i<a;++i){const o=document.createElement("li");o.innerHTML=e[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ax),this.collapsed_?nx(this.collapseLabel_,this.label_):nx(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class Cnt extends uw{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"",i=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const a=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=a,o.appendChild(this.label_),o.addEventListener(Bt.CLICK,this.handleClick_.bind(this),!1);const s=e+" "+Cy+" "+nw,l=this.element;l.className=s,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(_0)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Rg}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const i="rotate("+n+"rad)";if(this.autoHide_){const a=this.element.classList.contains(_0);!a&&n===0?this.element.classList.add(_0):a&&n!==0&&this.element.classList.remove(_0)}this.label_.style.transform=i}this.rotation_=n}}class Mnt extends uw{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,i=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",a=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",s=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",u=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=i,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(Bt.CLICK,this.handleClick_.bind(this,n),!1);const c=document.createElement("button");c.className=a,c.setAttribute("type","button"),c.title=u,c.appendChild(typeof s=="string"?document.createTextNode(s):s),c.addEventListener(Bt.CLICK,this.handleClick_.bind(this,-n),!1);const f=e+" "+Cy+" "+nw,d=this.element;d.className=f,d.appendChild(h),d.appendChild(c),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const i=n.getZoom();if(i!==void 0){const a=n.getConstrainedZoom(i+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:a,duration:this.duration_,easing:Rg})):n.setZoom(a)}}}function XU(r){r=r||{};const t=new Bi;return(r.zoom!==void 0?r.zoom:!0)&&t.push(new Mnt(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&t.push(new Cnt(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&t.push(new Ent(r.attributionOptions)),t}const zM={ACTIVE:"active"};class Ry extends Xa{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(zM.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(zM.ACTIVE,t)}setMap(t){this.map_=t}}function Ant(r,t,e){const n=r.getCenterInternal();if(n){const i=[n[0]+t[0],n[1]+t[1]];r.animateInternal({duration:e!==void 0?e:250,easing:Uet,center:r.getConstrainedCenter(i)})}}function _2(r,t,e,n){const i=r.getZoom();if(i===void 0)return;const a=r.getConstrainedZoom(i+t),o=r.getResolutionForZoom(a);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:o,anchor:e,duration:n!==void 0?n:250,easing:Rg})}class Int extends Ry{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==De.DBLCLICK){const n=t.originalEvent,i=t.map,a=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,s=i.getView();_2(s,o,a,this.duration_),n.preventDefault(),e=!0}return!e}}class ju extends Ry{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==De.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==De.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==De.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==De.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function x2(r){const t=r.length;let e=0,n=0;for(let i=0;i<t;i++)e+=r[i].clientX,n+=r[i].clientY;return{clientX:e/t,clientY:n/t}}function VM(r){const t=arguments;return function(e){let n=!0;for(let i=0,a=t.length;i<a&&(n=n&&t[i](e),!!n);++i);return n}}const Rnt=function(r){const t=r.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Pnt=function(r){const t=r.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Lnt=function(r){const t=r.map.getTargetElement(),e=t.getRootNode(),n=r.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(n):t.contains(n)},ZU=function(r){const t=r.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?Lnt(r):!0},dx=Dc,jU=function(r){const t=r.originalEvent;return t.button==0&&!(det&&gU&&t.ctrlKey)},Dnt=qc,Ont=function(r){return r.type==De.SINGLECLICK},S2=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Nnt=function(r){const t=r.originalEvent;return gU?t.metaKey:t.ctrlKey},KU=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},qU=function(r){const t=r.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},YT=function(r){const t=r.originalEvent;return pe(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},JU=function(r){const t=r.originalEvent;return pe(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class Fnt extends ju{constructor(t){super({stopDown:qc}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:VM(S2,JU);this.condition_=t.onFocusOnly?VM(ZU,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(x2(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const a=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();W8(a,s.getResolution()),zR(a,s.getRotation()),s.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),o=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([s[0]-i*Math.cos(a),s[1]-i*Math.sin(a)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:Rg})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class knt extends ju{constructor(t){t=t||{},super({stopDown:qc}),this.condition_=t.condition?t.condition:Pnt,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!YT(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===h2)return;const i=e.getSize(),a=t.pixel,o=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){const s=o-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=o}handleUpEvent(t){return YT(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return YT(t)&&jU(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Gnt extends jS{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Kr([i])}getGeometry(){return this.geometry_}}const pf={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class _p extends ca{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class Bnt extends ju{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new Gnt(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??jU,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],a=n[1]-e[1];return i*i+a*a>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new _p(pf.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new _p(e?pf.BOXEND:pf.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new _p(pf.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new _p(pf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new _p(pf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class znt extends Bnt{constructor(t){t=t||{};const e=t.condition?t.condition:KU;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let i=this.getGeometry();if(this.out_){const a=n.rotatedExtentForGeometry(i),o=n.getResolutionForExtentInternal(a),s=n.getResolution()/o;i=i.clone(),i.scale(s*s)}n.fitInternal(i,{duration:this.duration_,easing:Rg})}}const lh={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Vnt extends Ry{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return S2(e)&&qU(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==Bt.KEYDOWN){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==lh.DOWN||i==lh.LEFT||i==lh.RIGHT||i==lh.UP)){const o=t.map.getView(),s=o.getResolution()*this.pixelDelta_;let l=0,u=0;i==lh.DOWN?u=-s:i==lh.LEFT?l=-s:i==lh.RIGHT?l=s:u=s;const h=[l,u];zR(h,o.getRotation()),Ant(o,h,this.duration_),n.preventDefault(),e=!0}}return!e}}class Unt extends Ry{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!Nnt(e)&&qU(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==Bt.KEYDOWN||t.type==Bt.KEYPRESS){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==="+"||i==="-")){const a=t.map,o=i==="+"?this.delta_:-this.delta_,s=a.getView();_2(s,o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}class Wnt extends Ry{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:dx;this.condition_=t.onFocusOnly?VM(ZU,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==Bt.WHEEL)return!0;const n=t.map,i=t.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let a;if(t.type==Bt.WHEEL&&(a=i.deltaY,het&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=pU),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");const s=n.getView();if(this.mode_==="trackpad"&&!(s.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=a;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-gr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),_2(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class Hnt extends ju{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=qc),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=a-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=a;const o=t.map,s=o.getView();s.getConstraints().rotation!==h2&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(x2(this.targetPointers))),this.rotating_&&(o.render(),s.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class $nt extends ju{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=qc),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],a=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(a*a+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/s),this.lastDistance_=s;const l=t.map,u=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(x2(this.targetPointers))),l.render(),u.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function QU(r){r=r||{};const t=new Bi,e=new mnt(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&t.push(new knt),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&t.push(new Int({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&t.push(new Fnt({onFocusOnly:r.onFocusOnly,kinetic:e})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&t.push(new Hnt),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&t.push(new $nt({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(t.push(new Vnt),t.push(new Unt({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&t.push(new Wnt({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&t.push(new znt({duration:r.zoomDuration})),t}function tW(r){if(r instanceof My){r.setMapInternal(null);return}r instanceof Qi&&r.getLayers().forEach(tW)}function eW(r,t){if(r instanceof My){r.setMapInternal(t);return}if(r instanceof Qi){const e=r.getLayers().getArray();for(let n=0,i=e.length;n<i;++n)eW(e[n],t)}}let w2=class extends Xa{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=Ynt(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:pU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=on(),this.pixelToCoordinateTransform_=on(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||XU(),this.interactions=e.interactions||QU({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Tnt(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(en.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(en.VIEW,this.handleViewChanged_),this.addChangeListener(en.SIZE,this.handleSizeChanged_),this.addChangeListener(en.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof ao)&&t.view.then(function(i){n.setView(new ao(i))}),this.controls.addEventListener(mn.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(mn.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(mn.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(mn.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(mn.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(mn.REMOVE,i=>{const a=i.element.getId();a!==void 0&&delete this.overlayIdIndex_[a.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){eW(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const a=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:Dc,s=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,s,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(i){n.push(i)},e),n}getAllLayers(){const t=[];function e(n){n.forEach(function(i){i instanceof Qi?e(i.getLayers()):t.push(i)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const i=e.layerFilter!==void 0?e.layerFilter:Dc,a=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,a,o,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),i=this.getSize(),a=n.width/i[0],o=n.height/i[1],s="changedTouches"in t?t.changedTouches[0]:t;return[(s.clientX-n.left)/a,(s.clientY-n.top)/o]}getTarget(){return this.get(en.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Au(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Nr(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(en.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Bi){e.setLayers(t);return}const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const i=t[e];if(!i.visible)continue;const a=i.layer.getRenderer();if(a&&!a.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=cr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Nr(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(en.SIZE)}getView(){return this.get(en.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return bnt(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new Os(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===BM.POINTERDOWN||n===Bt.WHEEL||n===Bt.KEYDOWN){const i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=e.target,s=a instanceof ShadowRoot?a.host===o?a.host.ownerDocument:a:a===i?i.documentElement:a;if(this.overlayContainerStopEvent_.contains(o)||!s.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const i=this.getInteractions().getArray().slice();for(let a=i.length-1;a>=0;a--){const o=i[a];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,a=i;if(t){const o=t.viewHints;if(o[Yr.ANIMATING]||o[Yr.INTERACTING]){const s=Date.now()-t.time>8;i=s?0:8,a=s?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,a))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(yn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(yn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Qf(Vo.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Qf(Vo.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let i=0,a=n.length;i<a;++i)n[i](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,i=this.targetChangeHandlerKeys_.length;n<i;++n)Ve(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Bt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Bt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new xnt(this)),this.mapBrowserEventHandler_=new Snt(this,this.moveTolerance_);for(const a in De)this.mapBrowserEventHandler_.addEventListener(De[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Bt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Bt.WHEEL,this.boundHandleBrowserEvent_,mU?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const a=e.getRootNode();n=a instanceof ShadowRoot?a.host:e}this.targetChangeHandlerKeys_=[se(n,Bt.KEYDOWN,this.handleBrowserEvent,this),se(n,Bt.KEYPRESS,this.handleBrowserEvent,this)];const i=e.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ve(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ve(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=se(t,Lc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=se(t,Bt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ve),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new jl("addlayer",t)),this.layerGroupPropertyListenerKeys_=[se(t,Lc.PROPERTYCHANGE,this.render,this),se(t,Bt.CHANGE,this.render,this),se(t,"addlayer",this.handleLayerAdd_,this),se(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){tW(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let a=null;if(e!==void 0&&cN(e)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Tm(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:o,wantedTiles:{},mapId:zt(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const l=isNaN(s.nextRotation)?s.rotation:s.nextRotation;a.nextExtent=Tm(s.nextCenter,s.nextResolution,l,e)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),i&&(!this.previousExtent_||!Zu(this.previousExtent_)&&!Mu(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Qf(Vo.MOVESTART,this,i)),this.previousExtent_=Mg(this.previousExtent_)),this.previousExtent_&&!a.viewHints[Yr.ANIMATING]&&!a.viewHints[Yr.INTERACTING]&&!Mu(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Qf(Vo.MOVEEND,this,a)),k8(a.extent,this.previousExtent_))),this.dispatchEvent(new Qf(Vo.POSTRENDER,this,a)),this.renderComplete_=(this.hasListener(Vo.LOADSTART)||this.hasListener(Vo.LOADEND)||this.hasListener(yn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new jl("removelayer",e)),this.set(en.LAYERGROUP,t)}setSize(t){this.set(en.SIZE,t)}setTarget(t){this.set(en.TARGET,t)}setView(t){if(!t||t instanceof ao){this.set(en.VIEW,t);return}this.set(en.VIEW,new ao);const e=this;t.then(function(n){e.setView(new ao(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),a=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),o=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(a)&&!isNaN(o)&&(e=[Math.max(0,a),Math.max(0,o)],!cN(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Z8("No map visible because the map container's width or height are 0."))}const n=this.getSize();e&&(!n||!vs(e,n))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function Ynt(r){let t=null;r.keyboardEventTarget!==void 0&&(t=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const e={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Qi({layers:r.layers});e[en.LAYERGROUP]=n,e[en.TARGET]=r.target,e[en.VIEW]=r.view instanceof ao?r.view:new ao;let i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new Bi(r.controls.slice()):(pe(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=r.controls));let a;r.interactions!==void 0&&(Array.isArray(r.interactions)?a=new Bi(r.interactions.slice()):(pe(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),a=r.interactions));let o;return r.overlays!==void 0?Array.isArray(r.overlays)?o=new Bi(r.overlays.slice()):(pe(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=r.overlays):o=new Bi,{controls:i,interactions:a,keyboardEventTarget:t,overlays:o,values:e}}const Gn={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class rW extends Xa{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+Cet,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Gn.ELEMENT,this.handleElementChanged),this.addChangeListener(Gn.MAP,this.handleMapChanged),this.addChangeListener(Gn.OFFSET,this.handleOffsetChanged),this.addChangeListener(Gn.POSITION,this.handlePositionChanged),this.addChangeListener(Gn.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(Gn.ELEMENT)}getId(){return this.id}getMap(){return this.get(Gn.MAP)||null}getOffset(){return this.get(Gn.OFFSET)}getPosition(){return this.get(Gn.POSITION)}getPositioning(){return this.get(Gn.POSITIONING)}handleElementChanged(){yU(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){var e;this.mapPostrenderListenerKey&&((e=this.element)==null||e.remove(),Ve(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=se(t,Vo.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Gn.ELEMENT,t)}setMap(t){this.set(Gn.MAP,t)}setOffset(t){this.set(Gn.OFFSET,t)}setPosition(t){this.set(Gn.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Gn.POSITION))return;const n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),a=this.getRect(i,[pet(i),vet(i)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!Oa(n,a)){const s=a[0]-n[0],l=n[2]-a[2],u=a[1]-n[1],h=n[3]-a[3],c=[0,0];if(s<0?c[0]=s-o:l<0&&(c[0]=Math.abs(l)+o),u<0?c[1]=u-o:h<0&&(c[1]=Math.abs(h)+o),c[0]!==0||c[1]!==0){const f=e.getView().getCenterInternal(),d=e.getPixelFromCoordinateInternal(f);if(!d)return;const g=[d[0]+c[0],d[1]+c[1]],p=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(g),duration:p.duration,easing:p.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,a=n.top+window.pageYOffset;return[i,a,i+e[0],a+e[1]]}setPositioning(t){this.set(Gn.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(t,e){const n=this.element.style,i=this.getOffset(),a=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+i[0])+"px",s=Math.round(t[1]+i[1])+"px";let l="0%",u="0%";a=="bottom-right"||a=="center-right"||a=="top-right"?l="-100%":(a=="bottom-center"||a=="center-center"||a=="top-center")&&(l="-50%"),a=="bottom-left"||a=="bottom-center"||a=="bottom-right"?u="-100%":(a=="center-left"||a=="center-center"||a=="center-right")&&(u="-50%");const h=`translate(${l}, ${u}) translate(${o}, ${s})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,n.transform=h)}getOptions(){return this.options}}class T2{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return pe(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return pe(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var e;return(e=this.entries_[t])==null?void 0:e.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){pe(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}function ng(r,t,e,n){return n!==void 0?(n[0]=r,n[1]=t,n[2]=e,n):[r,t,e]}function ig(r,t,e){return r+"/"+t+"/"+e}function tu(r){return ig(r[0],r[1],r[2])}function Xnt(r){return r.split("/").map(Number)}function nW(r){return Znt(r[0],r[1],r[2])}function Znt(r,t,e){return(t<<r)+e}function jnt(r,t){const e=r[0],n=r[1],i=r[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const a=t.getFullTileRange(e);return a?a.containsXY(n,i):!0}class b2 extends T2{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),n=Xnt(t)[0];this.forEach(i=>{i.tileCoord[0]!==n&&(this.remove(tu(i.tileCoord)),i.release())})}}class hw{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function vf(r,t,e,n,i){return i!==void 0?(i.minX=r,i.maxX=t,i.minY=e,i.maxY=n,i):new hw(r,t,e,n)}const C0={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class M0 extends ca{constructor(t,e){super(t),this.feature=e}}function Knt(r,t){const e=[];for(let n=0;n<t.length;++n){const a=t[n].getGeometry();iW(r,a,e)}return e}function A0(r,t){return Ys(r[0],r[1],t[0],t[1])}function dd(r,t){const e=r.length;return t<0?r[t+e]:t>=e?r[t-e]:r[t]}function I0(r,t,e){let n,i;t<e?(n=t,i=e):(n=e,i=t);const a=Math.ceil(n),o=Math.floor(i);if(a>o){const l=gd(r,n),u=gd(r,i);return A0(l,u)}let s=0;if(n<a){const l=gd(r,n),u=dd(r,a);s+=A0(l,u)}if(o<i){const l=dd(r,o),u=gd(r,i);s+=A0(l,u)}for(let l=a;l<o-1;++l){const u=dd(r,l),h=dd(r,l+1);s+=A0(u,h)}return s}function iW(r,t,e){if(t instanceof ke){R0(r,t.getCoordinates(),!1,e);return}if(t instanceof Dn){const n=t.getCoordinates();for(let i=0,a=n.length;i<a;++i)R0(r,n[i],!1,e);return}if(t instanceof Kr){const n=t.getCoordinates();for(let i=0,a=n.length;i<a;++i)R0(r,n[i],!0,e);return}if(t instanceof yi){const n=t.getCoordinates();for(let i=0,a=n.length;i<a;++i){const o=n[i];for(let s=0,l=o.length;s<l;++s)R0(r,o[s],!0,e)}return}if(t instanceof zr){const n=t.getGeometries();for(let i=0;i<n.length;++i)iW(r,n[i],e);return}}const XT={index:-1,endIndex:NaN};function qnt(r,t,e,n){const i=r[0],a=r[1];let o=1/0,s=-1,l=NaN;for(let c=0;c<t.targets.length;++c){const f=t.targets[c],d=f.coordinates;let g=1/0,p;for(let v=0;v<d.length-1;++v){const m=d[v],y=d[v+1],_=aW(i,a,m,y);_.squaredDistance<g&&(g=_.squaredDistance,p=v+_.along)}g<o&&(o=g,f.ring&&t.targetIndex===c&&(f.endIndex>f.startIndex?p<f.startIndex&&(p+=d.length):f.endIndex<f.startIndex&&p>f.startIndex&&(p-=d.length)),l=p,s=c)}const u=t.targets[s];let h=u.ring;if(t.targetIndex===s&&h){const c=gd(u.coordinates,l),f=e.getPixelFromCoordinate(c);Q1(f,t.startPx)>n&&(h=!1)}if(h){const c=u.coordinates,f=c.length,d=u.startIndex,g=l;if(d<g){const p=I0(c,d,g);I0(c,d,g-f)<p&&(l-=f)}else{const p=I0(c,d,g);I0(c,d,g+f)<p&&(l+=f)}}return XT.index=s,XT.endIndex=l,XT}function R0(r,t,e,n){const i=r[0],a=r[1];for(let o=0,s=t.length-1;o<s;++o){const l=t[o],u=t[o+1],h=aW(i,a,l,u);if(h.squaredDistance===0){const c=o+h.along;n.push({coordinates:t,ring:e,startIndex:c,endIndex:c});return}}}const ZT={along:0,squaredDistance:0};function aW(r,t,e,n){const i=e[0],a=e[1],o=n[0],s=n[1],l=o-i,u=s-a;let h=0,c=i,f=a;return(l!==0||u!==0)&&(h=gr(((r-i)*l+(t-a)*u)/(l*l+u*u),0,1),c+=l*h,f+=u*h),ZT.along=h,ZT.squaredDistance=wy(Ys(r,t,c,f),10),ZT}function gd(r,t){const e=r.length;let n=Math.floor(t);const i=t-n;n>=e?n-=e:n<0&&(n+=e);let a=n+1;a>=e&&(a-=e);const o=r[n],s=o[0],l=o[1],u=r[a],h=u[0]-s,c=u[1]-l;return[s+h*i,l+c*i]}class oW extends ju{constructor(t){const e=t;e.stopDown||(e.stopDown=qc),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=eit(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:Dc,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let n=t.geometryFunction;if(!n){const i=this.mode_;if(i==="Circle")n=(a,o,s)=>{const l=o||new sw([NaN,NaN]),u=cr(a[0]),h=is(u,cr(a[a.length-1]));return l.setCenterAndRadius(u,Math.sqrt(h),this.geometryLayout_),l};else{let a;i==="Point"?a=rr:i==="LineString"?a=ke:i==="Polygon"&&(a=Kr),n=(o,s,l)=>(s?i==="Polygon"?o[0].length?s.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):s.setCoordinates([],this.geometryLayout_):s.setCoordinates(o,this.geometryLayout_):s=new a(o,this.geometryLayout_),s)}}this.geometryFunction_=n,this.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new Pa({source:new Na({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:Jnt(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:S2,this.freehandCondition_,t.freehand?this.freehandCondition_=dx:this.freehandCondition_=t.freehandCondition?t.freehandCondition:KU,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(zM.ACTIVE,this.updateState_)}setTrace(t){let e;t?t===!0?e=dx:e=t:e=Dnt,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===Bt.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(t);let e=t.type===De.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&t.type===De.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===De.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===De.POINTERDOWN?n=!1:e&&this.getPointerCount()<2?(n=t.type===De.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===De.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===De.DBLCLICK&&(n=!1),super.handleEvent(t)&&n}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Os(De.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active){this.deactivateTrace_();return}const e=this.getMap(),n=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),i=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),a=rn([n,i]),o=this.traceSource_.getFeaturesInExtent(a);if(o.length===0)return;const s=Knt(t.coordinate,o);s.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:s,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const n=t.startIndex<=t.endIndex,i=t.startIndex<=e;n===i?n&&e>t.endIndex||!n&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(n&&e<t.endIndex||!n&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let n=0;if(t<e){const i=Math.ceil(t);let a=Math.floor(e);a===e&&(a-=1),n=a-i+1}else{const i=Math.floor(t);let a=Math.ceil(e);a===e&&(a+=1),n=i-a+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(t,e,n){if(e===n)return;const i=[];if(e<n){const a=Math.ceil(e);let o=Math.floor(n);o===n&&(o-=1);for(let s=a;s<=o;++s)i.push(dd(t.coordinates,s))}else{const a=Math.floor(e);let o=Math.ceil(n);o===n&&(o+=1);for(let s=a;s>=o;--s)i.push(dd(t.coordinates,s))}i.length&&this.appendCoordinates(i)}updateTrace_(t){const e=this.traceState_;if(!e.active||e.targetIndex===-1&&Q1(e.startPx,t.pixel)<this.snapTolerance_)return;const n=qnt(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==n.index){if(e.targetIndex!==-1){const l=e.targets[e.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const s=e.targets[n.index];this.addTracedCoordinates_(s,s.startIndex,n.endIndex)}else{const s=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(s,n.endIndex)}e.targetIndex=n.index;const i=e.targets[e.targetIndex];i.endIndex=n.endIndex;const a=gd(i.coordinates,i.endIndex),o=this.getMap().getPixelFromCoordinate(a);t.coordinate=a,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const n=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(t.pixel,n)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,n=t.pixel,i=e[0]-n[0],a=e[1]-n[1],o=i*i+a*a;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(t.coordinate.slice());return}this.updateTrace_(t),this.modifyDrawing_(t.coordinate)}atFinish_(t,e){let n=!1;if(this.sketchFeature_){let i=!1,a=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")n=!0;else if(o==="Circle")n=this.sketchCoords_.length===2;else if(o==="LineString")i=!e&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const s=this.sketchCoords_;i=s[0].length>this.minPoints_,a=[s[0][0],s[0][s[0].length-2]],e?a=[s[0][0]]:a=[s[0][0],s[0][s[0].length-2]]}if(i){const s=this.getMap();for(let l=0,u=a.length;l<u;l++){const h=a[l],c=s.getPixelFromCoordinate(h),f=t[0]-c[0],d=t[1]-c[1],g=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(f*f+d*d)<=g,n){this.finishCoordinate_=h;break}}}}return n}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new Le(new rr(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new Le);const e=t.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new ke(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(t){const e=this.getMap().getView().getProjection(),n=Em(this.geometryLayout_);for(;t.length<n;)t.push(0);this.finishCoordinate_=t,this.mode_==="Point"?this.sketchCoords_=t.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Le(new ke(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new Le,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new M0(C0.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),n=this.sketchFeature_.getGeometry(),i=e.getView().getProjection(),a=Em(this.geometryLayout_);let o,s;for(;t.length<a;)t.push(0);this.mode_==="Point"?s=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],s=o[o.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,s=o[o.length-1]),s[0]=t[0],s[1]=t[1],this.geometryFunction_(this.sketchCoords_,n,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let i,a;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=t.slice(),a=this.sketchCoords_,a.length>=this.maxPoints_&&(this.freehand_?a.pop():i=!0),a.push(t.slice()),this.geometryFunction_(a,e,n)):o==="Polygon"&&(a=this.sketchCoords_[0],a.length>=this.maxPoints_&&(this.freehand_?a.pop():i=!0),a.push(t.slice()),i&&(this.finishCoordinate_=a[0]),this.geometryFunction_(this.sketchCoords_,e,n)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i=this.mode_;for(let a=0;a<t;++a){let o;if(i==="LineString"||i==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const s=this.finishCoordinate_.slice();o[o.length-1]=s,this.createOrUpdateSketchPoint_(s)}this.geometryFunction_(o,e,n),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(i==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const s=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}s.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,e,n)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const n=t.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,n,i)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,n,i),e=n.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new fa([e])):this.type_==="MultiLineString"?t.setGeometry(new Dn([e])):this.type_==="MultiPolygon"&&t.setGeometry(new yi([e])),this.dispatchEvent(new M0(C0.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new M0(C0.DRAWABORT,t))}appendCoordinates(t){const e=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(t[0]);let i;if(e==="LineString"||e==="Circle")i=this.sketchCoords_;else if(e==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&i.shift(),i.pop();for(let o=0;o<t.length;o++)this.addToDrawing_(t[o]);const a=t[t.length-1];this.sketchFeature_=this.addToDrawing_(a),this.modifyDrawing_(a)}extend(t){const n=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=n.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Le(new rr(i)),this.updateSketchFeatures_(),this.dispatchEvent(new M0(C0.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function Jnt(){const r=MU();return function(t,e){return r[t.getGeometry().getType()]}}function Qnt(r,t){return function(e,n,i){const a=cr(e[0]),o=cr(e[e.length-1]),s=Math.sqrt(is(a,o));n=n||hU(new sw(a),r);let l=t;{const u=o[0]-a[0],h=o[1]-a[1];l=Math.atan2(h,u)}return cU(n,a,s,l),n}}function tit(){return function(r,t,e){const n=rn([r[0],r[r.length-1]].map(function(a){return cr(a)})),i=[[qd(n),Ag(n),vu(n),za(n),qd(n)]];return t?t.setCoordinates(i):t=new Kr(i),t}}function eit(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}const GN=0,Ov=1,BN=[0,0,0,0],Od=[],jT={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class KT extends ca{constructor(t,e,n){super(t),this.features=e,this.mapBrowserEvent=n}}class E2 extends ju{constructor(t){super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:JU,this.defaultDeleteCondition_=function(n){return Rnt(n)&&Ont(n)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:dx,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new cx,this.pixelTolerance_=t.pixelTolerance!==void 0?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Pa({source:new Na({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:nit(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let e;if(t.features?e=t.features:t.source&&(this.source_=t.source,e=new Bi(this.source_.getFeatures()),this.source_.addEventListener($r.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener($r.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(mn.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(mn.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=t.snapToPointer===void 0?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(Bt.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Bi;const n=this.featuresBeingModified_.getArray();for(let i=0,a=e.length;i<a;++i){const o=e[i];for(let s=0,l=o.length;s<l;++s){const u=o[s].feature;u&&!n.includes(u)&&this.featuresBeingModified_.push(u)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new KT(jT.MODIFYSTART,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Bt.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,n=[];e.forEach(function(i){t===i.feature&&n.push(i)});for(let i=n.length-1;i>=0;--i){const a=n[i];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===a&&this.dragSegments_.splice(o,1);e.remove(a)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)}writeMultiPointGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i){const o=n[i],s={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}}writeLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length-1;i<a;++i){const o=n.slice(i,i+2),s={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(rn(o),s)}}writeMultiLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i){const o=n[i];for(let s=0,l=o.length-1;s<l;++s){const u=o.slice(s,s+2),h={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(rn(u),h)}}}writePolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i){const o=n[i];for(let s=0,l=o.length-1;s<l;++s){const u=o.slice(s,s+2),h={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(rn(u),h)}}}writeMultiPolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i){const o=n[i];for(let s=0,l=o.length;s<l;++s){const u=o[s];for(let h=0,c=u.length-1;h<c;++h){const f=u.slice(h,h+2),d={feature:t,geometry:e,depth:[s,i],index:h,segment:f};this.rBush_.insert(rn(f),d)}}}}writeCircleGeometry_(t,e){const n=e.getCenter(),i={feature:t,geometry:e,index:GN,segment:[n,n]},a={feature:t,geometry:e,index:Ov,segment:[n,n]},o=[i,a];i.featureSegments=o,a.featureSegments=o,this.rBush_.insert(Ld(n),i);let s=e;this.rBush_.insert(s.getExtent(),a)}writeGeometryCollectionGeometry_(t,e){const n=e.getGeometriesArray();for(let i=0;i<n.length;++i){const a=n[i],o=this.SEGMENT_WRITERS_[a.getType()];o(t,a)}}createOrUpdateVertexFeature_(t,e,n){let i=this.vertexFeature_;return i?i.getGeometry().setCoordinates(t):(i=new Le(new rr(t)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i)),i.set("features",e),i.set("geometries",n),i}handleEvent(t){if(!t.originalEvent)return!0;this.lastPointerEvent_=t;let e;return!t.map.getView().getInteracting()&&t.type==De.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(t.type!=De.SINGLECLICK||!this.ignoreNextSingleClick_?e=this.removePoint():e=!0),t.type==De.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],i=[];for(let a=0,o=this.dragSegments_.length;a<o;++a){const s=this.dragSegments_[a],l=s[0],u=l.feature;n.includes(u)||n.push(u);const h=l.geometry;i.includes(h)||i.push(h);const c=l.depth;let f;const d=l.segment,g=s[1];for(;e.length<h.getStride();)e.push(d[g][e.length]);switch(h.getType()){case"Point":f=e,d[0]=e,d[1]=e;break;case"MultiPoint":f=h.getCoordinates(),f[l.index]=e,d[0]=e,d[1]=e;break;case"LineString":f=h.getCoordinates(),f[l.index+g]=e,d[g]=e;break;case"MultiLineString":f=h.getCoordinates(),f[c[0]][l.index+g]=e,d[g]=e;break;case"Polygon":f=h.getCoordinates(),f[c[0]][l.index+g]=e,d[g]=e;break;case"MultiPolygon":f=h.getCoordinates(),f[c[1]][c[0]][l.index+g]=e,d[g]=e;break;case"Circle":if(d[0]=e,d[1]=e,l.index===GN)this.changingFeature_=!0,h.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,t.map.getView().getProjection();let p=Q1(cr(h.getCenter()),cr(e));h.setRadius(p),this.changingFeature_=!1}break}f&&this.setGeometryCoordinates_(h,f)}this.createOrUpdateVertexFeature_(e,n,i)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){t.map.getView().getProjection();const i=[],a=n.getGeometry().getCoordinates(),o=rn([a]),s=this.rBush_.getInExtent(o),l={};s.sort(rit);for(let u=0,h=s.length;u<h;++u){const c=s[u],f=c.segment;let d=zt(c.geometry);const g=c.depth;if(g&&(d+="-"+g.join("-")),l[d]||(l[d]=new Array(2)),c.geometry.getType()==="Circle"&&c.index===Ov){const p=VN(e,c);io(p,a)&&!l[d][0]&&(this.dragSegments_.push([c,0]),l[d][0]=c);continue}if(io(f[0],a)&&!l[d][0]){this.dragSegments_.push([c,0]),l[d][0]=c;continue}if(io(f[1],a)&&!l[d][1]){if(l[d][0]&&l[d][0].index===0){let p=c.geometry.getCoordinates();switch(c.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":p=p[g[1]];case"Polygon":if(c.index!==p[g[0]].length-2)continue;break}}this.dragSegments_.push([c,1]),l[d][1]=c;continue}zt(f)in this.vertexSegments_&&!l[d][0]&&!l[d][1]&&this.insertVertexCondition_(t)&&i.push(c)}i.length&&this.willModifyFeatures_(t,[i]);for(let u=i.length-1;u>=0;--u)this.insertVertex_(i[u],a)}return!!this.vertexFeature_}handleUpEvent(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const n=this.dragSegments_[e][0],i=n.geometry;if(i.getType()==="Circle"){const a=i.getCenter(),o=n.featureSegments[0],s=n.featureSegments[1];o.segment[0]=a,o.segment[1]=a,s.segment[0]=a,s.segment[1]=a,this.rBush_.update(Ld(a),o);let l=i;this.rBush_.update(l.getExtent(),s)}else this.rBush_.update(rn(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new KT(jT.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)}handlePointerAtPixel_(t,e,n){const i=n||e.getCoordinateFromPixel(t);e.getView().getProjection();const a=function(l,u){return zN(i,l)-zN(i,u)};let o,s;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?u=>u===this.hitDetection_:void 0;e.forEachFeatureAtPixel(t,(u,h,c)=>{c&&c.getType()==="Point"&&(c=new rr(Au(c.getCoordinates())));const f=c||u.getGeometry();if(u instanceof Le&&this.features_.getArray().includes(u)){s=f;const d=u.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:u,geometry:s,segment:[d,d]}]}return!0},{layerFilter:l})}if(!o){const l=na(Ld(i,BN)),u=e.getView().getResolution()*this.pixelTolerance_,h=Ty(il(l,u,BN));o=this.rBush_.getInExtent(h)}if(o&&o.length>0){const l=o.sort(a)[0],u=l.segment;let h=VN(i,l);const c=e.getPixelFromCoordinate(h);let f=Q1(t,c);if(s||f<=this.pixelTolerance_){const d={};if(d[zt(u)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-i[0],this.delta_[1]=h[1]-i[1]),l.geometry.getType()==="Circle"&&l.index===Ov)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry]);else{const g=e.getPixelFromCoordinate(u[0]),p=e.getPixelFromCoordinate(u[1]),v=is(c,g),m=is(c,p);f=Math.sqrt(Math.min(v,m)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(h=v>m?u[1]:u[0]),this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry]);const y={};y[zt(l.geometry)]=!0;for(let _=1,x=o.length;_<x;++_){const w=o[_].segment;if(io(u[0],w[0])&&io(u[1],w[1])||io(u[0],w[1])&&io(u[1],w[0])){const S=zt(o[_].geometry);S in y||(y[S]=!0,d[zt(w)]=!0)}else break}}this.vertexSegments_=d;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const n=t.segment,i=t.feature,a=t.geometry,o=t.depth,s=t.index;let l;for(;e.length<a.getStride();)e.push(0);switch(a.getType()){case"MultiLineString":l=a.getCoordinates(),l[o[0]].splice(s+1,0,e);break;case"Polygon":l=a.getCoordinates(),l[o[0]].splice(s+1,0,e);break;case"MultiPolygon":l=a.getCoordinates(),l[o[1]][o[0]].splice(s+1,0,e);break;case"LineString":l=a.getCoordinates(),l.splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(a,l);const u=this.rBush_;u.remove(t),this.updateSegmentIndices_(a,s,o,1);const h={segment:[n[0],e],feature:i,geometry:a,depth:o,index:s};u.insert(rn(h.segment),h),this.dragSegments_.push([h,1]);const c={segment:[e,n[1]],feature:i,geometry:a,depth:o,index:s+1};u.insert(rn(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=De.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);const e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new KT(jT.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){const t=this.dragSegments_,e={};let n=!1,i,a,o,s,l,u,h,c,f,d,g;for(l=t.length-1;l>=0;--l)o=t[l],d=o[0],g=zt(d.feature),d.depth&&(g+="-"+d.depth.join("-")),g in e||(e[g]={}),o[1]===0?(e[g].right=d,e[g].index=d.index):o[1]==1&&(e[g].left=d,e[g].index=d.index+1);for(g in e){switch(f=e[g].right,h=e[g].left,u=e[g].index,c=u-1,h!==void 0?d=h:d=f,c<0&&(c=0),s=d.geometry,a=s.getCoordinates(),i=a,n=!1,s.getType()){case"MultiLineString":a[d.depth[0]].length>2&&(a[d.depth[0]].splice(u,1),n=!0);break;case"LineString":a.length>2&&(a.splice(u,1),n=!0);break;case"MultiPolygon":i=i[d.depth[1]];case"Polygon":i=i[d.depth[0]],i.length>4&&(u==i.length-1&&(u=0),i.splice(u,1),n=!0,u===0&&(i.pop(),i.push(i[0]),c=i.length-1));break}if(n){this.setGeometryCoordinates_(s,a);const p=[];if(h!==void 0&&(this.rBush_.remove(h),p.push(h.segment[0])),f!==void 0&&(this.rBush_.remove(f),p.push(f.segment[1])),h!==void 0&&f!==void 0){const v={depth:d.depth,feature:d.feature,geometry:d.geometry,index:c,segment:p};this.rBush_.insert(rn(v.segment),v)}this.updateSegmentIndices_(s,u,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return n}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),function(a){a.geometry===t&&(n===void 0||a.depth===void 0||vs(a.depth,n))&&a.index>e&&(a.index+=i)})}}function rit(r,t){return r.index-t.index}function zN(r,t,e){const n=t.geometry;if(n.getType()==="Circle"){let a=n;if(t.index===Ov){const o=is(a.getCenter(),cr(r)),s=Math.sqrt(o)-a.getRadius();return s*s}}const i=cr(r);return Od[0]=cr(t.segment[0]),Od[1]=cr(t.segment[1]),ztt(i,Od)}function VN(r,t,e){const n=t.geometry;if(n.getType()==="Circle"&&t.index===Ov)return Au(n.getClosestPoint(cr(r)));const i=cr(r);return Od[0]=cr(t.segment[0]),Od[1]=cr(t.segment[1]),Au(BR(i,Od))}function nit(){const r=MU();return function(t,e){return r.Point}}const iit={SNAP:"snap"};class ait extends ca{constructor(t,e){super(t),this.vertex=e.vertex,this.vertexPixel=e.vertexPixel,this.feature=e.feature,this.segment=e.segment}}function UN(r){return r.feature?r.feature:r.element?r.element:null}const qT=[];class oit extends ju{constructor(t){t=t||{};const e=t;e.handleDownEvent||(e.handleDownEvent=Dc),e.stopDown||(e.stopDown=qc),super(e),this.on,this.once,this.un,this.source_=t.source?t.source:null,this.vertex_=t.vertex!==void 0?t.vertex:!0,this.edge_=t.edge!==void 0?t.edge:!0,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=t.pixelTolerance!==void 0?t.pixelTolerance:10,this.rBush_=new cx,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(t,e){e=e!==void 0?e:!0;const n=zt(t),i=t.getGeometry();if(i){const a=this.GEOMETRY_SEGMENTERS_[i.getType()];if(a){this.indexedFeaturesExtents_[n]=i.getExtent(qn());const o=[];if(a(o,i),o.length===1)this.rBush_.insert(rn(o[0]),{feature:t,segment:o[0]});else if(o.length>1){const s=o.map(u=>rn(u)),l=o.map(u=>({feature:t,segment:u}));this.rBush_.load(s,l)}}}e&&(this.featureChangeListenerKeys_[n]=se(t,Bt.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t}handleEvent(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel,this.dispatchEvent(new ait(iit.SNAP,{vertex:t.coordinate,vertexPixel:t.pixel,feature:e.feature,segment:e.segment}))),super.handleEvent(t)}handleFeatureAdd_(t){const e=UN(t);e&&this.addFeature(e)}handleFeatureRemove_(t){const e=UN(t);e&&this.removeFeature(e)}handleFeatureChange_(t){const e=t.target;if(this.handlingDownUpSequence){const n=zt(e);n in this.pendingFeatures_||(this.pendingFeatures_[n]=e)}else this.updateFeature_(e)}handleUpEvent(t){const e=Object.values(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(t,e){const n=e!==void 0?e:!0,i=zt(t),a=this.indexedFeaturesExtents_[i];if(a){const o=this.rBush_,s=[];o.forEachInExtent(a,function(l){t===l.feature&&s.push(l)});for(let l=s.length-1;l>=0;--l)o.remove(s[l])}n&&(Ve(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])}setMap(t){const e=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();e&&(n.forEach(Ve),n.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(Ve),this.featureChangeListenerKeys_={}),super.setMap(t),t&&(this.features_?n.push(se(this.features_,mn.ADD,this.handleFeatureAdd_,this),se(this.features_,mn.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(se(this.source_,$r.ADDFEATURE,this.handleFeatureAdd_,this),se(this.source_,$r.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(a=>this.addFeature(a)))}snapTo(t,e,n){n.getView().getProjection();const i=cr(e),a=Ty(il(rn([i]),n.getView().getResolution()*this.pixelTolerance_)),o=this.rBush_.getInExtent(a),s=o.length;if(s===0)return null;let l,u=1/0,h,c=null;const f=this.pixelTolerance_*this.pixelTolerance_,d=()=>{if(l){const g=n.getPixelFromCoordinate(l);if(is(t,g)<=f)return{vertex:l,vertexPixel:[Math.round(g[0]),Math.round(g[1])],feature:h,segment:c}}return null};if(this.vertex_){for(let p=0;p<s;++p){const v=o[p];v.feature.getGeometry().getType()!=="Circle"&&v.segment.forEach(m=>{const y=cr(m),_=is(i,y);_<u&&(l=m,u=_,h=v.feature)})}const g=d();if(g)return g}if(this.edge_){for(let p=0;p<s;++p){let v=null;const m=o[p];if(m.feature.getGeometry().getType()==="Circle"){let y=m.feature.getGeometry();v=Btt(i,y)}else{const[y,_]=m.segment;_&&(qT[0]=cr(y),qT[1]=cr(_),v=BR(i,qT))}if(v){const y=is(i,v);y<u&&(l=Au(v),c=m.feature.getGeometry().getType()==="Circle"?null:m.segment,u=y,h=m.feature)}}const g=d();if(g)return g}return null}updateFeature_(t){this.removeFeature(t,!1),this.addFeature(t,!1)}segmentCircleGeometry_(t,e){this.getMap().getView().getProjection();const a=hU(e).getCoordinates()[0];for(let o=0,s=a.length-1;o<s;++o)t.push(a.slice(o,o+2))}segmentGeometryCollectionGeometry_(t,e){const n=e.getGeometriesArray();for(let i=0;i<n.length;++i){const a=this.GEOMETRY_SEGMENTERS_[n[i].getType()];a&&a(t,n[i])}}segmentLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length-1;i<a;++i)t.push(n.slice(i,i+2))}segmentMultiLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i){const o=n[i];for(let s=0,l=o.length-1;s<l;++s)t.push(o.slice(s,s+2))}}segmentMultiPointGeometry_(t,e){e.getCoordinates().forEach(n=>{t.push([n])})}segmentMultiPolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i){const o=n[i];for(let s=0,l=o.length;s<l;++s){const u=o[s];for(let h=0,c=u.length-1;h<c;++h)t.push(u.slice(h,h+2))}}}segmentPointGeometry_(t,e){t.push([e.getCoordinates()])}segmentPolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,a=n.length;i<a;++i){const o=n[i];for(let s=0,l=o.length-1;s<l;++s)t.push(o.slice(s,s+2))}}}const JT=.75,P0=.1;class sit extends uw{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=t.rotateWithView!==void 0?t.rotateWithView:!1,this.viewExtent_=void 0;const e=t.className!==void 0?t.className:"ol-overviewmap",n=t.tipLabel!==void 0?t.tipLabel:"Overview map",i=t.collapseLabel!==void 0?t.collapseLabel:"";typeof i=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=i):this.collapseLabel_=i;const a=t.label!==void 0?t.label:"";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a):this.label_=a;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,s=document.createElement("button");s.setAttribute("type","button"),s.title=n,s.appendChild(o),s.addEventListener(Bt.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const l=new w2({view:t.view,controls:new Bi,interactions:new Bi});this.ovmap_=l,t.layers&&t.layers.forEach(function(y){l.addLayer(y)});const u=document.createElement("div");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new rW({position:[0,0],positioning:"center-center",element:u}),this.ovmap_.addOverlay(this.boxOverlay_);const h=e+" "+Cy+" "+nw+(this.collapsed_&&this.collapsible_?" "+ax:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.ovmapDiv_),c.appendChild(s);const f=this,d=this.boxOverlay_,g=this.boxOverlay_.getElement(),p=function(y){return{clientX:y.clientX,clientY:y.clientY}},v=function(y){const _=p(y),x=l.getEventCoordinate(_);d.setPosition(x)},m=function(y){const _=l.getEventCoordinateInternal(y);f.getMap().getView().setCenterInternal(_),window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",m)};this.ovmapDiv_.addEventListener("pointerdown",function(){event.target===g&&window.addEventListener("pointermove",v),window.addEventListener("pointerup",m)})}setMap(t){const e=this.getMap();if(t!==e){if(e){const n=e.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(se(t,Lc.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const n=t.getView();n&&this.bindView_(n),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===en.VIEW){const e=t.oldValue;e&&this.unbindView_(e);const n=this.getMap().getView();this.bindView_(n)}else!this.ovmap_.isRendered()&&(t.key===en.TARGET||t.key===en.SIZE)&&this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new ao({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(ji.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),t.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(t){t.removeChangeListener(ji.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),a=t.getView().calculateExtentInternal(n);if(this.viewExtent_&&Mu(a,this.viewExtent_))return;this.viewExtent_=a;const o=e.getSize(),l=e.getView().calculateExtentInternal(o),u=e.getPixelFromCoordinateInternal(za(a)),h=e.getPixelFromCoordinateInternal(Ag(a)),c=Math.abs(u[0]-h[0]),f=Math.abs(u[1]-h[1]),d=o[0],g=o[1];c<d*P0||f<g*P0||c>d*JT||f>g*JT?this.resetExtent_():Oa(l,a)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,n=t.getSize(),a=t.getView().calculateExtentInternal(n),o=e.getView(),s=Math.log(JT/P0)/Math.LN2,l=1/(Math.pow(2,s/2)*P0);Ett(a,l),o.fitInternal(DM(a))}recenter_(){const t=this.getMap(),e=this.ovmap_,n=t.getView();e.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView(),a=e.getView(),o=this.rotateWithView_?0:-i.getRotation(),s=this.boxOverlay_,l=this.boxOverlay_.getElement(),u=i.getCenter(),h=i.getResolution(),c=a.getResolution(),f=n[0]*h/c,d=n[1]*h/c;if(s.setPosition(u),l){l.style.width=f+"px",l.style.height=d+"px";const g="rotate("+o+"rad)";l.style.transform=g}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Sm(this.ovmap_,Vo.POSTRENDER,t=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(ax),this.collapsed_?nx(this.collapseLabel_,this.label_):nx(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered()){this.viewExtent_=void 0,t.render();return}t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){!this.collapsible_||this.collapsed_===t||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}}const L0=6378137,WN=85.0511287798,D0=Math.PI/180,Xn=Math.PI,HN=6378245,$N=.006693421622965943,YN=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],O0=[75,60,45,30,15,0],lit=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],XN=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],gx=Xn*3e3/180,Lu=r=>(e,n,i)=>{const a=e.length,o=i||2;let s;n?s=n:o!==2?s=e.slice():s=new Array(a);for(let l=0;l<a;l+=o)r(e,s,l);return s},ZN=(r,t)=>r<72.004||r>137.8347||t<.8293||t>55.8271,jN=(r,t)=>{let e=uit(r-105,t-35),n=hit(r-105,t-35);const i=t/180*Xn;let a=Math.sin(i);a=1-$N*a*a;const o=Math.sqrt(a);return e=e*180/(HN*(1-$N)/(a*o)*Xn),n=n*180/(HN/o*Math.cos(i)*Xn),[n,e]},uit=(r,t)=>{let e=-100+2*r+3*t+.2*t*t+.1*r*t+.2*Math.sqrt(Math.abs(r));return e+=(20*Math.sin(6*r*Xn)+20*Math.sin(2*r*Xn))*2/3,e+=(20*Math.sin(t*Xn)+40*Math.sin(t/3*Xn))*2/3,e+=(160*Math.sin(t/12*Xn)+320*Math.sin(t*Xn/30))*2/3,e},hit=(r,t)=>{let e=300+r+2*t+.1*r*r+.1*r*t+.1*Math.sqrt(Math.abs(r));return e+=(20*Math.sin(6*r*Xn)+20*Math.sin(2*r*Xn))*2/3,e+=(20*Math.sin(r*Xn)+40*Math.sin(r/3*Xn))*2/3,e+=(150*Math.sin(r/12*Xn)+300*Math.sin(r/30*Xn))*2/3,e},cit=(r,t,e)=>(r=Math.max(r,t),r=Math.min(r,e),r),fit=(r,t,e)=>{const n=e-t;for(;r>e;)r-=n;for(;r<t;)r+=n;return r},KN=(r,t,e,n)=>{const i=r[e],a=r[e+1],o=n[0]+n[1]*Math.abs(i),s=Math.abs(a)/n[9],l=n[2]+n[3]*s+n[4]*s*s+n[5]*s*s*s+n[6]*s*s*s*s+n[7]*s*s*s*s*s+n[8]*s*s*s*s*s*s;t[e]=o*(i<0?-1:1),t[e+1]=l*(a<0?-1:1)},dit=(r,t,e)=>{const n=r[e]-.0065,i=r[e+1]-.006,a=Math.sqrt(n*n+i*i)-2e-5*Math.sin(i*gx),o=Math.atan2(i,n)-3e-6*Math.cos(n*gx);return t[e]=a*Math.cos(o),t[e+1]=a*Math.sin(o),t},git=(r,t,e)=>{const n=r[e],i=r[e+1],a=Math.sqrt(n*n+i*i)+2e-5*Math.sin(i*gx),o=Math.atan2(i,n)+3e-6*Math.cos(n*gx);return t[e]=a*Math.cos(o)+.0065,t[e+1]=a*Math.sin(o)+.006,t},us={forward:Lu((r,t,e)=>{const n=Math.max(Math.min(WN,r[e+1]),-WN),i=Math.sin(n*D0);t[e]=L0*r[e]*D0,t[e+1]=L0*Math.log((1+i)/(1-i))/2}),inverse:Lu((r,t,e)=>{t[e]=r[e]/L0/D0,t[e+1]=(2*Math.atan(Math.exp(r[e+1]/L0))-Math.PI/2)/D0})},Du={toWGS84:Lu((r,t,e)=>{let n=r[e],i=r[e+1];if(!ZN(n,i)){const a=jN(n,i);n=n-a[0],i=i-a[1]}t[e]=n,t[e+1]=i}),fromWGS84:Lu((r,t,e)=>{let n=r[e],i=r[e+1];if(!ZN(n,i)){const a=jN(n,i);n=n+a[0],i=i+a[1]}t[e]=n,t[e+1]=i})},Pg={forward:Lu((r,t,e)=>{const n=fit(r[e],-180,180),i=cit(r[e+1],-74,74);let a=null,o;for(o=0;o<O0.length;++o)if(i>=O0[o]){a=XN[o];break}if(a===null){for(o=O0.length-1;o>=0;--o)if(i<=-O0[o]){a=XN[o];break}}t[e]=n,t[e+1]=i,KN(t,t,e,a)}),inverse:Lu((r,t,e)=>{const n=Math.abs(r[e+1]);let i=null;for(let a=0;a<YN.length;a++)if(n>=YN[a]){i=lit[a];break}KN(r,t,e,i)})},Lg={toWGS84:(r,t,e)=>{const n=Lu(dit)(r,t,e);return Du.toWGS84(n,n,e)},fromWGS84:(r,t,e)=>{const n=Du.fromWGS84(r,t,e);return Lu(git)(n,n,e)}},qN=(r,t,e)=>{let n=us.inverse(r,t,e);return n=Lg.fromWGS84(n,n,e),Pg.forward(n,n,e)},JN=(r,t,e)=>{let n=Pg.inverse(r,t,e);return n=Lg.toWGS84(n,n,e),us.forward(n,n,e)},pit=(r,t,e)=>{const n=Pg.inverse(r,t,e);return Lg.toWGS84(n,n,e)},vit=(r,t,e)=>{const n=Lg.fromWGS84(r,t,e);return Pg.forward(n,n,e)},QN=(r,t,e)=>{let n=Pg.inverse(r,t,e);return n=Lg.toWGS84(n,n,e),n=Du.fromWGS84(n,n,e),us.forward(n,n,e)},tF=(r,t,e)=>{let n=us.inverse(r,t,e);return n=Du.fromWGS84(n,n,e),us.forward(n,n,e)},eF=(r,t,e)=>{let n=us.inverse(r,t,e);return n=Du.toWGS84(n,n,e),us.forward(n,n,e)},mit=(r,t,e)=>{const n=us.inverse(r,t,e);return Du.toWGS84(n,n,e)},yit=(r,t,e)=>{const n=Du.fromWGS84(r,t,e);return us.forward(n,n,e)},rF=(r,t,e)=>{let n=us.inverse(r,t,e);return n=Du.toWGS84(n,n,e),n=Lg.fromWGS84(n,n,e),Pg.forward(n,n,e)};function _it(r){r("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),r("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),r("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),r.WGS84=r["EPSG:4326"],r["EPSG:3785"]=r["EPSG:3857"],r.GOOGLE=r["EPSG:3857"],r["EPSG:900913"]=r["EPSG:3857"],r["EPSG:102113"]=r["EPSG:3857"]}var Nc=1,Fc=2,Nd=3,xit=4,UM=5,nF=6378137,Sit=6356752314e-3,iF=.0066943799901413165,Nv=484813681109536e-20,vt=Math.PI/2,wit=.16666666666666666,Tit=.04722222222222222,bit=.022156084656084655,Ct=1e-10,Mn=.017453292519943295,nu=57.29577951308232,tr=Math.PI/4,Nm=Math.PI*2,Fr=3.14159265359,Hi={};Hi.greenwich=0;Hi.lisbon=-9.131906111111;Hi.paris=2.337229166667;Hi.bogota=-74.080916666667;Hi.madrid=-3.687938888889;Hi.rome=12.452333333333;Hi.bern=7.439583333333;Hi.jakarta=106.807719444444;Hi.ferro=-17.666666666667;Hi.brussels=4.367975;Hi.stockholm=18.058277777778;Hi.athens=23.7163375;Hi.oslo=10.722916666667;const Eit={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var aF=/[\s_\-\/\(\)]/g;function Ou(r,t){if(r[t])return r[t];for(var e=Object.keys(r),n=t.toLowerCase().replace(aF,""),i=-1,a,o;++i<e.length;)if(a=e[i],o=a.toLowerCase().replace(aF,""),o===n)return r[a]}function WM(r){var t={},e=r.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,l){var u=l.split("=");return u.push(!0),s[u[0].toLowerCase()]=u[1],s},{}),n,i,a,o={proj:"projName",datum:"datumCode",rf:function(s){t.rf=parseFloat(s)},lat_0:function(s){t.lat0=s*Mn},lat_1:function(s){t.lat1=s*Mn},lat_2:function(s){t.lat2=s*Mn},lat_ts:function(s){t.lat_ts=s*Mn},lon_0:function(s){t.long0=s*Mn},lon_1:function(s){t.long1=s*Mn},lon_2:function(s){t.long2=s*Mn},alpha:function(s){t.alpha=parseFloat(s)*Mn},gamma:function(s){t.rectified_grid_angle=parseFloat(s)},lonc:function(s){t.longc=s*Mn},x_0:function(s){t.x0=parseFloat(s)},y_0:function(s){t.y0=parseFloat(s)},k_0:function(s){t.k0=parseFloat(s)},k:function(s){t.k0=parseFloat(s)},a:function(s){t.a=parseFloat(s)},b:function(s){t.b=parseFloat(s)},r:function(s){t.a=t.b=parseFloat(s)},r_a:function(){t.R_A=!0},zone:function(s){t.zone=parseInt(s,10)},south:function(){t.utmSouth=!0},towgs84:function(s){t.datum_params=s.split(",").map(function(l){return parseFloat(l)})},to_meter:function(s){t.to_meter=parseFloat(s)},units:function(s){t.units=s;var l=Ou(Eit,s);l&&(t.to_meter=l.to_meter)},from_greenwich:function(s){t.from_greenwich=s*Mn},pm:function(s){var l=Ou(Hi,s);t.from_greenwich=(l||parseFloat(s))*Mn},nadgrids:function(s){s==="@null"?t.datumCode="none":t.nadgrids=s},axis:function(s){var l="ewnsud";s.length===3&&l.indexOf(s.substr(0,1))!==-1&&l.indexOf(s.substr(1,1))!==-1&&l.indexOf(s.substr(2,1))!==-1&&(t.axis=s)},approx:function(){t.approx=!0}};for(n in e)i=e[n],n in o?(a=o[n],typeof a=="function"?a(i):t[a]=i):t[n]=i;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var Fm=1,sW=2,lW=3,px=4,uW=5,C2=-1,Cit=/\s/,Mit=/[A-Za-z]/,Ait=/[A-Za-z84_]/,cw=/[,\]]/,hW=/[\d\.E\-\+]/;function ml(r){if(typeof r!="string")throw new Error("not a string");this.text=r.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Fm}ml.prototype.readCharicter=function(){var r=this.text[this.place++];if(this.state!==px)for(;Cit.test(r);){if(this.place>=this.text.length)return;r=this.text[this.place++]}switch(this.state){case Fm:return this.neutral(r);case sW:return this.keyword(r);case px:return this.quoted(r);case uW:return this.afterquote(r);case lW:return this.number(r);case C2:return}};ml.prototype.afterquote=function(r){if(r==='"'){this.word+='"',this.state=px;return}if(cw.test(r)){this.word=this.word.trim(),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in afterquote yet, index '+this.place)};ml.prototype.afterItem=function(r){if(r===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Fm;return}if(r==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Fm,this.currentObject=this.stack.pop(),this.currentObject||(this.state=C2);return}};ml.prototype.number=function(r){if(hW.test(r)){this.word+=r;return}if(cw.test(r)){this.word=parseFloat(this.word),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in number yet, index '+this.place)};ml.prototype.quoted=function(r){if(r==='"'){this.state=uW;return}this.word+=r};ml.prototype.keyword=function(r){if(Ait.test(r)){this.word+=r;return}if(r==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Fm;return}if(cw.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in keyword yet, index '+this.place)};ml.prototype.neutral=function(r){if(Mit.test(r)){this.word=r,this.state=sW;return}if(r==='"'){this.word="",this.state=px;return}if(hW.test(r)){this.word=r,this.state=lW;return}if(cw.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in neutral yet, index '+this.place)};ml.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===C2)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Iit(r){var t=new ml(r);return t.output()}function oF(r,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var n=t?{}:r,i=e.reduce(function(a,o){return pd(o,a),a},n);t&&(r[t]=i)}function pd(r,t){if(!Array.isArray(r)){t[r]=!0;return}var e=r.shift();if(e==="PARAMETER"&&(e=r.shift()),r.length===1){if(Array.isArray(r[0])){t[e]={},pd(r[0],t[e]);return}t[e]=r[0];return}if(!r.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=r;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(r);return}Array.isArray(e)||(t[e]={});var n;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:r[0].toLowerCase(),convert:r[1]},r.length===3&&pd(r[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:r[0],a:r[1],rf:r[2]},r.length===4&&pd(r[3],t[e]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":r[0]=["name",r[0]],oF(t,e,r);return;default:for(n=-1;++n<r.length;)if(!Array.isArray(r[n]))return pd(r,t[e]);return oF(t,e,r)}}var Rit=.017453292519943295;function Pit(r,t){var e=t[0],n=t[1];!(e in r)&&n in r&&(r[e]=r[n],t.length===3&&(r[e]=t[2](r[e])))}function Co(r){return r*Rit}function Lit(r){if(r.type==="GEOGCS"?r.projName="longlat":r.type==="LOCAL_CS"?(r.projName="identity",r.local=!0):typeof r.PROJECTION=="object"?r.projName=Object.keys(r.PROJECTION)[0]:r.projName=r.PROJECTION,r.AXIS){for(var t="",e=0,n=r.AXIS.length;e<n;++e){var i=[r.AXIS[e][0].toLowerCase(),r.AXIS[e][1].toLowerCase()];i[0].indexOf("north")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="north"?t+="n":i[0].indexOf("south")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="south"?t+="s":i[0].indexOf("east")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="east"?t+="e":(i[0].indexOf("west")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(r.axis=t)}r.UNIT&&(r.units=r.UNIT.name.toLowerCase(),r.units==="metre"&&(r.units="meter"),r.UNIT.convert&&(r.type==="GEOGCS"?r.DATUM&&r.DATUM.SPHEROID&&(r.to_meter=r.UNIT.convert*r.DATUM.SPHEROID.a):r.to_meter=r.UNIT.convert));var a=r.GEOGCS;r.type==="GEOGCS"&&(a=r),a&&(a.DATUM?r.datumCode=a.DATUM.name.toLowerCase():r.datumCode=a.name.toLowerCase(),r.datumCode.slice(0,2)==="d_"&&(r.datumCode=r.datumCode.slice(2)),(r.datumCode==="new_zealand_geodetic_datum_1949"||r.datumCode==="new_zealand_1949")&&(r.datumCode="nzgd49"),(r.datumCode==="wgs_1984"||r.datumCode==="world_geodetic_system_1984")&&(r.PROJECTION==="Mercator_Auxiliary_Sphere"&&(r.sphere=!0),r.datumCode="wgs84"),r.datumCode.slice(-6)==="_ferro"&&(r.datumCode=r.datumCode.slice(0,-6)),r.datumCode.slice(-8)==="_jakarta"&&(r.datumCode=r.datumCode.slice(0,-8)),~r.datumCode.indexOf("belge")&&(r.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(r.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),r.ellps.toLowerCase().slice(0,13)==="international"&&(r.ellps="intl"),r.a=a.DATUM.SPHEROID.a,r.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(r.datum_params=a.DATUM.TOWGS84),~r.datumCode.indexOf("osgb_1936")&&(r.datumCode="osgb36"),~r.datumCode.indexOf("osni_1952")&&(r.datumCode="osni52"),(~r.datumCode.indexOf("tm65")||~r.datumCode.indexOf("geodetic_datum_of_1965"))&&(r.datumCode="ire65"),r.datumCode==="ch1903+"&&(r.datumCode="ch1903"),~r.datumCode.indexOf("israel")&&(r.datumCode="isr93")),r.b&&!isFinite(r.b)&&(r.b=r.a);function o(u){var h=r.to_meter||1;return u*h}var s=function(u){return Pit(r,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Co],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Co],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Co],["lat0","latitude_of_origin",Co],["lat0","standard_parallel_1",Co],["lat1","standard_parallel_1",Co],["lat2","standard_parallel_2",Co],["azimuth","Azimuth"],["alpha","azimuth",Co],["srsCode","name"]];l.forEach(s),!r.long0&&r.longc&&(r.projName==="Albers_Conic_Equal_Area"||r.projName==="Lambert_Azimuthal_Equal_Area")&&(r.long0=r.longc),!r.lat_ts&&r.lat1&&(r.projName==="Stereographic_South_Pole"||r.projName==="Polar Stereographic (variant B)")?(r.lat0=Co(r.lat1>0?90:-90),r.lat_ts=r.lat1):!r.lat_ts&&r.lat0&&r.projName==="Polar_Stereographic"&&(r.lat_ts=r.lat0,r.lat0=Co(r.lat0>0?90:-90))}function cW(r){var t=Iit(r),e=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",e]);var i={};return pd(t,i),Lit(i),i}function oi(r){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?oi[r]=WM(arguments[1]):oi[r]=cW(arguments[1]):oi[r]=e}else if(arguments.length===1){if(Array.isArray(r))return r.map(function(n){Array.isArray(n)?oi.apply(t,n):oi(n)});if(typeof r=="string"){if(r in oi)return oi[r]}else"EPSG"in r?oi["EPSG:"+r.EPSG]=r:"ESRI"in r?oi["ESRI:"+r.ESRI]=r:"IAU2000"in r&&(oi["IAU2000:"+r.IAU2000]=r);return}}_it(oi);function Dit(r){return typeof r=="string"}function Oit(r){return r in oi}var Nit=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Fit(r){return Nit.some(function(t){return r.indexOf(t)>-1})}var kit=["3857","900913","3785","102113"];function Git(r){var t=Ou(r,"authority");if(t){var e=Ou(t,"epsg");return e&&kit.indexOf(e)>-1}}function Bit(r){var t=Ou(r,"extension");if(t)return Ou(t,"proj4")}function zit(r){return r[0]==="+"}function Vit(r){if(Dit(r)){if(Oit(r))return oi[r];if(Fit(r)){var t=cW(r);if(Git(t))return oi["EPSG:3857"];var e=Bit(t);return e?WM(e):t}if(zit(r))return WM(r)}else return r}function sF(r,t){r=r||{};var e,n;if(!t)return r;for(n in t)e=t[n],e!==void 0&&(r[n]=e);return r}function hs(r,t,e){var n=r*t;return e/Math.sqrt(1-n*n)}function Py(r){return r<0?-1:1}function Mt(r){return Math.abs(r)<=Fr?r:r-Py(r)*Nm}function ho(r,t,e){var n=r*e,i=.5*r;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(vt-t))/n}function km(r,t){for(var e=.5*r,n,i,a=vt-2*Math.atan(t),o=0;o<=15;o++)if(n=r*Math.sin(a),i=vt-2*Math.atan(t*Math.pow((1-n)/(1+n),e))-a,a+=i,Math.abs(i)<=1e-10)return a;return-9999}function Uit(){var r=this.b/this.a;this.es=1-r*r,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=hs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Wit(r){var t=r.x,e=r.y;if(e*nu>90&&e*nu<-90&&t*nu>180&&t*nu<-180)return null;var n,i;if(Math.abs(Math.abs(e)-vt)<=Ct)return null;if(this.sphere)n=this.x0+this.a*this.k0*Mt(t-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(tr+.5*e));else{var a=Math.sin(e),o=ho(this.e,e,a);n=this.x0+this.a*this.k0*Mt(t-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return r.x=n,r.y=i,r}function Hit(r){var t=r.x-this.x0,e=r.y-this.y0,n,i;if(this.sphere)i=vt-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var a=Math.exp(-e/(this.a*this.k0));if(i=km(this.e,a),i===-9999)return null}return n=Mt(this.long0+t/(this.a*this.k0)),r.x=n,r.y=i,r}var $it=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Yit={init:Uit,forward:Wit,inverse:Hit,names:$it};function Xit(){}function lF(r){return r}var Zit=["longlat","identity"];const jit={init:Xit,forward:lF,inverse:lF,names:Zit};var Kit=[Yit,jit],u1={},vx=[];function fW(r,t){var e=vx.length;return r.names?(vx[e]=r,r.names.forEach(function(n){u1[n.toLowerCase()]=e}),this):!0}function qit(r){if(!r)return!1;var t=r.toLowerCase();if(typeof u1[t]<"u"&&vx[u1[t]])return vx[u1[t]]}function Jit(){Kit.forEach(fW)}const Qit={start:Jit,add:fW,get:qit};var ce={};ce.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};ce.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};ce.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};ce.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};ce.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};ce.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};ce.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};ce.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};ce.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};ce.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};ce.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};ce.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};ce.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};ce.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};ce.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};ce.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};ce.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};ce.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};ce.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};ce.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};ce.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};ce.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};ce.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};ce.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};ce.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};ce.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};ce.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};ce.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};ce.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};ce.hough={a:6378270,rf:297,ellipseName:"Hough"};ce.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};ce.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};ce.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};ce.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};ce.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};ce.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};ce.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};ce.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};ce.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};ce.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};ce.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};ce.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var tat=ce.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ce.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eat(r,t,e,n){var i=r*r,a=t*t,o=(i-a)/i,s=0;n?(r*=1-o*(wit+o*(Tit+o*bit)),i=r*r,o=0):s=Math.sqrt(o);var l=(i-a)/a;return{es:o,e:s,ep2:l}}function rat(r,t,e,n,i){if(!r){var a=Ou(ce,n);a||(a=tat),r=a.a,t=a.b,e=a.rf}return e&&!t&&(t=(1-1/e)*r),(e===0||Math.abs(r-t)<Ct)&&(i=!0,t=r),{a:r,b:t,rf:e,sphere:i}}var dn={};dn.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};dn.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};dn.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};dn.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};dn.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};dn.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};dn.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};dn.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};dn.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};dn.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};dn.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};dn.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};dn.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};dn.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};dn.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};dn.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};dn.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};dn.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function nat(r,t,e,n,i,a,o){var s={};return r===void 0||r==="none"?s.datum_type=UM:s.datum_type=xit,t&&(s.datum_params=t.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=Nc),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=Fc,s.datum_params[3]*=Nv,s.datum_params[4]*=Nv,s.datum_params[5]*=Nv,s.datum_params[6]=s.datum_params[6]/1e6+1)),o&&(s.datum_type=Nd,s.grids=o),s.a=e,s.b=n,s.es=i,s.ep2=a,s}var dW={};function iat(r,t){var e=new DataView(t),n=sat(e),i=lat(e,n),a=uat(e,i,n),o={header:i,subgrids:a};return dW[r]=o,o}function aat(r){if(r===void 0)return null;var t=r.split(",");return t.map(oat)}function oat(r){if(r.length===0)return null;var t=r[0]==="@";return t&&(r=r.slice(1)),r==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:r,mandatory:!t,grid:dW[r]||null,isNull:!1}}function vd(r){return r/3600*Math.PI/180}function sat(r){var t=r.getInt32(8,!1);return t===11?!1:(t=r.getInt32(8,!0),!0)}function lat(r,t){return{nFields:r.getInt32(8,t),nSubgridFields:r.getInt32(24,t),nSubgrids:r.getInt32(40,t),shiftType:HM(r,56,64).trim(),fromSemiMajorAxis:r.getFloat64(120,t),fromSemiMinorAxis:r.getFloat64(136,t),toSemiMajorAxis:r.getFloat64(152,t),toSemiMinorAxis:r.getFloat64(168,t)}}function HM(r,t,e){return String.fromCharCode.apply(null,new Uint8Array(r.buffer.slice(t,e)))}function uat(r,t,e){for(var n=176,i=[],a=0;a<t.nSubgrids;a++){var o=cat(r,n,e),s=fat(r,n,o,e),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[vd(o.lowerLongitude),vd(o.lowerLatitude)],del:[vd(o.longitudeInterval),vd(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:hat(s)}),n+=176+o.gridNodeCount*16}return i}function hat(r){return r.map(function(t){return[vd(t.longitudeShift),vd(t.latitudeShift)]})}function cat(r,t,e){return{name:HM(r,t+8,t+16).trim(),parent:HM(r,t+24,t+24+8).trim(),lowerLatitude:r.getFloat64(t+72,e),upperLatitude:r.getFloat64(t+88,e),lowerLongitude:r.getFloat64(t+104,e),upperLongitude:r.getFloat64(t+120,e),latitudeInterval:r.getFloat64(t+136,e),longitudeInterval:r.getFloat64(t+152,e),gridNodeCount:r.getInt32(t+168,e)}}function fat(r,t,e,n){for(var i=t+176,a=16,o=[],s=0;s<e.gridNodeCount;s++){var l={latitudeShift:r.getFloat32(i+s*a,n),longitudeShift:r.getFloat32(i+s*a+4,n),latitudeAccuracy:r.getFloat32(i+s*a+8,n),longitudeAccuracy:r.getFloat32(i+s*a+12,n)};o.push(l)}return o}function as(r,t){if(!(this instanceof as))return new as(r);t=t||function(u){if(u)throw u};var e=Vit(r);if(typeof e!="object"){t("Could not parse to valid json: "+r);return}var n=as.projections.get(e.projName);if(!n){t("Could not get projection name from: "+r);return}if(e.datumCode&&e.datumCode!=="none"){var i=Ou(dn,e.datumCode);i&&(e.datum_params=e.datum_params||(i.towgs84?i.towgs84.split(","):null),e.ellps=i.ellipse,e.datumName=i.datumName?i.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var a=rat(e.a,e.b,e.rf,e.ellps,e.sphere),o=eat(a.a,a.b,a.rf,e.R_A),s=aat(e.nadgrids),l=e.datum||nat(e.datumCode,e.datum_params,a.a,a.b,o.es,o.ep2,s);sF(this,e),sF(this,n),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),t(null,this)}as.projections=Qit;as.projections.start();function dat(r,t){return r.datum_type!==t.datum_type||r.a!==t.a||Math.abs(r.es-t.es)>5e-11?!1:r.datum_type===Nc?r.datum_params[0]===t.datum_params[0]&&r.datum_params[1]===t.datum_params[1]&&r.datum_params[2]===t.datum_params[2]:r.datum_type===Fc?r.datum_params[0]===t.datum_params[0]&&r.datum_params[1]===t.datum_params[1]&&r.datum_params[2]===t.datum_params[2]&&r.datum_params[3]===t.datum_params[3]&&r.datum_params[4]===t.datum_params[4]&&r.datum_params[5]===t.datum_params[5]&&r.datum_params[6]===t.datum_params[6]:!0}function gW(r,t,e){var n=r.x,i=r.y,a=r.z?r.z:0,o,s,l,u;if(i<-vt&&i>-1.001*vt)i=-vt;else if(i>vt&&i<1.001*vt)i=vt;else{if(i<-vt)return{x:-1/0,y:-1/0,z:r.z};if(i>vt)return{x:1/0,y:1/0,z:r.z}}return n>Math.PI&&(n-=2*Math.PI),s=Math.sin(i),u=Math.cos(i),l=s*s,o=e/Math.sqrt(1-t*l),{x:(o+a)*u*Math.cos(n),y:(o+a)*u*Math.sin(n),z:(o*(1-t)+a)*s}}function pW(r,t,e,n){var i=1e-12,a=i*i,o=30,s,l,u,h,c,f,d,g,p,v,m,y,_,x=r.x,w=r.y,S=r.z?r.z:0,T,b,E;if(s=Math.sqrt(x*x+w*w),l=Math.sqrt(x*x+w*w+S*S),s/e<i){if(T=0,l/e<i)return b=vt,E=-n,{x:r.x,y:r.y,z:r.z}}else T=Math.atan2(w,x);u=S/l,h=s/l,c=1/Math.sqrt(1-t*(2-t)*h*h),g=h*(1-t)*c,p=u*c,_=0;do _++,d=e/Math.sqrt(1-t*p*p),E=s*g+S*p-d*(1-t*p*p),f=t*d/(d+E),c=1/Math.sqrt(1-f*(2-f)*h*h),v=h*(1-f)*c,m=u*c,y=m*g-v*p,g=v,p=m;while(y*y>a&&_<o);return b=Math.atan(m/Math.abs(v)),{x:T,y:b,z:E}}function gat(r,t,e){if(t===Nc)return{x:r.x+e[0],y:r.y+e[1],z:r.z+e[2]};if(t===Fc){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6];return{x:u*(r.x-l*r.y+s*r.z)+n,y:u*(l*r.x+r.y-o*r.z)+i,z:u*(-s*r.x+o*r.y+r.z)+a}}}function pat(r,t,e){if(t===Nc)return{x:r.x-e[0],y:r.y-e[1],z:r.z-e[2]};if(t===Fc){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],h=(r.x-n)/u,c=(r.y-i)/u,f=(r.z-a)/u;return{x:h+l*c-s*f,y:-l*h+c+o*f,z:s*h-o*c+f}}}function N0(r){return r===Nc||r===Fc}function vat(r,t,e){if(dat(r,t)||r.datum_type===UM||t.datum_type===UM)return e;var n=r.a,i=r.es;if(r.datum_type===Nd){var a=uF(r,!1,e);if(a!==0)return;n=nF,i=iF}var o=t.a,s=t.b,l=t.es;if(t.datum_type===Nd&&(o=nF,s=Sit,l=iF),i===l&&n===o&&!N0(r.datum_type)&&!N0(t.datum_type))return e;if(e=gW(e,i,n),N0(r.datum_type)&&(e=gat(e,r.datum_type,r.datum_params)),N0(t.datum_type)&&(e=pat(e,t.datum_type,t.datum_params)),e=pW(e,l,o,s),t.datum_type===Nd){var u=uF(t,!0,e);if(u!==0)return}return e}function uF(r,t,e){if(r.grids===null||r.grids.length===0)return-1;var n={x:-e.x,y:e.y},i={x:Number.NaN,y:Number.NaN},a=[];t:for(var o=0;o<r.grids.length;o++){var s=r.grids[o];if(a.push(s.name),s.isNull){i=n;break}if(s.mandatory,s.grid===null){if(s.mandatory)return-1;continue}for(var l=s.grid.subgrids,u=0,h=l.length;u<h;u++){var c=l[u],f=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,d=c.ll[0]-f,g=c.ll[1]-f,p=c.ll[0]+(c.lim[0]-1)*c.del[0]+f,v=c.ll[1]+(c.lim[1]-1)*c.del[1]+f;if(!(g>n.y||d>n.x||v<n.y||p<n.x)&&(i=mat(n,t,c),!isNaN(i.x)))break t}}return isNaN(i.x)?-1:(e.x=-i.x,e.y=i.y,0)}function mat(r,t,e){var n={x:Number.NaN,y:Number.NaN};if(isNaN(r.x))return n;var i={x:r.x,y:r.y};i.x-=e.ll[0],i.y-=e.ll[1],i.x=Mt(i.x-Math.PI)+Math.PI;var a=hF(i,e);if(t){if(isNaN(a.x))return n;a.x=i.x-a.x,a.y=i.y-a.y;var o=9,s=1e-12,l,u;do{if(u=hF(a,e),isNaN(u.x))break;l={x:i.x-(u.x+a.x),y:i.y-(u.y+a.y)},a.x+=l.x,a.y+=l.y}while(o--&&Math.abs(l.x)>s&&Math.abs(l.y)>s);if(o<0)return n;n.x=Mt(a.x+e.ll[0]),n.y=a.y+e.ll[1]}else isNaN(a.x)||(n.x=r.x+a.x,n.y=r.y+a.y);return n}function hF(r,t){var e={x:r.x/t.del[0],y:r.y/t.del[1]},n={x:Math.floor(e.x),y:Math.floor(e.y)},i={x:e.x-1*n.x,y:e.y-1*n.y},a={x:Number.NaN,y:Number.NaN},o;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return a;o=n.y*t.lim[0]+n.x;var s={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var l={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var u={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var h={x:t.cvs[o][0],y:t.cvs[o][1]},c=i.x*i.y,f=i.x*(1-i.y),d=(1-i.x)*(1-i.y),g=(1-i.x)*i.y;return a.x=d*s.x+f*l.x+g*h.x+c*u.x,a.y=d*s.y+f*l.y+g*h.y+c*u.y,a}function cF(r,t,e){var n=e.x,i=e.y,a=e.z||0,o,s,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&e.z===void 0))switch(l===0?(o=n,"ew".indexOf(r.axis[l])!==-1?s="x":s="y"):l===1?(o=i,"ns".indexOf(r.axis[l])!==-1?s="y":s="x"):(o=a,s="z"),r.axis[l]){case"e":u[s]=o;break;case"w":u[s]=-o;break;case"n":u[s]=o;break;case"s":u[s]=-o;break;case"u":e[s]!==void 0&&(u.z=o);break;case"d":e[s]!==void 0&&(u.z=-o);break;default:return null}return u}function vW(r){var t={x:r[0],y:r[1]};return r.length>2&&(t.z=r[2]),r.length>3&&(t.m=r[3]),t}function yat(r){fF(r.x),fF(r.y)}function fF(r){if(typeof Number.isFinite=="function"){if(Number.isFinite(r))return;throw new TypeError("coordinates must be finite numbers")}if(typeof r!="number"||r!==r||!isFinite(r))throw new TypeError("coordinates must be finite numbers")}function _at(r,t){return(r.datum.datum_type===Nc||r.datum.datum_type===Fc||r.datum.datum_type===Nd)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Nc||t.datum.datum_type===Fc||t.datum.datum_type===Nd)&&r.datumCode!=="WGS84"}function mx(r,t,e,n){var i;Array.isArray(e)?e=vW(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var a=e.z!==void 0;if(yat(e),r.datum&&t.datum&&_at(r,t)&&(i=new as("WGS84"),e=mx(r,i,e,n),r=i),n&&r.axis!=="enu"&&(e=cF(r,!1,e)),r.projName==="longlat")e={x:e.x*Mn,y:e.y*Mn,z:e.z||0};else if(r.to_meter&&(e={x:e.x*r.to_meter,y:e.y*r.to_meter,z:e.z||0}),e=r.inverse(e),!e)return;if(r.from_greenwich&&(e.x+=r.from_greenwich),e=vat(r.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*nu,y:e.y*nu,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),n&&t.axis!=="enu"?cF(t,!0,e):(e&&!a&&delete e.z,e)}var dF=as("WGS84");function QT(r,t,e,n){var i,a,o;return Array.isArray(e)?(i=mx(r,t,e,n)||{x:NaN,y:NaN},e.length>2?typeof r.name<"u"&&r.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(e.slice(3)):[i.x,i.y,e[2]].concat(e.slice(3)):[i.x,i.y].concat(e.slice(2)):[i.x,i.y]):(a=mx(r,t,e,n),o=Object.keys(e),o.length===2||o.forEach(function(s){if(typeof r.name<"u"&&r.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;a[s]=e[s]}),a)}function gF(r){return r instanceof as?r:r.oProj?r.oProj:as(r)}function hr(r,t,e){r=gF(r);var n=!1,i;return typeof t>"u"?(t=r,r=dF,n=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=r,r=dF,n=!0),t=gF(t),e?QT(r,t,e):(i={forward:function(a,o){return QT(r,t,a,o)},inverse:function(a,o){return QT(t,r,a,o)}},n&&(i.oProj=t),i)}var pF=6,mW="AJSAJS",yW="AFAFAF",md=65,Ii=73,ba=79,lv=86,uv=90;const xat={forward:_W,inverse:Sat,toPoint:xW};function _W(r,t){return t=t||5,bat(wat({lat:r[1],lon:r[0]}),t)}function Sat(r){var t=M2(wW(r.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function xW(r){var t=M2(wW(r.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function tb(r){return r*(Math.PI/180)}function vF(r){return 180*(r/Math.PI)}function wat(r){var t=r.lat,e=r.lon,n=6378137,i=.00669438,a=.9996,o,s,l,u,h,c,f,d=tb(t),g=tb(e),p,v;v=Math.floor((e+180)/6)+1,e===180&&(v=60),t>=56&&t<64&&e>=3&&e<12&&(v=32),t>=72&&t<84&&(e>=0&&e<9?v=31:e>=9&&e<21?v=33:e>=21&&e<33?v=35:e>=33&&e<42&&(v=37)),o=(v-1)*6-180+3,p=tb(o),s=i/(1-i),l=n/Math.sqrt(1-i*Math.sin(d)*Math.sin(d)),u=Math.tan(d)*Math.tan(d),h=s*Math.cos(d)*Math.cos(d),c=Math.cos(d)*(g-p),f=n*((1-i/4-3*i*i/64-5*i*i*i/256)*d-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*d)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*d)-35*i*i*i/3072*Math.sin(6*d));var m=a*l*(c+(1-u+h)*c*c*c/6+(5-18*u+u*u+72*h-58*s)*c*c*c*c*c/120)+5e5,y=a*(f+l*Math.tan(d)*(c*c/2+(5-u+9*h+4*h*h)*c*c*c*c/24+(61-58*u+u*u+600*h-330*s)*c*c*c*c*c*c/720));return t<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(m),zoneNumber:v,zoneLetter:Tat(t)}}function M2(r){var t=r.northing,e=r.easting,n=r.zoneLetter,i=r.zoneNumber;if(i<0||i>60)return null;var a=.9996,o=6378137,s=.00669438,l,u=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),h,c,f,d,g,p,v,m,y,_=e-5e5,x=t;n<"N"&&(x-=1e7),v=(i-1)*6-180+3,l=s/(1-s),p=x/a,m=p/(o*(1-s/4-3*s*s/64-5*s*s*s/256)),y=m+(3*u/2-27*u*u*u/32)*Math.sin(2*m)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*m)+151*u*u*u/96*Math.sin(6*m),h=o/Math.sqrt(1-s*Math.sin(y)*Math.sin(y)),c=Math.tan(y)*Math.tan(y),f=l*Math.cos(y)*Math.cos(y),d=o*(1-s)/Math.pow(1-s*Math.sin(y)*Math.sin(y),1.5),g=_/(h*a);var w=y-h*Math.tan(y)/d*(g*g/2-(5+3*c+10*f-4*f*f-9*l)*g*g*g*g/24+(61+90*c+298*f+45*c*c-252*l-3*f*f)*g*g*g*g*g*g/720);w=vF(w);var S=(g-(1+2*c+f)*g*g*g/6+(5-2*f+28*c-3*f*f+8*l+24*c*c)*g*g*g*g*g/120)/Math.cos(y);S=v+vF(S);var T;if(r.accuracy){var b=M2({northing:r.northing+r.accuracy,easting:r.easting+r.accuracy,zoneLetter:r.zoneLetter,zoneNumber:r.zoneNumber});T={top:b.lat,right:b.lon,bottom:w,left:S}}else T={lat:w,lon:S};return T}function Tat(r){var t="Z";return 84>=r&&r>=72?t="X":72>r&&r>=64?t="W":64>r&&r>=56?t="V":56>r&&r>=48?t="U":48>r&&r>=40?t="T":40>r&&r>=32?t="S":32>r&&r>=24?t="R":24>r&&r>=16?t="Q":16>r&&r>=8?t="P":8>r&&r>=0?t="N":0>r&&r>=-8?t="M":-8>r&&r>=-16?t="L":-16>r&&r>=-24?t="K":-24>r&&r>=-32?t="J":-32>r&&r>=-40?t="H":-40>r&&r>=-48?t="G":-48>r&&r>=-56?t="F":-56>r&&r>=-64?t="E":-64>r&&r>=-72?t="D":-72>r&&r>=-80&&(t="C"),t}function bat(r,t){var e="00000"+r.easting,n="00000"+r.northing;return r.zoneNumber+r.zoneLetter+Eat(r.easting,r.northing,r.zoneNumber)+e.substr(e.length-5,t)+n.substr(n.length-5,t)}function Eat(r,t,e){var n=SW(e),i=Math.floor(r/1e5),a=Math.floor(t/1e5)%20;return Cat(i,a,n)}function SW(r){var t=r%pF;return t===0&&(t=pF),t}function Cat(r,t,e){var n=e-1,i=mW.charCodeAt(n),a=yW.charCodeAt(n),o=i+r-1,s=a+t,l=!1;o>uv&&(o=o-uv+md-1,l=!0),(o===Ii||i<Ii&&o>Ii||(o>Ii||i<Ii)&&l)&&o++,(o===ba||i<ba&&o>ba||(o>ba||i<ba)&&l)&&(o++,o===Ii&&o++),o>uv&&(o=o-uv+md-1),s>lv?(s=s-lv+md-1,l=!0):l=!1,(s===Ii||a<Ii&&s>Ii||(s>Ii||a<Ii)&&l)&&s++,(s===ba||a<ba&&s>ba||(s>ba||a<ba)&&l)&&(s++,s===Ii&&s++),s>lv&&(s=s-lv+md-1);var u=String.fromCharCode(o)+String.fromCharCode(s);return u}function wW(r){if(r&&r.length===0)throw"MGRSPoint coverting from nothing";for(var t=r.length,e=null,n="",i,a=0;!/[A-Z]/.test(i=r.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+r;n+=i,a++}var o=parseInt(n,10);if(a===0||a+3>t)throw"MGRSPoint bad conversion from: "+r;var s=r.charAt(a++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+r;e=r.substring(a,a+=2);for(var l=SW(o),u=Mat(e.charAt(0),l),h=Aat(e.charAt(1),l);h<Iat(s);)h+=2e6;var c=t-a;if(c%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+r;var f=c/2,d=0,g=0,p,v,m,y,_;return f>0&&(p=1e5/Math.pow(10,f),v=r.substring(a,a+f),d=parseFloat(v)*p,m=r.substring(a+f),g=parseFloat(m)*p),y=d+u,_=g+h,{easting:y,northing:_,zoneLetter:s,zoneNumber:o,accuracy:p}}function Mat(r,t){for(var e=mW.charCodeAt(t-1),n=1e5,i=!1;e!==r.charCodeAt(0);){if(e++,e===Ii&&e++,e===ba&&e++,e>uv){if(i)throw"Bad character: "+r;e=md,i=!0}n+=1e5}return n}function Aat(r,t){if(r>"V")throw"MGRSPoint given invalid Northing "+r;for(var e=yW.charCodeAt(t-1),n=0,i=!1;e!==r.charCodeAt(0);){if(e++,e===Ii&&e++,e===ba&&e++,e>lv){if(i)throw"Bad character: "+r;e=md,i=!0}n+=1e5}return n}function Iat(r){var t;switch(r){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+r}function ag(r,t,e){if(!(this instanceof ag))return new ag(r,t,e);if(Array.isArray(r))this.x=r[0],this.y=r[1],this.z=r[2]||0;else if(typeof r=="object")this.x=r.x,this.y=r.y,this.z=r.z||0;else if(typeof r=="string"&&typeof t>"u"){var n=r.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=r,this.y=t,this.z=e||0}ag.fromMGRS=function(r){return new ag(xW(r))};ag.prototype.toMGRS=function(r){return _W([this.x,this.y],r)};var Rat=1,Pat=.25,mF=.046875,yF=.01953125,_F=.01068115234375,Lat=.75,Dat=.46875,Oat=.013020833333333334,Nat=.007120768229166667,Fat=.3645833333333333,kat=.005696614583333333,Gat=.3076171875;function A2(r){var t=[];t[0]=Rat-r*(Pat+r*(mF+r*(yF+r*_F))),t[1]=r*(Lat-r*(mF+r*(yF+r*_F)));var e=r*r;return t[2]=e*(Dat-r*(Oat+r*Nat)),e*=r,t[3]=e*(Fat-r*kat),t[4]=e*r*Gat,t}function Dg(r,t,e,n){return e*=t,t*=t,n[0]*r-e*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var Bat=20;function I2(r,t,e){for(var n=1/(1-t),i=r,a=Bat;a;--a){var o=Math.sin(i),s=1-t*o*o;if(s=(Dg(i,o,Math.cos(i),e)-r)*(s*Math.sqrt(s))*n,i-=s,Math.abs(s)<Ct)return i}return i}function zat(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=A2(this.es),this.ml0=Dg(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Vat(r){var t=r.x,e=r.y,n=Mt(t-this.long0),i,a,o,s=Math.sin(e),l=Math.cos(e);if(this.es){var h=l*n,c=Math.pow(h,2),f=this.ep2*Math.pow(l,2),d=Math.pow(f,2),g=Math.abs(l)>Ct?Math.tan(e):0,p=Math.pow(g,2),v=Math.pow(p,2);i=1-this.es*Math.pow(s,2),h=h/Math.sqrt(i);var m=Dg(e,s,l,this.en);a=this.a*(this.k0*h*(1+c/6*(1-p+f+c/20*(5-18*p+v+14*f-58*p*f+c/42*(61+179*v-v*p-479*p)))))+this.x0,o=this.a*(this.k0*(m-this.ml0+s*n*h/2*(1+c/12*(5-p+9*f+4*d+c/30*(61+v-58*p+270*f-330*p*f+c/56*(1385+543*v-v*p-3111*p))))))+this.y0}else{var u=l*Math.sin(n);if(Math.abs(Math.abs(u)-1)<Ct)return 93;if(a=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(n)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>Ct)return 93;o=0}else o=Math.acos(o);e<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return r.x=a,r.y=o,r}function Uat(r){var t,e,n,i,a=(r.x-this.x0)*(1/this.a),o=(r.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,e=I2(t,this.es,this.en),Math.abs(e)<vt){var c=Math.sin(e),f=Math.cos(e),d=Math.abs(f)>Ct?Math.tan(e):0,g=this.ep2*Math.pow(f,2),p=Math.pow(g,2),v=Math.pow(d,2),m=Math.pow(v,2);t=1-this.es*Math.pow(c,2);var y=a*Math.sqrt(t)/this.k0,_=Math.pow(y,2);t=t*d,n=e-t*_/(1-this.es)*.5*(1-_/12*(5+3*v-9*g*v+g-4*p-_/30*(61+90*v-252*g*v+45*m+46*g-_/56*(1385+3633*v+4095*m+1574*m*v)))),i=Mt(this.long0+y*(1-_/6*(1+2*v+g-_/20*(5+28*v+24*m+8*g*v+6*g-_/42*(61+662*v+1320*m+720*m*v))))/f)}else n=vt*Py(o),i=0;else{var s=Math.exp(a/this.k0),l=.5*(s-1/s),u=this.lat0+o/this.k0,h=Math.cos(u);t=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),n=Math.asin(t),o<0&&(n=-n),l===0&&h===0?i=0:i=Mt(Math.atan2(l,h)+this.long0)}return r.x=i,r.y=n,r}var Wat=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const h1={init:zat,forward:Vat,inverse:Uat,names:Wat};function TW(r){var t=Math.exp(r);return t=(t-1/t)/2,t}function ki(r,t){r=Math.abs(r),t=Math.abs(t);var e=Math.max(r,t),n=Math.min(r,t)/(e||1);return e*Math.sqrt(1+Math.pow(n,2))}function Hat(r){var t=1+r,e=t-1;return e===0?r:r*Math.log(t)/e}function $at(r){var t=Math.abs(r);return t=Hat(t*(1+t/(ki(1,t)+1))),r<0?-t:t}function R2(r,t){for(var e=2*Math.cos(2*t),n=r.length-1,i=r[n],a=0,o;--n>=0;)o=-a+e*i+r[n],a=i,i=o;return t+o*Math.sin(2*t)}function Yat(r,t){for(var e=2*Math.cos(t),n=r.length-1,i=r[n],a=0,o;--n>=0;)o=-a+e*i+r[n],a=i,i=o;return Math.sin(t)*o}function Xat(r){var t=Math.exp(r);return t=(t+1/t)/2,t}function bW(r,t,e){for(var n=Math.sin(t),i=Math.cos(t),a=TW(e),o=Xat(e),s=2*i*o,l=-2*n*a,u=r.length-1,h=r[u],c=0,f=0,d=0,g,p;--u>=0;)g=f,p=c,f=h,c=d,h=-g+s*f-l*c+r[u],d=-p+l*f+s*c;return s=n*o,l=i*a,[s*h-l*d,s*d+l*h]}function Zat(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(h1.init.apply(this),this.forward=h1.forward,this.inverse=h1.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var r=this.es/(1+Math.sqrt(1-this.es)),t=r/(2-r),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var n=R2(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Yat(this.gtu,2*n))}function jat(r){var t=Mt(r.x-this.long0),e=r.y;e=R2(this.cbg,e);var n=Math.sin(e),i=Math.cos(e),a=Math.sin(t),o=Math.cos(t);e=Math.atan2(n,o*i),t=Math.atan2(a*i,ki(n,i*o)),t=$at(Math.tan(t));var s=bW(this.gtu,2*e,2*t);e=e+s[0],t=t+s[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*e+this.Zb)+this.y0):(l=1/0,u=1/0),r.x=l,r.y=u,r}function Kat(r){var t=(r.x-this.x0)*(1/this.a),e=(r.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var n,i;if(Math.abs(t)<=2.623395162778){var a=bW(this.utg,2*e,2*t);e=e+a[0],t=t+a[1],t=Math.atan(TW(t));var o=Math.sin(e),s=Math.cos(e),l=Math.sin(t),u=Math.cos(t);e=Math.atan2(o*u,ki(l,u*s)),t=Math.atan2(l,u*s),n=Mt(t+this.long0),i=R2(this.cgb,e)}else n=1/0,i=1/0;return r.x=n,r.y=i,r}var qat=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const c1={init:Zat,forward:jat,inverse:Kat,names:qat};function Jat(r,t){if(r===void 0){if(r=Math.floor((Mt(t)+Math.PI)*30/Math.PI)+1,r<0)return 0;if(r>60)return 60}return r}var Qat="etmerc";function tot(){var r=Jat(this.zone,this.long0);if(r===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(r)-183)*Mn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,c1.init.apply(this),this.forward=c1.forward,this.inverse=c1.inverse}var eot=["Universal Transverse Mercator System","utm"];const rot={init:tot,names:eot,dependsOn:Qat};function P2(r,t){return Math.pow((1-r)/(1+r),t)}var not=20;function iot(){var r=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*r*r),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(r/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+tr)/(Math.pow(Math.tan(.5*this.lat0+tr),this.C)*P2(this.e*r,this.ratexp))}function aot(r){var t=r.x,e=r.y;return r.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+tr),this.C)*P2(this.e*Math.sin(e),this.ratexp))-vt,r.x=this.C*t,r}function oot(r){for(var t=1e-14,e=r.x/this.C,n=r.y,i=Math.pow(Math.tan(.5*n+tr)/this.K,1/this.C),a=not;a>0&&(n=2*Math.atan(i*P2(this.e*Math.sin(r.y),-.5*this.e))-vt,!(Math.abs(n-r.y)<t));--a)r.y=n;return a?(r.x=e,r.y=n,r):null}var sot=["gauss"];const L2={init:iot,forward:aot,inverse:oot,names:sot};function lot(){L2.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function uot(r){var t,e,n,i;return r.x=Mt(r.x-this.long0),L2.forward.apply(this,[r]),t=Math.sin(r.y),e=Math.cos(r.y),n=Math.cos(r.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*n),r.x=i*e*Math.sin(r.x),r.y=i*(this.cosc0*t-this.sinc0*e*n),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function hot(r){var t,e,n,i,a;if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,a=ki(r.x,r.y)){var o=2*Math.atan2(a,this.R2);t=Math.sin(o),e=Math.cos(o),i=Math.asin(e*this.sinc0+r.y*t*this.cosc0/a),n=Math.atan2(r.x*t,a*this.cosc0*e-r.y*this.sinc0*t)}else i=this.phic0,n=0;return r.x=n,r.y=i,L2.inverse.apply(this,[r]),r.x=Mt(r.x+this.long0),r}var cot=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const fot={init:lot,forward:uot,inverse:hot,names:cot};function dot(r,t,e){return t*=e,Math.tan(.5*(vt+r))*Math.pow((1-t)/(1+t),.5*e)}function got(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ct&&(this.k0=.5*(1+Py(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ct&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ct&&Math.abs(Math.cos(this.lat_ts))>Ct&&(this.k0=.5*this.cons*hs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ho(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=hs(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-vt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function pot(r){var t=r.x,e=r.y,n=Math.sin(e),i=Math.cos(e),a,o,s,l,u,h,c=Mt(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Ct&&Math.abs(e+this.lat0)<=Ct?(r.x=NaN,r.y=NaN,r):this.sphere?(a=2*this.k0/(1+this.sinlat0*n+this.coslat0*i*Math.cos(c)),r.x=this.a*a*i*Math.sin(c)+this.x0,r.y=this.a*a*(this.coslat0*n-this.sinlat0*i*Math.cos(c))+this.y0,r):(o=2*Math.atan(this.ssfn_(e,n,this.e))-vt,l=Math.cos(o),s=Math.sin(o),Math.abs(this.coslat0)<=Ct?(u=ho(this.e,e*this.con,this.con*n),h=2*this.a*this.k0*u/this.cons,r.x=this.x0+h*Math.sin(t-this.long0),r.y=this.y0-this.con*h*Math.cos(t-this.long0),r):(Math.abs(this.sinlat0)<Ct?(a=2*this.a*this.k0/(1+l*Math.cos(c)),r.y=a*s):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*l*Math.cos(c))),r.y=a*(this.cosX0*s-this.sinX0*l*Math.cos(c))+this.y0),r.x=a*l*Math.sin(c)+this.x0,r))}function vot(r){r.x-=this.x0,r.y-=this.y0;var t,e,n,i,a,o=Math.sqrt(r.x*r.x+r.y*r.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,e=this.lat0,o<=Ct?(r.x=t,r.y=e,r):(e=Math.asin(Math.cos(s)*this.sinlat0+r.y*Math.sin(s)*this.coslat0/o),Math.abs(this.coslat0)<Ct?this.lat0>0?t=Mt(this.long0+Math.atan2(r.x,-1*r.y)):t=Mt(this.long0+Math.atan2(r.x,r.y)):t=Mt(this.long0+Math.atan2(r.x*Math.sin(s),o*this.coslat0*Math.cos(s)-r.y*this.sinlat0*Math.sin(s))),r.x=t,r.y=e,r)}else if(Math.abs(this.coslat0)<=Ct){if(o<=Ct)return e=this.lat0,t=this.long0,r.x=t,r.y=e,r;r.x*=this.con,r.y*=this.con,n=o*this.cons/(2*this.a*this.k0),e=this.con*km(this.e,n),t=this.con*Mt(this.con*this.long0+Math.atan2(r.x,-1*r.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=Ct?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+r.y*Math.sin(i)*this.cosX0/o),t=Mt(this.long0+Math.atan2(r.x*Math.sin(i),o*this.cosX0*Math.cos(i)-r.y*this.sinX0*Math.sin(i)))),e=-1*km(this.e,Math.tan(.5*(vt+a)));return r.x=t,r.y=e,r}var mot=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const yot={init:got,forward:pot,inverse:vot,names:mot,ssfn_:dot};function _ot(){var r=this.lat0;this.lambda0=this.long0;var t=Math.sin(r),e=this.a,n=this.rf,i=1/n,a=2*i-Math.pow(i,2),o=this.e=Math.sqrt(a);this.R=this.k0*e*Math.sqrt(1-a)/(1-a*Math.pow(t,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(r),4)),this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+r/2)),u=Math.log((1+o*t)/(1-o*t));this.K=s-this.alpha*l+this.alpha*o/2*u}function xot(r){var t=Math.log(Math.tan(Math.PI/4-r.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(r.y))/(1-this.e*Math.sin(r.y))),n=-this.alpha*(t+e)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(r.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return r.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,r.x=this.R*o+this.x0,r}function Sot(r){for(var t=r.x-this.x0,e=r.y-this.y0,n=t/this.R,i=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+o/this.alpha,l=0,u=a,h=-1e3,c=0;Math.abs(u-h)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return r.x=s,r.y=u,r}var wot=["somerc"];const Tot={init:_ot,forward:xot,inverse:Sot,names:wot};var td=1e-7;function bot(r){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof r.PROJECTION=="object"?Object.keys(r.PROJECTION)[0]:r.PROJECTION;return"no_uoff"in r||"no_off"in r||t.indexOf(e)!==-1}function Eot(){var r,t,e,n,i,a,o,s,l,u,h=0,c,f=0,d=0,g=0,p=0,v=0,m=0;this.no_off=bot(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var _=!1;if("rectified_grid_angle"in this&&(_=!0),y&&(m=this.alpha),_&&(h=this.rectified_grid_angle*Mn),y||_)f=this.longc;else if(d=this.long1,p=this.lat1,g=this.long2,v=this.lat2,Math.abs(p-v)<=td||(r=Math.abs(p))<=td||Math.abs(r-vt)<=td||Math.abs(Math.abs(this.lat0)-vt)<=td||Math.abs(Math.abs(v)-vt)<=td)throw new Error;var x=1-this.es;t=Math.sqrt(x),Math.abs(this.lat0)>Ct?(s=Math.sin(this.lat0),e=Math.cos(this.lat0),r=1-this.es*s*s,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*t/r,n=this.B*t/(e*Math.sqrt(r)),i=n*n-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(ho(this.e,this.lat0,s),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=i=1),y||_?(y?(c=Math.asin(Math.sin(m)/n),_||(h=m)):(c=h,m=Math.asin(n*Math.sin(c))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(a=Math.pow(ho(this.e,p,Math.sin(p)),this.B),o=Math.pow(ho(this.e,v,Math.sin(v)),this.B),i=this.E/a,l=(o-a)/(o+a),u=this.E*this.E,u=(u-o*a)/(u+o*a),r=d-g,r<-Math.pi?g-=Nm:r>Math.pi&&(g+=Nm),this.lam0=Mt(.5*(d+g)-Math.atan(u*Math.tan(.5*this.B*(d-g))/l)/this.B),c=Math.atan(2*Math.sin(this.B*Mt(d-this.lam0))/(i-1/i)),h=m=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(m))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(tr-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(tr+i))}function Cot(r){var t={},e,n,i,a,o,s,l,u;if(r.x=r.x-this.lam0,Math.abs(Math.abs(r.y)-vt)>Ct){if(o=this.E/Math.pow(ho(this.e,r.y,Math.sin(r.y)),this.B),s=1/o,e=.5*(o-s),n=.5*(o+s),a=Math.sin(this.B*r.x),i=(e*this.singam-a*this.cosgam)/n,Math.abs(Math.abs(i)-1)<Ct)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),s=Math.cos(this.B*r.x),Math.abs(s)<td?l=this.A*r.x:l=this.ArB*Math.atan2(e*this.cosgam+a*this.singam,s)}else u=r.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*r.y;return this.no_rot?(t.x=l,t.y=u):(l-=this.u_0,t.x=u*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Mot(r){var t,e,n,i,a,o,s,l={};if(r.x=(r.x-this.x0)*(1/this.a),r.y=(r.y-this.y0)*(1/this.a),this.no_rot?(e=r.y,t=r.x):(e=r.x*this.cosrot-r.y*this.sinrot,t=r.y*this.cosrot+r.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*e),i=.5*(n-1/n),a=.5*(n+1/n),o=Math.sin(this.BrA*t),s=(o*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(s)-1)<Ct)l.x=0,l.y=s<0?-vt:vt;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=km(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var Aot=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Iot={init:Eot,forward:Cot,inverse:Mot,names:Aot};function Rot(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ct)){var r=this.b/this.a;this.e=Math.sqrt(1-r*r);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),n=hs(this.e,t,e),i=ho(this.e,this.lat1,t),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=hs(this.e,a,o),l=ho(this.e,this.lat2,a),u=ho(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ct?this.ns=Math.log(n/s)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Pot(r){var t=r.x,e=r.y;Math.abs(2*Math.abs(e)-Math.PI)<=Ct&&(e=Py(e)*(vt-2*Ct));var n=Math.abs(Math.abs(e)-vt),i,a;if(n>Ct)i=ho(this.e,e,Math.sin(e)),a=this.a*this.f0*Math.pow(i,this.ns);else{if(n=e*this.ns,n<=0)return null;a=0}var o=this.ns*Mt(t-this.long0);return r.x=this.k0*(a*Math.sin(o))+this.x0,r.y=this.k0*(this.rh-a*Math.cos(o))+this.y0,r}function Lot(r){var t,e,n,i,a,o=(r.x-this.x0)/this.k0,s=this.rh-(r.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+s*s),e=1):(t=-Math.sqrt(o*o+s*s),e=-1);var l=0;if(t!==0&&(l=Math.atan2(e*o,e*s)),t!==0||this.ns>0){if(e=1/this.ns,n=Math.pow(t/(this.a*this.f0),e),i=km(this.e,n),i===-9999)return null}else i=-vt;return a=Mt(l/this.ns+this.long0),r.x=a,r.y=i,r}var Dot=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Oot={init:Rot,forward:Pot,inverse:Lot,names:Dot};function Not(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Fot(r){var t,e,n,i,a,o,s,l=r.x,u=r.y,h=Mt(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),n=-h*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(n)),a=Math.asin(Math.cos(e)*Math.sin(n)/Math.cos(i)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),r.y=s*Math.cos(o)/1,r.x=s*Math.sin(o)/1,this.czech||(r.y*=-1,r.x*=-1),r}function kot(r){var t,e,n,i,a,o,s,l,u=r.x;r.x=r.y,r.y=u,this.czech||(r.y*=-1,r.x*=-1),o=Math.sqrt(r.x*r.x+r.y*r.y),a=Math.atan2(r.y,r.x),i=a/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),e=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(t)),r.x=this.long0-e/this.alfa,s=t,l=0;var h=0;do r.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-r.y)<1e-10&&(l=1),s=r.y,h+=1;while(l===0&&h<15);return h>=15?null:r}var Got=["Krovak","krovak"];const Bot={init:Not,forward:Fot,inverse:kot,names:Got};function pi(r,t,e,n,i){return r*i-t*Math.sin(2*i)+e*Math.sin(4*i)-n*Math.sin(6*i)}function Ly(r){return 1-.25*r*(1+r/16*(3+1.25*r))}function Dy(r){return .375*r*(1+.25*r*(1+.46875*r))}function Oy(r){return .05859375*r*r*(1+.75*r)}function Ny(r){return r*r*r*(35/3072)}function og(r,t,e){var n=t*e;return r/Math.sqrt(1-n*n)}function Ku(r){return Math.abs(r)<vt?r:r-Py(r)*Math.PI}function yx(r,t,e,n,i){var a,o;a=r/t;for(var s=0;s<15;s++)if(o=(r-(t*a-e*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)))/(t-2*e*Math.cos(2*a)+4*n*Math.cos(4*a)-6*i*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}function zot(){this.sphere||(this.e0=Ly(this.es),this.e1=Dy(this.es),this.e2=Oy(this.es),this.e3=Ny(this.es),this.ml0=this.a*pi(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Vot(r){var t,e,n=r.x,i=r.y;if(n=Mt(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(n)),e=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var a=Math.sin(i),o=Math.cos(i),s=og(this.a,this.e,a),l=Math.tan(i)*Math.tan(i),u=n*Math.cos(i),h=u*u,c=this.es*o*o/(1-this.es),f=this.a*pi(this.e0,this.e1,this.e2,this.e3,i);t=s*u*(1-h*l*(1/6-(8-l+8*c)*h/120)),e=f-this.ml0+s*a/o*h*(.5+(5-l+6*c)*h/24)}return r.x=t+this.x0,r.y=e+this.y0,r}function Uot(r){r.x-=this.x0,r.y-=this.y0;var t=r.x/this.a,e=r.y/this.a,n,i;if(this.sphere){var a=e+this.lat0;n=Math.asin(Math.sin(a)*Math.cos(t)),i=Math.atan2(Math.tan(t),Math.cos(a))}else{var o=this.ml0/this.a+e,s=yx(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-vt)<=Ct)return r.x=this.long0,r.y=vt,e<0&&(r.y*=-1),r;var l=og(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(s),2),c=t*this.a/l,f=c*c;n=s-l*Math.tan(s)/u*c*c*(.5-(1+3*h)*c*c/24),i=c*(1-f*(h/3+(1+3*h)*h*f/15))/Math.cos(s)}return r.x=Mt(i+this.long0),r.y=Ku(n),r}var Wot=["Cassini","Cassini_Soldner","cass"];const Hot={init:zot,forward:Vot,inverse:Uot,names:Wot};function _u(r,t){var e;return r>1e-7?(e=r*t,(1-r*r)*(t/(1-e*e)-.5/r*Math.log((1-e)/(1+e)))):2*t}var $ot=1,Yot=2,Xot=3,Zot=4;function jot(){var r=Math.abs(this.lat0);if(Math.abs(r-vt)<Ct?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(r)<Ct?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=_u(this.e,1),this.mmf=.5/(1-this.es),this.apa=ist(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=_u(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Kot(r){var t,e,n,i,a,o,s,l,u,h,c=r.x,f=r.y;if(c=Mt(c-this.long0),this.sphere){if(a=Math.sin(f),h=Math.cos(f),n=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+h*n:1+this.sinph0*a+this.cosph0*h*n,e<=Ct)return null;e=Math.sqrt(2/e),t=e*h*Math.sin(c),e*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*h*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.lat0)<Ct)return null;e=tr-f*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(c),e*=n}}else{switch(s=0,l=0,u=0,n=Math.cos(c),i=Math.sin(c),a=Math.sin(f),o=_u(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=o/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=vt+f,o=this.qp-o;break;case this.S_POLE:u=f-vt,o=this.qp+o;break}if(Math.abs(u)<Ct)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?e=this.ymf*u*(this.cosb1*s-this.sinb1*l*n):e=(u=Math.sqrt(2/(1+l*n)))*s*this.ymf,t=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(u=Math.sqrt(o))*i,e=n*(this.mode===this.S_POLE?u:-u)):t=e=0;break}}return r.x=this.a*t+this.x0,r.y=this.a*e+this.y0,r}function qot(r){r.x-=this.x0,r.y-=this.y0;var t=r.x/this.a,e=r.y/this.a,n,i,a,o,s,l,u;if(this.sphere){var h=0,c,f=0;if(c=Math.sqrt(t*t+e*e),i=c*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(i),h=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=Ct?0:Math.asin(e*f/c),t*=f,e=h*c;break;case this.OBLIQ:i=Math.abs(c)<=Ct?this.lat0:Math.asin(h*this.sinph0+e*f*this.cosph0/c),t*=f*this.cosph0,e=(h-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:e=-e,i=vt-i;break;case this.S_POLE:i-=vt;break}n=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,l=Math.sqrt(t*t+e*e),l<Ct)return r.x=this.long0,r.y=this.lat0,r;o=2*Math.asin(.5*l/this.rq),a=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(u=a*this.sinb1+e*o*this.cosb1/l,s=this.qp*u,e=l*this.cosb1*a-e*this.sinb1*o):(u=e*o/l,s=this.qp*u,e=l*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),s=t*t+e*e,!s)return r.x=this.long0,r.y=this.lat0,r;u=1-s/this.qp,this.mode===this.S_POLE&&(u=-u)}n=Math.atan2(t,e),i=ast(Math.asin(u),this.apa)}return r.x=Mt(this.long0+n),r.y=i,r}var Jot=.3333333333333333,Qot=.17222222222222222,tst=.10257936507936508,est=.06388888888888888,rst=.0664021164021164,nst=.016415012942191543;function ist(r){var t,e=[];return e[0]=r*Jot,t=r*r,e[0]+=t*Qot,e[1]=t*est,t*=r,e[0]+=t*tst,e[1]+=t*rst,e[2]=t*nst,e}function ast(r,t){var e=r+r;return r+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var ost=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const sst={init:jot,forward:Kot,inverse:qot,names:ost,S_POLE:$ot,N_POLE:Yot,EQUIT:Xot,OBLIQ:Zot};function Nu(r){return Math.abs(r)>1&&(r=r>1?1:-1),Math.asin(r)}function lst(){Math.abs(this.lat1+this.lat2)<Ct||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=hs(this.e3,this.sin_po,this.cos_po),this.qs1=_u(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=hs(this.e3,this.sin_po,this.cos_po),this.qs2=_u(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=_u(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ct?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function ust(r){var t=r.x,e=r.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var n=_u(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*Mt(t-this.long0),o=i*Math.sin(a)+this.x0,s=this.rh-i*Math.cos(a)+this.y0;return r.x=o,r.y=s,r}function hst(r){var t,e,n,i,a,o;return r.x-=this.x0,r.y=this.rh-r.y+this.y0,this.ns0>=0?(t=Math.sqrt(r.x*r.x+r.y*r.y),n=1):(t=-Math.sqrt(r.x*r.x+r.y*r.y),n=-1),i=0,t!==0&&(i=Math.atan2(n*r.x,n*r.y)),n=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(e=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,e)),a=Mt(i/this.ns0+this.long0),r.x=a,r.y=o,r}function cst(r,t){var e,n,i,a,o,s=Nu(.5*t);if(r<Ct)return s;for(var l=r*r,u=1;u<=25;u++)if(e=Math.sin(s),n=Math.cos(s),i=r*e,a=1-i*i,o=.5*a*a/n*(t/(1-l)-e/a+.5/r*Math.log((1-i)/(1+i))),s=s+o,Math.abs(o)<=1e-7)return s;return null}var fst=["Albers_Conic_Equal_Area","Albers","aea"];const dst={init:lst,forward:ust,inverse:hst,names:fst,phi1z:cst};function gst(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function pst(r){var t,e,n,i,a,o,s,l,u=r.x,h=r.y;return n=Mt(u-this.long0),t=Math.sin(h),e=Math.cos(h),i=Math.cos(n),o=this.sin_p14*t+this.cos_p14*e*i,a=1,o>0||Math.abs(o)<=Ct?(s=this.x0+this.a*a*e*Math.sin(n)/o,l=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*e*i)/o):(s=this.x0+this.infinity_dist*e*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*i)),r.x=s,r.y=l,r}function vst(r){var t,e,n,i,a,o;return r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,(t=Math.sqrt(r.x*r.x+r.y*r.y))?(i=Math.atan2(t,this.rc),e=Math.sin(i),n=Math.cos(i),o=Nu(n*this.sin_p14+r.y*e*this.cos_p14/t),a=Math.atan2(r.x*e,t*this.cos_p14*n-r.y*this.sin_p14*e),a=Mt(this.long0+a)):(o=this.phic0,a=0),r.x=a,r.y=o,r}var mst=["gnom"];const yst={init:gst,forward:pst,inverse:vst,names:mst};function _st(r,t){var e=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*vt:vt;for(var n=Math.asin(.5*t),i,a,o,s,l=0;l<30;l++)if(a=Math.sin(n),o=Math.cos(n),s=r*a,i=Math.pow(1-s*s,2)/(2*o)*(t/(1-r*r)-a/(1-s*s)+.5/r*Math.log((1-s)/(1+s))),n+=i,Math.abs(i)<=1e-10)return n;return NaN}function xst(){this.sphere||(this.k0=hs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Sst(r){var t=r.x,e=r.y,n,i,a=Mt(t-this.long0);if(this.sphere)n=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var o=_u(this.e,Math.sin(e));n=this.x0+this.a*this.k0*a,i=this.y0+this.a*o*.5/this.k0}return r.x=n,r.y=i,r}function wst(r){r.x-=this.x0,r.y-=this.y0;var t,e;return this.sphere?(t=Mt(this.long0+r.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(r.y/this.a*Math.cos(this.lat_ts))):(e=_st(this.e,2*r.y*this.k0/this.a),t=Mt(this.long0+r.x/(this.a*this.k0))),r.x=t,r.y=e,r}var Tst=["cea"];const bst={init:xst,forward:Sst,inverse:wst,names:Tst};function Est(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Cst(r){var t=r.x,e=r.y,n=Mt(t-this.long0),i=Ku(e-this.lat0);return r.x=this.x0+this.a*n*this.rc,r.y=this.y0+this.a*i,r}function Mst(r){var t=r.x,e=r.y;return r.x=Mt(this.long0+(t-this.x0)/(this.a*this.rc)),r.y=Ku(this.lat0+(e-this.y0)/this.a),r}var Ast=["Equirectangular","Equidistant_Cylindrical","eqc"];const Ist={init:Est,forward:Cst,inverse:Mst,names:Ast};var xF=20;function Rst(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ly(this.es),this.e1=Dy(this.es),this.e2=Oy(this.es),this.e3=Ny(this.es),this.ml0=this.a*pi(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Pst(r){var t=r.x,e=r.y,n,i,a,o=Mt(t-this.long0);if(a=o*Math.sin(e),this.sphere)Math.abs(e)<=Ct?(n=this.a*o,i=-1*this.a*this.lat0):(n=this.a*Math.sin(a)/Math.tan(e),i=this.a*(Ku(e-this.lat0)+(1-Math.cos(a))/Math.tan(e)));else if(Math.abs(e)<=Ct)n=this.a*o,i=-1*this.ml0;else{var s=og(this.a,this.e,Math.sin(e))/Math.tan(e);n=s*Math.sin(a),i=this.a*pi(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+s*(1-Math.cos(a))}return r.x=n+this.x0,r.y=i+this.y0,r}function Lst(r){var t,e,n,i,a,o,s,l,u;if(n=r.x-this.x0,i=r.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Ct)t=Mt(n/this.a+this.long0),e=0;else{o=this.lat0+i/this.a,s=n*n/this.a/this.a+o*o,l=o;var h;for(a=xF;a;--a)if(h=Math.tan(l),u=-1*(o*(l*h+1)-l-.5*(l*l+s)*h)/((l-o)/h-1),l+=u,Math.abs(u)<=Ct){e=l;break}t=Mt(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(e))}else if(Math.abs(i+this.ml0)<=Ct)e=0,t=Mt(this.long0+n/this.a);else{o=(this.ml0+i)/this.a,s=n*n/this.a/this.a+o*o,l=o;var c,f,d,g,p;for(a=xF;a;--a)if(p=this.e*Math.sin(l),c=Math.sqrt(1-p*p)*Math.tan(l),f=this.a*pi(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=f/this.a,u=(o*(c*g+1)-g-.5*c*(g*g+s))/(this.es*Math.sin(2*l)*(g*g+s-2*o*g)/(4*c)+(o-g)*(c*d-2/Math.sin(2*l))-d),l-=u,Math.abs(u)<=Ct){e=l;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=Mt(this.long0+Math.asin(n*c/this.a)/Math.sin(e))}return r.x=t,r.y=e,r}var Dst=["Polyconic","poly"];const Ost={init:Rst,forward:Pst,inverse:Lst,names:Dst};function Nst(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Fst(r){var t,e=r.x,n=r.y,i=n-this.lat0,a=e-this.long0,o=i/Nv*1e-5,s=a,l=1,u=0;for(t=1;t<=10;t++)l=l*o,u=u+this.A[t]*l;var h=u,c=s,f=1,d=0,g,p,v=0,m=0;for(t=1;t<=6;t++)g=f*h-d*c,p=d*h+f*c,f=g,d=p,v=v+this.B_re[t]*f-this.B_im[t]*d,m=m+this.B_im[t]*f+this.B_re[t]*d;return r.x=m*this.a+this.x0,r.y=v*this.a+this.y0,r}function kst(r){var t,e=r.x,n=r.y,i=e-this.x0,a=n-this.y0,o=a/this.a,s=i/this.a,l=1,u=0,h,c,f=0,d=0;for(t=1;t<=6;t++)h=l*o-u*s,c=u*o+l*s,l=h,u=c,f=f+this.C_re[t]*l-this.C_im[t]*u,d=d+this.C_im[t]*l+this.C_re[t]*u;for(var g=0;g<this.iterations;g++){var p=f,v=d,m,y,_=o,x=s;for(t=2;t<=6;t++)m=p*f-v*d,y=v*f+p*d,p=m,v=y,_=_+(t-1)*(this.B_re[t]*p-this.B_im[t]*v),x=x+(t-1)*(this.B_im[t]*p+this.B_re[t]*v);p=1,v=0;var w=this.B_re[1],S=this.B_im[1];for(t=2;t<=6;t++)m=p*f-v*d,y=v*f+p*d,p=m,v=y,w=w+t*(this.B_re[t]*p-this.B_im[t]*v),S=S+t*(this.B_im[t]*p+this.B_re[t]*v);var T=w*w+S*S;f=(_*w+x*S)/T,d=(x*w-_*S)/T}var b=f,E=d,C=1,M=0;for(t=1;t<=9;t++)C=C*b,M=M+this.D[t]*C;var A=this.lat0+M*Nv*1e5,R=this.long0+E;return r.x=R,r.y=A,r}var Gst=["New_Zealand_Map_Grid","nzmg"];const Bst={init:Nst,forward:Fst,inverse:kst,names:Gst};function zst(){}function Vst(r){var t=r.x,e=r.y,n=Mt(t-this.long0),i=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return r.x=i,r.y=a,r}function Ust(r){r.x-=this.x0,r.y-=this.y0;var t=Mt(this.long0+r.x/this.a),e=2.5*(Math.atan(Math.exp(.8*r.y/this.a))-Math.PI/4);return r.x=t,r.y=e,r}var Wst=["Miller_Cylindrical","mill"];const Hst={init:zst,forward:Vst,inverse:Ust,names:Wst};var $st=20;function Yst(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=A2(this.es)}function Xst(r){var t,e,n=r.x,i=r.y;if(n=Mt(n-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var a=this.n*Math.sin(i),o=$st;o;--o){var s=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<Ct)break}t=this.a*this.C_x*n*(this.m+Math.cos(i)),e=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);e=this.a*Dg(i,l,u,this.en),t=this.a*n*u/Math.sqrt(1-this.es*l*l)}return r.x=t,r.y=e,r}function Zst(r){var t,e,n,i;return r.x-=this.x0,n=r.x/this.a,r.y-=this.y0,t=r.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=Nu((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Nu(Math.sin(t)/this.n)),n=Mt(n+this.long0),t=Ku(t)):(t=I2(r.y/this.a,this.es,this.en),i=Math.abs(t),i<vt?(i=Math.sin(t),e=this.long0+r.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),n=Mt(e)):i-Ct<vt&&(n=this.long0)),r.x=n,r.y=t,r}var jst=["Sinusoidal","sinu"];const Kst={init:Yst,forward:Xst,inverse:Zst,names:jst};function qst(){}function Jst(r){for(var t=r.x,e=r.y,n=Mt(t-this.long0),i=e,a=Math.PI*Math.sin(e);;){var o=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=o,Math.abs(o)<Ct)break}i/=2,Math.PI/2-Math.abs(e)<Ct&&(n=0);var s=.900316316158*this.a*n*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return r.x=s,r.y=l,r}function Qst(r){var t,e;r.x-=this.x0,r.y-=this.y0,e=r.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var n=Mt(this.long0+r.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var i=Math.asin(e);return r.x=n,r.y=i,r}var tlt=["Mollweide","moll"];const elt={init:qst,forward:Jst,inverse:Qst,names:tlt};function rlt(){Math.abs(this.lat1+this.lat2)<Ct||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ly(this.es),this.e1=Dy(this.es),this.e2=Oy(this.es),this.e3=Ny(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=hs(this.e,this.sinphi,this.cosphi),this.ml1=pi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ct?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=hs(this.e,this.sinphi,this.cosphi),this.ml2=pi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=pi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function nlt(r){var t=r.x,e=r.y,n;if(this.sphere)n=this.a*(this.g-e);else{var i=pi(this.e0,this.e1,this.e2,this.e3,e);n=this.a*(this.g-i)}var a=this.ns*Mt(t-this.long0),o=this.x0+n*Math.sin(a),s=this.y0+this.rh-n*Math.cos(a);return r.x=o,r.y=s,r}function ilt(r){r.x-=this.x0,r.y=this.rh-r.y+this.y0;var t,e,n,i;this.ns>=0?(e=Math.sqrt(r.x*r.x+r.y*r.y),t=1):(e=-Math.sqrt(r.x*r.x+r.y*r.y),t=-1);var a=0;if(e!==0&&(a=Math.atan2(t*r.x,t*r.y)),this.sphere)return i=Mt(this.long0+a/this.ns),n=Ku(this.g-e/this.a),r.x=i,r.y=n,r;var o=this.g-e/this.a;return n=yx(o,this.e0,this.e1,this.e2,this.e3),i=Mt(this.long0+a/this.ns),r.x=i,r.y=n,r}var alt=["Equidistant_Conic","eqdc"];const olt={init:rlt,forward:nlt,inverse:ilt,names:alt};function slt(){this.R=this.a}function llt(r){var t=r.x,e=r.y,n=Mt(t-this.long0),i,a;Math.abs(e)<=Ct&&(i=this.x0+this.R*n,a=this.y0);var o=Nu(2*Math.abs(e/Math.PI));(Math.abs(n)<=Ct||Math.abs(Math.abs(e)-vt)<=Ct)&&(i=this.x0,e>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*o):a=this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/n-n/Math.PI),l=s*s,u=Math.sin(o),h=Math.cos(o),c=h/(u+h-1),f=c*c,d=c*(2/u-1),g=d*d,p=Math.PI*this.R*(s*(c-g)+Math.sqrt(l*(c-g)*(c-g)-(g+l)*(f-g)))/(g+l);n<0&&(p=-p),i=this.x0+p;var v=l+c;return p=Math.PI*this.R*(d*v-s*Math.sqrt((g+l)*(l+1)-v*v))/(g+l),e>=0?a=this.y0+p:a=this.y0-p,r.x=i,r.y=a,r}function ult(r){var t,e,n,i,a,o,s,l,u,h,c,f,d;return r.x-=this.x0,r.y-=this.y0,c=Math.PI*this.R,n=r.x/c,i=r.y/c,a=n*n+i*i,o=-Math.abs(i)*(1+a),s=o-2*i*i+n*n,l=-2*o+1+2*i*i+a*a,d=i*i/l+(2*s*s*s/l/l/l-9*o*s/l/l)/27,u=(o-s*s/3/l)/l,h=2*Math.sqrt(-u/3),c=3*d/u/h,Math.abs(c)>1&&(c>=0?c=1:c=-1),f=Math.acos(c)/3,r.y>=0?e=(-h*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI:e=-(-h*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI,Math.abs(n)<Ct?t=this.long0:t=Mt(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-i*i)+a*a))/2/n),r.x=t,r.y=e,r}var hlt=["Van_der_Grinten_I","VanDerGrinten","vandg"];const clt={init:slt,forward:llt,inverse:ult,names:hlt};function flt(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function dlt(r){var t=r.x,e=r.y,n=Math.sin(r.y),i=Math.cos(r.y),a=Mt(t-this.long0),o,s,l,u,h,c,f,d,g,p,v,m,y,_,x,w,S,T,b,E,C,M,A;return this.sphere?Math.abs(this.sin_p12-1)<=Ct?(r.x=this.x0+this.a*(vt-e)*Math.sin(a),r.y=this.y0-this.a*(vt-e)*Math.cos(a),r):Math.abs(this.sin_p12+1)<=Ct?(r.x=this.x0+this.a*(vt+e)*Math.sin(a),r.y=this.y0+this.a*(vt+e)*Math.cos(a),r):(T=this.sin_p12*n+this.cos_p12*i*Math.cos(a),w=Math.acos(T),S=w?w/Math.sin(w):1,r.x=this.x0+this.a*S*i*Math.sin(a),r.y=this.y0+this.a*S*(this.cos_p12*n-this.sin_p12*i*Math.cos(a)),r):(o=Ly(this.es),s=Dy(this.es),l=Oy(this.es),u=Ny(this.es),Math.abs(this.sin_p12-1)<=Ct?(h=this.a*pi(o,s,l,u,vt),c=this.a*pi(o,s,l,u,e),r.x=this.x0+(h-c)*Math.sin(a),r.y=this.y0-(h-c)*Math.cos(a),r):Math.abs(this.sin_p12+1)<=Ct?(h=this.a*pi(o,s,l,u,vt),c=this.a*pi(o,s,l,u,e),r.x=this.x0+(h+c)*Math.sin(a),r.y=this.y0+(h+c)*Math.cos(a),r):(f=n/i,d=og(this.a,this.e,this.sin_p12),g=og(this.a,this.e,n),p=Math.atan((1-this.es)*f+this.es*d*this.sin_p12/(g*i)),v=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(p)-this.sin_p12*Math.cos(a)),v===0?b=Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):Math.abs(Math.abs(v)-Math.PI)<=Ct?b=-Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):b=Math.asin(Math.sin(a)*Math.cos(p)/Math.sin(v)),m=this.e*this.sin_p12/Math.sqrt(1-this.es),y=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es),_=m*y,x=y*y,E=b*b,C=E*b,M=C*b,A=M*b,w=d*b*(1-E*x*(1-x)/6+C/8*_*(1-2*x)+M/120*(x*(4-7*x)-3*m*m*(1-7*x))-A/48*_),r.x=this.x0+w*Math.sin(v),r.y=this.y0+w*Math.cos(v),r))}function glt(r){r.x-=this.x0,r.y-=this.y0;var t,e,n,i,a,o,s,l,u,h,c,f,d,g,p,v,m,y,_,x,w,S,T,b;return this.sphere?(t=Math.sqrt(r.x*r.x+r.y*r.y),t>2*vt*this.a?void 0:(e=t/this.a,n=Math.sin(e),i=Math.cos(e),a=this.long0,Math.abs(t)<=Ct?o=this.lat0:(o=Nu(i*this.sin_p12+r.y*n*this.cos_p12/t),s=Math.abs(this.lat0)-vt,Math.abs(s)<=Ct?this.lat0>=0?a=Mt(this.long0+Math.atan2(r.x,-r.y)):a=Mt(this.long0-Math.atan2(-r.x,r.y)):a=Mt(this.long0+Math.atan2(r.x*n,t*this.cos_p12*i-r.y*this.sin_p12*n))),r.x=a,r.y=o,r)):(l=Ly(this.es),u=Dy(this.es),h=Oy(this.es),c=Ny(this.es),Math.abs(this.sin_p12-1)<=Ct?(f=this.a*pi(l,u,h,c,vt),t=Math.sqrt(r.x*r.x+r.y*r.y),d=f-t,o=yx(d/this.a,l,u,h,c),a=Mt(this.long0+Math.atan2(r.x,-1*r.y)),r.x=a,r.y=o,r):Math.abs(this.sin_p12+1)<=Ct?(f=this.a*pi(l,u,h,c,vt),t=Math.sqrt(r.x*r.x+r.y*r.y),d=t-f,o=yx(d/this.a,l,u,h,c),a=Mt(this.long0+Math.atan2(r.x,r.y)),r.x=a,r.y=o,r):(t=Math.sqrt(r.x*r.x+r.y*r.y),v=Math.atan2(r.x,r.y),g=og(this.a,this.e,this.sin_p12),m=Math.cos(v),y=this.e*this.cos_p12*m,_=-y*y/(1-this.es),x=3*this.es*(1-_)*this.sin_p12*this.cos_p12*m/(1-this.es),w=t/g,S=w-_*(1+_)*Math.pow(w,3)/6-x*(1+3*_)*Math.pow(w,4)/24,T=1-_*S*S/2-w*S*S*S/6,p=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*m),a=Mt(this.long0+Math.asin(Math.sin(v)*Math.sin(S)/Math.cos(p))),b=Math.sin(p),o=Math.atan2((b-this.es*T*this.sin_p12)*Math.tan(p),b*(1-this.es)),r.x=a,r.y=o,r))}var plt=["Azimuthal_Equidistant","aeqd"];const vlt={init:flt,forward:dlt,inverse:glt,names:plt};function mlt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function ylt(r){var t,e,n,i,a,o,s,l,u=r.x,h=r.y;return n=Mt(u-this.long0),t=Math.sin(h),e=Math.cos(h),i=Math.cos(n),o=this.sin_p14*t+this.cos_p14*e*i,a=1,(o>0||Math.abs(o)<=Ct)&&(s=this.a*a*e*Math.sin(n),l=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*e*i)),r.x=s,r.y=l,r}function _lt(r){var t,e,n,i,a,o,s;return r.x-=this.x0,r.y-=this.y0,t=Math.sqrt(r.x*r.x+r.y*r.y),e=Nu(t/this.a),n=Math.sin(e),i=Math.cos(e),o=this.long0,Math.abs(t)<=Ct?(s=this.lat0,r.x=o,r.y=s,r):(s=Nu(i*this.sin_p14+r.y*n*this.cos_p14/t),a=Math.abs(this.lat0)-vt,Math.abs(a)<=Ct?(this.lat0>=0?o=Mt(this.long0+Math.atan2(r.x,-r.y)):o=Mt(this.long0-Math.atan2(-r.x,r.y)),r.x=o,r.y=s,r):(o=Mt(this.long0+Math.atan2(r.x*n,t*this.cos_p14*i-r.y*this.sin_p14*n)),r.x=o,r.y=s,r))}var xlt=["ortho"];const Slt={init:mlt,forward:ylt,inverse:_lt,names:xlt};var br={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},er={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function wlt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=vt-tr/2?this.face=br.TOP:this.lat0<=-(vt-tr/2)?this.face=br.BOTTOM:Math.abs(this.long0)<=tr?this.face=br.FRONT:Math.abs(this.long0)<=vt+tr?this.face=this.long0>0?br.RIGHT:br.LEFT:this.face=br.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Tlt(r){var t={x:0,y:0},e,n,i,a,o,s,l={value:0};if(r.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(r.y)):e=r.y,n=r.x,this.face===br.TOP)a=vt-e,n>=tr&&n<=vt+tr?(l.value=er.AREA_0,i=n-vt):n>vt+tr||n<=-(vt+tr)?(l.value=er.AREA_1,i=n>0?n-Fr:n+Fr):n>-(vt+tr)&&n<=-tr?(l.value=er.AREA_2,i=n+vt):(l.value=er.AREA_3,i=n);else if(this.face===br.BOTTOM)a=vt+e,n>=tr&&n<=vt+tr?(l.value=er.AREA_0,i=-n+vt):n<tr&&n>=-tr?(l.value=er.AREA_1,i=-n):n<-tr&&n>=-(vt+tr)?(l.value=er.AREA_2,i=-n-vt):(l.value=er.AREA_3,i=n>0?-n+Fr:-n-Fr);else{var u,h,c,f,d,g,p;this.face===br.RIGHT?n=Fd(n,+vt):this.face===br.BACK?n=Fd(n,+Fr):this.face===br.LEFT&&(n=Fd(n,-vt)),f=Math.sin(e),d=Math.cos(e),g=Math.sin(n),p=Math.cos(n),u=d*p,h=d*g,c=f,this.face===br.FRONT?(a=Math.acos(u),i=F0(a,c,h,l)):this.face===br.RIGHT?(a=Math.acos(h),i=F0(a,c,-u,l)):this.face===br.BACK?(a=Math.acos(-u),i=F0(a,c,-h,l)):this.face===br.LEFT?(a=Math.acos(-h),i=F0(a,c,u,l)):(a=i=0,l.value=er.AREA_0)}return s=Math.atan(12/Fr*(i+Math.acos(Math.sin(i)*Math.cos(tr))-vt)),o=Math.sqrt((1-Math.cos(a))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===er.AREA_1?s+=vt:l.value===er.AREA_2?s+=Fr:l.value===er.AREA_3&&(s+=1.5*Fr),t.x=o*Math.cos(s),t.y=o*Math.sin(s),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,r.x=t.x,r.y=t.y,r}function blt(r){var t={lam:0,phi:0},e,n,i,a,o,s,l,u,h,c={value:0};if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,n=Math.atan(Math.sqrt(r.x*r.x+r.y*r.y)),e=Math.atan2(r.y,r.x),r.x>=0&&r.x>=Math.abs(r.y)?c.value=er.AREA_0:r.y>=0&&r.y>=Math.abs(r.x)?(c.value=er.AREA_1,e-=vt):r.x<0&&-r.x>=Math.abs(r.y)?(c.value=er.AREA_2,e=e<0?e+Fr:e-Fr):(c.value=er.AREA_3,e+=vt),h=Fr/12*Math.tan(e),o=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),s=Math.atan(o),i=Math.cos(e),a=Math.tan(n),l=1-i*i*a*a*(1-Math.cos(Math.atan(1/Math.cos(s)))),l<-1?l=-1:l>1&&(l=1),this.face===br.TOP)u=Math.acos(l),t.phi=vt-u,c.value===er.AREA_0?t.lam=s+vt:c.value===er.AREA_1?t.lam=s<0?s+Fr:s-Fr:c.value===er.AREA_2?t.lam=s-vt:t.lam=s;else if(this.face===br.BOTTOM)u=Math.acos(l),t.phi=u-vt,c.value===er.AREA_0?t.lam=-s+vt:c.value===er.AREA_1?t.lam=-s:c.value===er.AREA_2?t.lam=-s-vt:t.lam=s<0?-s-Fr:-s+Fr;else{var f,d,g;f=l,h=f*f,h>=1?g=0:g=Math.sqrt(1-h)*Math.sin(s),h+=g*g,h>=1?d=0:d=Math.sqrt(1-h),c.value===er.AREA_1?(h=d,d=-g,g=h):c.value===er.AREA_2?(d=-d,g=-g):c.value===er.AREA_3&&(h=d,d=g,g=-h),this.face===br.RIGHT?(h=f,f=-d,d=h):this.face===br.BACK?(f=-f,d=-d):this.face===br.LEFT&&(h=f,f=d,d=-h),t.phi=Math.acos(-g)-vt,t.lam=Math.atan2(d,f),this.face===br.RIGHT?t.lam=Fd(t.lam,-vt):this.face===br.BACK?t.lam=Fd(t.lam,-Fr):this.face===br.LEFT&&(t.lam=Fd(t.lam,+vt))}if(this.es!==0){var p,v,m;p=t.phi<0?1:0,v=Math.tan(t.phi),m=this.b/Math.sqrt(v*v+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-m*m)/(this.one_minus_f*m)),p&&(t.phi=-t.phi)}return t.lam+=this.long0,r.x=t.lam,r.y=t.phi,r}function F0(r,t,e,n){var i;return r<Ct?(n.value=er.AREA_0,i=0):(i=Math.atan2(t,e),Math.abs(i)<=tr?n.value=er.AREA_0:i>tr&&i<=vt+tr?(n.value=er.AREA_1,i-=vt):i>vt+tr||i<=-(vt+tr)?(n.value=er.AREA_2,i=i>=0?i-Fr:i+Fr):(n.value=er.AREA_3,i+=vt)),i}function Fd(r,t){var e=r+t;return e<-Fr?e+=Nm:e>+Fr&&(e-=Nm),e}var Elt=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Clt={init:wlt,forward:Tlt,inverse:blt,names:Elt};var $M=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],hv=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],EW=.8487,CW=1.3523,MW=nu/5,Mlt=1/MW,yd=18,_x=function(r,t){return r[0]+t*(r[1]+t*(r[2]+t*r[3]))},Alt=function(r,t){return r[1]+t*(2*r[2]+t*3*r[3])};function Ilt(r,t,e,n){for(var i=t;n;--n){var a=r(i);if(i-=a,Math.abs(a)<e)break}return i}function Rlt(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Plt(r){var t=Mt(r.x-this.long0),e=Math.abs(r.y),n=Math.floor(e*MW);n<0?n=0:n>=yd&&(n=yd-1),e=nu*(e-Mlt*n);var i={x:_x($M[n],e)*t,y:_x(hv[n],e)};return r.y<0&&(i.y=-i.y),i.x=i.x*this.a*EW+this.x0,i.y=i.y*this.a*CW+this.y0,i}function Llt(r){var t={x:(r.x-this.x0)/(this.a*EW),y:Math.abs(r.y-this.y0)/(this.a*CW)};if(t.y>=1)t.x/=$M[yd][0],t.y=r.y<0?-vt:vt;else{var e=Math.floor(t.y*yd);for(e<0?e=0:e>=yd&&(e=yd-1);;)if(hv[e][0]>t.y)--e;else if(hv[e+1][0]<=t.y)++e;else break;var n=hv[e],i=5*(t.y-n[0])/(hv[e+1][0]-n[0]);i=Ilt(function(a){return(_x(n,a)-t.y)/Alt(n,a)},i,Ct,100),t.x/=_x($M[e],i),t.y=(5*e+i)*Mn,r.y<0&&(t.y=-t.y)}return t.x=Mt(t.x+this.long0),t}var Dlt=["Robinson","robin"];const Olt={init:Rlt,forward:Plt,inverse:Llt,names:Dlt};function Nlt(){this.name="geocent"}function Flt(r){var t=gW(r,this.es,this.a);return t}function klt(r){var t=pW(r,this.es,this.a,this.b);return t}var Glt=["Geocentric","geocentric","geocent","Geocent"];const Blt={init:Nlt,forward:Flt,inverse:klt,names:Glt};var Vn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},xp={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function zlt(){if(Object.keys(xp).forEach((function(e){if(typeof this[e]>"u")this[e]=xp[e].def;else{if(xp[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);xp[e].num&&(this[e]=parseFloat(this[e]))}xp[e].degrees&&(this[e]=this[e]*Mn)}).bind(this)),Math.abs(Math.abs(this.lat0)-vt)<Ct?this.mode=this.lat0<0?Vn.S_POLE:Vn.N_POLE:Math.abs(this.lat0)<Ct?this.mode=Vn.EQUIT:(this.mode=Vn.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var r=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(r),this.sw=Math.sin(r)}function Vlt(r){r.x-=this.long0;var t=Math.sin(r.y),e=Math.cos(r.y),n=Math.cos(r.x),i,a;switch(this.mode){case Vn.OBLIQ:a=this.sinph0*t+this.cosph0*e*n;break;case Vn.EQUIT:a=e*n;break;case Vn.S_POLE:a=-t;break;case Vn.N_POLE:a=t;break}switch(a=this.pn1/(this.p-a),i=a*e*Math.sin(r.x),this.mode){case Vn.OBLIQ:a*=this.cosph0*t-this.sinph0*e*n;break;case Vn.EQUIT:a*=t;break;case Vn.N_POLE:a*=-(e*n);break;case Vn.S_POLE:a*=e*n;break}var o,s;return o=a*this.cg+i*this.sg,s=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-a*this.sg)*this.cw*s,a=o*s,r.x=i*this.a,r.y=a*this.a,r}function Ult(r){r.x/=this.a,r.y/=this.a;var t={x:r.x,y:r.y},e,n,i;i=1/(this.pn1-r.y*this.sw),e=this.pn1*r.x*i,n=this.pn1*r.y*this.cw*i,r.x=e*this.cg+n*this.sg,r.y=n*this.cg-e*this.sg;var a=ki(r.x,r.y);if(Math.abs(a)<Ct)t.x=0,t.y=r.y;else{var o,s;switch(s=1-a*a*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-s*s),this.mode){case Vn.OBLIQ:t.y=Math.asin(o*this.sinph0+r.y*s*this.cosph0/a),r.y=(o-this.sinph0*Math.sin(t.y))*a,r.x*=s*this.cosph0;break;case Vn.EQUIT:t.y=Math.asin(r.y*s/a),r.y=o*a,r.x*=s;break;case Vn.N_POLE:t.y=Math.asin(o),r.y=-r.y;break;case Vn.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(r.x,r.y)}return r.x=t.x+this.long0,r.y=t.y,r}var Wlt=["Tilted_Perspective","tpers"];const Hlt={init:zlt,forward:Vlt,inverse:Ult,names:Wlt};function $lt(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var r=1-this.es,t=1/r;this.radius_p=Math.sqrt(r),this.radius_p2=r,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Ylt(r){var t=r.x,e=r.y,n,i,a,o;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var s=this.radius_p/ki(this.radius_p*Math.cos(e),Math.sin(e));if(i=s*Math.cos(t)*Math.cos(e),a=s*Math.sin(t)*Math.cos(e),o=s*Math.sin(e),(this.radius_g-i)*i-a*a-o*o*this.radius_p_inv2<0)return r.x=Number.NaN,r.y=Number.NaN,r;n=this.radius_g-i,this.flip_axis?(r.x=this.radius_g_1*Math.atan(a/ki(o,n)),r.y=this.radius_g_1*Math.atan(o/n)):(r.x=this.radius_g_1*Math.atan(a/n),r.y=this.radius_g_1*Math.atan(o/ki(a,n)))}else this.shape==="sphere"&&(n=Math.cos(e),i=Math.cos(t)*n,a=Math.sin(t)*n,o=Math.sin(e),n=this.radius_g-i,this.flip_axis?(r.x=this.radius_g_1*Math.atan(a/ki(o,n)),r.y=this.radius_g_1*Math.atan(o/n)):(r.x=this.radius_g_1*Math.atan(a/n),r.y=this.radius_g_1*Math.atan(o/ki(a,n))));return r.x=r.x*this.a,r.y=r.y*this.a,r}function Xlt(r){var t=-1,e=0,n=0,i,a,o,s;if(r.x=r.x/this.a,r.y=r.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(r.y/this.radius_g_1),e=Math.tan(r.x/this.radius_g_1)*ki(1,n)):(e=Math.tan(r.x/this.radius_g_1),n=Math.tan(r.y/this.radius_g_1)*ki(1,e));var l=n/this.radius_p;if(i=e*e+l*l+t*t,a=2*this.radius_g*t,o=a*a-4*i*this.C,o<0)return r.x=Number.NaN,r.y=Number.NaN,r;s=(-a-Math.sqrt(o))/(2*i),t=this.radius_g+s*t,e*=s,n*=s,r.x=Math.atan2(e,t),r.y=Math.atan(n*Math.cos(r.x)/t),r.y=Math.atan(this.radius_p_inv2*Math.tan(r.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(r.y/this.radius_g_1),e=Math.tan(r.x/this.radius_g_1)*Math.sqrt(1+n*n)):(e=Math.tan(r.x/this.radius_g_1),n=Math.tan(r.y/this.radius_g_1)*Math.sqrt(1+e*e)),i=e*e+n*n+t*t,a=2*this.radius_g*t,o=a*a-4*i*this.C,o<0)return r.x=Number.NaN,r.y=Number.NaN,r;s=(-a-Math.sqrt(o))/(2*i),t=this.radius_g+s*t,e*=s,n*=s,r.x=Math.atan2(e,t),r.y=Math.atan(n*Math.cos(r.x)/t)}return r.x=r.x+this.long0,r}var Zlt=["Geostationary Satellite View","Geostationary_Satellite","geos"];const jlt={init:$lt,forward:Ylt,inverse:Xlt,names:Zlt};var Fv=1.340264,kv=-.081106,Gv=893e-6,Bv=.003796,xx=Math.sqrt(3)/2;function Klt(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function qlt(r){var t=Mt(r.x-this.long0),e=r.y,n=Math.asin(xx*Math.sin(e)),i=n*n,a=i*i*i;return r.x=t*Math.cos(n)/(xx*(Fv+3*kv*i+a*(7*Gv+9*Bv*i))),r.y=n*(Fv+kv*i+a*(Gv+Bv*i)),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function Jlt(r){r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a;var t=1e-9,e=12,n=r.y,i,a,o,s,l,u;for(u=0;u<e&&(i=n*n,a=i*i*i,o=n*(Fv+kv*i+a*(Gv+Bv*i))-r.y,s=Fv+3*kv*i+a*(7*Gv+9*Bv*i),n-=l=o/s,!(Math.abs(l)<t));++u);return i=n*n,a=i*i*i,r.x=xx*r.x*(Fv+3*kv*i+a*(7*Gv+9*Bv*i))/Math.cos(n),r.y=Math.asin(Math.sin(n)/xx),r.x=Mt(r.x+this.long0),r}var Qlt=["eqearth","Equal Earth","Equal_Earth"];const tut={init:Klt,forward:qlt,inverse:Jlt,names:Qlt};var Gm=1e-10;function eut(){var r;if(this.phi1=this.lat1,Math.abs(this.phi1)<Gm)throw new Error;this.es?(this.en=A2(this.es),this.m1=Dg(this.phi1,this.am1=Math.sin(this.phi1),r=Math.cos(this.phi1),this.en),this.am1=r/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=nut,this.forward=rut):(Math.abs(this.phi1)+Gm>=vt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=aut,this.forward=iut)}function rut(r){var t=Mt(r.x-(this.long0||0)),e=r.y,n,i,a;return n=this.am1+this.m1-Dg(e,i=Math.sin(e),a=Math.cos(e),this.en),i=a*t/(n*Math.sqrt(1-this.es*i*i)),r.x=n*Math.sin(i),r.y=this.am1-n*Math.cos(i),r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function nut(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var t,e,n,i;if(e=ki(r.x,r.y=this.am1-r.y),i=I2(this.am1+this.m1-e,this.es,this.en),(t=Math.abs(i))<vt)t=Math.sin(i),n=e*Math.atan2(r.x,r.y)*Math.sqrt(1-this.es*t*t)/Math.cos(i);else if(Math.abs(t-vt)<=Gm)n=0;else throw new Error;return r.x=Mt(n+(this.long0||0)),r.y=Ku(i),r}function iut(r){var t=Mt(r.x-(this.long0||0)),e=r.y,n,i;return i=this.cphi1+this.phi1-e,Math.abs(i)>Gm?(r.x=i*Math.sin(n=t*Math.cos(e)/i),r.y=this.cphi1-i*Math.cos(n)):r.x=r.y=0,r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function aut(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var t,e,n=ki(r.x,r.y=this.cphi1-r.y);if(e=this.cphi1+this.phi1-n,Math.abs(e)>vt)throw new Error;return Math.abs(Math.abs(e)-vt)<=Gm?t=0:t=n*Math.atan2(r.x,r.y)/Math.cos(e),r.x=Mt(t+(this.long0||0)),r.y=Ku(e),r}var out=["bonne","Bonne (Werner lat_1=90)"];const sut={init:eut,names:out};function lut(r){r.Proj.projections.add(h1),r.Proj.projections.add(c1),r.Proj.projections.add(rot),r.Proj.projections.add(fot),r.Proj.projections.add(yot),r.Proj.projections.add(Tot),r.Proj.projections.add(Iot),r.Proj.projections.add(Oot),r.Proj.projections.add(Bot),r.Proj.projections.add(Hot),r.Proj.projections.add(sst),r.Proj.projections.add(dst),r.Proj.projections.add(yst),r.Proj.projections.add(bst),r.Proj.projections.add(Ist),r.Proj.projections.add(Ost),r.Proj.projections.add(Bst),r.Proj.projections.add(Hst),r.Proj.projections.add(Kst),r.Proj.projections.add(elt),r.Proj.projections.add(olt),r.Proj.projections.add(clt),r.Proj.projections.add(vlt),r.Proj.projections.add(Slt),r.Proj.projections.add(Clt),r.Proj.projections.add(Olt),r.Proj.projections.add(Blt),r.Proj.projections.add(Hlt),r.Proj.projections.add(jlt),r.Proj.projections.add(tut),r.Proj.projections.add(sut)}hr.defaultDatum="WGS84";hr.Proj=as;hr.WGS84=new hr.Proj("WGS84");hr.Point=ag;hr.toPoint=vW;hr.defs=oi;hr.nadgrid=iat;hr.transform=mx;hr.mgrs=xat;hr.version="__VERSION__";lut(hr);function uut(r){const t=Object.keys(r.defs),e=t.length;let n,i;for(n=0;n<e;++n){const a=t[n];if(!Xt(a)){const o=r.defs(a);let s=o.units;!s&&o.projName==="longlat"&&(s="degrees"),tx(new zi({code:a,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:s}))}}for(n=0;n<e;++n){const a=t[n],o=Xt(a);for(i=0;i<e;++i){const s=t[i],l=Xt(s);if(!V8(a,s))if(r.defs[a]===r.defs[s])bm([o,l]);else{const u=r(a,s);Uh(o,l,aN(o,l,u.forward),aN(l,o,u.inverse))}}}}const hut=()=>{hr.defs("EPSG:3395","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs"),hr.defs("EPSG:4548","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs +type=crs"),hr.defs("EPSG:4490","+proj=longlat +ellps=GRS80 +no_defs +type=crs"),uut(hr);const r=new zi({code:"EPSG:4490",units:"degrees",axisOrientation:"neu"});r.setExtent([-180,-90,180,90]),r.setWorldExtent([-180,-90,180,90]),tx(r),Uh("EPSG:4326","EPSG:4490",function(i){return hr("EPSG:4326","EPSG:4490",i)},function(i){return hr("EPSG:4490","EPSG:4326",i)}),Uh("EPSG:3857","EPSG:4490",function(i){return hr("EPSG:3857","EPSG:4490",i)},function(i){return hr("EPSG:4490","EPSG:3857",i)});const t=new zi({code:"GCJ:02",axisOrientation:"enu",extent:[-20037508342789244e-9,-2003750834278071e-8,20037508342789244e-9,2003750834278071e-8],worldExtent:[-180,-85,180,85],global:!0,units:"m",getPointResolution:function(i,a){return i/Math.cosh(a[1]/6378137)}});bm([t]),Vh(J1,[t],yit,mit),Vh(q1,[t],tF,eF);const e=new zi({code:"BD:09",axisOrientation:"enu",extent:[-33554432,-33554432,33554432,33554432],worldExtent:[-180,-85,180,85],global:!0,units:"m",getPointResolution:function(i,a){return i/Math.cosh(a[1]/6378137)}});bm([e]),Vh(J1,[e],vit,pit),Vh(q1,[e],qN,JN);const n=new zi({code:"EPSG:3395",extent:[-20037508342789244e-9,-20037508342789244e-9,20037508342789244e-9,20037508342789244e-9],worldExtent:[-180,-80,180,84],global:!0,units:"m",axisOrientation:"neu"});tx(n),Uh("EPSG:4326","EPSG:3395",function(i){return hr("EPSG:4326","EPSG:3395",i)},function(i){return hr("EPSG:3395","EPSG:4326",i)}),Uh("EPSG:3857","EPSG:3395",function(i){return hr("EPSG:3857","EPSG:3395",i)},function(i){return hr("EPSG:3395","EPSG:3857",i)}),Uh("GCJ:02","EPSG:3395",function(i){const a=eF(i,i,void 0);return hr("EPSG:3857","EPSG:3395",a)},function(i){const a=hr("EPSG:3395","EPSG:3857",i);return tF(a,a,void 0)}),Uh("BD:09","EPSG:3395",function(i){const a=JN(i,i,void 0);return hr("EPSG:3857","EPSG:3395",a)},function(i){const a=hr("EPSG:3395","EPSG:3857",i);return qN(a,a,void 0)}),Vh([e],[t],QN,rF),Vh([t],[e],rF,QN)};class cut{constructor(t){ee(this,"map");hut();const n={...{center:[108.5525,34.3227],zoom:5,constrainResolution:!1,projection:"EPSG:4326"},...t.view},i=new ao(n);this.map=new w2({target:t.target,view:i,controls:XU({zoom:!1,rotate:!1,attribution:!1,...t.controls}),interactions:QU({doubleClickZoom:!1,...t.interactions})})}}const Xr=(r,t)=>r&&Object.prototype.hasOwnProperty.call(r,t)?typeof r[t]=="object"?Object.keys(r[t]).length>0:typeof r[t]=="boolean"?r[t]:!0:!1,fut=r=>{if(!r)return{center:[0,0],coordinates:void 0,minRadius:0,sqDistances:void 0,topCenter:[0,0]};let t,e,n,i,a;za(r.getExtent())[1]>=vu(r.getExtent())[1]?a=za(r.getExtent())[1]:a=vu(r.getExtent())[1],i=[(za(r.getExtent())[0]+vu(r.getExtent())[0])/2,a];const s=r.getType();if(s==="Polygon"){let u=0,h=0,c=0;e=r.getCoordinates()[0].slice(1),e.forEach(function(f){u+=f[0],h+=f[1],c++}),t=[u/c,h/c]}else s==="LineString"?(t=r.getCoordinateAt(.5),e=r.getCoordinates()):s==="Circle"?t=r.getCenter():t=ua(r.getExtent());let l;return e?(l=e.map(function(u){const h=u[0]-t[0],c=u[1]-t[1];return h*h+c*c}),n=Math.sqrt(Math.max.apply(Math,l))/3):n=Math.max(Me(r.getExtent()),kr(r.getExtent()))/3,{center:t,coordinates:e,minRadius:n,sqDistances:l,topCenter:i}},dut=(r,t)=>{r.getView().animate(t)},gut=["id"],put=Wr({__name:"index",props:{width:{default:"100%"},height:{default:"100%"},controls:{},interactions:{},view:{},pixelRatio:{},keyboardEventTarget:{},layers:{},maxTilesLoading:{},moveTolerance:{},overlays:{},target:{default:"map"}},emits:["load","changeZoom","singleclick","click","dblclick","pointerdrag","contextmenu","precompose","postrender","loadend","loadstart","moveend","movestart"],setup(r,{expose:t,emit:e}){var w;const n=r,i=Zn(()=>typeof n.target=="string"?n.target:n.target.id),a=ir(!1);let o=Er();const s=Zn(()=>typeof n.width=="number"?`${n.width}px`:n.width),l=Zn(()=>typeof n.height=="number"?`${n.height}px`:n.height),u=["singleclick","click","dblclick","pointerdrag","contextmenu","precompose","postrender","loadend","loadstart","moveend","movestart"],h=e,c=()=>new Promise((S,T)=>{o.value=new cut({...n}),o.value.map?(S("success"),a.value=!0,h("load")):T(new Error("fail"))});let f=ir(""),d=ir("");const g=S=>{d.value=S},p=()=>{var S,T;(S=o.value)==null||S.map.on("pointermove",b=>{var C,M,A,R;if(d.value){f.value=d.value;return}if(b.dragging){f.value="";return}const E=(C=o.value)==null?void 0:C.map.getEventPixel(b.originalEvent);if(E){const P=(M=o.value)==null?void 0:M.map.hasFeatureAtPixel(E);((R=(A=o.value)==null?void 0:A.map)==null?void 0:R.getTargetElement())&&(f.value=P?"pointer":"")}}),(T=o.value)==null||T.map.getView().once("change:resolution",()=>{var b;(b=o.value)==null||b.map.once("moveend",E=>{v(E)})}),u.forEach(b=>{var E;(E=o.value)==null||E.map.on(b,C=>{var M;h(b,C,(M=o.value)==null?void 0:M.map)})})},v=S=>{var b,E,C;const T={...S,zoom:(b=o.value)==null?void 0:b.map.getView().getZoom()};h("changeZoom",T,(E=o.value)==null?void 0:E.map),(C=o.value)==null||C.map.once("moveend",M=>{v(M)})},m=()=>{u.forEach(S=>{Cu(S)})},y=S=>{var b;const T=(b=o.value)==null?void 0:b.map.getLayers().getArray();return T==null?void 0:T.find(E=>E.get("id")===S)},_=()=>{var S;return(S=o.value)==null?void 0:S.map},x=S=>{var T,b;(T=o.value)!=null&&T.map&&dut((b=o.value)==null?void 0:b.map,S)};return fn(()=>{c().then(()=>{p()})}),jc(()=>{m()}),t({map:(w=o.value)==null?void 0:w.map,getMap:_,getLayerById:y,panTo:x,setCursor:g}),ns("VMap",o),(S,T)=>(nl(),Y1("div",{id:i.value,style:kS({width:s.value,height:l.value,cursor:qt(f)})},[a.value?Ya(S.$slots,"default",{key:0}):Xu("",!0)],12,gut))}}),k0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class AW extends My{constructor(t){t=t||{};const e=Object.assign({},t),n=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(k0.PRELOAD)}setPreload(t){this.set(k0.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(k0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(k0.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}function sg(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function YM(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const vut=new Error("disposed");let mf=null;function mut(r){mf||(mf=Dr(r.width,r.height,void 0,{willReadFrequently:!0}));const t=mf.canvas,e=r.width;t.width!==e&&(t.width=e);const n=r.height;return t.height!==n&&(t.height=n),mf.clearRect(0,0,e,n),mf.drawImage(r,0,0),mf.getImageData(0,0,e,n).data}const yut=[256,256];class Bm extends y2{constructor(t){const e=Et.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=sg(this.data_);return t?[t.width,t.height]:yut}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Et.IDLE&&this.state!==Et.ERROR)return;this.state=Et.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=Et.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=Et.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(vut),this.controller_=null),super.disposeInternal()}}const D2=.5,_ut=10,SF=.25;class O2{constructor(t,e,n,i,a,o){this.sourceProj_=t,this.targetProj_=e;let s={};const l=Qd(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const _=y[0]+"/"+y[1];return s[_]||(s[_]=l(y)),s[_]},this.maxSourceExtent_=i,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Me(i)>=Me(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Me(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Me(this.targetProj_.getExtent()):null;const u=za(n),h=vu(n),c=Ag(n),f=qd(n),d=this.transformInv_(u),g=this.transformInv_(h),p=this.transformInv_(c),v=this.transformInv_(f),m=_ut+(o?Math.max(0,Math.ceil(Math.log2(wm(n)/(o*o*256*256)))):0);if(this.addQuad_(u,h,c,f,d,g,p,v,m),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(_,x,w){y=Math.min(y,_.source[0][0],_.source[1][0],_.source[2][0])}),this.triangles_.forEach(_=>{if(Math.max(_.source[0][0],_.source[1][0],_.source[2][0])-y>this.sourceWorldWidth_/2){const x=[[_.source[0][0],_.source[0][1]],[_.source[1][0],_.source[1][1]],[_.source[2][0],_.source[2][1]]];x[0][0]-y>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-y>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-y>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const w=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-w<this.sourceWorldWidth_/2&&(_.source=x)}})}s={}}addTriangle_(t,e,n,i,a,o){this.triangles_.push({source:[i,a,o],target:[t,e,n]})}addQuad_(t,e,n,i,a,o,s,l,u){const h=rn([a,o,s,l]),c=this.sourceWorldWidth_?Me(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1;let g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const v=rn([t,e,n,i]);g=Me(v)/this.targetWorldWidth_>SF||g}!d&&this.sourceProj_.isGlobal()&&c&&(g=c>SF||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!jn(h,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)g=!0;else if(p=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(u>0){if(!g){const v=[(t[0]+n[0])/2,(t[1]+n[1])/2],m=this.transformInv_(v);let y;d?y=(Xs(a[0],f)+Xs(s[0],f))/2-Xs(m[0],f):y=(a[0]+s[0])/2-m[0];const _=(a[1]+s[1])/2-m[1];g=y*y+_*_>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const v=[(e[0]+n[0])/2,(e[1]+n[1])/2],m=this.transformInv_(v),y=[(i[0]+t[0])/2,(i[1]+t[1])/2],_=this.transformInv_(y);this.addQuad_(t,e,v,y,a,o,m,_,u-1),this.addQuad_(y,v,n,i,_,m,s,l,u-1)}else{const v=[(t[0]+e[0])/2,(t[1]+e[1])/2],m=this.transformInv_(v),y=[(n[0]+i[0])/2,(n[1]+i[1])/2],_=this.transformInv_(y);this.addQuad_(t,v,y,i,a,m,_,l,u-1),this.addQuad_(v,e,n,y,m,o,s,_,u-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(t,n,i,a,s,l),p&14||this.addTriangle_(t,n,e,a,s,o),p&&(p&13||this.addTriangle_(e,i,t,o,l,a),p&7||this.addTriangle_(e,i,n,o,l,s))}calculateSourceExtent(){const t=qn();return this.triangles_.forEach(function(e,n,i){const a=e.source;Lv(t,a[0]),Lv(t,a[1]),Lv(t,a[2])}),t}getTriangles(){return this.triangles_}}let eb;const Ks=[];function wF(r,t,e,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(t,e),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(t,n)+1,Math.max(e,i)),r.restore()}function rb(r,t){return Math.abs(r[t*4]-210)>2||Math.abs(r[t*4+3]-.75*255)>2}function xut(){if(eb===void 0){const r=Dr(6,6,Ks);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",wF(r,4,5,4,0),wF(r,4,5,0,5);const t=r.getImageData(0,0,3,3).data;eb=rb(t,0)||rb(t,4)||rb(t,8),tg(r),Ks.push(r.canvas)}return eb}function zm(r,t,e,n){const i=Ig(e,t,r);let a=rN(t,n,e);const o=t.getMetersPerUnit();o!==void 0&&(a*=o);const s=r.getMetersPerUnit();s!==void 0&&(a/=s);const l=r.getExtent();if(!l||mo(l,i)){const u=rN(r,a,i)/a;isFinite(u)&&u>0&&(a/=u)}return a}function IW(r,t,e,n){const i=ua(e);let a=zm(r,t,i,n);return(!isFinite(a)||a<=0)&&NR(e,function(o){return a=zm(r,t,o,n),isFinite(a)&&a>0}),a}function N2(r,t,e,n,i,a,o,s,l,u,h,c,f,d){const g=Dr(Math.round(e*r),Math.round(e*t),Ks);if(c||(g.imageSmoothingEnabled=!1),l.length===0)return g.canvas;g.scale(e,e);function p(w){return Math.round(w*e)/e}g.globalCompositeOperation="lighter";const v=qn();l.forEach(function(w,S,T){G8(v,w.extent)});let m;const y=e/n,_=(c?1:1+Math.pow(2,-24))/y;if(!f||l.length!==1||u!==0){if(m=Dr(Math.round(Me(v)*y),Math.round(kr(v)*y),Ks),c||(m.imageSmoothingEnabled=!1),i&&d){const w=(i[0]-v[0])*y,S=-(i[3]-v[3])*y,T=Me(i)*y,b=kr(i)*y;m.rect(w,S,T,b),m.clip()}l.forEach(function(w,S,T){if(w.image.width>0&&w.image.height>0){if(w.clipExtent){m.save();const A=(w.clipExtent[0]-v[0])*y,R=-(w.clipExtent[3]-v[3])*y,P=Me(w.clipExtent)*y,L=kr(w.clipExtent)*y;m.rect(c?A:Math.round(A),c?R:Math.round(R),c?P:Math.round(A+P)-Math.round(A),c?L:Math.round(R+L)-Math.round(R)),m.clip()}const b=(w.extent[0]-v[0])*y,E=-(w.extent[3]-v[3])*y,C=Me(w.extent)*y,M=kr(w.extent)*y;m.drawImage(w.image,u,u,w.image.width-2*u,w.image.height-2*u,c?b:Math.round(b),c?E:Math.round(E),c?C:Math.round(b+C)-Math.round(b),c?M:Math.round(E+M)-Math.round(E)),w.clipExtent&&m.restore()}})}const x=za(o);return s.getTriangles().forEach(function(w,S,T){const b=w.source,E=w.target;let C=b[0][0],M=b[0][1],A=b[1][0],R=b[1][1],P=b[2][0],L=b[2][1];const D=p((E[0][0]-x[0])/a),k=p(-(E[0][1]-x[1])/a),F=p((E[1][0]-x[0])/a),B=p(-(E[1][1]-x[1])/a),V=p((E[2][0]-x[0])/a),Y=p(-(E[2][1]-x[1])/a),q=C,lt=M;C=0,M=0,A-=q,R-=lt,P-=q,L-=lt;const X=[[A,R,0,0,F-D],[P,L,0,0,V-D],[0,0,A,R,B-k],[0,0,P,L,Y-k]],St=Gtt(X);if(!St)return;if(g.save(),g.beginPath(),xut()||!c){g.moveTo(F,B);const $=4,K=D-F,et=k-B;for(let W=0;W<$;W++)g.lineTo(F+p((W+1)*K/$),B+p(W*et/($-1))),W!=$-1&&g.lineTo(F+p((W+1)*K/$),B+p((W+1)*et/($-1)));g.lineTo(V,Y)}else g.moveTo(F,B),g.lineTo(D,k),g.lineTo(V,Y);g.clip(),g.transform(St[0],St[2],St[1],St[3],D,k),g.translate(v[0]-q,v[3]-lt);let mt;if(m)mt=m.canvas,g.scale(_,-_);else{const $=l[0],K=$.extent;mt=$.image,g.scale(Me(K)/mt.width,-kr(K)/mt.height)}g.drawImage(mt,0,0),g.restore()}),m&&(tg(m),Ks.push(m.canvas)),h&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,s.getTriangles().forEach(function(w,S,T){const b=w.target,E=(b[0][0]-x[0])/a,C=-(b[0][1]-x[1])/a,M=(b[1][0]-x[0])/a,A=-(b[1][1]-x[1])/a,R=(b[2][0]-x[0])/a,P=-(b[2][1]-x[1])/a;g.beginPath(),g.moveTo(M,A),g.lineTo(E,C),g.lineTo(R,P),g.closePath(),g.stroke()}),g.restore()),g.canvas}class fw extends Bm{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=t.sourceProj,n=e.getExtent(),i=t.sourceTileGrid.getExtent();this.clipExtent_=e.canWrapX()?i?Rn(n,i):n:i;const a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let s=this.sourceTileGrid_.getExtent();const l=o?Rn(a,o):a;if(wm(l)===0){this.state=Et.EMPTY;return}n&&(s?s=Rn(s,n):s=n);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),h=t.targetProj,c=IW(e,h,l,u);if(!isFinite(c)||c<=0){this.state=Et.EMPTY;return}const f=t.errorThreshold!==void 0?t.errorThreshold:D2;if(this.triangulation_=new O2(e,h,l,s,c*f,u),this.triangulation_.getTriangles().length===0){this.state=Et.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(c);let d=this.triangulation_.calculateSourceExtent();if(s&&(e.canWrapX()?(d[1]=gr(d[1],s[1],s[3]),d[3]=gr(d[3],s[1],s[3])):d=Rn(d,s)),!wm(d))this.state=Et.EMPTY;else{let g=0,p=0;e.canWrapX()&&(g=Me(n),p=Math.floor((d[0]-n[0])/g)),FR(d.slice(),e,!0).forEach(m=>{const y=this.sourceTileGrid_.getTileRangeForExtentAndZ(m,this.sourceZ_),_=t.getTileFunction;for(let x=y.minX;x<=y.maxX;x++)for(let w=y.minY;w<=y.maxY;w++){const S=_(this.sourceZ_,x,w,this.pixelRatio_);if(S){const T=p*g;this.sourceTiles_.push({tile:S,offset:T})}}++p}),this.sourceTiles_.length===0&&(this.state=Et.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let e=!1;if(this.sourceTiles_.forEach(g=>{var k;const p=g.tile;if(!p||p.getState()!==Et.LOADED)return;const v=p.getSize(),m=this.gutter_;let y;const _=YM(p.getData());_?y=_:(e=!0,y=mut(sg(p.getData())));const x=[v[0]+2*m,v[1]+2*m],w=y instanceof Float32Array,S=x[0]*x[1],T=w?Float32Array:Uint8ClampedArray,b=new T(y.buffer),E=T.BYTES_PER_ELEMENT,C=E*b.length/S,M=b.byteLength/x[1],A=Math.floor(M/E/x[0]),R=S*A;let P=b;if(b.length!==R){P=new T(R);let F=0,B=0;const V=x[0]*A;for(let Y=0;Y<x[1];++Y){for(let q=0;q<V;++q)P[F++]=b[B+q];B+=M/E}}const L=this.sourceTileGrid_.getTileCoordExtent(p.tileCoord);L[0]+=g.offset,L[2]+=g.offset;const D=(k=this.clipExtent_)==null?void 0:k.slice();D&&(D[0]+=g.offset,D[2]+=g.offset),t.push({extent:L,clipExtent:D,data:new Uint8ClampedArray(P.buffer),dataType:T,bytesPerPixel:C,pixelSize:x})}),this.sourceTiles_.length=0,t.length===0){this.state=Et.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),a=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(n),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let h,c;const f=t[0].bytesPerPixel,d=Math.ceil(f/3);for(let g=d-1;g>=0;--g){const p=[];for(let w=0,S=t.length;w<S;++w){const T=t[w],b=T.data,E=T.pixelSize,C=E[0],M=E[1],A=Dr(C,M,Ks),R=A.createImageData(C,M),P=R.data;let L=g*3;for(let D=0,k=P.length;D<k;D+=4)P[D]=b[L],P[D+1]=b[L+1],P[D+2]=b[L+2],P[D+3]=255,L+=f;A.putImageData(R,0,0),p.push({extent:T.extent,clipExtent:T.clipExtent,image:A.canvas})}const v=N2(a,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),s,u,this.triangulation_,p,this.gutter_,!1,!1,!1);for(let w=0,S=p.length;w<S;++w){const b=p[w].image.getContext("2d");tg(b),Ks.push(b.canvas)}const m=v.getContext("2d"),y=m.getImageData(0,0,v.width,v.height);tg(m),Ks.push(v),h||(c=new Uint8ClampedArray(f*y.width*y.height),h=new t[0].dataType(c.buffer));const _=y.data;let x=g*3;for(let w=0,S=_.length;w<S;w+=4)_[w+3]===255?(c[x]=_[w],c[x+1]=_[w+1],c[x+2]=_[w+2]):(c[x]=0,c[x+1]=0,c[x+2]=0),x+=f}if(e){const g=Dr(a,o),p=new ImageData(h,a);g.putImageData(p,0,0),this.reprojData_=g.canvas}else this.reprojData_=h;this.reprojSize_=[Math.round(a*this.pixelRatio_),Math.round(o*this.pixelRatio_)],this.state=Et.LOADED,this.changed()}load(){if(this.state!==Et.IDLE&&this.state!==Et.ERROR)return;this.state=Et.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const n=e.getState();if(n!==Et.IDLE&&n!==Et.LOADING)return;t++;const i=se(e,Bt.CHANGE,()=>{const a=e.getState();(a==Et.LOADED||a==Et.ERROR||a==Et.EMPTY)&&(Ve(i),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e}){e.getState()==Et.IDLE&&e.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ve),this.sourcesListenerKeys_=null}}class Fy extends y2{constructor(t,e,n,i,a,o,s,l,u,h,c,f){super(a,Et.IDLE,f),this.renderEdges_=c!==void 0?c:!1,this.pixelRatio_=s,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=o||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const d=i.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const v=g?Rn(d,g):d;if(wm(v)===0){this.state=Et.EMPTY;return}const m=t.getExtent();m&&(p?p=Rn(p,m):p=m);const y=i.getResolution(this.wrappedTileCoord_[0]),_=IW(t,n,v,y);if(!isFinite(_)||_<=0){this.state=Et.EMPTY;return}const x=h!==void 0?h:D2;if(this.triangulation_=new O2(t,n,v,p,_*x,y),this.triangulation_.getTriangles().length===0){this.state=Et.EMPTY;return}this.sourceZ_=e.getZForResolution(_);let w=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(w[1]=gr(w[1],p[1],p[3]),w[3]=gr(w[3],p[1],p[3])):w=Rn(w,p)),!wm(w))this.state=Et.EMPTY;else{let S=0,T=0;t.canWrapX()&&(S=Me(m),T=Math.floor((w[0]-m[0])/S)),FR(w.slice(),t,!0).forEach(E=>{const C=e.getTileRangeForExtentAndZ(E,this.sourceZ_);for(let M=C.minX;M<=C.maxX;M++)for(let A=C.minY;A<=C.maxY;A++){const R=u(this.sourceZ_,M,A,s);if(R){const P=T*S;this.sourceTiles_.push({tile:R,offset:P})}}++T}),this.sourceTiles_.length===0&&(this.state=Et.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{var i;const n=e.tile;if(n&&n.getState()==Et.LOADED){const a=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);a[0]+=e.offset,a[2]+=e.offset;const o=(i=this.clipExtent_)==null?void 0:i.slice();o&&(o[0]+=e.offset,o[2]+=e.offset),t.push({extent:a,clipExtent:o,image:n.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=Et.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i=typeof n=="number"?n:n[0],a=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=N2(i,a,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Et.LOADED}this.changed()}load(){if(this.state==Et.IDLE){this.state=Et.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const n=e.getState();if(n==Et.IDLE||n==Et.LOADING){t++;const i=se(e,Bt.CHANGE,a=>{const o=e.getState();(o==Et.LOADED||o==Et.ERROR||o==Et.EMPTY)&&(Ve(i),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},n,i){e.getState()==Et.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ve),this.sourcesListenerKeys_=null}release(){this.canvas_&&(tg(this.canvas_.getContext("2d")),Ks.push(this.canvas_),this.canvas_=null),super.release()}}function nb(r,t,e,n){return`${r},${ig(t,e,n)}`}function ib(r,t,e){if(!(e in r))return r[e]=new Set([t]),!0;const n=r[e],i=n.has(t);return i||n.add(t),!i}function Sut(r,t,e){const n=r[e];return n?n.delete(t):!1}function TF(r,t){const e=r.layerStatesArray[r.layerIndex];e.extent&&(t=Rn(t,na(e.extent,r.viewState.projection)));const n=e.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(r.viewState.projection).getExtent();i&&(t=Rn(t,i))}return t}class wut extends v2{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=qn(),this.tempTileRange_=new hw(0,0,0,0),this.tempTileCoord_=ng(0,0,0);const n=e.cacheSize!==void 0?e.cacheSize:512;this.tileCache_=new T2(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,n,i){const a=this.tileCache_,s=this.getLayer().getSource(),l=nb(s.getKey(),t,e,n);let u;if(a.containsKey(l))u=a.get(l);else{if(u=s.getTile(t,e,n,i.pixelRatio,i.viewState.projection),!u)return null;a.set(l,u)}return u}getTile(t,e,n,i){const a=this.getOrCreateTile(t,e,n,i);return a||null}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=Nr(e.pixelToCoordinateTransform,t.slice()),a=n.getExtent();if(a&&!mo(a,i))return null;const o=e.viewState,s=n.getRenderSource(),l=s.getTileGridForProjection(o.projection),u=s.getTilePixelRatio(e.pixelRatio);for(let h=l.getZForResolution(o.resolution);h>=l.getMinZoom();--h){const c=l.getTileCoordForCoordAndZ(i,h),f=this.getTile(h,c[1],c[2],e);if(!f||f.getState()!==Et.LOADED)continue;const d=l.getOrigin(h),g=Gr(l.getTileSize(h)),p=l.getResolution(h);let v;if(f instanceof lw)v=f.getImage();else if(f instanceof Bm){if(v=sg(f.getData()),!v)continue}else continue;const m=Math.floor(u*((i[0]-d[0])/p-c[1]*g[0])),y=Math.floor(u*((d[1]-i[1])/p-c[2]*g[1])),_=Math.round(u*s.getGutterForProjection(o.projection));return this.getImageData(v,m+_,y+_)}return null}prepareFrame(t){const e=this.getLayer().getSource();if(!e)return!1;const n=e.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(t,e,n,i,a){const o=t.viewState,s=this.getLayer(),l=s.getRenderSource(),u=l.getTileGridForProjection(o.projection),h=zt(l);h in t.wantedTiles||(t.wantedTiles[h]={});const c=t.wantedTiles[h],f=s.getMapInternal(),d=Math.max(n-a,u.getMinZoom(),u.getZForResolution(Math.min(s.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let g=n;g>=d;--g){const p=u.getTileRangeForExtentAndZ(e,g,this.tempTileRange_),v=u.getResolution(g);for(let m=p.minX;m<=p.maxX;++m)for(let y=p.minY;y<=p.maxY;++y){const _=this.getTile(g,m,y,t);if(!_||!ib(i,_,g))continue;const w=_.getKey();if(c[w]=!0,_.getState()===Et.IDLE&&!t.tileQueue.isKeyQueued(w)){const S=ng(g,m,y,this.tempTileCoord_);t.tileQueue.enqueue([_,h,u.getTileCoordCenter(S),v])}}}}findStaleTile_(t,e){const n=this.tileCache_,i=t[0],a=t[1],o=t[2],s=this.getStaleKeys();for(let l=0;l<s.length;++l){const u=nb(s[l],i,a,o);if(n.containsKey(u)){const h=n.get(u);if(h.getState()===Et.LOADED)return h.endTransition(zt(this)),ib(e,h,i),!0}}return!1}findAltTiles_(t,e,n,i){const a=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_);if(!a)return!1;let o=!0;const s=this.tileCache_,u=this.getLayer().getRenderSource().getKey();for(let h=a.minX;h<=a.maxX;++h)for(let c=a.minY;c<=a.maxY;++c){const f=nb(u,n,h,c);let d=!1;if(s.containsKey(f)){const g=s.get(f);g.getState()===Et.LOADED&&(ib(i,g,n),d=!0)}d||(o=!1)}return o}renderFrame(t,e){this.renderComplete=!0;const n=t.layerStatesArray[t.layerIndex],i=t.viewState,a=i.projection,o=i.resolution,s=i.center,l=t.pixelRatio,u=this.getLayer(),h=u.getSource(),c=h.getRevision(),f=h.getTileGridForProjection(a),d=f.getZForResolution(o,h.zDirection),g=f.getResolution(d),p=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==p&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=p):this.renderedSourceKey_=p;let v=t.extent;const m=h.getTilePixelRatio(l);this.prepareContainer(t,e);const y=this.context.canvas.width,_=this.context.canvas.height,x=n.extent&&na(n.extent);x&&(v=Rn(v,na(n.extent)));const w=g*y/2/m,S=g*_/2/m,T=[s[0]-w,s[1]-S,s[0]+w,s[1]+S],b={};this.renderedTiles.length=0;const E=u.getPreload();if(t.nextExtent){const V=f.getZForResolution(i.nextResolution,h.zDirection),Y=TF(t,t.nextExtent);this.enqueueTiles(t,Y,V,b,E)}const C=TF(t,v);if(this.enqueueTiles(t,C,d,b,0),E>0&&setTimeout(()=>{this.enqueueTiles(t,C,d-1,b,E-1)},0),!(d in b))return this.container;const M=zt(this),A=t.time;for(const V of b[d]){const Y=V.getState();if((V instanceof Fy||V instanceof fw)&&Y===Et.EMPTY)continue;const q=V.tileCoord;if(Y===Et.LOADED&&V.getAlpha(M,A)===1){V.endTransition(M);continue}if(this.renderComplete=!1,this.findStaleTile_(q,b)){Sut(b,V,d),t.animate=!0;continue}if(this.findAltTiles_(f,q,d+1,b))continue;const St=f.getMinZoom();for(let mt=d-1;mt>=St&&!this.findAltTiles_(f,q,mt,b);--mt);}const R=g/o*l/m,P=this.getRenderContext(t);Wa(this.tempTransform,y/2,_/2,R,R,0,-y/2,-_/2),n.extent&&this.clipUnrotated(P,t,x),h.getInterpolate()||(P.imageSmoothingEnabled=!1),this.preRender(P,t);const L=Object.keys(b).map(Number);L.sort($s);let D;const k=[],F=[];for(let V=L.length-1;V>=0;--V){const Y=L[V],q=h.getTilePixelSize(Y,l,a),X=f.getResolution(Y)/g,St=q[0]*X*R,mt=q[1]*X*R,$=f.getTileCoordForCoordAndZ(za(T),Y),K=f.getTileCoordExtent($),et=Nr(this.tempTransform,[m*(K[0]-T[0])/g,m*(T[3]-K[3])/g]),W=m*h.getGutterForProjection(a);for(const Z of b[Y]){if(Z.getState()!==Et.LOADED)continue;const at=Z.tileCoord,O=$[1]-at[1],N=Math.round(et[0]-(O-1)*St),H=$[2]-at[2],Q=Math.round(et[1]-(H-1)*mt),J=Math.round(et[0]-O*St),ot=Math.round(et[1]-H*mt),ct=N-J,gt=Q-ot,pt=L.length===1;let ut=!1;D=[J,ot,J+ct,ot,J+ct,ot+gt,J,ot+gt];for(let Lt=0,Tt=k.length;Lt<Tt;++Lt)if(!pt&&Y<F[Lt]){const bt=k[Lt];jn([J,ot,J+ct,ot+gt],[bt[0],bt[3],bt[4],bt[7]])&&(ut||(P.save(),ut=!0),P.beginPath(),P.moveTo(D[0],D[1]),P.lineTo(D[2],D[3]),P.lineTo(D[4],D[5]),P.lineTo(D[6],D[7]),P.moveTo(bt[6],bt[7]),P.lineTo(bt[4],bt[5]),P.lineTo(bt[2],bt[3]),P.lineTo(bt[0],bt[1]),P.clip())}k.push(D),F.push(Y),this.drawTile(Z,t,J,ot,ct,gt,W,pt),ut&&P.restore(),this.renderedTiles.unshift(Z),this.updateUsedTiles(t.usedTiles,h,Z)}}this.renderedRevision=c,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Mu(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=l,this.renderedProjection=a,this.postRender(this.context,t),n.extent&&P.restore(),P.imageSmoothingEnabled=!0;const B=(V,Y)=>{const q=zt(h),lt=Y.wantedTiles[q],X=lt?Object.keys(lt).length:0;this.updateCacheSize(X),this.tileCache_.expireCache()};return t.postRenderFunctions.push(B),this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,e,n,i,a,o,s,l){let u;if(t instanceof Bm){if(u=sg(t.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(t);if(!u)return;const h=this.getRenderContext(e),c=zt(this),f=e.layerStatesArray[e.layerIndex],d=f.opacity*(l?t.getAlpha(c,e.time):1),g=d!==h.globalAlpha;g&&(h.save(),h.globalAlpha=d),h.drawImage(u,s,s,u.width-2*s,u.height-2*s,n,i,a,o),g&&h.restore(),d!==f.opacity?e.animate=!0:l&&t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,n){const i=zt(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}}class F2 extends AW{constructor(t){super(t)}createRenderer(){return new wut(this,{cacheSize:this.getCacheSize()})}}class Tut extends Cg{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=t.gutter||0,this.helper=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(Bt.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===Et.LOADED,this.loaded)this.uploadTile();else{if(t instanceof lw){const e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(Bt.CHANGE,this.handleTileChange_)}}uploadTile(){Ut()}setReady(){this.ready=!0,this.dispatchEvent(Bt.CHANGE)}handleTileChange_(){this.tile.getState()===Et.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(t){this.helper=t,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(Bt.CHANGE,this.handleTileChange_)}}const dw=34962,gw=34963,but=35040,k2=35044,XM=35048,Eut=5121,Cut=5123,Mut=5125,RW=5126,bF=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Aut(r,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!fet},t);const e=bF.length;for(let n=0;n<e;++n)try{const i=r.getContext(bF[n],t);if(i)return i}catch{}return null}const Iut={STATIC_DRAW:k2,STREAM_DRAW:but,DYNAMIC_DRAW:XM};class Sx{constructor(t,e){this.array_=null,this.type_=t,pe(t===dw||t===gw,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=e!==void 0?e:Iut.STATIC_DRAW}ofSize(t){return this.array_=new(ab(this.type_))(t),this}fromArray(t){return this.array_=ab(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(ab(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function ab(r){switch(r){case dw:return Float32Array;case gw:return Uint32Array;default:return Float32Array}}function PW(r,t,e){const n=e?r.LINEAR:r.NEAREST;r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,n)}function Rut(r,t,e,n){PW(r,t,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)}function EF(r,t,e,n,i,a){const o=r.getGL();let s,l;e instanceof Float32Array?(s=o.FLOAT,r.getExtension("OES_texture_float"),l=r.getExtension("OES_texture_float_linear")!==null):(s=o.UNSIGNED_BYTE,l=!0),PW(o,t,a&&l);const u=e.byteLength/n[1];let h=1;u%8===0?h=8:u%4===0?h=4:u%2===0&&(h=2);let c;switch(i){case 1:{c=o.LUMINANCE;break}case 2:{c=o.LUMINANCE_ALPHA;break}case 3:{c=o.RGB;break}case 4:{c=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}const f=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,h),o.texImage2D(o.TEXTURE_2D,0,c,n[0],n[1],0,c,s,e),o.pixelStorei(o.UNPACK_ALIGNMENT,f)}let ed=null;function Put(){ed=Dr(1,1,void 0,{willReadFrequently:!0})}class Lut extends Tut{constructor(t){super(t),this.textures=[],this.renderSize_=Gr(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const e=new Sx(dw,k2);e.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(e),this.coords=e,this.setTile(t.tile)}setHelper(t){var n;const e=(n=this.helper)==null?void 0:n.getGL();if(e){this.helper.deleteBuffer(this.coords);for(let i=0;i<this.textures.length;++i)e.deleteTexture(this.textures[i])}super.setHelper(t),t&&t.flushBufferData(this.coords)}uploadTile(){const t=this.helper,e=t.getGL(),n=this.tile;this.textures.length=0;let i;n instanceof lw||n instanceof Fy?i=n.getImage():i=n.getData();const a=sg(i);if(a){const y=e.createTexture();this.textures.push(y),this.bandCount=4,Rut(e,y,a,n.interpolate),this.setReady();return}i=YM(i);const o=n.getSize(),s=[o[0]+2*this.gutter,o[1]+2*this.gutter],l=i instanceof Float32Array,u=s[0]*s[1],h=l?Float32Array:Uint8Array,c=h.BYTES_PER_ELEMENT,f=i.byteLength/s[1];this.bandCount=Math.floor(f/c/s[0]);const d=Math.ceil(this.bandCount/4);if(d===1){const y=e.createTexture();this.textures.push(y),EF(t,y,i,s,this.bandCount,n.interpolate),this.setReady();return}const g=new Array(d);for(let y=0;y<d;++y){const _=e.createTexture();this.textures.push(_);const x=y<d-1?4:(this.bandCount-1)%4+1;g[y]=new h(u*x)}let p=0,v=0;const m=s[0]*this.bandCount;for(let y=0;y<s[1];++y){for(let _=0;_<m;++_){const x=i[v+_],w=Math.floor(p/this.bandCount),S=_%this.bandCount,T=Math.floor(S/4),b=g[T],E=b.length/u,C=S%4;b[w*E+C]=x,++p}v+=f/c}for(let y=0;y<d;++y){const _=this.textures[y],x=g[y],w=x.length/u;EF(t,_,x,s,w,n.interpolate)}this.setReady()}getImagePixelData_(t,e,n){const i=this.gutter,a=this.renderSize_[0],o=this.renderSize_[1];ed||Put(),ed.clearRect(0,0,1,1);const s=t.width,l=t.height,u=s-2*i,h=l-2*i,c=i+Math.floor(u*(e/a)),f=i+Math.floor(h*(n/o));let d;try{ed.drawImage(t,c,f,1,1,0,0,1,1),d=ed.getImageData(0,0,1,1).data}catch{return ed=null,null}return d}getArrayPixelData_(t,e,n,i){const a=this.gutter,o=this.renderSize_[0],s=this.renderSize_[1],l=e[0],u=e[1],h=l+2*a,c=u+2*a,f=a+Math.floor(l*(n/o)),d=a+Math.floor(u*(i/s));if(t instanceof DataView){const p=t.byteLength/(h*c),v=p*(d*h+f),m=t.buffer.slice(v,v+p);return new DataView(m)}const g=this.bandCount*(d*h+f);return t.slice(g,g+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null;if(this.tile instanceof Bm){const n=this.tile.getData(),i=YM(n);if(i){const a=this.tile.getSize();return this.getArrayPixelData_(i,a,t,e)}return this.getImagePixelData_(sg(n),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}}const G0={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Dut=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Out=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class CF{constructor(t){this.gl_=t.webGlContext;const e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer(),this.depthBuffer_=e.createRenderbuffer();const n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t.vertexShader||Dut),e.compileShader(n);const i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,t.fragmentShader||Out),e.compileShader(i),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,n),e.attachShader(this.renderTargetProgram_,i),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();const a=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(o=>{this.uniforms_.push({value:t.uniforms[o],location:e.getUniformLocation(this.renderTargetProgram_,o)})})}getGL(){return this.gl_}init(t){const e=this.getGL(),n=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.bindRenderbuffer(e.RENDERBUFFER,this.getDepthBuffer()),e.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;const i=0,a=e.RGBA,o=0,s=e.RGBA,l=e.UNSIGNED_BYTE,u=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,i,a,n[0],n[1],o,s,l,u),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n[0],n[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthBuffer_)}}apply(t,e,n,i){const a=this.getGL(),o=t.size;if(a.bindFramebuffer(a.FRAMEBUFFER,e?e.getFrameBuffer():null),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.renderTargetTexture_),!e){const l=zt(a.canvas);if(!t.renderTargets[l]){const u=a.getContextAttributes();u&&u.preserveDrawingBuffer&&(a.clearColor(0,0,0,0),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)),t.renderTargets[l]=!0}}a.disable(a.DEPTH_TEST),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),a.bindBuffer(a.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),a.useProgram(this.renderTargetProgram_),a.enableVertexAttribArray(this.renderTargetAttribLocation_),a.vertexAttribPointer(this.renderTargetAttribLocation_,2,a.FLOAT,!1,0,0),a.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),a.uniform1i(this.renderTargetTextureLocation_,0);const s=t.layerStatesArray[t.layerIndex].opacity;a.uniform1f(this.renderTargetOpacityLocation_,s),this.applyUniforms(t),n&&n(a,t),a.drawArrays(a.TRIANGLES,0,6),i&&i(a,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const e=this.getGL();let n,i=1;this.uniforms_.forEach(function(a){if(n=typeof a.value=="function"?a.value(t):a.value,n instanceof HTMLCanvasElement||n instanceof ImageData)a.texture||(a.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${i}`]),e.bindTexture(e.TEXTURE_2D,a.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,n.width,n.height,0,e.UNSIGNED_BYTE,new Uint8Array(n.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.uniform1i(a.location,i++);else if(Array.isArray(n))switch(n.length){case 2:e.uniform2f(a.location,n[0],n[1]);return;case 3:e.uniform3f(a.location,n[0],n[1],n[2]);return;case 4:e.uniform4f(a.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&e.uniform1f(a.location,n)})}}function LW(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function DW(r,t){return r[0]=t[0],r[1]=t[1],r[4]=t[2],r[5]=t[3],r[12]=t[4],r[13]=t[5],r}const Ls={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Xo={UNSIGNED_BYTE:Eut,UNSIGNED_SHORT:Cut,UNSIGNED_INT:Mut,FLOAT:RW},Tx={};function MF(r){return"shared/"+r}let AF=0;function Nut(){const r="unique/"+AF;return AF+=1,r}function Fut(r){let t=Tx[r];if(!t){const e=document.createElement("canvas");e.width=1,e.height=1,e.style.position="absolute",e.style.left="0",t={users:0,context:Aut(e)},Tx[r]=t}return t.users+=1,t.context}function kut(r){const t=Tx[r];if(!t||(t.users-=1,t.users>0))return;const e=t.context,n=e.getExtension("WEBGL_lose_context");n&&n.loseContext();const i=e.canvas;i.width=1,i.height=1,delete Tx[r]}class Gut extends jS{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?MF(t.canvasCacheKey):Nut(),this.gl_=Fut(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const e=this.gl_.canvas;e.addEventListener(G0.LOST,this.boundHandleWebGLContextLost_),e.addEventListener(G0.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=on(),this.offsetScaleMatrix_=on(),this.tmpMat4_=LW(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(n=>new CF({webGlContext:this.gl_,scaleRatio:n.scaleRatio,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms})):[new CF({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===MF(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,n=zt(t);let i=this.bufferCache_[n];if(!i){const a=e.createBuffer();i={buffer:t,webGlBuffer:a},this.bufferCache_[n]=i}e.bindBuffer(t.getType(),i.webGlBuffer)}flushBufferData(t){const e=this.gl_;this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=this.gl_,n=zt(t),i=this.bufferCache_[n];i&&!e.isContextLost()&&e.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(G0.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(G0.RESTORED,this.boundHandleWebGLContextRestored_),kut(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,e,n){const i=this.gl_,a=this.getCanvas(),o=t.size,s=t.pixelRatio;(a.width!==o[0]*s||a.height!==o[1]*s)&&(a.width=o[0]*s,a.height=o[1]*s,a.style.width=o[0]+"px",a.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,e?i.ZERO:i.ONE_MINUS_SRC_ALPHA),n?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindTexture(t,e,n){const i=this.gl_;i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.getUniformLocation(n),e)}prepareDrawToRenderTarget(t,e,n,i){const a=this.gl_,o=e.getSize();a.bindFramebuffer(a.FRAMEBUFFER,e.getFramebuffer()),a.bindRenderbuffer(a.RENDERBUFFER,e.getDepthbuffer()),a.viewport(0,0,o[0],o[1]),a.bindTexture(a.TEXTURE_2D,e.getTexture()),a.clearColor(0,0,0,0),a.depthRange(0,1),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.enable(a.BLEND),a.blendFunc(a.ONE,n?a.ZERO:a.ONE_MINUS_SRC_ALPHA),i?(a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL)):a.disable(a.DEPTH_TEST)}drawElements(t,e){const n=this.gl_;this.getExtension("OES_element_index_uint");const i=n.UNSIGNED_INT,a=4,o=e-t,s=t*a;n.drawElements(n.TRIANGLES,o,i,s)}finalizeDraw(t,e,n){for(let i=0,a=this.postProcessPasses_.length;i<a;i++)i===a-1?this.postProcessPasses_[i].apply(t,null,e,n):this.postProcessPasses_[i].apply(t,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const e=t.size,n=t.viewState.rotation,i=t.pixelRatio;this.setUniformFloatValue(Ls.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Ls.ZOOM,t.viewState.zoom),this.setUniformFloatValue(Ls.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(Ls.PIXEL_RATIO,i),this.setUniformFloatVec2(Ls.VIEWPORT_SIZE_PX,[e[0],e[1]]),this.setUniformFloatValue(Ls.ROTATION,n)}applyHitDetectionUniform(t){const e=this.getUniformLocation(Ls.HIT_DETECTION);this.getGL().uniform1i(e,t?1:0),t&&this.setUniformFloatValue(Ls.PIXEL_RATIO,.5)}applyUniforms(t){const e=this.gl_;let n,i=0;this.uniforms_.forEach(a=>{if(n=typeof a.value=="function"?a.value(t):a.value,n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData||n instanceof WebGLTexture){n instanceof WebGLTexture&&!a.texture?(a.prevValue=void 0,a.texture=n):a.texture||(a.prevValue=void 0,a.texture=e.createTexture()),this.bindTexture(a.texture,i,a.name),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const o=!(n instanceof HTMLImageElement)||n.complete;!(n instanceof WebGLTexture)&&o&&a.prevValue!==n&&(a.prevValue=n,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),i++}else if(Array.isArray(n)&&n.length===6)this.setUniformMatrixValue(a.name,DW(this.tmpMat4_,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:e.uniform2f(this.getUniformLocation(a.name),n[0],n[1]);return;case 3:e.uniform3f(this.getUniformLocation(a.name),n[0],n[1],n[2]);return;case 4:e.uniform4f(this.getUniformLocation(a.name),n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&e.uniform1f(this.getUniformLocation(a.name),n)})}useProgram(t,e){this.gl_.useProgram(t),this.currentProgram_=t,this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){const n=this.gl_,i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}getProgram(t,e){const n=this.gl_,i=this.compileShader(t,n.FRAGMENT_SHADER),a=this.compileShader(e,n.VERTEX_SHADER),o=n.createProgram();if(n.attachShader(o,i),n.attachShader(o,a),n.linkProgram(o),!n.getShaderParameter(i,n.COMPILE_STATUS)){const s=`Fragment shader compilation failed: ${n.getShaderInfoLog(i)}`;throw new Error(s)}if(n.deleteShader(i),!n.getShaderParameter(a,n.COMPILE_STATUS)){const s=`Vertex shader compilation failed: ${n.getShaderInfoLog(a)}`;throw new Error(s)}if(n.deleteShader(a),!n.getProgramParameter(o,n.LINK_STATUS)){const s=`GL program linking failed: ${n.getProgramInfoLog(o)}`;throw new Error(s)}return o}getUniformLocation(t){const e=zt(this.currentProgram_);return this.uniformLocationsByProgram_[e]===void 0&&(this.uniformLocationsByProgram_[e]={}),this.uniformLocationsByProgram_[e][t]===void 0&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=zt(this.currentProgram_);return this.attribLocationsByProgram_[e]===void 0&&(this.attribLocationsByProgram_[e]={}),this.attribLocationsByProgram_[e][t]===void 0&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const n=t.size,i=t.viewState.rotation,a=t.viewState.resolution,o=t.viewState.center;return Wa(e,0,0,2/(a*n[0]),2/(a*n[1]),-i,-o[0],-o[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,n,i,a){const o=this.getAttributeLocation(t);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,e,n,!1,i,a))}enableAttributes(t){const e=But(t);let n=0;for(let i=0;i<t.length;i++){const a=t[i];this.enableAttributeArray_(a.name,a.size,a.type||RW,e,n),n+=a.size*OW(a.type)}}handleWebGLContextLost(t){Eg(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,e,n){const i=this.gl_;n=n||i.createTexture();const a=0,o=i.RGBA,s=0,l=i.RGBA,u=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,n),e?i.texImage2D(i.TEXTURE_2D,a,o,l,u,e):i.texImage2D(i.TEXTURE_2D,a,o,t[0],t[1],s,l,u,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n}}function But(r){let t=0;for(let e=0;e<r.length;e++){const n=r[e];t+=n.size*OW(n.type)}return t}function OW(r){switch(r){case Xo.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Xo.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Xo.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Xo.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class pw extends BU{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=on(),this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},t.addChangeListener(We.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const n=this.getLayer();if(n.hasListener(yn.PRECOMPOSE)){const i=new Dv(yn.PRECOMPOSE,void 0,e,t);n.dispatchEvent(i)}}dispatchPostComposeEvent(t,e){const n=this.getLayer();if(n.hasListener(yn.POSTCOMPOSE)){const i=new Dv(yn.POSTCOMPOSE,void 0,e,t);n.dispatchEvent(i)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e=!0,n=-1,i;for(let o=0,s=t.layerStatesArray.length;o<s;o++){const l=t.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof pw)){e=!0;continue}const h=l.getClassName();if((e||h!==i)&&(n+=1,e=!1),i=h,u===this)break}const a="map/"+t.mapId+"/group/"+n;(!this.helper||!this.helper.canvasCacheKeyMatches(a)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new Gut({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:a}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}clearCache(){}disposeInternal(){var t;this.clearCache(),this.removeHelper(),(t=this.getLayer())==null||t.removeChangeListener(We.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){Wa(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);const a=new Dv(t,this.inversePixelTransform_,n,e);i.dispatchEvent(a)}}preRender(t,e){this.dispatchRenderEvent_(yn.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(yn.POSTRENDER,t,e)}}const zut={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},Vut={};function IF(r){return 1/(r+2)}function Uut(){return{tileIds:new Set,representationsByZ:{}}}function RF(r,t){return r.tileIds.has(zt(t))}function PF(r,t,e){const n=r.representationsByZ;e in n||(n[e]=new Set),n[e].add(t),r.tileIds.add(zt(t.tile))}function ob(r,t){const e=r.layerStatesArray[r.layerIndex];e.extent&&(t=Rn(t,na(e.extent,r.viewState.projection)));const n=e.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(r.viewState.projection).getExtent();i&&(t=Rn(t,i))}return t}function ZM(r,t){return`${r.getKey()},${tu(t)}`}class Wut extends pw{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=on(),this.tempMat4=LW(),this.tempTileRange_=new hw(0,0,0,0),this.tempTileCoord_=ng(0,0,0),this.tempSize_=[0,0];const n=e.cacheSize!==void 0?e.cacheSize:512;this.tileRepresentationCache=new T2(n),this.frameState=null,this.projection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}prepareFrameInternal(t){this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=t.viewState.projection):this.projection_=t.viewState.projection;const n=this.getLayer().getRenderSource();return!n||Zu(ob(t,t.extent))?!1:n.getState()==="ready"}createTileRepresentation(t){return Ut()}enqueueTiles(t,e,n,i,a){const o=t.viewState,s=this.getLayer(),l=s.getRenderSource(),u=l.getTileGridForProjection(o.projection),h=l.getGutterForProjection(o.projection),c=zt(l);c in t.wantedTiles||(t.wantedTiles[c]={});const f=t.wantedTiles[c],d=this.tileRepresentationCache,g=s.getMapInternal(),p=Math.max(n-a,u.getMinZoom(),u.getZForResolution(Math.min(s.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let v=n;v>=p;--v){const m=u.getTileRangeForExtentAndZ(e,v,this.tempTileRange_),y=u.getResolution(v);for(let _=m.minX;_<=m.maxX;++_)for(let x=m.minY;x<=m.maxY;++x){const w=ng(v,_,x,this.tempTileCoord_),S=ZM(l,w);let T,b;if(d.containsKey(S)&&(T=d.get(S),b=T.tile),(!T||T.tile.key!==l.getKey())&&(b=l.getTile(v,_,x,t.pixelRatio,o.projection),!b)||RF(i,b))continue;T?T.setTile(b):(T=this.createTileRepresentation({tile:b,grid:u,helper:this.helper,gutter:h}),d.set(S,T)),PF(i,T,v);const E=b.getKey();f[E]=!0,b.getState()===Et.IDLE&&(t.tileQueue.isKeyQueued(E)||t.tileQueue.enqueue([b,c,u.getTileCoordCenter(w),y]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,e,n,i,a,o,s,l,u,h,c){}renderTileMask(t,e,n,i){}drawTile_(t,e,n,i,a,o,s){if(!e.ready)return;const u=e.tile.tileCoord,h=tu(u),c=h in o?o[h]:1,f=s.getResolution(n),d=Gr(s.getTileSize(n),this.tempSize_),g=s.getOrigin(n),p=s.getTileCoordExtent(u),v=c<1?-1:IF(n);c<1&&(t.animate=!0);const m=t.viewState,y=m.center[0],_=m.center[1],x=d[0]+2*i,w=d[1]+2*i,S=x/w,T=(y-g[0])/(d[0]*f),b=(g[1]-_)/(d[1]*f),E=m.resolution/f,C=u[1],M=u[2];ptt(this.tileTransform_),KO(this.tileTransform_,2/(t.size[0]*E/x),-2/(t.size[1]*E/x)),mtt(this.tileTransform_,m.rotation),KO(this.tileTransform_,1,1/S),F8(this.tileTransform_,(d[0]*(C-T)-i)/x,(d[1]*(M-b)-i)/w),this.renderTile(e,this.tileTransform_,t,a,f,d,g,p,v,i,c)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const e=this.helper.getGL();this.preRender(e,t);const n=t.viewState,i=this.getLayer(),a=i.getRenderSource(),o=a.getTileGridForProjection(n.projection),s=a.getGutterForProjection(n.projection),l=ob(t,t.extent),u=o.getZForResolution(n.resolution,a.zDirection),h=Uut(),c=i.getPreload();if(t.nextExtent){const S=o.getZForResolution(n.nextResolution,a.zDirection),T=ob(t,t.nextExtent);this.enqueueTiles(t,T,S,h,c)}this.enqueueTiles(t,l,u,h,0),c>0&&setTimeout(()=>{this.enqueueTiles(t,l,u-1,h,c-1)},0);const f={},d=zt(this),g=t.time;let p=!1;const v=h.representationsByZ;if(u in v)for(const S of v[u]){const T=S.tile;if((T instanceof Fy||T instanceof fw)&&T.getState()===Et.EMPTY)continue;const b=T.tileCoord;if(S.ready){const M=T.getAlpha(d,g);if(M===1){T.endTransition(d);continue}p=!0;const A=tu(b);f[A]=M}if(this.renderComplete=!1,this.findAltTiles_(o,b,u+1,h))continue;const C=o.getMinZoom();for(let M=u-1;M>=C&&!this.findAltTiles_(o,b,M,h);--M);}const m=Object.keys(v).map(Number).sort(utt);if(this.beforeTilesMaskRender(t))for(let S=0,T=m.length;S<T;++S){const b=m[S];for(const E of v[b]){const C=E.tile.tileCoord;if(tu(C)in f)continue;const A=o.getTileCoordExtent(C);this.renderTileMask(E,b,A,IF(b))}}this.beforeTilesRender(t,p);for(let S=0,T=m.length;S<T;++S){const b=m[S];for(const E of v[b]){const C=E.tile.tileCoord;tu(C)in f||this.drawTile_(t,E,b,s,l,f,o)}}if(u in v)for(const S of v[u]){const T=S.tile.tileCoord;tu(T)in f&&this.drawTile_(t,S,u,s,l,f,o)}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const _=this.helper.getCanvas(),x=this.tileRepresentationCache;for(;x.canExpireCache();)x.pop().dispose();const w=function(S,T){a.expireCache(T.viewState.projection,Vut)};return t.postRenderFunctions.push(w),this.postRender(e,t),_}findAltTiles_(t,e,n,i){const a=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_);if(!a)return!1;let o=!0;const s=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=a.minX;u<=a.maxX;++u)for(let h=a.minY;h<=a.maxY;++h){const c=ZM(l,[n,u,h]);let f=!1;if(s.containsKey(c)){const d=s.get(c);d.ready&&!RF(i,d.tile)&&(PF(i,d,n),f=!0)}f||(o=!1)}return o}clearCache(){super.clearCache();const t=this.tileRepresentationCache;t.forEach(e=>e.dispose()),t.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(t=>t.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const de={...zut,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},f1={TEXTURE_COORD:"a_textureCoord"},Hut=[{name:f1.TEXTURE_COORD,size:2,type:Xo.FLOAT}];class $ut extends Wut{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new Sx(gw,k2),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){if(super.reset(t),this.helper){const e=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(e)}this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){super.afterHelperCreated(),this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const t=this.helper.getGL();for(const e of this.paletteTextures_)e.delete(t)}super.removeHelper()}createTileRepresentation(t){return new Lut(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,n,i,a,o,s,l,u,h,c){const f=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Hut);let d=0;for(;d<t.textures.length;){const S=`${de.TILE_TEXTURE_ARRAY}[${d}]`;this.helper.bindTexture(t.textures[d],d,S),++d}for(let S=0;S<this.paletteTextures_.length;++S){const T=this.paletteTextures_[S],b=T.getTexture(f);this.helper.bindTexture(b,d,T.name),++d}const g=n.viewState,p=o[0]+2*h,v=o[1]+2*h,y=t.tile.tileCoord,_=y[1],x=y[2];this.helper.setUniformMatrixValue(de.TILE_TRANSFORM,DW(this.tempMat4,e)),this.helper.setUniformFloatValue(de.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(de.DEPTH,u);let w=i;h>0&&(w=l,Rn(w,i,w)),this.helper.setUniformFloatVec4(de.RENDER_EXTENT,w),this.helper.setUniformFloatValue(de.RESOLUTION,g.resolution),this.helper.setUniformFloatValue(de.ZOOM,g.zoom),this.helper.setUniformFloatValue(de.TEXTURE_PIXEL_WIDTH,p),this.helper.setUniformFloatValue(de.TEXTURE_PIXEL_HEIGHT,v),this.helper.setUniformFloatValue(de.TEXTURE_RESOLUTION,a),this.helper.setUniformFloatValue(de.TEXTURE_ORIGIN_X,s[0]+_*o[0]*a-h*a),this.helper.setUniformFloatValue(de.TEXTURE_ORIGIN_Y,s[1]-x*o[1]*a+h*a),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const n=this.frameState;if(!n)return null;const i=this.getLayer(),a=Nr(n.pixelToCoordinateTransform,t.slice()),o=n.viewState,s=i.getExtent();if(s&&!mo(na(s,o.projection),a))return null;const l=i.getSources(rn([a]),o.resolution);let u,h,c;for(u=l.length-1;u>=0;--u)if(h=l[u],h.getState()==="ready"){if(c=h.getTileGridForProjection(o.projection),h.getWrapX())break;const d=c.getExtent();if(!d||mo(d,a))break}if(u<0)return null;const f=this.tileRepresentationCache;for(let d=c.getZForResolution(o.resolution);d>=c.getMinZoom();--d){const g=c.getTileCoordForCoordAndZ(a,d),p=ZM(h,g);if(!f.containsKey(p))continue;const v=f.get(p),m=v.tile;if((m instanceof Fy||m instanceof fw)&&m.getState()===Et.EMPTY)return null;if(!v.loaded)continue;const y=c.getOrigin(d),_=Gr(c.getTileSize(d)),x=c.getResolution(d),w=(a[0]-y[0])/x-g[1]*_[0],S=(y[1]-a[1])/x-g[2]*_[1];return v.getPixelData(w,S)}return null}disposeInternal(){const t=this.helper;if(t){const e=t.getGL();for(const n of this.paletteTextures_)n.delete(e);this.paletteTextures_.length=0,e.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class Yut{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}delete(t){this.texture_&&t.deleteTexture(this.texture_),this.texture_=null}}function Xut(r,t){return`operator_${r}_${Object.keys(t.functions).length}`}function yc(r){const t=r.toString();return t.includes(".")?t:t+".0"}function G2(r){if(r.length<2||r.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${r.length}(${r.map(yc).join(", ")})`}function d1(r){const t=Iu(r),e=t.length>3?t[3]:1;return G2([t[0]/255,t[1]/255,t[2]/255,e])}function Zut(r){const t=Gr(r);return G2(t)}const sb={};let jut=0;function NW(r){return r in sb||(sb[r]=jut++),sb[r]}function Hh(r){return yc(NW(r))}function FW(r){return"u_var_"+r}function Kut(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}}const lb="getBandValue",kW="u_paletteTextures";function qut(r,t,e,n){const i=xn(r,t,e);return B2(i,t,n)}function Ue(r){return(t,e,n)=>{const i=e.args.length,a=new Array(i);for(let o=0;o<i;++o)a[o]=B2(e.args[o],n,t);return r(a,t)}}const Jut={[j.Get]:(r,t)=>{const n=t.args[0].value;return n in r.properties||(r.properties[n]={name:n,type:t.type}),(r.inFragmentShader?"v_prop_":"a_prop_")+n},[j.GeometryType]:(r,t,e)=>{const n="geometryType";return n in r.properties||(r.properties[n]={name:n,type:Yn,evaluator:o=>g2(o.getGeometry())}),(r.inFragmentShader?"v_prop_":"a_prop_")+n},[j.LineMetric]:()=>"currentLineMetric",[j.Var]:(r,t)=>{const n=t.args[0].value;return n in r.variables||(r.variables[n]={name:n,type:t.type}),FW(n)},[j.Resolution]:()=>"u_resolution",[j.Zoom]:()=>"u_zoom",[j.Time]:()=>"u_time",[j.Any]:Ue(r=>`(${r.join(" || ")})`),[j.All]:Ue(r=>`(${r.join(" && ")})`),[j.Not]:Ue(([r])=>`(!${r})`),[j.Equal]:Ue(([r,t])=>`(${r} == ${t})`),[j.NotEqual]:Ue(([r,t])=>`(${r} != ${t})`),[j.GreaterThan]:Ue(([r,t])=>`(${r} > ${t})`),[j.GreaterThanOrEqualTo]:Ue(([r,t])=>`(${r} >= ${t})`),[j.LessThan]:Ue(([r,t])=>`(${r} < ${t})`),[j.LessThanOrEqualTo]:Ue(([r,t])=>`(${r} <= ${t})`),[j.Multiply]:Ue(r=>`(${r.join(" * ")})`),[j.Divide]:Ue(([r,t])=>`(${r} / ${t})`),[j.Add]:Ue(r=>`(${r.join(" + ")})`),[j.Subtract]:Ue(([r,t])=>`(${r} - ${t})`),[j.Clamp]:Ue(([r,t,e])=>`clamp(${r}, ${t}, ${e})`),[j.Mod]:Ue(([r,t])=>`mod(${r}, ${t})`),[j.Pow]:Ue(([r,t])=>`pow(${r}, ${t})`),[j.Abs]:Ue(([r])=>`abs(${r})`),[j.Floor]:Ue(([r])=>`floor(${r})`),[j.Ceil]:Ue(([r])=>`ceil(${r})`),[j.Round]:Ue(([r])=>`floor(${r} + 0.5)`),[j.Sin]:Ue(([r])=>`sin(${r})`),[j.Cos]:Ue(([r])=>`cos(${r})`),[j.Atan]:Ue(([r,t])=>t!==void 0?`atan(${r}, ${t})`:`atan(${r})`),[j.Sqrt]:Ue(([r])=>`sqrt(${r})`),[j.Match]:Ue(r=>{const t=r[0],e=r[r.length-1];let n=null;for(let i=r.length-3;i>=1;i-=2){const a=r[i],o=r[i+1];n=`(${t} == ${a} ? ${o} : ${n||e})`}return n}),[j.Between]:Ue(([r,t,e])=>`(${r} >= ${t} && ${r} <= ${e})`),[j.Interpolate]:Ue(([r,t,...e])=>{let n="";for(let i=0;i<e.length-2;i+=2){const a=e[i],o=n||e[i+1],s=e[i+2],l=e[i+3];let u;r===yc(1)?u=`(${t} - ${a}) / (${s} - ${a})`:u=`(pow(${r}, (${t} - ${a})) - 1.0) / (pow(${r}, (${s} - ${a})) - 1.0)`,n=`mix(${o}, ${l}, clamp(${u}, 0.0, 1.0))`}return n}),[j.Case]:Ue(r=>{const t=r[r.length-1];let e=null;for(let n=r.length-3;n>=0;n-=2){const i=r[n],a=r[n+1];e=`(${i} ? ${a} : ${e||t})`}return e}),[j.In]:Ue(([r,...t],e)=>{const n=Xut("in",e),i=[];for(let a=0;a<t.length;a+=1)i.push(`  if (inputValue == ${t[a]}) { return true; }`);return e.functions[n]=`bool ${n}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${n}(${r})`}),[j.Array]:Ue(r=>`vec${r.length}(${r.join(", ")})`),[j.Color]:Ue(r=>{if(r.length===1)return`vec4(vec3(${r[0]} / 255.0), 1.0)`;if(r.length===2)return`vec4(vec3(${r[0]} / 255.0), ${r[1]})`;const t=r.slice(0,3).map(n=>`${n} / 255.0`);if(r.length===3)return`vec4(${t.join(", ")}, 1.0)`;const e=r[3];return`vec4(${t.join(", ")}, ${e})`}),[j.Band]:Ue(([r,t,e],n)=>{if(!(lb in n.functions)){let i="";const a=n.bandCount||1;for(let o=0;o<a;o++){const s=Math.floor(o/4);let l=o%4;o===a-1&&l===1&&(l=3);const u=`${de.TILE_TEXTURE_ARRAY}[${s}]`;i+=`  if (band == ${o+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}n.functions[lb]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${de.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${de.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${lb}(${r}, ${t??"0.0"}, ${e??"0.0"})`}),[j.Palette]:(r,t)=>{const[e,...n]=t.args,i=n.length,a=new Uint8Array(i*4);for(let u=0;u<n.length;u++){const h=n[u].value,c=Iu(h),f=u*4;a[f]=c[0],a[f+1]=c[1],a[f+2]=c[2],a[f+3]=c[3]*255}r.paletteTextures||(r.paletteTextures=[]);const o=`${kW}[${r.paletteTextures.length}]`,s=new Yut(o,a);r.paletteTextures.push(s);const l=B2(e,ge,r);return`texture2D(${o}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function B2(r,t,e){if(r instanceof LU){const n=Jut[r.operator];if(n===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(r.operator)}`);return n(e,r,t)}if((r.type&ge)>0)return yc(r.value);if((r.type&$n)>0)return r.value.toString();if((r.type&Yn)>0)return Hh(r.value.toString());if((r.type&Ji)>0)return d1(r.value);if((r.type&Pu)>0)return G2(r.value);if((r.type&hd)>0)return Zut(r.value);throw new Error(`Unexpected expression ${r.value} (expected type ${cd(t)})`)}const LF=.985;function Qut(r,t){t=t||[];const e=256,n=e-1;return t[0]=Math.floor(r/e/e/e)/n,t[1]=Math.floor(r/e/e)%e/n,t[2]=Math.floor(r/e)%e/n,t[3]=r%e/n,t}function tht(r){let t=0;const e=256,n=e-1;return t+=Math.round(r[0]*e*e*e*n),t+=Math.round(r[1]*e*e*n),t+=Math.round(r[2]*e*n),t+=Math.round(r[3]*n),t}function GW(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const yf=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders
`,_f=GW();class eht{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${yc(_f["circle-radius"])} + ${yc(_f["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=d1(_f["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=yc(_f["stroke-width"]),this.strokeColorExpression_=d1(_f["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Hh("round"),this.strokeJoinExpression_=Hh("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=d1(_f["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,e,n){return this.varyings_.push({name:t,type:e,expression:n}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(){return this.hasSymbol_?`${yf}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_prop_hitColor = a_prop_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${yf}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${yf}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  currentLineMetric = vertexNumber < 1.5 ? a_measureStart : a_measureEnd;
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${LF} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_prop_hitColor = a_prop_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${yf}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${LF}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Hh("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Hh("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Hh("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Hh("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float lengthToPoint = max(0., min(dot(segmentTangent, startToPoint), segmentLength));
  float currentLengthPx = lengthToPoint + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPoint / segmentLength);

  if (${this.discardExpression_}) { discard; }

  vec4 color = ${this.strokeColorExpression_};
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  color.a *= smoothstep(0.5, -0.5, distance);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${yf}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_prop_hitColor = a_prop_hitColor;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${yf}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}}function xf(r,t,e){const n=d2();return qut(t,e,n,r)}function DF(r,t){const e=`
    attribute vec2 ${f1.TEXTURE_COORD};
    uniform mat4 ${de.TILE_TRANSFORM};
    uniform float ${de.TEXTURE_PIXEL_WIDTH};
    uniform float ${de.TEXTURE_PIXEL_HEIGHT};
    uniform float ${de.TEXTURE_RESOLUTION};
    uniform float ${de.TEXTURE_ORIGIN_X};
    uniform float ${de.TEXTURE_ORIGIN_Y};
    uniform float ${de.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${f1.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${de.TEXTURE_ORIGIN_X} + ${de.TEXTURE_RESOLUTION} * ${de.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${de.TEXTURE_ORIGIN_Y} - ${de.TEXTURE_RESOLUTION} * ${de.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${de.TILE_TRANSFORM} * vec4(${f1.TEXTURE_COORD}, ${de.DEPTH}, 1.0);
    }
  `,n={...Kut(),inFragmentShader:!0,bandCount:t,style:r},i=[];if(r.color!==void 0){const c=xf(n,r.color,Ji);i.push(`color = ${c};`)}if(r.contrast!==void 0){const c=xf(n,r.contrast,ge);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb - (${c} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(r.exposure!==void 0){const c=xf(n,r.exposure,ge);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(r.saturation!==void 0){const c=xf(n,r.saturation,ge);i.push(`
      float saturation = ${c} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(r.gamma!==void 0){const c=xf(n,r.gamma,ge);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${c}));`)}if(r.brightness!==void 0){const c=xf(n,r.brightness,ge);i.push(`color.rgb = clamp(color.rgb + ${c}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const a={},o=Object.keys(n.variables).length;if(o>1&&!r.variables)throw new Error(`Missing variables in style (expected ${n.variables})`);for(let c=0;c<o;++c){const f=n.variables[Object.keys(n.variables)[c]];if(!(f.name in r.variables))throw new Error(`Missing '${f.name}' in style variables`);const d=FW(f.name);a[d]=function(){let g=r.variables[f.name];return typeof g=="string"&&(g=NW(g)),g!==void 0?g:-9999999}}const s=Object.keys(a).map(function(c){return`uniform float ${c};`}),l=Math.ceil(t/4);s.push(`uniform sampler2D ${de.TILE_TEXTURE_ARRAY}[${l}];`),n.paletteTextures&&s.push(`uniform sampler2D ${kW}[${n.paletteTextures.length}];`);const u=Object.keys(n.functions).map(function(c){return n.functions[c]}),h=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${de.RENDER_EXTENT};
    uniform float ${de.TRANSITION_ALPHA};
    uniform float ${de.TEXTURE_PIXEL_WIDTH};
    uniform float ${de.TEXTURE_PIXEL_HEIGHT};
    uniform float ${de.RESOLUTION};
    uniform float ${de.ZOOM};

    ${s.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${de.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${de.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${de.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${de.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${de.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${de.TRANSITION_ALPHA};
    }`;return{vertexShader:e,fragmentShader:h,uniforms:a,paletteTextures:n.paletteTextures}}class z2 extends AW{constructor(t){t=t?Object.assign({},t):{};const e=t.style||{};delete t.style,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.styleVariables_=this.style_.variables||{},this.addChangeListener(We.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const n=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,e):this.sources_:n?[n]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t);return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=DF(this.style_,this.getSourceBandCount_());return new $ut(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.getCacheSize(),paletteTextures:t.paletteTextures})}renderSources(t,e){const n=this.getRenderer();let i;for(let a=0,o=e.length;a<o;++a)this.renderedSource_=e[a],n.prepareFrame(t)&&(i=n.renderFrame(t));return i}render(t,e){this.rendered=!0;const n=t.viewState,i=this.getSources(t.extent,n.resolution);let a=!0;for(let s=0,l=i.length;s<l;++s){const u=i[s],h=u.getState();if(h=="loading"){const c=()=>{u.getState()=="ready"&&(u.removeEventListener("change",c),this.changed())};u.addEventListener("change",c)}a=a&&h=="ready"}const o=this.renderSources(t,i);if(this.getRenderer().renderComplete&&a)return this.renderedResolution_=n.resolution,o;if(this.renderedResolution_>.5*n.resolution){const s=this.getSources(t.extent,this.renderedResolution_).filter(l=>!i.includes(l));if(s.length>0)return this.renderSources(t,s)}return o}setStyle(t){if(this.styleVariables_=t.variables||{},this.style_=t,this.hasRenderer()){const e=DF(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()}}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}z2.prototype.dispose;const kd={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Sf=[0,0,0],Pl=5;class Og{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,pe(ctt(this.resolutions_,(i,a)=>a-i),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let i=0,a=this.resolutions_.length-1;i<a;++i)if(!e)e=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,pe(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=za(n)),pe(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,pe(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:s2,pe(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((i,a)=>{const o=new hw(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const s=this.getTileRangeForExtentAndZ(n,a);o.minX=Math.max(s.minX,o.minX),o.maxX=Math.min(s.maxX,o.maxX),o.minY=Math.max(s.minY,o.minY),o.maxY=Math.min(s.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let a=i.minX,o=i.maxX;a<=o;++a)for(let s=i.minY,l=i.maxY;s<=l;++s)n([e,a,s])}forEachTileCoordParentTileRange(t,e,n,i){let a,o,s,l=null,u=t[0]-1;for(this.zoomFactor_===2?(o=t[1],s=t[2]):l=this.getTileCoordExtent(t,i);u>=this.minZoom;){if(o!==void 0&&s!==void 0?(o=Math.floor(o/2),s=Math.floor(s/2),a=vf(o,o,s,s,n)):a=this.getTileRangeForExtentAndZ(l,u,n),e(u,a))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const a=t[1]*2,o=t[2]*2;return vf(a,a+1,o,o+1,e)}const i=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const i=t[0],a=t[1],o=t[2];if(e===i)return vf(a,o,a,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-i),u=Math.floor(a*l),h=Math.floor(o*l);if(e<i)return vf(u,u,h,h,n);const c=Math.floor(l*(a+1))-1,f=Math.floor(l*(o+1))-1;return vf(u,c,h,f,n)}const s=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Sf);const i=Sf[1],a=Sf[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Sf);const o=Sf[1],s=Sf[2];return vf(i,o,a,s,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Gr(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),a=Gr(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*a[0]*i,s=n[1]-(t[2]+1)*a[1]*i,l=o+a[0]*i,u=s+a[1]*i;return Ha(o,s,l,u,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,a){const o=this.getZForResolution(n),s=n/this.getResolution(o),l=this.getOrigin(o),u=Gr(this.getTileSize(o),this.tmpSize_);let h=s*(t-l[0])/n/u[0],c=s*(l[1]-e)/n/u[1];return i?(h=eu(h,Pl)-1,c=eu(c,Pl)-1):(h=ud(h,Pl),c=ud(c,Pl)),ng(o,h,c,a)}getTileCoordForXYAndZ_(t,e,n,i,a){const o=this.getOrigin(n),s=this.getResolution(n),l=Gr(this.getTileSize(n),this.tmpSize_);let u=(t-o[0])/s/l[0],h=(o[1]-e)/s/l[1];return i?(u=eu(u,Pl)-1,h=eu(h,Pl)-1):(u=ud(u,Pl),h=ud(h,Pl)),ng(n,u,h,a)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=KS(this.resolutions_,t,e||0);return gr(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return oU(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}}function V2(r){let t=r.getDefaultTileGrid();return t||(t=iht(r),r.setDefaultTileGrid(t)),t}function rht(r,t,e){const n=t[0],i=r.getTileCoordCenter(t),a=vw(e);if(!mo(a,i)){const o=Me(a),s=Math.ceil((a[0]-i[0])/o);return i[0]+=o*s,r.getTileCoordForCoordAndZ(i,n)}return t}function nht(r,t,e,n){n=n!==void 0?n:"top-left";const i=zW(r,t,e);return new Og({extent:r,origin:wtt(r,n),resolutions:i,tileSize:e})}function BW(r){const t=r||{},e=t.extent||Xt("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:zW(e,t.maxZoom,t.tileSize,t.maxResolution)};return new Og(n)}function zW(r,t,e,n){t=t!==void 0?t:Net,e=Gr(e!==void 0?e:s2);const i=kr(r),a=Me(r);n=n>0?n:Math.max(a/e[0],i/e[1]);const o=t+1,s=new Array(o);for(let l=0;l<o;++l)s[l]=n/Math.pow(2,l);return s}function iht(r,t,e,n){const i=vw(r);return nht(i,t,e,n)}function vw(r){r=Xt(r);let t=r.getExtent();if(!t){const e=180*kR.degrees/r.getMetersPerUnit();t=Ha(-e,-e,e,e)}return t}class VW extends m2{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&Gr(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new b2(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,i,a){return Ut()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:V2(t)}getTileCacheForProjection(t){const e=this.getProjection();return pe(e===null||ra(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),a=this.getTilePixelRatio(e),o=Gr(i.getTileSize(t),this.tmpSize);return a==1?o:bet(o,a,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=rht(n,t,e)),jnt(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}useTile(t,e,n,i){}}class UW extends ca{constructor(t,e){super(t),this.tile=e}}function U2(r,t){const e=[];Object.keys(t).forEach(function(i){t[i]!==null&&t[i]!==void 0&&e.push(i+"="+encodeURIComponent(t[i]))});const n=e.join("&");return r=r.replace(/[?&]$/,""),r+=r.includes("?")?"&":"?",r+n}const aht=/\{z\}/g,oht=/\{x\}/g,sht=/\{y\}/g,lht=/\{-y\}/g;function uht(r,t,e,n,i){return r.replace(aht,t.toString()).replace(oht,e.toString()).replace(sht,n.toString()).replace(lht,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-n).toString()})}function hht(r){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(r);if(e){const n=e[1].charCodeAt(0),i=e[2].charCodeAt(0);let a;for(a=n;a<=i;++a)t.push(r.replace(e[0],String.fromCharCode(a)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(r),e){const n=parseInt(e[2],10);for(let i=parseInt(e[1],10);i<=n;i++)t.push(r.replace(e[0],i.toString()));return t}return t.push(r),t}function cht(r,t){return function(e,n,i){if(!e)return;let a;const o=e[0];if(t){const s=t.getFullTileRange(o);s&&(a=s.getHeight()-1)}return uht(r,o,e[1],e[2],a)}}function fht(r,t){const e=r.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=cht(r[i],t);return dht(n)}function dht(r){return r.length===1?r[0]:function(t,e,n){if(!t)return;const i=nW(t),a=Xs(i,r.length);return r[a](t,e,n)}}class W2 extends VW{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===W2.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=zt(e),i=e.getState();let a;i==Et.LOADING?(this.tileLoadingKeys_[n]=!0,a=kd.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],a=i==Et.ERROR?kd.TILELOADERROR:i==Et.LOADED?kd.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new UW(a,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=hht(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(fht(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=ig(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}class WW extends W2{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:ght,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:lw,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const i in this.tileCacheForProjection){const a=this.tileCacheForProjection[i];a.expireCache(a==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!ra(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||ra(e,t)))return this.tileGrid;const n=zt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=V2(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||ra(e,t))return this.tileCache;const n=zt(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new b2(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,i,a,o){const s=[t,e,n],l=this.getTileCoordForTileUrlFunction(s,a),u=l?this.tileUrlFunction(l,i,a):void 0,h=new this.tileClass(s,u!==void 0?Et.IDLE:Et.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(Bt.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,n,i,a){const o=this.getProjection();if(!o||!a||ra(o,a))return this.getTileInternal(t,e,n,i,o||a);const s=this.getTileCacheForProjection(a),l=[t,e,n];let u;const h=tu(l);s.containsKey(h)&&(u=s.get(h));const c=this.getKey();if(u&&u.key==c)return u;const f=this.getTileGridForProjection(o),d=this.getTileGridForProjection(a),g=this.getTileCoordForTileUrlFunction(l,a),p=new Fy(o,f,a,d,l,g,this.getTilePixelRatio(i),this.getGutter(),(v,m,y,_)=>this.getTileInternal(v,m,y,_,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=c,u?s.replace(h,p):s.set(h,p),p}getTileInternal(t,e,n,i,a){const o=ig(t,e,n),s=this.getKey();if(!this.tileCache.containsKey(o)){const u=this.createTile_(t,e,n,i,a,s);return this.tileCache.set(o,u),u}let l=this.tileCache.get(o);return l.key!=s&&(l=this.createTile_(t,e,n,i,a,s),this.tileCache.replace(o,l)),l}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const n=Xt(t);if(n){const i=zt(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function ght(r,t){r.getImage().src=t}class HW extends WW{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:BW({extent:vw(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}class pht extends Na{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(e){const n=e.getGeometry();return pe(!n||n.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),n},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,n){var i;(i=this.source)==null||i.loadFeatures(t,e,n),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(Bt.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Bt.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const n=t===0?0:Math.min(e,t)/t,i=t!==this.distance||this.interpolationRatio!==n;this.distance=t,this.minDistance=e,this.interpolationRatio=n,i&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=qn(),e=this.distance*this.resolution,n=this.source.getFeatures(),i={};for(let a=0,o=n.length;a<o;a++){const s=n[a];if(!(zt(s)in i)){const l=this.geometryFunction(s);if(l){const u=l.getCoordinates();Ld(u,t),il(t,e,t);const h=this.source.getFeaturesInExtent(t).filter(function(c){const f=zt(c);return f in i?!1:(i[f]=!0,!0)});this.features.push(this.createCluster(h,t))}}}}createCluster(t,e){const n=[0,0];for(let s=t.length-1;s>=0;--s){const l=this.geometryFunction(t[s]);l?U8(n,l.getCoordinates()):t.splice(s,1)}W8(n,1/t.length);const i=ua(e),a=this.interpolationRatio,o=new rr([n[0]*(1-a)+i[0]*a,n[1]*(1-a)+i[1]*a]);return this.createCustomCluster_?this.createCustomCluster_(o,t):new Le({geometry:o,features:t})}}class vht extends VW{constructor(t){const e=t.projection===void 0?"EPSG:3857":t.projection;let n=t.tileGrid;n===void 0&&e&&(n=BW({extent:vw(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:n,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.tileSize_=t.tileSize?Gr(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=t.bandCount===void 0?4:t.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous"}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const e=this.getTileGrid();return e?Gr(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection();return!e||ra(e,t)?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,e,n,i,a){const o=this.getTileCacheForProjection(i),s=ig(t,e,n);if(o.containsKey(s)){const v=o.get(s);if(v&&v.key==this.getKey())return v}const l=this.getTileGrid(),u=Math.max.apply(null,l.getResolutions().map((v,m)=>{const y=Gr(l.getTileSize(m)),_=this.getTileSize(m);return Math.max(_[0]/y[0],_[1]/y[1])})),h=this.getTileGridForProjection(a),c=this.getTileGridForProjection(i),f=[t,e,n],d=this.getTileCoordForTileUrlFunction(f,i),g=Object.assign({sourceProj:a,sourceTileGrid:h,targetProj:i,targetTileGrid:c,tileCoord:f,wrappedTileCoord:d,pixelRatio:u,gutter:this.getGutterForProjection(a),getTileFunction:(v,m,y,_)=>this.getTile(v,m,y,_,a)},this.tileOptions),p=new fw(g);return p.key=this.getKey(),p}getTile(t,e,n,i,a){const o=this.getProjection();if(o&&a&&!ra(o,a))return this.getReprojTile_(t,e,n,a,o);const s=this.getTileSize(t),l=ig(t,e,n);if(this.tileCache.containsKey(l))return this.tileCache.get(l);const u=this.loader_,h=new AbortController,c={signal:h.signal,crossOrigin:this.crossOrigin_},f=this.getTileCoordForTileUrlFunction([t,e,n]);if(!f)return null;const d=f[0],g=f[1],p=f[2];function v(){return RR(function(){return u(d,g,p,c)})}const m=Object.assign({tileCoord:[t,e,n],loader:v,size:s,controller:h},this.tileOptions),y=new Bm(m);return y.key=this.getKey(),y.addEventListener(Bt.CHANGE,this.handleTileChange_),this.tileCache.set(l,y),y}handleTileChange_(t){const e=t.target,n=zt(e),i=e.getState();let a;i==Et.LOADING?(this.tileLoadingKeys_[n]=!0,a=kd.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],a=i==Et.ERROR?kd.TILELOADERROR:i==Et.LOADED?kd.TILELOADEND:void 0),a&&this.dispatchEvent(new UW(a,e))}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||ra(e,t)))return this.tileGrid;const n=zt(t);return n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=V2(t)),this.tileGridForProjection_[n]}setTileGridForProjection(t,e){const n=Xt(t);if(n){const i=zt(n);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=e)}}getTileCacheForProjection(t){const e=this.getProjection();if(!e||ra(e,t))return this.tileCache;const n=zt(t);return n in this.tileCacheForProjection_||(this.tileCacheForProjection_[n]=new b2(.1)),this.tileCacheForProjection_[n]}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const i in this.tileCacheForProjection_){const a=this.tileCacheForProjection_[i];a.expireCache(a==n?e:{})}}clear(){super.clear();for(const t in this.tileCacheForProjection_)this.tileCacheForProjection_[t].clear()}}function Fn(r){return(t,...e)=>mht(r,t,e)}function Ng(r,t){return Fn($W(r,t).get)}const{apply:mht,construct:SBt,defineProperty:wBt,get:TBt,getOwnPropertyDescriptor:$W,getPrototypeOf:H2,has:bBt,ownKeys:yht,set:EBt,setPrototypeOf:CBt}=Reflect,{iterator:ky,species:MBt,toStringTag:_ht,for:ABt}=Symbol,xht=Object,{create:$2,defineProperty:Sht,freeze:IBt,is:RBt}=xht,wht=Array,Tht=wht.prototype,YW=Tht[ky],bht=Fn(YW),XW=ArrayBuffer,Eht=XW.prototype;Ng(Eht,"byteLength");const OF=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;OF&&Ng(OF.prototype,"byteLength");const ZW=H2(Uint8Array);ZW.from;const bi=ZW.prototype;bi[ky];Fn(bi.keys);Fn(bi.values);Fn(bi.entries);Fn(bi.set);Fn(bi.reverse);Fn(bi.fill);Fn(bi.copyWithin);Fn(bi.sort);Fn(bi.slice);Fn(bi.subarray);Ng(bi,"buffer");Ng(bi,"byteOffset");Ng(bi,"length");Ng(bi,_ht);const Cht=Uint8Array,jW=Uint16Array,Y2=Uint32Array,Mht=Float32Array,Vm=H2([][ky]()),KW=Fn(Vm.next),Aht=Fn(function*(){}().next),Iht=H2(Vm),Rht=DataView.prototype,Pht=Fn(Rht.getUint16),X2=WeakMap,qW=X2.prototype,JW=Fn(qW.get),Lht=Fn(qW.set),QW=new X2,Dht=$2(null,{next:{value:function(){const t=JW(QW,this);return KW(t)}},[ky]:{value:function(){return this}}});function Oht(r){if(r[ky]===YW&&Vm.next===KW)return r;const t=$2(Dht);return Lht(QW,t,bht(r)),t}const Nht=new X2,Fht=$2(Iht,{next:{value:function(){const t=JW(Nht,this);return Aht(t)},writable:!0,configurable:!0}});for(const r of yht(Vm))r!=="next"&&Sht(Fht,r,$W(Vm,r));const t7=new XW(4),kht=new Mht(t7),Ght=new Y2(t7),Mo=new jW(512),Ao=new Cht(512);for(let r=0;r<256;++r){const t=r-127;t<-24?(Mo[r]=0,Mo[r|256]=32768,Ao[r]=24,Ao[r|256]=24):t<-14?(Mo[r]=1024>>-t-14,Mo[r|256]=1024>>-t-14|32768,Ao[r]=-t-1,Ao[r|256]=-t-1):t<=15?(Mo[r]=t+15<<10,Mo[r|256]=t+15<<10|32768,Ao[r]=13,Ao[r|256]=13):t<128?(Mo[r]=31744,Mo[r|256]=64512,Ao[r]=24,Ao[r|256]=24):(Mo[r]=31744,Mo[r|256]=64512,Ao[r]=13,Ao[r|256]=13)}const Z2=new Y2(2048);for(let r=1;r<1024;++r){let t=r<<13,e=0;for(;!(t&8388608);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,Z2[r]=t|e}for(let r=1024;r<2048;++r)Z2[r]=939524096+(r-1024<<13);const Fg=new Y2(64);for(let r=1;r<31;++r)Fg[r]=r<<23;Fg[31]=1199570944;Fg[32]=2147483648;for(let r=33;r<63;++r)Fg[r]=2147483648+(r-32<<23);Fg[63]=3347054592;const e7=new jW(64);for(let r=1;r<64;++r)r!==32&&(e7[r]=1024);function Bht(r){const t=r>>10;return Ght[0]=Z2[e7[t]+(r&1023)]+Fg[t],kht[0]}function r7(r,t,...e){return Bht(Pht(r,t,...Oht(e)))}var NF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function zht(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}var j2={exports:{}};function n7(r,t,e){const n=e&&e.debug||!1,i=typeof r=="object"?r.outer:r,a=i.slice(0,i.indexOf(">")+1),o=['"',"'"];for(let s=0;s<o.length;s++){const l=o[s],u=t+"\\="+l+"([^"+l+"]*)"+l,c=new RegExp(u).exec(a);if(c)return c[1]}}j2.exports=n7;j2.exports.default=n7;var Vht=j2.exports;const ub=mw(Vht);var K2={exports:{}},q2={exports:{}},J2={exports:{}};function i7(r,t,e){const i=new RegExp(t).exec(r.slice(e));return i?e+i.index:-1}J2.exports=i7;J2.exports.default=i7;var Uht=J2.exports,Q2={exports:{}};function a7(r,t,e){const i=new RegExp(t).exec(r.slice(e));return i?e+i.index+i[0].length-1:-1}Q2.exports=a7;Q2.exports.default=a7;var Wht=Q2.exports,tP={exports:{}};function o7(r,t){const e=new RegExp(t,"g"),n=r.match(e);return n?n.length:0}tP.exports=o7;tP.exports.default=o7;var Hht=tP.exports;const $ht=Uht,hb=Wht,FF=Hht;function s7(r,t,e){const n=e&&e.debug||!1,i=!(e&&typeof e.nested===!1),a=e&&e.startIndex||0,o=$ht(r,`<${t}[ 
>/]`,a);if(o===-1)return;const s=r.slice(o+t.length);let l=hb(s,"^[^<]*[ /]>",0);const u=l!==-1&&s[l-1]==="/";if(u===!1)if(i){let d=0,g=1,p=0;for(;(l=hb(s,"[ /]"+t+">",d))!==-1;){const v=s.substring(d,l+1);if(g+=FF(v,"<"+t+`[ 
	>]`),p+=FF(v,"</"+t+">"),p>=g)break;d=l}}else l=hb(s,"[ /]"+t+">",0);const h=o+t.length+l+1;if(h===-1)return;const c=r.slice(o,h);let f;return u?f=null:f=c.slice(c.indexOf(">")+1,c.lastIndexOf("<")),{inner:f,outer:c,start:o,end:h}}q2.exports=s7;q2.exports.default=s7;var Yht=q2.exports;const Xht=Yht;function l7(r,t,e){const n=[],i=e&&e.debug||!1,a=e&&typeof e.nested=="boolean"?e.nested:!0;let o=e&&e.startIndex||0,s;for(;s=Xht(r,t,{debug:i,startIndex:o});)a?o=s.start+1+t.length:o=s.end,n.push(s);return n}K2.exports=l7;K2.exports.default=l7;var Zht=K2.exports;const jht=mw(Zht),zv={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ko={};for(const r in zv)zv.hasOwnProperty(r)&&(ko[zv[r]]=parseInt(r,10));const Kht=[ko.BitsPerSample,ko.ExtraSamples,ko.SampleFormat,ko.StripByteCounts,ko.StripOffsets,ko.StripRowCounts,ko.TileByteCounts,ko.TileOffsets,ko.SubIFDs],cb={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},_e={};for(const r in cb)cb.hasOwnProperty(r)&&(_e[cb[r]]=parseInt(r,10));const Ai={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},qht={Unspecified:0,Assocalpha:1,Unassalpha:2},PBt={Version:0,AddCompression:1},LBt={None:0,Deflate:1,Zstandard:2},Jht={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function Qht(r,t){const{width:e,height:n}=r,i=new Uint8Array(e*n*3);let a;for(let o=0,s=0;o<r.length;++o,s+=3)a=256-r[o]/t*256,i[s]=a,i[s+1]=a,i[s+2]=a;return i}function tct(r,t){const{width:e,height:n}=r,i=new Uint8Array(e*n*3);let a;for(let o=0,s=0;o<r.length;++o,s+=3)a=r[o]/t*256,i[s]=a,i[s+1]=a,i[s+2]=a;return i}function ect(r,t){const{width:e,height:n}=r,i=new Uint8Array(e*n*3),a=t.length/3,o=t.length/3*2;for(let s=0,l=0;s<r.length;++s,l+=3){const u=r[s];i[l]=t[u]/65536*256,i[l+1]=t[u+a]/65536*256,i[l+2]=t[u+o]/65536*256}return i}function rct(r){const{width:t,height:e}=r,n=new Uint8Array(t*e*3);for(let i=0,a=0;i<r.length;i+=4,a+=3){const o=r[i],s=r[i+1],l=r[i+2],u=r[i+3];n[a]=255*((255-o)/256)*((255-u)/256),n[a+1]=255*((255-s)/256)*((255-u)/256),n[a+2]=255*((255-l)/256)*((255-u)/256)}return n}function nct(r){const{width:t,height:e}=r,n=new Uint8ClampedArray(t*e*3);for(let i=0,a=0;i<r.length;i+=3,a+=3){const o=r[i],s=r[i+1],l=r[i+2];n[a]=o+1.402*(l-128),n[a+1]=o-.34414*(s-128)-.71414*(l-128),n[a+2]=o+1.772*(s-128)}return n}const ict=.95047,act=1,oct=1.08883;function sct(r){const{width:t,height:e}=r,n=new Uint8Array(t*e*3);for(let i=0,a=0;i<r.length;i+=3,a+=3){const o=r[i+0],s=r[i+1]<<24>>24,l=r[i+2]<<24>>24;let u=(o+16)/116,h=s/500+u,c=u-l/200,f,d,g;h=ict*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),u=act*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),c=oct*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),f=h*3.2406+u*-1.5372+c*-.4986,d=h*-.9689+u*1.8758+c*.0415,g=h*.0557+u*-.204+c*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,g=g>.0031308?1.055*g**(1/2.4)-.055:12.92*g,n[a]=Math.max(0,Math.min(1,f))*255,n[a+1]=Math.max(0,Math.min(1,d))*255,n[a+2]=Math.max(0,Math.min(1,g))*255}return n}const u7=new Map;function qu(r,t){Array.isArray(r)||(r=[r]),r.forEach(e=>u7.set(e,t))}async function h7(r){const t=u7.get(r.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${r.Compression}`);const e=await t();return new e(r)}qu([void 0,1],()=>ur(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([21,22])).then(r=>r.default));qu(5,()=>ur(()=>import("./lzw-DVs0DlZL.js"),__vite__mapDeps([23,22])).then(r=>r.default));qu(6,()=>{throw new Error("old style JPEG compression is not supported.")});qu(7,()=>ur(()=>import("./jpeg-Db2tRqaG.js"),__vite__mapDeps([24,22])).then(r=>r.default));qu([8,32946],()=>ur(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([25,26,22])).then(r=>r.default));qu(32773,()=>ur(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([27,22])).then(r=>r.default));qu(34887,()=>ur(()=>import("./lerc-Di_X-Xub.js"),__vite__mapDeps([28,26,22])).then(async r=>(await r.zstd.init(),r)).then(r=>r.default));qu(50001,()=>ur(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([29,22])).then(r=>r.default));function yw(r,t,e,n=1){return new(Object.getPrototypeOf(r)).constructor(t*e*n)}function lct(r,t,e,n,i){const a=t/n,o=e/i;return r.map(s=>{const l=yw(s,n,i);for(let u=0;u<i;++u){const h=Math.min(Math.round(o*u),e-1);for(let c=0;c<n;++c){const f=Math.min(Math.round(a*c),t-1),d=s[h*t+f];l[u*n+c]=d}}return l})}function Gd(r,t,e){return(1-e)*r+e*t}function uct(r,t,e,n,i){const a=t/n,o=e/i;return r.map(s=>{const l=yw(s,n,i);for(let u=0;u<i;++u){const h=o*u,c=Math.floor(h),f=Math.min(Math.ceil(h),e-1);for(let d=0;d<n;++d){const g=a*d,p=g%1,v=Math.floor(g),m=Math.min(Math.ceil(g),t-1),y=s[c*t+v],_=s[c*t+m],x=s[f*t+v],w=s[f*t+m],S=Gd(Gd(y,_,p),Gd(x,w,p),h%1);l[u*n+d]=S}}return l})}function hct(r,t,e,n,i,a="nearest"){switch(a.toLowerCase()){case"nearest":return lct(r,t,e,n,i);case"bilinear":case"linear":return uct(r,t,e,n,i);default:throw new Error(`Unsupported resampling method: '${a}'`)}}function cct(r,t,e,n,i,a){const o=t/n,s=e/i,l=yw(r,n,i,a);for(let u=0;u<i;++u){const h=Math.min(Math.round(s*u),e-1);for(let c=0;c<n;++c){const f=Math.min(Math.round(o*c),t-1);for(let d=0;d<a;++d){const g=r[h*t*a+f*a+d];l[u*n*a+c*a+d]=g}}}return l}function fct(r,t,e,n,i,a){const o=t/n,s=e/i,l=yw(r,n,i,a);for(let u=0;u<i;++u){const h=s*u,c=Math.floor(h),f=Math.min(Math.ceil(h),e-1);for(let d=0;d<n;++d){const g=o*d,p=g%1,v=Math.floor(g),m=Math.min(Math.ceil(g),t-1);for(let y=0;y<a;++y){const _=r[c*t*a+v*a+y],x=r[c*t*a+m*a+y],w=r[f*t*a+v*a+y],S=r[f*t*a+m*a+y],T=Gd(Gd(_,x,p),Gd(w,S,p),h%1);l[u*n*a+d*a+y]=T}}}return l}function dct(r,t,e,n,i,a,o="nearest"){switch(o.toLowerCase()){case"nearest":return cct(r,t,e,n,i,a);case"bilinear":case"linear":return fct(r,t,e,n,i,a);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function gct(r,t,e){let n=0;for(let i=t;i<e;++i)n+=r[i];return n}function jM(r,t,e){switch(r){case 1:if(t<=8)return new Uint8Array(e);if(t<=16)return new Uint16Array(e);if(t<=32)return new Uint32Array(e);break;case 2:if(t===8)return new Int8Array(e);if(t===16)return new Int16Array(e);if(t===32)return new Int32Array(e);break;case 3:switch(t){case 16:case 32:return new Float32Array(e);case 64:return new Float64Array(e)}break}throw Error("Unsupported data format/bitsPerSample")}function pct(r,t){return(r===1||r===2)&&t<=32&&t%8===0?!1:!(r===3&&(t===16||t===32||t===64))}function vct(r,t,e,n,i,a,o){const s=new DataView(r),l=e===2?o*a:o*a*n,u=e===2?1:n,h=jM(t,i,l),c=parseInt("1".repeat(i),2);if(t===1){let f;e===1?f=n*i:f=i;let d=a*f;d&7&&(d=d+7&-8);for(let g=0;g<o;++g){const p=g*d;for(let v=0;v<a;++v){const m=p+v*u*i;for(let y=0;y<u;++y){const _=m+y*i,x=(g*a+v)*u+y,w=Math.floor(_/8),S=_%8;if(S+i<=8)h[x]=s.getUint8(w)>>8-i-S&c;else if(S+i<=16)h[x]=s.getUint16(w)>>16-i-S&c;else if(S+i<=24){const T=s.getUint16(w)<<8|s.getUint8(w+2);h[x]=T>>24-i-S&c}else h[x]=s.getUint32(w)>>32-i-S&c}}}}return h.buffer}class c7{constructor(t,e,n,i,a,o){this.fileDirectory=t,this.geoKeys=e,this.dataView=n,this.littleEndian=i,this.tiles=a?{}:null,this.isTiled=!t.StripOffsets;const s=t.PlanarConfiguration;if(this.planarConfiguration=typeof s>"u"?1:s,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,n=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(i,a){return r7(this,i,a)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){const n=this.getSampleFormat(t),i=this.getBitsPerSample(t);return jM(n,i,e)}async getTileOrStrip(t,e,n,i,a){const o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=e*o+t:this.planarConfiguration===2&&(l=n*o*s+e*o+t);let h,c;this.isTiled?(h=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(h=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]);const f=(await this.source.fetch([{offset:h,length:c}],a))[0];let d;return u===null||!u[l]?(d=(async()=>{let g=await i.decode(this.fileDirectory,f);const p=this.getSampleFormat(),v=this.getBitsPerSample();return pct(p,v)&&(g=vct(g,p,this.planarConfiguration,this.getSamplesPerPixel(),v,this.getTileWidth(),this.getBlockHeight(e))),g})(),u!==null&&(u[l]=d)):d=u[l],{x:t,y:e,sample:n,data:await d}}async _readRaster(t,e,n,i,a,o,s,l,u){const h=this.getTileWidth(),c=this.getTileHeight(),f=this.getWidth(),d=this.getHeight(),g=Math.max(Math.floor(t[0]/h),0),p=Math.min(Math.ceil(t[2]/h),Math.ceil(f/h)),v=Math.max(Math.floor(t[1]/c),0),m=Math.min(Math.ceil(t[3]/c),Math.ceil(d/c)),y=t[2]-t[0];let _=this.getBytesPerPixel();const x=[],w=[];for(let b=0;b<e.length;++b)this.planarConfiguration===1?x.push(gct(this.fileDirectory.BitsPerSample,0,e[b])/8):x.push(0),w.push(this.getReaderForSample(e[b]));const S=[],{littleEndian:T}=this;for(let b=v;b<m;++b)for(let E=g;E<p;++E){let C;this.planarConfiguration===1&&(C=this.getTileOrStrip(E,b,0,a,u));for(let M=0;M<e.length;++M){const A=M,R=e[M];this.planarConfiguration===2&&(_=this.getSampleByteSize(R),C=this.getTileOrStrip(E,b,R,a,u));const P=C.then(L=>{const D=L.data,k=new DataView(D),F=this.getBlockHeight(L.y),B=L.y*c,V=L.x*h,Y=B+F,q=(L.x+1)*h,lt=w[A],X=Math.min(F,F-(Y-t[3]),d-B),St=Math.min(h,h-(q-t[2]),f-V);for(let mt=Math.max(0,t[1]-B);mt<X;++mt)for(let $=Math.max(0,t[0]-V);$<St;++$){const K=(mt*h+$)*_,et=lt.call(k,K+x[A],T);let W;i?(W=(mt+B-t[1])*y*e.length+($+V-t[0])*e.length+A,n[W]=et):(W=(mt+B-t[1])*y+$+V-t[0],n[A][W]=et)}});S.push(P)}}if(await Promise.all(S),o&&t[2]-t[0]!==o||s&&t[3]-t[1]!==s){let b;return i?b=dct(n,t[2]-t[0],t[3]-t[1],o,s,e.length,l):b=hct(n,t[2]-t[0],t[3]-t[1],o,s,l),b.width=o,b.height=s,b}return n.width=o||t[2]-t[0],n.height=s||t[3]-t[1],n}async readRasters({window:t,samples:e=[],interleave:n,pool:i=null,width:a,height:o,resampleMethod:s,fillValue:l,signal:u}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const c=h[2]-h[0],f=h[3]-h[1],d=c*f,g=this.getSamplesPerPixel();if(!e||!e.length)for(let y=0;y<g;++y)e.push(y);else for(let y=0;y<e.length;++y)if(e[y]>=g)return Promise.reject(new RangeError(`Invalid sample index '${e[y]}'.`));let p;if(n){const y=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,_=Math.max.apply(null,this.fileDirectory.BitsPerSample);p=jM(y,_,d*e.length),l&&p.fill(l)}else{p=[];for(let y=0;y<e.length;++y){const _=this.getArrayForSample(e[y],d);Array.isArray(l)&&y<l.length?_.fill(l[y]):l&&!Array.isArray(l)&&_.fill(l),p.push(_)}}const v=i||await h7(this.fileDirectory);return await this._readRaster(h,e,p,n,v,a,o,s,u)}async readRGB({window:t,interleave:e=!0,pool:n=null,width:i,height:a,resampleMethod:o,enableAlpha:s=!1,signal:l}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const h=this.fileDirectory.PhotometricInterpretation;if(h===Ai.RGB){let m=[0,1,2];if(this.fileDirectory.ExtraSamples!==qht.Unspecified&&s){m=[];for(let y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)m.push(y)}return this.readRasters({window:t,interleave:e,samples:m,pool:n,width:i,height:a,resampleMethod:o,signal:l})}let c;switch(h){case Ai.WhiteIsZero:case Ai.BlackIsZero:case Ai.Palette:c=[0];break;case Ai.CMYK:c=[0,1,2,3];break;case Ai.YCbCr:case Ai.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const f={window:u,interleave:!0,samples:c,pool:n,width:i,height:a,resampleMethod:o,signal:l},{fileDirectory:d}=this,g=await this.readRasters(f),p=2**this.fileDirectory.BitsPerSample[0];let v;switch(h){case Ai.WhiteIsZero:v=Qht(g,p);break;case Ai.BlackIsZero:v=tct(g,p);break;case Ai.Palette:v=ect(g,d.ColorMap);break;case Ai.CMYK:v=rct(g);break;case Ai.YCbCr:v=nct(g);break;case Ai.CIELab:v=sct(g);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const m=new Uint8Array(v.length/3),y=new Uint8Array(v.length/3),_=new Uint8Array(v.length/3);for(let x=0,w=0;x<v.length;x+=3,++w)m[w]=v[x],y[w]=v[x+1],_[w]=v[x+2];v=[m,y,_]}return v.width=g.width,v.height=g.height,v}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA;let i=jht(n,"Item");t===null?i=i.filter(a=>ub(a,"sample")===void 0):i=i.filter(a=>Number(ub(a,"sample"))===t);for(let a=0;a<i.length;++a){const o=i[a];e[ub(o,"name")]=o.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(n)return n[1]===0&&n[4]===0?[n[0],-n[5],n[10]]:[Math.sqrt(n[0]*n[0]+n[4]*n[4]),-Math.sqrt(n[1]*n[1]+n[5]*n[5]),n[10]];if(t){const[i,a,o]=t.getResolution();return[i*t.getWidth()/this.getWidth(),a*t.getHeight()/this.getHeight(),o*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const e=this.getHeight(),n=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[i,a,o,s,l,u,h,c]=this.fileDirectory.ModelTransformation,d=[[0,0],[0,e],[n,0],[n,e]].map(([v,m])=>[s+i*v+a*m,c+l*v+u*m]),g=d.map(v=>v[0]),p=d.map(v=>v[1]);return[Math.min(...g),Math.min(...p),Math.max(...g),Math.max(...p)]}else{const i=this.getOrigin(),a=this.getResolution(),o=i[0],s=i[1],l=o+a[0]*n,u=s+a[1]*e;return[Math.min(o,l),Math.min(s,u),Math.max(o,l),Math.max(s,u)]}}}class mct{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const n=this.getUint32(t,e),i=this.getUint32(t+4,e);let a;if(e){if(a=n+2**32*i,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}if(a=2**32*n+i,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}getInt64(t,e){let n=0;const i=(this._dataView.getUint8(t+(e?7:0))&128)>0;let a=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(e?o:7-o));i&&(a?s!==0&&(s=~(s-1)&255,a=!1):s=~s&255),n+=s*256**o}return i&&(n=-n),n}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return r7(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class yct{constructor(t,e,n,i){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=n,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),n=this.readUint32(t+4);let i;if(this._littleEndian){if(i=e+2**32*n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*e+n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let e=0;const n=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let i=!0;for(let a=0;a<8;a++){let o=this._dataView.getUint8(t+(this._littleEndian?a:7-a));n&&(i?o!==0&&(o=~(o-1)&255,i=!1):o=~o&255),e+=o*256**a}return n&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const _ct=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class xct{constructor(t=_ct,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise(n=>{ur(()=>import("./decoder-CaSv2t6h.js"),[]).then(i=>{n(i.create)})}),this._awaitingDecoder.then(n=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<t;i++)this.workers.push({worker:n(),idle:!0})}))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?h7(t).then(n=>n.decode(t,e)):new Promise(n=>{const i=this.workers.find(s=>s.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const a=this.messageId++,o=s=>{s.data.id===a&&(i.idle=!0,n(s.data.decoded),i.worker.removeEventListener("message",o))};i.worker.addEventListener("message",o),i.worker.postMessage({fileDirectory:t,buffer:e,id:a},[e])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const kF=`\r
\r
`;function f7(r){if(typeof Object.fromEntries<"u")return Object.fromEntries(r);const t={};for(const[e,n]of r)t[e.toLowerCase()]=n;return t}function Sct(r){const t=r.split(`\r
`).map(e=>{const n=e.split(":").map(i=>i.trim());return n[0]=n[0].toLowerCase(),n});return f7(t)}function wct(r){const[t,...e]=r.split(";").map(i=>i.trim()),n=e.map(i=>i.split("="));return{type:t,params:f7(n)}}function KM(r){let t,e,n;return r&&([,t,e,n]=r.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),e=parseInt(e,10),n=parseInt(n,10)),{start:t,end:e,total:n}}function Tct(r,t){let e=null;const n=new TextDecoder("ascii"),i=[],a=`--${t}`,o=`${a}--`;for(let s=0;s<10;++s)n.decode(new Uint8Array(r,s,a.length))===a&&(e=s);if(e===null)throw new Error("Could not find initial boundary");for(;e<r.byteLength;){const s=n.decode(new Uint8Array(r,e,Math.min(a.length+1024,r.byteLength-e)));if(s.length===0||s.startsWith(o))break;if(!s.startsWith(a))throw new Error("Part does not start with boundary");const l=s.substr(a.length+2);if(l.length===0)break;const u=l.indexOf(kF),h=Sct(l.substr(0,u)),{start:c,end:f,total:d}=KM(h["content-range"]),g=e+a.length+u+kF.length,p=parseInt(f,10)+1-parseInt(c,10);i.push({headers:h,data:r.slice(g,g+p),offset:c,length:p,fileSize:d}),e=g+p+4}return i}class eP{async fetch(t,e=void 0){return Promise.all(t.map(n=>this.fetchSlice(n,e)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class bct extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[e,n]of t)this.onEviction(e,n.value)}_deleteIfExpired(t,e){return typeof e.expiry=="number"&&e.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,e.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,e){if(this._deleteIfExpired(t,e)===!1)return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const n=e.get(t);return this._getItemValue(t,n)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,n]=t;this.cache.has(e)||this._deleteIfExpired(e,n)===!1&&(yield t)}for(const t of this.cache){const[e,n]=t;this._deleteIfExpired(e,n)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(this._deleteIfExpired(t,e)===!1)return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:n=this.maxAge}={}){const i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(t)?this.cache.set(t,{value:e,expiry:i}):this._set(t,{value:e,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],n=e.length-t;n<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(n>0&&this._emitEvictions(e.slice(0,n)),this.oldCache=new Map(e.slice(n)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,n]=t;this._deleteIfExpired(e,n)===!1&&(yield[e,n.value])}for(const t of this.oldCache){const[e,n]=t;this.cache.has(e)||this._deleteIfExpired(e,n)===!1&&(yield[e,n.value])}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const n=t[e],[i,a]=n;this._deleteIfExpired(i,a)===!1&&(yield[i,a.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const n=t[e],[i,a]=n;this.cache.has(i)||this._deleteIfExpired(i,a)===!1&&(yield[i,a.value])}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[n,i]of this.entriesAscending())t.call(e,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function Ect(r){return new Promise(t=>setTimeout(t,r))}function Cct(r,t){const e=Array.isArray(r)?r:Array.from(r),n=Array.isArray(t)?t:Array.from(t);return e.map((i,a)=>[i,n[a]])}class lg extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,lg),this.name="AbortError"}}class Mct extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const Act=Mct;class Ict{constructor(t,e,n=null){this.offset=t,this.length=e,this.data=n}get top(){return this.offset+this.length}}class GF{constructor(t,e,n){this.offset=t,this.length=e,this.blockIds=n}}class Rct extends eP{constructor(t,{blockSize:e=65536,cacheSize:n=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new bct({maxSize:n,onEviction:(i,a)=>{this.evictedBlocks.set(i,a)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const n=[],i=[],a=[];this.evictedBlocks.clear();for(const{offset:f,length:d}of t){let g=f+d;const{fileSize:p}=this;p!==null&&(g=Math.min(g,p));const v=Math.floor(f/this.blockSize)*this.blockSize;for(let m=v;m<g;m+=this.blockSize){const y=Math.floor(m/this.blockSize);!this.blockCache.has(y)&&!this.blockRequests.has(y)&&(this.blockIdsToFetch.add(y),i.push(y)),this.blockRequests.has(y)&&n.push(this.blockRequests.get(y)),a.push(y)}}await Ect(),this.fetchBlocks(e);const o=[];for(const f of i)this.blockRequests.has(f)&&o.push(this.blockRequests.get(f));await Promise.allSettled(n),await Promise.allSettled(o);const s=[],l=a.filter(f=>this.abortedBlockIds.has(f)||!this.blockCache.has(f));if(l.forEach(f=>this.blockIdsToFetch.add(f)),l.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const f of l){const d=this.blockRequests.get(f);if(!d)throw new Error(`Block ${f} is not in the block requests`);s.push(d)}await Promise.allSettled(s)}if(e&&e.aborted)throw new lg("Request was aborted");const u=a.map(f=>this.blockCache.get(f)||this.evictedBlocks.get(f)),h=u.filter(f=>!f);if(h.length)throw new Act(h,"Request failed");const c=new Map(Cct(a,u));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(e,t);for(let i=0;i<e.length;++i){const a=e[i];for(const o of a.blockIds)this.blockRequests.set(o,(async()=>{try{const s=(await n)[i],l=o*this.blockSize,u=l-s.offset,h=Math.min(u+this.blockSize,s.data.byteLength),c=s.data.slice(u,h),f=new Ict(l,c.byteLength,c,o);this.blockCache.set(o,f),this.abortedBlockIds.delete(o)}catch(s){if(s.name==="AbortError")s.signal=t,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw s}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort((o,s)=>o-s);if(e.length===0)return[];let n=[],i=null;const a=[];for(const o of e)i===null||i+1===o?(n.push(o),i=o):(a.push(new GF(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[o],i=o);return a.push(new GF(n[0]*this.blockSize,n.length*this.blockSize,n)),a}readSliceData(t,e){return t.map(n=>{let i=n.offset+n.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const a=Math.floor(n.offset/this.blockSize),o=Math.floor(i/this.blockSize),s=new ArrayBuffer(n.length),l=new Uint8Array(s);for(let u=a;u<=o;++u){const h=e.get(u),c=h.offset-n.offset,f=h.top-i;let d=0,g=0,p;c<0?d=-c:c>0&&(g=c),f<0?p=h.length-d:p=i-h.offset-d;const v=new Uint8Array(h.data,d,p);l.set(v,g)}return s})}}class rP{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class nP{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class Pct extends rP{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Lct extends nP{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const n=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e});return new Pct(n)}}class Dct extends rP{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class Oct extends nP{constructRequest(t,e){return new Promise((n,i)=>{const a=new XMLHttpRequest;a.open("GET",this.url),a.responseType="arraybuffer";for(const[o,s]of Object.entries(t))a.setRequestHeader(o,s);a.onload=()=>{const o=a.response;n(new Dct(a,o))},a.onerror=i,a.onabort=()=>i(new lg("Request aborted")),a.send(),e&&(e.aborted&&a.abort(),e.addEventListener("abort",()=>a.abort()))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}const g1={},Nct=Object.freeze(Object.defineProperty({__proto__:null,default:g1},Symbol.toStringTag,{value:"Module"}));class Fct extends rP{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class kct extends nP{constructor(t){super(t),this.parsedUrl=g1.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",g1)}constructRequest(t,e){return new Promise((n,i)=>{const a=this.httpApi.get({...this.parsedUrl,headers:t},o=>{const s=new Promise(l=>{const u=[];o.on("data",h=>{u.push(h)}),o.on("end",()=>{const h=Buffer.concat(u).buffer;l(h)}),o.on("error",i)});n(new Fct(o,s))});a.on("error",i),e&&(e.aborted&&a.destroy(new lg("Request aborted")),e.addEventListener("abort",()=>a.destroy(new lg("Request aborted"))))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class iP extends eP{constructor(t,e,n,i){super(),this.client=t,this.headers=e,this.maxRanges=n,this.allowFullFile=i,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length>1,Promise.all(t.map(n=>this.fetchSlice(n,e))))}async fetchSlices(t,e){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:i,length:a})=>`${i}-${i+a}`).join(",")}`},signal:e});if(n.ok)if(n.status===206){const{type:i,params:a}=wct(n.getHeader("content-type"));if(i==="multipart/byteranges"){const c=Tct(await n.getData(),a.boundary);return this._fileSize=c[0].fileSize||null,c}const o=await n.getData(),{start:s,end:l,total:u}=KM(n.getHeader("content-range"));this._fileSize=u||null;const h=[{data:o,offset:s,length:l-s}];if(t.length>1){const c=await Promise.all(t.slice(1).map(f=>this.fetchSlice(f,e)));return h.concat(c)}return h}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await n.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:n,length:i}=t,a=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+i}`},signal:e});if(a.ok)if(a.status===206){const o=await a.getData(),{total:s}=KM(a.getHeader("content-range"));return this._fileSize=s||null,{data:o,offset:n,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await a.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function aP(r,{blockSize:t,cacheSize:e}){return t===null?r:new Rct(r,{blockSize:t,cacheSize:e})}function Gct(r,{headers:t={},credentials:e,maxRanges:n=0,allowFullFile:i=!1,...a}={}){const o=new Lct(r,e),s=new iP(o,t,n,i);return aP(s,a)}function Bct(r,{headers:t={},maxRanges:e=0,allowFullFile:n=!1,...i}={}){const a=new Oct(r),o=new iP(a,t,e,n);return aP(o,i)}function zct(r,{headers:t={},maxRanges:e=0,allowFullFile:n=!1,...i}={}){const a=new kct(r),o=new iP(a,t,e,n);return aP(o,i)}function qM(r,{forceXHR:t=!1,...e}={}){return typeof fetch=="function"&&!t?Gct(r,e):typeof XMLHttpRequest<"u"?Bct(r,e):zct(r,e)}class Vct extends eP{constructor(t){super(),this.file=t}async fetchSlice(t,e){return new Promise((n,i)=>{const a=this.file.slice(t.offset,t.offset+t.length),o=new FileReader;o.onload=s=>n(s.target.result),o.onerror=i,o.onabort=i,o.readAsArrayBuffer(a),e&&e.addEventListener("abort",()=>o.abort())})}}function Uct(r){return new Vct(r)}function JM(r){switch(r){case _e.BYTE:case _e.ASCII:case _e.SBYTE:case _e.UNDEFINED:return 1;case _e.SHORT:case _e.SSHORT:return 2;case _e.LONG:case _e.SLONG:case _e.FLOAT:case _e.IFD:return 4;case _e.RATIONAL:case _e.SRATIONAL:case _e.DOUBLE:case _e.LONG8:case _e.SLONG8:case _e.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${r}`)}}function Wct(r){const t=r.GeoKeyDirectory;if(!t)return null;const e={};for(let n=4;n<=t[3]*4;n+=4){const i=Jht[t[n]],a=t[n+1]?zv[t[n+1]]:null,o=t[n+2],s=t[n+3];let l=null;if(!a)l=s;else{if(l=r[a],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(s,s+o-1):l.subarray&&(l=l.subarray(s,s+o),o===1&&(l=l[0]))}e[i]=l}return e}function wf(r,t,e,n){let i=null,a=null;const o=JM(t);switch(t){case _e.BYTE:case _e.ASCII:case _e.UNDEFINED:i=new Uint8Array(e),a=r.readUint8;break;case _e.SBYTE:i=new Int8Array(e),a=r.readInt8;break;case _e.SHORT:i=new Uint16Array(e),a=r.readUint16;break;case _e.SSHORT:i=new Int16Array(e),a=r.readInt16;break;case _e.LONG:case _e.IFD:i=new Uint32Array(e),a=r.readUint32;break;case _e.SLONG:i=new Int32Array(e),a=r.readInt32;break;case _e.LONG8:case _e.IFD8:i=new Array(e),a=r.readUint64;break;case _e.SLONG8:i=new Array(e),a=r.readInt64;break;case _e.RATIONAL:i=new Uint32Array(e*2),a=r.readUint32;break;case _e.SRATIONAL:i=new Int32Array(e*2),a=r.readInt32;break;case _e.FLOAT:i=new Float32Array(e),a=r.readFloat32;break;case _e.DOUBLE:i=new Float64Array(e),a=r.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===_e.RATIONAL||t===_e.SRATIONAL)for(let s=0;s<e;s+=2)i[s]=a.call(r,n+s*o),i[s+1]=a.call(r,n+(s*o+4));else for(let s=0;s<e;++s)i[s]=a.call(r,n+s*o);return t===_e.ASCII?new TextDecoder("utf-8").decode(i):i}class Hct{constructor(t,e,n){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=n}}class B0 extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class d7{async readRasters(t={}){const{window:e,width:n,height:i}=t;let{resX:a,resY:o,bbox:s}=t;const l=await this.getImage();let u=l;const h=await this.getImageCount(),c=l.getBoundingBox();if(e&&s)throw new Error('Both "bbox" and "window" passed.');if(n||i){if(e){const[g,p]=l.getOrigin(),[v,m]=l.getResolution();s=[g+e[0]*v,p+e[1]*m,g+e[2]*v,p+e[3]*m]}const d=s||c;if(n){if(a)throw new Error("Both width and resX passed");a=(d[2]-d[0])/n}if(i){if(o)throw new Error("Both width and resY passed");o=(d[3]-d[1])/i}}if(a||o){const d=[];for(let g=0;g<h;++g){const p=await this.getImage(g),{SubfileType:v,NewSubfileType:m}=p.fileDirectory;(g===0||v===2||m&1)&&d.push(p)}d.sort((g,p)=>g.getWidth()-p.getWidth());for(let g=0;g<d.length;++g){const p=d[g],v=(c[2]-c[0])/p.getWidth(),m=(c[3]-c[1])/p.getHeight();if(u=p,a&&a>v||o&&o>m)break}}let f=e;if(s){const[d,g]=l.getOrigin(),[p,v]=u.getResolution(l);f=[Math.round((s[0]-d)/p),Math.round((s[1]-g)/v),Math.round((s[2]-d)/p),Math.round((s[3]-g)/v)],f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]}return u.readRasters({...t,window:f})}}class ug extends d7{constructor(t,e,n,i,a={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=n,this.firstIFDOffset=i,this.cache=a.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const n=this.bigTiff?4048:1024;return new yct((await this.source.fetch([{offset:t,length:typeof e<"u"?e:n}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,n=this.bigTiff?8:2;let i=await this.getSlice(t);const a=this.bigTiff?i.readUint64(t):i.readUint16(t),o=a*e+(this.bigTiff?16:6);i.covers(t,o)||(i=await this.getSlice(t,o));const s={};let l=t+(this.bigTiff?8:2);for(let c=0;c<a;l+=e,++c){const f=i.readUint16(l),d=i.readUint16(l+2),g=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let p,v;const m=JM(d),y=l+(this.bigTiff?12:8);if(m*g<=(this.bigTiff?8:4))p=wf(i,d,g,y);else{const _=i.readOffset(y),x=JM(d)*g;if(i.covers(_,x))p=wf(i,d,g,_);else{const w=await this.getSlice(_,x);p=wf(w,d,g,_)}}g===1&&Kht.indexOf(f)===-1&&!(d===_e.RATIONAL||d===_e.SRATIONAL)?v=p[0]:v=p,s[zv[f]]=v}const u=Wct(s),h=i.readOffset(t+n+e*a);return new Hct(s,u,h)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){throw e instanceof B0?new B0(t):e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(e.nextIFDByteOffset===0)throw new B0(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new c7(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(n){if(n instanceof B0)e=!1;else throw n}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=",n=e.length+100;let i=await this.getSlice(t,n);if(e===wf(i,_e.ASCII,e.length,t)){const o=wf(i,_e.ASCII,n,t).split(`
`)[0],s=Number(o.split("=")[1].split(" ")[0])+o.length;s>n&&(i=await this.getSlice(t,s));const l=wf(i,_e.ASCII,s,t);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,h])=>{this.ghostValues[u]=h})}return this.ghostValues}static async fromSource(t,e,n){const i=(await t.fetch([{offset:0,length:1024}],n))[0],a=new mct(i),o=a.getUint16(0,0);let s;if(o===18761)s=!0;else if(o===19789)s=!1;else throw new TypeError("Invalid byte order value.");const l=a.getUint16(2,s);let u;if(l===42)u=!1;else if(l===43){if(u=!0,a.getUint16(4,s)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const h=u?a.getUint64(8,s):a.getUint32(4,s);return new ug(t,s,u,h,e)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class $ct extends d7{constructor(t,e){super(),this.mainFile=t,this.overviewFiles=e,this.imageFiles=[t].concat(e),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(e=>e.parseFileDirectoryAt(e.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let e=0,n=0;for(let i=0;i<this.imageFiles.length;i++){const a=this.imageFiles[i];for(let o=0;o<this.imageCounts[i];o++){if(t===e){const s=await a.requestIFD(n);return new c7(s.fileDirectory,s.geoKeyDirectory,a.dataView,a.littleEndian,a.cache,a.source)}e++,n++}n=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(e=>e.getImageCount()));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce((e,n)=>e+n,0),this.imageCount}}async function Yct(r,t={},e){return ug.fromSource(qM(r,t),e)}async function Xct(r,t){return ug.fromSource(Uct(r),t)}async function Zct(r,t=[],e={},n){const i=await ug.fromSource(qM(r,e),n),a=await Promise.all(t.map(o=>ug.fromSource(qM(o,e))));return new $ct(i,a)}function jct(r){return((r.fileDirectory.NewSubfileType||0)&4)===4}function Kct(r,t){if(!r)return!1;if(r===!0)return!0;if(t.getSamplesPerPixel()!==3)return!1;const e=t.fileDirectory.PhotometricInterpretation,n=Ai;return e===n.CMYK||e===n.YCbCr||e===n.CIELab||e===n.ICCLab}const BF="STATISTICS_MAXIMUM",zF="STATISTICS_MINIMUM",fb=256;let db;function qct(){return db||(db=new xct),db}function Jct(r){try{return r.getBoundingBox()}catch{return[0,0,r.getWidth(),r.getHeight()]}}function Qct(r){try{return r.getOrigin().slice(0,2)}catch{return[0,r.getHeight()]}}function tft(r,t){try{return r.getResolution(t)}catch{return[t.getWidth()/r.getWidth(),t.getHeight()/r.getHeight()]}}function eft(r){const t=r.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey&&t.ProjectedCSTypeGeoKey!==32767){const e="EPSG:"+t.ProjectedCSTypeGeoKey;let n=Xt(e);if(!n){const i=JO(t.ProjLinearUnitsGeoKey);i&&(n=new zi({code:e,units:i}))}return n}if(t.GeographicTypeGeoKey&&t.GeographicTypeGeoKey!==32767){const e="EPSG:"+t.GeographicTypeGeoKey;let n=Xt(e);if(!n){const i=JO(t.GeogAngularUnitsGeoKey);i&&(n=new zi({code:e,units:i}))}return n}return null}function rft(r){return r.getImageCount().then(function(t){const e=new Array(t);for(let n=0;n<t;++n)e[n]=r.getImage(n);return Promise.all(e)})}function nft(r,t){let e;return r.blob?e=Xct(r.blob):r.overviews?e=Zct(r.url,r.overviews,t):e=Yct(r.url,t),e.then(rft)}function cv(r,t,e,n,i){if(Array.isArray(r)){const a=r.length;if(!Array.isArray(t)||a!=t.length){const o=new Error(n);throw i(o),o}for(let o=0;o<a;++o)cv(r[o],t[o],e,n,i);return}if(t=t,Math.abs(r-t)>e*r)throw new Error(n)}function ift(r){return r instanceof Int8Array?-128:r instanceof Int16Array?-32768:r instanceof Int32Array?-2147483648:r instanceof Float32Array?12e-39:0}function aft(r){return r instanceof Int8Array?127:r instanceof Uint8Array||r instanceof Uint8ClampedArray?255:r instanceof Int16Array?32767:r instanceof Uint16Array?65535:r instanceof Int32Array?2147483647:r instanceof Uint32Array?4294967295:r instanceof Float32Array?34e37:255}class g7 extends vht{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:t.interpolate!==!1,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const e=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=t.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(a=>a.url).join(","));const n=this,i=new Array(e);for(let a=0;a<e;++a)i[a]=nft(this.sourceInfo_[a],this.sourceOptions_);Promise.all(i).then(function(a){n.configure_(a)}).catch(function(a){eN(a),n.error_=a,n.setState("error")})}getError(){return this.error_}determineProjection(t){const e=t[0];for(let n=e.length-1;n>=0;--n){const i=e[n],a=eft(i);if(a){this.projection=a;break}}}configure_(t){let e,n,i,a,o;const s=new Array(t.length),l=new Array(t.length),u=new Array(t.length);let h=0;const c=t.length;for(let p=0;p<c;++p){const v=[],m=[];t[p].forEach(b=>{jct(b)?m.push(b):v.push(b)});const y=v.length;if(m.length>0&&m.length!==y)throw new Error(`Expected one mask per image found ${m.length} masks and ${y} images`);let _,x;const w=new Array(y),S=new Array(y),T=new Array(y);l[p]=new Array(y),u[p]=new Array(y);for(let b=0;b<y;++b){const E=v[b],C=E.getGDALNoData();u[p][b]=E.getGDALMetadata(0),l[p][b]=C;const M=this.sourceInfo_[p].bands;s[p]=M?M.length:E.getSamplesPerPixel();const A=y-(b+1);_||(_=Jct(E)),x||(x=Qct(E));const R=tft(E,v[0]);T[A]=R[0];const P=[E.getTileWidth(),E.getTileHeight()];P[0]!==P[1]&&P[1]<fb&&(P[0]=fb,P[1]=fb),w[A]=P;const L=R[0]/Math.abs(R[1]);S[A]=[P[0],P[1]/L]}if(e?Rn(e,_,e):e=_,!n)n=x;else{const b=`Origin mismatch for source ${p}, got [${x}] but expected [${n}]`;cv(n,x,0,b,this.viewRejector)}if(!o)o=T,this.resolutionFactors_[p]=1;else{o.length-h>T.length&&(h=o.length-T.length);const b=o[o.length-1]/T[T.length-1];this.resolutionFactors_[p]=b;const E=T.map(M=>M*=b),C=`Resolution mismatch for source ${p}, got [${E}] but expected [${o}]`;cv(o.slice(h,o.length),E,.02,C,this.viewRejector)}i?cv(i.slice(h,i.length),S,.01,`Tile size mismatch for source ${p}`,this.viewRejector):i=S,a?cv(a.slice(h,a.length),w,0,`Tile size mismatch for source ${p}`,this.viewRejector):a=w,this.sourceImagery_[p]=v.reverse(),this.sourceMasks_[p]=m.reverse()}for(let p=0,v=this.sourceImagery_.length;p<v;++p){const m=this.sourceImagery_[p];for(;m.length<o.length;)m.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.samplesPerPixel_=s,this.nodataValues_=l,this.metadata_=u;t:for(let p=0;p<c;++p){if(this.sourceInfo_[p].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[p].length){this.addAlpha_=!0;break}const v=l[p],m=this.sourceInfo_[p].bands;if(m){for(let y=0;y<m.length;++y)if(v[m[y]-1]!==null){this.addAlpha_=!0;break t}continue}for(let y=0;y<v.length;++y)if(v[y]!==null){this.addAlpha_=!0;break t}}let f=this.addAlpha_?1:0;for(let p=0;p<c;++p)f+=s[p];this.bandCount=f;const d=new Og({extent:e,minZoom:h,origin:n,resolutions:o,tileSizes:i});this.tileGrid=d,this.setTileSizes(a),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const g=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:Au(ua(e),this.projection),extent:Ty(e,this.projection),zoom:g})}loadTile_(t,e,n,i){const a=this.getTileSize(t),o=this.sourceImagery_.length,s=new Array(o*2),l=this.nodataValues_,u=this.sourceInfo_,h=qct();for(let c=0;c<o;++c){const f=u[c],d=this.resolutionFactors_[c],g=[Math.round(e*(a[0]*d)),Math.round(n*(a[1]*d)),Math.round((e+1)*(a[0]*d)),Math.round((n+1)*(a[1]*d))],p=this.sourceImagery_[c][t];let v;f.bands&&(v=f.bands.map(function(w){return w-1}));let m;"nodata"in f&&f.nodata!==null?m=f.nodata:v?m=v.map(function(w){return l[c][w]}):m=l[c];const y={window:g,width:a[0],height:a[1],samples:v,fillValue:m,pool:h,interleave:!1,signal:i.signal};Kct(this.convertToRGB_,p)?s[c]=p.readRGB(y):s[c]=p.readRasters(y);const _=o+c,x=this.sourceMasks_[c][t];if(!x){s[_]=Promise.resolve(null);continue}s[_]=x.readRasters({window:g,width:a[0],height:a[1],samples:[0],pool:h,interleave:!1})}return Promise.all(s).then(this.composeTile_.bind(this,a)).catch(function(c){throw eN(c),c})}composeTile_(t,e){const n=this.metadata_,i=this.sourceInfo_,a=this.sourceImagery_.length,o=this.bandCount,s=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,h=this.addAlpha_,c=t[0]*t[1],f=c*o;let d;u?d=new Uint8Array(f):d=new Float32Array(f);let g=0;for(let p=0;p<c;++p){let v=h;for(let m=0;m<a;++m){const y=i[m];let _=y.min,x=y.max,w,S;if(u){const T=n[m][0];_===void 0&&(T&&zF in T?_=parseFloat(T[zF]):_=ift(e[m][0])),x===void 0&&(T&&BF in T?x=parseFloat(T[BF]):x=aft(e[m][0])),w=255/(x-_),S=-_*w}for(let T=0;T<s[m];++T){const b=e[m][T][p];let E;if(u?E=gr(w*b+S,0,255):E=b,!h)d[g]=E;else{let C=y.nodata;if(C===void 0){let A;y.bands?A=y.bands[T]-1:A=T,C=l[m][A]}const M=isNaN(C);(!M&&b!==C||M&&!isNaN(b))&&(v=!1,d[g]=E)}g++}if(!v){const T=a+m,b=e[T];b&&!b[0][p]&&(v=!0)}}h&&(v||(d[g]=255),g++)}return d}}const ui={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},kc={};kc[ui.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};kc[ui.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};kc[ui.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};kc.none={none:{supports:[],formats:[],qualities:[]}};const oft=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,VF=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,sft=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function lft(r){let t=r.getComplianceLevelSupportedFeatures();return t===void 0&&(t=kc[ui.VERSION1].level0),{url:r.imageInfo["@id"]===void 0?void 0:r.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:[...t.formats,r.imageInfo.formats===void 0?[]:r.imageInfo.formats],qualities:[...t.qualities,r.imageInfo.qualities===void 0?[]:r.imageInfo.qualities],resolutions:r.imageInfo.scale_factors,tileSize:r.imageInfo.tile_width!==void 0?r.imageInfo.tile_height!==void 0?[r.imageInfo.tile_width,r.imageInfo.tile_height]:[r.imageInfo.tile_width,r.imageInfo.tile_width]:r.imageInfo.tile_height!=null?[r.imageInfo.tile_height,r.imageInfo.tile_height]:void 0}}function uft(r){const t=r.getComplianceLevelSupportedFeatures(),e=Array.isArray(r.imageInfo.profile)&&r.imageInfo.profile.length>1,n=e&&r.imageInfo.profile[1].supports?r.imageInfo.profile[1].supports:[],i=e&&r.imageInfo.profile[1].formats?r.imageInfo.profile[1].formats:[],a=e&&r.imageInfo.profile[1].qualities?r.imageInfo.profile[1].qualities:[];return{url:r.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:r.imageInfo.sizes===void 0?void 0:r.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:r.imageInfo.tiles===void 0?void 0:[r.imageInfo.tiles.map(function(o){return o.width})[0],r.imageInfo.tiles.map(function(o){return o.height===void 0?o.width:o.height})[0]],resolutions:r.imageInfo.tiles===void 0?void 0:r.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:[...t.supports,...n],formats:[...t.formats,...i],qualities:[...t.qualities,...a]}}function hft(r){const t=r.getComplianceLevelSupportedFeatures(),e=r.imageInfo.extraFormats===void 0?t.formats:[...t.formats,...r.imageInfo.extraFormats],n=r.imageInfo.preferredFormats!==void 0&&Array.isArray(r.imageInfo.preferredFormats)&&r.imageInfo.preferredFormats.length>0?r.imageInfo.preferredFormats.filter(function(i){return["jpg","png","gif"].includes(i)}).reduce(function(i,a){return i===void 0&&e.includes(a)?a:i},void 0):void 0;return{url:r.imageInfo.id,sizes:r.imageInfo.sizes===void 0?void 0:r.imageInfo.sizes.map(function(i){return[i.width,i.height]}),tileSize:r.imageInfo.tiles===void 0?void 0:[r.imageInfo.tiles.map(function(i){return i.width})[0],r.imageInfo.tiles.map(function(i){return i.height})[0]],resolutions:r.imageInfo.tiles===void 0?void 0:r.imageInfo.tiles.map(function(i){return i.scaleFactors})[0],supports:r.imageInfo.extraFeatures===void 0?t.supports:[...t.supports,...r.imageInfo.extraFeatures],formats:e,qualities:r.imageInfo.extraQualities===void 0?t.qualities:[...t.qualities,...r.imageInfo.extraQualities],preferredFormat:n}}const _w={};_w[ui.VERSION1]=lft;_w[ui.VERSION2]=uft;_w[ui.VERSION3]=hft;class cft{constructor(t){this.setImageInfo(t)}setImageInfo(t){typeof t=="string"?this.imageInfo=JSON.parse(t):this.imageInfo=t}getImageApiVersion(){if(this.imageInfo===void 0)return;let t=this.imageInfo["@context"]||"ol-no-context";typeof t=="string"&&(t=[t]);for(let e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return ui.VERSION1;case"http://iiif.io/api/image/2/context.json":return ui.VERSION2;case"http://iiif.io/api/image/3/context.json":return ui.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(ui.VERSION1)&&this.imageInfo.identifier)return ui.VERSION1;break}pe(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(t){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(t===void 0&&(t=this.getImageApiVersion()),t){case ui.VERSION1:if(oft.test(this.imageInfo.profile))return this.imageInfo.profile;break;case ui.VERSION3:if(sft.test(this.imageInfo.profile))return this.imageInfo.profile;break;case ui.VERSION2:if(typeof this.imageInfo.profile=="string"&&VF.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&VF.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(t){const e=this.getComplianceLevelEntryFromProfile(t);if(e===void 0)return;const n=e.match(/level[0-2](?:\.json)?$/g);return Array.isArray(n)?n[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return e===void 0?kc.none.none:kc[t][e]}getTileSourceOptions(t){const e=t||{},n=this.getImageApiVersion();if(n===void 0)return;const i=n===void 0?void 0:_w[n](this);if(i!==void 0)return{url:i.url,version:n,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:e.format!==void 0&&i.formats.includes(e.format)?e.format:i.preferredFormat!==void 0?i.preferredFormat:"jpg",supports:i.supports,quality:e.quality&&i.qualities.includes(e.quality)?e.quality:i.qualities.includes("native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort(function(a,o){return o-a}):void 0,tileSize:i.tileSize}}}function QM(r){return Array.isArray(r)?Math.min(...r):r}class fft extends _U{constructor(t,e,n,i,a,o,s){let l=t.getExtent();l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=e.getExtent();u&&e.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const h=u?Rn(n,u):n,c=ua(h),f=zm(t,e,c,i),d=D2,g=new O2(t,e,h,l,f*d,i),p=g.calculateSourceExtent(),v=Zu(p)?null:o(p,f,a),m=v?Ot.IDLE:Ot.EMPTY,y=v?v.getPixelRatio():1;super(n,i,y,m),this.targetProj_=e,this.maxSourceExtent_=l,this.triangulation_=g,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=v,this.sourcePixelRatio_=y,this.interpolate_=s,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Ot.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==Ot.LOADED){const e=Me(this.targetExtent_)/this.targetResolution_,n=kr(this.targetExtent_)/this.targetResolution_;this.canvas_=N2(e,n,this.sourcePixelRatio_,QM(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==Ot.IDLE){this.state=Ot.LOADING,this.changed();const t=this.sourceImage_.getState();t==Ot.LOADED||t==Ot.ERROR?this.reproject_():(this.sourceListenerKey_=se(this.sourceImage_,Bt.CHANGE,e=>{const n=this.sourceImage_.getState();(n==Ot.LOADED||n==Ot.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Ve(this.sourceListenerKey_),this.sourceListenerKey_=null}}const iu=4,gb={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class dft extends ca{constructor(t,e){super(t),this.image=e}}class gft extends m2{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=t.loader?t.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const n=KS(e,t,0);t=e[n]}return t}getImage(t,e,n,i){const a=this.getProjection();if(!a||!i||ra(a,i))return a&&(i=a),this.getImageInternal(t,e,n,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ra(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&Mu(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new fft(a,i,t,e,n,(o,s,l)=>this.getImageInternal(o,s,l,a),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,i){if(this.loader){const a=p7(t,e,n,1),o=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Oa(this.wantedExtent_,a)||Oa(this.image.getExtent(),a))&&(this.wantedResolution_&&QM(this.wantedResolution_)===o||QM(this.image.getResolution())===o)))return this.image;this.wantedProjection_=i,this.wantedExtent_=a,this.wantedResolution_=o,this.image=new _U(a,o,n,this.loader),this.image.addEventListener(Bt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case Ot.LOADING:this.loading=!0,n=gb.IMAGELOADSTART;break;case Ot.LOADED:this.loading=!1,n=gb.IMAGELOADEND;break;case Ot.ERROR:this.loading=!1,n=gb.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new dft(n,e))}}function pft(r,t){r.getImage().src=t}function p7(r,t,e,n){const i=t/e,a=ua(r),o=eu(Me(r)/i,iu),s=eu(kr(r)/i,iu),l=eu((n-1)*o/2,iu),u=o+2*l,h=eu((n-1)*s/2,iu),c=s+2*h;return Tm(a,i,0,[u,c])}const bx="1.3.0",UF=[101,101];function v7(r,t,e,n,i){i.WIDTH=e[0],i.HEIGHT=e[1];const a=n.getAxisOrientation(),o=GR(i.VERSION,"1.3")>=0;i[o?"CRS":"SRS"]=n.getCode();const s=o&&a.startsWith("ne")?[t[1],t[0],t[3],t[2]]:t;return i.BBOX=s.join(","),U2(r,i)}function m7(r,t,e,n,i,a,o){a=Object.assign({REQUEST:"GetMap"},a);const s=t/e,l=[tN(Me(r)/s,iu),tN(kr(r)/s,iu)];if(e!=1)switch(o){case"geoserver":const h=90*e+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+h:a.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":a.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":a.DPI=90*e;break;default:throw new Error("Unknown `serverType` configured")}return v7(i,r,l,n,a)}function Ex(r,t){return Object.assign({REQUEST:t,SERVICE:"WMS",VERSION:bx,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},r)}function vft(r){const t=r.hidpi===void 0?!0:r.hidpi,e=Xt(r.projection||"EPSG:3857"),n=r.ratio||1.5,i=r.load||SU,a=r.crossOrigin??null;return(o,s,l)=>{o=p7(o,s,l,n),l!=1&&(!t||r.serverType===void 0)&&(l=1);const u=m7(o,s,l,e,r.url,Ex(r.params,"GetMap"),r.serverType),h=new Image;return h.crossOrigin=a,i(h,u).then(c=>({image:c,extent:o,pixelRatio:l}))}}function mft(r,t,e){if(r.url===void 0)return;const n=Xt(r.projection||"EPSG:3857"),i=Tm(t,e,0,UF),a={QUERY_LAYERS:r.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(a,Ex(r.params,"GetFeatureInfo"),r.params);const o=ud((t[0]-i[0])/e,iu),s=ud((i[3]-t[1])/e,iu),l=GR(a.VERSION,"1.3")>=0;return a[l?"I":"X"]=o,a[l?"J":"Y"]=s,v7(r.url,i,UF,n,a)}function yft(r,t){if(r.url===void 0)return;const e={SERVICE:"WMS",VERSION:bx,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t!==void 0){const n=Xt(r.projection||"EPSG:3857").getMetersPerUnit()||1,i=28e-5;e.SCALE=t*n/i}if(Object.assign(e,r.params),r.params!==void 0&&e.LAYER===void 0){const n=e.LAYERS;if(!(!Array.isArray(n)||n.length!==1))return;e.LAYER=n}return U2(r.url,e)}class _ft extends gft{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:pft,this.params_=Object.assign({},t.params),this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(t,e,n,i){const a=Xt(n),o=this.getProjection();o&&o!==a&&(e=zm(o,a,t,e),t=Ig(t,a,o));const s={url:this.url_,params:{...this.params_,...i},projection:o||a};return mft(s,t,e)}getLegendUrl(t,e){return yft({url:this.url_,params:{...this.params_,...e}},t)}getParams(){return this.params_}getImageInternal(t,e,n,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=vft({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(a,o)=>(this.image.setImage(a),this.imageLoadFunction_(this.image,o),SU(a))})),super.getImageInternal(t,e,n,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}class xft extends My{constructor(t){t=t||{},super(t)}}class Sft extends v2{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,i=t.viewState,a=i.resolution,o=this.getLayer().getSource(),s=t.viewHints;let l=t.extent;if(e.extent!==void 0&&(l=Rn(l,na(e.extent,i.projection))),!s[Yr.ANIMATING]&&!s[Yr.INTERACTING]&&!Zu(l))if(o){const u=i.projection,h=o.getImage(l,a,n,u);h&&(this.loadImage(h)?this.image=h:h.getState()===Ot.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=Nr(e.pixelToCoordinateTransform,t.slice()),a=n.getExtent();if(a&&!mo(a,i))return null;const o=this.image.getExtent(),s=this.image.getImage(),l=Me(o),u=Math.floor(s.width*((i[0]-o[0])/l));if(u<0||u>=s.width)return null;const h=kr(o),c=Math.floor(s.height*((o[3]-i[1])/h));return c<0||c>=s.height?null:this.getImageData(s,u,c)}renderFrame(t,e){const n=this.image,i=n.getExtent(),a=n.getResolution(),[o,s]=Array.isArray(a)?a:[a,a],l=n.getPixelRatio(),u=t.layerStatesArray[t.layerIndex],h=t.pixelRatio,c=t.viewState,f=c.center,d=c.resolution,g=h*o/(d*l),p=h*s/(d*l);this.prepareContainer(t,e);const v=this.context.canvas.width,m=this.context.canvas.height,y=this.getRenderContext(t);let _=!1,x=!0;if(u.extent){const E=na(u.extent,c.projection);x=jn(E,t.extent),_=x&&!Oa(E,t.extent),_&&this.clipUnrotated(y,t,E)}const w=n.getImage(),S=Wa(this.tempTransform,v/2,m/2,g,p,0,l*(i[0]-f[0])/o,l*(f[1]-i[3])/s);this.renderedResolution=s*h/l;const T=w.width*S[0],b=w.height*S[3];if(this.getLayer().getSource().getInterpolate()||(y.imageSmoothingEnabled=!1),this.preRender(y,t),x&&T>=.5&&b>=.5){const E=S[4],C=S[5],M=u.opacity;M!==1&&(y.save(),y.globalAlpha=M),y.drawImage(w,0,0,+w.width,+w.height,E,C,T,b),M!==1&&y.restore()}return this.postRender(this.context,t),_&&y.restore(),y.imageSmoothingEnabled=!0,this.container}}class wft extends xft{constructor(t){super(t)}createRenderer(){return new Sft(this)}getData(t){return super.getData(t)}}class Tft extends WW{constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=qn(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,n,i){const a=Xt(n),o=this.getProjection()||a;let s=this.getTileGrid();s||(s=this.getTileGridForProjection(o));const l=Ig(t,a,o),u=zm(o,a,t,e),h=s.getZForResolution(u,this.zDirection),c=s.getResolution(h),f=s.getTileCoordForCoordAndZ(l,h);if(s.getResolutions().length<=f[0])return;let d=s.getTileCoordExtent(f,this.tmpExtent_);const g=this.gutter_;g!==0&&(d=il(d,c*g,d));const p={QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,Ex(this.params_,"GetFeatureInfo"),i);const v=Math.floor((l[0]-d[0])/c),m=Math.floor((d[3]-l[1])/c);return p[this.v13_?"I":"X"]=v,p[this.v13_?"J":"Y"]=m,this.getRequestUrl_(f,d,1,o||a,p)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const n={SERVICE:"WMS",VERSION:bx,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;n.LAYER=i}if(t!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,a=28e-5;n.SCALE=t*i/a}return Object.assign(n,e),U2(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,n,i,a){const o=this.urls;if(!o)return;let s;if(o.length==1)s=o[0];else{const l=Xs(nW(t),o.length);s=o[l]}return m7(e,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(t[0]),n,i,s,a,this.serverType_)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||bx;this.v13_=GR(t,"1.3")>=0}tileUrlFunction(t,e,n){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(n)),i.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const a=i.getResolution(t[0]);let o=i.getTileCoordExtent(t,this.tmpExtent_);const s=this.gutter_;s!==0&&(o=il(o,a*s,o));const l=Object.assign({},Ex(this.params_,"GetMap"));return this.getRequestUrl_(t,o,e,n,l)}}const bft=r=>{let t;if((r==null?void 0:r.tileGrid)!==void 0)return t=r.tileGrid,new Og(t)},Io=(r,t)=>{const e=bft(t),n={...t,tileGrid:e};return new F2({...r,source:new HW(n)})},Eft=r=>new F2({...r,source:void 0}),z0=(r,t,e)=>{const n=[];for(let s=0;s<19;s++)n[s]=Math.pow(2,18-s);const i=new Og({origin:[0,0],resolutions:n}),a={...t,url:"",projection:"BD:09",tileGrid:i,tileUrlFunction:function(s){if(!s)return"";const l=s[0],u=s[1],h=-s[2]-1;return e.replace("{x}",u.toString()).replace("{y}",h.toString()).replace("{z}",l.toString())},crossOrigin:"anonymous"},o=new HW(a);return new F2({...r,source:o})},Cft=(r,t)=>{const e={...r,source:new g7(t)};return new z2(e)},kg=(r,t)=>{He(()=>t.visible,e=>{if(r){const n=!!e;r==null||r.setVisible(n)}},{deep:!0}),He(()=>t.extent,e=>{r==null||r.setExtent(e)},{deep:!0}),He(()=>t.maxResolution,e=>{(e||e===0)&&(r==null||r.setMaxResolution(e))}),He(()=>t.minResolution,e=>{(e||e===0)&&(r==null||r.setMinResolution(e))}),He(()=>t.opacity,e=>{(e||e===0)&&(r==null||r.setOpacity(e))}),He(()=>t.zIndex,e=>{(e||e===0)&&(r==null||r.setZIndex(e))}),He(()=>t.maxZoom,e=>{(e||e===0)&&(r==null||r.setMaxZoom(e))}),He(()=>t.minZoom,e=>{(e||e===0)&&(r==null||r.setMinZoom(e))})},Ro=new Uint8Array(4);class Mft{constructor(t,e){this.helper_=t;const n=t.getGL();this.texture_=n.createTexture(),this.framebuffer_=n.createFramebuffer(),this.depthbuffer_=n.createRenderbuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){vs(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return Ro[0]=0,Ro[1]=0,Ro[2]=0,Ro[3]=0,Ro;this.readAll();const n=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return Ro[0]=this.data_[n*4],Ro[1]=this.data_[n*4+1],Ro[2]=this.data_[n*4+2],Ro[3]=this.data_[n*4+3],Ro}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),e.bindRenderbuffer(e.RENDERBUFFER,this.depthbuffer_),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t[0],t[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}const WF={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function Aft(){const r='const t="GENERATE_POLYGON_BUFFERS",e="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function x(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],u=e[2],i=e[3],f=e[4],s=e[5];return t[0]=i/n,t[1]=-o/n,t[2]=-u/n,t[3]=x/n,t[4]=(u*s-i*f)/n,t[5]=-(x*s-o*f)/n,t}function o(t,e,n=2){const r=e&&e.length,x=r?e[0]*n:t.length;let o=u(t,0,x,n,!0);const i=[];if(!o||o.next===o.prev)return i;let s,l,c;if(r&&(o=function(t,e,n,r){const x=[];for(let n=0,o=e.length;n<o;n++){const i=u(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1);i===i.next&&(i.steiner=!0),x.push(g(i))}x.sort(y);for(let t=0;t<x.length;t++)n=h(x[t],n);return n}(t,e,o,n)),t.length>80*n){s=1/0,l=1/0;let e=-1/0,r=-1/0;for(let o=n;o<x;o+=n){const n=t[o],x=t[o+1];n<s&&(s=n),x<l&&(l=x),n>e&&(e=n),x>r&&(r=x)}c=Math.max(e-s,r-l),c=0!==c?32767/c:0}return f(o,i,n,s,l,c,0),i}function u(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,u=n-r;o<n;o+=r)x+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=z(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=z(x/r|0,t[x],t[x+1],o);return o&&M(o,o.next)&&(F(o),o=o.next),o}function i(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(F(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function f(t,e,n,r,x,o,u){if(!t)return;!u&&o&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=v(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let u=x,i=0;for(let t=0;t<n&&(i++,u=u.nextZ,u);t++);let f=n;for(;i>0||f>0&&u;)0!==i&&(0===f||!u||x.z<=u.z)?(r=x,x=x.nextZ,i--):(r=u,u=u.nextZ,f--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=u}o.nextZ=null,n*=2}while(e>1)}(x)}(t,r,x,o);let y=t;for(;t.prev!==t.next;){const h=t.prev,p=t.next;if(o?l(t,r,x,o):s(t))e.push(h.i,t.i,p.i),F(t),t=p.next,y=p.next;else if((t=p)===y){u?1===u?f(t=c(i(t),e),e,n,r,x,o,2):2===u&&a(t,e,n,r,x,o):f(i(t),e,n,r,x,o,1);break}}}function s(t){const e=t.prev,n=t,r=t.next;if(d(e,n,r)>=0)return!1;const x=e.x,o=n.x,u=r.x,i=e.y,f=n.y,s=r.y,l=x<o?x<u?x:u:o<u?o:u,c=i<f?i<s?i:s:f<s?f:s,a=x>o?x>u?x:u:o>u?o:u,y=i>f?i>s?i:s:f>s?f:s;let h=r.next;for(;h!==e;){if(h.x>=l&&h.x<=a&&h.y>=c&&h.y<=y&&b(x,i,o,f,u,s,h.x,h.y)&&d(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function l(t,e,n,r){const x=t.prev,o=t,u=t.next;if(d(x,o,u)>=0)return!1;const i=x.x,f=o.x,s=u.x,l=x.y,c=o.y,a=u.y,y=i<f?i<s?i:s:f<s?f:s,h=l<c?l<a?l:a:c<a?c:a,p=i>f?i>s?i:s:f>s?f:s,g=l>c?l>a?l:a:c>a?c:a,Z=v(y,h,e,n,r),M=v(p,g,e,n,r);let w=t.prevZ,m=t.nextZ;for(;w&&w.z>=Z&&m&&m.z<=M;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;w&&w.z>=Z;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;m&&m.z<=M;){if(m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(t,e){let n=t;do{const r=n.prev,x=n.next.next;!M(r,x)&&w(r,n,n.next,x)&&E(r,x)&&E(x,r)&&(e.push(r.i,n.i,x.i),F(n),F(n.next),n=t=x),n=n.next}while(n!==t);return i(n)}function a(t,e,n,r,x,o){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&Z(u,t)){let s=I(u,t);return u=i(u,u.next),s=i(s,s.next),f(u,e,n,r,x,o,0),void f(s,e,n,r,x,o,0)}t=t.next}u=u.next}while(u!==t)}function y(t,e){return t.x-e.x}function h(t,e){const n=function(t,e){let n=e;const r=t.x,x=t.y;let o,u=-1/0;do{if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>u&&(u=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const i=o,f=o.x,s=o.y;let l=1/0;n=o;do{if(r>=n.x&&n.x>=f&&r!==n.x&&b(x<s?r:u,x,f,s,x<s?u:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);E(n,t)&&(e<l||e===l&&(n.x>o.x||n.x===o.x&&p(o,n)))&&(o=n,l=e)}n=n.next}while(n!==i);return o}(t,e);if(!n)return e;const r=I(n,t);return i(r,r.next),i(n,n.next)}function p(t,e){return d(t.prev,t,e.prev)<0&&d(e.next,t,t.next)<0}function v(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,x,o,u,i){return(x-u)*(e-i)>=(t-u)*(o-i)&&(t-u)*(r-i)>=(n-u)*(e-i)&&(n-u)*(o-i)>=(x-u)*(r-i)}function Z(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(d(t.prev,t,e.prev)||d(t,e.prev,e))||M(t,e)&&d(t.prev,t,t.next)>0&&d(e.prev,e,e.next)>0)}function d(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function M(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,r){const x=A(d(t,e,n)),o=A(d(t,e,r)),u=A(d(n,r,t)),i=A(d(n,r,e));return x!==o&&u!==i||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==u||!m(n,t,r))||!(0!==i||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function E(t,e){return d(t.prev,t,t.next)<0?d(t,e,t.next)>=0&&d(t,t.prev,e)>=0:d(t,e,t.prev)<0||d(t,t.next,e)<0}function I(t,e){const n=P(t.i,t.x,t.y),r=P(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function z(t,e,n,r){const x=P(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function F(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}new Array(6);const B=[],N={vertexPosition:0,indexPosition:0};function R(t,e,n,r,x){t[e+0]=n,t[e+1]=r,t[e+2]=x}function S(t,e,n,r,x,o){const u=3+x,i=t[e+0],f=t[e+1],s=B;s.length=x;for(let n=0;n<s.length;n++)s[n]=t[e+2+n];let l=o?o.vertexPosition:0,c=o?o.indexPosition:0;const a=l/u;return R(n,l,i,f,0),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,1),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,2),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,3),s.length&&n.set(s,l+3),l+=u,r[c++]=a,r[c++]=a+1,r[c++]=a+3,r[c++]=a+1,r[c++]=a+2,r[c++]=a+3,N.vertexPosition=l,N.indexPosition=c,N}function T(t,e,n,x,o,u,i,f,s,l,c){const a=10+f.length,y=u.length/a,h=[t[e+0],t[e+1]],p=[t[n],t[n+1]],v=t[e+2],g=t[n+2],b=r(s,[...h]),Z=r(s,[...p]);function d(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],u=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),i=[(n[0]-t[0])/u,(n[1]-t[1])/u],f=0===r||0===u?0:Math.acos((s=i[0]*x[0]+i[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;return i[0]*o[0]+i[1]*o[1]>0?f:2*Math.PI-f}let M=-1,w=-1,m=c;const A=null!==o;if(null!==x){M=d(b,Z,r(s,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((M-Math.PI)/2))}if(A){w=d(Z,b,r(s,[...[t[o],t[o+1]]])),Math.cos(w)<=.985&&(m+=Math.tan((Math.PI-w)/2))}function E(t,e){return 0===e?1e4*t:Math.sign(e)*(1e4*t+Math.abs(e))}return u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(0,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(1,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(2,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(3,c)),u.push(...f),i.push(y,y+1,y+2,y+1,y+3,y+2),{length:l+Math.sqrt((Z[0]-b[0])*(Z[0]-b[0])+(Z[1]-b[1])*(Z[1]-b[1])),angle:m}}function _(t,e,n,r,x){const u=2+x;let i=e;const f=t.slice(i,i+x);i+=x;const s=t[i++];let l=0;const c=new Array(s-1);for(let e=0;e<s;e++)l+=t[i++],e<s-1&&(c[e]=l);const a=t.slice(i,i+2*l),y=o(a,c,2);for(let t=0;t<y.length;t++)r.push(y[t]+n.length/u);for(let t=0;t<a.length;t+=2)n.push(a[t],a[t+1],...f);return i+2*l}const O=self;O.onmessage=r=>{const o=r.data;switch(o.type){case e:{const t=3,e=2,n=o.customAttributesSize,r=e+n,x=new Float32Array(o.renderInstructions),u=x.length/r,i=4*u*(n+t),f=new Uint32Array(6*u),s=new Float32Array(i);let l;for(let t=0;t<x.length;t+=r)l=S(x,t,s,f,n,l);const c=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},o);O.postMessage(c,[s.buffer,f.buffer,x.buffer]);break}case n:{const t=[],e=[],n=o.customAttributesSize,r=3,u=new Float32Array(o.renderInstructions);let i=0;const f=[1,0,0,1,0,0];let s,l;for(x(f,o.renderInstructionsTransform);i<u.length;){l=Array.from(u.slice(i,i+n)),i+=n,s=u[i++];const x=i,o=i+(s-1)*r,c=u[x]===u[o]&&u[x+1]===u[o+1];let a=0,y=0;for(let n=0;n<s-1;n++){let h=null;n>0?h=i+(n-1)*r:c&&(h=o-r);let p=null;n<s-2?p=i+(n+2)*r:c&&(p=x+r);const v=T(u,i+n*r,i+(n+1)*r,h,p,t,e,l,f,a,y);a=v.length,y=v.angle}i+=s*r}const c=Uint32Array.from(e),a=Float32Array.from(t),y=Object.assign({vertexBuffer:a.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},o);O.postMessage(y,[a.buffer,c.buffer,u.buffer]);break}case t:{const t=[],e=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let x=0;for(;x<r.length;)x=_(r,x,t,e,n);const u=Uint32Array.from(e),i=Float32Array.from(t),f=Object.assign({vertexBuffer:i.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},o);O.postMessage(f,[i.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(r,"binary").toString("base64"):URL.createObjectURL(new Blob([r],{type:"application/javascript"})))}function Ift(r,t){const e=r.viewState.projection,i=t.getSource().getWrapX()&&e.canWrapX(),a=e.getExtent(),o=r.extent,s=i?Me(a):null,l=i?Math.ceil((o[2]-a[2])/s)+1:1;return[i?Math.floor((o[0]-a[0])/s):0,l,s]}class Rft extends pw{constructor(t,e){const n=e.uniforms||{},i=on();n[Ls.PROJECTION_MATRIX]=i,super(t,{uniforms:n,postProcesses:e.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Sx(dw,XM),this.indicesBuffer_=new Sx(gw,XM),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.program_,this.hitDetectionEnabled_=e.hitDetectionEnabled??!0;const a=e.attributes?e.attributes.map(function(s){return{name:"a_prop_"+s.name,size:1,type:Xo.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Xo.FLOAT},{name:"a_index",size:1,type:Xo.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:Xo.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Xo.FLOAT})),this.attributes.push(...a),this.customAttributes=e.attributes?e.attributes:[],this.previousExtent_=qn(),this.currentTransform_=i,this.renderTransform_=on(),this.invertRenderTransform_=on(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=Aft(),this.worker_.addEventListener("message",s=>{const l=s.data;if(l.type===WF.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,LR(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(s.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[se(o,$r.ADDFEATURE,this.handleSourceFeatureAdded_,this),se(o,$r.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),se(o,$r.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),se(o,$r.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(s=>{this.featureCache_[zt(s)]={feature:s,properties:s.getProperties(),geometry:s.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Mft(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(t){const e=t.feature;this.featureCache_[zt(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const e=t.feature;this.featureCache_[zt(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}}handleSourceFeatureDelete_(t){const e=t.feature;delete this.featureCache_[zt(e)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const e=this.helper.getGL();this.preRender(e,t);const[n,i,a]=Ift(t,this.getLayer());return this.renderWorlds(t,!1,n,i,a),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,n,i,a),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),this.helper.getCanvas()}prepareFrameInternal(t){const e=this.getLayer(),n=e.getSource(),i=t.viewState,a=!t.viewHints[Yr.ANIMATING]&&!t.viewHints[Yr.INTERACTING],o=!Mu(this.previousExtent_,t.extent),s=this.sourceRevision_<n.getRevision();if(s&&(this.sourceRevision_=n.getRevision()),a&&(o||s)){const l=i.projection,u=i.resolution,h=e instanceof ow?e.getRenderBuffer():0,c=il(t.extent,h*u);n.loadFeatures(c,u,l),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const e=on();this.helper.makeProjectionTransform(t,e);const i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,a=i*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==a)&&(this.renderInstructions_=new Float32Array(a));let o,s;const l=[],u=[];let h=-1;for(const f in this.featureCache_)if(o=this.featureCache_[f],s=o.geometry,!(!s||s.getType()!=="Point")){if(l[0]=s.getFlatCoordinates()[0],l[1]=s.getFlatCoordinates()[1],Nr(e,l),this.renderInstructions_[++h]=l[0],this.renderInstructions_[++h]=l[1],this.hitDetectionEnabled_){const d=Qut(h+5,u);this.renderInstructions_[++h]=d[0],this.renderInstructions_[++h]=d[1],this.renderInstructions_[++h]=d[2],this.renderInstructions_[++h]=d[3],this.renderInstructions_[++h]=Number(f)}for(let d=0;d<this.customAttributes.length;d++){const g=this.customAttributes[d].callback(o.feature,o.properties);this.renderInstructions_[++h]=g}}const c={id:++this.lastSentId,type:WF.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};c.projectionTransform=e,this.ready=!1,this.worker_.postMessage(c,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(t,e,n,i,a){if(pe(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=Nr(e.coordinateToPixelTransform,t.slice()),s=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[s[0]/255,s[1]/255,s[2]/255,s[3]/255],u=tht(l),h=this.renderInstructions_[u],c=Math.floor(h).toString(),d=this.getLayer().getSource().getFeatureByUid(c);if(d)return i(d,this.getLayer(),null)}renderWorlds(t,e,n,i,a){let o=n;this.helper.useProgram(this.program_,t),e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),F8(this.currentTransform_,o*a,0),qS(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(e);const s=this.indicesBuffer_.getSize();this.helper.drawElements(0,s)}while(++o<i)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(t){Ve(t)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}const qa={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},Pft=["#00f","#0ff","#0f0","#ff0","#f00"];class Lft extends ow{constructor(t){t=t||{};const e=Object.assign({},t);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,super(e),this.gradient_=null,this.addChangeListener(qa.GRADIENT,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:Pft),this.setBlur(t.blur!==void 0?t.blur:15),this.setRadius(t.radius!==void 0?t.radius:8);const n=t.weight?t.weight:"weight";this.weightFunction_=typeof n=="string"?i=>i.get(n):n,this.setRenderOrder(null)}getBlur(){return this.get(qa.BLUR)}getGradient(){return this.get(qa.GRADIENT)}getRadius(){return this.get(qa.RADIUS)}handleGradientChanged_(){this.gradient_=Dft(this.getGradient())}setBlur(t){this.set(qa.BLUR,t)}setGradient(t){this.set(qa.GRADIENT,t)}setRadius(t){this.set(qa.RADIUS,t)}createRenderer(){const t=new eht().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new Rft(this,{className:this.getClassName(),attributes:[{name:"weight",callback:e=>{const n=this.weightFunction_(e);return n!==void 0?gr(n,0,1):1}}],uniforms:{u_size:()=>(this.get(qa.RADIUS)+this.get(qa.BLUR))*2,u_blurSlope:()=>this.get(qa.RADIUS)/Math.max(1,this.get(qa.BLUR))},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}function Dft(r){const n=Dr(1,256),i=n.createLinearGradient(0,0,1,256),a=1/(r.length-1);for(let o=0,s=r.length;o<s;++o)i.addColorStop(o*a,r[o]);return n.fillStyle=i,n.fillRect(0,0,1,256),n.canvas}const y7=r=>{const t=$e("VMap"),e=qt(t).map,n=$e("$OlMapConfig");let i=r,a=Er(),o=Er(!1),s=ir();ns("ParentTileLayer",a);const l=async w=>{if(o.value=w,i.tileType)switch(i.tileType.toUpperCase()){case"TDT":f();break;case"TDT_SATELLITE":f("Satellite");break;case"TDT_TERRAIN":f("Terrain");break;case"BAIDU":d();break;case"BAIDU_SATELLITE":d("Satellite");break;case"BAIDU_MIDNIGHT":d("midnight");break;case"AMAP":g();break;case"AMAP_SATELLITE":g("Satellite");break;case"GEOTIFF":p();break;case"CUSTOMER":case"XYZ":h();break;default:c();break}else c()},u=()=>{const w=e.getLayers().getArray().filter(S=>S.get("base"));w&&w.length>0&&w.forEach(S=>{e.removeLayer(S)}),l().then()},h=(w=!0)=>{a.value=Io(i,i.source),w?v():qt(t).map.setLayers([a.value])},c=(w=!0)=>{a.value=Eft(i),w?v():qt(t).map.setLayers([a.value])},f=w=>{let S,T,b,E,C,M,A="";const{TDT:R}=n;R&&({Normal:S,Normal_Label:T,Satellite:b,Satellite_Label:E,Terrain:C,Terrain_Label:M,ak:A}=R);try{if(!A)throw new Error("ak!")}catch{}const P={...i},L={...i.source,projection:"EPSG:3857"};if(!w||w==="Normal"){const D=Io(P,{...L,url:S+A});D.set("base",!0);const k=Io(P,{...L,url:T+A});k.set("base",!0),a.value=new Qi({layers:[D,k]})}else if(w==="Satellite"){const D=Io(P,{...L,url:b+A});D.set("base",!0);const k=Io(P,{...L,url:E+A});k.set("base",!0),a.value=new Qi({layers:[D,k]})}else if(w==="Terrain"){const D=Io(P,{...L,url:C+A});D.set("base",!0);const k=Io(P,{...L,url:M+A});k.set("base",!0),a.value=new Qi({layers:[D,k]})}v(!0)},d=w=>{let S,T,b,E,C="";const{Baidu:M}=n;if(M&&({Normal:S,Satellite:T,Satellite_Label:b,midnight:E,ak:C}=M),!w||w==="Normal")S&&(a.value=z0(i,i.source,S),v());else if(w==="Satellite"){if(T&&b){const A=z0(i,i.source,T);A.set("base",!0);const R=z0(i,i.source,b);R.set("base",!0),a.value=new Qi({layers:[A,R]}),v(!0)}}else if(w==="midnight"&&E){try{if(!C)throw new Error("ak!")}catch{}a.value=z0(i,i.source,E+C),v()}},g=w=>{let S,T,b;const{AMap:E}=n;if(E&&({Normal:S,Satellite:T,Satellite_Label:b}=E),!w||w==="Normal"){const C={...i.source,url:S,projection:"GCJ:02"};a.value=Io(i,C),v()}else if(w==="Satellite"){const C={...i.source,url:T,projection:"GCJ:02"},M={...i.source,url:b,projection:"GCJ:02"},A=Io(i,C);A.set("base",!0);const R=Io(i,M);R.set("base",!0),a.value=new Qi({layers:[A,R]}),v(!0)}},p=()=>{a.value=Cft(i,i.source),v()},v=w=>{o.value?y():m(w)},m=w=>{var S;a.value&&(a.value.set("layerTypeName","TileLayer"),a.value.set("base",!0),i.zIndex?a.value.setZIndex(i.zIndex):a.value.setZIndex(0),w?a.value.getLayers().getArray().forEach(E=>{qt(t).map.addLayer(E)}):(S=qt(t).map)==null||S.addLayer(a.value))},y=()=>{if(!a.value)return;new sit({...s.value,layers:[a.value]}).setMap(qt(t).map)},_=async w=>(s.value=w,Promise.resolve()),x=w=>{var S;(S=a.value)==null||S.setVisible(w)};return Kc(()=>{kg(a.value,i)}),{init:l,resetTile:u,setOverviewMapOptions:_,setLayerVisible:x}},Oft="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Gc=(r=21)=>{let t="",e=crypto.getRandomValues(new Uint8Array(r));for(;r--;)t+=Oft[e[r]&63];return t};const Nft=Wr({__name:"index",props:{tileType:{},layerId:{default:`tile-layer-${Gc()}`},source:{default:void 0},className:{},opacity:{},visible:{type:Boolean,default:!0},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},preload:{},map:{},useInterimTilesOnError:{type:Boolean},properties:{},cacheSize:{}},setup(r){const t=r,{init:e,resetTile:n}=y7(t);let i=ir(!1);return He(()=>t.tileType,(a,o)=>{a&&o&&a.toUpperCase()!==o.toUpperCase()&&n()},{deep:!0,immediate:!1}),He(()=>t.source,a=>{a&&t.tileType&&n()},{deep:!0,immediate:!1}),fn(()=>{e().then(()=>{i.value=!0})}),(a,o)=>qt(i)?Ya(a.$slots,"default",{key:0}):Xu("",!0)}}),Fft=Wr({__name:"index",props:{source:{default:()=>({url:"",crossOrigin:"",projection:"EPSG:4326",imageExtent:[0,0,180,90]})},className:{},opacity:{},visible:{type:Boolean,default:!0},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},map:{},properties:{}},setup(r){const t=r,e=$e("VMap"),n=qt(e).map;let i=Er(),a=ir(!1);return Kc(()=>{kg(i.value,t)}),fn(()=>{i.value=new wft({...t,source:void 0}),i.value.set("layerTypeName","ImageLayer"),ns("ParentTileLayer",i),n.addLayer(i.value),a.value=!0}),(o,s)=>qt(a)?Ya(o.$slots,"default",{key:0}):Xu("",!0)}});class Gy{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Le,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?Xt(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Xt(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return Ut()}readFeature(t,e){return Ut()}readFeatures(t,e){return Ut()}readGeometry(t,e){return Ut()}readProjection(t){return Ut()}writeFeature(t,e){return Ut()}writeFeatures(t,e){return Ut()}writeGeometry(t,e){return Ut()}}function Sr(r,t,e){const n=e?Xt(e.featureProjection):null,i=e?Xt(e.dataProjection):null;let a=r;if(n&&i&&!ra(n,i)){t&&(a=r.clone());const o=t?n:i,s=t?i:n;o.getUnits()==="tile-pixels"?a.transform(o,s):a.applyTransform(Qd(o,s))}if(t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),s=function(l){for(let u=0,h=l.length;u<h;++u)l[u]=Math.round(l[u]*o)/o;return l};a===r&&(a=r.clone()),a.applyTransform(s)}return a}function oP(r,t){const e=t?Xt(t.featureProjection):null,n=t?Xt(t.dataProjection):null;return e&&n&&!ra(e,n)?Utt(r,n,e):r}const kft={Point:rr,LineString:ke,Polygon:Kr,MultiPoint:fa,MultiLineString:Dn,MultiPolygon:yi};function Gft(r,t,e){return Array.isArray(t[0])?(lU(r,0,t,e)||(r=r.slice(),PM(r,0,t,e)),r):(t2(r,0,t,e)||(r=r.slice(),ex(r,0,t,e)),r)}function _7(r,t){var a;const e=r.geometry;if(!e)return[];if(Array.isArray(e))return e.map(o=>_7({...r,geometry:o})).flat();const n=e.type==="MultiPolygon"?"Polygon":e.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const i=e.layout.length;return Sr(new di(n,n==="Polygon"?Gft(e.flatCoordinates,e.ends,i):e.flatCoordinates,(a=e.ends)==null?void 0:a.flat(),i,r.properties||{},r.id).enableSimplifyTransformed(),!1,t)}function sP(r,t){if(!r)return null;if(Array.isArray(r)){const n=r.map(i=>sP(i,t));return new zr(n)}const e=kft[r.type];return Sr(new e(r.flatCoordinates,r.layout,r.ends),!1,t)}class lP extends Gy{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(V0(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(V0(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Ut()}readFeaturesFromObject(t,e){return Ut()}readGeometry(t,e){return this.readGeometryFromObject(V0(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Ut()}readProjection(t){return this.readProjectionFromObject(V0(t))}readProjectionFromObject(t){return Ut()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Ut()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Ut()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Ut()}}function V0(r){if(typeof r=="string"){const t=JSON.parse(r);return t||null}return r!==null?r:null}const Bft={Point:Wft,LineString:Hft,Polygon:Zft,MultiPoint:Yft,MultiLineString:$ft,MultiPolygon:Xft},zft={Point:jft,LineString:Kft,Polygon:qft,MultiPoint:Qft,MultiLineString:Jft,MultiPolygon:tdt};class Vft extends lP{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,e,n){const i=t,a=HF(i.geometry,e),o=new Le;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(a),i.attributes){o.setProperties(i.attributes,!0);const s=i.attributes[n];s!==void 0&&o.setId(s)}return o}readFeaturesFromObject(t,e){if(e=e||{},t.features){const n=t,i=[],a=n.features;for(let o=0,s=a.length;o<s;++o)i.push(this.readFeatureFromObject(a[o],e,t.objectIdFieldName));return i}return[this.readFeatureFromObject(t,e)]}readGeometryFromObject(t,e){return HF(t,e)}readProjectionFromObject(t){if(t.spatialReference&&t.spatialReference.wkid!==void 0){const n=t.spatialReference.wkid;return Xt("EPSG:"+n)}return null}writeGeometryObject(t,e){return $F(t,this.adaptOptions(e))}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={};if(!t.hasProperties())return n.attributes={},n;const i=t.getProperties(),a=t.getGeometry();if(a){n.geometry=$F(a,e);const o=e&&(e.dataProjection||e.featureProjection);o&&(n.geometry.spatialReference={wkid:Number(Xt(o).getCode().split(":").pop())}),delete i[t.getGeometryName()]}return Eu(i)?n.attributes={}:n.attributes=i,n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,a=t.length;i<a;++i)n.push(this.writeFeatureObject(t[i],e));return{features:n}}}function HF(r,t){if(!r)return null;let e;if(typeof r.x=="number"&&typeof r.y=="number")e="Point";else if(r.points)e="MultiPoint";else if(r.paths)r.paths.length===1?e="LineString":e="MultiLineString";else if(r.rings){const i=r,a=Gg(i),o=Uft(i.rings,a);o.length===1?(e="Polygon",r=Object.assign({},r,{rings:o[0]})):(e="MultiPolygon",r=Object.assign({},r,{rings:o}))}const n=Bft[e];return Sr(n(r),!1,t)}function Uft(r,t){const e=[],n=[],i=[];let a,o;for(a=0,o=r.length;a<o;++a)e.length=0,by(e,0,r[a],t.length),ew(e,0,e.length,t.length)?n.push([r[a]]):i.push(r[a]);for(;i.length;){const s=i.shift();let l=!1;for(a=n.length-1;a>=0;a--){const u=n[a][0];if(Oa(new al(u).getExtent(),new al(s).getExtent())){n[a].push(s),l=!0;break}}l||n.push([s.reverse()])}return n}function Wft(r){let t;return r.m!==void 0&&r.z!==void 0?t=new rr([r.x,r.y,r.z,r.m],"XYZM"):r.z!==void 0?t=new rr([r.x,r.y,r.z],"XYZ"):r.m!==void 0?t=new rr([r.x,r.y,r.m],"XYM"):t=new rr([r.x,r.y]),t}function Hft(r){const t=Gg(r);return new ke(r.paths[0],t)}function $ft(r){const t=Gg(r);return new Dn(r.paths,t)}function Gg(r){let t="XY";return r.hasZ===!0&&r.hasM===!0?t="XYZM":r.hasZ===!0?t="XYZ":r.hasM===!0&&(t="XYM"),t}function Yft(r){const t=Gg(r);return new fa(r.points,t)}function Xft(r){const t=Gg(r);return new yi(r.rings,t)}function Zft(r){const t=Gg(r);return new Kr(r.rings,t)}function jft(r,t){const e=r.getCoordinates();let n;const i=r.getLayout();if(i==="XYZ")n={x:e[0],y:e[1],z:e[2]};else if(i==="XYM")n={x:e[0],y:e[1],m:e[2]};else if(i==="XYZM")n={x:e[0],y:e[1],z:e[2],m:e[3]};else if(i==="XY")n={x:e[0],y:e[1]};else throw new Error("Invalid geometry layout");return n}function By(r){const t=r.getLayout();return{hasZ:t==="XYZ"||t==="XYZM",hasM:t==="XYM"||t==="XYZM"}}function Kft(r,t){const e=By(r);return{hasZ:e.hasZ,hasM:e.hasM,paths:[r.getCoordinates()]}}function qft(r,t){const e=By(r);return{hasZ:e.hasZ,hasM:e.hasM,rings:r.getCoordinates(!1)}}function Jft(r,t){const e=By(r);return{hasZ:e.hasZ,hasM:e.hasM,paths:r.getCoordinates()}}function Qft(r,t){const e=By(r);return{hasZ:e.hasZ,hasM:e.hasM,points:r.getCoordinates()}}function tdt(r,t){const e=By(r),n=r.getCoordinates(!1),i=[];for(let a=0;a<n.length;a++)for(let o=n[a].length-1;o>=0;o--)i.push(n[a][o]);return{hasZ:e.hasZ,hasM:e.hasM,rings:i}}function $F(r,t){const e=zft[r.getType()];return e(Sr(r,!0,t),t)}class _d extends lP{constructor(t){t=t||{},super(),this.dataProjection=Xt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Xt(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;t.type==="Feature"?n=t:n={type:"Feature",geometry:t,properties:null};const i=uP(n.geometry);if(this.featureClass===di)return _7({geometry:i,id:n.id,properties:n.properties},e);const a=new Le;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&a.setGeometryName(n.geometry_name),a.setGeometry(sP(i,e)),"id"in n&&a.setId(n.id),n.properties&&a.setProperties(n.properties,!0),a}readFeaturesFromObject(t,e){const n=t;let i=null;if(n.type==="FeatureCollection"){const a=t;i=[];const o=a.features;for(let s=0,l=o.length;s<l;++s){const u=this.readFeatureFromObject(o[s],e);u&&i.push(u)}}else i=[this.readFeatureFromObject(t,e)];return i.flat()}readGeometryFromObject(t,e){return edt(t,e)}readProjectionFromObject(t){const e=t.crs;let n;if(e)if(e.type=="name")n=Xt(e.properties.name);else if(e.type==="EPSG")n=Xt("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},i=t.getId();if(i!==void 0&&(n.id=i),!t.hasProperties())return n;const a=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=tA(o,e),delete a[t.getGeometryName()]),Eu(a)||(n.properties=a),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,a=t.length;i<a;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return tA(t,this.adaptOptions(e))}}function uP(r,t){if(!r)return null;let e;switch(r.type){case"Point":{e=ndt(r);break}case"LineString":{e=idt(r);break}case"Polygon":{e=ldt(r);break}case"MultiPoint":{e=odt(r);break}case"MultiLineString":{e=adt(r);break}case"MultiPolygon":{e=sdt(r);break}case"GeometryCollection":{e=rdt(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return e}function edt(r,t){const e=uP(r);return sP(e,t)}function rdt(r,t){return r.geometries.map(function(n){return uP(n)})}function ndt(r){const t=r.coordinates;return{type:"Point",flatCoordinates:t,layout:Qc(t.length)}}function idt(r){var n;const t=r.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:Qc(((n=t[0])==null?void 0:n.length)||2)}}function adt(r){var a,o;const t=r.coordinates,e=((o=(a=t[0])==null?void 0:a[0])==null?void 0:o.length)||2,n=[],i=Ey(n,0,t,e);return{type:"MultiLineString",flatCoordinates:n,ends:i,layout:Qc(e)}}function odt(r){var e;const t=r.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:Qc(((e=t[0])==null?void 0:e.length)||2)}}function sdt(r){var a,o;const t=r.coordinates,e=[],n=((o=(a=t[0])==null?void 0:a[0])==null?void 0:o[0].length)||2,i=Q8(e,0,t,n);return{type:"MultiPolygon",flatCoordinates:e,ends:i,layout:Qc(n)}}function ldt(r){var a,o;const t=r.coordinates,e=[],n=(o=(a=t[0])==null?void 0:a[0])==null?void 0:o.length,i=Ey(e,0,t,n);return{type:"Polygon",flatCoordinates:e,ends:i,layout:Qc(n)}}function tA(r,t){r=Sr(r,!0,t);const e=r.getType();let n;switch(e){case"Point":{n=gdt(r);break}case"LineString":{n=hdt(r);break}case"Polygon":{n=pdt(r,t);break}case"MultiPoint":{n=fdt(r);break}case"MultiLineString":{n=cdt(r);break}case"MultiPolygon":{n=ddt(r,t);break}case"GeometryCollection":{n=udt(r,t);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return n}function udt(r,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(n){return tA(n,t)})}}function hdt(r,t){return{type:"LineString",coordinates:r.getCoordinates()}}function cdt(r,t){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function fdt(r,t){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function ddt(r,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(e)}}function gdt(r,t){return{type:"Point",coordinates:r.getCoordinates()}}function pdt(r,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(e)}}const Bc="http://www.w3.org/2001/XMLSchema-instance";function ie(r,t){return Bg().createElementNS(r,t)}function _i(r,t){return x7(r,t,[]).join("")}function x7(r,t,e){if(r.nodeType==Node.CDATA_SECTION_NODE||r.nodeType==Node.TEXT_NODE)e.push(r.nodeValue);else{let n;for(n=r.firstChild;n;n=n.nextSibling)x7(n,t,e)}return e}function Fa(r){return"documentElement"in r}function vdt(r,t,e){return r.getAttributeNS(t,e)||""}function ka(r){return new DOMParser().parseFromString(r,"application/xml")}function Cx(r,t){return function(e,n){const i=r.call(t??this,e,n);if(i!==void 0){const a=n[n.length-1];Ne(a,i)}}}function kt(r,t){return function(e,n){const i=r.call(t??this,e,n);i!==void 0&&n[n.length-1].push(i)}}function Ht(r,t){return function(e,n){const i=r.call(t??this,e,n);i!==void 0&&(n[n.length-1]=i)}}function fr(r,t,e){return function(n,i){const a=r.call(this,n,i);if(a!==void 0){const o=i[i.length-1],s=n.localName;let l;s in o?l=o[s]:(l=[],o[s]=l),l.push(a)}}}function G(r,t,e){return function(n,i){const a=r.call(this,n,i);if(a!==void 0){const o=i[i.length-1],s=t!==void 0?t:n.localName;o[s]=a}}}function z(r,t){return function(e,n,i){r.call(t??this,e,n,i),i[i.length-1].node.appendChild(e)}}function S7(r,t){let e,n;return function(i,a,o){if(e===void 0){e={};const s={};s[i.localName]=r,e[i.namespaceURI]=s,n=Mr(i.localName)}w7(e,n,a,o)}}function Mr(r,t){return function(e,n,i){const o=n[n.length-1].node;let s=r;s===void 0&&(s=i);const l=t!==void 0?t:o.namespaceURI;return ie(l,s)}}const Tn=Mr();function Ui(r,t){const e=t.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=r[t[i]];return n}function it(r,t,e){e=e!==void 0?e:{};let n,i;for(n=0,i=r.length;n<i;++n)e[r[n]]=t;return e}function Vi(r,t,e,n){let i;for(i=t.firstElementChild;i;i=i.nextElementSibling){const a=r[i.namespaceURI];if(a!==void 0){const o=a[i.localName];o!==void 0&&o.call(n,i,e)}}}function st(r,t,e,n,i){return n.push(r),Vi(t,e,n,i),n.pop()}function w7(r,t,e,n,i,a){const o=(i!==void 0?i:e).length;let s,l;for(let u=0;u<o;++u)s=e[u],s!==void 0&&(l=t.call(a,s,n,i!==void 0?i[u]:void 0),l!==void 0&&r[l.namespaceURI][l.localName].call(a,l,s,n))}function re(r,t,e,n,i,a,o){return i.push(r),w7(t,e,n,i,a,o),i.pop()}let pb;function mdt(){return pb===void 0&&typeof XMLSerializer<"u"&&(pb=new XMLSerializer),pb}let vb;function Bg(){return vb===void 0&&typeof document<"u"&&(vb=document.implementation.createDocument("","",null)),vb}class zy extends Gy{constructor(){super(),this.xmlSerializer_=mdt()}getType(){return"xml"}readFeature(t,e){if(!t)return null;if(typeof t=="string"){const n=ka(t);return this.readFeatureFromDocument(n,e)}return Fa(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const n=this.readFeaturesFromDocument(t,e);return n.length>0?n[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if(typeof t=="string"){const n=ka(t);return this.readFeaturesFromDocument(n,e)}return Fa(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const n=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Ne(n,this.readFeaturesFromNode(i,e));return n}readFeaturesFromNode(t,e){return Ut()}readGeometry(t,e){if(!t)return null;if(typeof t=="string"){const n=ka(t);return this.readGeometryFromDocument(n,e)}return Fa(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if(typeof t=="string"){const e=ka(t);return this.readProjectionFromDocument(e)}return Fa(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const n=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const n=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const n=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(t,e){return null}}const qs="http://www.opengis.net/gml",ydt=/^\s*$/;class Nt extends zy{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:kt(this.readFeaturesInternal),featureMembers:Ht(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,e){const n=t.localName;let i=null;if(n=="FeatureCollection")i=st([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if(n=="featureMembers"||n=="featureMember"||n=="member"){const a=e[0];let o=a.featureType,s=a.featureNS;const l="p",u="p0";if(!o&&t.childNodes){o=[],s={};for(let f=0,d=t.childNodes.length;f<d;++f){const g=t.childNodes[f];if(g.nodeType===1){const p=g.nodeName.split(":").pop();if(!o.includes(p)){let v="",m=0;const y=g.namespaceURI;for(const _ in s){if(s[_]===y){v=_;break}++m}v||(v=l+m,s[v]=y),o.push(v+":"+p)}}}n!="featureMember"&&(a.featureType=o,a.featureNS=s)}if(typeof s=="string"){const f=s;s={},s[u]=f}const h={},c=Array.isArray(o)?o:[o];for(const f in s){const d={};for(let g=0,p=c.length;g<p;++g)(c[g].includes(":")?c[g].split(":")[0]:u)===f&&(d[c[g].split(":").pop()]=n=="featureMembers"?kt(this.readFeatureElement,this):Ht(this.readFeatureElement,this));h[s[f]]=d}n=="featureMember"||n=="member"?i=st(void 0,h,t,e):i=st([],h,t,e)}return i===null&&(i=[]),i}readGeometryOrExtent(t,e){const n=e[0];return n.srsName=t.firstElementChild.getAttribute("srsName"),n.srsDimension=t.firstElementChild.getAttribute("srsDimension"),st(null,this.GEOMETRY_PARSERS,t,e,this)}readExtentElement(t,e){const n=e[0],i=this.readGeometryOrExtent(t,e);return i?oP(i,n):void 0}readGeometryElement(t,e){const n=e[0],i=this.readGeometryOrExtent(t,e);return i?Sr(i,!1,n):void 0}readFeatureElementInternal(t,e,n){let i;const a={};for(let l=t.firstElementChild;l;l=l.nextElementSibling){let u;const h=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(u=_i(l,!1),ydt.test(u)&&(u=void 0)):(n&&(u=h==="boundedBy"?this.readExtentElement(l,e):this.readGeometryElement(l,e)),u?h!=="boundedBy"&&(i=h):u=this.readFeatureElementInternal(l,e,!1));const c=l.attributes.length;if(c>0&&!(u instanceof YR)){u={_content_:u};for(let f=0;f<c;f++){const d=l.attributes[f].name;u[d]=l.attributes[f].value}}a[h]?(a[h]instanceof Array||(a[h]=[a[h]]),a[h].push(u)):a[h]=u}if(!n)return a;const o=new Le(a);i&&o.setGeometryName(i);const s=t.getAttribute("fid")||vdt(t,this.namespace,"id");return s&&o.setId(s),o}readFeatureElement(t,e){return this.readFeatureElementInternal(t,e,!0)}readPoint(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new rr(n,"XYZ")}readMultiPoint(t,e){const n=st([],this.MULTIPOINT_PARSERS,t,e,this);if(n)return new fa(n)}readMultiLineString(t,e){const n=st([],this.MULTILINESTRING_PARSERS,t,e,this);if(n)return new Dn(n)}readMultiPolygon(t,e){const n=st([],this.MULTIPOLYGON_PARSERS,t,e,this);if(n)return new yi(n)}pointMemberParser(t,e){Vi(this.POINTMEMBER_PARSERS,t,e,this)}lineStringMemberParser(t,e){Vi(this.LINESTRINGMEMBER_PARSERS,t,e,this)}polygonMemberParser(t,e){Vi(this.POLYGONMEMBER_PARSERS,t,e,this)}readLineString(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new ke(n,"XYZ")}readFlatLinearRing(t,e){const n=st(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);if(n)return n}readLinearRing(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new al(n,"XYZ")}readPolygon(t,e){const n=st([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(n&&n[0]){const i=n[0],a=[i.length];let o,s;for(o=1,s=n.length;o<s;++o)Ne(i,n[o]),a.push(i.length);return new Kr(i,"XYZ",a)}}readFlatCoordinatesFromNode(t,e){return st(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}readGeometryFromNode(t,e){const n=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return n||null}readFeaturesFromNode(t,e){const n={featureType:this.featureType,featureNS:this.featureNS};return n&&Object.assign(n,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[n])||[]}readProjectionFromNode(t){return Xt(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}Nt.prototype.namespace=qs;Nt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};Nt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};Nt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};Nt.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:kt(Nt.prototype.pointMemberParser),pointMembers:kt(Nt.prototype.pointMemberParser)}};Nt.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:kt(Nt.prototype.lineStringMemberParser),lineStringMembers:kt(Nt.prototype.lineStringMemberParser)}};Nt.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:kt(Nt.prototype.polygonMemberParser),polygonMembers:kt(Nt.prototype.polygonMemberParser)}};Nt.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:kt(Nt.prototype.readFlatCoordinatesFromNode)}};Nt.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:kt(Nt.prototype.readLineString)}};Nt.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:kt(Nt.prototype.readPolygon)}};Nt.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Ht(Nt.prototype.readFlatLinearRing)}};function Fu(r){const t=_i(r,!1);return _c(t)}function _c(r){const t=/^\s*(true|1)|(false|0)\s*$/.exec(r);if(t)return t[1]!==void 0||!1}function xw(r){const t=_i(r,!1),e=Date.parse(t);return isNaN(e)?void 0:e/1e3}function Ce(r){const t=_i(r,!1);return Gs(t)}function Gs(r){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(r);if(t)return parseFloat(t[1])}function Pr(r){const t=_i(r,!1);return Us(t)}function Us(r){const t=/^\s*(\d+)\s*$/.exec(r);if(t)return parseInt(t[1],10)}function ht(r){return _i(r,!1).trim()}function hg(r,t){Qt(r,t?"1":"0")}function _dt(r,t){r.appendChild(Bg().createCDATASection(t))}function xdt(r,t){const e=new Date(t*1e3),n=e.getUTCFullYear()+"-"+pp(e.getUTCMonth()+1,2)+"-"+pp(e.getUTCDate(),2)+"T"+pp(e.getUTCHours(),2)+":"+pp(e.getUTCMinutes(),2)+":"+pp(e.getUTCSeconds(),2)+"Z";r.appendChild(Bg().createTextNode(n))}function Ri(r,t){const e=t.toPrecision();r.appendChild(Bg().createTextNode(e))}function Mx(r,t){const e=t.toString();r.appendChild(Bg().createTextNode(e))}function Qt(r,t){r.appendChild(Bg().createTextNode(t))}const Sdt=qs+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",wdt={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class we extends Nt{constructor(t){t=t||{},super(t),this.FEATURE_COLLECTION_PARSERS[qs].featureMember=kt(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:Sdt}readFlatCoordinates(t,e){const n=_i(t,!1).replace(/^\s*|\s*$/g,""),a=e[0].srsName;let o="enu";if(a){const u=Xt(a);u&&(o=u.getAxisOrientation())}const s=n.trim().split(/\s+/),l=[];for(let u=0,h=s.length;u<h;u++){const c=s[u].split(/,+/),f=parseFloat(c[0]),d=parseFloat(c[1]),g=c.length===3?parseFloat(c[2]):0;o.startsWith("en")?l.push(f,d,g):l.push(d,f,g)}return l}readBox(t,e){const n=st([null],this.BOX_PARSERS_,t,e,this);return Ha(n[1][0],n[1][1],n[1][3],n[1][4])}innerBoundaryIsParser(t,e){const n=st(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)}outerBoundaryIsParser(t,e){const n=st(void 0,this.RING_PARSERS,t,e,this);if(n){const i=e[e.length-1];i[0]=n}}GEOMETRY_NODE_FACTORY_(t,e,n){const i=e[e.length-1],a=i.multiSurface,o=i.surface,s=i.multiCurve;return Array.isArray(t)?n="Envelope":(n=t.getType(),n==="MultiPolygon"&&a===!0?n="MultiSurface":n==="Polygon"&&o===!0?n="Surface":n==="MultiLineString"&&s===!0&&(n="MultiCurve")),ie("http://www.opengis.net/gml",n)}writeFeatureElement(t,e,n){const i=e.getId();i&&t.setAttribute("fid",i);const a=n[n.length-1],o=a.featureNS,s=e.getGeometryName();a.serializers||(a.serializers={},a.serializers[o]={});const l=[],u=[];if(e.hasProperties()){const c=e.getProperties();for(const f in c){const d=c[f];d!=null&&(l.push(f),u.push(d),f==s||typeof d.getSimplifiedGeometry=="function"?f in a.serializers[o]||(a.serializers[o][f]=z(this.writeGeometryElement,this)):f in a.serializers[o]||(a.serializers[o][f]=z(Qt)))}}const h=Object.assign({},a);h.node=t,re(h,a.serializers,Mr(void 0,o),u,n,l)}writeCurveOrLineString(t,e,n){const a=n[n.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&a&&t.setAttribute("srsName",a),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,e,n)}else if(t.nodeName==="Curve"){const o=ie(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,n)}}writeLineStringOrCurveMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeCurveOrLineString(i,e,n))}writeMultiCurveOrLineString(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName,s=i.curve;o&&t.setAttribute("srsName",o);const l=e.getLineStrings();re({node:t,hasZ:a,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeGeometryElement(t,e,n){const i=n[n.length-1],a=Object.assign({},i);a.node=t;let o;Array.isArray(e)?o=oP(e,i):o=Sr(e,!0,i),re(a,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],n,void 0,this)}createCoordinatesNode_(t){const e=ie(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}writeCoordinates_(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName,s=e.getCoordinates(),l=s.length,u=new Array(l);for(let h=0;h<l;++h){const c=s[h];u[h]=this.getCoords_(c,o,a)}Qt(t,u.join(" "))}writeCurveSegments_(t,e,n){const i=ie(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,e,n)}writeSurfaceOrPolygon(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName;if(t.nodeName!=="PolygonPatch"&&o&&t.setAttribute("srsName",o),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const s=e.getLinearRings();re({node:t,hasZ:a,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,s,n,void 0,this)}else if(t.nodeName==="Surface"){const s=ie(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,n)}}RING_NODE_FACTORY_(t,e,n){const i=e[e.length-1],a=i.node,o=i.exteriorWritten;return o===void 0&&(i.exteriorWritten=!0),ie(a.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,e,n){const i=ie(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n)}writeRing(t,e,n){const i=ie(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,e,n)}getCoords_(t,e,n){let a=(e?Xt(e).getAxisOrientation():"enu").startsWith("en")?t[0]+","+t[1]:t[1]+","+t[0];if(n){const o=t[2]||0;a+=","+o}return a}writePoint(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);const s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s);const l=e.getCoordinates(),u=this.getCoords_(l,o,a);Qt(s,u)}writeMultiPoint(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);const s=e.getPoints();re({node:t,hasZ:a,srsName:o},this.POINTMEMBER_SERIALIZERS,Mr("pointMember"),s,n,void 0,this)}writePointMember(t,e,n){const i=ie(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,e,n)}writeLinearRing(t,e,n){const a=n[n.length-1].srsName;a&&t.setAttribute("srsName",a);const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,e,n)}writeMultiSurfaceOrPolygon(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName,s=i.surface;o&&t.setAttribute("srsName",o);const l=e.getPolygons();re({node:t,hasZ:a,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeSurfaceOrPolygonMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n))}writeEnvelope(t,e,n){const a=n[n.length-1].srsName;a&&t.setAttribute("srsName",a);const o=["lowerCorner","upperCorner"],s=[e[0]+" "+e[1],e[2]+" "+e[3]];re({node:t},this.ENVELOPE_SERIALIZERS,Tn,s,n,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,n){const i=e[e.length-1].node;return ie("http://www.opengis.net/gml",wdt[i.nodeName])}}we.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Ht(we.prototype.readFlatCoordinates)}};we.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:we.prototype.innerBoundaryIsParser,outerBoundaryIs:we.prototype.outerBoundaryIsParser}};we.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:kt(we.prototype.readFlatCoordinates)}};we.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Ht(Nt.prototype.readPoint),MultiPoint:Ht(Nt.prototype.readMultiPoint),LineString:Ht(Nt.prototype.readLineString),MultiLineString:Ht(Nt.prototype.readMultiLineString),LinearRing:Ht(Nt.prototype.readLinearRing),Polygon:Ht(Nt.prototype.readPolygon),MultiPolygon:Ht(Nt.prototype.readMultiPolygon),Box:Ht(we.prototype.readBox)}};we.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:z(we.prototype.writeCurveOrLineString),MultiCurve:z(we.prototype.writeMultiCurveOrLineString),Point:z(we.prototype.writePoint),MultiPoint:z(we.prototype.writeMultiPoint),LineString:z(we.prototype.writeCurveOrLineString),MultiLineString:z(we.prototype.writeMultiCurveOrLineString),LinearRing:z(we.prototype.writeLinearRing),Polygon:z(we.prototype.writeSurfaceOrPolygon),MultiPolygon:z(we.prototype.writeMultiSurfaceOrPolygon),Surface:z(we.prototype.writeSurfaceOrPolygon),MultiSurface:z(we.prototype.writeMultiSurfaceOrPolygon),Envelope:z(we.prototype.writeEnvelope)}};we.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:z(we.prototype.writeLineStringOrCurveMember),curveMember:z(we.prototype.writeLineStringOrCurveMember)}};we.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:z(we.prototype.writeRing),innerBoundaryIs:z(we.prototype.writeRing)}};we.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:z(we.prototype.writePointMember)}};we.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:z(we.prototype.writeSurfaceOrPolygonMember),polygonMember:z(we.prototype.writeSurfaceOrPolygonMember)}};we.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:z(Qt),upperCorner:z(Qt)}};const Tdt=qs+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",bdt={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class dt extends Nt{constructor(t){t=t||{},super(t),this.surface_=t.surface!==void 0?t.surface:!1,this.curve_=t.curve!==void 0?t.curve:!1,this.multiCurve_=t.multiCurve!==void 0?t.multiCurve:!0,this.multiSurface_=t.multiSurface!==void 0?t.multiSurface:!0,this.schemaLocation=t.schemaLocation?t.schemaLocation:Tdt,this.hasZ=t.hasZ!==void 0?t.hasZ:!1}readMultiCurve(t,e){const n=st([],this.MULTICURVE_PARSERS,t,e,this);if(n)return new Dn(n)}readFlatCurveRing(t,e){const n=st([],this.MULTICURVE_PARSERS,t,e,this),i=[];for(let a=0,o=n.length;a<o;++a)Ne(i,n[a].getFlatCoordinates());return i}readMultiSurface(t,e){const n=st([],this.MULTISURFACE_PARSERS,t,e,this);if(n)return new yi(n)}curveMemberParser(t,e){Vi(this.CURVEMEMBER_PARSERS,t,e,this)}surfaceMemberParser(t,e){Vi(this.SURFACEMEMBER_PARSERS,t,e,this)}readPatch(t,e){return st([null],this.PATCHES_PARSERS,t,e,this)}readSegment(t,e){return st([],this.SEGMENTS_PARSERS,t,e,this)}readPolygonPatch(t,e){return st([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)}readLineStringSegment(t,e){return st([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}interiorParser(t,e){const n=st(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)}exteriorParser(t,e){const n=st(void 0,this.RING_PARSERS,t,e,this);if(n){const i=e[e.length-1];i[0]=n}}readSurface(t,e){const n=st([null],this.SURFACE_PARSERS,t,e,this);if(n&&n[0]){const i=n[0],a=[i.length];let o,s;for(o=1,s=n.length;o<s;++o)Ne(i,n[o]),a.push(i.length);return new Kr(i,"XYZ",a)}}readCurve(t,e){const n=st([null],this.CURVE_PARSERS,t,e,this);if(n)return new ke(n,"XYZ")}readEnvelope(t,e){const n=st([null],this.ENVELOPE_PARSERS,t,e,this);return Ha(n[1][0],n[1][1],n[2][0],n[2][1])}readFlatPos(t,e){let n=_i(t,!1);const i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,a=[];let o;for(;o=i.exec(n);)a.push(parseFloat(o[1])),n=n.substr(o[0].length);if(n!=="")return;const l=e[0].srsName;if((l?Xt(l).getAxisOrientation():"enu")==="neu")for(let c=0,f=a.length;c<f;c+=3){const d=a[c],g=a[c+1];a[c]=g,a[c+1]=d}const h=a.length;if(h==2&&a.push(0),h!==0)return a}readFlatPosList(t,e){const n=_i(t,!1).replace(/^\s*|\s*$/g,""),i=e[0],a=i.srsName,o=i.srsDimension,s=a?Xt(a).getAxisOrientation():"enu",l=n.split(/\s+/);let u=2;t.getAttribute("srsDimension")?u=Us(t.getAttribute("srsDimension")):t.getAttribute("dimension")?u=Us(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?u=Us(t.parentNode.getAttribute("srsDimension")):o&&(u=Us(o));const h=s.startsWith("en");let c,f,d;const g=[];for(let p=0,v=l.length;p<v;p+=u)c=parseFloat(l[p]),f=parseFloat(l[p+1]),d=u===3?parseFloat(l[p+2]):0,h?g.push(c,f,d):g.push(f,c,d);return g}writePos_(t,e,n){const i=n[n.length-1],a=i.hasZ,o=a?"3":"2";t.setAttribute("srsDimension",o);const s=i.srsName,l=s?Xt(s).getAxisOrientation():"enu",u=e.getCoordinates();let h=l.startsWith("en")?u[0]+" "+u[1]:u[1]+" "+u[0];if(a){const c=u[2]||0;h+=" "+c}Qt(t,h)}getCoords_(t,e,n){let a=(e?Xt(e).getAxisOrientation():"enu").startsWith("en")?t[0]+" "+t[1]:t[1]+" "+t[0];if(n){const o=t[2]||0;a+=" "+o}return a}writePosList_(t,e,n){const i=n[n.length-1],a=i.hasZ,o=a?"3":"2";t.setAttribute("srsDimension",o);const s=i.srsName,l=e.getCoordinates(),u=l.length,h=new Array(u);let c;for(let f=0;f<u;++f)c=l[f],h[f]=this.getCoords_(c,s,a);Qt(t,h.join(" "))}writePoint(t,e,n){const a=n[n.length-1].srsName;a&&t.setAttribute("srsName",a);const o=ie(t.namespaceURI,"pos");t.appendChild(o),this.writePos_(o,e,n)}writeEnvelope(t,e,n){const a=n[n.length-1].srsName;a&&t.setAttribute("srsName",a);const o=["lowerCorner","upperCorner"],s=[e[0]+" "+e[1],e[2]+" "+e[3]];re({node:t},this.ENVELOPE_SERIALIZERS,Tn,s,n,o,this)}writeLinearRing(t,e,n){const a=n[n.length-1].srsName;a&&t.setAttribute("srsName",a);const o=ie(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,e,n)}RING_NODE_FACTORY_(t,e,n){const i=e[e.length-1],a=i.node,o=i.exteriorWritten;return o===void 0&&(i.exteriorWritten=!0),ie(a.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName;if(t.nodeName!=="PolygonPatch"&&o&&t.setAttribute("srsName",o),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const s=e.getLinearRings();re({node:t,hasZ:a,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,s,n,void 0,this)}else if(t.nodeName==="Surface"){const s=ie(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,n)}}writeCurveOrLineString(t,e,n){const a=n[n.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&a&&t.setAttribute("srsName",a),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const o=ie(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,e,n)}else if(t.nodeName==="Curve"){const o=ie(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,n)}}writeMultiSurfaceOrPolygon(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName,s=i.surface;o&&t.setAttribute("srsName",o);const l=e.getPolygons();re({node:t,hasZ:a,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeMultiPoint(t,e,n){const i=n[n.length-1],a=i.srsName,o=i.hasZ;a&&t.setAttribute("srsName",a);const s=e.getPoints();re({node:t,hasZ:o,srsName:a},this.POINTMEMBER_SERIALIZERS,Mr("pointMember"),s,n,void 0,this)}writeMultiCurveOrLineString(t,e,n){const i=n[n.length-1],a=i.hasZ,o=i.srsName,s=i.curve;o&&t.setAttribute("srsName",o);const l=e.getLineStrings();re({node:t,hasZ:a,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeRing(t,e,n){const i=ie(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,e,n)}writeSurfaceOrPolygonMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n))}writePointMember(t,e,n){const i=ie(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,e,n)}writeLineStringOrCurveMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeCurveOrLineString(i,e,n))}writeSurfacePatches_(t,e,n){const i=ie(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n)}writeCurveSegments_(t,e,n){const i=ie(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,e,n)}writeGeometryElement(t,e,n){const i=n[n.length-1],a=Object.assign({},i);a.node=t;let o;Array.isArray(e)?o=oP(e,i):o=Sr(e,!0,i),re(a,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],n,void 0,this)}writeFeatureElement(t,e,n){const i=e.getId();i&&t.setAttribute("fid",i);const a=n[n.length-1],o=a.featureNS,s=e.getGeometryName();a.serializers||(a.serializers={},a.serializers[o]={});const l=[],u=[];if(e.hasProperties()){const c=e.getProperties();for(const f in c){const d=c[f];d!=null&&(l.push(f),u.push(d),f==s||typeof d.getSimplifiedGeometry=="function"?f in a.serializers[o]||(a.serializers[o][f]=z(this.writeGeometryElement,this)):f in a.serializers[o]||(a.serializers[o][f]=z(Qt)))}}const h=Object.assign({},a);h.node=t,re(h,a.serializers,Mr(void 0,o),u,n,l)}writeFeatureMembers_(t,e,n){const i=n[n.length-1],a=i.featureType,o=i.featureNS,s={};s[o]={},s[o][a]=z(this.writeFeatureElement,this);const l=Object.assign({},i);l.node=t,re(l,s,Mr(a,o),e,n)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,n){const i=e[e.length-1].node;return ie(this.namespace,bdt[i.nodeName])}GEOMETRY_NODE_FACTORY_(t,e,n){const i=e[e.length-1],a=i.multiSurface,o=i.surface,s=i.curve,l=i.multiCurve;return Array.isArray(t)?n="Envelope":(n=t.getType(),n==="MultiPolygon"&&a===!0?n="MultiSurface":n==="Polygon"&&o===!0?n="Surface":n==="LineString"&&s===!0?n="Curve":n==="MultiLineString"&&l===!0&&(n="MultiCurve")),ie(this.namespace,n)}writeGeometryNode(t,e){e=this.adaptOptions(e);const n=ie(this.namespace,"geom"),i={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object.assign(i,e),this.writeGeometryElement(n,t,[i]),n}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=ie(this.namespace,"featureMembers");n.setAttributeNS(Bc,"xsi:schemaLocation",this.schemaLocation);const i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object.assign(i,e),this.writeFeatureMembers_(n,t,[i]),n}}dt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Ht(dt.prototype.readFlatPos),posList:Ht(dt.prototype.readFlatPosList),coordinates:Ht(we.prototype.readFlatCoordinates)}};dt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:dt.prototype.interiorParser,exterior:dt.prototype.exteriorParser}};dt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Ht(Nt.prototype.readPoint),MultiPoint:Ht(Nt.prototype.readMultiPoint),LineString:Ht(Nt.prototype.readLineString),MultiLineString:Ht(Nt.prototype.readMultiLineString),LinearRing:Ht(Nt.prototype.readLinearRing),Polygon:Ht(Nt.prototype.readPolygon),MultiPolygon:Ht(Nt.prototype.readMultiPolygon),Surface:Ht(dt.prototype.readSurface),MultiSurface:Ht(dt.prototype.readMultiSurface),Curve:Ht(dt.prototype.readCurve),MultiCurve:Ht(dt.prototype.readMultiCurve),Envelope:Ht(dt.prototype.readEnvelope)}};dt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:kt(dt.prototype.curveMemberParser),curveMembers:kt(dt.prototype.curveMemberParser)}};dt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:kt(dt.prototype.surfaceMemberParser),surfaceMembers:kt(dt.prototype.surfaceMemberParser)}};dt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:kt(Nt.prototype.readLineString),Curve:kt(dt.prototype.readCurve)}};dt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:kt(Nt.prototype.readPolygon),Surface:kt(dt.prototype.readSurface)}};dt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Ht(dt.prototype.readPatch)}};dt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Ht(dt.prototype.readSegment)}};dt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:kt(dt.prototype.readFlatPosList),upperCorner:kt(dt.prototype.readFlatPosList)}};dt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Ht(dt.prototype.readPolygonPatch)}};dt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Cx(dt.prototype.readLineStringSegment)}};Nt.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Ht(Nt.prototype.readFlatLinearRing),Ring:Ht(dt.prototype.readFlatCurveRing)}};dt.prototype.writeFeatures;dt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:z(dt.prototype.writeRing),interior:z(dt.prototype.writeRing)}};dt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:z(Qt),upperCorner:z(Qt)}};dt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:z(dt.prototype.writeSurfaceOrPolygonMember),polygonMember:z(dt.prototype.writeSurfaceOrPolygonMember)}};dt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:z(dt.prototype.writePointMember)}};dt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:z(dt.prototype.writeLineStringOrCurveMember),curveMember:z(dt.prototype.writeLineStringOrCurveMember)}};dt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:z(dt.prototype.writeCurveOrLineString),MultiCurve:z(dt.prototype.writeMultiCurveOrLineString),Point:z(dt.prototype.writePoint),MultiPoint:z(dt.prototype.writeMultiPoint),LineString:z(dt.prototype.writeCurveOrLineString),MultiLineString:z(dt.prototype.writeMultiCurveOrLineString),LinearRing:z(dt.prototype.writeLinearRing),Polygon:z(dt.prototype.writeSurfaceOrPolygon),MultiPolygon:z(dt.prototype.writeMultiSurfaceOrPolygon),Surface:z(dt.prototype.writeSurfaceOrPolygon),MultiSurface:z(dt.prototype.writeMultiSurfaceOrPolygon),Envelope:z(dt.prototype.writeEnvelope)}};const hP=dt;hP.prototype.writeFeatures;hP.prototype.writeFeaturesNode;const xr=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Edt="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",Cdt={rte:T7,trk:b7,wpt:E7},Mdt=it(xr,{rte:kt(T7),trk:kt(b7),wpt:kt(E7)}),Adt=it(xr,{text:G(ht,"linkText"),type:G(ht,"linkType")}),Idt=it(xr,{name:G(ht),email:rgt,link:Vy}),Rdt=it(xr,{name:G(ht),desc:G(ht),author:G(Qdt),copyright:G(tgt),link:Vy,time:G(xw),keywords:G(ht),bounds:egt,extensions:Sw}),Pdt=it(xr,{year:G(Pr),license:G(ht)}),Ldt=it(xr,{rte:z(ogt),trk:z(sgt),wpt:z(ugt)});class Ddt extends zy{constructor(t){super(),t=t||{},this.dataProjection=Xt("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let e=0,n=t.length;e<n;++e){const i=t[e];if(this.readExtensions_){const a=i.get("extensionsNode_")||null;this.readExtensions_(i,a)}i.set("extensionsNode_",void 0)}}readMetadata(t){return t?typeof t=="string"?this.readMetadataFromDocument(ka(t)):Fa(t)?this.readMetadataFromDocument(t):this.readMetadataFromNode(t):null}readMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType===Node.ELEMENT_NODE){const n=this.readMetadataFromNode(e);if(n)return n}return null}readMetadataFromNode(t){if(!xr.includes(t.namespaceURI))return null;for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(xr.includes(e.namespaceURI)&&e.localName==="metadata")return st({},Rdt,e,[]);return null}readFeatureFromNode(t,e){if(!xr.includes(t.namespaceURI))return null;const n=Cdt[t.localName];if(!n)return null;const i=n(t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(t,e){if(!xr.includes(t.namespaceURI))return[];if(t.localName=="gpx"){const n=st([],Mdt,t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_(n),n):[]}return[]}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=ie("http://www.topografix.com/GPX/1/1","gpx");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Bc),n.setAttributeNS(Bc,"xsi:schemaLocation",Edt),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),re({node:n},Ldt,Jdt,t,[e]),n}}const Odt=it(xr,{name:G(ht),cmt:G(ht),desc:G(ht),src:G(ht),link:Vy,number:G(Pr),extensions:Sw,type:G(ht),rtept:ngt}),Ndt=it(xr,{ele:G(Ce),time:G(xw)}),Fdt=it(xr,{name:G(ht),cmt:G(ht),desc:G(ht),src:G(ht),link:Vy,number:G(Pr),type:G(ht),extensions:Sw,trkseg:agt}),kdt=it(xr,{trkpt:igt}),Gdt=it(xr,{ele:G(Ce),time:G(xw)}),Bdt=it(xr,{ele:G(Ce),time:G(xw),magvar:G(Ce),geoidheight:G(Ce),name:G(ht),cmt:G(ht),desc:G(ht),src:G(ht),link:Vy,sym:G(ht),type:G(ht),fix:G(ht),sat:G(Pr),hdop:G(Ce),vdop:G(Ce),pdop:G(Ce),ageofdgpsdata:G(Ce),dgpsid:G(Pr),extensions:Sw}),zdt=["text","type"],Vdt=it(xr,{text:z(Qt),type:z(Qt)}),Udt=it(xr,["name","cmt","desc","src","link","number","type","rtept"]),Wdt=it(xr,{name:z(Qt),cmt:z(Qt),desc:z(Qt),src:z(Qt),link:z(dP),number:z(Mx),type:z(Qt),rtept:S7(z(gP))}),Hdt=it(xr,["ele","time"]),$dt=it(xr,["name","cmt","desc","src","link","number","type","trkseg"]),Ydt=it(xr,{name:z(Qt),cmt:z(Qt),desc:z(Qt),src:z(Qt),link:z(dP),number:z(Mx),type:z(Qt),trkseg:S7(z(lgt))}),Xdt=Mr("trkpt"),Zdt=it(xr,{trkpt:z(gP)}),jdt=it(xr,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Kdt=it(xr,{ele:z(Ri),time:z(xdt),magvar:z(Ri),geoidheight:z(Ri),name:z(Qt),cmt:z(Qt),desc:z(Qt),src:z(Qt),link:z(dP),sym:z(Qt),type:z(Qt),fix:z(Qt),sat:z(Mx),hdop:z(Ri),vdop:z(Ri),pdop:z(Ri),ageofdgpsdata:z(Ri),dgpsid:z(Mx)}),qdt={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Jdt(r,t,e){const n=r.getGeometry();if(n){const i=qdt[n.getType()];if(i){const a=t[t.length-1].node;return ie(a.namespaceURI,i)}}}function cP(r,t,e,n){return r.push(parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))),"ele"in n?(r.push(n.ele),delete n.ele,t.hasZ=!0):r.push(0),"time"in n?(r.push(n.time),delete n.time,t.hasM=!0):r.push(0),r}function fP(r,t,e){let n="XY",i=2;if(r.hasZ&&r.hasM?(n="XYZM",i=4):r.hasZ?(n="XYZ",i=3):r.hasM&&(n="XYM",i=3),i!==4){for(let a=0,o=t.length/4;a<o;a++)t[a*i]=t[a*4],t[a*i+1]=t[a*4+1],r.hasZ&&(t[a*i+2]=t[a*4+2]),r.hasM&&(t[a*i+2]=t[a*4+3]);if(t.length=t.length/4*i,e)for(let a=0,o=e.length;a<o;a++)e[a]=e[a]/4*i}return n}function Qdt(r,t){const e=st({},Idt,r,t);if(e)return e}function tgt(r,t){const e=st({},Pdt,r,t);if(e){const n=r.getAttribute("author");return n!==null&&(e.author=n),e}}function egt(r,t){const e=t[t.length-1],n=r.getAttribute("minlat"),i=r.getAttribute("minlon"),a=r.getAttribute("maxlat"),o=r.getAttribute("maxlon");i!==null&&n!==null&&o!==null&&a!==null&&(e.bounds=[[parseFloat(i),parseFloat(n)],[parseFloat(o),parseFloat(a)]])}function rgt(r,t){const e=t[t.length-1],n=r.getAttribute("id"),i=r.getAttribute("domain");n!==null&&i!==null&&(e.email=`${n}@${i}`)}function Vy(r,t){const e=t[t.length-1],n=r.getAttribute("href");n!==null&&(e.link=n),Vi(Adt,r,t)}function Sw(r,t){const e=t[t.length-1];e.extensionsNode_=r}function ngt(r,t){const e=st({},Ndt,r,t);if(e){const n=t[t.length-1],i=n.flatCoordinates,a=n.layoutOptions;cP(i,a,r,e)}}function igt(r,t){const e=st({},Gdt,r,t);if(e){const n=t[t.length-1],i=n.flatCoordinates,a=n.layoutOptions;cP(i,a,r,e)}}function agt(r,t){const e=t[t.length-1];Vi(kdt,r,t);const n=e.flatCoordinates;e.ends.push(n.length)}function T7(r,t){const e=t[0],n=st({flatCoordinates:[],layoutOptions:{}},Odt,r,t);if(!n)return;const i=n.flatCoordinates;delete n.flatCoordinates;const a=n.layoutOptions;delete n.layoutOptions;const o=fP(a,i),s=new ke(i,o);Sr(s,!1,e);const l=new Le(s);return l.setProperties(n,!0),l}function b7(r,t){const e=t[0],n=st({flatCoordinates:[],ends:[],layoutOptions:{}},Fdt,r,t);if(!n)return;const i=n.flatCoordinates;delete n.flatCoordinates;const a=n.ends;delete n.ends;const o=n.layoutOptions;delete n.layoutOptions;const s=fP(o,i,a),l=new Dn(i,s,a);Sr(l,!1,e);const u=new Le(l);return u.setProperties(n,!0),u}function E7(r,t){const e=t[0],n=st({},Bdt,r,t);if(!n)return;const i={},a=cP([],i,r,n),o=fP(i,a),s=new rr(a,o);Sr(s,!1,e);const l=new Le(s);return l.setProperties(n,!0),l}function dP(r,t,e){r.setAttribute("href",t);const i=e[e.length-1].properties,a=[i.linkText,i.linkType];re({node:r},Vdt,Tn,a,e,zdt)}function gP(r,t,e){const n=e[e.length-1],a=n.node.namespaceURI,o=n.properties;switch(r.setAttributeNS(null,"lat",String(t[1])),r.setAttributeNS(null,"lon",String(t[0])),n.geometryLayout){case"XYZM":t[3]!==0&&(o.time=t[3]);case"XYZ":t[2]!==0&&(o.ele=t[2]);break;case"XYM":t[2]!==0&&(o.time=t[2]);break}const l=r.nodeName=="rtept"?Hdt[a]:jdt[a],u=Ui(o,l);re({node:r,properties:o},Kdt,Tn,u,e,l)}function ogt(r,t,e){const n=e[0],i=t.getProperties(),a={node:r};a.properties=i;const o=t.getGeometry();if(o.getType()=="LineString"){const h=Sr(o,!0,n);a.geometryLayout=h.getLayout(),i.rtept=h.getCoordinates()}const s=e[e.length-1].node,l=Udt[s.namespaceURI],u=Ui(i,l);re(a,Wdt,Tn,u,e,l)}function sgt(r,t,e){const n=e[0],i=t.getProperties(),a={node:r};a.properties=i;const o=t.getGeometry();if(o.getType()=="MultiLineString"){const h=Sr(o,!0,n);i.trkseg=h.getLineStrings()}const s=e[e.length-1].node,l=$dt[s.namespaceURI],u=Ui(i,l);re(a,Ydt,Tn,u,e,l)}function lgt(r,t,e){const n={node:r};n.geometryLayout=t.getLayout(),n.properties={},re(n,Zdt,Xdt,t.getCoordinates(),e)}function ugt(r,t,e){const n=e[0],i=e[e.length-1];i.properties=t.getProperties();const a=t.getGeometry();if(a.getType()=="Point"){const o=Sr(a,!0,n);i.geometryLayout=o.getLayout(),gP(r,o.getCoordinates(),e)}}class pP extends Gy{constructor(){super()}getType(){return"text"}readFeature(t,e){return this.readFeatureFromText(U0(t),this.adaptOptions(e))}readFeatureFromText(t,e){return Ut()}readFeatures(t,e){return this.readFeaturesFromText(U0(t),this.adaptOptions(e))}readFeaturesFromText(t,e){return Ut()}readGeometry(t,e){return this.readGeometryFromText(U0(t),this.adaptOptions(e))}readGeometryFromText(t,e){return Ut()}readProjection(t){return this.readProjectionFromText(U0(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,e){return this.writeFeatureText(t,this.adaptOptions(e))}writeFeatureText(t,e){return Ut()}writeFeatures(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))}writeFeaturesText(t,e){return Ut()}writeGeometry(t,e){return this.writeGeometryText(t,this.adaptOptions(e))}writeGeometryText(t,e){return Ut()}}function U0(r){return typeof r=="string"?r:""}const hgt=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,cgt=/^H.([A-Z]{3}).*?:(.*)/,fgt=/^HFDTE(\d{2})(\d{2})(\d{2})/,dgt=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,ggt=/\r\n|\r|\n/;class pgt extends pP{constructor(t){super(),t=t||{},this.dataProjection=Xt("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(t,e){const n=this.altitudeMode_,i=t.split(ggt),a={},o=[];let s=2e3,l=0,u=1,h=-1,c,f;for(c=0,f=i.length;c<f;++c){const v=i[c];let m;if(v.charAt(0)=="B"){if(m=hgt.exec(v),m){const y=parseInt(m[1],10),_=parseInt(m[2],10),x=parseInt(m[3],10);let w=parseInt(m[4],10)+parseInt(m[5],10)/6e4;this.lad_&&(w+=parseInt(v.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),m[6]=="S"&&(w=-w);let S=parseInt(m[7],10)+parseInt(m[8],10)/6e4;if(this.lod_&&(S+=parseInt(v.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),m[9]=="W"&&(S=-S),o.push(S,w),n!="none"){let b;n=="gps"?b=parseInt(m[11],10):n=="barometric"?b=parseInt(m[12],10):b=0,o.push(b)}let T=Date.UTC(s,l,u,y,_,x);T<h&&(T=Date.UTC(s,l,u+1,y,_,x)),o.push(T/1e3),h=T}}else if(v.charAt(0)=="H")m=dgt.exec(v),m?(u=parseInt(m[1],10),l=parseInt(m[2],10)-1,s=2e3+parseInt(m[3],10)):(m=fgt.exec(v),m?(u=parseInt(m[1],10),l=parseInt(m[2],10)-1,s=2e3+parseInt(m[3],10)):(m=cgt.exec(v),m&&(a[m[1]]=m[2].trim())));else if(v.charAt(0)=="I"){const y=parseInt(v.slice(1,3),10);for(let _=0;_<y;_++){const x=v.slice(7+_*7,10+_*7);if(x==="LAD"||x==="LOD"){const w=parseInt(v.slice(3+_*7,5+_*7),10)-1,S=parseInt(v.slice(5+_*7,7+_*7),10);x==="LAD"?(this.lad_=!0,this.ladStart_=w,this.ladStop_=S):x==="LOD"&&(this.lod_=!0,this.lodStart_=w,this.lodStop_=S)}}}}if(o.length===0)return null;const d=n=="none"?"XYM":"XYZM",g=new ke(o,d),p=new Le(Sr(g,!1,e));return p.setProperties(a,!0),p}readFeaturesFromText(t,e){const n=this.readFeatureFromText(t,e);return n?[n]:[]}}const yl=["http://www.google.com/kml/ext/2.2"],Gt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],vgt="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",YF={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},mgt=it(Gt,{ExtendedData:z7,Region:V7,MultiGeometry:G(k7,"geometry"),LineString:G(N7,"geometry"),LinearRing:G(F7,"geometry"),Point:G(G7,"geometry"),Polygon:G(B7,"geometry"),Style:G(yP),StyleMap:tpt,address:G(ht),description:G(ht),name:G(ht),open:G(Fu),phoneNumber:G(ht),styleUrl:G(R7),visibility:G(Fu)},it(yl,{MultiTrack:G(Vgt,"geometry"),Track:G(O7,"geometry")})),ygt=it(Gt,{ExtendedData:z7,Region:V7,Link:fpt,address:G(ht),description:G(ht),name:G(ht),open:G(Fu),phoneNumber:G(ht),visibility:G(Fu)}),_gt=it(Gt,{href:G(I7)}),xgt=it(Gt,{Altitude:G(Ce),Longitude:G(Ce),Latitude:G(Ce),Tilt:G(Ce),AltitudeMode:G(ht),Heading:G(Ce),Roll:G(Ce)}),C7=it(Gt,{LatLonAltBox:apt,Lod:spt}),Sgt=it(Gt,["Document","Placemark"]),wgt=it(Gt,{Document:z(xpt),Placemark:z(H7)});let Bd,p1=null,eA,Vv,Uv,Wv,Ax,rA=null,vP,nA=null,iA,lc=null,XF=null,aA=null;function Ix(r){return 32/Math.min(r[0],r[1])}function Tgt(){Bd=[255,255,255,1],p1=new Ee({color:Bd}),eA=[20,2],Vv="pixels",Uv="pixels",Wv=[64,64],Ax="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",rA=new ia({anchor:eA,anchorOrigin:"bottom-left",anchorXUnits:Vv,anchorYUnits:Uv,crossOrigin:"anonymous",rotation:0,scale:Ix(Wv),size:Wv,src:Ax}),vP="NO_IMAGE",nA=new or({color:Bd,width:1}),iA=new or({color:[51,51,51,1],width:2}),lc=new Kn({font:"bold 16px Helvetica",fill:p1,stroke:iA,scale:.8}),XF=new Te({fill:p1,image:rA,text:lc,stroke:nA,zIndex:0}),aA=[XF]}let W0;function bgt(r){return r}class Egt extends zy{constructor(t){super(),t=t||{},aA||Tgt(),this.dataProjection=Xt("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:aA,this.extractStyles_=t.extractStyles!==void 0?t.extractStyles:!0,this.writeStyles_=t.writeStyles!==void 0?t.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=t.showPointNames!==void 0?t.showPointNames:!0,this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:bgt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,e){const n=it(Gt,{Document:Cx(this.readDocumentOrFolder_,this),Folder:Cx(this.readDocumentOrFolder_,this),Placemark:kt(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=st([],n,t,e,this);if(i)return i}readPlacemark_(t,e){const n=st({geometry:null},mgt,t,e,this);if(!n)return;const i=new Le,a=t.getAttribute("id");a!==null&&i.setId(a);const o=e[0],s=n.geometry;if(s&&Sr(s,!1,o),i.setGeometry(s),delete n.geometry,this.extractStyles_){const l=n.Style,u=n.styleUrl,h=Mgt(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(h)}return delete n.Style,i.setProperties(n,!0),i}readSharedStyle_(t,e){const n=t.getAttribute("id");if(n!==null){const i=yP.call(this,t,e);if(i){let a,o=t.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?a=new URL("#"+n,o).href:a="#"+n,this.sharedStyles_[a]=i}}}readSharedStyleMap_(t,e){const n=t.getAttribute("id");if(n===null)return;const i=L7.call(this,t,e);if(!i)return;let a,o=t.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?a=new URL("#"+n,o).href:a="#"+n,this.sharedStyles_[a]=i}readFeatureFromNode(t,e){if(!Gt.includes(t.namespaceURI))return null;const n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n||null}readFeaturesFromNode(t,e){if(!Gt.includes(t.namespaceURI))return[];let n;const i=t.localName;if(i=="Document"||i=="Folder")return n=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]),n||[];if(i=="Placemark"){const a=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return a?[a]:[]}if(i=="kml"){n=[];for(let a=t.firstElementChild;a;a=a.nextElementSibling){const o=this.readFeaturesFromNode(a,e);o&&Ne(n,o)}return n}return[]}readName(t){if(t){if(typeof t=="string"){const e=ka(t);return this.readNameFromDocument(e)}return Fa(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const n=this.readNameFromNode(e);if(n)return n}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(Gt.includes(e.namespaceURI)&&e.localName=="name")return ht(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const n=e.localName;if(Gt.includes(e.namespaceURI)&&(n=="Document"||n=="Folder"||n=="Placemark"||n=="kml")){const i=this.readNameFromNode(e);if(i)return i}}}readNetworkLinks(t){const e=[];if(typeof t=="string"){const n=ka(t);Ne(e,this.readNetworkLinksFromDocument(n))}else Fa(t)?Ne(e,this.readNetworkLinksFromDocument(t)):Ne(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Ne(e,this.readNetworkLinksFromNode(n));return e}readNetworkLinksFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(Gt.includes(n.namespaceURI)&&n.localName=="NetworkLink"){const i=st({},ygt,n,[]);e.push(i)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;Gt.includes(n.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Ne(e,this.readNetworkLinksFromNode(n))}return e}readRegion(t){const e=[];if(typeof t=="string"){const n=ka(t);Ne(e,this.readRegionFromDocument(n))}else Fa(t)?Ne(e,this.readRegionFromDocument(t)):Ne(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Ne(e,this.readRegionFromNode(n));return e}readRegionFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(Gt.includes(n.namespaceURI)&&n.localName=="Region"){const i=st({},C7,n,[]);e.push(i)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;Gt.includes(n.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Ne(e,this.readRegionFromNode(n))}return e}readCamera(t){const e=[];if(typeof t=="string"){const n=ka(t);Ne(e,this.readCameraFromDocument(n))}else Fa(t)?Ne(e,this.readCameraFromDocument(t)):Ne(e,this.readCameraFromNode(t));return e}readCameraFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&Ne(e,this.readCameraFromNode(n));return e}readCameraFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(Gt.includes(n.namespaceURI)&&n.localName==="Camera"){const i=st({},xgt,n,[]);e.push(i)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const i=n.localName;Gt.includes(n.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&Ne(e,this.readCameraFromNode(n))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=ie(Gt[4],"kml"),i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:gx",yl[0]),n.setAttributeNS(i,"xmlns:xsi",Bc),n.setAttributeNS(Bc,"xsi:schemaLocation",vgt);const a={node:n},o={};t.length>1?o.Document=t:t.length==1&&(o.Placemark=t[0]);const s=Sgt[n.namespaceURI],l=Ui(o,s);return re(a,wgt,Tn,l,[e],s,this),n}}function Cgt(r,t){const e=[0,0];let n="start";const i=r.getImage();if(i){const s=i.getSize();if(s&&s.length==2){const l=i.getScaleArray(),u=i.getAnchor();e[0]=l[0]*(s[0]-u[0]),e[1]=l[1]*(s[1]/2-u[1]),n="left"}}let a=r.getText();return a?(a=a.clone(),a.setFont(a.getFont()||lc.getFont()),a.setScale(a.getScale()||lc.getScale()),a.setFill(a.getFill()||lc.getFill()),a.setStroke(a.getStroke()||iA)):a=lc.clone(),a.setText(t),a.setOffsetX(e[0]),a.setOffsetY(e[1]),a.setTextAlign(n),new Te({image:i,text:a})}function Mgt(r,t,e,n,i){return function(a,o){let s=i,l="",u=[];if(s){const c=a.getGeometry();if(c)if(c instanceof zr)u=c.getGeometriesArrayRecursive().filter(function(f){const d=f.getType();return d==="Point"||d==="MultiPoint"}),s=u.length>0;else{const f=c.getType();s=f==="Point"||f==="MultiPoint"}}s&&(l=a.get("name"),s=s&&!!l,s&&/&[^&]+;/.test(l)&&(W0||(W0=document.createElement("textarea")),W0.innerHTML=l,l=W0.value));let h=e;if(r?h=r:t&&(h=M7(t,e,n)),s){const c=Cgt(h[0],l);if(u.length>0){c.setGeometry(new zr(u));const f=new Te({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[c,f].concat(h.slice(1))}return c}return h}}function M7(r,t,e){return Array.isArray(r)?r:typeof r=="string"?M7(e[r],t,e):t}function ww(r){const t=_i(r,!1),e=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(e){const n=e[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function A7(r){let t=_i(r,!1);const e=[];t=t.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=n.exec(t);){const a=parseFloat(i[1]),o=parseFloat(i[2]),s=i[3]?parseFloat(i[3]):0;e.push(a,o,s),t=t.substr(i[0].length)}if(t==="")return e}function I7(r){const t=_i(r,!1).trim();let e=r.baseURI;return(!e||e=="about:blank")&&(e=window.location.href),e?new URL(t,e).href:t}function R7(r){const t=_i(r,!1).trim().replace(/^(?!.*#)/,"#");let e=r.baseURI;return(!e||e=="about:blank")&&(e=window.location.href),e?new URL(t,e).href:t}function Agt(r){const t=r.getAttribute("xunits"),e=r.getAttribute("yunits");let n;return t!=="insetPixels"?e!=="insetPixels"?n="bottom-left":n="top-left":e!=="insetPixels"?n="bottom-right":n="top-right",{x:parseFloat(r.getAttribute("x")),xunits:YF[t],y:parseFloat(r.getAttribute("y")),yunits:YF[e],origin:n}}function P7(r){return Ce(r)}const Igt=it(Gt,{Pair:Qgt});function L7(r,t){return st(void 0,Igt,r,t,this)}const Rgt=it(Gt,{Icon:G(Hgt),color:G(ww),heading:G(Ce),hotSpot:G(Agt),scale:G(P7)});function Pgt(r,t){const e=st({},Rgt,r,t);if(!e)return;const n=t[t.length-1],i="Icon"in e?e.Icon:{},a=!("Icon"in e)||Object.keys(i).length>0;let o;const s=i.href;s?o=s:a&&(o=Ax);let l,u,h,c="bottom-left";const f=e.hotSpot;f?(l=[f.x,f.y],u=f.xunits,h=f.yunits,c=f.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=eA,u=Vv,h=Uv):o.includes("arrow-reverse")?(l=[54,42],u=Vv,h=Uv):o.includes("paddle")&&(l=[32,1],u=Vv,h=Uv));let d;const g=i.x,p=i.y;g!==void 0&&p!==void 0&&(d=[g,p]);let v;const m=i.w,y=i.h;m!==void 0&&y!==void 0&&(v=[m,y]);let _;const x=e.heading;x!==void 0&&(_=mu(x));const w=e.scale,S=e.color;if(a){o==Ax&&(v=Wv);const T=new ia({anchor:l,anchorOrigin:c,anchorXUnits:u,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:d,offsetOrigin:"bottom-left",rotation:_,scale:w,size:v,src:this.iconUrlFunction_(o),color:S}),b=T.getScaleArray()[0],E=T.getSize();if(E===null){const C=T.getImageState();if(C===Ot.IDLE||C===Ot.LOADING){const M=function(){const A=T.getImageState();if(!(A===Ot.IDLE||A===Ot.LOADING)){const R=T.getSize();if(R&&R.length==2){const P=Ix(R);T.setScale(b*P)}T.unlistenImageChange(M)}};T.listenImageChange(M),C===Ot.IDLE&&T.load()}}else if(E.length==2){const C=Ix(E);T.setScale(b*C)}n.imageStyle=T}else n.imageStyle=vP}const Lgt=it(Gt,{color:G(ww),scale:G(P7)});function Dgt(r,t){const e=st({},Lgt,r,t);if(!e)return;const n=t[t.length-1],i=new Kn({fill:new Ee({color:"color"in e?e.color:Bd}),scale:e.scale});n.textStyle=i}const Ogt=it(Gt,{color:G(ww),width:G(Ce)});function Ngt(r,t){const e=st({},Ogt,r,t);if(!e)return;const n=t[t.length-1],i=new or({color:"color"in e?e.color:Bd,width:"width"in e?e.width:1});n.strokeStyle=i}const Fgt=it(Gt,{color:G(ww),fill:G(Fu),outline:G(Fu)});function kgt(r,t){const e=st({},Fgt,r,t);if(!e)return;const n=t[t.length-1],i=new Ee({color:"color"in e?e.color:Bd});n.fillStyle=i;const a=e.fill;a!==void 0&&(n.fill=a);const o=e.outline;o!==void 0&&(n.outline=o)}const Ggt=it(Gt,{coordinates:Ht(A7)});function D7(r,t){return st(null,Ggt,r,t)}function Bgt(r,t){const n=t[t.length-1].coordinates,i=_i(r,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(o){const s=parseFloat(o[1]),l=parseFloat(o[2]),u=parseFloat(o[3]);n.push([s,l,u])}else n.push([])}const zgt=it(yl,{Track:kt(O7)});function Vgt(r,t){const e=st([],zgt,r,t);if(e)return new Dn(e)}const Ugt=it(Gt,{when:dpt},it(yl,{coord:Bgt}));function O7(r,t){const e=st({coordinates:[],whens:[]},Ugt,r,t);if(!e)return;const n=[],i=e.coordinates,a=e.whens;for(let o=0,s=Math.min(i.length,a.length);o<s;++o)i[o].length==3&&n.push(i[o][0],i[o][1],i[o][2],a[o]);return new ke(n,"XYZM")}const Wgt=it(Gt,{href:G(I7)},it(yl,{x:G(Ce),y:G(Ce),w:G(Ce),h:G(Ce)}));function Hgt(r,t){const e=st({},Wgt,r,t);return e||null}const $gt=it(Gt,{coordinates:Ht(A7)});function mP(r,t){return st(null,$gt,r,t)}const Tw=it(Gt,{extrude:G(Fu),tessellate:G(Fu),altitudeMode:G(ht)});function N7(r,t){const e=st({},Tw,r,t),n=mP(r,t);if(n){const i=new ke(n,"XYZ");return i.setProperties(e,!0),i}}function F7(r,t){const e=st({},Tw,r,t),n=mP(r,t);if(n){const i=new Kr(n,"XYZ",[n.length]);return i.setProperties(e,!0),i}}const Ygt=it(Gt,{LineString:kt(N7),LinearRing:kt(F7),MultiGeometry:kt(k7),Point:kt(G7),Polygon:kt(B7)});function k7(r,t){const e=st([],Ygt,r,t);if(!e)return null;if(e.length===0)return new zr(e);let n,i=!0;const a=e[0].getType();let o;for(let s=1,l=e.length;s<l;++s)if(o=e[s],o.getType()!=a){i=!1;break}if(i){let s,l;if(a=="Point"){const u=e[0];s=u.getLayout(),l=u.getFlatCoordinates();for(let h=1,c=e.length;h<c;++h)o=e[h],Ne(l,o.getFlatCoordinates());n=new fa(l,s),mb(n,e)}else if(a=="LineString")n=new Dn(e),mb(n,e);else if(a=="Polygon")n=new yi(e),mb(n,e);else if(a=="GeometryCollection"||a.startsWith("Multi"))n=new zr(e);else throw new Error("Unknown geometry type found")}else n=new zr(e);return n}function G7(r,t){const e=st({},Tw,r,t),n=mP(r,t);if(n){const i=new rr(n,"XYZ");return i.setProperties(e,!0),i}}const Xgt=it(Gt,{innerBoundaryIs:upt,outerBoundaryIs:cpt});function B7(r,t){const e=st({},Tw,r,t),n=st([null],Xgt,r,t);if(n&&n[0]){const i=n[0],a=[i.length];for(let s=1,l=n.length;s<l;++s)Ne(i,n[s]),a.push(i.length);const o=new Kr(i,"XYZ",a);return o.setProperties(e,!0),o}}const Zgt=it(Gt,{IconStyle:Pgt,LabelStyle:Dgt,LineStyle:Ngt,PolyStyle:kgt});function yP(r,t){const e=st({},Zgt,r,t,this);if(!e)return null;let n="fillStyle"in e?e.fillStyle:p1;const i=e.fill;i!==void 0&&!i&&(n=null);let a;"imageStyle"in e?e.imageStyle!=vP&&(a=e.imageStyle):a=rA;const o="textStyle"in e?e.textStyle:lc,s="strokeStyle"in e?e.strokeStyle:nA,l=e.outline;return l!==void 0&&!l?[new Te({geometry:function(u){const h=u.getGeometry(),c=h.getType();if(c==="GeometryCollection"){const f=h;return new zr(f.getGeometriesArrayRecursive().filter(function(d){const g=d.getType();return g!=="Polygon"&&g!=="MultiPolygon"}))}if(c!=="Polygon"&&c!=="MultiPolygon")return h},fill:n,image:a,stroke:s,text:o,zIndex:void 0}),new Te({geometry:function(u){const h=u.getGeometry(),c=h.getType();if(c==="GeometryCollection"){const f=h;return new zr(f.getGeometriesArrayRecursive().filter(function(d){const g=d.getType();return g==="Polygon"||g==="MultiPolygon"}))}if(c==="Polygon"||c==="MultiPolygon")return h},fill:n,stroke:null,zIndex:void 0})]:[new Te({fill:n,image:a,stroke:s,text:o,zIndex:void 0})]}function mb(r,t){const e=t.length,n=new Array(t.length),i=new Array(t.length),a=new Array(t.length);let o,s,l;o=!1,s=!1,l=!1;for(let u=0;u<e;++u){const h=t[u];n[u]=h.get("extrude"),i[u]=h.get("tessellate"),a[u]=h.get("altitudeMode"),o=o||n[u]!==void 0,s=s||i[u]!==void 0,l=l||a[u]}o&&r.set("extrude",n),s&&r.set("tessellate",i),l&&r.set("altitudeMode",a)}const jgt=it(Gt,{displayName:G(ht),value:G(ht)});function Kgt(r,t){const e=r.getAttribute("name");Vi(jgt,r,t);const n=t[t.length-1];e&&n.displayName?n[e]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:e!==null?n[e]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}const qgt=it(Gt,{Data:Kgt,SchemaData:rpt});function z7(r,t){Vi(qgt,r,t)}function V7(r,t){Vi(C7,r,t)}const Jgt=it(Gt,{Style:G(yP),key:G(ht),styleUrl:G(R7)});function Qgt(r,t){const e=st({},Jgt,r,t,this);if(!e)return;const n=e.key;if(n&&n=="normal"){const i=e.styleUrl;i&&(t[t.length-1]=i);const a=e.Style;a&&(t[t.length-1]=a)}}function tpt(r,t){const e=L7.call(this,r,t);if(!e)return;const n=t[t.length-1];if(Array.isArray(e))n.Style=e;else if(typeof e=="string")n.styleUrl=e;else throw new Error("`styleMapValue` has an unknown type")}const ept=it(Gt,{SimpleData:npt});function rpt(r,t){Vi(ept,r,t)}function npt(r,t){const e=r.getAttribute("name");if(e!==null){const n=ht(r),i=t[t.length-1];i[e]=n}}const ipt=it(Gt,{altitudeMode:G(ht),minAltitude:G(Ce),maxAltitude:G(Ce),north:G(Ce),south:G(Ce),east:G(Ce),west:G(Ce)});function apt(r,t){const e=st({},ipt,r,t);if(!e)return;const n=t[t.length-1],i=[parseFloat(e.west),parseFloat(e.south),parseFloat(e.east),parseFloat(e.north)];n.extent=i,n.altitudeMode=e.altitudeMode,n.minAltitude=parseFloat(e.minAltitude),n.maxAltitude=parseFloat(e.maxAltitude)}const opt=it(Gt,{minLodPixels:G(Ce),maxLodPixels:G(Ce),minFadeExtent:G(Ce),maxFadeExtent:G(Ce)});function spt(r,t){const e=st({},opt,r,t);if(!e)return;const n=t[t.length-1];n.minLodPixels=parseFloat(e.minLodPixels),n.maxLodPixels=parseFloat(e.maxLodPixels),n.minFadeExtent=parseFloat(e.minFadeExtent),n.maxFadeExtent=parseFloat(e.maxFadeExtent)}const lpt=it(Gt,{LinearRing:kt(D7)});function upt(r,t){const e=st([],lpt,r,t);e.length>0&&t[t.length-1].push(...e)}const hpt=it(Gt,{LinearRing:Ht(D7)});function cpt(r,t){const e=st(void 0,hpt,r,t);if(e){const n=t[t.length-1];n[0]=e}}function fpt(r,t){Vi(_gt,r,t)}function dpt(r,t){const n=t[t.length-1].whens,i=_i(r,!1),a=Date.parse(i);n.push(isNaN(a)?0:a)}function bw(r,t){const e=Iu(t),i=[(e.length==4?e[3]:1)*255,e[2],e[1],e[0]];for(let a=0;a<4;++a){const o=Math.floor(i[a]).toString(16);i[a]=o.length==1?"0"+o:o}Qt(r,i.join(""))}function gpt(r,t,e){const n=e[e.length-1],i=n.layout,a=n.stride;let o;if(i=="XY"||i=="XYM")o=2;else if(i=="XYZ"||i=="XYZM")o=3;else throw new Error("Invalid geometry layout");const s=t.length;let l="";if(s>0){l+=t[0];for(let u=1;u<o;++u)l+=","+t[u];for(let u=a;u<s;u+=a){l+=" "+t[u];for(let h=1;h<o;++h)l+=","+t[u+h]}}Qt(r,l)}const v1=it(Gt,{Data:z(ppt),value:z(mpt),displayName:z(vpt)});function ppt(r,t,e){r.setAttribute("name",t.name);const n={node:r},i=t.value;typeof i=="object"?(i!==null&&i.displayName&&re(n,v1,Tn,[i.displayName],e,["displayName"]),i!==null&&i.value&&re(n,v1,Tn,[i.value],e,["value"])):re(n,v1,Tn,[i],e,["value"])}function vpt(r,t){_dt(r,t)}function mpt(r,t){Qt(r,t)}const ypt=it(Gt,{Placemark:z(H7)}),_pt=function(r,t,e){const n=t[t.length-1].node;return ie(n.namespaceURI,"Placemark")};function xpt(r,t,e){re({node:r},ypt,_pt,t,e,void 0,this)}const Spt=Mr("Data");function wpt(r,t,e){const n={node:r},i=t.names,a=t.values,o=i.length;for(let s=0;s<o;s++)re(n,v1,Spt,[{name:i[s],value:a[s]}],e)}const ZF=it(Gt,["href"],it(yl,["x","y","w","h"])),jF=it(Gt,{href:z(Qt)},it(yl,{x:z(Ri),y:z(Ri),w:z(Ri),h:z(Ri)})),Tpt=function(r,t,e){return ie(yl[0],"gx:"+e)};function bpt(r,t,e){const n={node:r},i=e[e.length-1].node;let a=ZF[i.namespaceURI],o=Ui(t,a);re(n,jF,Tn,o,e,a),a=ZF[yl[0]],o=Ui(t,a),re(n,jF,Tpt,o,e,a)}const Ept=it(Gt,["scale","heading","Icon","color","hotSpot"]),Cpt=it(Gt,{Icon:z(bpt),color:z(bw),heading:z(Ri),hotSpot:z(Qpt),scale:z(Y7)});function Mpt(r,t,e){const n={node:r},i={},a=t.getSrc(),o=t.getSize(),s=t.getImageSize(),l={href:a};if(o){l.w=o[0],l.h=o[1];const v=t.getAnchor(),m=t.getOrigin();if(m&&s&&m[0]!==0&&m[1]!==o[1]&&(l.x=m[0],l.y=s[1]-(m[1]+o[1])),v&&(v[0]!==o[0]/2||v[1]!==o[1]/2)){const y={x:v[0],xunits:"pixels",y:o[1]-v[1],yunits:"pixels"};i.hotSpot=y}}i.Icon=l;let u=t.getScaleArray()[0],h=o;if(h===null&&(h=Wv),h.length==2){const v=Ix(h);u=u/v}u!==1&&(i.scale=u);const c=t.getRotation();c!==0&&(i.heading=c);const f=t.getColor();f&&(i.color=f);const d=e[e.length-1].node,g=Ept[d.namespaceURI],p=Ui(i,g);re(n,Cpt,Tn,p,e,g)}const Apt=it(Gt,["color","scale"]),Ipt=it(Gt,{color:z(bw),scale:z(Y7)});function Rpt(r,t,e){const n={node:r},i={},a=t.getFill();a&&(i.color=a.getColor());const o=t.getScale();o&&o!==1&&(i.scale=o);const s=e[e.length-1].node,l=Apt[s.namespaceURI],u=Ui(i,l);re(n,Ipt,Tn,u,e,l)}const Ppt=it(Gt,["color","width"]),Lpt=it(Gt,{color:z(bw),width:z(Ri)});function Dpt(r,t,e){const n={node:r},i={color:t.getColor(),width:Number(t.getWidth())||1},a=e[e.length-1].node,o=Ppt[a.namespaceURI],s=Ui(i,o);re(n,Lpt,Tn,s,e,o)}const Opt={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},U7=function(r,t,e){if(r){const n=t[t.length-1].node;return ie(n.namespaceURI,Opt[r.getType()])}},Npt=Mr("Point"),Fpt=Mr("LineString"),kpt=Mr("LinearRing"),Gpt=Mr("Polygon"),Bpt=it(Gt,{LineString:z(zd),Point:z(zd),Polygon:z($7),GeometryCollection:z(W7)});function W7(r,t,e){const n={node:r},i=t.getType();let a=[],o;if(i==="GeometryCollection")t.getGeometriesArrayRecursive().forEach(function(s){const l=s.getType();if(l==="MultiPoint")a=a.concat(s.getPoints());else if(l==="MultiLineString")a=a.concat(s.getLineStrings());else if(l==="MultiPolygon")a=a.concat(s.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")a.push(s);else throw new Error("Unknown geometry type")}),o=U7;else if(i==="MultiPoint")a=t.getPoints(),o=Npt;else if(i==="MultiLineString")a=t.getLineStrings(),o=Fpt;else if(i==="MultiPolygon")a=t.getPolygons(),o=Gpt;else throw new Error("Unknown geometry type");re(n,Bpt,o,a,e)}const zpt=it(Gt,{LinearRing:z(zd)});function KF(r,t,e){re({node:r},zpt,kpt,[t],e)}const yb=it(Gt,{ExtendedData:z(wpt),MultiGeometry:z(W7),LineString:z(zd),LinearRing:z(zd),Point:z(zd),Polygon:z($7),Style:z(Jpt),address:z(Qt),description:z(Qt),name:z(Qt),open:z(hg),phoneNumber:z(Qt),styleUrl:z(Qt),visibility:z(hg)}),Vpt=it(Gt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Upt=Mr("ExtendedData");function H7(r,t,e){const n={node:r};t.getId()&&r.setAttribute("id",t.getId());const i=t.getProperties(),a={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};a[t.getGeometryName()]=1;const o=Object.keys(i||{}).sort().filter(function(d){return!a[d]}),s=t.getStyleFunction();if(s){const d=s(t,0);if(d){const g=Array.isArray(d)?d:[d];let p=g;if(t.getGeometry()&&(p=g.filter(function(v){const m=v.getGeometryFunction()(t);if(m){const y=m.getType();return y==="GeometryCollection"?m.getGeometriesArrayRecursive().filter(function(_){const x=_.getType();return x==="Point"||x==="MultiPoint"}).length:y==="Point"||y==="MultiPoint"}})),this.writeStyles_){let v=g,m=g;t.getGeometry()&&(v=g.filter(function(y){const _=y.getGeometryFunction()(t);if(_){const x=_.getType();return x==="GeometryCollection"?_.getGeometriesArrayRecursive().filter(function(w){const S=w.getType();return S==="LineString"||S==="MultiLineString"}).length:x==="LineString"||x==="MultiLineString"}}),m=g.filter(function(y){const _=y.getGeometryFunction()(t);if(_){const x=_.getType();return x==="GeometryCollection"?_.getGeometriesArrayRecursive().filter(function(w){const S=w.getType();return S==="Polygon"||S==="MultiPolygon"}).length:x==="Polygon"||x==="MultiPolygon"}})),i.Style={pointStyles:p,lineStyles:v,polyStyles:m}}if(p.length&&i.name===void 0){const v=p[0].getText();v&&(i.name=v.getText())}}}const l=e[e.length-1].node,u=Vpt[l.namespaceURI],h=Ui(i,u);if(re(n,yb,Tn,h,e,u),o.length>0){const d=Ui(i,o);re(n,yb,Upt,[{names:o,values:d}],e)}const c=e[0];let f=t.getGeometry();f&&(f=Sr(f,!0,c)),re(n,yb,U7,[f],e)}const Wpt=it(Gt,["extrude","tessellate","altitudeMode","coordinates"]),Hpt=it(Gt,{extrude:z(hg),tessellate:z(hg),altitudeMode:z(Qt),coordinates:z(gpt)});function zd(r,t,e){const n=t.getFlatCoordinates(),i={node:r};i.layout=t.getLayout(),i.stride=t.getStride();const a=t.getProperties();a.coordinates=n;const o=e[e.length-1].node,s=Wpt[o.namespaceURI],l=Ui(a,s);re(i,Hpt,Tn,l,e,s)}const $pt=it(Gt,["color","fill","outline"]),qF=it(Gt,{outerBoundaryIs:z(KF),innerBoundaryIs:z(KF)}),Ypt=Mr("innerBoundaryIs"),Xpt=Mr("outerBoundaryIs");function $7(r,t,e){const n=t.getLinearRings(),i=n.shift(),a={node:r};re(a,qF,Ypt,n,e),re(a,qF,Xpt,[i],e)}const Zpt=it(Gt,{color:z(bw),fill:z(hg),outline:z(hg)});function jpt(r,t,e){const n={node:r},i=t.getFill(),a=t.getStroke(),o={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:a?void 0:!1},s=e[e.length-1].node,l=$pt[s.namespaceURI],u=Ui(o,l);re(n,Zpt,Tn,u,e,l)}function Y7(r,t){Ri(r,Math.round(t*1e6)/1e6)}const Kpt=it(Gt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),qpt=it(Gt,{IconStyle:z(Mpt),LabelStyle:z(Rpt),LineStyle:z(Dpt),PolyStyle:z(jpt)});function Jpt(r,t,e){const n={node:r},i={};if(t.pointStyles.length){const l=t.pointStyles[0].getText();l&&(i.LabelStyle=l);const u=t.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(i.IconStyle=u)}if(t.lineStyles.length){const l=t.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(t.polyStyles.length){const l=t.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=t.polyStyles[0]}const a=e[e.length-1].node,o=Kpt[a.namespaceURI],s=Ui(i,o);re(n,qpt,Tn,s,e,o)}function Qpt(r,t){r.setAttribute("x",String(t.x)),r.setAttribute("y",String(t.y)),r.setAttribute("xunits",t.xunits),r.setAttribute("yunits",t.yunits)}const oA=65536*65536,JF=1/oA,tvt=12,QF=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),_b=0,H0=1,Sp=2,$0=5;class evt{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,e,n=this.length){for(;this.pos<n;){const i=this.readVarint(),a=i>>3,o=this.pos;this.type=i&7,t(a,e,this),this.pos===o&&this.skip(i)}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*oA;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*oA;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const e=this.buf;let n,i;return i=e[this.pos++],n=i&127,i<128||(i=e[this.pos++],n|=(i&127)<<7,i<128)||(i=e[this.pos++],n|=(i&127)<<14,i<128)||(i=e[this.pos++],n|=(i&127)<<21,i<128)?n:(i=e[this.pos],n|=(i&15)<<28,rvt(n,t,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2===1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=tvt&&QF?QF.decode(this.buf.subarray(e,t)):pvt(this.buf,e,t)}readBytes(){const t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===Sp?this.readVarint()+this.pos:this.pos+1}skip(t){const e=t&7;if(e===_b)for(;this.buf[this.pos++]>127;);else if(e===Sp)this.pos=this.readVarint()+this.pos;else if(e===$0)this.pos+=4;else if(e===H0)this.pos+=8;else throw new Error(`Unimplemented type: ${e}`)}writeTag(t,e){this.writeVarint(t<<3|e)}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){const n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=e}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*JF),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*JF),!0),this.pos+=8}writeVarint(t){if(t=+t||0,t>268435455||t<0){nvt(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))}writeSVarint(t){this.writeVarint(t<0?-t*2-1:t*2)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(t.length*4),this.pos++;const e=this.pos;this.pos=vvt(this.buf,t,this.pos);const n=this.pos-e;n>=128&&tk(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const e=t.length;this.writeVarint(e),this.realloc(e);for(let n=0;n<e;n++)this.buf[this.pos++]=t[n]}writeRawMessage(t,e){this.pos++;const n=this.pos;t(e,this);const i=this.pos-n;i>=128&&tk(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i}writeMessage(t,e,n){this.writeTag(t,Sp),this.writeRawMessage(e,n)}writePackedVarint(t,e){e.length&&this.writeMessage(t,ovt,e)}writePackedSVarint(t,e){e.length&&this.writeMessage(t,svt,e)}writePackedBoolean(t,e){e.length&&this.writeMessage(t,hvt,e)}writePackedFloat(t,e){e.length&&this.writeMessage(t,lvt,e)}writePackedDouble(t,e){e.length&&this.writeMessage(t,uvt,e)}writePackedFixed32(t,e){e.length&&this.writeMessage(t,cvt,e)}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,fvt,e)}writePackedFixed64(t,e){e.length&&this.writeMessage(t,dvt,e)}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,gvt,e)}writeBytesField(t,e){this.writeTag(t,Sp),this.writeBytes(e)}writeFixed32Field(t,e){this.writeTag(t,$0),this.writeFixed32(e)}writeSFixed32Field(t,e){this.writeTag(t,$0),this.writeSFixed32(e)}writeFixed64Field(t,e){this.writeTag(t,H0),this.writeFixed64(e)}writeSFixed64Field(t,e){this.writeTag(t,H0),this.writeSFixed64(e)}writeVarintField(t,e){this.writeTag(t,_b),this.writeVarint(e)}writeSVarintField(t,e){this.writeTag(t,_b),this.writeSVarint(e)}writeStringField(t,e){this.writeTag(t,Sp),this.writeString(e)}writeFloatField(t,e){this.writeTag(t,$0),this.writeFloat(e)}writeDoubleField(t,e){this.writeTag(t,H0),this.writeDouble(e)}writeBooleanField(t,e){this.writeVarintField(t,+e)}}function rvt(r,t,e){const n=e.buf;let i,a;if(a=n[e.pos++],i=(a&112)>>4,a<128||(a=n[e.pos++],i|=(a&127)<<3,a<128)||(a=n[e.pos++],i|=(a&127)<<10,a<128)||(a=n[e.pos++],i|=(a&127)<<17,a<128)||(a=n[e.pos++],i|=(a&127)<<24,a<128)||(a=n[e.pos++],i|=(a&1)<<31,a<128))return Tf(r,i,t);throw new Error("Expected varint not more than 10 bytes")}function Tf(r,t,e){return e?t*4294967296+(r>>>0):(t>>>0)*4294967296+(r>>>0)}function nvt(r,t){let e,n;if(r>=0?(e=r%4294967296|0,n=r/4294967296|0):(e=~(-r%4294967296),n=~(-r/4294967296),e^4294967295?e=e+1|0:(e=0,n=n+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),ivt(e,n,t),avt(n,t)}function ivt(r,t,e){e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos]=r&127}function avt(r,t){const e=(r&7)<<4;t.buf[t.pos++]|=e|((r>>>=3)?128:0),r&&(t.buf[t.pos++]=r&127|((r>>>=7)?128:0),r&&(t.buf[t.pos++]=r&127|((r>>>=7)?128:0),r&&(t.buf[t.pos++]=r&127|((r>>>=7)?128:0),r&&(t.buf[t.pos++]=r&127|((r>>>=7)?128:0),r&&(t.buf[t.pos++]=r&127)))))}function tk(r,t,e){const n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));e.realloc(n);for(let i=e.pos-1;i>=r;i--)e.buf[i+n]=e.buf[i]}function ovt(r,t){for(let e=0;e<r.length;e++)t.writeVarint(r[e])}function svt(r,t){for(let e=0;e<r.length;e++)t.writeSVarint(r[e])}function lvt(r,t){for(let e=0;e<r.length;e++)t.writeFloat(r[e])}function uvt(r,t){for(let e=0;e<r.length;e++)t.writeDouble(r[e])}function hvt(r,t){for(let e=0;e<r.length;e++)t.writeBoolean(r[e])}function cvt(r,t){for(let e=0;e<r.length;e++)t.writeFixed32(r[e])}function fvt(r,t){for(let e=0;e<r.length;e++)t.writeSFixed32(r[e])}function dvt(r,t){for(let e=0;e<r.length;e++)t.writeFixed64(r[e])}function gvt(r,t){for(let e=0;e<r.length;e++)t.writeSFixed64(r[e])}function pvt(r,t,e){let n="",i=t;for(;i<e;){const a=r[i];let o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s>e)break;let l,u,h;s===1?a<128&&(o=a):s===2?(l=r[i+1],(l&192)===128&&(o=(a&31)<<6|l&63,o<=127&&(o=null))):s===3?(l=r[i+1],u=r[i+2],(l&192)===128&&(u&192)===128&&(o=(a&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):s===4&&(l=r[i+1],u=r[i+2],h=r[i+3],(l&192)===128&&(u&192)===128&&(h&192)===128&&(o=(a&15)<<18|(l&63)<<12|(u&63)<<6|h&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,s=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),i+=s}return n}function vvt(r,t,e){for(let n=0,i,a;n<t.length;n++){if(i=t.charCodeAt(n),i>55295&&i<57344)if(a)if(i<56320){r[e++]=239,r[e++]=191,r[e++]=189,a=i;continue}else i=a-55296<<10|i-56320|65536,a=null;else{i>56319||n+1===t.length?(r[e++]=239,r[e++]=191,r[e++]=189):a=i;continue}else a&&(r[e++]=239,r[e++]=191,r[e++]=189,a=null);i<128?r[e++]=i:(i<2048?r[e++]=i>>6|192:(i<65536?r[e++]=i>>12|224:(r[e++]=i>>18|240,r[e++]=i>>12&63|128),r[e++]=i>>6&63|128),r[e++]=i&63|128)}return e}class mvt extends Gy{constructor(t){super(),t=t||{},this.dataProjection=new zi({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:di,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,n,i){t.pos=e.geometry;const a=t.readVarint()+t.pos;let o=1,s=0,l=0,u=0,h=0,c=0;for(;t.pos<a;){if(!s){const f=t.readVarint();o=f&7,s=f>>3}if(s--,o===1||o===2)l+=t.readSVarint(),u+=t.readSVarint(),o===1&&h>c&&(i.push(h),c=h),n.push(l,u),h+=2;else if(o===7)h>c&&(n.push(n[c],n[c+1]),h+=2);else throw new Error("Invalid command found in the PBF")}h>c&&(i.push(h),c=h)}createFeature_(t,e,n){const i=e.type;if(i===0)return null;let a;const o=e.properties;let s;this.idProperty_?(s=o[this.idProperty_],delete o[this.idProperty_]):s=e.id,o[this.layerName_]=e.layer.name;const l=[],u=[];this.readRawGeometry_(t,e,l,u);const h=wvt(i,u.length);if(this.featureClass===di)a=new this.featureClass(h,l,u,2,o,s),a.transform(n.dataProjection);else{let c;if(h=="Polygon"){const g=uU(l,u);c=g.length>1?new yi(l,"XY",g):new Kr(l,"XY",u)}else c=h==="Point"?new rr(l,"XY"):h==="LineString"?new ke(l,"XY"):h==="MultiPoint"?new fa(l,"XY"):h==="MultiLineString"?new Dn(l,"XY",u):null;const f=this.featureClass;a=new f,this.geometryName_&&a.setGeometryName(this.geometryName_);const d=Sr(c,!1,n);a.setGeometry(d),s!==void 0&&a.setId(s),a.setProperties(o,!0)}return a}getType(){return"arraybuffer"}readFeatures(t,e){const n=this.layers_;e=this.adaptOptions(e);const i=Xt(e.dataProjection);i.setWorldExtent(e.extent),e.dataProjection=i;const a=new evt(t),o=a.readFields(yvt,{}),s=[];for(const l in o){if(n&&!n.includes(l))continue;const u=o[l],h=u?[0,0,u.extent,u.extent]:null;i.setExtent(h);for(let c=0,f=u.length;c<f;++c){const d=Svt(a,u,c),g=this.createFeature_(a,d,e);g!==null&&s.push(g)}}return s}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function yvt(r,t,e){if(r===3){const n={keys:[],values:[],features:[]},i=e.readVarint()+e.pos;e.readFields(_vt,n,i),n.length=n.features.length,n.length&&(t[n.name]=n)}}function _vt(r,t,e){if(r===15)t.version=e.readVarint();else if(r===1)t.name=e.readString();else if(r===5)t.extent=e.readVarint();else if(r===2)t.features.push(e.pos);else if(r===3)t.keys.push(e.readString());else if(r===4){let n=null;const i=e.readVarint()+e.pos;for(;e.pos<i;)r=e.readVarint()>>3,n=r===1?e.readString():r===2?e.readFloat():r===3?e.readDouble():r===4?e.readVarint64():r===5?e.readVarint():r===6?e.readSVarint():r===7?e.readBoolean():null;t.values.push(n)}}function xvt(r,t,e){if(r==1)t.id=e.readVarint();else if(r==2){const n=e.readVarint()+e.pos;for(;e.pos<n;){const i=t.layer.keys[e.readVarint()],a=t.layer.values[e.readVarint()];t.properties[i]=a}}else r==3?t.type=e.readVarint():r==4&&(t.geometry=e.pos)}function Svt(r,t,e){r.pos=t.features[e];const n=r.readVarint()+r.pos,i={layer:t,type:0,properties:{}};return r.readFields(xvt,i,n),i}function wvt(r,t){let e;return r===1?e=t===1?"Point":"MultiPoint":r===2?e=t===1?"LineString":"MultiLineString":r===3&&(e="Polygon"),e}class _P{read(t){if(!t)return null;if(typeof t=="string"){const e=ka(t);return this.readFromDocument(e)}return Fa(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}readFromNode(t){Ut()}}const Tvt="http://www.w3.org/1999/xlink";function zg(r){return r.getAttributeNS(Tvt,"href")}const $i=[null,"http://www.opengis.net/ows/1.1"],bvt=it($i,{ServiceIdentification:G(Zvt),ServiceProvider:G(Kvt),OperationsMetadata:G(Yvt)});class X7 extends _P{constructor(){super()}readFromNode(t){const e=st({},bvt,t,[]);return e||null}}const Evt=it($i,{DeliveryPoint:G(ht),City:G(ht),AdministrativeArea:G(ht),PostalCode:G(ht),Country:G(ht),ElectronicMailAddress:G(ht)}),Cvt=it($i,{Value:fr(qvt)}),Mvt=it($i,{AllowedValues:G(Bvt)}),Avt=it($i,{Phone:G(Xvt),Address:G(Gvt)}),Ivt=it($i,{HTTP:G(Hvt)}),Rvt=it($i,{Get:fr(Wvt),Post:void 0}),Pvt=it($i,{DCP:G(Uvt)}),Lvt=it($i,{Operation:$vt}),Dvt=it($i,{Voice:G(ht),Facsimile:G(ht)}),Ovt=it($i,{Constraint:fr(zvt)}),Nvt=it($i,{IndividualName:G(ht),PositionName:G(ht),ContactInfo:G(Vvt)}),Fvt=it($i,{Abstract:G(ht),AccessConstraints:G(ht),Fees:G(ht),Title:G(ht),ServiceTypeVersion:G(ht),ServiceType:G(ht)}),kvt=it($i,{ProviderName:G(ht),ProviderSite:G(zg),ServiceContact:G(jvt)});function Gvt(r,t){return st({},Evt,r,t)}function Bvt(r,t){return st({},Cvt,r,t)}function zvt(r,t){const e=r.getAttribute("name");if(e)return st({name:e},Mvt,r,t)}function Vvt(r,t){return st({},Avt,r,t)}function Uvt(r,t){return st({},Ivt,r,t)}function Wvt(r,t){const e=zg(r);if(e)return st({href:e},Ovt,r,t)}function Hvt(r,t){return st({},Rvt,r,t)}function $vt(r,t){const e=r.getAttribute("name"),n=st({},Pvt,r,t);if(!n)return;const i=t[t.length-1];i[e]=n}function Yvt(r,t){return st({},Lvt,r,t)}function Xvt(r,t){return st({},Dvt,r,t)}function Zvt(r,t){return st({},Fvt,r,t)}function jvt(r,t){return st({},Nvt,r,t)}function Kvt(r,t){return st({},kvt,r,t)}function qvt(r,t){return ht(r)}function ek(r,t,e,n,i,a){i!==void 0?(i=i,a=a!==void 0?a:0):(i=[],a=0);let o=t;for(;o<e;){const s=r[o++];i[a++]=r[o++],i[a++]=s;for(let l=2;l<n;++l)i[a++]=r[o++]}return i.length=a,i}let Jvt=class extends pP{constructor(t){super(),t=t||{},this.dataProjection=Xt("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY"}readFeatureFromText(t,e){const n=this.readGeometryFromText(t,e);return new Le(n)}readFeaturesFromText(t,e){return[this.readFeatureFromText(t,e)]}readGeometryFromText(t,e){const n=Em(this.geometryLayout_),i=tmt(t,n,this.factor_);ek(i,0,i.length,n,i);const a=Vs(i,0,i.length,n),o=new ke(a,this.geometryLayout_);return Sr(o,!1,this.adaptOptions(e))}writeFeatureText(t,e){const n=t.getGeometry();if(n)return this.writeGeometryText(n,e);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(t,e){return this.writeFeatureText(t[0],e)}writeGeometryText(t,e){t=Sr(t,!0,this.adaptOptions(e));const n=t.getFlatCoordinates(),i=t.getStride();return ek(n,0,n.length,i,n),Qvt(n,i,this.factor_)}};function Qvt(r,t,e){e=e||1e5;let n;const i=new Array(t);for(n=0;n<t;++n)i[n]=0;for(let a=0,o=r.length;a<o;)for(n=0;n<t;++n,++a){const s=r[a],l=s-i[n];i[n]=s,r[a]=l}return emt(r,e)}function tmt(r,t,e){e=e||1e5;let n;const i=new Array(t);for(n=0;n<t;++n)i[n]=0;const a=rmt(r,e);for(let o=0,s=a.length;o<s;)for(n=0;n<t;++n,++o)i[n]+=a[o],a[o]=i[n];return a}function emt(r,t){t=t||1e5;for(let e=0,n=r.length;e<n;++e)r[e]=Math.round(r[e]*t);return nmt(r)}function rmt(r,t){t=t||1e5;const e=imt(r);for(let n=0,i=e.length;n<i;++n)e[n]/=t;return e}function nmt(r){for(let t=0,e=r.length;t<e;++t){const n=r[t];r[t]=n<0?~(n<<1):n<<1}return amt(r)}function imt(r){const t=omt(r);for(let e=0,n=t.length;e<n;++e){const i=t[e];t[e]=i&1?~(i>>1):i>>1}return t}function amt(r){let t="";for(let e=0,n=r.length;e<n;++e)t+=smt(r[e]);return t}function omt(r){const t=[];let e=0,n=0;for(let i=0,a=r.length;i<a;++i){const o=r.charCodeAt(i)-63;e|=(o&31)<<n,o<32?(t.push(e),e=0,n=0):n+=5}return t}function smt(r){let t,e="";for(;r>=32;)t=(32|r&31)+63,e+=String.fromCharCode(t),r>>=5;return t=r+63,e+=String.fromCharCode(t),e}class lmt extends lP{constructor(t){super(),t=t||{},this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.dataProjection=Xt(t.dataProjection?t.dataProjection:"EPSG:4326")}readFeaturesFromObject(t,e){if(t.type=="Topology"){const n=t;let i,a=null,o=null;n.transform&&(i=n.transform,a=i.scale,o=i.translate);const s=n.arcs;i&&mmt(s,a,o);const l=[],u=n.objects,h=this.layerName_;let c;for(const f in u)this.layers_&&!this.layers_.includes(f)||(u[f].type==="GeometryCollection"?(c=u[f],l.push.apply(l,vmt(c,s,a,o,h,f,e))):(c=u[f],l.push(Z7(c,s,a,o,h,f,e))));return l}return[]}readProjectionFromObject(t){return this.dataProjection}}const umt={Point:hmt,LineString:fmt,Polygon:gmt,MultiPoint:cmt,MultiLineString:dmt,MultiPolygon:pmt};function Ew(r,t){const e=[];let n;for(let i=0,a=r.length;i<a;++i)if(n=r[i],i>0&&e.pop(),n>=0){const o=t[n];for(let s=0,l=o.length;s<l;++s)e.push(o[s].slice(0))}else{const o=t[~n];for(let s=o.length-1;s>=0;--s)e.push(o[s].slice(0))}return e}function hmt(r,t,e){const n=r.coordinates;return t&&e&&xP(n,t,e),new rr(n)}function cmt(r,t,e){const n=r.coordinates;if(t&&e)for(let i=0,a=n.length;i<a;++i)xP(n[i],t,e);return new fa(n)}function fmt(r,t){const e=Ew(r.arcs,t);return new ke(e)}function dmt(r,t){const e=[];for(let n=0,i=r.arcs.length;n<i;++n)e[n]=Ew(r.arcs[n],t);return new Dn(e)}function gmt(r,t){const e=[];for(let n=0,i=r.arcs.length;n<i;++n)e[n]=Ew(r.arcs[n],t);return new Kr(e)}function pmt(r,t){const e=[];for(let n=0,i=r.arcs.length;n<i;++n){const a=r.arcs[n],o=[];for(let s=0,l=a.length;s<l;++s)o[s]=Ew(a[s],t);e[n]=o}return new yi(e)}function vmt(r,t,e,n,i,a,o){const s=r.geometries,l=[];for(let u=0,h=s.length;u<h;++u)l[u]=Z7(s[u],t,e,n,i,a,o);return l}function Z7(r,t,e,n,i,a,o){let s=null;const l=r.type;if(l){const c=umt[l];l==="Point"||l==="MultiPoint"?s=c(r,e,n):s=c(r,t),s=Sr(s,!1,o)}const u=new Le({geometry:s});r.id!==void 0&&u.setId(r.id);let h=r.properties;return i&&(h||(h={}),h[i]=a),h&&u.setProperties(h,!0),u}function mmt(r,t,e){for(let n=0,i=r.length;n<i;++n)ymt(r[n],t,e)}function ymt(r,t,e){let n=0,i=0;for(let a=0,o=r.length;a<o;++a){const s=r[a];n+=s[0],i+=s[1],s[0]=n,s[1]=i,xP(s,t,e)}}function xP(r,t,e){r[0]=r[0]*t[0]+e[0],r[1]=r[1]*t[1]+e[1]}class Ge extends dt{constructor(t){t=t||{},super(t),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,e,n){const i=n[n.length-1];n[n.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(t,e,n)}}Ge.prototype.namespace="http://www.opengis.net/gml/3.2";Ge.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Ht(dt.prototype.readFlatPos),posList:Ht(dt.prototype.readFlatPosList),coordinates:Ht(we.prototype.readFlatCoordinates)}};Ge.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:dt.prototype.interiorParser,exterior:dt.prototype.exteriorParser}};Ge.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Ht(Nt.prototype.readPoint),MultiPoint:Ht(Nt.prototype.readMultiPoint),LineString:Ht(Nt.prototype.readLineString),MultiLineString:Ht(Nt.prototype.readMultiLineString),LinearRing:Ht(Nt.prototype.readLinearRing),Polygon:Ht(Nt.prototype.readPolygon),MultiPolygon:Ht(Nt.prototype.readMultiPolygon),Surface:Ht(Ge.prototype.readSurface),MultiSurface:Ht(dt.prototype.readMultiSurface),Curve:Ht(Ge.prototype.readCurve),MultiCurve:Ht(dt.prototype.readMultiCurve),Envelope:Ht(Ge.prototype.readEnvelope)}};Ge.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:kt(dt.prototype.curveMemberParser),curveMembers:kt(dt.prototype.curveMemberParser)}};Ge.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:kt(dt.prototype.surfaceMemberParser),surfaceMembers:kt(dt.prototype.surfaceMemberParser)}};Ge.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:kt(Nt.prototype.readLineString),Curve:kt(dt.prototype.readCurve)}};Ge.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:kt(Nt.prototype.readPolygon),Surface:kt(dt.prototype.readSurface)}};Ge.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Ht(dt.prototype.readPatch)}};Ge.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Ht(dt.prototype.readSegment)}};Ge.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:kt(dt.prototype.readFlatPosList),upperCorner:kt(dt.prototype.readFlatPosList)}};Ge.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Ht(dt.prototype.readPolygonPatch)}};Ge.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Cx(dt.prototype.readLineStringSegment)}};Ge.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:kt(Nt.prototype.pointMemberParser),pointMembers:kt(Nt.prototype.pointMemberParser)}};Ge.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:kt(Nt.prototype.lineStringMemberParser),lineStringMembers:kt(Nt.prototype.lineStringMemberParser)}};Ge.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:kt(Nt.prototype.polygonMemberParser),polygonMembers:kt(Nt.prototype.polygonMemberParser)}};Ge.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:kt(Nt.prototype.readFlatCoordinatesFromNode)}};Ge.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:kt(Nt.prototype.readLineString)}};Ge.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:kt(Nt.prototype.readPolygon)}};Ge.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Ht(Nt.prototype.readFlatLinearRing),Ring:Ht(Ge.prototype.readFlatCurveRing)}};Ge.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:z(dt.prototype.writeRing),interior:z(dt.prototype.writeRing)}};Ge.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:z(Qt),upperCorner:z(Qt)}};Ge.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:z(dt.prototype.writeSurfaceOrPolygonMember),polygonMember:z(dt.prototype.writeSurfaceOrPolygonMember)}};Ge.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:z(dt.prototype.writePointMember)}};Ge.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:z(dt.prototype.writeLineStringOrCurveMember),curveMember:z(dt.prototype.writeLineStringOrCurveMember)}};Ge.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:z(dt.prototype.writeCurveOrLineString),MultiCurve:z(dt.prototype.writeMultiCurveOrLineString),Point:z(Ge.prototype.writePoint),MultiPoint:z(dt.prototype.writeMultiPoint),LineString:z(dt.prototype.writeCurveOrLineString),MultiLineString:z(dt.prototype.writeMultiCurveOrLineString),LinearRing:z(dt.prototype.writeLinearRing),Polygon:z(dt.prototype.writeSurfaceOrPolygon),MultiPolygon:z(dt.prototype.writeMultiSurfaceOrPolygon),Surface:z(dt.prototype.writeSurfaceOrPolygon),MultiSurface:z(dt.prototype.writeMultiSurfaceOrPolygon),Envelope:z(dt.prototype.writeEnvelope)}};class j7{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}}class _mt extends j7{constructor(t,e){super(t),this.conditions=e,pe(this.conditions.length>=2,"At least 2 conditions are required")}}class xmt extends _mt{constructor(t){super("And",Array.prototype.slice.call(arguments))}}class Smt extends j7{constructor(t,e,n){if(super("BBOX"),this.geometryName=t,this.extent=e,e.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=n}}function wmt(r){const t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(xmt,t))}function Tmt(r,t,e){return new Smt(r,t,e)}const rk={"http://www.opengis.net/gml":{boundedBy:G(Nt.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:kt(Nt.prototype.readFeaturesInternal)}},bmt={"http://www.opengis.net/wfs":{totalInserted:G(Pr),totalUpdated:G(Pr),totalDeleted:G(Pr)},"http://www.opengis.net/wfs/2.0":{totalInserted:G(Pr),totalUpdated:G(Pr),totalDeleted:G(Pr)}},Emt={"http://www.opengis.net/wfs":{TransactionSummary:G(ik,"transactionSummary"),InsertResults:G(ok,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:G(ik,"transactionSummary"),InsertResults:G(ok,"insertIds")}},Cmt={"http://www.opengis.net/wfs":{PropertyName:z(Qt)},"http://www.opengis.net/wfs/2.0":{PropertyName:z(Qt)}},K7={"http://www.opengis.net/wfs":{Insert:z(sk),Update:z(uk),Delete:z(lk),Property:z(hk),Native:z(ck)},"http://www.opengis.net/wfs/2.0":{Insert:z(sk),Update:z(uk),Delete:z(lk),Property:z(hk),Native:z(ck)}},q7="feature",SP="http://www.w3.org/2000/xmlns/",wP={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},sA={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},TP={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},nk={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},bP={"2.0.0":Ge,"1.1.0":dt,"1.0.0":we},Mmt="1.1.0";class J7 extends zy{constructor(t){super(),t=t||{},this.version_=t.version?t.version:Mmt,this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new bP[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:nk[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,e){const n={node:t};Object.assign(n,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(n,this.getReadOptions(t,e||{}));const i=[n];let a;this.version_==="2.0.0"?a=rk:a=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=st([],a,t,i,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(t){if(t){if(typeof t=="string"){const e=ka(t);return this.readTransactionResponseFromDocument(e)}return Fa(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if(typeof t=="string"){const e=ka(t);return this.readFeatureCollectionMetadataFromDocument(e)}return Fa(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)}readFeatureCollectionMetadataFromNode(t){const e={},n=Us(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=n,st(e,rk,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)}readTransactionResponseFromNode(t){return st({},Emt,t,[])}writeGetFeature(t){const e=ie(sA[this.version_],"GetFeature");e.setAttribute("service","WFS"),e.setAttribute("version",this.version_),t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),t.maxFeatures!==void 0&&e.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&e.setAttribute("resultType",t.resultType),t.startIndex!==void 0&&e.setAttribute("startIndex",String(t.startIndex)),t.count!==void 0&&e.setAttribute("count",String(t.count)),t.viewParams!==void 0&&e.setAttribute("viewParams",t.viewParams),e.setAttributeNS(Bc,"xsi:schemaLocation",this.schemaLocation_);const n={node:e};if(Object.assign(n,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),pe(Array.isArray(t.featureTypes),"`options.featureTypes` must be an Array"),typeof t.featureTypes[0]=="string"){let i=t.filter;t.bbox&&(pe(t.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),Object.assign(n,{geometryName:t.geometryName,filter:i}),Sk(e,t.featureTypes,[n])}else t.featureTypes.forEach(i=>{const a=this.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);Object.assign(n,{geometryName:i.geometryName,filter:a}),Sk(e,[i.name],[n])});return e}combineBboxAndFilter(t,e,n,i){const a=Tmt(t,e,n);return i?wmt(i,a):a}writeTransaction(t,e,n,i){const a=[],o=i.version?i.version:this.version_,s=ie(sA[o],"Transaction");s.setAttribute("service","WFS"),s.setAttribute("version",o);let l;i&&(l=i.gmlOptions?i.gmlOptions:{},i.handle&&s.setAttribute("handle",i.handle)),s.setAttributeNS(Bc,"xsi:schemaLocation",nk[o]);const u=Amt(s,l,o,i);return t&&Y0("Insert",t,a,u),e&&Y0("Update",e,a,u),n&&Y0("Delete",n,a,u),i.nativeElements&&Y0("Native",i.nativeElements,a,u),s}readProjectionFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(!(e.childNodes.length===0||e.childNodes.length===1&&e.firstChild.nodeType===3)){const n=[{}];return this.gmlFormat_.readGeometryElement(e,n),Xt(n.pop().srsName)}}return null}}function Amt(r,t,e,n){const i=n.featurePrefix?n.featurePrefix:q7;let a;return e==="1.0.0"?a=2:e==="1.1.0"?a=3:e==="2.0.0"&&(a=3.2),Object.assign({node:r},{version:e,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:i,gmlVersion:a,hasZ:n.hasZ,srsName:n.srsName},t)}function Y0(r,t,e,n){re(n,K7,Mr(r),t,e)}function ik(r,t){return st({},bmt,r,t)}const Imt={"http://www.opengis.net/ogc":{FeatureId:kt(function(r,t){return r.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:kt(function(r,t){return r.getAttribute("fid")})}};function ak(r,t){Vi(Imt,r,t)}const Rmt={"http://www.opengis.net/wfs":{Feature:ak},"http://www.opengis.net/wfs/2.0":{Feature:ak}};function ok(r,t){return st([],Rmt,r,t)}function sk(r,t,e){const n=e[e.length-1],i=n.featureType,a=n.featureNS,o=n.gmlVersion,s=ie(a,i);r.appendChild(s),o===2?we.prototype.writeFeatureElement(s,t,e):o===3?dt.prototype.writeFeatureElement(s,t,e):Ge.prototype.writeFeatureElement(s,t,e)}function Q7(r,t,e){const i=e[e.length-1].version,a=wP[i],o=ie(a,"Filter"),s=ie(a,"FeatureId");o.appendChild(s),s.setAttribute("fid",t),r.appendChild(o)}function EP(r,t){r=r||q7;const e=r+":";return t.startsWith(e)?t:e+t}function lk(r,t,e){const n=e[e.length-1];pe(t.getId()!==void 0,"Features must have an id set");const i=n.featureType,a=n.featurePrefix,o=n.featureNS,s=EP(a,i);r.setAttribute("typeName",s),r.setAttributeNS(SP,"xmlns:"+a,o);const l=t.getId();l!==void 0&&Q7(r,l,e)}function uk(r,t,e){const n=e[e.length-1];pe(t.getId()!==void 0,"Features must have an id set");const i=n.version,a=n.featureType,o=n.featurePrefix,s=n.featureNS,l=EP(o,a),u=t.getGeometryName();r.setAttribute("typeName",l),r.setAttributeNS(SP,"xmlns:"+o,s);const h=t.getId();if(h!==void 0){const c=t.getKeys(),f=[];for(let d=0,g=c.length;d<g;d++){const p=t.get(c[d]);if(p!==void 0){let v=c[d];p&&typeof p.getSimplifiedGeometry=="function"&&(v=u),f.push({name:v,value:p})}}re({version:i,gmlVersion:n.gmlVersion,node:r,hasZ:n.hasZ,srsName:n.srsName},K7,Mr("Property"),f,e),Q7(r,h,e)}}function hk(r,t,e){const n=e[e.length-1],i=n.version,a=sA[i],s=ie(a,i==="2.0.0"?"ValueReference":"Name"),l=n.gmlVersion;if(r.appendChild(s),Qt(s,t.name),t.value!==void 0&&t.value!==null){const u=ie(a,"Value");r.appendChild(u),t.value&&typeof t.value.getSimplifiedGeometry=="function"?l===2?we.prototype.writeGeometryElement(u,t.value,e):l===3?dt.prototype.writeGeometryElement(u,t.value,e):Ge.prototype.writeGeometryElement(u,t.value,e):Qt(u,t.value)}}function ck(r,t,e){t.vendorId&&r.setAttribute("vendorId",t.vendorId),t.safeToIgnore!==void 0&&r.setAttribute("safeToIgnore",String(t.safeToIgnore)),t.value!==void 0&&Qt(r,t.value)}const Cw={"http://www.opengis.net/wfs":{Query:z(fk)},"http://www.opengis.net/wfs/2.0":{Query:z(fk)},"http://www.opengis.net/ogc":{During:z(pk),And:z(X0),Or:z(X0),Not:z(vk),BBOX:z(dk),Contains:z(Vl),Intersects:z(Vl),Within:z(Vl),DWithin:z(gk),PropertyIsEqualTo:z(ma),PropertyIsNotEqualTo:z(ma),PropertyIsLessThan:z(ma),PropertyIsLessThanOrEqualTo:z(ma),PropertyIsGreaterThan:z(ma),PropertyIsGreaterThanOrEqualTo:z(ma),PropertyIsNull:z(mk),PropertyIsBetween:z(yk),PropertyIsLike:z(_k)},"http://www.opengis.net/fes/2.0":{During:z(pk),And:z(X0),Or:z(X0),Not:z(vk),BBOX:z(dk),Contains:z(Vl),Disjoint:z(Vl),Intersects:z(Vl),ResourceId:z(Lmt),Within:z(Vl),DWithin:z(gk),PropertyIsEqualTo:z(ma),PropertyIsNotEqualTo:z(ma),PropertyIsLessThan:z(ma),PropertyIsLessThanOrEqualTo:z(ma),PropertyIsGreaterThan:z(ma),PropertyIsGreaterThanOrEqualTo:z(ma),PropertyIsNull:z(mk),PropertyIsBetween:z(yk),PropertyIsLike:z(_k)}};function fk(r,t,e){const n=e[e.length-1],i=n.version,a=n.featurePrefix,o=n.featureNS,s=n.propertyNames,l=n.srsName;let u;a?u=EP(a,t):u=t;let h;i==="2.0.0"?h="typeNames":h="typeName",r.setAttribute(h,u),l&&r.setAttribute("srsName",l),o&&r.setAttributeNS(SP,"xmlns:"+a,o);const c=Object.assign({},n);c.node=r,re(c,Cmt,Mr("PropertyName"),s,e);const f=n.filter;if(f){const d=ie(Mw(i),"Filter");r.appendChild(d),Pmt(d,f,e)}}function Pmt(r,t,e){const n=e[e.length-1],i={node:r};Object.assign(i,{context:n}),re(i,Cw,Mr(t.getTagName()),[t],e)}function dk(r,t,e){const n=e[e.length-1],a=n.context.version;n.srsName=t.srsName;const o=bP[a];Vg(a,r,t.geometryName),o.prototype.writeGeometryElement(r,t.extent,e)}function Lmt(r,t,e){r.setAttribute("rid",t.rid)}function Vl(r,t,e){const n=e[e.length-1],a=n.context.version;n.srsName=t.srsName;const o=bP[a];Vg(a,r,t.geometryName),o.prototype.writeGeometryElement(r,t.geometry,e)}function gk(r,t,e){const a=e[e.length-1].context.version;Vl(r,t,e);const o=ie(Mw(a),"Distance");Qt(o,t.distance.toString()),a==="2.0.0"?o.setAttribute("uom",t.unit):o.setAttribute("units",t.unit),r.appendChild(o)}function pk(r,t,e){const a=e[e.length-1].context.version;Rx(TP[a],"ValueReference",r,t.propertyName);const o=ie(qs,"TimePeriod");r.appendChild(o);const s=ie(qs,"begin");o.appendChild(s),xk(s,t.begin);const l=ie(qs,"end");o.appendChild(l),xk(l,t.end)}function X0(r,t,e){const i=e[e.length-1].context,a={node:r};Object.assign(a,{context:i});const o=t.conditions;for(let s=0,l=o.length;s<l;++s){const u=o[s];re(a,Cw,Mr(u.getTagName()),[u],e)}}function vk(r,t,e){const i=e[e.length-1].context,a={node:r};Object.assign(a,{context:i});const o=t.condition;re(a,Cw,Mr(o.getTagName()),[o],e)}function ma(r,t,e){const a=e[e.length-1].context.version;t.matchCase!==void 0&&r.setAttribute("matchCase",t.matchCase.toString()),Vg(a,r,t.propertyName),Px(a,r,""+t.expression)}function mk(r,t,e){const a=e[e.length-1].context.version;Vg(a,r,t.propertyName)}function yk(r,t,e){const a=e[e.length-1].context.version,o=Mw(a);Vg(a,r,t.propertyName);const s=ie(o,"LowerBoundary");r.appendChild(s),Px(a,s,""+t.lowerBoundary);const l=ie(o,"UpperBoundary");r.appendChild(l),Px(a,l,""+t.upperBoundary)}function _k(r,t,e){const a=e[e.length-1].context.version;r.setAttribute("wildCard",t.wildCard),r.setAttribute("singleChar",t.singleChar),r.setAttribute("escapeChar",t.escapeChar),t.matchCase!==void 0&&r.setAttribute("matchCase",t.matchCase.toString()),Vg(a,r,t.propertyName),Px(a,r,""+t.pattern)}function Rx(r,t,e,n){const i=ie(r,t);Qt(i,n),e.appendChild(i)}function Px(r,t,e){Rx(Mw(r),"Literal",t,e)}function Vg(r,t,e){r==="2.0.0"?Rx(TP[r],"ValueReference",t,e):Rx(wP[r],"PropertyName",t,e)}function xk(r,t){const e=ie(qs,"TimeInstant");r.appendChild(e);const n=ie(qs,"timePosition");e.appendChild(n),Qt(n,t)}function Sk(r,t,e){const n=e[e.length-1],i=Object.assign({},n);i.node=r,re(i,Cw,Mr("Query"),t,e)}function Mw(r){let t;return r==="2.0.0"?t=TP[r]:t=wP[r],t}const Je={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class wk{constructor(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(t){return this.view_.getUint32((this.pos_+=4)-4,t!==void 0?t:this.isLittleEndian_)}readDouble(t){return this.view_.getFloat64((this.pos_+=8)-8,t!==void 0?t:this.isLittleEndian_)}readPoint(){const t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t}readLineString(){const t=this.readUint32(),e=[];for(let n=0;n<t;n++)e.push(this.readPoint());return e}readPolygon(){const t=this.readUint32(),e=[];for(let n=0;n<t;n++)e.push(this.readLineString());return e}readWkbHeader(t){const n=this.readUint8()>0,i=this.readUint32(n),a=Math.floor((i&268435455)/1e3),o=!!(i&2147483648)||a===1||a===3,s=!!(i&1073741824)||a===2||a===3,l=!!(i&536870912),u=(i&268435455)%1e3,h=["XY",o?"Z":"",s?"M":""].join(""),c=l?this.readUint32(n):null;if(t!==void 0&&t!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==n)throw new Error("Inconsistent endian");if(this.layout_!==h)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=n,this.hasZ_=o,this.hasM_=s,this.layout_=h,this.srid_=c,this.initialized_=!0;return u}readWkbPayload(t){switch(t){case Je.POINT:return this.readPoint();case Je.LINE_STRING:return this.readLineString();case Je.POLYGON:case Je.TRIANGLE:return this.readPolygon();case Je.MULTI_POINT:return this.readMultiPoint();case Je.MULTI_LINE_STRING:return this.readMultiLineString();case Je.MULTI_POLYGON:case Je.POLYHEDRAL_SURFACE:case Je.TIN:return this.readMultiPolygon();case Je.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}}readWkbBlock(t){return this.readWkbPayload(this.readWkbHeader(t))}readWkbCollection(t,e){const n=this.readUint32(),i=[];for(let a=0;a<n;a++){const o=t.call(this,e);o&&i.push(o)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,Je.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,Je.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,Je.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const t=this.readWkbHeader(),e=this.readWkbPayload(t);switch(t){case Je.POINT:return new rr(e,this.layout_);case Je.LINE_STRING:return new ke(e,this.layout_);case Je.POLYGON:case Je.TRIANGLE:return new Kr(e,this.layout_);case Je.MULTI_POINT:return new fa(e,this.layout_);case Je.MULTI_LINE_STRING:return new Dn(e,this.layout_);case Je.MULTI_POLYGON:case Je.POLYHEDRAL_SURFACE:case Je.TIN:return new yi(e,this.layout_);case Je.GEOMETRY_COLLECTION:return new zr(e);default:return null}}getSrid(){return this.srid_}}class Dmt{constructor(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=t.littleEndian!==!1,this.isEWKB_=t.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}writeUint8(t){this.writeQueue_.push([1,t])}writeUint32(t){this.writeQueue_.push([4,t])}writeDouble(t){this.writeQueue_.push([8,t])}writePoint(t,e){const n=Object.assign.apply(null,e.split("").map((i,a)=>({[i]:t[a]})));for(const i of this.layout_)this.writeDouble(i in n?n[i]:this.nodata_[i])}writeLineString(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writePoint(t[n],e)}writePolygon(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeLineString(t[n],e)}writeWkbHeader(t,e){t%=1e3,this.layout_.includes("Z")&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(e)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(e)&&this.writeUint32(e)}writeMultiPoint(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(1),this.writePoint(t[n],e)}writeMultiLineString(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(2),this.writeLineString(t[n],e)}writeMultiPolygon(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(3),this.writePolygon(t[n],e)}writeGeometryCollection(t){this.writeUint32(t.length);for(let e=0;e<t.length;e++)this.writeGeometry(t[e])}findMinimumLayout(t,e="XYZM"){const n=(i,a)=>i===a?i:i==="XYZM"?a:a==="XYZM"?i:"XY";if(t instanceof ls)return n(t.getLayout(),e);if(t instanceof zr){const i=t.getGeometriesArray();for(let a=0;a<i.length&&e!=="XY";a++)e=this.findMinimumLayout(i[a],e)}return e}writeGeometry(t,e){const n={Point:Je.POINT,LineString:Je.LINE_STRING,Polygon:Je.POLYGON,MultiPoint:Je.MULTI_POINT,MultiLineString:Je.MULTI_LINE_STRING,MultiPolygon:Je.MULTI_POLYGON,GeometryCollection:Je.GEOMETRY_COLLECTION},i=t.getType(),a=n[i];if(!a)throw new Error("GeometryType "+i+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(a,e),t instanceof ls?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[i].call(this,t.getCoordinates(),t.getLayout()):t instanceof zr&&this.writeGeometryCollection(t.getGeometriesArray())}getBuffer(){const t=this.writeQueue_.reduce((a,o)=>a+o[0],0),e=new ArrayBuffer(t),n=new DataView(e);let i=0;return this.writeQueue_.forEach(a=>{switch(a[0]){case 1:n.setUint8(i,a[1]);break;case 4:n.setUint32(i,a[1],this.isLittleEndian_);break;case 8:n.setFloat64(i,a[1],this.isLittleEndian_);break}i+=a[0]}),e}}class Omt extends Gy{constructor(t){super(),t=t||{},this.splitCollection=!!t.splitCollection,this.viewCache_=null,this.hex_=t.hex!==!1,this.littleEndian_=t.littleEndian!==!1,this.ewkb_=t.ewkb!==!1,this.layout_=t.geometryLayout,this.nodataZ_=t.nodataZ||0,this.nodataM_=t.nodataM||0,this.srid_=t.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(t,e){return new Le({geometry:this.readGeometry(t,e)})}readFeatures(t,e){let n=[];const i=this.readGeometry(t,e);return this.splitCollection&&i instanceof zr?n=i.getGeometriesArray():n=[i],n.map(a=>new Le({geometry:a}))}readGeometry(t,e){const n=Tk(t);if(!n)return null;const a=new wk(n).readGeometry();return this.viewCache_=n,e=this.getReadOptions(t,e),this.viewCache_=null,Sr(a,!1,e)}readProjection(t){const e=this.viewCache_||Tk(t);if(!e)return;const n=new wk(e);return n.readWkbHeader(),n.getSrid()&&Xt("EPSG:"+n.getSrid())||void 0}writeFeature(t,e){return this.writeGeometry(t.getGeometry(),e)}writeFeatures(t,e){return this.writeGeometry(new zr(t.map(n=>n.getGeometry())),e)}writeGeometry(t,e){e=this.adaptOptions(e);const n=new Dmt({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const o=e.dataProjection&&Xt(e.dataProjection);if(o){const s=o.getCode();s.startsWith("EPSG:")&&(i=Number(s.substring(5)))}}n.writeGeometry(Sr(t,!0,e),i);const a=n.getBuffer();return this.hex_?Nmt(a):a}}function Nmt(r){const t=new Uint8Array(r);return Array.from(t.values()).map(e=>(e<16?"0":"")+Number(e).toString(16).toUpperCase()).join("")}function Fmt(r){const t=new Uint8Array(r.length/2);for(let e=0;e<r.length/2;e++)t[e]=parseInt(r.substr(e*2,2),16);return new DataView(t.buffer)}function Tk(r){return typeof r=="string"?Fmt(r):ArrayBuffer.isView(r)?r instanceof DataView?r:new DataView(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new DataView(r):null}const kmt={POINT:rr,LINESTRING:ke,POLYGON:Kr,MULTIPOINT:fa,MULTILINESTRING:Dn,MULTIPOLYGON:yi},t9="EMPTY",e9="Z",r9="M",Gmt="ZM",Ze={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},Bmt={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class zmt{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return e=e!==void 0?e:!1,t>="0"&&t<="9"||t=="."&&!e}isWhiteSpace_(t){return t==" "||t=="	"||t=="\r"||t==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let n=t,i;if(t=="(")i=Ze.LEFT_PAREN;else if(t==",")i=Ze.COMMA;else if(t==")")i=Ze.RIGHT_PAREN;else if(this.isNumeric_(t)||t=="-")i=Ze.NUMBER,n=this.readNumber_();else if(this.isAlpha_(t))i=Ze.TEXT,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t==="")i=Ze.EOF;else throw new Error("Unexpected character: "+t)}return{position:e,value:n,type:i}}readNumber_(){let t;const e=this.index_;let n=!1,i=!1;do t=="."?n=!0:(t=="e"||t=="E")&&(i=!0),t=this.nextChar_();while(this.isNumeric_(t,n)||!i&&(t=="e"||t=="E")||i&&(t=="-"||t=="+"));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do t=this.nextChar_();while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class Vmt{constructor(t){this.lexer_=t,this.token_={position:0,type:Ze.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY";const e=this.token_;if(this.isTokenType(Ze.TEXT)){const n=e.value;n===e9?t="XYZ":n===r9?t="XYM":n===Gmt&&(t="XYZM"),t!=="XY"&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(Ze.LEFT_PAREN)){const t=[];do t.push(this.parseGeometry_());while(this.match(Ze.COMMA));if(this.match(Ze.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Ze.LEFT_PAREN)){const t=this.parsePoint_();if(this.match(Ze.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Ze.LEFT_PAREN)){const t=this.parsePointList_();if(this.match(Ze.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Ze.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(Ze.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Ze.LEFT_PAREN)){let t;if(this.token_.type==Ze.LEFT_PAREN?t=this.parsePointTextList_():t=this.parsePointList_(),this.match(Ze.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Ze.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(Ze.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Ze.LEFT_PAREN)){const t=this.parsePolygonTextList_();if(this.match(Ze.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let n=0;n<e;++n){const i=this.token_;if(this.match(Ze.NUMBER))t.push(i.value);else break}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(Ze.COMMA);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(Ze.COMMA);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(Ze.COMMA);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(Ze.COMMA);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(Ze.TEXT)&&this.token_.value==t9;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.token_;if(this.match(Ze.TEXT)){const e=t.value;this.layout_=this.parseGeometryLayout_();const n=this.isEmptyGeometry_();if(e=="GEOMETRYCOLLECTION"){if(n)return new zr([]);const o=this.parseGeometryCollectionText_();return new zr(o)}const i=kmt[e];if(!i)throw new Error("Invalid geometry type: "+e);let a;if(n)e=="POINT"?a=[NaN,NaN]:a=[];else switch(e){case"POINT":{a=this.parsePointText_();break}case"LINESTRING":{a=this.parseLineStringText_();break}case"POLYGON":{a=this.parsePolygonText_();break}case"MULTIPOINT":{a=this.parseMultiPointText_();break}case"MULTILINESTRING":{a=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{a=this.parseMultiPolygonText_();break}}return new i(a,this.layout_)}throw new Error(this.formatErrorMessage_())}}class Umt extends pP{constructor(t){super(),t=t||{},this.splitCollection_=t.splitCollection!==void 0?t.splitCollection:!1}parse_(t){const e=new zmt(t);return new Vmt(e).parse()}readFeatureFromText(t,e){const n=this.readGeometryFromText(t,e),i=new Le;return i.setGeometry(n),i}readFeaturesFromText(t,e){let n=[];const i=this.readGeometryFromText(t,e);this.splitCollection_&&i.getType()=="GeometryCollection"?n=i.getGeometriesArray():n=[i];const a=[];for(let o=0,s=n.length;o<s;++o){const l=new Le;l.setGeometry(n[o]),a.push(l)}return a}readGeometryFromText(t,e){const n=this.parse_(t);return Sr(n,!1,e)}writeFeatureText(t,e){const n=t.getGeometry();return n?this.writeGeometryText(n,e):""}writeFeaturesText(t,e){if(t.length==1)return this.writeFeatureText(t[0],e);const n=[];for(let a=0,o=t.length;a<o;++a)n.push(t[a].getGeometry());const i=new zr(n);return this.writeGeometryText(i,e)}writeGeometryText(t,e){return a9(Sr(t,!0,e))}}function n9(r){const t=r.getCoordinates();return t.length===0?"":t.join(" ")}function Wmt(r){const t=[],e=r.getPoints();for(let n=0,i=e.length;n<i;++n)t.push("("+n9(e[n])+")");return t.join(",")}function Hmt(r){const t=[],e=r.getGeometries();for(let n=0,i=e.length;n<i;++n)t.push(a9(e[n]));return t.join(",")}function CP(r){const t=r.getCoordinates(),e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].join(" "));return e.join(",")}function $mt(r){const t=[],e=r.getLineStrings();for(let n=0,i=e.length;n<i;++n)t.push("("+CP(e[n])+")");return t.join(",")}function i9(r){const t=[],e=r.getLinearRings();for(let n=0,i=e.length;n<i;++n)t.push("("+CP(e[n])+")");return t.join(",")}function Ymt(r){const t=[],e=r.getPolygons();for(let n=0,i=e.length;n<i;++n)t.push("("+i9(e[n])+")");return t.join(",")}function Xmt(r){const t=r.getLayout();let e="";return(t==="XYZ"||t==="XYZM")&&(e+=e9),(t==="XYM"||t==="XYZM")&&(e+=r9),e}const Zmt={Point:n9,LineString:CP,Polygon:i9,MultiPoint:Wmt,MultiLineString:$mt,MultiPolygon:Ymt,GeometryCollection:Hmt};function a9(r){const t=r.getType(),e=Zmt[t],n=e(r);let i=Bmt[t];if(typeof r.getFlatCoordinates=="function"){const a=Xmt(r);a.length>0&&(i+=" "+a)}return n.length===0?i+" "+t9:i+"("+n+")"}const kn=[null,"http://www.opengis.net/wms"],jmt=it(kn,{Service:G(vyt),Capability:G(pyt)}),Kmt=it(kn,{Request:G(Tyt),Exception:G(xyt),Layer:G(Syt)});class qmt extends _P{constructor(){super(),this.version=void 0}readFromNode(t){this.version=t.getAttribute("version").trim();const e=st({version:this.version},jmt,t,[]);return e||null}}const Jmt=it(kn,{Name:G(ht),Title:G(ht),Abstract:G(ht),KeywordList:G(u9),OnlineResource:G(zg),ContactInformation:G(myt),Fees:G(ht),AccessConstraints:G(ht),LayerLimit:G(Pr),MaxWidth:G(Pr),MaxHeight:G(Pr)}),Qmt=it(kn,{ContactPersonPrimary:G(yyt),ContactPosition:G(ht),ContactAddress:G(_yt),ContactVoiceTelephone:G(ht),ContactFacsimileTelephone:G(ht),ContactElectronicMailAddress:G(ht)}),tyt=it(kn,{ContactPerson:G(ht),ContactOrganization:G(ht)}),eyt=it(kn,{AddressType:G(ht),Address:G(ht),City:G(ht),StateOrProvince:G(ht),PostCode:G(ht),Country:G(ht)}),ryt=it(kn,{Format:kt(ht)}),o9=it(kn,{Name:G(ht),Title:G(ht),Abstract:G(ht),KeywordList:G(u9),CRS:fr(ht),EX_GeographicBoundingBox:G(gyt),BoundingBox:fr(dyt),Dimension:fr(wyt),Attribution:G(fyt),AuthorityURL:fr(Cyt),Identifier:fr(ht),MetadataURL:fr(Myt),DataURL:fr(ol),FeatureListURL:fr(ol),Style:fr(Ayt),MinScaleDenominator:G(Ce),MaxScaleDenominator:G(Ce),Layer:fr(s9)}),nyt=it(kn,{Title:G(ht),OnlineResource:G(zg),LogoURL:G(l9)}),iyt=it(kn,{westBoundLongitude:G(Ce),eastBoundLongitude:G(Ce),southBoundLatitude:G(Ce),northBoundLatitude:G(Ce)}),ayt=it(kn,{GetCapabilities:G(xb),GetMap:G(xb),GetFeatureInfo:G(xb)}),oyt=it(kn,{Format:fr(ht),DCPType:fr(byt)}),syt=it(kn,{HTTP:G(Eyt)}),lyt=it(kn,{Get:G(ol),Post:G(ol)}),uyt=it(kn,{Name:G(ht),Title:G(ht),Abstract:G(ht),LegendURL:fr(l9),StyleSheetURL:G(ol),StyleURL:G(ol)}),hyt=it(kn,{Format:G(ht),OnlineResource:G(zg)}),cyt=it(kn,{Keyword:kt(ht)});function fyt(r,t){return st({},nyt,r,t)}function dyt(r,t){const e=[Gs(r.getAttribute("minx")),Gs(r.getAttribute("miny")),Gs(r.getAttribute("maxx")),Gs(r.getAttribute("maxy"))],n=[Gs(r.getAttribute("resx")),Gs(r.getAttribute("resy"))];return{crs:r.getAttribute("CRS"),extent:e,res:n}}function gyt(r,t){const e=st({},iyt,r,t);if(!e)return;const n=e.westBoundLongitude,i=e.southBoundLatitude,a=e.eastBoundLongitude,o=e.northBoundLatitude;if(!(n===void 0||i===void 0||a===void 0||o===void 0))return[n,i,a,o]}function pyt(r,t){return st({},Kmt,r,t)}function vyt(r,t){return st({},Jmt,r,t)}function myt(r,t){return st({},Qmt,r,t)}function yyt(r,t){return st({},tyt,r,t)}function _yt(r,t){return st({},eyt,r,t)}function xyt(r,t){return st([],ryt,r,t)}function Syt(r,t){const e=st({},o9,r,t);return e.Layer===void 0?Object.assign(e,s9(r,t)):e}function s9(r,t){const e=t[t.length-1],n=st({},o9,r,t);if(!n)return;let i=_c(r.getAttribute("queryable"));i===void 0&&(i=e.queryable),n.queryable=i!==void 0?i:!1;let a=Us(r.getAttribute("cascaded"));a===void 0&&(a=e.cascaded),n.cascaded=a;let o=_c(r.getAttribute("opaque"));o===void 0&&(o=e.opaque),n.opaque=o!==void 0?o:!1;let s=_c(r.getAttribute("noSubsets"));s===void 0&&(s=e.noSubsets),n.noSubsets=s!==void 0?s:!1;let l=Gs(r.getAttribute("fixedWidth"));l||(l=e.fixedWidth),n.fixedWidth=l;let u=Gs(r.getAttribute("fixedHeight"));return u||(u=e.fixedHeight),n.fixedHeight=u,["Style","CRS","AuthorityURL"].forEach(function(f){if(f in e){const d=n[f]||[];n[f]=d.concat(e[f])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(f){if(!(f in n)){const d=e[f];n[f]=d}}),n}function wyt(r,t){return{name:r.getAttribute("name"),units:r.getAttribute("units"),unitSymbol:r.getAttribute("unitSymbol"),default:r.getAttribute("default"),multipleValues:_c(r.getAttribute("multipleValues")),nearestValue:_c(r.getAttribute("nearestValue")),current:_c(r.getAttribute("current")),values:ht(r)}}function ol(r,t){return st({},hyt,r,t)}function Tyt(r,t){return st({},ayt,r,t)}function byt(r,t){return st({},syt,r,t)}function Eyt(r,t){return st({},lyt,r,t)}function xb(r,t){return st({},oyt,r,t)}function l9(r,t){const e=ol(r,t);if(e){const n=[Us(r.getAttribute("width")),Us(r.getAttribute("height"))];return e.size=n,e}}function Cyt(r,t){const e=ol(r,t);if(e)return e.name=r.getAttribute("name"),e}function Myt(r,t){const e=ol(r,t);if(e)return e.type=r.getAttribute("type"),e}function Ayt(r,t){return st({},uyt,r,t)}function u9(r,t){return st([],cyt,r,t)}const Iyt="_feature",Ryt="_layer";class Pyt extends zy{constructor(t){super(),t=t||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new we,this.layers_=t.layers?t.layers:null}getLayers(){return this.layers_}setLayers(t){this.layers_=t}readFeatures_(t,e){t.setAttribute("namespaceURI",this.featureNS_);const n=t.localName;let i=[];if(t.childNodes.length===0)return i;if(n=="msGMLOutput")for(let a=0,o=t.childNodes.length;a<o;a++){const s=t.childNodes[a];if(s.nodeType!==Node.ELEMENT_NODE)continue;const l=s,u=e[0],h=Ryt,c=l.localName.replace(h,"");if(this.layers_&&!this.layers_.includes(c))continue;const f=c+Iyt;u.featureType=f,u.featureNS=this.featureNS_;const d={};d[f]=kt(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const g=it([u.featureNS,null],d);l.setAttribute("namespaceURI",this.featureNS_);const p=st([],g,l,e,this.gmlFormat_);p&&Ne(i,p)}if(n=="FeatureCollection"){const a=st([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);a&&(i=a)}return i}readFeaturesFromNode(t,e){const n={};return e&&Object.assign(n,this.getReadOptions(t,e)),this.readFeatures_(t,[n])}}const ms=[null,"http://www.opengis.net/wmts/1.0"],Ug=[null,"http://www.opengis.net/ows/1.1"],Lyt=it(ms,{Contents:G(Wyt)});class Dyt extends _P{constructor(){super(),this.owsParser_=new X7}readFromNode(t){let e=t.getAttribute("version");e&&(e=e.trim());let n=this.owsParser_.readFromNode(t);return n?(n.version=e,n=st(n,Lyt,t,[]),n||null):null}}const Oyt=it(ms,{Layer:fr(Hyt),TileMatrixSet:fr($yt)}),Nyt=it(ms,{Style:fr(Yyt),Format:fr(ht),TileMatrixSetLink:fr(Xyt),Dimension:fr(Zyt),ResourceURL:fr(jyt)},it(Ug,{Title:G(ht),Abstract:G(ht),WGS84BoundingBox:G(c9),BoundingBox:fr(Kyt),Identifier:G(ht)})),Fyt=it(ms,{LegendURL:fr(qyt)},it(Ug,{Title:G(ht),Identifier:G(ht)})),kyt=it(ms,{TileMatrixSet:G(ht),TileMatrixSetLimits:G(Qyt)}),Gyt=it(ms,{TileMatrixLimits:kt(t0t)}),Byt=it(ms,{TileMatrix:G(ht),MinTileRow:G(Pr),MaxTileRow:G(Pr),MinTileCol:G(Pr),MaxTileCol:G(Pr)}),zyt=it(ms,{Default:G(ht),Value:fr(ht)},it(Ug,{Identifier:G(ht)})),h9=it(Ug,{LowerCorner:kt(lA),UpperCorner:kt(lA)}),Vyt=it(ms,{WellKnownScaleSet:G(ht),TileMatrix:fr(Jyt)},it(Ug,{SupportedCRS:G(ht),Identifier:G(ht),BoundingBox:G(c9)})),Uyt=it(ms,{TopLeftCorner:G(lA),ScaleDenominator:G(Ce),TileWidth:G(Pr),TileHeight:G(Pr),MatrixWidth:G(Pr),MatrixHeight:G(Pr)},it(Ug,{Identifier:G(ht)}));function Wyt(r,t){return st({},Oyt,r,t)}function Hyt(r,t){return st({},Nyt,r,t)}function $yt(r,t){return st({},Vyt,r,t)}function Yyt(r,t){const e=st({},Fyt,r,t);if(!e)return;const n=r.getAttribute("isDefault")==="true";return e.isDefault=n,e}function Xyt(r,t){return st({},kyt,r,t)}function Zyt(r,t){return st({},zyt,r,t)}function jyt(r,t){const e=r.getAttribute("format"),n=r.getAttribute("template"),i=r.getAttribute("resourceType"),a={};return e&&(a.format=e),n&&(a.template=n),i&&(a.resourceType=i),a}function c9(r,t){const e=st([],h9,r,t);if(e.length==2)return rn(e)}function Kyt(r,t){const e=r.getAttribute("crs"),n=st([],h9,r,t);if(n.length==2)return{extent:rn(n),crs:e}}function qyt(r,t){const e={};return e.format=r.getAttribute("format"),e.href=zg(r),e}function lA(r,t){const e=ht(r).split(/\s+/);if(!e||e.length!=2)return;const n=+e[0],i=+e[1];if(!(isNaN(n)||isNaN(i)))return[n,i]}function Jyt(r,t){return st({},Uyt,r,t)}function Qyt(r,t){return st([],Gyt,r,t)}function t0t(r,t){return st({},Byt,r,t)}const e0t=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:Vft,GML:hP,GPX:Ddt,GeoJSON:_d,IGC:pgt,IIIFInfo:cft,KML:Egt,MVT:mvt,OWS:X7,Polyline:Jvt,TopoJSON:lmt,WFS:J7,WKB:Omt,WKT:Umt,WMSCapabilities:qmt,WMSGetFeatureInfo:Pyt,WMTSCapabilities:Dyt},Symbol.toStringTag,{value:"Module"})),r0t=r=>{if(!r)return new ha({radius:2});const t={radius:r.radius||2,fill:new Ee(r.fill||{color:"blue"}),stroke:new or(r.stroke||{color:"white"})};return new ha(t)},n0t=r=>{const t={font:"14px sans-serif",padding:[2,5,2,5],...r},e=new Kn(t);if(r.text&&e.setText(r.text),Xr(r,"fill")){const n=new Ee(r.fill);e.setFill(n)}if(Xr(r,"backgroundFill")){const n=new Ee(r.backgroundFill);e.setBackgroundFill(n)}if(Xr(r,"stroke")){const n=new or(r.stroke);e.setStroke(n)}if(Xr(r,"backgroundStroke")){const n=new or(r.backgroundStroke);e.setBackgroundStroke(n)}return e},$h=r=>{var e,n;const t=new Te;if(Xr(r,"fill")?t.setFill(new Ee(r.fill)):t.setFill(new Ee({color:"rgba(67,126,255,0.15)"})),Xr(r,"stroke")?t.setStroke(new or(r.stroke)):t.setStroke(new or({color:"rgba(67,126,255,1)",width:1})),Xr(r,"icon")&&t.setImage(new ia(r.icon)),Xr(r,"circle")){const i=r0t(r.circle);t.setImage(i)}if(Xr(r,"text")){const i=r.text;if(i){const a=n0t(i);t.setText(a)}}if(Xr(r,"shape")){let i,a;if(Xr(r.shape,"fill")&&(i=new Ee((e=r.shape)==null?void 0:e.fill)),Xr(r.shape,"stroke")&&(a=new or((n=r.shape)==null?void 0:n.stroke)),r.shape){const o={...r.shape,stroke:a,fill:i},s=new Oc(o);t.setImage(s)}}return t},m1=(r,t,e)=>{const n=$h(t);r.setStyle(n),Xr(t,"styleFunction")?r.setStyle(function(i,a){return t.styleFunction&&t.styleFunction(i,a,e,n)}):r.setStyle(n)},f9=Wr({__name:"index",props:{layerId:{default:`vector-layer-${Gc()}`},source:{default:void 0},layerStyle:{default:()=>GW()},featureStyle:{default:void 0},modify:{type:Boolean,default:!1},className:{},opacity:{},visible:{type:Boolean,default:!0},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},renderOrder:{},renderBuffer:{},map:{},declutter:{type:[String,Number,Boolean]},background:{},updateWhileAnimating:{type:Boolean},updateWhileInteracting:{type:Boolean},properties:{}},emits:["singleclick","pointermove","sourceready","featuresloadend","featuresloadstart","addfeature","modifyend","modifystart","change"],setup(r,{expose:t,emit:e}){const n=r,i=$e("VMap"),a=qt(i).map;let o=Er(),s=Er(),l=ir([]);const u=["singleclick","pointermove"],h=e;let c=ir(!1),f=Er(void 0);ns("ParentLayer",o),Kc(()=>{kg(o.value,n)}),He(()=>n.visible,b=>{var E;o.value&&((E=f.value)==null||E.setActive(b))}),He(()=>n.layerStyle,b=>{var E;(E=o.value)==null||E.setStyle(b)},{deep:!0}),He(()=>n.source,()=>{var b;(b=s.value)==null||b.clear(),o.value&&a.removeLayer(o.value),m()});const d=a.getView().getProjection().getMetersPerUnit(),g=b=>{b.on("modifyend",E=>{h("modifyend",{...E,metersPerUnit:d})}),b.on("modifystart",E=>{h("modifystart",{...E,metersPerUnit:d})})},p=()=>{o&&n.modify&&(f.value=new E2({hitDetection:o.value,source:s.value}),a.addInteraction(f.value),g(f.value))},v=()=>{var b,E,C,M,A,R,P,L,D,k,F,B,V,Y,q,lt,X,St;if((b=n.source)!=null&&b.featureFormat){if((E=n.source)!=null&&E.url&&(((C=n.source)==null?void 0:C.featureFormat)==="GeoJSON"||((M=n.source)==null?void 0:M.featureFormat)==="EsriJSON"||((A=n.source)==null?void 0:A.featureFormat)==="TopoJSON")){let mt={dataProjection:void 0,featureProjection:void 0};return((P=(R=n.source)==null?void 0:R.formatOptions)!=null&&P.dataProjection||(D=(L=n.source)==null?void 0:L.formatOptions)!=null&&D.featureProjection)&&((F=(k=n.source)==null?void 0:k.formatOptions)!=null&&F.dataProjection&&(mt.dataProjection=new zi((V=(B=n.source)==null?void 0:B.formatOptions)==null?void 0:V.dataProjection)),(q=(Y=n.source)==null?void 0:Y.formatOptions)!=null&&q.featureProjection&&(mt.featureProjection=new zi((X=(lt=n.source)==null?void 0:lt.formatOptions)==null?void 0:X.featureProjection))),new Na({url:n.source.url,format:new e0t[(St=n.source)==null?void 0:St.featureFormat]({...n.source.formatOptions,...mt})})}}else return new Na(n.source)},m=()=>{var E;s.value=v(),(E=s.value)==null||E.on("addfeature",C=>{h("addfeature",C)});const b=n.layerStyle;!b||Object.keys(b).length,n.featureStyle?o.value=new Pa({...n,source:s.value,style:C=>m1(C,n.featureStyle,a)}):o.value=new Pa({...n,source:s.value,style:b}),o.value.set("id",n.layerId),a.addLayer(o.value),u.forEach(C=>{l.value.push(a.on(C,M=>{y(C,M)}))}),o.value.on("sourceready",C=>{c.value=!0,h("sourceready",C)}),s.value&&setTimeout(()=>{p()},0)},y=(b,E)=>{const{pixel:C}=E,M=_(C);({...E},h(b,E,M))},_=b=>a.forEachFeatureAtPixel(b,E=>E,{layerFilter:E=>{var C;return E.get("id")===((C=o.value)==null?void 0:C.get("id"))}}),x=()=>{l.value.forEach(b=>{Cu(b)})},w=b=>{var E;return(E=s.value)==null?void 0:E.getFeatureById(b)};return t({getFeatureById:w,removeFeatureById:b=>{var C;const E=w(b);E&&((C=s.value)==null||C.removeFeature(E))},getSource:()=>s.value,getLayer:()=>o.value}),fn(()=>{m()}),jc(()=>{x()}),(b,E)=>qt(c)?Ya(b.$slots,"default",{key:0}):Xu("",!0)}}),i0t=Wr({__name:"index",props:{options:{default:()=>({featureNS:"",featurePrefix:"",featureTypes:[],outputFormat:"application/json",maxFeatures:1/0})}},setup(r){const t=$e("ParentLayer"),e=r,n=()=>{const i=new J7().writeGetFeature({...e.options,outputFormat:"application/json"});fetch(e.options.featureNS,{method:"POST",body:new XMLSerializer().serializeToString(i)}).then(function(a){return a.json()}).then(a=>{var s;const o=new _d().readFeatures(a);if(t&&qt(t)){const l=(s=qt(t))==null?void 0:s.getSource();l&&l.addFeatures(o)}})};return fn(()=>{n()}),(i,a)=>Ya(i.$slots,"default")}}),a0t=Wr({__name:"index",props:{tileGrid:{},attributions:{},attributionsCollapsible:{type:Boolean},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean},params:{},gutter:{},hidpi:{type:Boolean},projection:{},reprojectionErrorThreshold:{},tileClass:{},serverType:{},tileLoadFunction:{},url:{},urls:{},wrapX:{type:Boolean},transition:{},zDirection:{},imageLoadFunction:{},ratio:{},resolutions:{}},emits:["singleclick"],setup(r,{emit:t}){const e=$e("VMap"),n=qt(e).map,i=$e("ParentTileLayer"),a=r,o=t,s=()=>{var l;if(i.value){const u=(l=i.value)==null?void 0:l.get("layerTypeName");let h,c;if(a.tileGrid&&(h=new Og(a.tileGrid)),u==="ImageLayer"){const f={...a,tileGrid:h};c=new _ft(f),i.value.setSource(c)}else if(u==="TileLayer"){const f={...a,tileGrid:h};c=new Tft(f),i.value.setSource(c)}if(!c)return;n.on("pointermove",function(f){if(f.dragging)return;const d=i.value.getData(f.pixel),g=d&&d[3]>0;n.getTargetElement().style.cursor=g?"pointer":""}),n.on("singleclick",f=>{const d=n.getView(),g=d.getResolution();if(!g)return;const p=c==null?void 0:c.getFeatureInfoUrl(f.coordinate,g,d.getProjection().getCode(),{INFO_FORMAT:"application/json"});p&&fetch(p).then(v=>v.json()).then(v=>{o("singleclick",f,v)})})}};return fn(()=>{s()}),(l,u)=>Ya(l.$slots,"default")}}),o0t=Wr({__name:"index",props:{layerId:{default:`vector-layer-${Gc()}`},source:{},className:{},opacity:{},visible:{type:Boolean,default:!0},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},gradient:{default:()=>["#00f","#0ff","#0f0","#ff0","#f00"]},radius:{default:8},blur:{default:15},weight:{type:[String,Function],default:"weight"},properties:{}},emits:["singleclick","pointermove","sourceready","featuresloadend","featuresloadstart","addfeature"],setup(r,{emit:t}){const e=r,n=$e("VMap"),i=qt(n).map;let a=Er(),o=Er(),s=ir([]);const l=["singleclick","pointermove"],u=t;let h=ir(!1);ns("ParentLayer",a),Kc(()=>{kg(a.value,e)}),He(()=>e.blur,p=>{var v;(a.value||p===0)&&((v=a.value)==null||v.setBlur(p))}),He(()=>e.radius,p=>{var v;(a.value||p===0)&&((v=a.value)==null||v.setRadius(p))}),He(()=>e.gradient,p=>{var v;a.value&&((v=a.value)==null||v.setGradient(p))},{deep:!0}),He(()=>e.source,()=>{var p;(p=o.value)==null||p.clear(),a.value&&i.removeLayer(a.value),c()});const c=()=>{o.value=new Na({...e.source}),o.value.once("addfeature",()=>{u("addfeature",a.value,o.value)}),a.value=new Lft({...e,source:o.value}),a.value.set("id",e.layerId),i.addLayer(a.value),l.forEach(p=>{s.value.push(i.on(p,v=>{f(p,v)}))}),a.value.on("sourceready",()=>{h.value=!0,u("sourceready",a.value)})},f=(p,v)=>{const{pixel:m}=v,y=d(m);u(p,v,y)},d=p=>i.forEachFeatureAtPixel(p,v=>v,{layerFilter:v=>{var m;return v.get("id")===((m=a.value)==null?void 0:m.get("id"))}}),g=()=>{s.value.forEach(p=>{Cu(p)})};return fn(()=>{c()}),jc(()=>{g()}),(p,v)=>qt(h)?Ya(p.$slots,"default",{key:0}):Xu("",!0)}}),s0t=Wr({__name:"index",props:{source:{},layerStyle:{},className:{},opacity:{},visible:{type:Boolean,default:!0},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},preload:{},sources:{},map:{},useInterimTilesOnError:{type:Boolean},cacheSize:{},properties:{}},setup(r){const t=r,e=$e("VMap"),n=qt(e).map,i=new g7(t.source),a=new z2({...t,source:i});return Kc(()=>{kg(a,t)}),fn(()=>{n.addLayer(a)}),(o,s)=>Ya(o.$slots,"default")}}),bk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Sb=1,wp=8;class MP{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(e!==219)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(i!==Sb)throw new Error(`Got v${i} data when expected v${Sb}.`);const a=bk[n&15];if(!a)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new MP(s,o,a,t)}constructor(t,e=64,n=Float64Array,i){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const a=bk.indexOf(this.ArrayType),o=t*2*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-s%8)%8;if(a<0)throw new Error(`Unexpected typed array class: ${n}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,wp,t),this.coords=new this.ArrayType(this.data,wp+s+l,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(wp+o+s+l),this.ids=new this.IndexArrayType(this.data,wp,t),this.coords=new this.ArrayType(this.data,wp+s+l,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Sb<<4)+a]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return uA(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:a,coords:o,nodeSize:s}=this,l=[0,a.length-1,0],u=[];for(;l.length;){const h=l.pop()||0,c=l.pop()||0,f=l.pop()||0;if(c-f<=s){for(let v=f;v<=c;v++){const m=o[2*v],y=o[2*v+1];m>=t&&m<=n&&y>=e&&y<=i&&u.push(a[v])}continue}const d=f+c>>1,g=o[2*d],p=o[2*d+1];g>=t&&g<=n&&p>=e&&p<=i&&u.push(a[d]),(h===0?t<=g:e<=p)&&(l.push(f),l.push(d-1),l.push(1-h)),(h===0?n>=g:i>=p)&&(l.push(d+1),l.push(c),l.push(1-h))}return u}within(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:o}=this,s=[0,i.length-1,0],l=[],u=n*n;for(;s.length;){const h=s.pop()||0,c=s.pop()||0,f=s.pop()||0;if(c-f<=o){for(let v=f;v<=c;v++)Ek(a[2*v],a[2*v+1],t,e)<=u&&l.push(i[v]);continue}const d=f+c>>1,g=a[2*d],p=a[2*d+1];Ek(g,p,t,e)<=u&&l.push(i[d]),(h===0?t-n<=g:e-n<=p)&&(s.push(f),s.push(d-1),s.push(1-h)),(h===0?t+n>=g:e+n>=p)&&(s.push(d+1),s.push(c),s.push(1-h))}return l}}function uA(r,t,e,n,i,a){if(i-n<=e)return;const o=n+i>>1;d9(r,t,o,n,i,a),uA(r,t,e,n,o-1,1-a),uA(r,t,e,o+1,i,1-a)}function d9(r,t,e,n,i,a){for(;i>n;){if(i-n>600){const u=i-n+1,h=e-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(h-u/2<0?-1:1),g=Math.max(n,Math.floor(e-h*f/u+d)),p=Math.min(i,Math.floor(e+(u-h)*f/u+d));d9(r,t,e,g,p,a)}const o=t[2*e+a];let s=n,l=i;for(Tp(r,t,n,e),t[2*i+a]>o&&Tp(r,t,n,i);s<l;){for(Tp(r,t,s,l),s++,l--;t[2*s+a]<o;)s++;for(;t[2*l+a]>o;)l--}t[2*n+a]===o?Tp(r,t,n,l):(l++,Tp(r,t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}}function Tp(r,t,e,n){wb(r,e,n),wb(t,2*e,2*n),wb(t,2*e+1,2*n+1)}function wb(r,t,e){const n=r[t];r[t]=r[e],r[e]=n}function Ek(r,t,e,n){const i=r-e,a=t-n;return i*i+a*a}const l0t={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:r=>r},Ck=Math.fround||(r=>t=>(r[0]=+t,r[0]))(new Float32Array(1)),uh=2,Kl=3,Tb=4,Ul=5,g9=6;class u0t{constructor(t){this.options=Object.assign(Object.create(l0t),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:i}=this.options,a=`prepare ${t.length} points`;this.points=t;const o=[];for(let l=0;l<t.length;l++){const u=t[l];if(!u.geometry)continue;const[h,c]=u.geometry.coordinates,f=Ck(Z0(h)),d=Ck(j0(c));o.push(f,d,1/0,l,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[i+1]=this._createTree(o);for(let l=i;l>=n;l--){const u=+Date.now();s=this.trees[l]=this._createTree(this._cluster(s,l))}return this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let a=t[2]===180?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,a=180;else if(n>a){const c=this.getClusters([n,i,180,o],e),f=this.getClusters([-180,i,a,o],e);return c.concat(f)}const s=this.trees[this._limitZoom(e)],l=s.range(Z0(n),j0(o),Z0(a),j0(i)),u=s.data,h=[];for(const c of l){const f=this.stride*c;h.push(u[f+Ul]>1?Mk(u,f,this.clusterProps):this.points[u[f+Kl]])}return h}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",a=this.trees[n];if(!a)throw new Error(i);const o=a.data;if(e*this.stride>=o.length)throw new Error(i);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=o[e*this.stride],u=o[e*this.stride+1],h=a.within(l,u,s),c=[];for(const f of h){const d=f*this.stride;o[d+Tb]===t&&c.push(o[d+Ul]>1?Mk(o,d,this.clusterProps):this.points[o[d+Kl]])}if(c.length===0)throw new Error(i);return c}getLeaves(t,e,n){e=e||10,n=n||0;const i=[];return this._appendLeaves(i,t,e,n,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],a=Math.pow(2,t),{extent:o,radius:s}=this.options,l=s/o,u=(n-l)/a,h=(n+1+l)/a,c={features:[]};return this._addTileFeatures(i.range((e-l)/a,u,(e+1+l)/a,h),i.data,e,n,a,c),e===0&&this._addTileFeatures(i.range(1-l/a,u,1,h),i.data,a,n,a,c),e===a-1&&this._addTileFeatures(i.range(0,u,l/a,h),i.data,-1,n,a,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,n.length!==1)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,a){const o=this.getChildren(e);for(const s of o){const l=s.properties;if(l&&l.cluster?a+l.point_count<=i?a+=l.point_count:a=this._appendLeaves(t,l.cluster_id,n,i,a):a<i?a++:t.push(s),t.length===n)break}return a}_createTree(t){const e=new MP(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<t.length;n+=this.stride)e.add(t[n],t[n+1]);return e.finish(),e.data=t,e}_addTileFeatures(t,e,n,i,a,o){for(const s of t){const l=s*this.stride,u=e[l+Ul]>1;let h,c,f;if(u)h=p9(e,l,this.clusterProps),c=e[l],f=e[l+1];else{const p=this.points[e[l+Kl]];h=p.properties;const[v,m]=p.geometry.coordinates;c=Z0(v),f=j0(m)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*a-n)),Math.round(this.options.extent*(f*a-i))]],tags:h};let g;u||this.options.generateId?g=e[l+Kl]:g=this.points[e[l+Kl]].id,g!==void 0&&(d.id=g),o.features.push(d)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:i,reduce:a,minPoints:o}=this.options,s=n/(i*Math.pow(2,e)),l=t.data,u=[],h=this.stride;for(let c=0;c<l.length;c+=h){if(l[c+uh]<=e)continue;l[c+uh]=e;const f=l[c],d=l[c+1],g=t.within(l[c],l[c+1],s),p=l[c+Ul];let v=p;for(const m of g){const y=m*h;l[y+uh]>e&&(v+=l[y+Ul])}if(v>p&&v>=o){let m=f*p,y=d*p,_,x=-1;const w=((c/h|0)<<5)+(e+1)+this.points.length;for(const S of g){const T=S*h;if(l[T+uh]<=e)continue;l[T+uh]=e;const b=l[T+Ul];m+=l[T]*b,y+=l[T+1]*b,l[T+Tb]=w,a&&(_||(_=this._map(l,c,!0),x=this.clusterProps.length,this.clusterProps.push(_)),a(_,this._map(l,T)))}l[c+Tb]=w,u.push(m/v,y/v,1/0,w,-1,v),a&&u.push(x)}else{for(let m=0;m<h;m++)u.push(l[c+m]);if(v>1)for(const m of g){const y=m*h;if(!(l[y+uh]<=e)){l[y+uh]=e;for(let _=0;_<h;_++)u.push(l[y+_])}}}}return u}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+Ul]>1){const o=this.clusterProps[t[e+g9]];return n?Object.assign({},o):o}const i=this.points[t[e+Kl]].properties,a=this.options.map(i);return n&&a===i?Object.assign({},a):a}}function Mk(r,t,e){return{type:"Feature",id:r[t+Kl],properties:p9(r,t,e),geometry:{type:"Point",coordinates:[h0t(r[t]),c0t(r[t+1])]}}}function p9(r,t,e){const n=r[t+Ul],i=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?`${Math.round(n/100)/10}k`:n,a=r[t+g9],o=a===-1?{}:Object.assign({},e[a]);return Object.assign(o,{cluster:!0,cluster_id:r[t+Kl],point_count:n,point_count_abbreviated:i})}function Z0(r){return r/360+.5}function j0(r){const t=Math.sin(r*Math.PI/180),e=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return e<0?0:e>1?1:e}function h0t(r){return(r-.5)*360}function c0t(r){const t=(180-r*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}const fv=Wr({name:"OlFeature",props:{geometries:{type:Array,default:void 0},geoJson:{type:Object,default:void 0},options:{type:Object,default:void 0}},setup(r,{expose:t}){const e=$e("VMap"),n=qt(e).map,i=$e("ParentLayer");let a,o=ir();const s=()=>{let m=i.value.getSource();if(i.value.get("cluster")&&i.value.getSource()&&(m=i.value.getSource().getSource()),m){const y=i.value.get("superCluster");if(y){a=new u0t(y);let _=[];r.geoJson&&_.push(...u("Point")),r.geometries&&r.geometries.length>0&&_.push(...g("Point"));const x=new _d().writeFeaturesObject(_);a.load(x.features);const w=n.getView().calculateExtent(n.getSize()),S=a.getClusters(w,n.getView().getZoom()||0),T=new _d().readFeatures({type:"FeatureCollection",features:S}).map(b=>{const E=b.get("properties");if(E&&typeof E=="object")for(const C in E)Object.prototype.hasOwnProperty.call(E,C)&&b.set(C,E[C]);return b});m.addFeatures(T),n.on("precompose",()=>{const b=n.getView().calculateExtent(n.getSize()),C={type:"FeatureCollection",features:a.getClusters(b,n.getView().getZoom()||0)},M=i.value.getSource();M&&(M.clear(),M.addFeatures(new _d().readFeatures(C).map(A=>{const R=A.get("properties");if(R&&typeof R=="object")for(const L in R)Object.prototype.hasOwnProperty.call(R,L)&&A.set(L,R[L]);const P=A.get("style");return P&&m1(A,P,n),A})))})}else r.geoJson&&l(m,i.value.get("cluster")?"Point":void 0),r.geometries&&r.geometries.length>0&&f(m,i.value.get("cluster")?"Point":void 0)}},l=(m,y)=>{const _=u(y);_&&_.length>0&&(o.value=_,m.addFeatures(_))},u=m=>{let y,_,x;const w=m?h(m):r.geoJson,S=r.options;return S&&S.dataProjection&&(y=new zi(S.dataProjection)),S&&S.featureProjection&&(_=new zi(S.featureProjection)),S&&S.extent&&(x=S.extent),new _d().readFeatures(w,S?{extent:x,dataProjection:y,featureProjection:_}:void 0).map(b=>{const E=b.get("style"),C=b.get("id");return E&&m1(b,E,n),C&&!b.getId()&&b.setId(C),b})},h=m=>{const y=r.geoJson;if(y)return y.type==="FeatureCollection"?{type:"FeatureCollection",features:y.features.filter(_=>_.geometry.type===m)}:y.type==="Feature"?y.geometry.type===m?y:null:y.type===m?y:null},c=m=>{const y=n.getView().getProjection().getMetersPerUnit();return m&&y?m/y:0},f=(m,y)=>{const _=g(y);_&&_.length>0&&(o.value=_,m.addFeatures(_))},d=m=>{if(m.type==="Point")return new rr(m.geometry.coordinates);if(m.type==="MultiPoint")return new fa(m.geometry.coordinates);if(m.type==="Circle"){const y=m.geometry,_=c(y.radius);return new sw(y.center,_)}else{if(m.type==="Polygon")return new Kr(m.geometry.coordinates);if(m.type==="LineString")return new ke(m.geometry.coordinates);if(m.type==="MultiPolygon")return new yi(m.geometry.coordinates);if(m.type==="MultiLineString")return new Dn(m.geometry.coordinates);if(m.type==="LinearRing")return new al(m.geometry.coordinates)}},g=m=>{const y=r.geometries;if(!y)return[];let _=[];return y.forEach(x=>{if(x.type==="GeometryCollection"){let w=[];x.geometry.geometries.forEach(T=>{const b=m||x.type,E=d({type:b,geometry:T});E&&w.push(E)});const S=new zr(w);_.push(new Le({geometry:S,...x.properties}))}else{if(m&&x.type!==m)return;const w=new Le({geometry:d(x),...x.properties});_.push(w)}}),_.map(x=>{const w=x.get("style"),S=x.get("id");return w&&m1(x,w,n),S&&!x.getId()&&x.setId(S),x})},p=(m,y,_)=>{if(a)return a.getLeaves(m,y,_);throw new Error("SuperCluster is not initialized")},v=m=>{if(!i)return;let y=i.value.getSource();i.value.get("cluster")&&i.value.getSource()&&(y=i.value.getSource().getSource()),o.value&&(y==null||y.removeFeatures(o.value??[])),m&&s()};return He(()=>r.geoJson,m=>{v(m)},{deep:!0}),He(()=>r.geometries,m=>{v(m)},{deep:!0}),fn(()=>{i&&s()}),t({getLeaves:p}),{getLeaves:p}},render(){return null}}),f0t=Wr({__name:"index",props:{layerId:{default:`vector-layer-${Gc()}`},source:{},clusterOptions:{default:()=>({})},clusterStyle:{default:()=>({})},layerStyle:{default:()=>({})},superCluster:{default:void 0},className:{},opacity:{},visible:{type:Boolean,default:!0},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},renderOrder:{},renderBuffer:{},map:{},declutter:{type:[String,Number,Boolean]},style:{},background:{},updateWhileAnimating:{type:Boolean},updateWhileInteracting:{type:Boolean},properties:{}},emits:["singleclick","pointermove","sourceready","featuresloadend","featuresloadstart","addfeature"],setup(r,{emit:t}){const e=r,n=$e("VMap"),i=qt(n).map;let a=Er(),o=Er(),s=Er(),l=ir([]);const u=["singleclick","pointermove"],h=t;let c=ir(!1);ns("ParentLayer",a),Kc(()=>{kg(a.value,e)});const f=(m,y)=>{const _={...m.text,text:y};return{...m,text:_}},d=()=>{var m,y,_,x;if(o.value=new Na({...e.source}),e.superCluster){const w={},S=((y=(m=s==null?void 0:s.value)==null?void 0:m.getSource())==null?void 0:y.getFeatures().length)||0;a.value=new Pa({...e,source:o.value,style:T=>{const b=T.get("cluster")||0,E=T.get("point_count_abbreviated")||0;let C=w[E];if(b){if(!C){let M={};M={image:new ha({radius:4,fill:new Ee({color:"blue"})}),text:new Kn({font:"16px sans-serif",text:E.toString()})},e.clusterStyle?(M=e.clusterStyle,M instanceof Array?(M.forEach(A=>{let R=0,P=S;if(Xr(A,"min")||Xr(A,"max"))R=A.min,P=A.max,R<E&&E<=P&&(M=f(A,E.toString()));else if(S>0){const L=S/M.style.length;for(let D=0;D<M.style.length;D++)R=D*L,P=L*(D+1),R<E&&E<=P&&(M=f(M.style[D],E.toString()))}}),C=$h(M)):(M=f(M,E.toString()),C=$h(M))):C=new Te(M),w[E]=C}}else C=$h(e.layerStyle);return C}}),a.value.set("superCluster",e.superCluster)}else{s.value=new pht({...e.clusterOptions,source:o.value});const w={},S=((x=(_=s==null?void 0:s.value)==null?void 0:_.getSource())==null?void 0:x.getFeatures().length)||0;a.value=new Pa({...e,source:s.value,style:function(T){const b=T.get("features").length;let E=w[b];if(b>1){if(!E){let C={};C=e.clusterStyle,!C||Object.keys(C).length===0?(C={image:new ha({radius:20,stroke:new or({color:"#fff"}),fill:new Ee({color:"#3399CC"})}),text:new Kn({font:"16px sans-serif",text:b.toString(),fill:new Ee({color:"#fff"})})},E=new Te(C)):C instanceof Array?(C.forEach(M=>{let A=0,R=S;if(Xr(M,"min")||Xr(M,"max"))A=M.min,R=M.max,A<b&&b<=R&&(C=f(M,b.toString()));else if(S>0){const P=S/C.style.length;for(let L=0;L<C.style.length;L++)A=L*P,R=P*(L+1),A<b&&b<=R&&(C=f(C.style[L],b.toString()))}}),E=$h(C)):(C=f(C,b.toString()),E=$h(C)),w[b]=E}}else E=$h(e.layerStyle);return E}}),a.value.set("cluster",!0)}a.value.set("id",e.layerId),i.addLayer(a.value),u.forEach(w=>{l.value.push(i.on(w,S=>{g(w,S)}))}),a.value.on("sourceready",()=>{c.value=!0,h("sourceready",a.value)})},g=(m,y)=>{const{pixel:_}=y,x=p(_);h(m,y,x)},p=m=>i.forEachFeatureAtPixel(m,y=>y,{layerFilter:y=>{var _;return y.get("id")===((_=a.value)==null?void 0:_.get("id"))}}),v=()=>{l.value.forEach(m=>{Cu(m)})};return fn(()=>{d()}),jc(()=>{v()}),(m,y)=>qt(c)?Ya(m.$slots,"default",{key:0}):Xu("",!0)}}),d0t=Wr({__name:"index",props:{overlayId:{default:`overlay-${Gc()}`},data:{default:()=>({})},id:{},element:{},offset:{default:()=>[0,0]},position:{default:void 0},positioning:{},stopEvent:{type:Boolean},insertFirst:{type:Boolean},autoPan:{type:[Boolean,Object]},className:{}},emits:["load"],setup(r,{emit:t}){const e=r;let n=Er();const i=$e("VMap"),a=qt(i).map,o=t,s=`overlay-el-${Gc()}`;He(()=>e.position,u=>{n.value.setPosition(u)},{deep:!0,immediate:!1});const l=()=>{let u=e.element?e.element:document.getElementById(s.toString());const h={...e,id:e.overlayId,element:u};n.value=new rW(h);const c={...h};for(const f in c)Object.prototype.hasOwnProperty.call(c,f)&&n.value.set(f,c[f]);a.addOverlay(n.value),o("load",n.value,a)};return fn(()=>{l()}),(u,h)=>(nl(),Y1("div",AR({id:s,ref:"overlayRef"},u.$attrs),[Ya(u.$slots,"default",{data:u.data})],16))}}),g0t=Wr({__name:"OverviewMap",props:{className:{},collapsed:{type:Boolean,default:!1},collapseLabel:{},collapsible:{type:Boolean,default:!0},label:{},layers:{},render:{},rotateWithView:{type:Boolean},target:{},tipLabel:{},view:{},tileType:{default:"TDT"},layerId:{default:`tile-layer-${Gc()}`},source:{},opacity:{},visible:{type:Boolean,default:!0},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},preload:{},map:{},useInterimTilesOnError:{type:Boolean},properties:{},cacheSize:{}},setup(r){const t=r,{init:e,setOverviewMapOptions:n}=y7(t);return fn(()=>{n({...t}).then(()=>{e(!0)})}),(i,a)=>Ya(i.$slots,"default")}}),p0t={class:"form-item"},v0t={class:"form-item"},m0t=Wr({__name:"index",props:{type:{default:"Point"},feature:{default:void 0},pinClass:{default:"overlay-pin"},titleClass:{default:""},bodyClass:{default:""},footerClass:{default:""}},emits:["save"],setup(r,{emit:t}){const e=$e("VMap"),n=qt(e).map,i=$e("ParentLayer"),a=r,o={Point:"",Polygon:""};let s=ir(void 0);const l=v=>{var m;if(v){if(v.get("type")==="Point")return(m=v.getGeometry())==null?void 0:m.getCoordinates();{const{topCenter:y}=fut(v.getGeometry());return y}}};He(()=>a.feature,v=>{u.value="",h.value="",c.value=void 0,s.value=void 0,v&&(f.value=v.get("type")?v.get("type"):a.type,s.value=l(v))});let u=Er(""),h=Er(""),c=Er(void 0),f=Er("Point");const d=t,g=()=>{const v=c.value?c.value:a.feature;v==null||v.set("name",u.value),v==null||v.set("remark",h.value),v==null||v.set("type",(v==null?void 0:v.get("type"))??a.type),v==null||v.set("position",l(v));const m=(v==null?void 0:v.getStyle())||new Te({fill:new Ee({color:"rgba(255, 255, 255, 0.6)"}),stroke:new or({color:"#319FD3",width:1}),image:new ia({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADdElEQVRYR8WWXYjcVBiG3zfJGb1oq4todXZnVOpsMlbRLtQK1p+CVNAbERQEqUVEVPy58EIpqFAQwasqVOhFWdrSIuiNUAQR/3ApVIr0hzozu93KJtktsgWRxeLmJPlKho52JzOTZIo2t+d7v/c5b76cHOIqP7zK/igEIADPlNWGyJBHQY4DHANlUcBZI4p/MubDqRqwXGRTuQAEUM0x9TIMvkXg1r4GIosA3rE9PUlA8oBkAsyO4Dq9Sh0GuTlPw3aN4Os1UfBUeQEXsjQDAZKdtypqCuR9WY3S63JcLelH1v2BPwdpBwI0q+pjgG8UN+8o5Ijt6gcJxP169AVorsXtKKkZkGYvsQDnKDIPYEO/mrYuxnOOHxwsDNCoqj0EX0oJRc4jlmec+fD7ZK09I6vVdgA7Aa7prhfBdN0L7EIAApjNqlokOHK5UCCBBU7U3OB0d8NWRW0U4CjIVKomsL7mBr/2guj5ChqjGKdZaqV3I7vrnn6t324aFXWI5LM9UnvB8fRkboDpivVQTOPHbgEh22xXHxgAsJ1kykgQ76i74Ye5AZqj1haYxncpQSwvOr7e2w+gVVXbBNyXSq4owGwZVW2V5nq8gs/qnk5HfKmwVVWfCPh6Krk4esL2o69yJ5AUNiqlaRK1FSIRgfBexw9OdjdL5gamOkWw1DW4emRZj9z8O/4qCGDtII0P0iJJTrb31JLe1znlZsashyPyc5A3pgcQXzpe8GShzzApPnsT1i5fo3ySVk+xSCTEcYBlArf0NYhlk+3rnwsDJIJWRU0KmRwyQz0i8k3d01sHiQf+C9rDaKqzA4/aAd2NWO4f9/XRoQESYbOidoN8dYgIvnDc4OksXeZ9oDGKG2iqMwCvz2r277osW6Gu3bEAL0uTCXAphVdAfprVrLPOOH7f9sOdeepzASR3wWZVHSM4kaNpy3aDuwiEOWrzX0pnymoiMnGs199uxcETx1vqfvhDHvOkJlcCnWbNMbULBt/s11xE9tc9/Xxe88IAv92Ga/+OSidIjHebCDDHC8Hdznks/WcA7cNpVN0jBn4BaayIPowfqC+ER4qYF07gn1dRsd4Fjcun/CPHDd4uaj40QPJVtKqlwwAeB+Rb29WPEYj+N4DEKLmMBqvUlBh6651zODeM+dAJdMxOA6X1QDCs+RUDXIlxR3sRcjswMD6XvKYAAAAASUVORK5CYII="})}),y=(m==null?void 0:m.getText())||new Kn({font:"16px Calibri,sans-serif",fill:new Ee({color:"#000"}),padding:[2,2,2,2],backgroundFill:new Ee({color:"#fff"})});y.setText(u.value),m.setText(y),v==null||v.setStyle(m),d("save",{name:u.value,remark:h.value,type:f.value,feature:v}),s.value=void 0,u.value="",h.value=""},p=v=>n.forEachFeatureAtPixel(v,m=>m,{layerFilter:m=>{var y;return m.get("id")===((y=i.value)==null?void 0:y.get("id"))}});return fn(()=>{i.value&&n.on("singleclick",v=>{const m=p(v.pixel);if(m){c.value=m;const y=m.get("type"),_=m.get("name"),x=m.get("remark");c.value.set("type",y),c.value.set("name",_),f.value=y,u.value=_,h.value=x,m.get("position")&&(s.value=m.get("position"))}})}),(v,m)=>{const y=q6("ol-overlay");return nl(),gm(y,{"class-name":a.pinClass,position:qt(s),offset:[0,-30],positioning:"bottom-center"},{default:TR(()=>[Ta("div",{class:Cd(["title",a.titleClass])},""+v6(o[qt(f)]),3),Ta("div",{class:Cd(["body",a.bodyClass])},[Ta("div",p0t,[m[2]||(m[2]=Ta("label",{for:"name"},":",-1)),qD(Ta("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>wn(u)?u.value=_:u=_),type:"text"},null,512),[[MO,qt(u)]])]),Ta("div",v0t,[m[3]||(m[3]=Ta("label",{for:"remark"},":",-1)),qD(Ta("input",{"onUpdate:modelValue":m[1]||(m[1]=_=>wn(h)?h.value=_:h=_),type:"text"},null,512),[[MO,qt(h)]])])],2),Ta("div",{class:Cd(["footer",a.footerClass])},[Ta("button",{class:"btn-ok",onClick:g},"")],2)]),_:1},8,["class-name","position"])}}}),y0t=Wr({name:"OlDraw",props:{type:{type:String,default:""},snap:{type:Boolean,default:!1},modify:{type:Boolean,default:!1},pin:{type:Boolean,default:!1},pinClass:{type:String,default:""},pinTitleClass:{type:[Array,String],default:""},pinBodyClass:{type:[Array,String],default:""},pinFooterClass:{type:[Array,String],default:""}},emits:["drawend","drawstart","modifyend","modifystart","savePin"],setup(r,{expose:t,emit:e}){const n=$e("VMap"),i=qt(n).map,a=$e("ParentLayer");let o=Er(),s,l,u=Er(void 0);const h=m=>{m.on("drawend",y=>{e("drawend",y),r.pin&&(u.value=y.feature,f())}),m.on("drawstart",y=>{e("drawstart",y)})},c=m=>{m.on("modifyend",y=>{e("modifyend",y)}),m.on("modifystart",y=>{e("modifystart",y)})},f=()=>{o.value&&i.removeInteraction(o.value),l&&i.removeInteraction(l),s&&i.removeInteraction(s)},d=()=>{if(f(),u.value=void 0,r.type){let m;const y=a.value.getSource();let _;r.type==="Rectangle"?(_="Circle",m={source:y,type:_,geometryFunction:tit()}):r.type==="Square"?(_="Circle",m={source:y,type:_,geometryFunction:Qnt(4)}):(_=r.type,m={source:y,type:_}),o.value=new oW(m),o.value.set("interactions_name","Draw"),i.addInteraction(o.value),h(o.value),r.snap&&(l=new oit({source:y}),l.set("interactions_name","Snap"),i.addInteraction(l)),r.modify&&(s=new E2({source:y}),s.set("interactions_name","Modify"),i.addInteraction(s),c(s))}},g=()=>{u.value=void 0,a.value.getSource().clear()},p=m=>{var y;(y=o.value)==null||y.setActive(m)};return He(()=>r.type,()=>{u.value=void 0,d()}),fn(()=>{d()}),t({clear:g,setActive:p}),{render:()=>{if(r.pin){let m;if(!r.type)return null;if(r.type==="Point")m="Point";else if(["Polygon","Rectangle","Square","Circle"].includes(r.type))m="Polygon";else return null;return mm("div",{},[mm(m0t,{name:"default",type:m,feature:u.value,pinClass:r.pinClass,titleClass:r.pinTitleClass,bodyClass:r.pinBodyClass,footerClass:r.pinFooterClass,onSave:y=>{e("savePin",y)}})])}else return null},clear:g,setActive:p}},render(){return this.render()}}),_0t=Wr({name:"OlMeasure",props:{type:{type:String,default:""},showSegments:{type:Boolean,default:!1},clearPrevious:{type:Boolean,default:!1}},setup(r,{expose:t,emit:e}){const n=$e("VMap"),i=qt(n).map,a=$e("ParentLayer"),o=qt(a).getSource(),s=new Te({fill:new Ee({color:"rgba(255, 255, 255, 0.2)"}),stroke:new or({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new ha({radius:5,stroke:new or({color:"rgba(0, 0, 0, 0.7)"}),fill:new Ee({color:"rgba(255, 255, 255, 0.2)"})})}),l=new Te({text:new Kn({font:"14px Calibri,sans-serif",fill:new Ee({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Ee({color:"rgba(0, 0, 0, 0.7)"}),padding:[3,3,3,3],textBaseline:"bottom",offsetY:-15}),image:new Oc({radius:8,points:3,angle:Math.PI,displacement:[0,10],fill:new Ee({color:"rgba(0, 0, 0, 0.7)"})})}),u=new Te({text:new Kn({font:"12px Calibri,sans-serif",fill:new Ee({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Ee({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),h=new Te({image:new ha({radius:5,stroke:new or({color:"rgba(0, 0, 0, 0.7)"}),fill:new Ee({color:"rgba(0, 0, 0, 0.4)"})}),text:new Kn({text:"",font:"12px Calibri,sans-serif",fill:new Ee({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Ee({color:"rgba(0, 0, 0, 0.7)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),c=new Te({text:new Kn({font:"12px Calibri,sans-serif",fill:new Ee({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Ee({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textBaseline:"bottom",offsetY:-12}),image:new Oc({radius:6,points:3,angle:Math.PI,displacement:[0,8],fill:new Ee({color:"rgba(0, 0, 0, 0.4)"})})}),f=[c];let d,g,p;const v=function(T){const b=Y8(T,{projection:qt(i).getView().getProjection()});let E;return b>100?E=Math.round(b/1e3*100)/100+" km":E=Math.round(b*100)/100+" m",E},m=function(T){const b=X8(T,{projection:qt(i).getView().getProjection()});let E;return b>1e4?E=Math.round(b/1e6*100)/100+" km":E=Math.round(b*100)/100+" m",E},y=(T,b,E,C)=>{var k,F,B;const M=[],A=T.getGeometry();if(!A)return new Te;const R=A.getType();let P,L,D;if((!E||E===R||R==="Point")&&(M.push(s),R==="Polygon"?(P=A.getInteriorPoint(),L=m(A),D=new ke(A.getCoordinates()[0])):R==="LineString"&&(P=new rr(A.getLastCoordinate()),L=v(A),D=A)),b&&D){let V=0;if(!D)return new Te;D.forEachSegment(function(Y,q){const lt=new ke([Y,q]),X=v(lt);f.length-1<V&&f.push(c.clone());const St=new rr(lt.getCoordinateAt(.5)),mt=f[V];if(mt){mt.setGeometry(St);const $=mt.getText();$==null||$.setText(X),M.push(f[V]),V++}})}if(L){l.setGeometry(P);const V=l.getText();V==null||V.setText(L),M.push(l)}return C&&R==="Point"&&!((F=(k=g.getOverlay())==null?void 0:k.getSource())!=null&&F.getFeatures().length)&&(p=A,(B=u.getText())==null||B.setText(C),M.push(u)),M},_=()=>{const T=r.type==="area"?"Polygon":"LineString",b=" "+(r.type==="area"?"":""),E="";let C=E;d=new oW({source:o,type:T,style:function(M){return y(M,r.showSegments,T,C)}}),d.on("drawstart",function(){r.clearPrevious&&o.clear(),g.setActive(!1),C=b}),d.on("drawend",function(){h.setGeometry(p),g.setActive(!0),i.once("pointermove",function(){h.setGeometry("")}),C=E}),g.setActive(!0),i.addInteraction(d)},x=()=>{g=new E2({source:o,style:h}),a.value.setStyle(T=>y(T,r.showSegments)),i.addInteraction(g),r.type&&_()},w=()=>{a.value.getSource().clear()},S=T=>{d.setActive(T)};return He(()=>r.type,T=>{i.removeInteraction(d),T&&_()}),fn(()=>{x()}),t({clear:w,setActive:S}),{clear:w,setActive:S}},render(){return null}});var v9={exports:{}};(function(r){(function(){function t(s,l){var u=s.x-l.x,h=s.y-l.y;return u*u+h*h}function e(s,l,u){var h=l.x,c=l.y,f=u.x-h,d=u.y-c;if(f!==0||d!==0){var g=((s.x-h)*f+(s.y-c)*d)/(f*f+d*d);g>1?(h=u.x,c=u.y):g>0&&(h+=f*g,c+=d*g)}return f=s.x-h,d=s.y-c,f*f+d*d}function n(s,l){for(var u=s[0],h=[u],c,f=1,d=s.length;f<d;f++)c=s[f],t(c,u)>l&&(h.push(c),u=c);return u!==c&&h.push(c),h}function i(s,l,u,h,c){for(var f=h,d,g=l+1;g<u;g++){var p=e(s[g],s[l],s[u]);p>f&&(d=g,f=p)}f>h&&(d-l>1&&i(s,l,d,h,c),c.push(s[d]),u-d>1&&i(s,d,u,h,c))}function a(s,l){var u=s.length-1,h=[s[0]];return i(s,0,u,l,h),h.push(s[u]),h}function o(s,l,u){if(s.length<=2)return s;var h=l!==void 0?l*l:1;return s=u?s:n(s,h),s=a(s,h),s}r.exports=o,r.exports.default=o})()})(v9);var x0t=v9.exports;const S0t=mw(x0t);class K0{constructor(t,e){ee(this,"min",{x:0,y:0});ee(this,"max",{x:0,y:0});this.min=t,this.max=e}intersects(t){const e=this.min,n=this.max,i=t.min,a=t.max;return a.x<=e.x||i.x>=n.x||a.y<=e.y||i.y>=n.y}}class Ak extends Pa{constructor(e){var i;const n=Object.assign({},e);delete n.map;super(n);ee(this,"map");ee(this,"pointsArr",[]);ee(this,"zoom",1);ee(this,"textBounds",[]);ee(this,"styleOptions",{fillColor:"rgb(26,58,91,0.6)",strokeColor:"rgb(26,58,91)",textColor:"white",fontCss:"bolder 15px sans-serif",boxWidth:50});ee(this,"textViewCom",[]);ee(this,"source");this.map=e.map,this.pointsArr=e.pointsArr?e.pointsArr:this.pointsArr,this.zoom=e.zoom?e.zoom:1,this.styleOptions=e.styleOptions?e.styleOptions:this.styleOptions,this.source=this.getSource()||new Na,this.setSource(this.source),(i=this.map)==null||i.on("moveend",a=>{this.moveEnd()})}moveEnd(){var n,i;(((i=(n=this.map)==null?void 0:n.getView())==null?void 0:i.getZoom())||0)>=this.zoom?this.drawText().then(()=>{this.source.clear();const a=this.get("textComponent");a&&a.length>0&&a.forEach(o=>{var s,l;(s=this.getSource())==null||s.addFeature(o.polyline),(l=this.getSource())==null||l.addFeature(o.textBack)})}):this.source.clear()}async drawText(){var a;const e=this.styleOptions,i=document.createElement("canvas").getContext("2d");i&&(e.fontCss&&(i.font=e.fontCss),(a=this.map)==null||a.once("postrender",async()=>{const o=[];this.pointsArr.forEach(s=>{var h,c,f,d,g,p,v,m;const l=q8(s.position,"EPSG:4326"),u=((h=this.map)==null?void 0:h.getPixelFromCoordinate(l))||[0,0];if(mo(((c=this.map)==null?void 0:c.getView().calculateExtent())||[0,0],l)){s.text=s.text||"";let y=e.boxWidth||Math.ceil(i.measureText(s.text).width);y+=30;const _=u[0]+10,x=u[0]+y,w=u[1]-40,S=u[1]-10,T=[_,Number(((w+S)/2).toFixed(0))],b={x:_,y:w},E={x,y:S},C=new K0(b,E),M=u[0]-y,A=u[0]-10,R=u[1]-40,P=u[1]-10,L=[A,Number(((R+P)/2).toFixed(0))],D={x:M,y:R},k={x:A,y:P},F=new K0(D,k),B=u[0]-y,V=u[0]-10,Y=u[1]+10,q=u[1]+40,lt=[V,Number(((Y+q)/2).toFixed(0))],X={x:B,y:Y},St={x:V,y:q},mt=new K0(X,St),$=u[0]+10,K=u[0]+y,et=u[1]+10,W=u[1]+40,Z=[$,Number(((et+W)/2).toFixed(0))],at={x:$,y:et},O={x:K,y:W},N=new K0(at,O),H={bound:C,minx:_,miny:w,maxx:x,maxy:S,polylineCenter:T},Q={bound:F,minx:M,miny:R,maxx:A,maxy:P,polylineCenter:L},J={bound:mt,minx:B,miny:Y,maxx:V,maxy:q,polylineCenter:lt},ot={bound:N,minx:$,miny:et,maxx:K,maxy:W,polylineCenter:Z},ct=new Map([["rightTopBounds",H],["leftTopBounds",Q],["leftBomBounds",J],["rightBomBounds",ot]]);let gt=!0,pt=0,ut=0,Lt=0,Tt=0,bt=[0,0],Kt="";for(const[Tl,_r]of ct){for(let Cn=0;Cn<this.textBounds.length&&(gt=this.textBounds[Cn].intersects(_r.bound),!!gt);Cn++);gt&&(Kt=Tl)}if(!gt)return;for(const[Tl,_r]of ct)Tl===Kt&&(this.textBounds.push(_r.bound),bt=_r.polylineCenter,pt=_r.minx,ut=_r.miny,Lt=_r.maxx,Tt=_r.maxy);const Se=((f=this.map)==null?void 0:f.getCoordinateFromPixel([pt,ut]))||[],Be=((d=this.map)==null?void 0:d.getCoordinateFromPixel([Lt,ut]))||[],Ie=((g=this.map)==null?void 0:g.getCoordinateFromPixel([Lt,Tt]))||[],En=((p=this.map)==null?void 0:p.getCoordinateFromPixel([pt,Tt]))||[],Tr=new Le(new Kr([[Se,Be,Ie,En]]));Tr.setStyle(new Te({text:new Kn({font:e.fontCss,fill:new Ee({color:e.textColor}),backgroundFill:new Ee({color:e.fillColor}),backgroundStroke:new or({color:e.strokeColor}),offsetY:.5,overflow:!0})})),(v=Tr.getStyle().getText())==null||v.setText(s.text);const Jr=((m=this.map)==null?void 0:m.getCoordinateFromPixel(bt))||[0,0],To=new Le(new ke([s.position,Jr]));To.setStyle(new Te({stroke:new or({color:e.strokeColor})})),o.push({textBack:Tr,polyline:To,text:s.text})}}),this.set("textComponent",o)}))}keepVisible(){if(this.textViewCom=this.get("invisible"),!!this.textViewCom)for(let e=this.textViewCom.length-1;e>=0;e--){const n=this.textViewCom[e];this.textVisibility(n.text,!1)}}textVisibility(e,n){var s,l,u,h,c;let i=this.getObjectByText(e);this.textViewCom=this.get("invisible");let a=!1,o=0;if(this.textViewCom instanceof Array)for(let f=((s=this.textViewCom)==null?void 0:s.length)-1;f>=0;f--){let d=this.textViewCom[f];e===d.text&&(a=!0,o=f)}if(i.length>0)for(let f=i.length-1;f>=0;f--){let d=i[f];if(!n)this.textViewCom instanceof Array?!a&&this.textViewCom.push(d):this.set("invisible",[d]),(l=d.textBack)==null||l.setStyle(void 0),(u=d.polyline)==null||u.setStyle(void 0);else if(this.textViewCom instanceof Array&&a){this.textViewCom.splice(o,1);let g=this.getObjectByText(d.text);for(let p=g.length-1;p>=0;p--)(h=g[p].textBack)==null||h.setStyle(void 0),(c=g[p].polyline)==null||c.setStyle(void 0)}}else n?a&&this.textViewCom.splice(o,1):this.textViewCom instanceof Array?!a&&this.textViewCom.push({text:e}):this.set("invisible",[{text:e}])}getObjectByText(e){const n=this.get("textComponent"),i=[];for(let a=(n==null?void 0:n.length)-1;a>=0;a--){const o=n[a];o.text===e&&i.push(o)}return i}}var Yi=63710088e-1,m9={centimeters:Yi*100,centimetres:Yi*100,degrees:360/(2*Math.PI),feet:Yi*3.28084,inches:Yi*39.37,kilometers:Yi/1e3,kilometres:Yi/1e3,meters:Yi,metres:Yi,miles:Yi/1609.344,millimeters:Yi*1e3,millimetres:Yi*1e3,nauticalmiles:Yi/1852,radians:1,yards:Yi*1.0936};function y9(r,t,e={}){const n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=r,n}function w0t(r,t,e={}){if(!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ik(r[0])||!Ik(r[1]))throw new Error("coordinates must contain numbers");return y9({type:"Point",coordinates:r},t,e)}function bp(r,t,e={}){if(r.length<2)throw new Error("coordinates must be an array of two or more positions");return y9({type:"LineString",coordinates:r},t,e)}function T0t(r,t="kilometers"){const e=m9[t];if(!e)throw new Error(t+" units is invalid");return r*e}function b0t(r,t="kilometers"){const e=m9[t];if(!e)throw new Error(t+" units is invalid");return r/e}function hA(r){return r%(2*Math.PI)*180/Math.PI}function oo(r){return r%360*Math.PI/180}function Ik(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function E0t(r){return r!==null&&typeof r=="object"&&!Array.isArray(r)}function Um(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return[...r.geometry.coordinates];if(r.type==="Point")return[...r.coordinates]}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return[...r];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function cA(r,t,e={}){if(e.final===!0)return C0t(r,t);const n=Um(r),i=Um(t),a=oo(n[0]),o=oo(i[0]),s=oo(n[1]),l=oo(i[1]),u=Math.sin(o-a)*Math.cos(l),h=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(o-a);return hA(Math.atan2(u,h))}function C0t(r,t){let e=cA(t,r);return e=(e+180)%360,e}function Rk(r,t,e,n={}){const i=Um(r),a=oo(i[0]),o=oo(i[1]),s=oo(e),l=b0t(t,n.units),u=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(s)),h=a+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(u)),c=hA(h),f=hA(u);return w0t([c,f],n.properties)}function M0t(r,t,e={}){var n=Um(r),i=Um(t),a=oo(i[1]-n[1]),o=oo(i[0]-n[0]),s=oo(n[1]),l=oo(i[1]),u=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(s)*Math.cos(l);return T0t(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),e.units)}function A0t(r,t,e,n){if(n=n||{},!E0t(n))throw new Error("options is invalid");var i,a=[];if(r.type==="Feature")i=r.geometry.coordinates;else if(r.type==="LineString")i=r.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var o=i.length,s=0,l,u,h,c=0;c<i.length&&!(t>=s&&c===i.length-1);c++){if(s>t&&a.length===0){if(l=t-s,!l)return a.push(i[c]),bp(a);u=cA(i[c],i[c-1])-180,h=Rk(i[c],l,u,n),a.push(h.geometry.coordinates)}if(s>=e)return l=e-s,l?(u=cA(i[c],i[c-1])-180,h=Rk(i[c],l,u,n),a.push(h.geometry.coordinates),bp(a)):(a.push(i[c]),bp(a));if(s>=t&&a.push(i[c]),c===i.length-1)return bp(a);s+=M0t(i[c],i[c+1],n)}if(s<t&&i.length===o)throw new Error("Start position is beyond line");var f=i[i.length-1];return bp([f,f])}class I0t{constructor(t){ee(this,"_operators");ee(this,"_carIcon");ee(this,"_direction");ee(this,"_map");ee(this,"_status");ee(this,"_pathInfo");ee(this,"_bubble");ee(this,"_moving");ee(this,"_tracePointsModePlay");ee(this,"_lineLayer");ee(this,"_movePath");ee(this,"_originPath");ee(this,"_revealLayer");ee(this,"_showTracePoint");ee(this,"_nodesLayer");ee(this,"_moveNodes");ee(this,"_timeStep");ee(this,"_speed");ee(this,"_speedUp");ee(this,"_nowTime");ee(this,"_moveIdx");ee(this,"_animateLayer");ee(this,"_animateLine");ee(this,"_group");ee(this,"_labelVisible");ee(this,"_traceEvent");ee(this,"_simplifyEvent");ee(this,"_eventType");ee(this,"_animateStart");ee(this,"_textLayer");ee(this,"_moveListener");ee(this,"_step");ee(this,"_viewCode");ee(this,"_defaultStyles");ee(this,"_nodesCollection");ee(this,"_nodeInfos");ee(this,"_visible");var f;t=t||{};const e=t.bubble!==void 0?t.bubble:!1,n=t.showTracePoint?t.showTracePoint:!1,i=t.tracePointsModePlay?t.tracePointsModePlay:"animation",a=t.mapObj!==void 0?t.mapObj:null,o=t.path!==void 0?t.path:[],s=t.options,l=Date.now();!t.path||t.path.length<1,this._operators={carIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAVCAYAAADfLRcdAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ0RkExMTQ2Rjc4NzExRTQ4QkI3QTA2OTk3QzQ4M0IzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ0RkExMTQ3Rjc4NzExRTQ4QkI3QTA2OTk3QzQ4M0IzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDRGQTExNDRGNzg3MTFFNDhCQjdBMDY5OTdDNDgzQjMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDRGQTExNDVGNzg3MTFFNDhCQjdBMDY5OTdDNDgzQjMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz62sMp6AAAFiklEQVR42tRXW2wUVRj+zpmZvc4uS2mhhQK21FLshoKGWkBMSAwQSVBf0QfiJciDLya+8KAx8RJfeJV440GJaDAmGGKUmAASI+GhDQ1a7t1Kb1tot7s7uzvX4z8zC+12bdHVkDjJn5md/c853/nO918GeEDXkfe2f5+9+KzxxeuQap2D/RPn5BO7Aowxns/n9Ju958Q8PjL5yIxz4+KZk86spRLG5Y1T/Zfbf31sz7HN/xqsuIo4THwgStgr8lBtDcwxwQxa0rKB4WkFBcOGpgNSwIFusYoJjv0ATOQYdm9lWBQX4Iz2I8iDxhsGMDSm4mx/FJ3LR/HWi4ASokEmmeYj4UG6K/Tock9jSjxRjG/PRCrADn4SHVi8ttTOGM0sHAguIRKyCSlgF4HsOPDxKY7T4zvQ3NqFYmYSsbp6BEKhe0Bt08LR41/CsSzse34fZEWBbdPGtCxKWhoxeQiNketIhHOYyEgYGAqgc/UU3n5VgbA5iBQyAccWYLKCYLOCnLmLNrhNJHte5h7Ys/ubIlsPjGp3F/3tViOefEVCOCJjSYKjqZ6jdTnwdI+Fp5IppCaAvmsKxiZlondGCYQLJ34S2Ngp0LMBqFMFHmmxUb+U4+DhNpz4WYIlhWgTAWKIAHGOyVQKR98dx45uYoXTKZGRA/S0BT1n+6cd74G8qNlRO76WmNXLHI/R8nXom7U4eqENJdNAUSczdJR0HW/s1HDwhavehMIDx2BbtChj4Ip7hvDeuyYp7pHSe9l//8yBNTh/MwhOALnrf/fu2GhWBnDms+IMWMk1eOM8IxVYsV2QMl9F+Wyg7tV3hTxZZdw5BHZLlzEjdJpEJn0FVeaZEvYtEPF/yyECMivm9+6hDdoOLJKKSTIxPLNh0USXLnN6XiCqluiQE9Ok5dXTfO5/wxN2lb9D7LYtz9ectjat1wioQSdhklmkTdN7NuguB6O4cInhdobPM9oNnAFg1UtSlUc2J+5FuEuw+yyIBTVUqBnsyiYNsUiUpOOza7msEmg3KCUKxOvDAvUJZ/4JBKUlnmdVYHXzL9KnEEioVs1gFbmIjofbEVdjPleOQ8zaHruCIIxO3C/du/nNgDz3tUWpIzAnATNKZ6SFKi3/7UuYXgA9vqkbBun/xuAgbo0OwyESbLKcJhauT+765FIFVuaiapi7e/CAv2hNpUchEhxkclliWcGa1lY82rXBA/Hdt8cxli5XgXnHc28vVWCDgWqhu+kpk5eRiNYG1rTCsOjohRtYrgQoZVmZKciyjKYlDejZOHyfyk+5kM67CllcZeWBvrlAGU2aL0Vq1uwfo1EPbIlqrmGY0F0z3WfK41oOHQ8tlA1cGFE6BFVUeaxcVj2IB4O4NqLWDPb8RZU2WyKAZZBkJQJsUoAVs5Po7lwoGxAeaR01Fp/aXAhWEf5d7Y4X/XPBnusLVOjdomZGzwvPzKJvRsH/bZXcGj8z/sPjEeSKBWJU98B6DNN9enwMmzflEJDn32hxiMOciJKWUovkXw43qrN7g53dWbx/pB/hsIS6ONBRz9DSBGxoc+u1QCot0HtNxshtmbojp6I3OHmaoWudg571lOpiDpKtDhoaOVqWljB+I0xlWYFpu5o1vPSlpdM49OYcRnkchdQUrHLBVBq2UOgpDu9Cwe+6Dsf765Jap9fPubRJ1MgEK7uuj04xfN6XBFOXUe9WBAuGPS3fY5vQ3kmPeRVq6YqVVG4l74Qc26Tw0NCcyCC54g4a4yZ+H4njythibGm5gndeo+ChVtM2yl0XrRmKUC1vYDD4Hmjmc6Ju1W5eUz+rUT9bmK+f/ZH62eycfrbsQRL1+9le6mebqZ/dT6xF3XMmm/KlyWNelvMbGPK3pfpieNvtyP/yS+GBXf/FN9ifAgwAIOzB+qcKmLcAAAAASUVORK5CYII=",speed:1e3,timeStep:1,startIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADb0lEQVRYR8WWW4jcZBzFz8lukn1Si5fOjKK20NmEKtoFL+C1IBX0RQQFQeoiIipeHnxQCioURPBJhQo+yFJFEfRFKIKIN1wKFZGqtJPZbgtFTWa7i1LFy+bbyZHsztJ1MpkkI9I85vufc375/798CXGWL57lfFQDENgw/g4Qt0loQroE5CKl410r+WphPJkF55erPFQ5AMFuGO8RiU+TuCwvQNAioWdDuz0DQmVACgE2aeu5E8Y9QODGMoZpjaSP6fx2d8jwzyLNcADBrht/lsC1RUYD1g//ZS/f+itPnB6mHQpQj71XCT45QnhPooOhHdwEIsnzyAXYrMktluExgmODxJIiED8D2JFXszaO5P7Ibb9TGaAee28QfLhfKGhJ1L0du/15ura2R+xpgHsJnpMJkuZCN5isBiCMNYy/mPr3CeNEnOq4R4/0G9bi5jWEdYhgpquJzPaOO390EMTAEVwgr+kYtrMC7Qud4PG8p6nH3rsE7+tfT5A82HHaM6UB6sa/mcKX2fZjd+S03s4DqMXetAVmgkTtiezgpdIANTO505L12QDBQ6HTejMfwN9tAfsz4FUBGtp6KYx7csAI3gudINPi9bpa7L1mgU9kRmDhzs5466PSHUgLG8v+HIhtG0WC1JWuPuW2v+836+2bHwA4/9bAJPYvmxa48EclgLrx9lB8cUAXTgt6/m/b7F8/5WrGu4XC+wQvzLRf+DByW3dVew0BXKQtm8fMxE8ExgceRFAXwGEIDZL1vIAE3es6ztzXlQFWxxB7MwCn88RF9wV9EjnBrmF1Q78F6WaUcU4MO2qHmXexcv2Cc+zQyABrXfD3AXis6Gmzs9cHkRvcU6Qr/B+4WN75MpwHcF6R2Zl1LcM220Ie/7FIUwiQGtTiyUctWK8Xma2vJ9QLHTvYW6a+FAAE1o33DcGpQlOpHTrBFSBWCmuB8j+ljdifEpRCDIVOqJ0dO/iiTHhaU64DPbd67L9C4Kk8c0FvRU7wQNnwygDQ5RONeOI7kM0BJ95J4yRXLrH9+/8HkJ6QcfOqMVjfErQ2Bq1QN5yyg4NVwqt3oOdeM/5zlnBmlwsvh27rmarhIwOsvhWxf4DEHQA+De3W7SDSb0Plq9Im3Oi+9jPqzBqbu5bYiion9wQjA6zqtd0Bj8Sjho8+gv+S2Kf9B1+VRDBEEbAnAAAAAElFTkSuQmCC",endIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADdElEQVRYR8WWXYjcVBiG3zfJGb1oq4todXZnVOpsMlbRLtQK1p+CVNAbERQEqUVEVPy58EIpqFAQwasqVOhFWdrSIuiNUAQR/3ApVIr0hzozu93KJtktsgWRxeLmJPlKho52JzOTZIo2t+d7v/c5b76cHOIqP7zK/igEIADPlNWGyJBHQY4DHANlUcBZI4p/MubDqRqwXGRTuQAEUM0x9TIMvkXg1r4GIosA3rE9PUlA8oBkAsyO4Dq9Sh0GuTlPw3aN4Os1UfBUeQEXsjQDAZKdtypqCuR9WY3S63JcLelH1v2BPwdpBwI0q+pjgG8UN+8o5Ijt6gcJxP169AVorsXtKKkZkGYvsQDnKDIPYEO/mrYuxnOOHxwsDNCoqj0EX0oJRc4jlmec+fD7ZK09I6vVdgA7Aa7prhfBdN0L7EIAApjNqlokOHK5UCCBBU7U3OB0d8NWRW0U4CjIVKomsL7mBr/2guj5ChqjGKdZaqV3I7vrnn6t324aFXWI5LM9UnvB8fRkboDpivVQTOPHbgEh22xXHxgAsJ1kykgQ76i74Ye5AZqj1haYxncpQSwvOr7e2w+gVVXbBNyXSq4owGwZVW2V5nq8gs/qnk5HfKmwVVWfCPh6Krk4esL2o69yJ5AUNiqlaRK1FSIRgfBexw9OdjdL5gamOkWw1DW4emRZj9z8O/4qCGDtII0P0iJJTrb31JLe1znlZsashyPyc5A3pgcQXzpe8GShzzApPnsT1i5fo3ySVk+xSCTEcYBlArf0NYhlk+3rnwsDJIJWRU0KmRwyQz0i8k3d01sHiQf+C9rDaKqzA4/aAd2NWO4f9/XRoQESYbOidoN8dYgIvnDc4OksXeZ9oDGKG2iqMwCvz2r277osW6Gu3bEAL0uTCXAphVdAfprVrLPOOH7f9sOdeepzASR3wWZVHSM4kaNpy3aDuwiEOWrzX0pnymoiMnGs199uxcETx1vqfvhDHvOkJlcCnWbNMbULBt/s11xE9tc9/Xxe88IAv92Ga/+OSidIjHebCDDHC8Hdznks/WcA7cNpVN0jBn4BaayIPowfqC+ER4qYF07gn1dRsd4Fjcun/CPHDd4uaj40QPJVtKqlwwAeB+Rb29WPEYj+N4DEKLmMBqvUlBh6651zODeM+dAJdMxOA6X1QDCs+RUDXIlxR3sRcjswMD6XvKYAAAAASUVORK5CYII=",showInfoWin:!1,arrowPixel:.2,textStyle:{}},this._operators={...this._operators,...s};const u=new Ee({color:"rgba(255,255,255,0.4)"}),h=new or({color:"#3399CC",width:1.25});this._defaultStyles=[new Te({image:new ha({fill:u,stroke:h,radius:5}),fill:u,stroke:h})],this._nodesCollection=null,this._nodeInfos=[];const c=new ia({src:this._operators.carIcon,scale:1,anchor:[.5,.5],offset:[0,0]});c.load(),this._carIcon=new Te({image:c}),this._direction=0,a&&(this._map=a),this._viewCode=(f=this._map)==null?void 0:f.getView().getProjection().getCode(),this._status="stop",this._pathInfo=o,this._bubble=e,this._moving=!1,this._tracePointsModePlay=i,this._visible=t.visible,this._lineLayer=new Pa({source:new Na({features:[],strategy:E0}),properties:{vzBelong:"vzTrackPath",vzTime:l}}),this._movePath=[],this._lineLayer.set("projection",this._viewCode,!0),this._lineLayer.set("track-type","trackPath"),this._movePath=[],this._originPath=null,this._revealLayer=new Pa({source:new Na({features:[],strategy:E0}),properties:{vzBelong:"vzTrackPath",vzTime:l}}),this._revealLayer.set("projection",this._viewCode,!0),this._revealLayer.set("track-type","trackReveal"),this._showTracePoint=n,this._nodesLayer=new Pa({source:new Na({features:[],strategy:E0}),style:null,properties:{vzBelong:"vzTrackPath",vzTime:l},visible:this._visible}),this._nodesLayer.set("projection",this._viewCode,!0),this._nodesLayer.set("track-type","trackNodes"),this._nodesLayer.setVisible(this._showTracePoint),this._moveNodes=[],this._speed=this._operators.speed,this._timeStep=this._operators.timeStep,this._speedUp=1,this._nowTime=null,this._moveIdx=1,this._animateLayer=new Pa({source:new Na({features:[],strategy:E0}),style:new Te({stroke:new or({color:"red",width:2})}),properties:{vzBelong:"vzTrackPath",vzTime:l}}),this._animateLayer.set("projection",this._viewCode,!0),this._animateLayer.set("track-type","trackAnimate"),this._animateLine=new Le({geometry:new ke([])}),this._group=new Qi({layers:[this._lineLayer,this._revealLayer,this._nodesLayer,this._animateLayer],zIndex:99,properties:{type:"vzTrackPath",vzTime:l},visible:this._visible}),this._labelVisible=t.labelVisible||!1,a==null||a.addLayer(this._group),this._traceEvent=a==null?void 0:a.on(["singleclick","pointermove"],d=>{this.eventListener(d)}),this._eventType=["nodeClick","nodeMouseover","nodeMouseout","pathClick","pathMouseover","pathMouseout","move"],this._animateStart=new Le,this._textLayer=null,this._moveListener=null,this._step=0,this._simplifyEvent=a==null?void 0:a.getView().on("change:resolution",d=>{Number.isInteger(d.target.getZoom())&&this.simplifyOpera(d)}),this.initLinesAndMarkers()}simplifyOpera(t){var h,c;let e;const n=t.target.getProjection().getCode(),i=this._viewCode!==n,a=t.target.getResolution();e=this._nodesCollection?this._nodesCollection.map(f=>{var g,p;if(i&&f.get("isSimplify")===!1){const v=(g=f.getGeometry())==null?void 0:g.transform(this._viewCode,n);v instanceof rr&&f.setGeometry(v)}const d=(p=f.getGeometry())==null?void 0:p.getCoordinates();return{x:d[0]/a,y:d[1]/a,idx:f.get("node_idx")}}):[],i&&(this._viewCode=n);const o=S0t(e,2,!1),s=[],l=[];o.forEach(f=>{s.push([f.x*a,f.y*a]),l.push(f==null?void 0:f.idx)}),this._originPath instanceof ke&&this._originPath.setCoordinates(s),!this._moving&&this._status!=="moving"&&this._moveListener!==null&&this._tracePointsModePlay==="animation"&&this._originPath instanceof ke&&((h=this._animateLine.getGeometry())==null||h.setCoordinates(s.slice(0,l.indexOf(this._moveIdx)+1).concat([this._animateStart.getGeometry().getCoordinates()]))),(c=this._nodesLayer.getSource())==null||c.clear(),new Promise(f=>{var d;this._nodeInfos=[],this._nodesLayer.getVisible()&&((d=this._nodesCollection)==null||d.forEach((g,p)=>{g.set("isSimplify",!1),g.setStyle(null),l.includes(p+1)&&(g.set("isSimplify",!0),g.setStyle(this._defaultStyles),this._nodeInfos.push(g))})),f(this._nodeInfos)}).then(f=>{var d;(d=this._nodesLayer.getSource())==null||d.addFeatures(f)})}eventListener(t){var n,i,a,o,s,l,u,h,c;if((n=this._map)==null?void 0:n.hasFeatureAtPixel(t.pixel,{layerFilter:function(f){return f.get("track-type")==="trackPath"||f.get("track-type")==="trackNodes"},hitTolerance:0})){this._moveNodes=((i=this._map)==null?void 0:i.getFeaturesAtPixel(t.pixel,{layerFilter:function(g){return g.get("track-type")==="trackNodes"},hitTolerance:0}))||[],this._movePath=((a=this._map)==null?void 0:a.getFeaturesAtPixel(t.pixel,{layerFilter:function(g){return g.get("track-type")==="trackPath"},hitTolerance:0}))||[];const f=this._moveNodes.map(g=>g.getProperties()),d=this._movePath.map(g=>g);switch(t.type){case"singleclick":f.length>=1&&((o=this._map)==null||o.dispatchEvent({type:"nodeClick",target:this._bubble?[f[0]]:f,propagationStopped:!1,defaultPrevented:!1,preventDefault:function(){throw new Error("Function not implemented.")},stopPropagation:function(){throw new Error("Function not implemented.")}})),d.length>=1&&((s=this._map)==null||s.dispatchEvent({type:"pathClick",target:this._bubble?[d[0]]:d,propagationStopped:!1,defaultPrevented:!1,preventDefault:function(){throw new Error("Function not implemented.")},stopPropagation:function(){throw new Error("Function not implemented.")}}));break;case"pointermove":f.length>=1&&((l=this._map)==null||l.dispatchEvent({type:"nodeMouseover",target:this._bubble?[f[0]]:f,propagationStopped:!1,defaultPrevented:!1,preventDefault:function(){throw new Error("Function not implemented.")},stopPropagation:function(){throw new Error("Function not implemented.")}})),d.length>=1&&((u=this._map)==null||u.dispatchEvent({type:"pathMouseover",target:this._bubble?[d[0]]:d,propagationStopped:!1,defaultPrevented:!1,preventDefault:function(){throw new Error("Function not implemented.")},stopPropagation:function(){throw new Error("Function not implemented.")}}));break}}else{const f=this._moveNodes.map(g=>g.getProperties());this._moveNodes.length>0&&this._moveNodes.splice(0,this._moveNodes.length),t.type==="pointermove"&&f.length>0&&((h=this._map)==null||h.dispatchEvent({type:"nodeMouseout",target:this._bubble?[f[0]]:f,propagationStopped:!1,defaultPrevented:!1,preventDefault:function(){throw new Error("Function not implemented.")},stopPropagation:function(){throw new Error("Function not implemented.")}}));const d=this._movePath.map(g=>g);this._movePath.length>0&&this._movePath.splice(0,this._movePath.length),t.type==="pointermove"&&d.length>0&&((c=this._map)==null||c.dispatchEvent({type:"pathMouseout",target:this._bubble?[d[0]]:d,propagationStopped:!1,defaultPrevented:!1,preventDefault:function(){throw new Error("Function not implemented.")},stopPropagation:function(){throw new Error("Function not implemented.")}}))}}initLinesAndMarkers(){var u,h,c,f,d,g,p;const t=(u=this._pathInfo)==null?void 0:u.map(v=>[v.longitude,v.latitude]),e=[],n=[];let i=0;for(const v of t){const m=new Le({geometry:new rr(q8(v,this._viewCode))});let y=null;if(this._pathInfo&&(y=this._pathInfo[i]),y&&(y.node_idx=i+1,y.isSimplify=!1,m.setProperties(y,!0),m.setId("tackNode-"+y.node_idx)),i===0){const _=m.clone();this._animateStart=m.clone(),this._animateStart.setId("moveCarFeature"),_.setStyle(new Te({image:new ia({src:this._operators.startIcon,anchor:[.5,1]}),text:new Kn({text:""})})),(h=this._revealLayer.getSource())==null||h.addFeature(_)}else if(this._pathInfo&&i===this._pathInfo.length-1){const _=m.clone();_.setStyle(new Te({image:new ia({src:this._operators.endIcon,anchor:[.5,1]}),text:new Kn({text:""})})),(c=this._revealLayer.getSource())==null||c.addFeature(_)}n.push(m),i++}const a=new ke(t);this._originPath=a.transform("EPSG:4326",this._viewCode);const o=new Le({geometry:this._originPath}),s=new Te({image:new ia({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABfUlEQVQ4T3WTTSvFYRDFf8dLKIqytFckthTpJkQWlyhF2fgEVr6BheytpChEsqB08xbZWPgOJAs7ieRlNMzV//75P7vnmZkz58ycR2ZWD7QBF5KM1DGzTuBO0k065neZ2S3QBGwAU5I+iolmNgrsAI9An6SrNIgDnAE9EdgFJiS9+93MuoEToBx4AgYkXSZBHKAWOAS6IrAP5CW9BUge2AIqgJdg8guiSKoBDoDeDJBhwNlVBsiQpNPvGST0VgF7TjPeCsCIpNdo0g84O2fibx4r/AJEUjVwlJDjXbybU/eZjAGbMROXmC8BiKQ64BxoDyYLkuYTTCeB9WD/9B9AA3AMdGQAzALLAfCcluDF3r01itMS5oDFiP3MIUHNi90T7ko/XjyYGOIMsFJSXByimTVGQbFzegOuew0o+7PGKL4AmjM8MA2shua/RjIzX1suw8pucZfiUjOt/AC4BHfaeOoz+d63oziX9Zla3CzAkqTP9G8zM4/dS7r+7zt/Aaattn1kX8VgAAAAAElFTkSuQmCC",anchor:[.75,.5],scale:.7,rotateWithView:!1})});o.set("arrow",[new Te({stroke:new or({color:"rgba(0, 0, 255, 0.6)",width:10})}),s]),o.set("mainView",(f=this._map)==null?void 0:f.getView()),o.setStyle((v,m)=>R0t(v,m)),e.push(o),(d=this._lineLayer.getSource())==null||d.addFeatures(e),this._nodesCollection=n,(p=(g=this._animateLayer)==null?void 0:g.getSource())==null||p.addFeature(this._animateLine),o.get("mainView")!==void 0&&o.get("mainView").dispatchEvent("change:resolution");const l=this._labelVisible;this.labelVisible(l)}labelVisible(t){var e,n;if(t&&!this._textLayer){const i=(e=this._pathInfo)==null?void 0:e.map(a=>({position:[a.longitude,a.latitude],text:a.gnssTime}));if(this._textLayer=new Ak({map:this._map,pointsArr:i,zoom:12,zIndex:99}),this._textLayer){this._textLayer.set("id","pathLabelLayer"+new Date().getTime());let a=this._group.getLayers().getArray();a.push(this._textLayer),this._group.setLayers(new Qi({layers:a}).getLayers())}}else(n=this._textLayer)==null||n.setVisible(t);this._group.set("labelVisible",t||!1)}start(t){var e,n;this._pathInfo&&this._pathInfo.length<1||((this._moving||this._status==="pause")&&this.stop(),this._moveIdx=t||1,this._moving=!0,this._status="moving",this._nowTime=Date.now(),this._tracePointsModePlay==="skip"?(this._moveListener=this._lineLayer.on("postrender",i=>{this.tracePointsPlay(i)}),(e=this._map)==null||e.render()):this._tracePointsModePlay==="animation"&&(this._step=0,this._moveListener=this._lineLayer.on("postrender",i=>{this.animationPlay(i)}),(n=this._map)==null||n.render()))}stop(){var e,n,i,a;this._moveIdx=1,this._status="stop",this._moving=!1,this._step=0,this._moveListener!==null&&(Cu(this._moveListener),this._moveListener=null);const t=(e=this._animateLayer.getSource())==null?void 0:e.getFeatureById("moveCarFeature");t&&((n=this._animateLayer.getSource())==null||n.removeFeature(t)),(i=this._animateLine.getGeometry())==null||i.setCoordinates([]),this._originPath instanceof ke&&((a=this._animateStart.getGeometry())==null||a.setCoordinates(this._originPath.getFirstCoordinate()))}pause(){this._status="pause",this._moving=!1}resume(){this._status="moving",this._moving=!0}tracePointsPlay(t){var a,o,s,l,u,h,c,f,d,g;const e=t.frameState;if(!e)return;const n=this._nodesCollection?this._nodesCollection.map(p=>p.getGeometry().getCoordinates()):[],i=(e.time-(this._nowTime||0))/1e3%60;if(this._moving&&(this._moveIdx===1||i>=(this._timeStep||1))){this._nowTime=e.time;let p=this._moveIdx===1?this._speedUp:this._moveIdx+this._speedUp,v=null;const m=this._animateLine.getGeometry();if(n&&this._moveIdx===n.length){this.stop();return}if(n&&p>=n.length&&this._moveIdx<n.length){p=n.length;let w=null;n&&(w=new Le(new rr(n[p-1]))),v=w;const S=n[p-1][0]-n[p-2][0],T=n[p-1][1]-n[p-2][1],b=Math.atan2(T,S);this._direction!==b&&(this._direction=b),(o=(a=this._carIcon)==null?void 0:a.getImage())==null||o.setRotation(-this._direction+2*Math.PI);for(let E=n.length-this._moveIdx;E>0;--E)p!==0&&p-E<=n.length-1&&(m==null||m.appendCoordinate(n[p-E]))}else if(n&&p<n.length&&this._moveIdx<n.length){let w=null;if(n&&(w=new Le(new rr(n[p-1]))),v=w,n&&p!==n.length-1){const S=n[p][0]-n[p-1][0],T=n[p][1]-n[p-1][1],b=Math.atan2(T,S);this._direction!==b&&(this._direction=b),(l=(s=this._carIcon)==null?void 0:s.getImage())==null||l.setRotation(-this._direction+2*Math.PI)}for(let S=this._speedUp;S>0;--S)p!==0&&p-S<=n.length-1&&(m==null||m.appendCoordinate(n[p-S]))}this._animateStart.setStyle(this._carIcon),this._animateStart.getGeometry().setCoordinates(((u=v==null?void 0:v.getGeometry())==null?void 0:u.getCoordinates())||[0,0]),((h=this._animateLayer.getSource())==null?void 0:h.getFeatureById("moveCarFeature"))||(f=(c=this._animateLayer)==null?void 0:c.getSource())==null||f.addFeature(this._animateStart),this._moveIdx=p;const _=(d=this._map)==null?void 0:d.getView().getProjection().getCode(),x={index:this._moveIdx,status:this._status,position:n[p-1],lngLat:iN(this._animateStart.getGeometry().getCoordinates(),_),passNode:this._nodesCollection?this._nodesCollection[p-1]:void 0,length:m==null?void 0:m.getLength()};this._animateLayer.dispatchEvent({type:"move",target:x,propagationStopped:!1,defaultPrevented:!1,preventDefault:function(){throw new Error("Function not implemented.")},stopPropagation:function(){throw new Error("Function not implemented.")}})}(g=this._map)==null||g.render()}animationPlay(t){var n,i,a,o,s,l;let e=0;if(t.frameState){if(this._nowTime=t.frameState.time,this._originPath instanceof ke&&this._moving&&this._step!==void 0&&this._step<=1){const u=this._originPath.clone();u.transform(this._viewCode,"EPSG:3857");const h=u.getLength(),c=this._animateLine.getGeometry(),f=this._originPath.clone();if(this._step!==0){const _={geometry:{coordinates:f.getCoordinates(),type:"LineString"},properties:{},type:"Feature"};e=h*this._step;const x=A0t(_,0,e/1e3,{units:"kilometers"});f.setCoordinates(x.geometry.coordinates),f.transform("EPSG:4326",this._viewCode);const w=f.getCoordinates();c==null||c.setCoordinates(w);let S=0,T=0;if(w.length>2){const E=w[w.length-2],C=w[w.length-1];S=E[0]-C[0],T=E[1]-C[1];const M=Math.atan2(T,S);this._direction!==M&&(this._direction=M),(i=(n=this._carIcon)==null?void 0:n.getImage())==null||i.setRotation(-this._direction+Math.PI)}this._animateStart.setStyle(this._carIcon),this._animateStart.getGeometry().setCoordinates(f.getLastCoordinate()),((a=this._animateLayer.getSource())==null?void 0:a.getFeatureById("moveCarFeature"))||(o=this._animateLayer.getSource())==null||o.addFeature(this._animateStart)}const d=c==null?void 0:c.getLength();let g=0,p=0;const v=new ke([]);this._originPath.forEachSegment(function(_,x){v.setCoordinates([_,x]),p<=d&&(p+=v.getLength(),g++)}),this._moveIdx=this._nodeInfos[g-1].get("node_idx"),this._step+=5*1e-7*(this._speed||0);const m=(s=this._map)==null?void 0:s.getView().getProjection().getCode(),y={index:this._moveIdx,status:this._status,speed:this._speed,position:this._animateStart.getGeometry().getCoordinates(),lngLat:iN(this._animateStart.getGeometry().getCoordinates(),m),passNode:this._nodesCollection?this._nodesCollection[this._moveIdx-1]:void 0,length:d};this._animateLayer.dispatchEvent({type:"move",target:y,propagationStopped:!1,defaultPrevented:!1,preventDefault:function(){throw new Error("Function not implemented.")},stopPropagation:function(){throw new Error("Function not implemented.")}})}if(this._moving&&this._step&&this._step>=1){this.stop();return}(l=this._map)==null||l.render()}}setFitView(t){var e;this._originPath!==null&&t&&((e=this._map)==null||e.getView().fit(this._originPath))}getPaths(){return this._pathInfo}setPaths(t){this.clearPaths(),this._pathInfo=t,this.initLinesAndMarkers()}clearPaths(){this._moving&&this.stop(),this._group.getLayersArray().forEach(t=>{(t instanceof Pa||t instanceof Ak)&&t.getSource().clear()})}destroy(){var t,e,n;this._moving&&this.stop(),this.clearPaths(),Cu(this._traceEvent||[]),(n=this._map)==null||n.getView().removeEventListener("change:resolution",(t=this._simplifyEvent)!=null&&t.listener?(e=this._simplifyEvent)==null?void 0:e.listener:()=>{})}getSpeed(){return this._speed}setSpeed(t){this._speed=t}getSpeedUp(){return this._speedUp}setSpeedUp(t){this._speedUp=t,this._speed=(this._speed||0)*t}getPercent(){return this._step>0?Number(this._step.toPrecision(3)):0}setPercent(t){t<=1&&t>=0&&(this._step=t)}setTraceLineStyle(t){var a;t=t||{};const e=t.lineColor?t.lineColor:"rgba(0, 0, 255, 0.6)",n=t.lineWidth?t.lineWidth:10,i=(a=this._lineLayer.getSource())==null?void 0:a.getFeatures();i==null||i.forEach(o=>{o.get("arrow")[0].setStroke(new or({color:e,width:n}))}),this._lineLayer.changed()}setPassLineStyle(t){t=t||{};const e=t.lineColor?t.lineColor:"red",n=t.lineWidth?t.lineWidth:2,i=new Te({stroke:new or({color:e,width:n})});this._animateLayer.setStyle(i),this._animateLayer.changed()}setTraceNodeStyle(t){var l;t=t||{};const e=t.fillColor?t.fillColor:"rgba(255,255,255,0.4)",n=t.lineColor?t.lineColor:"#3399CC",i=t.lineWidth?t.lineWidth:1.25,a=t.size?t.size:5,o=new Ee({color:e}),s=new or({color:n,width:i});this._defaultStyles=[new Te({image:new ha({fill:o,stroke:s,radius:a}),fill:o,stroke:s})],(l=this._nodesLayer.getSource())==null||l.getFeatures().forEach(u=>{u.setStyle(this._defaultStyles),u.changed()})}getEvents(){return this._eventType}on(t,e){var i;if(this._eventType.includes(t))return t==="move"?this._animateLayer.on(t,e):(i=this._map)==null?void 0:i.on(t,e)}once(t,e){var i;if(this._eventType.includes(t))return t==="move"?this._animateLayer.once(t,e):(i=this._map)==null?void 0:i.once(t,e)}un(t,e){var i;if(this._eventType.includes(t))return t==="move"?this._animateLayer.un(t,e):(i=this._map)==null?void 0:i.un(t,e)}}function R0t(r,t){const e=r.get("arrow"),n=r.get("mainView"),i=[e[0]],a=r.getGeometry();if(a&&a instanceof ke){const o=a.getLength(),s=200*(t||0)/o;for(let l=0;l<=1;l+=s){const u=a.getCoordinateAt(l);if(mo(n.calculateExtent(),u)){const c=a.getCoordinateAt(l+5e-5),f=c[0]-u[0],d=c[1]-u[1],g=Math.atan2(d,f);if(l!==0){const p=e[1].clone();p.setGeometry(new rr(u)),p.getImage().setRotation(-g+2*Math.PI),i.push(p)}}}}return i}const P0t=Wr({name:"OlPath",props:{bubble:{type:Boolean,default:!0},showTracePoint:{type:Boolean,default:!0},tracePointsModePlay:{type:String,default:""},path:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},autoPlay:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},labelVisible:{type:Boolean,default:!1}},emits:["load","nodeClick","nodeMouseover","nodeMouseout","pathClick","pathMouseover","pathMouseout","move"],setup(r,{expose:t,emit:e}){const n=$e("VMap"),i=qt(n).map;let a=Er();He(()=>r.visible,S=>{const T=i.getLayerGroup();if(T){const E=T.getLayers().getArray().find(C=>C.get("type")==="vzTrackPath");E&&E.setVisible(S)}}),He(()=>r.labelVisible,S=>{const T=i.getLayerGroup();if(T){const E=T.getLayers().getArray().find(C=>C.get("type")==="vzTrackPath");E&&E.getLayersArray().forEach(C=>{C.get("id")&&C.get("id").indexOf("pathLabelLayer")>-1&&C.setVisible(S)})}});const o=S=>{var T,b,E,C,M,A,R;if(S&&S.length>0||r.path&&r.path.length>0){const P={...r,mapObj:i,path:S||r.path},L=new I0t(P);L.setTraceLineStyle({lineColor:((T=P.options)==null?void 0:T.lineColor)||"rgba(0, 0, 255, 0.6)",lineWidth:((b=P.options)==null?void 0:b.lineWidth)||10}),L.setPassLineStyle({lineColor:((E=P.options)==null?void 0:E.passLineColor)||"red",lineWidth:((C=P.options)==null?void 0:C.passLineWidth)||2}),L.setTraceNodeStyle({lineColor:((M=P.options)==null?void 0:M.nodeStrokeColor)||"#3399CC",lineWidth:((A=P.options)==null?void 0:A.nodeStrokeWidth)||1.25,fillColor:((R=P.options)==null?void 0:R.nodeFillColor)||"rgba(255,255,255,0.4)"}),a.value=L,a.value.getEvents().forEach(D=>{var k;(k=a.value)==null||k.on(D,F=>{e(D,F)})}),e("load",a),r.autoPlay&&s()}},s=S=>{var T;(T=a.value)==null||T.start(S)},l=()=>{var S;(S=a.value)==null||S.stop()},u=()=>{var S;(S=a.value)==null||S.pause()},h=()=>{var S;(S=a.value)==null||S.resume()},c=()=>{var S;return(S=a.value)==null?void 0:S._status},f=()=>{var S;(S=a.value)==null||S.destroy()},d=S=>{var T;(T=a.value)==null||T.setFitView(S)},g=()=>{var S;return(S=a.value)==null?void 0:S.getPaths()},p=S=>{var T;(T=a.value)==null||T.setPaths(S)},v=()=>{var S;return(S=a.value)==null?void 0:S.getSpeed()},m=S=>{var T;(T=a.value)==null||T.setSpeed(S)},y=()=>{var S;return(S=a.value)==null?void 0:S.getSpeedUp()},_=S=>{var T;(T=a.value)==null||T.setSpeedUp(S)},x=()=>{var S;return(S=a.value)==null?void 0:S.getPercent()},w=S=>{var T;(T=a.value)==null||T.setPercent(S)};fn(()=>{o()}),t({init:o,start:s,stop:l,pause:u,resume:h,getStatus:c,destroy:f,setFitView:d,getPaths:g,setPaths:p,getSpeed:v,setSpeed:m,getSpeedUp:y,setSpeedUp:_,getPercent:x,setPercent:w})},render(){return null}});var L0t=Error,D0t=EvalError,O0t=RangeError,N0t=ReferenceError,_9=SyntaxError,Uy=TypeError,F0t=URIError,k0t=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[e]=i;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Pk=typeof Symbol<"u"&&Symbol,G0t=k0t,B0t=function(){return typeof Pk!="function"||typeof Symbol!="function"||typeof Pk("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:G0t()},bb={__proto__:null,foo:{}},z0t=Object,V0t=function(){return{__proto__:bb}.foo===bb.foo&&!(bb instanceof z0t)},U0t="Function.prototype.bind called on incompatible ",W0t=Object.prototype.toString,H0t=Math.max,$0t="[object Function]",Lk=function(t,e){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var a=0;a<e.length;a+=1)n[a+t.length]=e[a];return n},Y0t=function(t,e){for(var n=[],i=e,a=0;i<t.length;i+=1,a+=1)n[a]=t[i];return n},X0t=function(r,t){for(var e="",n=0;n<r.length;n+=1)e+=r[n],n+1<r.length&&(e+=t);return e},Z0t=function(t){var e=this;if(typeof e!="function"||W0t.apply(e)!==$0t)throw new TypeError(U0t+e);for(var n=Y0t(arguments,1),i,a=function(){if(this instanceof i){var h=e.apply(this,Lk(n,arguments));return Object(h)===h?h:this}return e.apply(t,Lk(n,arguments))},o=H0t(0,e.length-n.length),s=[],l=0;l<o;l++)s[l]="$"+l;if(i=Function("binder","return function ("+X0t(s,",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var u=function(){};u.prototype=e.prototype,i.prototype=new u,u.prototype=null}return i},j0t=Z0t,AP=Function.prototype.bind||j0t,K0t=Function.prototype.call,q0t=Object.prototype.hasOwnProperty,J0t=AP,Q0t=J0t.call(K0t,q0t),Re,t_t=L0t,e_t=D0t,r_t=O0t,n_t=N0t,cg=_9,Vd=Uy,i_t=F0t,x9=Function,Eb=function(r){try{return x9('"use strict"; return ('+r+").constructor;")()}catch{}},xc=Object.getOwnPropertyDescriptor;if(xc)try{xc({},"")}catch{xc=null}var Cb=function(){throw new Vd},a_t=xc?function(){try{return arguments.callee,Cb}catch{try{return xc(arguments,"callee").get}catch{return Cb}}}():Cb,bf=B0t(),o_t=V0t(),gn=Object.getPrototypeOf||(o_t?function(r){return r.__proto__}:null),rd={},s_t=typeof Uint8Array>"u"||!gn?Re:gn(Uint8Array),Sc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Re:ArrayBuffer,"%ArrayIteratorPrototype%":bf&&gn?gn([][Symbol.iterator]()):Re,"%AsyncFromSyncIteratorPrototype%":Re,"%AsyncFunction%":rd,"%AsyncGenerator%":rd,"%AsyncGeneratorFunction%":rd,"%AsyncIteratorPrototype%":rd,"%Atomics%":typeof Atomics>"u"?Re:Atomics,"%BigInt%":typeof BigInt>"u"?Re:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Re:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Re:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t_t,"%eval%":eval,"%EvalError%":e_t,"%Float32Array%":typeof Float32Array>"u"?Re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Re:FinalizationRegistry,"%Function%":x9,"%GeneratorFunction%":rd,"%Int8Array%":typeof Int8Array>"u"?Re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bf&&gn?gn(gn([][Symbol.iterator]())):Re,"%JSON%":typeof JSON=="object"?JSON:Re,"%Map%":typeof Map>"u"?Re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!bf||!gn?Re:gn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Re:Promise,"%Proxy%":typeof Proxy>"u"?Re:Proxy,"%RangeError%":r_t,"%ReferenceError%":n_t,"%Reflect%":typeof Reflect>"u"?Re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!bf||!gn?Re:gn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bf&&gn?gn(""[Symbol.iterator]()):Re,"%Symbol%":bf?Symbol:Re,"%SyntaxError%":cg,"%ThrowTypeError%":a_t,"%TypedArray%":s_t,"%TypeError%":Vd,"%Uint8Array%":typeof Uint8Array>"u"?Re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Re:Uint32Array,"%URIError%":i_t,"%WeakMap%":typeof WeakMap>"u"?Re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Re:WeakSet};if(gn)try{null.error}catch(r){var l_t=gn(gn(r));Sc["%Error.prototype%"]=l_t}var u_t=function r(t){var e;if(t==="%AsyncFunction%")e=Eb("async function () {}");else if(t==="%GeneratorFunction%")e=Eb("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Eb("async function* () {}");else if(t==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(e=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&gn&&(e=gn(i.prototype))}return Sc[t]=e,e},Dk={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Wy=AP,Lx=Q0t,h_t=Wy.call(Function.call,Array.prototype.concat),c_t=Wy.call(Function.apply,Array.prototype.splice),Ok=Wy.call(Function.call,String.prototype.replace),Dx=Wy.call(Function.call,String.prototype.slice),f_t=Wy.call(Function.call,RegExp.prototype.exec),d_t=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,g_t=/\\(\\)?/g,p_t=function(t){var e=Dx(t,0,1),n=Dx(t,-1);if(e==="%"&&n!=="%")throw new cg("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new cg("invalid intrinsic syntax, expected opening `%`");var i=[];return Ok(t,d_t,function(a,o,s,l){i[i.length]=s?Ok(l,g_t,"$1"):o||a}),i},v_t=function(t,e){var n=t,i;if(Lx(Dk,n)&&(i=Dk[n],n="%"+i[0]+"%"),Lx(Sc,n)){var a=Sc[n];if(a===rd&&(a=u_t(n)),typeof a>"u"&&!e)throw new Vd("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new cg("intrinsic "+t+" does not exist!")},Wg=function(t,e){if(typeof t!="string"||t.length===0)throw new Vd("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Vd('"allowMissing" argument must be a boolean');if(f_t(/^%?[^%]*%?$/,t)===null)throw new cg("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=p_t(t),i=n.length>0?n[0]:"",a=v_t("%"+i+"%",e),o=a.name,s=a.value,l=!1,u=a.alias;u&&(i=u[0],c_t(n,h_t([0,1],u)));for(var h=1,c=!0;h<n.length;h+=1){var f=n[h],d=Dx(f,0,1),g=Dx(f,-1);if((d==='"'||d==="'"||d==="`"||g==='"'||g==="'"||g==="`")&&d!==g)throw new cg("property names with quotes must have matching quotes");if((f==="constructor"||!c)&&(l=!0),i+="."+f,o="%"+i+"%",Lx(Sc,o))s=Sc[o];else if(s!=null){if(!(f in s)){if(!e)throw new Vd("base intrinsic for "+t+" exists, but the property is not available.");return}if(xc&&h+1>=n.length){var p=xc(s,f);c=!!p,c&&"get"in p&&!("originalValue"in p.get)?s=p.get:s=s[f]}else c=Lx(s,f),s=s[f];c&&!l&&(Sc[o]=s)}}return s},S9={exports:{}},Mb,Nk;function IP(){if(Nk)return Mb;Nk=1;var r=Wg,t=r("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Mb=t,Mb}var m_t=Wg,y1=m_t("%Object.getOwnPropertyDescriptor%",!0);if(y1)try{y1([],"length")}catch{y1=null}var w9=y1,Fk=IP(),y_t=_9,Ef=Uy,kk=w9,__t=function(t,e,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Ef("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new Ef("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ef("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ef("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ef("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ef("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!kk&&kk(t,e);if(Fk)Fk(t,e,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:a===null&&l?l.writable:!a});else if(s||!i&&!a&&!o)t[e]=n;else throw new y_t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},fA=IP(),T9=function(){return!!fA};T9.hasArrayLengthDefineBug=function(){if(!fA)return null;try{return fA([],"length",{value:1}).length!==1}catch{return!0}};var x_t=T9,S_t=Wg,Gk=__t,w_t=x_t(),Bk=w9,zk=Uy,T_t=S_t("%Math.floor%"),b_t=function(t,e){if(typeof t!="function")throw new zk("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||T_t(e)!==e)throw new zk("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in t&&Bk){var o=Bk(t,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(a=!1)}return(i||a||!n)&&(w_t?Gk(t,"length",e,!0,!0):Gk(t,"length",e)),t};(function(r){var t=AP,e=Wg,n=b_t,i=Uy,a=e("%Function.prototype.apply%"),o=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||t.call(o,a),l=IP(),u=e("%Math.max%");r.exports=function(f){if(typeof f!="function")throw new i("a function is required");var d=s(t,o,arguments);return n(d,1+u(0,f.length-(arguments.length-1)),!0)};var h=function(){return s(t,a,arguments)};l?l(r.exports,"apply",{value:h}):r.exports.apply=h})(S9);var E_t=S9.exports,b9=Wg,E9=E_t,C_t=E9(b9("String.prototype.indexOf")),M_t=function(t,e){var n=b9(t,!!e);return typeof n=="function"&&C_t(t,".prototype.")>-1?E9(n):n};const A_t=zht(Nct);var RP=typeof Map=="function"&&Map.prototype,Ab=Object.getOwnPropertyDescriptor&&RP?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ox=RP&&Ab&&typeof Ab.get=="function"?Ab.get:null,Vk=RP&&Map.prototype.forEach,PP=typeof Set=="function"&&Set.prototype,Ib=Object.getOwnPropertyDescriptor&&PP?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Nx=PP&&Ib&&typeof Ib.get=="function"?Ib.get:null,Uk=PP&&Set.prototype.forEach,I_t=typeof WeakMap=="function"&&WeakMap.prototype,Hv=I_t?WeakMap.prototype.has:null,R_t=typeof WeakSet=="function"&&WeakSet.prototype,$v=R_t?WeakSet.prototype.has:null,P_t=typeof WeakRef=="function"&&WeakRef.prototype,Wk=P_t?WeakRef.prototype.deref:null,L_t=Boolean.prototype.valueOf,D_t=Object.prototype.toString,O_t=Function.prototype.toString,N_t=String.prototype.match,LP=String.prototype.slice,au=String.prototype.replace,F_t=String.prototype.toUpperCase,Hk=String.prototype.toLowerCase,C9=RegExp.prototype.test,$k=Array.prototype.concat,$o=Array.prototype.join,k_t=Array.prototype.slice,Yk=Math.floor,dA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Rb=Object.getOwnPropertySymbols,gA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,fg=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Jn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===fg||!0)?Symbol.toStringTag:null,M9=Object.prototype.propertyIsEnumerable,Xk=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Zk(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||C9.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-Yk(-r):Yk(r);if(n!==r){var i=String(n),a=LP.call(t,i.length+1);return au.call(i,e,"$&_")+"."+au.call(au.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return au.call(t,e,"$&_")}var pA=A_t,jk=pA.custom,Kk=I9(jk)?jk:null,G_t=function r(t,e,n,i){var a=e||{};if(ql(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ql(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ql(a,"customInspect")?a.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ql(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ql(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=a.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return P9(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return s?Zk(t,l):l}if(typeof t=="bigint"){var u=String(t)+"n";return s?Zk(t,u):u}var h=typeof a.depth>"u"?5:a.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof t=="object")return vA(t)?"[Array]":"[Object]";var c=r1t(a,n);if(typeof i>"u")i=[];else if(R9(i,t)>=0)return"[Circular]";function f(R,P,L){if(P&&(i=k_t.call(i),i.push(P)),L){var D={depth:a.depth};return ql(a,"quoteStyle")&&(D.quoteStyle=a.quoteStyle),r(R,D,n+1,i)}return r(R,a,n+1,i)}if(typeof t=="function"&&!qk(t)){var d=X_t(t),g=q0(t,f);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(g.length>0?" { "+$o.call(g,", ")+" }":"")}if(I9(t)){var p=fg?au.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):gA.call(t);return typeof t=="object"&&!fg?Ep(p):p}if(Q_t(t)){for(var v="<"+Hk.call(String(t.nodeName)),m=t.attributes||[],y=0;y<m.length;y++)v+=" "+m[y].name+"="+A9(B_t(m[y].value),"double",a);return v+=">",t.childNodes&&t.childNodes.length&&(v+="..."),v+="</"+Hk.call(String(t.nodeName))+">",v}if(vA(t)){if(t.length===0)return"[]";var _=q0(t,f);return c&&!e1t(_)?"["+mA(_,c)+"]":"[ "+$o.call(_,", ")+" ]"}if(V_t(t)){var x=q0(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!M9.call(t,"cause")?"{ ["+String(t)+"] "+$o.call($k.call("[cause]: "+f(t.cause),x),", ")+" }":x.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+$o.call(x,", ")+" }"}if(typeof t=="object"&&o){if(Kk&&typeof t[Kk]=="function"&&pA)return pA(t,{depth:h-n});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Z_t(t)){var w=[];return Vk&&Vk.call(t,function(R,P){w.push(f(P,t,!0)+" => "+f(R,t))}),Jk("Map",Ox.call(t),w,c)}if(q_t(t)){var S=[];return Uk&&Uk.call(t,function(R){S.push(f(R,t))}),Jk("Set",Nx.call(t),S,c)}if(j_t(t))return Pb("WeakMap");if(J_t(t))return Pb("WeakSet");if(K_t(t))return Pb("WeakRef");if(W_t(t))return Ep(f(Number(t)));if($_t(t))return Ep(f(dA.call(t)));if(H_t(t))return Ep(L_t.call(t));if(U_t(t))return Ep(f(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof NF<"u"&&t===NF)return"{ [object globalThis] }";if(!z_t(t)&&!qk(t)){var T=q0(t,f),b=Xk?Xk(t)===Object.prototype:t instanceof Object||t.constructor===Object,E=t instanceof Object?"":"null prototype",C=!b&&Jn&&Object(t)===t&&Jn in t?LP.call(Ju(t),8,-1):E?"Object":"",M=b||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",A=M+(C||E?"["+$o.call($k.call([],C||[],E||[]),": ")+"] ":"");return T.length===0?A+"{}":c?A+"{"+mA(T,c)+"}":A+"{ "+$o.call(T,", ")+" }"}return String(t)};function A9(r,t,e){var n=(e.quoteStyle||t)==="double"?'"':"'";return n+r+n}function B_t(r){return au.call(String(r),/"/g,"&quot;")}function vA(r){return Ju(r)==="[object Array]"&&(!Jn||!(typeof r=="object"&&Jn in r))}function z_t(r){return Ju(r)==="[object Date]"&&(!Jn||!(typeof r=="object"&&Jn in r))}function qk(r){return Ju(r)==="[object RegExp]"&&(!Jn||!(typeof r=="object"&&Jn in r))}function V_t(r){return Ju(r)==="[object Error]"&&(!Jn||!(typeof r=="object"&&Jn in r))}function U_t(r){return Ju(r)==="[object String]"&&(!Jn||!(typeof r=="object"&&Jn in r))}function W_t(r){return Ju(r)==="[object Number]"&&(!Jn||!(typeof r=="object"&&Jn in r))}function H_t(r){return Ju(r)==="[object Boolean]"&&(!Jn||!(typeof r=="object"&&Jn in r))}function I9(r){if(fg)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!gA)return!1;try{return gA.call(r),!0}catch{}return!1}function $_t(r){if(!r||typeof r!="object"||!dA)return!1;try{return dA.call(r),!0}catch{}return!1}var Y_t=Object.prototype.hasOwnProperty||function(r){return r in this};function ql(r,t){return Y_t.call(r,t)}function Ju(r){return D_t.call(r)}function X_t(r){if(r.name)return r.name;var t=N_t.call(O_t.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function R9(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,n=r.length;e<n;e++)if(r[e]===t)return e;return-1}function Z_t(r){if(!Ox||!r||typeof r!="object")return!1;try{Ox.call(r);try{Nx.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function j_t(r){if(!Hv||!r||typeof r!="object")return!1;try{Hv.call(r,Hv);try{$v.call(r,$v)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function K_t(r){if(!Wk||!r||typeof r!="object")return!1;try{return Wk.call(r),!0}catch{}return!1}function q_t(r){if(!Nx||!r||typeof r!="object")return!1;try{Nx.call(r);try{Ox.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function J_t(r){if(!$v||!r||typeof r!="object")return!1;try{$v.call(r,$v);try{Hv.call(r,Hv)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function Q_t(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function P9(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,n="... "+e+" more character"+(e>1?"s":"");return P9(LP.call(r,0,t.maxStringLength),t)+n}var i=au.call(au.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,t1t);return A9(i,"single",t)}function t1t(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+F_t.call(t.toString(16))}function Ep(r){return"Object("+r+")"}function Pb(r){return r+" { ? }"}function Jk(r,t,e,n){var i=n?mA(e,n):$o.call(e,", ");return r+" ("+t+") {"+i+"}"}function e1t(r){for(var t=0;t<r.length;t++)if(R9(r[t],`
`)>=0)return!1;return!0}function r1t(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=$o.call(Array(r.indent+1)," ");else return null;return{base:e,prev:$o.call(Array(t+1),e)}}function mA(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+$o.call(r,","+e)+`
`+t.prev}function q0(r,t){var e=vA(r),n=[];if(e){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=ql(r,i)?t(r[i],r):""}var a=typeof Rb=="function"?Rb(r):[],o;if(fg){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var l in r)ql(r,l)&&(e&&String(Number(l))===l&&l<r.length||fg&&o["$"+l]instanceof Symbol||(C9.call(/[^\w$]/,l)?n.push(t(l,r)+": "+t(r[l],r)):n.push(l+": "+t(r[l],r))));if(typeof Rb=="function")for(var u=0;u<a.length;u++)M9.call(r,a[u])&&n.push("["+t(a[u])+"]: "+t(r[a[u]],r));return n}var L9=Wg,Hg=M_t,n1t=G_t,i1t=Uy,J0=L9("%WeakMap%",!0),Q0=L9("%Map%",!0),a1t=Hg("WeakMap.prototype.get",!0),o1t=Hg("WeakMap.prototype.set",!0),s1t=Hg("WeakMap.prototype.has",!0),l1t=Hg("Map.prototype.get",!0),u1t=Hg("Map.prototype.set",!0),h1t=Hg("Map.prototype.has",!0),DP=function(r,t){for(var e=r,n;(n=e.next)!==null;e=n)if(n.key===t)return e.next=n.next,n.next=r.next,r.next=n,n},c1t=function(r,t){var e=DP(r,t);return e&&e.value},f1t=function(r,t,e){var n=DP(r,t);n?n.value=e:r.next={key:t,next:r.next,value:e}},d1t=function(r,t){return!!DP(r,t)},g1t=function(){var t,e,n,i={assert:function(a){if(!i.has(a))throw new i1t("Side channel does not contain "+n1t(a))},get:function(a){if(J0&&a&&(typeof a=="object"||typeof a=="function")){if(t)return a1t(t,a)}else if(Q0){if(e)return l1t(e,a)}else if(n)return c1t(n,a)},has:function(a){if(J0&&a&&(typeof a=="object"||typeof a=="function")){if(t)return s1t(t,a)}else if(Q0){if(e)return h1t(e,a)}else if(n)return d1t(n,a);return!1},set:function(a,o){J0&&a&&(typeof a=="object"||typeof a=="function")?(t||(t=new J0),o1t(t,a,o)):Q0?(e||(e=new Q0),u1t(e,a,o)):(n||(n={key:{},next:null}),f1t(n,a,o))}};return i},p1t=String.prototype.replace,v1t=/%20/g,Lb={RFC1738:"RFC1738",RFC3986:"RFC3986"},OP={default:Lb.RFC3986,formatters:{RFC1738:function(r){return p1t.call(r,v1t,"+")},RFC3986:function(r){return String(r)}},RFC1738:Lb.RFC1738,RFC3986:Lb.RFC3986},m1t=OP,Db=Object.prototype.hasOwnProperty,tc=Array.isArray,Po=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),y1t=function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(tc(n)){for(var i=[],a=0;a<n.length;++a)typeof n[a]<"u"&&i.push(n[a]);e.obj[e.prop]=i}}},D9=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},_1t=function r(t,e,n){if(!e)return t;if(typeof e!="object"){if(tc(t))t.push(e);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Db.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var i=t;return tc(t)&&!tc(e)&&(i=D9(t,n)),tc(t)&&tc(e)?(e.forEach(function(a,o){if(Db.call(t,o)){var s=t[o];s&&typeof s=="object"&&a&&typeof a=="object"?t[o]=r(s,a,n):t.push(a)}else t[o]=a}),t):Object.keys(e).reduce(function(a,o){var s=e[o];return Db.call(a,o)?a[o]=r(a[o],s,n):a[o]=s,a},i)},x1t=function(t,e){return Object.keys(e).reduce(function(n,i){return n[i]=e[i],n},t)},S1t=function(r,t,e){var n=r.replace(/\+/g," ");if(e==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Ob=1024,w1t=function(t,e,n,i,a){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var s="",l=0;l<o.length;l+=Ob){for(var u=o.length>=Ob?o.slice(l,l+Ob):o,h=[],c=0;c<u.length;++c){var f=u.charCodeAt(c);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||a===m1t.RFC1738&&(f===40||f===41)){h[h.length]=u.charAt(c);continue}if(f<128){h[h.length]=Po[f];continue}if(f<2048){h[h.length]=Po[192|f>>6]+Po[128|f&63];continue}if(f<55296||f>=57344){h[h.length]=Po[224|f>>12]+Po[128|f>>6&63]+Po[128|f&63];continue}c+=1,f=65536+((f&1023)<<10|u.charCodeAt(c)&1023),h[h.length]=Po[240|f>>18]+Po[128|f>>12&63]+Po[128|f>>6&63]+Po[128|f&63]}s+=h.join("")}return s},T1t=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],i=0;i<e.length;++i)for(var a=e[i],o=a.obj[a.prop],s=Object.keys(o),l=0;l<s.length;++l){var u=s[l],h=o[u];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(e.push({obj:o,prop:u}),n.push(h))}return y1t(e),t},b1t=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},E1t=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},C1t=function(t,e){return[].concat(t,e)},M1t=function(t,e){if(tc(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(e(t[i]));return n}return e(t)},O9={arrayToObject:D9,assign:x1t,combine:C1t,compact:T1t,decode:S1t,encode:w1t,isBuffer:E1t,isRegExp:b1t,maybeMap:M1t,merge:_1t},N9=g1t,_1=O9,Yv=OP,A1t=Object.prototype.hasOwnProperty,F9={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Uo=Array.isArray,I1t=Array.prototype.push,k9=function(r,t){I1t.apply(r,Uo(t)?t:[t])},R1t=Date.prototype.toISOString,Qk=Yv.default,Qr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_1.encode,encodeValuesOnly:!1,format:Qk,formatter:Yv.formatters[Qk],indices:!1,serializeDate:function(t){return R1t.call(t)},skipNulls:!1,strictNullHandling:!1},P1t=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Nb={},L1t=function r(t,e,n,i,a,o,s,l,u,h,c,f,d,g,p,v,m,y){for(var _=t,x=y,w=0,S=!1;(x=x.get(Nb))!==void 0&&!S;){var T=x.get(t);if(w+=1,typeof T<"u"){if(T===w)throw new RangeError("Cyclic object value");S=!0}typeof x.get(Nb)>"u"&&(w=0)}if(typeof h=="function"?_=h(e,_):_ instanceof Date?_=d(_):n==="comma"&&Uo(_)&&(_=_1.maybeMap(_,function(V){return V instanceof Date?d(V):V})),_===null){if(o)return u&&!v?u(e,Qr.encoder,m,"key",g):e;_=""}if(P1t(_)||_1.isBuffer(_)){if(u){var b=v?e:u(e,Qr.encoder,m,"key",g);return[p(b)+"="+p(u(_,Qr.encoder,m,"value",g))]}return[p(e)+"="+p(String(_))]}var E=[];if(typeof _>"u")return E;var C;if(n==="comma"&&Uo(_))v&&u&&(_=_1.maybeMap(_,u)),C=[{value:_.length>0?_.join(",")||null:void 0}];else if(Uo(h))C=h;else{var M=Object.keys(_);C=c?M.sort(c):M}var A=l?e.replace(/\./g,"%2E"):e,R=i&&Uo(_)&&_.length===1?A+"[]":A;if(a&&Uo(_)&&_.length===0)return R+"[]";for(var P=0;P<C.length;++P){var L=C[P],D=typeof L=="object"&&typeof L.value<"u"?L.value:_[L];if(!(s&&D===null)){var k=f&&l?L.replace(/\./g,"%2E"):L,F=Uo(_)?typeof n=="function"?n(R,k):R:R+(f?"."+k:"["+k+"]");y.set(t,w);var B=N9();B.set(Nb,y),k9(E,r(D,F,n,i,a,o,s,l,n==="comma"&&v&&Uo(_)?null:u,h,c,f,d,g,p,v,m,B))}}return E},D1t=function(t){if(!t)return Qr;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||Qr.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Yv.default;if(typeof t.format<"u"){if(!A1t.call(Yv.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=Yv.formatters[n],a=Qr.filter;(typeof t.filter=="function"||Uo(t.filter))&&(a=t.filter);var o;if(t.arrayFormat in F9?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=Qr.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:Qr.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Qr.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Qr.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Qr.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Qr.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Qr.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Qr.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Qr.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Qr.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Qr.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Qr.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Qr.strictNullHandling}},O1t=function(r,t){var e=r,n=D1t(t),i,a;typeof n.filter=="function"?(a=n.filter,e=a("",e)):Uo(n.filter)&&(a=n.filter,i=a);var o=[];if(typeof e!="object"||e===null)return"";var s=F9[n.arrayFormat],l=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(e)),n.sort&&i.sort(n.sort);for(var u=N9(),h=0;h<i.length;++h){var c=i[h];n.skipNulls&&e[c]===null||k9(o,L1t(e[c],c,s,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var f=o.join(n.delimiter),d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),f.length>0?d+f:""},dg=O9,yA=Object.prototype.hasOwnProperty,N1t=Array.isArray,Ir={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:dg.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},F1t=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},G9=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},k1t="utf8=%26%2310003%3B",G1t="utf8=%E2%9C%93",B1t=function(t,e){var n={__proto__:null},i=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var a=e.parameterLimit===1/0?void 0:e.parameterLimit,o=i.split(e.delimiter,a),s=-1,l,u=e.charset;if(e.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===G1t?u="utf-8":o[l]===k1t&&(u="iso-8859-1"),s=l,l=o.length);for(l=0;l<o.length;++l)if(l!==s){var h=o[l],c=h.indexOf("]="),f=c===-1?h.indexOf("="):c+1,d,g;f===-1?(d=e.decoder(h,Ir.decoder,u,"key"),g=e.strictNullHandling?null:""):(d=e.decoder(h.slice(0,f),Ir.decoder,u,"key"),g=dg.maybeMap(G9(h.slice(f+1),e),function(v){return e.decoder(v,Ir.decoder,u,"value")})),g&&e.interpretNumericEntities&&u==="iso-8859-1"&&(g=F1t(g)),h.indexOf("[]=")>-1&&(g=N1t(g)?[g]:g);var p=yA.call(n,d);p&&e.duplicates==="combine"?n[d]=dg.combine(n[d],g):(!p||e.duplicates==="last")&&(n[d]=g)}return n},z1t=function(r,t,e,n){for(var i=n?t:G9(t,e),a=r.length-1;a>=0;--a){var o,s=r[a];if(s==="[]"&&e.parseArrays)o=e.allowEmptyArrays&&(i===""||e.strictNullHandling&&i===null)?[]:[].concat(i);else{o=e.plainObjects?Object.create(null):{};var l=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,u=e.decodeDotInKeys?l.replace(/%2E/g,"."):l,h=parseInt(u,10);!e.parseArrays&&u===""?o={0:i}:!isNaN(h)&&s!==u&&String(h)===u&&h>=0&&e.parseArrays&&h<=e.arrayLimit?(o=[],o[h]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},V1t=function(t,e,n,i){if(t){var a=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(a),u=l?a.slice(0,l.index):a,h=[];if(u){if(!n.plainObjects&&yA.call(Object.prototype,u)&&!n.allowPrototypes)return;h.push(u)}for(var c=0;n.depth>0&&(l=s.exec(a))!==null&&c<n.depth;){if(c+=1,!n.plainObjects&&yA.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");h.push("["+a.slice(l.index)+"]")}return z1t(h,e,n,i)}},U1t=function(t){if(!t)return Ir;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Ir.charset:t.charset,n=typeof t.duplicates>"u"?Ir.duplicates:t.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Ir.allowDots:!!t.allowDots;return{allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ir.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ir.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ir.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ir.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ir.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ir.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Ir.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Ir.decoder,delimiter:typeof t.delimiter=="string"||dg.isRegExp(t.delimiter)?t.delimiter:Ir.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ir.depth,duplicates:n,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ir.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ir.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ir.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:Ir.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ir.strictNullHandling}},W1t=function(r,t){var e=U1t(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?B1t(r,e):r,i=e.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o){var s=a[o],l=V1t(s,n[s],e,typeof r=="string");i=dg.merge(i,l,e)}return e.allowSparse===!0?i:dg.compact(i)},H1t=O1t,$1t=W1t,Y1t=OP,X1t={formats:Y1t,parse:$1t,stringify:H1t};const Z1t=mw(X1t),j1t=function(r){let t=0;for(let e=0,n=r.length-1;e<n;++e)r[e+1]&&(t+=Math.sqrt(Math.pow(r[e+1][0]-r[e][0],2)+Math.pow(r[e+1][1]-r[e][1],2)));return t},K1t=function(r,t){if(!r)return 0;let e={x:r[0],y:r[1]},n={x:t[0],y:t[1]};const i=Math.abs(n.x-e.x),a=Math.abs(n.y-e.y),o=Math.sqrt(i*i+a*a),s=Math.asin(a/o);let l=0;return n.y<e.y&&n.x===e.x?l=Math.PI*2/3:n.y>e.y&&n.x===e.x?l=Math.PI/2:n.y===e.y&&n.x<e.x?l=Math.PI:n.y===e.y&&n.x>e.x?l=0:n.y>e.y&&n.x>e.x?l=s:n.y>e.y&&n.x<e.x?l=Math.PI-s:n.y<e.y&&n.x<e.x?l=Math.PI+s:n.y<e.y&&n.x>e.x&&(l=Math.PI*2-s),l},q1t=function(r){const t=r.map,e=r.pixel,n=r.coordinates,i=[];for(let a=0;a<n.length-1;a++){const o=n[a],s=n[a+1],l=t.getPixelFromCoordinate(o),u=t.getPixelFromCoordinate(s),c=j1t([l,u]),f=Math.floor(c/e),d=K1t(l,u);for(let g=1;g<f+1;g++){const p=[l[0]+e*g*Math.cos(d),l[1]+e*g*Math.sin(d)],v=t.getCoordinateFromPixel(p);i.push({rotate:d,coordinate:v})}}return i},J1t=r=>{const{map:t,layer:e,icon:n}=r;if(!e)return;const i=e.getSource();if(!i)return;const a={pixel:r.pixel||50,coordinates:r.coordinates,map:t},o=q1t(a),s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABfUlEQVQ4T3WTTSvFYRDFf8dLKIqytFckthTpJkQWlyhF2fgEVr6BheytpChEsqB08xbZWPgOJAs7ieRlNMzV//75P7vnmZkz58ycR2ZWD7QBF5KM1DGzTuBO0k065neZ2S3QBGwAU5I+iolmNgrsAI9An6SrNIgDnAE9EdgFJiS9+93MuoEToBx4AgYkXSZBHKAWOAS6IrAP5CW9BUge2AIqgJdg8guiSKoBDoDeDJBhwNlVBsiQpNPvGST0VgF7TjPeCsCIpNdo0g84O2fibx4r/AJEUjVwlJDjXbybU/eZjAGbMROXmC8BiKQ64BxoDyYLkuYTTCeB9WD/9B9AA3AMdGQAzALLAfCcluDF3r01itMS5oDFiP3MIUHNi90T7ko/XjyYGOIMsFJSXByimTVGQbFzegOuew0o+7PGKL4AmjM8MA2shua/RjIzX1suw8pucZfiUjOt/AC4BHfaeOoz+d63oziX9Zla3CzAkqTP9G8zM4/dS7r+7zt/Aaattn1kX8VgAAAAAElFTkSuQmCC",l=.5;for(let u=0;u<o.length;u++){const h=o[u].coordinate,c=o[u].rotate,f=new Le({geometry:new rr(h)});f.setStyle(new Te({image:new ia({src:s,scale:l,...n,rotation:c})})),f.set("isArrow",!0),i.addFeature(f)}},t3=r=>{if(!r.map||!r.coordinates||r.coordinates.length<2)return;const{layer:t}=r;J1t({...r,layer:t})},Q1t=Wr({__name:"index",props:{arrow:{default:50},startStyle:{},endStyle:{},lineStyle:{},stopsStyle:{},layerId:{},source:{},layerStyle:{},featureStyle:{},modify:{type:Boolean},className:{},opacity:{},visible:{type:Boolean,default:!0},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},renderOrder:{},renderBuffer:{},map:{},declutter:{type:[String,Number,Boolean]},background:{},updateWhileAnimating:{type:Boolean},updateWhileInteracting:{type:Boolean},properties:{},type:{},url:{},method:{default:"get"},params:{}},emits:["resolve"],setup(r,{expose:t,emit:e}){const n=$e("VMap"),i=qt(n).map,a=r;let o=ir();const s=Er();let l=ir(),u=ir(),h=ir(),c=ir(),f=ir(),d=ir(!1),g=ir(),p=ir(!1),v=ir(),m=ir(!1);const y=Zn(()=>d.value&&p.value),_={circle:{radius:14,fill:{color:"rgba(255, 0, 0, 0.5)"},stroke:{color:"rgba(255, 0, 0, 1)",width:2}},text:{text:"",font:"bold 16px sans-serif",stroke:{color:"rgba(255, 255, 255, 1)",width:3}}},x={circle:{radius:10,fill:{color:"rgba(255, 140, 0, 0.5)"},stroke:{color:"rgba(255, 140, 0, 1)",width:2}}},w={circle:{radius:15,fill:{color:"rgba(0, 255, 0, 0.5)"},stroke:{color:"rgba(0, 255, 0, 1)",width:2}},text:{text:"",font:"bold 16px sans-serif",stroke:{color:"rgba(255, 255, 255, 1)",width:3}}},S={stroke:{color:"rgba(67, 126, 255, 0.6)",width:10}},T=()=>{let W={...a};delete W.method,delete W.arrow,delete W.startStyle,delete W.lineStyle,delete W.endStyle,delete W.stopsStyle,delete W.params,delete W.url,delete W.type,o.value=W};Kc(()=>{T()}),j6(()=>{T()});const b=e,E=async(W,Z)=>fetch(W+"?"+Z,{method:"get"}).then(at=>at.json()).then(at=>Promise.resolve(at)).catch(at=>Promise.reject(at)),C=async(W,Z)=>fetch(W,{method:"post",body:JSON.stringify(Z)}).then(at=>at.json()).then(at=>Promise.resolve(at)).catch(at=>Promise.reject(at)),M=async W=>{if(a.url){if(a.method.toUpperCase()==="GET")return E(a.url,W).then(Z=>(b("resolve",{type:a.type,method:a.method,...Z}),Promise.resolve(Z))).catch(Z=>Promise.reject(Z));if(a.method.toUpperCase()==="POST")return C(a.url,W).then(Z=>Z.json()).then(Z=>(b("resolve",{type:a.type,method:a.method,...Z}),Promise.resolve(Z))).catch(Z=>Promise.reject(Z))}},A=()=>{const W=$(f.value,v.value,g.value);if(W.length===0)return;const Z=W.join(";"),at={...a.params,stops:Z},O=new URLSearchParams;for(const[N,H]of Object.entries(at))O.append(encodeURIComponent(N),typeof H=="string"?H:JSON.stringify(H));return a.method==="GET"||a.method==="get"?O:at},R=async()=>{const W=A();if(W)return M(W)},P=async()=>{const{error:W,routes:Z,stops:at}=await R();if(W)return new Error(W.message);if(Z){const N=Z.features[0].geometry.paths[0].map(Q=>[Q[0],Q[1]]);let H;if(at){let Q=[];at.features.forEach(ct=>{const gt=[ct.geometry.x,ct.geometry.y];Q.push(gt)}),B(Q[0]),V(Q[Q.length-1]);const ot=Q.slice(1,Q.length-1).map((ct,gt)=>({index:gt,coordinate:ct}));Y(ot)}else H=N.length-1,B(N[0]),V(N[H]);mt(N)}},L=async()=>{const{paths:W}=await D();if(W){const{points:Z}=W[0];mt(Z.coordinates)}},D=async()=>{const W=k();if(W)return M(W)},k=()=>{const W=$(f.value,v.value,g.value);if(W.length!==0)if(a.method==="get"||a.method==="GET"){let Z=Z1t.stringify(a.params),at="&point=";return W.forEach((O,N)=>{at=at+O[1]+","+O[0]+(N<W.length-1?"&point=":"")}),Z=Z+at,Z}else return{...a.params,points:W}},F=()=>{a.type==="arcgis"?P():a.type==="graphhopper"&&L()},B=W=>{var Z;if((Z=s.value)==null||Z.removeFeatureById("start"),W){f.value=W;let at=w;Xr(a,"startStyle")&&a.startStyle&&(at=a.startStyle),l.value={type:"Feature",geometry:{type:"Point",coordinates:W},properties:{id:"start",style:at}}}},V=W=>{var Z;if((Z=s.value)==null||Z.removeFeatureById("end"),W){g.value=W;let at=_;Xr(a,"endStyle")&&a.endStyle&&(at=a.endStyle),u.value={type:"Feature",geometry:{type:"Point",coordinates:W},properties:{id:"end",style:at}}}},Y=W=>{var at;const Z=(at=s.value)==null?void 0:at.getSource();if(Z){const O=Z.getFeatures();O&&O.length>0&&O.forEach(N=>{var H;N.get("isStops")&&((H=s.value)==null||H.removeFeatureById(N.get("id")))})}if(W&&W.length>0){v.value=W.map(N=>N.coordinate);let O=x;Xr(a,"stopsStyle")&&a.stopsStyle&&(O=a.stopsStyle),h.value={type:"FeatureCollection",features:W.map(N=>({type:"Feature",geometry:{type:"Point",coordinates:N.coordinate},properties:{isStops:!0,id:`stop_${N.index}`,style:O}}))}}},q=async W=>{d.value=!!W,B(W),K()},lt=async W=>{p.value=!!W,V(W),K()},X=async W=>{m.value=!!W,Y(W),K()};let St=ir([]);const mt=W=>{var at,O,N;(at=s.value)==null||at.removeFeatureById("route");const Z=(O=s.value)==null?void 0:O.getSource();if(Z){const H=Z.getFeatures();H&&H.length>0&&H.forEach(Q=>{Q.get("isArrow")&&Z.removeFeature(Q)})}if(St.value.forEach(H=>{Cu(H)}),St.value=[],W){c.value={type:"Feature",geometry:{type:"LineString",coordinates:W},properties:{id:"route",style:{...S,...a.lineStyle}}};const H=(N=s.value)==null?void 0:N.getLayer();Z&&a.arrow&&(t3({map:i,coordinates:W,layer:H,pixel:a.arrow}),St.value.push(H==null?void 0:H.on("postrender",()=>{const Q=i.getView().getZoom();Z.getFeatures().forEach(J=>{J.get("isArrow")&&Z.removeFeature(J)}),Q&&Math.round(Q)===Q&&t3({map:i,coordinates:W,layer:H,pixel:a.arrow})})))}},$=(W,Z,at)=>{let O=[W];return Z&&Z.length>0&&O.push(...Z),O.push(at),O},K=()=>{y.value&&F()};return t({setStartPoint:q,setEndPoint:lt,setStopsPoints:X,reset:K,clear:()=>{d.value=!1,p.value=!1,m.value=!1,Y(),B(),V(),mt()}}),(W,Z)=>(nl(),gm(qt(f9),AR({ref_key:"vectorRef",ref:s},qt(o)),{default:TR(()=>[an(qt(fv),{"geo-json":qt(l)},null,8,["geo-json"]),an(qt(fv),{"geo-json":qt(u)},null,8,["geo-json"]),an(qt(fv),{"geo-json":qt(h)},null,8,["geo-json"]),an(qt(fv),{"geo-json":qt(c)},null,8,["geo-json"])]),_:1},16))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _A=function(r,t){return _A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},_A(r,t)};function U(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_A(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var txt=function(){function r(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return r}(),ext=function(){function r(){this.browser=new txt,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return r}(),le=new ext;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(le.wxa=!0,le.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?le.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(le.node=!0,le.svgSupported=!0):rxt(navigator.userAgent,le);function rxt(r,t){var e=t.browser,n=r.match(/Firefox\/([\d.]+)/),i=r.match(/MSIE\s([\d.]+)/)||r.match(/Trident\/.+?rv:(([\d.]+))/),a=r.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(r);n&&(e.firefox=!0,e.version=n[1]),i&&(e.ie=!0,e.version=i[1]),a&&(e.edge=!0,e.version=a[1],e.newEdge=+a[1].split(".")[0]>18),o&&(e.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!e.ie&&!e.edge,t.pointerEventsSupported="onpointerdown"in window&&(e.edge||e.ie&&+e.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(e.ie&&"transition"in s||e.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||e.ie&&+e.version>=9}var NP=12,B9="sans-serif",ku=NP+"px "+B9,nxt=20,ixt=100,axt="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function oxt(r){var t={};if(typeof JSON>"u")return t;for(var e=0;e<r.length;e++){var n=String.fromCharCode(e+32),i=(r.charCodeAt(e)-nxt)/ixt;t[n]=i}return t}var sxt=oxt(axt),Gu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var r,t;return function(e,n){if(!r){var i=Gu.createCanvas();r=i&&i.getContext("2d")}if(r)return t!==n&&(t=r.font=n||ku),r.measureText(e);e=e||"",n=n||ku;var a=/((?:\d+)?\.?\d*)px/.exec(n),o=a&&+a[1]||NP,s=0;if(n.indexOf("mono")>=0)s=o*e.length;else for(var l=0;l<e.length;l++){var u=sxt[e[l]];s+=u==null?o:u*o}return{width:s}}}(),loadImage:function(r,t,e){var n=new Image;return n.onload=t,n.onerror=e,n.src=r,n}},z9=cs(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(r,t){return r["[object "+t+"]"]=!0,r},{}),V9=cs(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(r,t){return r["[object "+t+"Array]"]=!0,r},{}),$g=Object.prototype.toString,Aw=Array.prototype,lxt=Aw.forEach,uxt=Aw.filter,FP=Aw.slice,hxt=Aw.map,e3=(function(){}).constructor,t_=e3?e3.prototype:null,kP="__proto__",cxt=2311;function U9(){return cxt++}function GP(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t]}function Pt(r){if(r==null||typeof r!="object")return r;var t=r,e=$g.call(r);if(e==="[object Array]"){if(!Xv(r)){t=[];for(var n=0,i=r.length;n<i;n++)t[n]=Pt(r[n])}}else if(V9[e]){if(!Xv(r)){var a=r.constructor;if(a.from)t=a.from(r);else{t=new a(r.length);for(var n=0,i=r.length;n<i;n++)t[n]=r[n]}}}else if(!z9[e]&&!Xv(r)&&!gg(r)){t={};for(var o in r)r.hasOwnProperty(o)&&o!==kP&&(t[o]=Pt(r[o]))}return t}function Zt(r,t,e){if(!Rt(t)||!Rt(r))return e?Pt(t):r;for(var n in t)if(t.hasOwnProperty(n)&&n!==kP){var i=r[n],a=t[n];Rt(a)&&Rt(i)&&!rt(a)&&!rt(i)&&!gg(a)&&!gg(i)&&!r3(a)&&!r3(i)&&!Xv(a)&&!Xv(i)?Zt(i,a,e):(e||!(n in r))&&(r[n]=Pt(t[n]))}return r}function BP(r,t){for(var e=r[0],n=1,i=r.length;n<i;n++)e=Zt(e,r[n],t);return e}function tt(r,t){if(Object.assign)Object.assign(r,t);else for(var e in t)t.hasOwnProperty(e)&&e!==kP&&(r[e]=t[e]);return r}function It(r,t,e){for(var n=he(t),i=0;i<n.length;i++){var a=n[i];(e?t[a]!=null:r[a]==null)&&(r[a]=t[a])}return r}function te(r,t){if(r){if(r.indexOf)return r.indexOf(t);for(var e=0,n=r.length;e<n;e++)if(r[e]===t)return e}return-1}function fxt(r,t){var e=r.prototype;function n(){}n.prototype=t.prototype,r.prototype=new n;for(var i in e)e.hasOwnProperty(i)&&(r.prototype[i]=e[i]);r.prototype.constructor=r,r.superClass=t}function Hr(r,t,e){if(r="prototype"in r?r.prototype:r,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var a=n[i];a!=="constructor"&&(e?t[a]!=null:r[a]==null)&&(r[a]=t[a])}else It(r,t,e)}function Qn(r){return!r||typeof r=="string"?!1:typeof r.length=="number"}function I(r,t,e){if(r&&t)if(r.forEach&&r.forEach===lxt)r.forEach(t,e);else if(r.length===+r.length)for(var n=0,i=r.length;n<i;n++)t.call(e,r[n],n,r);else for(var a in r)r.hasOwnProperty(a)&&t.call(e,r[a],a,r)}function nt(r,t,e){if(!r)return[];if(!t)return zP(r);if(r.map&&r.map===hxt)return r.map(t,e);for(var n=[],i=0,a=r.length;i<a;i++)n.push(t.call(e,r[i],i,r));return n}function cs(r,t,e,n){if(r&&t){for(var i=0,a=r.length;i<a;i++)e=t.call(n,e,r[i],i,r);return e}}function ze(r,t,e){if(!r)return[];if(!t)return zP(r);if(r.filter&&r.filter===uxt)return r.filter(t,e);for(var n=[],i=0,a=r.length;i<a;i++)t.call(e,r[i],i,r)&&n.push(r[i]);return n}function dxt(r,t,e){if(r&&t){for(var n=0,i=r.length;n<i;n++)if(t.call(e,r[n],n,r))return r[n]}}function he(r){if(!r)return[];if(Object.keys)return Object.keys(r);var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(e);return t}function gxt(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return function(){return r.apply(t,e.concat(FP.call(arguments)))}}var _t=t_&&At(t_.bind)?t_.call.bind(t_.bind):gxt;function Wt(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){return r.apply(this,t.concat(FP.call(arguments)))}}function rt(r){return Array.isArray?Array.isArray(r):$g.call(r)==="[object Array]"}function At(r){return typeof r=="function"}function yt(r){return typeof r=="string"}function xA(r){return $g.call(r)==="[object String]"}function be(r){return typeof r=="number"}function Rt(r){var t=typeof r;return t==="function"||!!r&&t==="object"}function r3(r){return!!z9[$g.call(r)]}function Wi(r){return!!V9[$g.call(r)]}function gg(r){return typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.ownerDocument=="object"}function Iw(r){return r.colorStops!=null}function pxt(r){return r.image!=null}function vxt(r){return $g.call(r)==="[object RegExp]"}function Wm(r){return r!==r}function Sn(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=0,n=r.length;e<n;e++)if(r[e]!=null)return r[e]}function Vt(r,t){return r??t}function os(r,t,e){return r??t??e}function zP(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return FP.apply(r,t)}function VP(r){if(typeof r=="number")return[r,r,r,r];var t=r.length;return t===2?[r[0],r[1],r[0],r[1]]:t===3?[r[0],r[1],r[2],r[1]]:r}function xi(r,t){if(!r)throw new Error(t)}function so(r){return r==null?null:typeof r.trim=="function"?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var W9="__ec_primitive__";function Fx(r){r[W9]=!0}function Xv(r){return r[W9]}var mxt=function(){function r(){this.data={}}return r.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},r.prototype.has=function(t){return this.data.hasOwnProperty(t)},r.prototype.get=function(t){return this.data[t]},r.prototype.set=function(t,e){return this.data[t]=e,this},r.prototype.keys=function(){return he(this.data)},r.prototype.forEach=function(t){var e=this.data;for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},r}(),H9=typeof Map=="function";function yxt(){return H9?new Map:new mxt}var _xt=function(){function r(t){var e=rt(t);this.data=yxt();var n=this;t instanceof r?t.each(i):t&&I(t,i);function i(a,o){e?n.set(a,o):n.set(o,a)}}return r.prototype.hasKey=function(t){return this.data.has(t)},r.prototype.get=function(t){return this.data.get(t)},r.prototype.set=function(t,e){return this.data.set(t,e),e},r.prototype.each=function(t,e){this.data.forEach(function(n,i){t.call(e,n,i)})},r.prototype.keys=function(){var t=this.data.keys();return H9?Array.from(t):t},r.prototype.removeKey=function(t){this.data.delete(t)},r}();function wt(r){return new _xt(r)}function kx(r,t){for(var e=new r.constructor(r.length+t.length),n=0;n<r.length;n++)e[n]=r[n];for(var i=r.length,n=0;n<t.length;n++)e[n+i]=t[n];return e}function Rw(r,t){var e;if(Object.create)e=Object.create(r);else{var n=function(){};n.prototype=r,e=new n}return t&&tt(e,t),e}function $9(r){var t=r.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function xt(r,t){return r.hasOwnProperty(t)}function Lr(){}var x1=180/Math.PI;function ef(r,t){return r==null&&(r=0),t==null&&(t=0),[r,t]}function si(r,t){return r[0]=t[0],r[1]=t[1],r}function Js(r){return[r[0],r[1]]}function xxt(r,t,e){return r[0]=t,r[1]=e,r}function n3(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function SA(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function uc(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function wA(r){return Math.sqrt(Sxt(r))}function Sxt(r){return r[0]*r[0]+r[1]*r[1]}function S1(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function Yg(r,t){var e=wA(t);return e===0?(r[0]=0,r[1]=0):(r[0]=t[0]/e,r[1]=t[1]/e),r}function TA(r,t){return Math.sqrt((r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1]))}var ou=TA;function wxt(r,t){return(r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1])}var wc=wxt;function w1(r,t,e,n){return r[0]=t[0]+n*(e[0]-t[0]),r[1]=t[1]+n*(e[1]-t[1]),r}function Ln(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[2]*i+e[4],r[1]=e[1]*n+e[3]*i+e[5],r}function su(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function lu(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}var Cf=function(){function r(t,e){this.target=t,this.topTarget=e&&e.topTarget}return r}(),Txt=function(){function r(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return r.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Cf(e,t),"dragstart",t.event))},r.prototype._drag=function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,a=n-this._x,o=i-this._y;this._x=n,this._y=i,e.drift(a,o,t),this.handler.dispatchToElement(new Cf(e,t),"drag",t.event);var s=this.handler.findHover(n,i,e).target,l=this._dropTarget;this._dropTarget=s,e!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Cf(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new Cf(s,t),"dragenter",t.event))}},r.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new Cf(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Cf(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},r}(),Za=function(){function r(t){t&&(this._$eventProcessor=t)}return r.prototype.on=function(t,e,n,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof e=="function"&&(i=n,n=e,e=null),!n||!t)return this;var o=this._$eventProcessor;e!=null&&o&&o.normalizeQuery&&(e=o.normalizeQuery(e)),a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===n)return this;var l={h:n,query:e,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=a[t].length-1,h=a[t][u];return h&&h.callAtLast?a[t].splice(u,0,l):a[t].push(l),this},r.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},r.prototype.off=function(t,e){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],a=0,o=n[t].length;a<o;a++)n[t][a].h!==e&&i.push(n[t][a]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},r.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var o=e.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(t,u.query)))switch(o){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,e[0]);break;case 2:u.h.call(u.ctx,e[0],e[1]);break;default:u.h.apply(u.ctx,e);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},r.prototype.triggerWithContext=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var o=e.length,s=e[o-1],l=i.length,u=0;u<l;u++){var h=i[u];if(!(a&&a.filter&&h.query!=null&&!a.filter(t,h.query)))switch(o){case 0:h.h.call(s);break;case 1:h.h.call(s,e[0]);break;case 2:h.h.call(s,e[0],e[1]);break;default:h.h.apply(s,e.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},r}(),bxt=Math.log(2);function bA(r,t,e,n,i,a){var o=n+"-"+i,s=r.length;if(a.hasOwnProperty(o))return a[o];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/bxt);return r[e][l]}for(var u=n|1<<e,h=e+1;n&1<<h;)h++;for(var c=0,f=0,d=0;f<s;f++){var g=1<<f;g&i||(c+=(d%2?-1:1)*r[e][f]*bA(r,t-1,h,u,i|g,a),d++)}return a[o]=c,c}function i3(r,t){var e=[[r[0],r[1],1,0,0,0,-t[0]*r[0],-t[0]*r[1]],[0,0,0,r[0],r[1],1,-t[1]*r[0],-t[1]*r[1]],[r[2],r[3],1,0,0,0,-t[2]*r[2],-t[2]*r[3]],[0,0,0,r[2],r[3],1,-t[3]*r[2],-t[3]*r[3]],[r[4],r[5],1,0,0,0,-t[4]*r[4],-t[4]*r[5]],[0,0,0,r[4],r[5],1,-t[5]*r[4],-t[5]*r[5]],[r[6],r[7],1,0,0,0,-t[6]*r[6],-t[6]*r[7]],[0,0,0,r[6],r[7],1,-t[7]*r[6],-t[7]*r[7]]],n={},i=bA(e,8,0,0,0,n);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*bA(e,7,o===0?1:0,1<<o,1<<s,n)/i*t[o];return function(l,u,h){var c=u*a[6]+h*a[7]+1;l[0]=(u*a[0]+h*a[1]+a[2])/c,l[1]=(u*a[3]+h*a[4]+a[5])/c}}}var a3="___zrEVENTSAVED",Fb=[];function Ext(r,t,e,n,i){return EA(Fb,t,n,i,!0)&&EA(r,e,Fb[0],Fb[1])}function EA(r,t,e,n,i){if(t.getBoundingClientRect&&le.domSupported&&!Y9(t)){var a=t[a3]||(t[a3]={}),o=Cxt(t,a),s=Mxt(o,a,i);if(s)return s(r,e,n),!0}return!1}function Cxt(r,t){var e=t.markers;if(e)return e;e=t.markers=[];for(var n=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,u=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),r.appendChild(o),e.push(o)}return e}function Mxt(r,t,e){for(var n=e?"invTrans":"trans",i=t[n],a=t.srcCoords,o=[],s=[],l=!0,u=0;u<4;u++){var h=r[u].getBoundingClientRect(),c=2*u,f=h.left,d=h.top;o.push(f,d),l=l&&a&&f===a[c]&&d===a[c+1],s.push(r[u].offsetLeft,r[u].offsetTop)}return l&&i?i:(t.srcCoords=o,t[n]=e?i3(s,o):i3(o,s))}function Y9(r){return r.nodeName.toUpperCase()==="CANVAS"}var Axt=/([&<>"'])/g,Ixt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Di(r){return r==null?"":(r+"").replace(Axt,function(t,e){return Ixt[e]})}var Rxt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,kb=[],Pxt=le.browser.firefox&&+le.browser.version.split(".")[0]<39;function CA(r,t,e,n){return e=e||{},n?o3(r,t,e):Pxt&&t.layerX!=null&&t.layerX!==t.offsetX?(e.zrX=t.layerX,e.zrY=t.layerY):t.offsetX!=null?(e.zrX=t.offsetX,e.zrY=t.offsetY):o3(r,t,e),e}function o3(r,t,e){if(le.domSupported&&r.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(Y9(r)){var a=r.getBoundingClientRect();e.zrX=n-a.left,e.zrY=i-a.top;return}else if(EA(kb,r,n,i)){e.zrX=kb[0],e.zrY=kb[1];return}}e.zrX=e.zrY=0}function UP(r){return r||window.event}function Ea(r,t,e){if(t=UP(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var o=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];o&&CA(r,o,t,e)}else{CA(r,t,t,e);var a=Lxt(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&Rxt.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function Lxt(r){var t=r.wheelDelta;if(t)return t;var e=r.deltaX,n=r.deltaY;if(e==null||n==null)return t;var i=Math.abs(n!==0?n:e),a=n>0?-1:n<0?1:e>0?-1:1;return 3*i*a}function MA(r,t,e,n){r.addEventListener(t,e,n)}function Dxt(r,t,e,n){r.removeEventListener(t,e,n)}var sl=function(r){r.preventDefault(),r.stopPropagation(),r.cancelBubble=!0};function s3(r){return r.which===2||r.which===3}var Oxt=function(){function r(){this._track=[]}return r.prototype.recognize=function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},r.prototype.clear=function(){return this._track.length=0,this},r.prototype._doTrack=function(t,e,n){var i=t.touches;if(i){for(var a={points:[],touches:[],target:e,event:t},o=0,s=i.length;o<s;o++){var l=i[o],u=CA(n,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},r.prototype._recognize=function(t){for(var e in Gb)if(Gb.hasOwnProperty(e)){var n=Gb[e](this._track,t);if(n)return n}},r}();function l3(r){var t=r[1][0]-r[0][0],e=r[1][1]-r[0][1];return Math.sqrt(t*t+e*e)}function Nxt(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}var Gb={pinch:function(r,t){var e=r.length;if(e){var n=(r[e-1]||{}).points,i=(r[e-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var a=l3(n)/l3(i);!isFinite(a)&&(a=1),t.pinchScale=a;var o=Nxt(n);return t.pinchX=o[0],t.pinchY=o[1],{type:"pinch",target:r[0].target,event:t}}}}};function oa(){return[1,0,0,1,0,0]}function Pw(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function WP(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function Qs(r,t,e){var n=t[0]*e[0]+t[2]*e[1],i=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],o=t[1]*e[2]+t[3]*e[3],s=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r}function fs(r,t,e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4]+e[0],r[5]=t[5]+e[1],r}function rf(r,t,e,n){n===void 0&&(n=[0,0]);var i=t[0],a=t[2],o=t[4],s=t[1],l=t[3],u=t[5],h=Math.sin(e),c=Math.cos(e);return r[0]=i*c+s*h,r[1]=-i*h+s*c,r[2]=a*c+l*h,r[3]=-a*h+c*l,r[4]=c*(o-n[0])+h*(u-n[1])+n[0],r[5]=c*(u-n[1])-h*(o-n[0])+n[1],r}function HP(r,t,e){var n=e[0],i=e[1];return r[0]=t[0]*n,r[1]=t[1]*i,r[2]=t[2]*n,r[3]=t[3]*i,r[4]=t[4]*n,r[5]=t[5]*i,r}function Xg(r,t){var e=t[0],n=t[2],i=t[4],a=t[1],o=t[3],s=t[5],l=e*o-a*n;return l?(l=1/l,r[0]=o*l,r[1]=-a*l,r[2]=-n*l,r[3]=e*l,r[4]=(n*s-o*i)*l,r[5]=(a*i-e*s)*l,r):null}function Fxt(r){var t=oa();return WP(t,r),t}var $t=function(){function r(t,e){this.x=t||0,this.y=e||0}return r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set=function(t,e){return this.x=t,this.y=e,this},r.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.scale=function(t){this.x*=t,this.y*=t},r.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y},r.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},r.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},r.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},r.prototype.distanceSquare=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.transform=function(t){if(t){var e=this.x,n=this.y;return this.x=t[0]*e+t[2]*n+t[4],this.y=t[1]*e+t[3]*n+t[5],this}},r.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},r.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},r.set=function(t,e,n){t.x=e,t.y=n},r.copy=function(t,e){t.x=e.x,t.y=e.y},r.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},r.lenSquare=function(t){return t.x*t.x+t.y*t.y},r.dot=function(t,e){return t.x*e.x+t.y*e.y},r.add=function(t,e,n){t.x=e.x+n.x,t.y=e.y+n.y},r.sub=function(t,e,n){t.x=e.x-n.x,t.y=e.y-n.y},r.scale=function(t,e,n){t.x=e.x*n,t.y=e.y*n},r.scaleAndAdd=function(t,e,n,i){t.x=e.x+n.x*i,t.y=e.y+n.y*i},r.lerp=function(t,e,n,i){var a=1-i;t.x=a*e.x+i*n.x,t.y=a*e.y+i*n.y},r}(),e_=Math.min,r_=Math.max,hh=new $t,ch=new $t,fh=new $t,dh=new $t,Cp=new $t,Mp=new $t,jt=function(){function r(t,e,n,i){n<0&&(t=t+n,n=-n),i<0&&(e=e+i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}return r.prototype.union=function(t){var e=e_(t.x,this.x),n=e_(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=r_(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=r_(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=e,this.y=n},r.prototype.applyTransform=function(t){r.applyTransform(this,this,t)},r.prototype.calculateTransform=function(t){var e=this,n=t.width/e.width,i=t.height/e.height,a=oa();return fs(a,a,[-e.x,-e.y]),HP(a,a,[n,i]),fs(a,a,[t.x,t.y]),a},r.prototype.intersect=function(t,e){if(!t)return!1;t instanceof r||(t=r.create(t));var n=this,i=n.x,a=n.x+n.width,o=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,h=t.y,c=t.y+t.height,f=!(a<l||u<i||s<h||c<o);if(e){var d=1/0,g=0,p=Math.abs(a-l),v=Math.abs(u-i),m=Math.abs(s-h),y=Math.abs(c-o),_=Math.min(p,v),x=Math.min(m,y);a<l||u<i?_>g&&(g=_,p<v?$t.set(Mp,-p,0):$t.set(Mp,v,0)):_<d&&(d=_,p<v?$t.set(Cp,p,0):$t.set(Cp,-v,0)),s<h||c<o?x>g&&(g=x,m<y?$t.set(Mp,0,-m):$t.set(Mp,0,y)):_<d&&(d=_,m<y?$t.set(Cp,0,m):$t.set(Cp,0,-y))}return e&&$t.copy(e,f?Cp:Mp),f},r.prototype.contain=function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copy=function(t){r.copy(this,t)},r.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},r.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},r.prototype.isZero=function(){return this.width===0||this.height===0},r.create=function(t){return new r(t.x,t.y,t.width,t.height)},r.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},r.applyTransform=function(t,e,n){if(!n){t!==e&&r.copy(t,e);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],a=n[3],o=n[4],s=n[5];t.x=e.x*i+o,t.y=e.y*a+s,t.width=e.width*i,t.height=e.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}hh.x=fh.x=e.x,hh.y=dh.y=e.y,ch.x=dh.x=e.x+e.width,ch.y=fh.y=e.y+e.height,hh.transform(n),dh.transform(n),ch.transform(n),fh.transform(n),t.x=e_(hh.x,ch.x,fh.x,dh.x),t.y=e_(hh.y,ch.y,fh.y,dh.y);var l=r_(hh.x,ch.x,fh.x,dh.x),u=r_(hh.y,ch.y,fh.y,dh.y);t.width=l-t.x,t.height=u-t.y},r}(),X9="silent";function kxt(r,t,e){return{type:r,event:e,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:e.zrX,offsetY:e.zrY,gestureEvent:e.gestureEvent,pinchX:e.pinchX,pinchY:e.pinchY,pinchScale:e.pinchScale,wheelDelta:e.zrDelta,zrByTouch:e.zrByTouch,which:e.which,stop:Gxt}}function Gxt(){sl(this.event)}var Bxt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.handler=null,e}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Za),Ap=function(){function r(t,e){this.x=t,this.y=e}return r}(),zxt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Bb=new jt(0,0,0,0),Z9=function(r){U(t,r);function t(e,n,i,a,o){var s=r.call(this)||this;return s._hovered=new Ap(0,0),s.storage=e,s.painter=n,s.painterRoot=a,s._pointerSize=o,i=i||new Bxt,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new Txt(s),s}return t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(I(zxt,function(n){e.on&&e.on(n,this[n],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var n=e.zrX,i=e.zrY,a=j9(this,n,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new Ap(n,i):this.findHover(n,i),u=l.target,h=this.proxy;h.setCursor&&h.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(o,"mouseout",e),this.dispatchToElement(l,"mousemove",e),u&&u!==s&&this.dispatchToElement(l,"mouseover",e)},t.prototype.mouseout=function(e){var n=e.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",e),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new Ap(0,0)},t.prototype.dispatch=function(e,n){var i=this[e];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var n=this.proxy;n.setCursor&&n.setCursor(e)},t.prototype.dispatchToElement=function(e,n,i){e=e||{};var a=e.target;if(!(a&&a.silent)){for(var o="on"+n,s=kxt(n,e,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(n,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(n,s)}))}},t.prototype.findHover=function(e,n,i){var a=this.storage.getDisplayList(),o=new Ap(e,n);if(u3(a,o,e,n,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,u=l/2,h=new jt(e-u,n-u,l,l),c=a.length-1;c>=0;c--){var f=a[c];f!==i&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(Bb.copy(f.getBoundingRect()),f.transform&&Bb.applyTransform(f.transform),Bb.intersect(h)&&s.push(f))}if(s.length)for(var d=4,g=Math.PI/12,p=Math.PI*2,v=0;v<u;v+=d)for(var m=0;m<p;m+=g){var y=e+v*Math.cos(m),_=n+v*Math.sin(m);if(u3(s,o,y,_,i),o.target)return o}}return o},t.prototype.processGesture=function(e,n){this._gestureMgr||(this._gestureMgr=new Oxt);var i=this._gestureMgr;n==="start"&&i.clear();var a=i.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),a){var o=a.type;e.gestureEvent=o;var s=new Ap;s.target=a.target,this.dispatchToElement(s,o,a.event)}},t}(Za);I(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(r){Z9.prototype[r]=function(t){var e=t.zrX,n=t.zrY,i=j9(this,e,n),a,o;if((r!=="mouseup"||!i)&&(a=this.findHover(e,n),o=a.target),r==="mousedown")this._downEl=o,this._downPoint=[t.zrX,t.zrY],this._upEl=o;else if(r==="mouseup")this._upEl=o;else if(r==="click"){if(this._downEl!==this._upEl||!this._downPoint||ou(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,r,t)}});function Vxt(r,t,e){if(r[r.rectHover?"rectContain":"contain"](t,e)){for(var n=r,i=void 0,a=!1;n;){if(n.ignoreClip&&(a=!0),!a){var o=n.getClipPath();if(o&&!o.contain(t,e))return!1}n.silent&&(i=!0);var s=n.__hostTarget;n=s||n.parent}return i?X9:!0}return!1}function u3(r,t,e,n,i){for(var a=r.length-1;a>=0;a--){var o=r[a],s=void 0;if(o!==i&&!o.ignore&&(s=Vxt(o,e,n))&&(!t.topTarget&&(t.topTarget=o),s!==X9)){t.target=o;break}}}function j9(r,t,e){var n=r.painter;return t<0||t>n.getWidth()||e<0||e>n.getHeight()}var K9=32,Ip=7;function Uxt(r){for(var t=0;r>=K9;)t|=r&1,r>>=1;return r+t}function h3(r,t,e,n){var i=t+1;if(i===e)return 1;if(n(r[i++],r[t])<0){for(;i<e&&n(r[i],r[i-1])<0;)i++;Wxt(r,t,i)}else for(;i<e&&n(r[i],r[i-1])>=0;)i++;return i-t}function Wxt(r,t,e){for(e--;t<e;){var n=r[t];r[t++]=r[e],r[e--]=n}}function c3(r,t,e,n,i){for(n===t&&n++;n<e;n++){for(var a=r[n],o=t,s=n,l;o<s;)l=o+s>>>1,i(a,r[l])<0?s=l:o=l+1;var u=n-o;switch(u){case 3:r[o+3]=r[o+2];case 2:r[o+2]=r[o+1];case 1:r[o+1]=r[o];break;default:for(;u>0;)r[o+u]=r[o+u-1],u--}r[o]=a}}function zb(r,t,e,n,i,a){var o=0,s=0,l=1;if(a(r,t[e+i])>0){for(s=n-i;l<s&&a(r,t[e+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(r,t[e+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}for(o++;o<l;){var h=o+(l-o>>>1);a(r,t[e+h])>0?o=h+1:l=h}return l}function Vb(r,t,e,n,i,a){var o=0,s=0,l=1;if(a(r,t[e+i])<0){for(s=i+1;l<s&&a(r,t[e+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}else{for(s=n-i;l<s&&a(r,t[e+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var h=o+(l-o>>>1);a(r,t[e+h])<0?l=h:o=h+1}return l}function Hxt(r,t){var e=Ip,n,i,a=0,o=[];n=[],i=[];function s(d,g){n[a]=d,i[a]=g,a+=1}function l(){for(;a>1;){var d=a-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;h(d)}}function u(){for(;a>1;){var d=a-2;d>0&&i[d-1]<i[d+1]&&d--,h(d)}}function h(d){var g=n[d],p=i[d],v=n[d+1],m=i[d+1];i[d]=p+m,d===a-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),a--;var y=Vb(r[v],r,g,p,0,t);g+=y,p-=y,p!==0&&(m=zb(r[g+p-1],r,v,m,m-1,t),m!==0&&(p<=m?c(g,p,v,m):f(g,p,v,m)))}function c(d,g,p,v){var m=0;for(m=0;m<g;m++)o[m]=r[d+m];var y=0,_=p,x=d;if(r[x++]=r[_++],--v===0){for(m=0;m<g;m++)r[x+m]=o[y+m];return}if(g===1){for(m=0;m<v;m++)r[x+m]=r[_+m];r[x+v]=o[y];return}for(var w=e,S,T,b;;){S=0,T=0,b=!1;do if(t(r[_],o[y])<0){if(r[x++]=r[_++],T++,S=0,--v===0){b=!0;break}}else if(r[x++]=o[y++],S++,T=0,--g===1){b=!0;break}while((S|T)<w);if(b)break;do{if(S=Vb(r[_],o,y,g,0,t),S!==0){for(m=0;m<S;m++)r[x+m]=o[y+m];if(x+=S,y+=S,g-=S,g<=1){b=!0;break}}if(r[x++]=r[_++],--v===0){b=!0;break}if(T=zb(o[y],r,_,v,0,t),T!==0){for(m=0;m<T;m++)r[x+m]=r[_+m];if(x+=T,_+=T,v-=T,v===0){b=!0;break}}if(r[x++]=o[y++],--g===1){b=!0;break}w--}while(S>=Ip||T>=Ip);if(b)break;w<0&&(w=0),w+=2}if(e=w,e<1&&(e=1),g===1){for(m=0;m<v;m++)r[x+m]=r[_+m];r[x+v]=o[y]}else{if(g===0)throw new Error;for(m=0;m<g;m++)r[x+m]=o[y+m]}}function f(d,g,p,v){var m=0;for(m=0;m<v;m++)o[m]=r[p+m];var y=d+g-1,_=v-1,x=p+v-1,w=0,S=0;if(r[x--]=r[y--],--g===0){for(w=x-(v-1),m=0;m<v;m++)r[w+m]=o[m];return}if(v===1){for(x-=g,y-=g,S=x+1,w=y+1,m=g-1;m>=0;m--)r[S+m]=r[w+m];r[x]=o[_];return}for(var T=e;;){var b=0,E=0,C=!1;do if(t(o[_],r[y])<0){if(r[x--]=r[y--],b++,E=0,--g===0){C=!0;break}}else if(r[x--]=o[_--],E++,b=0,--v===1){C=!0;break}while((b|E)<T);if(C)break;do{if(b=g-Vb(o[_],r,d,g,g-1,t),b!==0){for(x-=b,y-=b,g-=b,S=x+1,w=y+1,m=b-1;m>=0;m--)r[S+m]=r[w+m];if(g===0){C=!0;break}}if(r[x--]=o[_--],--v===1){C=!0;break}if(E=v-zb(r[y],o,0,v,v-1,t),E!==0){for(x-=E,_-=E,v-=E,S=x+1,w=_+1,m=0;m<E;m++)r[S+m]=o[w+m];if(v<=1){C=!0;break}}if(r[x--]=r[y--],--g===0){C=!0;break}T--}while(b>=Ip||E>=Ip);if(C)break;T<0&&(T=0),T+=2}if(e=T,e<1&&(e=1),v===1){for(x-=g,y-=g,S=x+1,w=y+1,m=g-1;m>=0;m--)r[S+m]=r[w+m];r[x]=o[_]}else{if(v===0)throw new Error;for(w=x-(v-1),m=0;m<v;m++)r[w+m]=o[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function T1(r,t,e,n){e||(e=0),n||(n=r.length);var i=n-e;if(!(i<2)){var a=0;if(i<K9){a=h3(r,e,n,t),c3(r,e,n,e+a,t);return}var o=Hxt(r,t),s=Uxt(i);do{if(a=h3(r,e,n,t),a<s){var l=i;l>s&&(l=s),c3(r,e,e+l,e+a,t),a=l}o.pushRun(e,a),o.mergeRuns(),i-=a,e+=a}while(i!==0);o.forceMergeRuns()}}var ta=1,dv=2,nd=4,f3=!1;function Ub(){f3||(f3=!0)}function d3(r,t){return r.zlevel===t.zlevel?r.z===t.z?r.z2-t.z2:r.z-t.z:r.zlevel-t.zlevel}var $xt=function(){function r(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=d3}return r.prototype.traverse=function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},r.prototype.getDisplayList=function(t,e){e=e||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(e),n},r.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,a=e.length;i<a;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,T1(n,d3)},r.prototype._updateAndAddDisplayable=function(t,e,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)e=null;else if(i){e?e=e.slice():e=[];for(var a=i,o=t;a;)a.parent=o,a.updateTransform(),e.push(a),o=a,a=a.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=ta),this._updateAndAddDisplayable(u,e,n)}t.__dirty=0}else{var h=t;e&&e.length?h.__clipPaths=e:h.__clipPaths&&h.__clipPaths.length>0&&(h.__clipPaths=[]),isNaN(h.z)&&(Ub(),h.z=0),isNaN(h.z2)&&(Ub(),h.z2=0),isNaN(h.zlevel)&&(Ub(),h.zlevel=0),this._displayList[this._displayListLen++]=h}var c=t.getDecalElement&&t.getDecalElement();c&&this._updateAndAddDisplayable(c,e,n);var f=t.getTextGuideLine();f&&this._updateAndAddDisplayable(f,e,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,e,n)}},r.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},r.prototype.delRoot=function(t){if(t instanceof Array){for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);return}var i=te(this._roots,t);i>=0&&this._roots.splice(i,1)},r.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},r.prototype.getRoots=function(){return this._roots},r.prototype.dispose=function(){this._displayList=null,this._roots=null},r}(),Gx;Gx=le.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(r){return setTimeout(r,16)};var Zv={linear:function(r){return r},quadraticIn:function(r){return r*r},quadraticOut:function(r){return r*(2-r)},quadraticInOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)},cubicIn:function(r){return r*r*r},cubicOut:function(r){return--r*r*r+1},cubicInOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)},quarticIn:function(r){return r*r*r*r},quarticOut:function(r){return 1- --r*r*r*r},quarticInOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)},quinticIn:function(r){return r*r*r*r*r},quinticOut:function(r){return--r*r*r*r*r+1},quinticInOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)},sinusoidalIn:function(r){return 1-Math.cos(r*Math.PI/2)},sinusoidalOut:function(r){return Math.sin(r*Math.PI/2)},sinusoidalInOut:function(r){return .5*(1-Math.cos(Math.PI*r))},exponentialIn:function(r){return r===0?0:Math.pow(1024,r-1)},exponentialOut:function(r){return r===1?1:1-Math.pow(2,-10*r)},exponentialInOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)},circularIn:function(r){return 1-Math.sqrt(1-r*r)},circularOut:function(r){return Math.sqrt(1- --r*r)},circularInOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)},elasticIn:function(r){var t,e=.1,n=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=n/4):t=n*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/n)))},elasticOut:function(r){var t,e=.1,n=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=n/4):t=n*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*r)*Math.sin((r-t)*(2*Math.PI)/n)+1)},elasticInOut:function(r){var t,e=.1,n=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=n/4):t=n*Math.asin(1/e)/(2*Math.PI),(r*=2)<1?-.5*(e*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/n)):e*Math.pow(2,-10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/n)*.5+1)},backIn:function(r){var t=1.70158;return r*r*((t+1)*r-t)},backOut:function(r){var t=1.70158;return--r*r*((t+1)*r+t)+1},backInOut:function(r){var t=2.5949095;return(r*=2)<1?.5*(r*r*((t+1)*r-t)):.5*((r-=2)*r*((t+1)*r+t)+2)},bounceIn:function(r){return 1-Zv.bounceOut(1-r)},bounceOut:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},bounceInOut:function(r){return r<.5?Zv.bounceIn(r*2)*.5:Zv.bounceOut(r*2-1)*.5+.5}},n_=Math.pow,xu=Math.sqrt,Bx=1e-8,q9=1e-4,g3=xu(3),i_=1/3,Zo=ef(),Ia=ef(),Ud=ef();function uu(r){return r>-Bx&&r<Bx}function J9(r){return r>Bx||r<-Bx}function nn(r,t,e,n,i){var a=1-i;return a*a*(a*r+3*i*t)+i*i*(i*n+3*a*e)}function p3(r,t,e,n,i){var a=1-i;return 3*(((t-r)*a+2*(e-t)*i)*a+(n-e)*i*i)}function zx(r,t,e,n,i,a){var o=n+3*(t-e)-r,s=3*(e-t*2+r),l=3*(t-r),u=r-i,h=s*s-3*o*l,c=s*l-9*o*u,f=l*l-3*s*u,d=0;if(uu(h)&&uu(c))if(uu(s))a[0]=0;else{var g=-l/s;g>=0&&g<=1&&(a[d++]=g)}else{var p=c*c-4*h*f;if(uu(p)){var v=c/h,g=-s/o+v,m=-v/2;g>=0&&g<=1&&(a[d++]=g),m>=0&&m<=1&&(a[d++]=m)}else if(p>0){var y=xu(p),_=h*s+1.5*o*(-c+y),x=h*s+1.5*o*(-c-y);_<0?_=-n_(-_,i_):_=n_(_,i_),x<0?x=-n_(-x,i_):x=n_(x,i_);var g=(-s-(_+x))/(3*o);g>=0&&g<=1&&(a[d++]=g)}else{var w=(2*h*s-3*o*c)/(2*xu(h*h*h)),S=Math.acos(w)/3,T=xu(h),b=Math.cos(S),g=(-s-2*T*b)/(3*o),m=(-s+T*(b+g3*Math.sin(S)))/(3*o),E=(-s+T*(b-g3*Math.sin(S)))/(3*o);g>=0&&g<=1&&(a[d++]=g),m>=0&&m<=1&&(a[d++]=m),E>=0&&E<=1&&(a[d++]=E)}}return d}function Q9(r,t,e,n,i){var a=6*e-12*t+6*r,o=9*t+3*n-3*r-9*e,s=3*t-3*r,l=0;if(uu(o)){if(J9(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var h=a*a-4*o*s;if(uu(h))i[0]=-a/(2*o);else if(h>0){var c=xu(h),u=(-a+c)/(2*o),f=(-a-c)/(2*o);u>=0&&u<=1&&(i[l++]=u),f>=0&&f<=1&&(i[l++]=f)}}return l}function Bu(r,t,e,n,i,a){var o=(t-r)*i+r,s=(e-t)*i+t,l=(n-e)*i+e,u=(s-o)*i+o,h=(l-s)*i+s,c=(h-u)*i+u;a[0]=r,a[1]=o,a[2]=u,a[3]=c,a[4]=c,a[5]=h,a[6]=l,a[7]=n}function tH(r,t,e,n,i,a,o,s,l,u,h){var c,f=.005,d=1/0,g,p,v,m;Zo[0]=l,Zo[1]=u;for(var y=0;y<1;y+=.05)Ia[0]=nn(r,e,i,o,y),Ia[1]=nn(t,n,a,s,y),v=wc(Zo,Ia),v<d&&(c=y,d=v);d=1/0;for(var _=0;_<32&&!(f<q9);_++)g=c-f,p=c+f,Ia[0]=nn(r,e,i,o,g),Ia[1]=nn(t,n,a,s,g),v=wc(Ia,Zo),g>=0&&v<d?(c=g,d=v):(Ud[0]=nn(r,e,i,o,p),Ud[1]=nn(t,n,a,s,p),m=wc(Ud,Zo),p<=1&&m<d?(c=p,d=m):f*=.5);return h&&(h[0]=nn(r,e,i,o,c),h[1]=nn(t,n,a,s,c)),xu(d)}function Yxt(r,t,e,n,i,a,o,s,l){for(var u=r,h=t,c=0,f=1/l,d=1;d<=l;d++){var g=d*f,p=nn(r,e,i,o,g),v=nn(t,n,a,s,g),m=p-u,y=v-h;c+=Math.sqrt(m*m+y*y),u=p,h=v}return c}function vn(r,t,e,n){var i=1-n;return i*(i*r+2*n*t)+n*n*e}function AA(r,t,e,n){return 2*((1-n)*(t-r)+n*(e-t))}function Xxt(r,t,e,n,i){var a=r-2*t+e,o=2*(t-r),s=r-n,l=0;if(uu(a)){if(J9(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var h=o*o-4*a*s;if(uu(h)){var u=-o/(2*a);u>=0&&u<=1&&(i[l++]=u)}else if(h>0){var c=xu(h),u=(-o+c)/(2*a),f=(-o-c)/(2*a);u>=0&&u<=1&&(i[l++]=u),f>=0&&f<=1&&(i[l++]=f)}}return l}function eH(r,t,e){var n=r+e-2*t;return n===0?.5:(r-t)/n}function Hm(r,t,e,n,i){var a=(t-r)*n+r,o=(e-t)*n+t,s=(o-a)*n+a;i[0]=r,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=e}function rH(r,t,e,n,i,a,o,s,l){var u,h=.005,c=1/0;Zo[0]=o,Zo[1]=s;for(var f=0;f<1;f+=.05){Ia[0]=vn(r,e,i,f),Ia[1]=vn(t,n,a,f);var d=wc(Zo,Ia);d<c&&(u=f,c=d)}c=1/0;for(var g=0;g<32&&!(h<q9);g++){var p=u-h,v=u+h;Ia[0]=vn(r,e,i,p),Ia[1]=vn(t,n,a,p);var d=wc(Ia,Zo);if(p>=0&&d<c)u=p,c=d;else{Ud[0]=vn(r,e,i,v),Ud[1]=vn(t,n,a,v);var m=wc(Ud,Zo);v<=1&&m<c?(u=v,c=m):h*=.5}}return l&&(l[0]=vn(r,e,i,u),l[1]=vn(t,n,a,u)),xu(c)}function Zxt(r,t,e,n,i,a,o){for(var s=r,l=t,u=0,h=1/o,c=1;c<=o;c++){var f=c*h,d=vn(r,e,i,f),g=vn(t,n,a,f),p=d-s,v=g-l;u+=Math.sqrt(p*p+v*v),s=d,l=g}return u}var jxt=/cubic-bezier\(([0-9,\.e ]+)\)/;function $P(r){var t=r&&jxt.exec(r);if(t){var e=t[1].split(","),n=+so(e[0]),i=+so(e[1]),a=+so(e[2]),o=+so(e[3]);if(isNaN(n+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:zx(0,n,a,1,l,s)&&nn(0,i,o,1,s[0])}}}var Kxt=function(){function r(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Lr,this.ondestroy=t.ondestroy||Lr,this.onrestart=t.onrestart||Lr,t.easing&&this.setEasing(t.easing)}return r.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=e;return}var n=this._life,i=t-this._startTime-this._pausedTime,a=i/n;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.prototype.setEasing=function(t){this.easing=t,this.easingFunc=At(t)?t:Zv[t]||$P(t)},r}(),nH=function(){function r(t){this.value=t}return r}(),qxt=function(){function r(){this._len=0}return r.prototype.insert=function(t){var e=new nH(t);return this.insertEntry(e),e},r.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},r.prototype.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},r.prototype.len=function(){return this._len},r.prototype.clear=function(){this.head=this.tail=null,this._len=0},r}(),Hy=function(){function r(t){this._list=new qxt,this._maxSize=10,this._map={},this._maxSize=t}return r.prototype.put=function(t,e){var n=this._list,i=this._map,a=null;if(i[t]==null){var o=n.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=n.head;n.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=e:s=new nH(e),s.key=t,n.insertEntry(s),i[t]=s}return a},r.prototype.get=function(t){var e=this._map[t],n=this._list;if(e!=null)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},r.prototype.clear=function(){this._list.clear(),this._map={}},r.prototype.len=function(){return this._list.len()},r}(),v3={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function co(r){return r=Math.round(r),r<0?0:r>255?255:r}function Jxt(r){return r=Math.round(r),r<0?0:r>360?360:r}function $m(r){return r<0?0:r>1?1:r}function Wb(r){var t=r;return t.length&&t.charAt(t.length-1)==="%"?co(parseFloat(t)/100*255):co(parseInt(t,10))}function Tc(r){var t=r;return t.length&&t.charAt(t.length-1)==="%"?$m(parseFloat(t)/100):$m(parseFloat(t))}function Hb(r,t,e){return e<0?e+=1:e>1&&(e-=1),e*6<1?r+(t-r)*e*6:e*2<1?t:e*3<2?r+(t-r)*(2/3-e)*6:r}function hu(r,t,e){return r+(t-r)*e}function wa(r,t,e,n,i){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function IA(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}var iH=new Hy(20),a_=null;function Mf(r,t){a_&&IA(a_,t),a_=iH.put(r,a_||t.slice())}function sa(r,t){if(r){t=t||[];var e=iH.get(r);if(e)return IA(t,e);r=r+"";var n=r.replace(/ /g,"").toLowerCase();if(n in v3)return IA(t,v3[n]),Mf(r,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(n.slice(1,4),16);if(!(a>=0&&a<=4095)){wa(t,0,0,0,1);return}return wa(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Mf(r,t),t}else if(i===7||i===9){var a=parseInt(n.slice(1,7),16);if(!(a>=0&&a<=16777215)){wa(t,0,0,0,1);return}return wa(t,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(n.slice(7),16)/255:1),Mf(r,t),t}return}var o=n.indexOf("("),s=n.indexOf(")");if(o!==-1&&s+1===i){var l=n.substr(0,o),u=n.substr(o+1,s-(o+1)).split(","),h=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?wa(t,+u[0],+u[1],+u[2],1):wa(t,0,0,0,1);h=Tc(u.pop());case"rgb":if(u.length>=3)return wa(t,Wb(u[0]),Wb(u[1]),Wb(u[2]),u.length===3?h:Tc(u[3])),Mf(r,t),t;wa(t,0,0,0,1);return;case"hsla":if(u.length!==4){wa(t,0,0,0,1);return}return u[3]=Tc(u[3]),RA(u,t),Mf(r,t),t;case"hsl":if(u.length!==3){wa(t,0,0,0,1);return}return RA(u,t),Mf(r,t),t;default:return}}wa(t,0,0,0,1)}}function RA(r,t){var e=(parseFloat(r[0])%360+360)%360/360,n=Tc(r[1]),i=Tc(r[2]),a=i<=.5?i*(n+1):i+n-i*n,o=i*2-a;return t=t||[],wa(t,co(Hb(o,a,e+1/3)*255),co(Hb(o,a,e)*255),co(Hb(o,a,e-1/3)*255),1),r.length===4&&(t[3]=r[3]),t}function Qxt(r){if(r){var t=r[0]/255,e=r[1]/255,n=r[2]/255,i=Math.min(t,e,n),a=Math.max(t,e,n),o=a-i,s=(a+i)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+i):u=o/(2-a-i);var h=((a-t)/6+o/2)/o,c=((a-e)/6+o/2)/o,f=((a-n)/6+o/2)/o;t===a?l=f-c:e===a?l=1/3+h-f:n===a&&(l=2/3+c-h),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return r[3]!=null&&d.push(r[3]),d}}function PA(r,t){var e=sa(r);if(e){for(var n=0;n<3;n++)t<0?e[n]=e[n]*(1-t)|0:e[n]=(255-e[n])*t+e[n]|0,e[n]>255?e[n]=255:e[n]<0&&(e[n]=0);return tl(e,e.length===4?"rgba":"rgb")}}function $b(r,t,e){if(!(!(t&&t.length)||!(r>=0&&r<=1))){e=e||[];var n=r*(t.length-1),i=Math.floor(n),a=Math.ceil(n),o=t[i],s=t[a],l=n-i;return e[0]=co(hu(o[0],s[0],l)),e[1]=co(hu(o[1],s[1],l)),e[2]=co(hu(o[2],s[2],l)),e[3]=$m(hu(o[3],s[3],l)),e}}function tSt(r,t,e){if(!(!(t&&t.length)||!(r>=0&&r<=1))){var n=r*(t.length-1),i=Math.floor(n),a=Math.ceil(n),o=sa(t[i]),s=sa(t[a]),l=n-i,u=tl([co(hu(o[0],s[0],l)),co(hu(o[1],s[1],l)),co(hu(o[2],s[2],l)),$m(hu(o[3],s[3],l))],"rgba");return e?{color:u,leftIndex:i,rightIndex:a,value:n}:u}}function jv(r,t,e,n){var i=sa(r);if(r)return i=Qxt(i),t!=null&&(i[0]=Jxt(t)),e!=null&&(i[1]=Tc(e)),n!=null&&(i[2]=Tc(n)),tl(RA(i),"rgba")}function Vx(r,t){var e=sa(r);if(e&&t!=null)return e[3]=$m(t),tl(e,"rgba")}function tl(r,t){if(!(!r||!r.length)){var e=r[0]+","+r[1]+","+r[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(e+=","+r[3]),t+"("+e+")"}}function Ux(r,t){var e=sa(r);return e?(.299*e[0]+.587*e[1]+.114*e[2])*e[3]/255+(1-e[3])*t:0}var m3=new Hy(100);function LA(r){if(yt(r)){var t=m3.get(r);return t||(t=PA(r,-.1),m3.put(r,t)),t}else if(Iw(r)){var e=tt({},r);return e.colorStops=nt(r.colorStops,function(n){return{offset:n.offset,color:PA(n.color,-.1)}}),e}return r}var Wx=Math.round;function Ym(r){var t;if(!r||r==="transparent")r="none";else if(typeof r=="string"&&r.indexOf("rgba")>-1){var e=sa(r);e&&(r="rgb("+e[0]+","+e[1]+","+e[2]+")",t=e[3])}return{color:r,opacity:t??1}}var y3=1e-4;function cu(r){return r<y3&&r>-y3}function o_(r){return Wx(r*1e3)/1e3}function DA(r){return Wx(r*1e4)/1e4}function eSt(r){return"matrix("+o_(r[0])+","+o_(r[1])+","+o_(r[2])+","+o_(r[3])+","+DA(r[4])+","+DA(r[5])+")"}var rSt={left:"start",right:"end",center:"middle",middle:"middle"};function nSt(r,t,e){return e==="top"?r+=t/2:e==="bottom"&&(r-=t/2),r}function iSt(r){return r&&(r.shadowBlur||r.shadowOffsetX||r.shadowOffsetY)}function aSt(r){var t=r.style,e=r.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),e[0],e[1]].join(",")}function aH(r){return r&&!!r.image}function oSt(r){return r&&!!r.svgElement}function YP(r){return aH(r)||oSt(r)}function oH(r){return r.type==="linear"}function sH(r){return r.type==="radial"}function lH(r){return r&&(r.type==="linear"||r.type==="radial")}function Lw(r){return"url(#"+r+")"}function uH(r){var t=r.getGlobalScale(),e=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(e)/Math.log(10)),1)}function hH(r){var t=r.x||0,e=r.y||0,n=(r.rotation||0)*x1,i=Vt(r.scaleX,1),a=Vt(r.scaleY,1),o=r.skewX||0,s=r.skewY||0,l=[];return(t||e)&&l.push("translate("+t+"px,"+e+"px)"),n&&l.push("rotate("+n+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(o||s)&&l.push("skew("+Wx(o*x1)+"deg, "+Wx(s*x1)+"deg)"),l.join(" ")}var sSt=function(){return le.hasGlobalWindow&&At(window.btoa)?function(r){return window.btoa(unescape(encodeURIComponent(r)))}:typeof Buffer<"u"?function(r){return Buffer.from(r).toString("base64")}:function(r){return null}}(),OA=Array.prototype.slice;function Ns(r,t,e){return(t-r)*e+r}function Yb(r,t,e,n){for(var i=t.length,a=0;a<i;a++)r[a]=Ns(t[a],e[a],n);return r}function lSt(r,t,e,n){for(var i=t.length,a=i&&t[0].length,o=0;o<i;o++){r[o]||(r[o]=[]);for(var s=0;s<a;s++)r[o][s]=Ns(t[o][s],e[o][s],n)}return r}function s_(r,t,e,n){for(var i=t.length,a=0;a<i;a++)r[a]=t[a]+e[a]*n;return r}function _3(r,t,e,n){for(var i=t.length,a=i&&t[0].length,o=0;o<i;o++){r[o]||(r[o]=[]);for(var s=0;s<a;s++)r[o][s]=t[o][s]+e[o][s]*n}return r}function uSt(r,t){for(var e=r.length,n=t.length,i=e>n?t:r,a=Math.min(e,n),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(e,n);s++)i.push({offset:o.offset,color:o.color.slice()})}function hSt(r,t,e){var n=r,i=t;if(!(!n.push||!i.push)){var a=n.length,o=i.length;if(a!==o){var s=a>o;if(s)n.length=o;else for(var l=a;l<o;l++)n.push(e===1?i[l]:OA.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(e===1)isNaN(n[l])&&(n[l]=i[l]);else for(var h=0;h<u;h++)isNaN(n[l][h])&&(n[l][h]=i[l][h])}}function Kv(r){if(Qn(r)){var t=r.length;if(Qn(r[0])){for(var e=[],n=0;n<t;n++)e.push(OA.call(r[n]));return e}return OA.call(r)}return r}function b1(r){return r[0]=Math.floor(r[0])||0,r[1]=Math.floor(r[1])||0,r[2]=Math.floor(r[2])||0,r[3]=r[3]==null?1:r[3],"rgba("+r.join(",")+")"}function cSt(r){return Qn(r&&r[0])?2:1}var l_=0,E1=1,cH=2,gv=3,NA=4,FA=5,x3=6;function S3(r){return r===NA||r===FA}function u_(r){return r===E1||r===cH}var Rp=[0,0,0,0],fSt=function(){function r(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return r.prototype.isFinished=function(){return this._finished},r.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},r.prototype.needsAnimate=function(){return this.keyframes.length>=1},r.prototype.getAdditiveTrack=function(){return this._additiveTrack},r.prototype.addKeyframe=function(t,e,n){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=x3,l=e;if(Qn(e)){var u=cSt(e);s=u,(u===1&&!be(e[0])||u===2&&!be(e[0][0]))&&(o=!0)}else if(be(e)&&!Wm(e))s=l_;else if(yt(e))if(!isNaN(+e))s=l_;else{var h=sa(e);h&&(l=h,s=gv)}else if(Iw(e)){var c=tt({},l);c.colorStops=nt(e.colorStops,function(d){return{offset:d.offset,color:sa(d.color)}}),oH(e)?s=NA:sH(e)&&(s=FA),l=c}a===0?this.valType=s:(s!==this.valType||s===x3)&&(o=!0),this.discrete=this.discrete||o;var f={time:t,value:l,rawValue:e,percent:0};return n&&(f.easing=n,f.easingFunc=At(n)?n:Zv[n]||$P(n)),i.push(f),f},r.prototype.prepare=function(t,e){var n=this.keyframes;this._needsSort&&n.sort(function(p,v){return p.time-v.time});for(var i=this.valType,a=n.length,o=n[a-1],s=this.discrete,l=u_(i),u=S3(i),h=0;h<a;h++){var c=n[h],f=c.value,d=o.value;c.percent=c.time/t,s||(l&&h!==a-1?hSt(f,d,i):u&&uSt(f.colorStops,d.colorStops))}if(!s&&i!==FA&&e&&this.needsAnimate()&&e.needsAnimate()&&i===e.valType&&!e._finished){this._additiveTrack=e;for(var g=n[0].value,h=0;h<a;h++)i===l_?n[h].additiveValue=n[h].value-g:i===gv?n[h].additiveValue=s_([],n[h].value,g,-1):u_(i)&&(n[h].additiveValue=i===E1?s_([],n[h].value,g,-1):_3([],n[h].value,g,-1))}},r.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,u=a===gv,h,c=this._lastFr,f=Math.min,d,g;if(s===1)d=g=o[0];else{if(e<0)h=0;else if(e<this._lastFrP){var p=f(c+1,s-1);for(h=p;h>=0&&!(o[h].percent<=e);h--);h=f(h,s-2)}else{for(h=c;h<s&&!(o[h].percent>e);h++);h=f(h-1,s-2)}g=o[h+1],d=o[h]}if(d&&g){this._lastFr=h,this._lastFrP=e;var v=g.percent-d.percent,m=v===0?1:f((e-d.percent)/v,1);g.easingFunc&&(m=g.easingFunc(m));var y=n?this._additiveValue:u?Rp:t[l];if((u_(a)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:g.rawValue;else if(u_(a))a===E1?Yb(y,d[i],g[i],m):lSt(y,d[i],g[i],m);else if(S3(a)){var _=d[i],x=g[i],w=a===NA;t[l]={type:w?"linear":"radial",x:Ns(_.x,x.x,m),y:Ns(_.y,x.y,m),colorStops:nt(_.colorStops,function(T,b){var E=x.colorStops[b];return{offset:Ns(T.offset,E.offset,m),color:b1(Yb([],T.color,E.color,m))}}),global:x.global},w?(t[l].x2=Ns(_.x2,x.x2,m),t[l].y2=Ns(_.y2,x.y2,m)):t[l].r=Ns(_.r,x.r,m)}else if(u)Yb(y,d[i],g[i],m),n||(t[l]=b1(y));else{var S=Ns(d[i],g[i],m);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},r.prototype._addToTarget=function(t){var e=this.valType,n=this.propName,i=this._additiveValue;e===l_?t[n]=t[n]+i:e===gv?(sa(t[n],Rp),s_(Rp,Rp,i,1),t[n]=b1(Rp)):e===E1?s_(t[n],t[n],i,1):e===cH&&_3(t[n],t[n],i,1)},r}(),XP=function(){function r(t,e,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&i){GP("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return r.prototype.getMaxTime=function(){return this._maxTime},r.prototype.getDelay=function(){return this._delay},r.prototype.getLoop=function(){return this._loop},r.prototype.getTarget=function(){return this._target},r.prototype.changeTarget=function(t){this._target=t},r.prototype.when=function(t,e,n){return this.whenWithKeys(t,e,he(e),n)},r.prototype.whenWithKeys=function(t,e,n,i){for(var a=this._tracks,o=0;o<n.length;o++){var s=n[o],l=a[s];if(!l){l=a[s]=new fSt(s);var u=void 0,h=this._getAdditiveTrack(s);if(h){var c=h.keyframes,f=c[c.length-1];u=f&&f.value,h.valType===gv&&u&&(u=b1(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,Kv(u),i),this._trackKeys.push(s)}l.addKeyframe(t,Kv(e[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},r.prototype.pause=function(){this._clip.pause(),this._paused=!0},r.prototype.resume=function(){this._clip.resume(),this._paused=!1},r.prototype.isPaused=function(){return!!this._paused},r.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},r.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,n=0;n<e;n++)t[n].call(this)},r.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var n=0;n<e.length;n++)e[n].call(this)},r.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,n=0;n<e.length;n++)t[e[n]].setFinished()},r.prototype._getAdditiveTrack=function(t){var e,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var a=n[i].getTrack(t);a&&(e=a)}return e},r.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,n=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),u=s.keyframes,h=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var c=u[h-1];c&&(e._target[s.propName]=c.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var f=new Kxt({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){e._started=2;var g=e._additiveAnimators;if(g){for(var p=!1,v=0;v<g.length;v++)if(g[v]._clip){p=!0;break}p||(e._additiveAnimators=null)}for(var v=0;v<n.length;v++)n[v].step(e._target,d);var m=e._onframeCbs;if(m)for(var v=0;v<m.length;v++)m[v](e._target,d)},ondestroy:function(){e._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),t&&f.setEasing(t)}else this._doneCallback();return this}},r.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},r.prototype.delay=function(t){return this._delay=t,this},r.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},r.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},r.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},r.prototype.getClip=function(){return this._clip},r.prototype.getTrack=function(t){return this._tracks[t]},r.prototype.getTracks=function(){var t=this;return nt(this._trackKeys,function(e){return t._tracks[e]})},r.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,a=0;a<t.length;a++){var o=n[t[a]];o&&!o.isFinished()&&(e?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!n[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},r.prototype.saveTo=function(t,e,n){if(t){e=e||this._trackKeys;for(var i=0;i<e.length;i++){var a=e[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[n?0:s.length-1];l&&(t[a]=Kv(l.rawValue))}}}},r.prototype.__changeFinalValue=function(t,e){e=e||he(t);for(var n=0;n<e.length;n++){var i=e[n],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,t[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},r}();function xd(){return new Date().getTime()}var dSt=function(r){U(t,r);function t(e){var n=r.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,e=e||{},n.stage=e.stage||{},n}return t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var n=e.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(e){if(e.animation){var n=e.prev,i=e.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var n=e.getClip();n&&this.removeClip(n),e.animation=null},t.prototype.update=function(e){for(var n=xd()-this._pausedTime,i=n-this._time,a=this._head;a;){var o=a.next,s=a.step(n,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=n,e||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0;function n(){e._running&&(Gx(n),!e._paused&&e.update())}Gx(n)},t.prototype.start=function(){this._running||(this._time=xd(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=xd(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=xd()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var n=e.next;e.prev=e.next=e.animation=null,e=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(e,n){n=n||{},this.start();var i=new XP(e,n.loop);return this.addAnimator(i),i},t}(Za),gSt=300,Xb=le.domSupported,Zb=function(){var r=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],e={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=nt(r,function(i){var a=i.replace("mouse","pointer");return e.hasOwnProperty(a)?a:i});return{mouse:r,touch:t,pointer:n}}(),w3={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},T3=!1;function kA(r){var t=r.pointerType;return t==="pen"||t==="touch"}function pSt(r){r.touching=!0,r.touchTimer!=null&&(clearTimeout(r.touchTimer),r.touchTimer=null),r.touchTimer=setTimeout(function(){r.touching=!1,r.touchTimer=null},700)}function jb(r){r&&(r.zrByTouch=!0)}function vSt(r,t){return Ea(r.dom,new mSt(r,t),!0)}function fH(r,t){for(var e=t,n=!1;e&&e.nodeType!==9&&!(n=e.domBelongToZr||e!==t&&e===r.painterRoot);)e=e.parentNode;return n}var mSt=function(){function r(t,e){this.stopPropagation=Lr,this.stopImmediatePropagation=Lr,this.preventDefault=Lr,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}return r}(),eo={mousedown:function(r){r=Ea(this.dom,r),this.__mayPointerCapture=[r.zrX,r.zrY],this.trigger("mousedown",r)},mousemove:function(r){r=Ea(this.dom,r);var t=this.__mayPointerCapture;t&&(r.zrX!==t[0]||r.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",r)},mouseup:function(r){r=Ea(this.dom,r),this.__togglePointerCapture(!1),this.trigger("mouseup",r)},mouseout:function(r){r=Ea(this.dom,r);var t=r.toElement||r.relatedTarget;fH(this,t)||(this.__pointerCapturing&&(r.zrEventControl="no_globalout"),this.trigger("mouseout",r))},wheel:function(r){T3=!0,r=Ea(this.dom,r),this.trigger("mousewheel",r)},mousewheel:function(r){T3||(r=Ea(this.dom,r),this.trigger("mousewheel",r))},touchstart:function(r){r=Ea(this.dom,r),jb(r),this.__lastTouchMoment=new Date,this.handler.processGesture(r,"start"),eo.mousemove.call(this,r),eo.mousedown.call(this,r)},touchmove:function(r){r=Ea(this.dom,r),jb(r),this.handler.processGesture(r,"change"),eo.mousemove.call(this,r)},touchend:function(r){r=Ea(this.dom,r),jb(r),this.handler.processGesture(r,"end"),eo.mouseup.call(this,r),+new Date-+this.__lastTouchMoment<gSt&&eo.click.call(this,r)},pointerdown:function(r){eo.mousedown.call(this,r)},pointermove:function(r){kA(r)||eo.mousemove.call(this,r)},pointerup:function(r){eo.mouseup.call(this,r)},pointerout:function(r){kA(r)||eo.mouseout.call(this,r)}};I(["click","dblclick","contextmenu"],function(r){eo[r]=function(t){t=Ea(this.dom,t),this.trigger(r,t)}});var GA={pointermove:function(r){kA(r)||GA.mousemove.call(this,r)},pointerup:function(r){GA.mouseup.call(this,r)},mousemove:function(r){this.trigger("mousemove",r)},mouseup:function(r){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",r),t&&(r.zrEventControl="only_globalout",this.trigger("mouseout",r))}};function ySt(r,t){var e=t.domHandlers;le.pointerEventsSupported?I(Zb.pointer,function(n){C1(t,n,function(i){e[n].call(r,i)})}):(le.touchEventsSupported&&I(Zb.touch,function(n){C1(t,n,function(i){e[n].call(r,i),pSt(t)})}),I(Zb.mouse,function(n){C1(t,n,function(i){i=UP(i),t.touching||e[n].call(r,i)})}))}function _St(r,t){le.pointerEventsSupported?I(w3.pointer,e):le.touchEventsSupported||I(w3.mouse,e);function e(n){function i(a){a=UP(a),fH(r,a.target)||(a=vSt(r,a),t.domHandlers[n].call(r,a))}C1(t,n,i,{capture:!0})}}function C1(r,t,e,n){r.mounted[t]=e,r.listenerOpts[t]=n,MA(r.domTarget,t,e,n)}function Kb(r){var t=r.mounted;for(var e in t)t.hasOwnProperty(e)&&Dxt(r.domTarget,e,t[e],r.listenerOpts[e]);r.mounted={}}var b3=function(){function r(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e}return r}(),xSt=function(r){U(t,r);function t(e,n){var i=r.call(this)||this;return i.__pointerCapturing=!1,i.dom=e,i.painterRoot=n,i._localHandlerScope=new b3(e,eo),Xb&&(i._globalHandlerScope=new b3(document,GA)),ySt(i,i._localHandlerScope),i}return t.prototype.dispose=function(){Kb(this._localHandlerScope),Xb&&Kb(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,Xb&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var n=this._globalHandlerScope;e?_St(this,n):Kb(n)}},t}(Za),dH=1;le.hasGlobalWindow&&(dH=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Hx=dH,BA=.4,zA="#333",VA="#ccc",SSt="#eee",E3=Pw,C3=5e-5;function gh(r){return r>C3||r<-C3}var ph=[],Af=[],qb=oa(),Jb=Math.abs,Ws=function(){function r(){}return r.prototype.getLocalTransform=function(t){return r.getLocalTransform(this,t)},r.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},r.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},r.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},r.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},r.prototype.needLocalTransform=function(){return gh(this.rotation)||gh(this.x)||gh(this.y)||gh(this.scaleX-1)||gh(this.scaleY-1)||gh(this.skewX)||gh(this.skewY)},r.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),n=this.transform;if(!(e||t)){n&&(E3(n),this.invTransform=null);return}n=n||oa(),e?this.getLocalTransform(n):E3(n),t&&(e?Qs(n,t,n):WP(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},r.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(e!=null&&e!==1){this.getGlobalScale(ph);var n=ph[0]<0?-1:1,i=ph[1]<0?-1:1,a=((ph[0]-n)*e+n)/ph[0]||0,o=((ph[1]-i)*e+i)/ph[1]||0;t[0]*=a,t[1]*=a,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||oa(),Xg(this.invTransform,t)},r.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},r.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),a=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(a),e=Math.sqrt(e),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=n,this.originX=0,this.originY=0}},r.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||oa(),Qs(Af,t.invTransform,e),e=Af);var n=this.originX,i=this.originY;(n||i)&&(qb[4]=n,qb[5]=i,Qs(Af,e,qb),Af[4]-=n,Af[5]-=i,e=Af),this.setLocalTransform(e)}},r.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},r.prototype.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&Ln(n,n,i),n},r.prototype.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&Ln(n,n,i),n},r.prototype.getLineScale=function(){var t=this.transform;return t&&Jb(t[0]-1)>1e-10&&Jb(t[3]-1)>1e-10?Math.sqrt(Jb(t[0]*t[3]-t[2]*t[1])):1},r.prototype.copyTransform=function(t){gH(this,t)},r.getLocalTransform=function(t,e){e=e||[];var n=t.originX||0,i=t.originY||0,a=t.scaleX,o=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,h=t.x,c=t.y,f=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var g=n+s,p=i+l;e[4]=-g*a-f*p*o,e[5]=-p*o-d*g*a}else e[4]=e[5]=0;return e[0]=a,e[3]=o,e[1]=d*a,e[2]=f*o,u&&rf(e,e,u),e[4]+=n+h,e[5]+=i+c,e},r.initDefaultProps=function(){var t=r.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),r}(),ds=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function gH(r,t){for(var e=0;e<ds.length;e++){var n=ds[e];r[n]=t[n]}}var M3={};function la(r,t){t=t||ku;var e=M3[t];e||(e=M3[t]=new Hy(500));var n=e.get(r);return n==null&&(n=Gu.measureText(r,t).width,e.put(r,n)),n}function A3(r,t,e,n){var i=la(r,t),a=Dw(t),o=pv(0,i,e),s=id(0,a,n),l=new jt(o,s,i,a);return l}function $y(r,t,e,n){var i=((r||"")+"").split(`
`),a=i.length;if(a===1)return A3(i[0],t,e,n);for(var o=new jt(0,0,0,0),s=0;s<i.length;s++){var l=A3(i[s],t,e,n);s===0?o.copy(l):o.union(l)}return o}function pv(r,t,e){return e==="right"?r-=t:e==="center"&&(r-=t/2),r}function id(r,t,e){return e==="middle"?r-=t/2:e==="bottom"&&(r-=t),r}function Dw(r){return la("",r)}function _o(r,t){return typeof r=="string"?r.lastIndexOf("%")>=0?parseFloat(r)/100*t:parseFloat(r):r}function $x(r,t,e){var n=t.position||"inside",i=t.distance!=null?t.distance:5,a=e.height,o=e.width,s=a/2,l=e.x,u=e.y,h="left",c="top";if(n instanceof Array)l+=_o(n[0],e.width),u+=_o(n[1],e.height),h=null,c=null;else switch(n){case"left":l-=i,u+=s,h="right",c="middle";break;case"right":l+=i+o,u+=s,c="middle";break;case"top":l+=o/2,u-=i,h="center",c="bottom";break;case"bottom":l+=o/2,u+=a+i,h="center";break;case"inside":l+=o/2,u+=s,h="center",c="middle";break;case"insideLeft":l+=i,u+=s,c="middle";break;case"insideRight":l+=o-i,u+=s,h="right",c="middle";break;case"insideTop":l+=o/2,u+=i,h="center";break;case"insideBottom":l+=o/2,u+=a-i,h="center",c="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=o-i,u+=i,h="right";break;case"insideBottomLeft":l+=i,u+=a-i,c="bottom";break;case"insideBottomRight":l+=o-i,u+=a-i,h="right",c="bottom";break}return r=r||{},r.x=l,r.y=u,r.align=h,r.verticalAlign=c,r}var Qb="__zr_normal__",tE=ds.concat(["ignore"]),wSt=cs(ds,function(r,t){return r[t]=!0,r},{ignore:!1}),If={},TSt=new jt(0,0,0,0),Ow=function(){function r(t){this.id=U9(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return r.prototype._init=function(t){this.attr(t)},r.prototype.drift=function(t,e,n){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.markRedraw()},r.prototype.beforeUpdate=function(){},r.prototype.afterUpdate=function(){},r.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},r.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,a=e.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var u=!1;if(a.copyTransform(e),n.position!=null){var h=TSt;n.layoutRect?h.copy(n.layoutRect):h.copy(this.getBoundingRect()),i||h.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(If,n,h):$x(If,n,h),a.x=If.x,a.y=If.y,o=If.align,s=If.verticalAlign;var c=n.origin;if(c&&n.rotation!=null){var f=void 0,d=void 0;c==="center"?(f=h.width*.5,d=h.height*.5):(f=_o(c[0],h.width),d=_o(c[1],h.height)),u=!0,a.originX=-a.x+f+(i?0:h.x),a.originY=-a.y+d+(i?0:h.y)}}n.rotation!=null&&(a.rotation=n.rotation);var g=n.offset;g&&(a.x+=g[0],a.y+=g[1],u||(a.originX=-g[0],a.originY=-g[1]));var p=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,_=void 0;p&&this.canBeInsideText()?(m=n.insideFill,y=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),_=!0)):(m=n.outsideFill,y=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),_=!0)),m=m||"#000",(m!==v.fill||y!==v.stroke||_!==v.autoStroke||o!==v.align||s!==v.verticalAlign)&&(l=!0,v.fill=m,v.stroke=y,v.autoStroke=_,v.align=o,v.verticalAlign=s,e.setDefaultTextStyle(v)),e.__dirty|=ta,l&&e.dirtyStyle(!0)}},r.prototype.canBeInsideText=function(){return!0},r.prototype.getInsideTextFill=function(){return"#fff"},r.prototype.getInsideTextStroke=function(t){return"#000"},r.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?VA:zA},r.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),n=typeof e=="string"&&sa(e);n||(n=[255,255,255,1]);for(var i=n[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)n[o]=n[o]*i+(a?0:255)*(1-i);return n[3]=1,tl(n,"rgba")},r.prototype.traverse=function(t,e){},r.prototype.attrKV=function(t,e){t==="textConfig"?this.setTextConfig(e):t==="textContent"?this.setTextContent(e):t==="clipPath"?this.setClipPath(e):t==="extra"?(this.extra=this.extra||{},tt(this.extra,e)):this[t]=e},r.prototype.hide=function(){this.ignore=!0,this.markRedraw()},r.prototype.show=function(){this.ignore=!1,this.markRedraw()},r.prototype.attr=function(t,e){if(typeof t=="string")this.attrKV(t,e);else if(Rt(t))for(var n=t,i=he(n),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,t[o])}return this.markRedraw(),this},r.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==Qb)){var o=i.targetName,s=o?e[o]:e;i.saveTo(s)}}},r.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,tE)},r.prototype._savePrimaryToNormal=function(t,e,n){for(var i=0;i<n.length;i++){var a=n[i];t[a]!=null&&!(a in e)&&(e[a]=this[a])}},r.prototype.hasState=function(){return this.currentStates.length>0},r.prototype.getState=function(t){return this.states[t]},r.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},r.prototype.clearStates=function(t){this.useState(Qb,!1,t)},r.prototype.useState=function(t,e,n,i){var a=t===Qb,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(te(s,t)>=0&&(e||s.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!a){GP("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(u);var h=!!(u&&u.hoverLayer||i);h&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,e,!n&&!this.__inHover&&l&&l.duration>0,l);var c=this._textContent,f=this._textGuide;return c&&c.useState(t,e,n,h),f&&f.useState(t,e,n,h),a?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ta),u}}},r.prototype.useStates=function(t,e,n){if(!t.length)this.clearStates();else{var i=[],a=this.currentStates,o=t.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(t[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var u=t[l],h=void 0;this.stateProxy&&(h=this.stateProxy(u,t)),h||(h=this.states[u]),h&&i.push(h)}var c=i[o-1],f=!!(c&&c.hoverLayer||n);f&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),g=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!e&&!this.__inHover&&g&&g.duration>0,g);var p=this._textContent,v=this._textGuide;p&&p.useStates(t,e,f),v&&v.useStates(t,e,f),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ta)}},r.prototype.isSilent=function(){for(var t=this.silent,e=this.parent;!t&&e;){if(e.silent){t=!0;break}e=e.parent}return t},r.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},r.prototype.removeState=function(t){var e=te(this.currentStates,t);if(e>=0){var n=this.currentStates.slice();n.splice(e,1),this.useStates(n)}},r.prototype.replaceState=function(t,e,n){var i=this.currentStates.slice(),a=te(i,t),o=te(i,e)>=0;a>=0?o?i.splice(a,1):i[a]=e:n&&!o&&i.push(e),this.useStates(i)},r.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},r.prototype._mergeStates=function(t){for(var e={},n,i=0;i<t.length;i++){var a=t[i];tt(e,a),a.textConfig&&(n=n||{},tt(n,a.textConfig))}return n&&(e.textConfig=n),e},r.prototype._applyStateObj=function(t,e,n,i,a,o){var s=!(e&&i);e&&e.textConfig?(this.textConfig=tt({},i?this.textConfig:n.textConfig),tt(this.textConfig,e.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,h=0;h<tE.length;h++){var c=tE[h],f=a&&wSt[c];e&&e[c]!=null?f?(u=!0,l[c]=e[c]):this[c]=e[c]:s&&n[c]!=null&&(f?(u=!0,l[c]=n[c]):this[c]=n[c])}if(!a)for(var h=0;h<this.animators.length;h++){var d=this.animators[h],g=d.targetName;d.getLoop()||d.__changeFinalValue(g?(e||n)[g]:e||n)}u&&this._transitionState(t,l,o)},r.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},r.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},r.prototype.getClipPath=function(){return this._clipPath},r.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},r.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},r.prototype.getTextContent=function(){return this._textContent},r.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new Ws,this._attachComponent(t),this._textContent=t,this.markRedraw())},r.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),tt(this.textConfig,t),this.markRedraw()},r.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},r.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},r.prototype.getTextGuideLine=function(){return this._textGuide},r.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},r.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},r.prototype.markRedraw=function(){this.__dirty|=ta;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},r.prototype.dirty=function(){this.markRedraw()},r.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,n=this._textGuide;e&&(e.__inHover=t),n&&(n.__inHover=t)},r.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},r.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},r.prototype.animate=function(t,e,n){var i=t?this[t]:this,a=new XP(i,e,n);return t&&(a.targetName=t),this.addAnimator(a,t),a},r.prototype.addAnimator=function(t,e){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(e)}).done(function(){var a=i.animators,o=te(a,t);o>=0&&a.splice(o,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},r.prototype.updateDuringAnimation=function(t){this.markRedraw()},r.prototype.stopAnimation=function(t,e){for(var n=this.animators,i=n.length,a=[],o=0;o<i;o++){var s=n[o];!t||t===s.scope?s.stop(e):a.push(s)}return this.animators=a,this},r.prototype.animateTo=function(t,e,n){eE(this,t,e,n)},r.prototype.animateFrom=function(t,e,n){eE(this,t,e,n,!0)},r.prototype._transitionState=function(t,e,n,i){for(var a=eE(this,e,n,i),o=0;o<a.length;o++)a[o].__fromStateTransition=t},r.prototype.getBoundingRect=function(){return null},r.prototype.getPaintRect=function(){return null},r.initDefaultProps=function(){var t=r.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=ta;function e(n,i,a,o){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(h){l[a]=h}}),Object.defineProperty(u,1,{get:function(){return l[o]},set:function(h){l[o]=h}})}}Object.defineProperty&&(e("position","_legacyPos","x","y"),e("scale","_legacyScale","scaleX","scaleY"),e("origin","_legacyOrigin","originX","originY"))}(),r}();Hr(Ow,Za);Hr(Ow,Ws);function eE(r,t,e,n,i){e=e||{};var a=[];pH(r,"",r,t,e,n,a,i);var o=a.length,s=!1,l=e.done,u=e.aborted,h=function(){s=!0,o--,o<=0&&(s?l&&l():u&&u())},c=function(){o--,o<=0&&(s?l&&l():u&&u())};o||l&&l(),a.length>0&&e.during&&a[0].during(function(g,p){e.during(p)});for(var f=0;f<a.length;f++){var d=a[f];h&&d.done(h),c&&d.aborted(c),e.force&&d.duration(e.duration),d.start(e.easing)}return a}function rE(r,t,e){for(var n=0;n<e;n++)r[n]=t[n]}function bSt(r){return Qn(r[0])}function ESt(r,t,e){if(Qn(t[e]))if(Qn(r[e])||(r[e]=[]),Wi(t[e])){var n=t[e].length;r[e].length!==n&&(r[e]=new t[e].constructor(n),rE(r[e],t[e],n))}else{var i=t[e],a=r[e],o=i.length;if(bSt(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?rE(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else rE(a,i,o);a.length=i.length}else r[e]=t[e]}function CSt(r,t){return r===t||Qn(r)&&Qn(t)&&MSt(r,t)}function MSt(r,t){var e=r.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}function pH(r,t,e,n,i,a,o,s){for(var l=he(n),u=i.duration,h=i.delay,c=i.additive,f=i.setToFinal,d=!Rt(a),g=r.animators,p=[],v=0;v<l.length;v++){var m=l[v],y=n[m];if(y!=null&&e[m]!=null&&(d||a[m]))if(Rt(y)&&!Qn(y)&&!Iw(y)){if(t){s||(e[m]=y,r.updateDuringAnimation(t));continue}pH(r,m,e[m],y,i,a&&a[m],o,s)}else p.push(m);else s||(e[m]=y,r.updateDuringAnimation(t),p.push(m))}var _=p.length;if(!c&&_)for(var x=0;x<g.length;x++){var w=g[x];if(w.targetName===t){var S=w.stopTracks(p);if(S){var T=te(g,w);g.splice(T,1)}}}if(i.force||(p=ze(p,function(M){return!CSt(n[M],e[M])}),_=p.length),_>0||i.force&&!o.length){var b=void 0,E=void 0,C=void 0;if(s){E={},f&&(b={});for(var x=0;x<_;x++){var m=p[x];E[m]=e[m],f?b[m]=n[m]:e[m]=n[m]}}else if(f){C={};for(var x=0;x<_;x++){var m=p[x];C[m]=Kv(e[m]),ESt(e,n,m)}}var w=new XP(e,!1,!1,c?ze(g,function(A){return A.targetName===t}):null);w.targetName=t,i.scope&&(w.scope=i.scope),f&&b&&w.whenWithKeys(0,b,p),C&&w.whenWithKeys(0,C,p),w.whenWithKeys(u??500,s?E:n,p).delay(h||0),r.addAnimator(w,t),o.push(w)}}var Dt=function(r){U(t,r);function t(e){var n=r.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(e),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===e)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,n){if(e&&e!==this&&e.parent!==this&&n&&n.parent===this){var i=this._children,a=i.indexOf(n);a>=0&&(i.splice(a,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,n){var i=te(this._children,e);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(e,n){var i=this._children,a=i[n];if(e&&e!==this&&e.parent!==this&&e!==a){i[n]=e,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var n=this.__zr;n&&n!==e.__zr&&e.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(e){var n=this.__zr,i=this._children,a=te(i,e);return a<0?this:(i.splice(a,1),e.parent=null,n&&e.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var e=this._children,n=this.__zr,i=0;i<e.length;i++){var a=e[i];n&&a.removeSelfFromZr(n),a.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,n){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];e.call(n,o,a)}return this},t.prototype.traverse=function(e,n){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=e.call(n,a);a.isGroup&&!o&&a.traverse(e,n)}return this},t.prototype.addSelfToZr=function(e){r.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){r.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(e)}},t.prototype.getBoundingRect=function(e){for(var n=new jt(0,0,0,0),i=e||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),h=l.getLocalTransform(a);h?(jt.applyTransform(n,u,h),o=o||n.clone(),o.union(n)):(o=o||u.clone(),o.union(u))}}return o||n},t}(Ow);Dt.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var M1={},vH={};function ASt(r){delete vH[r]}function ISt(r){if(!r)return!1;if(typeof r=="string")return Ux(r,1)<BA;if(r.colorStops){for(var t=r.colorStops,e=0,n=t.length,i=0;i<n;i++)e+=Ux(t[i].color,1);return e/=n,e<BA}return!1}var RSt=function(){function r(t,e,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=e,this.id=t;var a=new $xt,o=n.renderer||"canvas";M1[o]||(o=he(M1)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new M1[o](e,a,n,t),l=n.ssr||s.ssrOnly;this.storage=a,this.painter=s;var u=!le.node&&!le.worker&&!l?new xSt(s.getViewportRoot(),s.root):null,h=n.useCoarsePointer,c=h==null||h==="auto"?le.touchEventsSupported:!!h,f=44,d;c&&(d=Vt(n.pointerSize,f)),this.handler=new Z9(a,s,u,s.root,d),this.animation=new dSt({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return r.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},r.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},r.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},r.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=ISt(t))},r.prototype.getBackgroundColor=function(){return this._backgroundColor},r.prototype.setDarkMode=function(t){this._darkMode=t},r.prototype.isDarkMode=function(){return this._darkMode},r.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},r.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},r.prototype.flush=function(){this._disposed||this._flush(!1)},r.prototype._flush=function(t){var e,n=xd();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var i=xd();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},r.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},r.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},r.prototype.refreshHover=function(){this._needsRefreshHover=!0},r.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},r.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},r.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},r.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},r.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},r.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},r.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},r.prototype.on=function(t,e,n){return this._disposed||this.handler.on(t,e,n),this},r.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},r.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},r.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof Dt&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},r.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,ASt(this.id))},r}();function I3(r,t){var e=new RSt(U9(),r,t);return vH[e.id]=e,e}function PSt(r,t){M1[r]=t}var UA;function LSt(r){if(typeof UA=="function")return UA(r)}function DSt(r){UA=r}var R3=1e-4,mH=20;function OSt(r){return r.replace(/^\s+|\s+$/g,"")}function Fe(r,t,e,n){var i=t[0],a=t[1],o=e[0],s=e[1],l=a-i,u=s-o;if(l===0)return u===0?o:(o+s)/2;if(n)if(l>0){if(r<=i)return o;if(r>=a)return s}else{if(r>=i)return o;if(r<=a)return s}else{if(r===i)return o;if(r===a)return s}return(r-i)/l*u+o}function ft(r,t){switch(r){case"center":case"middle":r="50%";break;case"left":case"top":r="0%";break;case"right":case"bottom":r="100%";break}return yt(r)?OSt(r).match(/%$/)?parseFloat(r)/100*t:parseFloat(r):r==null?NaN:+r}function Cr(r,t,e){return t==null&&(t=10),t=Math.min(Math.max(0,t),mH),r=(+r).toFixed(t),e?r:+r}function Ga(r){return r.sort(function(t,e){return t-e}),r}function Jo(r){if(r=+r,isNaN(r))return 0;if(r>1e-14){for(var t=1,e=0;e<15;e++,t*=10)if(Math.round(r*t)/t===r)return e}return NSt(r)}function NSt(r){var t=r.toString().toLowerCase(),e=t.indexOf("e"),n=e>0?+t.slice(e+1):0,i=e>0?e:t.length,a=t.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-n)}function yH(r,t){var e=Math.log,n=Math.LN10,i=Math.floor(e(r[1]-r[0])/n),a=Math.round(e(Math.abs(t[1]-t[0]))/n),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function FSt(r,t){var e=cs(r,function(d,g){return d+(isNaN(g)?0:g)},0);if(e===0)return[];for(var n=Math.pow(10,t),i=nt(r,function(d){return(isNaN(d)?0:d)/e*n*100}),a=n*100,o=nt(i,function(d){return Math.floor(d)}),s=cs(o,function(d,g){return d+g},0),l=nt(i,function(d,g){return d-o[g]});s<a;){for(var u=Number.NEGATIVE_INFINITY,h=null,c=0,f=l.length;c<f;++c)l[c]>u&&(u=l[c],h=c);++o[h],l[h]=0,++s}return nt(o,function(d){return d/n})}function kSt(r,t){var e=Math.max(Jo(r),Jo(t)),n=r+t;return e>mH?n:Cr(n,e)}var P3=9007199254740991;function _H(r){var t=Math.PI*2;return(r%t+t)%t}function Xm(r){return r>-R3&&r<R3}var GSt=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function gs(r){if(r instanceof Date)return r;if(yt(r)){var t=GSt.exec(r);if(!t)return new Date(NaN);if(t[8]){var e=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(e-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,e,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(r==null)return new Date(NaN);return new Date(Math.round(r))}function BSt(r){return Math.pow(10,ZP(r))}function ZP(r){if(r===0)return 0;var t=Math.floor(Math.log(r)/Math.LN10);return r/Math.pow(10,t)>=10&&t++,t}function xH(r,t){var e=ZP(r),n=Math.pow(10,e),i=r/n,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,r=a*n,e>=-20?+r.toFixed(e<0?-e:0):r}function nE(r,t){var e=(r.length-1)*t+1,n=Math.floor(e),i=+r[n-1],a=e-n;return a?i+a*(r[n]-i):i}function L3(r){r.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,e=1,n=0;n<r.length;){for(var i=r[n].interval,a=r[n].close,o=0;o<2;o++)i[o]<=t&&(i[o]=t,a[o]=o?1:1-e),t=i[o],e=a[o];i[0]===i[1]&&a[0]*a[1]!==1?r.splice(n,1):n++}return r;function s(l,u,h){return l.interval[h]<u.interval[h]||l.interval[h]===u.interval[h]&&(l.close[h]-u.close[h]===(h?-1:1)||!h&&s(l,u,1))}}function ll(r){var t=parseFloat(r);return t==r&&(t!==0||!yt(r)||r.indexOf("x")<=0)?t:NaN}function SH(r){return!isNaN(ll(r))}function wH(){return Math.round(Math.random()*9)}function TH(r,t){return t===0?r:TH(t,r%t)}function D3(r,t){return r==null?t:t==null?r:r*t/TH(r,t)}function Pe(r){throw new Error(r)}function O3(r,t,e){return(t-r)*e+r}var bH="series\0",EH="\0_ec_\0";function Ye(r){return r instanceof Array?r:r==null?[]:[r]}function zc(r,t,e){if(r){r[t]=r[t]||{},r.emphasis=r.emphasis||{},r.emphasis[t]=r.emphasis[t]||{};for(var n=0,i=e.length;n<i;n++){var a=e[n];!r.emphasis[t].hasOwnProperty(a)&&r[t].hasOwnProperty(a)&&(r.emphasis[t][a]=r[t][a])}}}var N3=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Zg(r){return Rt(r)&&!rt(r)&&!(r instanceof Date)?r.value:r}function zSt(r){return Rt(r)&&!(r instanceof Array)}function CH(r,t,e){var n=e==="normalMerge",i=e==="replaceMerge",a=e==="replaceAll";r=r||[],t=(t||[]).slice();var o=wt();I(t,function(l,u){if(!Rt(l)){t[u]=null;return}});var s=VSt(r,o,e);return(n||i)&&USt(s,r,o,t),n&&WSt(s,t),n||i?HSt(s,t,i):a&&$St(s,t),YSt(s),s}function VSt(r,t,e){var n=[];if(e==="replaceAll")return n;for(var i=0;i<r.length;i++){var a=r[i];a&&a.id!=null&&t.set(a.id,i),n.push({existing:e==="replaceMerge"||Zm(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return n}function USt(r,t,e,n){I(n,function(i,a){if(!(!i||i.id==null)){var o=qv(i.id),s=e.get(o);if(s!=null){var l=r[s];xi(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=t[s],n[a]=null}}})}function WSt(r,t){I(t,function(e,n){if(!(!e||e.name==null))for(var i=0;i<r.length;i++){var a=r[i].existing;if(!r[i].newOption&&a&&(a.id==null||e.id==null)&&!Zm(e)&&!Zm(a)&&MH("name",a,e)){r[i].newOption=e,t[n]=null;return}}})}function HSt(r,t,e){I(t,function(n){if(n){for(var i,a=0;(i=r[a])&&(i.newOption||Zm(i.existing)||i.existing&&n.id!=null&&!MH("id",n,i.existing));)a++;i?(i.newOption=n,i.brandNew=e):r.push({newOption:n,brandNew:e,existing:null,keyInfo:null}),a++}})}function $St(r,t){I(t,function(e){r.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})})}function YSt(r){var t=wt();I(r,function(e){var n=e.existing;n&&t.set(n.id,e)}),I(r,function(e){var n=e.newOption;xi(!n||n.id==null||!t.get(n.id)||t.get(n.id)===e,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,e),!e.keyInfo&&(e.keyInfo={})}),I(r,function(e,n){var i=e.existing,a=e.newOption,o=e.keyInfo;if(Rt(a)){if(o.name=a.name!=null?qv(a.name):i?i.name:bH+n,i)o.id=qv(i.id);else if(a.id!=null)o.id=qv(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(t.get(o.id))}t.set(o.id,e)}})}function MH(r,t,e){var n=Zr(t[r],null),i=Zr(e[r],null);return n!=null&&i!=null&&n===i}function qv(r){return Zr(r,"")}function Zr(r,t){return r==null?t:yt(r)?r:be(r)||xA(r)?r+"":t}function jP(r){var t=r.name;return!!(t&&t.indexOf(bH))}function Zm(r){return r&&r.id!=null&&qv(r.id).indexOf(EH)===0}function XSt(r){return EH+r}function ZSt(r,t,e){I(r,function(n){var i=n.newOption;Rt(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=jSt(t,i,n.existing,e))})}function jSt(r,t,e,n){var i=t.type?t.type:e?e.subType:n.determineSubType(r,t);return i}function KSt(r,t){var e={},n={};return i(r||[],e),i(t||[],n,e),[a(e),a(n)];function i(o,s,l){for(var u=0,h=o.length;u<h;u++){var c=Zr(o[u].seriesId,null);if(c==null)return;for(var f=Ye(o[u].dataIndex),d=l&&l[c],g=0,p=f.length;g<p;g++){var v=f[g];d&&d[v]?d[v]=null:(s[c]||(s[c]={}))[v]=1}}}function a(o,s){var l=[];for(var u in o)if(o.hasOwnProperty(u)&&o[u]!=null)if(s)l.push(+u);else{var h=a(o[u],!0);h.length&&l.push({seriesId:u,dataIndex:h})}return l}}function Vc(r,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return rt(t.dataIndex)?nt(t.dataIndex,function(e){return r.indexOfRawIndex(e)}):r.indexOfRawIndex(t.dataIndex);if(t.name!=null)return rt(t.name)?nt(t.name,function(e){return r.indexOfName(e)}):r.indexOfName(t.name)}function me(){var r="__ec_inner_"+qSt++;return function(t){return t[r]||(t[r]={})}}var qSt=wH();function Jv(r,t,e){var n=KP(t,e),i=n.mainTypeSpecified,a=n.queryOptionMap,o=n.others,s=o,l=e?e.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(u,h){var c=Yy(r,h,u,{useDefault:l===h,enableAll:e&&e.enableAll!=null?e.enableAll:!0,enableNone:e&&e.enableNone!=null?e.enableNone:!0});s[h+"Models"]=c.models,s[h+"Model"]=c.models[0]}),s}function KP(r,t){var e;if(yt(r)){var n={};n[r+"Index"]=0,e=n}else e=r;var i=wt(),a={},o=!1;return I(e,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],h=u[1],c=(u[2]||"").toLowerCase();if(!(!h||!c||t&&t.includeMainTypes&&te(t.includeMainTypes,h)<0)){o=o||!!h;var f=i.get(h)||i.set(h,{});f[c]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var Br={useDefault:!0,enableAll:!1,enableNone:!1},JSt={useDefault:!1,enableAll:!0,enableNone:!0};function Yy(r,t,e,n){n=n||Br;var i=e.index,a=e.id,o=e.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=r.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(xi(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(xi(n.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=r.queryComponents({mainType:t,index:i,id:a,name:o}),s)}function AH(r,t,e){r.setAttribute?r.setAttribute(t,e):r[t]=e}function QSt(r,t){return r.getAttribute?r.getAttribute(t):r[t]}function twt(r){return r==="auto"?le.domSupported?"html":"richText":r||"html"}function WA(r,t){var e=wt(),n=[];return I(r,function(i){var a=t(i);(e.get(a)||(n.push(a),e.set(a,[]))).push(i)}),{keys:n,buckets:e}}function IH(r,t,e,n,i){var a=t==null||t==="auto";if(n==null)return n;if(be(n)){var o=O3(e||0,n,i);return Cr(o,a?Math.max(Jo(e||0),Jo(n)):t)}else{if(yt(n))return i<1?e:n;for(var s=[],l=e,u=n,h=Math.max(l?l.length:0,u.length),c=0;c<h;++c){var f=r.getDimensionInfo(c);if(f&&f.type==="ordinal")s[c]=(i<1&&l?l:u)[c];else{var d=l&&l[c]?l[c]:0,g=u[c],o=O3(d,g,i);s[c]=Cr(o,a?Math.max(Jo(d),Jo(g)):t)}}return s}}var ewt=".",vh="___EC__COMPONENT__CONTAINER___",RH="___EC__EXTENDED_CLASS___";function Qo(r){var t={main:"",sub:""};if(r){var e=r.split(ewt);t.main=e[0]||"",t.sub=e[1]||""}return t}function rwt(r){xi(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal')}function nwt(r){return!!(r&&r[RH])}function qP(r,t){r.$constructor=r,r.extend=function(e){var n=this,i;return iwt(n)?i=function(a){U(o,a);function o(){return a.apply(this,arguments)||this}return o}(n):(i=function(){(e.$constructor||n).apply(this,arguments)},fxt(i,this)),tt(i.prototype,e),i[RH]=!0,i.extend=this.extend,i.superCall=swt,i.superApply=lwt,i.superClass=n,i}}function iwt(r){return At(r)&&/^class\s/.test(Function.prototype.toString.call(r))}function PH(r,t){r.extend=t.extend}var awt=Math.round(Math.random()*10);function owt(r){var t=["__\0is_clz",awt++].join("_");r.prototype[t]=!0,r.isInstance=function(e){return!!(e&&e[t])}}function swt(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return this.superClass.prototype[t].apply(r,e)}function lwt(r,t,e){return this.superClass.prototype[t].apply(r,e)}function Nw(r){var t={};r.registerClass=function(n){var i=n.type||n.prototype.type;if(i){rwt(i),n.prototype.type=i;var a=Qo(i);if(!a.sub)t[a.main]=n;else if(a.sub!==vh){var o=e(a);o[a.sub]=n}}return n},r.getClass=function(n,i,a){var o=t[n];if(o&&o[vh]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return o},r.getClassesByMainType=function(n){var i=Qo(n),a=[],o=t[i.main];return o&&o[vh]?I(o,function(s,l){l!==vh&&a.push(s)}):a.push(o),a},r.hasClass=function(n){var i=Qo(n);return!!t[i.main]},r.getAllClassMainTypes=function(){var n=[];return I(t,function(i,a){n.push(a)}),n},r.hasSubTypes=function(n){var i=Qo(n),a=t[i.main];return a&&a[vh]};function e(n){var i=t[n.main];return(!i||!i[vh])&&(i=t[n.main]={},i[vh]=!0),i}}function Uc(r,t){for(var e=0;e<r.length;e++)r[e][1]||(r[e][1]=r[e][0]);return t=t||!1,function(n,i,a){for(var o={},s=0;s<r.length;s++){var l=r[s][1];if(!(i&&te(i,l)>=0||a&&te(a,l)<0)){var u=n.getShallow(l,t);u!=null&&(o[r[s][0]]=u)}}return o}}var uwt=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],hwt=Uc(uwt),cwt=function(){function r(){}return r.prototype.getAreaStyle=function(t,e){return hwt(this,t,e)},r}(),HA=new Hy(50);function fwt(r){if(typeof r=="string"){var t=HA.get(r);return t&&t.image}else return r}function JP(r,t,e,n,i){if(r)if(typeof r=="string"){if(t&&t.__zrImageSrc===r||!e)return t;var a=HA.get(r),o={hostEl:e,cb:n,cbPayload:i};return a?(t=a.image,!Fw(t)&&a.pending.push(o)):(t=Gu.loadImage(r,F3,F3),t.__zrImageSrc=r,HA.put(r,t.__cachedImgObj={image:t,pending:[o]})),t}else return r;else return t}function F3(){var r=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<r.pending.length;t++){var e=r.pending[t],n=e.cb;n&&n(this,e.cbPayload),e.hostEl.dirty()}r.pending.length=0}function Fw(r){return r&&r.width&&r.height}var iE=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function dwt(r,t,e,n,i){if(!t)return"";var a=(r+"").split(`
`);i=LH(t,e,n,i);for(var o=0,s=a.length;o<s;o++)a[o]=DH(a[o],i);return a.join(`
`)}function LH(r,t,e,n){n=n||{};var i=tt({},n);i.font=t,e=Vt(e,"..."),i.maxIterations=Vt(n.maxIterations,2);var a=i.minChar=Vt(n.minChar,0);i.cnCharWidth=la("",t);var o=i.ascCharWidth=la("a",t);i.placeholder=Vt(n.placeholder,"");for(var s=r=Math.max(0,r-1),l=0;l<a&&s>=o;l++)s-=o;var u=la(e,t);return u>s&&(e="",u=0),s=r-u,i.ellipsis=e,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=r,i}function DH(r,t){var e=t.containerWidth,n=t.font,i=t.contentWidth;if(!e)return"";var a=la(r,n);if(a<=e)return r;for(var o=0;;o++){if(a<=i||o>=t.maxIterations){r+=t.ellipsis;break}var s=o===0?gwt(r,i,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(r.length*i/a):0;r=r.substr(0,s),a=la(r,n)}return r===""&&(r=t.placeholder),r}function gwt(r,t,e,n){for(var i=0,a=0,o=r.length;a<o&&i<t;a++){var s=r.charCodeAt(a);i+=0<=s&&s<=127?e:n}return a}function pwt(r,t){r!=null&&(r+="");var e=t.overflow,n=t.padding,i=t.font,a=e==="truncate",o=Dw(i),s=Vt(t.lineHeight,o),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",h=t.width,c;h!=null&&(e==="break"||e==="breakAll")?c=r?OH(r,t.font,h,e==="breakAll",0).lines:[]:c=r?r.split(`
`):[];var f=c.length*s,d=Vt(t.height,f);if(f>d&&u){var g=Math.floor(d/s);c=c.slice(0,g)}if(r&&a&&h!=null)for(var p=LH(h,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),v=0;v<c.length;v++)c[v]=DH(c[v],p);for(var m=d,y=0,v=0;v<c.length;v++)y=Math.max(la(c[v],i),y);h==null&&(h=y);var _=y;return n&&(m+=n[0]+n[2],_+=n[1]+n[3],h+=n[1]+n[3]),l&&(_=h),{lines:c,height:d,outerWidth:_,outerHeight:m,lineHeight:s,calculatedLineHeight:o,contentWidth:y,contentHeight:f,width:h}}var vwt=function(){function r(){}return r}(),k3=function(){function r(t){this.tokens=[],t&&(this.tokens=t)}return r}(),mwt=function(){function r(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return r}();function ywt(r,t){var e=new mwt;if(r!=null&&(r+=""),!r)return e;for(var n=t.width,i=t.height,a=t.overflow,o=(a==="break"||a==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:a==="breakAll"}:null,s=iE.lastIndex=0,l;(l=iE.exec(r))!=null;){var u=l.index;u>s&&aE(e,r.substring(s,u),t,o),aE(e,l[2],t,o,l[1]),s=iE.lastIndex}s<r.length&&aE(e,r.substring(s,r.length),t,o);var h=[],c=0,f=0,d=t.padding,g=a==="truncate",p=t.lineOverflow==="truncate";function v(F,B,V){F.width=B,F.lineHeight=V,c+=V,f=Math.max(f,B)}t:for(var m=0;m<e.lines.length;m++){for(var y=e.lines[m],_=0,x=0,w=0;w<y.tokens.length;w++){var S=y.tokens[w],T=S.styleName&&t.rich[S.styleName]||{},b=S.textPadding=T.padding,E=b?b[1]+b[3]:0,C=S.font=T.font||t.font;S.contentHeight=Dw(C);var M=Vt(T.height,S.contentHeight);if(S.innerHeight=M,b&&(M+=b[0]+b[2]),S.height=M,S.lineHeight=os(T.lineHeight,t.lineHeight,M),S.align=T&&T.align||t.align,S.verticalAlign=T&&T.verticalAlign||"middle",p&&i!=null&&c+S.lineHeight>i){w>0?(y.tokens=y.tokens.slice(0,w),v(y,x,_),e.lines=e.lines.slice(0,m+1)):e.lines=e.lines.slice(0,m);break t}var A=T.width,R=A==null||A==="auto";if(typeof A=="string"&&A.charAt(A.length-1)==="%")S.percentWidth=A,h.push(S),S.contentWidth=la(S.text,C);else{if(R){var P=T.backgroundColor,L=P&&P.image;L&&(L=fwt(L),Fw(L)&&(S.width=Math.max(S.width,L.width*M/L.height)))}var D=g&&n!=null?n-x:null;D!=null&&D<S.width?!R||D<E?(S.text="",S.width=S.contentWidth=0):(S.text=dwt(S.text,D-E,C,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=la(S.text,C)):S.contentWidth=la(S.text,C)}S.width+=E,x+=S.width,T&&(_=Math.max(_,S.lineHeight))}v(y,x,_)}e.outerWidth=e.width=Vt(n,f),e.outerHeight=e.height=Vt(i,c),e.contentHeight=c,e.contentWidth=f,d&&(e.outerWidth+=d[1]+d[3],e.outerHeight+=d[0]+d[2]);for(var m=0;m<h.length;m++){var S=h[m],k=S.percentWidth;S.width=parseInt(k,10)/100*e.width}return e}function aE(r,t,e,n,i){var a=t==="",o=i&&e.rich[i]||{},s=r.lines,l=o.font||e.font,u=!1,h,c;if(n){var f=o.padding,d=f?f[1]+f[3]:0;if(o.width!=null&&o.width!=="auto"){var g=_o(o.width,n.width)+d;s.length>0&&g+n.accumWidth>n.width&&(h=t.split(`
`),u=!0),n.accumWidth=g}else{var p=OH(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=p.accumWidth+d,c=p.linesWidths,h=p.lines}}else h=t.split(`
`);for(var v=0;v<h.length;v++){var m=h[v],y=new vwt;if(y.styleName=i,y.text=m,y.isLineHolder=!m&&!a,typeof o.width=="number"?y.width=o.width:y.width=c?c[v]:la(m,l),!v&&!u){var _=(s[s.length-1]||(s[0]=new k3)).tokens,x=_.length;x===1&&_[0].isLineHolder?_[0]=y:(m||!x||a)&&_.push(y)}else s.push(new k3([y]))}}function _wt(r){var t=r.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var xwt=cs(",&?/;] ".split(""),function(r,t){return r[t]=!0,r},{});function Swt(r){return _wt(r)?!!xwt[r]:!0}function OH(r,t,e,n,i){for(var a=[],o=[],s="",l="",u=0,h=0,c=0;c<r.length;c++){var f=r.charAt(c);if(f===`
`){l&&(s+=l,h+=u),a.push(s),o.push(h),s="",l="",u=0,h=0;continue}var d=la(f,t),g=n?!1:!Swt(f);if(a.length?h+d>e:i+h+d>e){h?(s||l)&&(g?(s||(s=l,l="",u=0,h=u),a.push(s),o.push(h-u),l+=f,u+=d,s="",h=u):(l&&(s+=l,l="",u=0),a.push(s),o.push(h),s=f,h=d)):g?(a.push(l),o.push(u),l=f,u=d):(a.push(f),o.push(d));continue}h+=d,g?(l+=f,u+=d):(l&&(s+=l,l="",u=0),s+=f)}return!a.length&&!s&&(s=r,l="",u=0),l&&(s+=l),s&&(a.push(s),o.push(h)),a.length===1&&(h+=i),{accumWidth:h,lines:a,linesWidths:o}}var $A="__zr_style_"+Math.round(Math.random()*10),bc={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},kw={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};bc[$A]=!0;var G3=["z","z2","invisible"],wwt=["invisible"],$a=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype._init=function(e){for(var n=he(e),i=0;i<n.length;i++){var a=n[i];a==="style"?this.useStyle(e[a]):r.prototype.attrKV.call(this,a,e[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,n,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Twt(this,e,n)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(e,n){return this.rectContain(e,n)},t.prototype.traverse=function(e,n){e.call(n,this)},t.prototype.rectContain=function(e,n){var i=this.transformCoordToLocal(e,n),a=this.getBoundingRect();return a.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new jt(0,0,0,0)),n?jt.applyTransform(e,i,n):e.copy(i),(o||s||l)&&(e.width+=o*2+Math.abs(s),e.height+=o*2+Math.abs(l),e.x=Math.min(e.x,e.x+s-o),e.y=Math.min(e.y,e.y+l-o));var u=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-u),e.y=Math.floor(e.y-u),e.width=Math.ceil(e.width+1+u*2),e.height=Math.ceil(e.height+1+u*2))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new jt(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(e,n){e!=="style"?r.prototype.attrKV.call(this,e,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(e,n){return typeof e=="string"?this.style[e]=n:tt(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(e){e||this.markRedraw(),this.__dirty|=dv,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&dv)},t.prototype.styleUpdated=function(){this.__dirty&=~dv},t.prototype.createStyle=function(e){return Rw(bc,e)},t.prototype.useStyle=function(e){e[$A]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[$A]},t.prototype._innerSaveToNormal=function(e){r.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,n,G3)},t.prototype._applyStateObj=function(e,n,i,a,o,s){r.prototype._applyStateObj.call(this,e,n,i,a,o,s);var l=!(n&&a),u;if(n&&n.style?o?a?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(o){var h=this.style;if(this.style=this.createStyle(l?{}:h),l)for(var c=he(h),f=0;f<c.length;f++){var d=c[f];d in u&&(u[d]=u[d],this.style[d]=h[d])}for(var g=he(u),f=0;f<g.length;f++){var d=g[f];this.style[d]=this.style[d]}this._transitionState(e,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var p=this.__inHover?wwt:G3,f=0;f<p.length;f++){var d=p[f];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(e){for(var n=r.prototype._mergeStates.call(this,e),i,a=0;a<e.length;a++){var o=e[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(e,n){return tt(e,n),e},t.prototype.getAnimationStyleProps=function(){return kw},t.initDefaultProps=function(){var e=t.prototype;e.type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,e.__dirty=ta|dv}(),t}(Ow),oE=new jt(0,0,0,0),sE=new jt(0,0,0,0);function Twt(r,t,e){return oE.copy(r.getBoundingRect()),r.transform&&oE.applyTransform(r.transform),sE.width=t,sE.height=e,!oE.intersect(sE)}var Oi=Math.min,Ni=Math.max,lE=Math.sin,uE=Math.cos,mh=Math.PI*2,h_=ef(),c_=ef(),f_=ef();function Gw(r,t,e){if(r.length!==0){for(var n=r[0],i=n[0],a=n[0],o=n[1],s=n[1],l=1;l<r.length;l++)n=r[l],i=Oi(i,n[0]),a=Ni(a,n[0]),o=Oi(o,n[1]),s=Ni(s,n[1]);t[0]=i,t[1]=o,e[0]=a,e[1]=s}}function B3(r,t,e,n,i,a){i[0]=Oi(r,e),i[1]=Oi(t,n),a[0]=Ni(r,e),a[1]=Ni(t,n)}var z3=[],V3=[];function bwt(r,t,e,n,i,a,o,s,l,u){var h=Q9,c=nn,f=h(r,e,i,o,z3);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<f;d++){var g=c(r,e,i,o,z3[d]);l[0]=Oi(g,l[0]),u[0]=Ni(g,u[0])}f=h(t,n,a,s,V3);for(var d=0;d<f;d++){var p=c(t,n,a,s,V3[d]);l[1]=Oi(p,l[1]),u[1]=Ni(p,u[1])}l[0]=Oi(r,l[0]),u[0]=Ni(r,u[0]),l[0]=Oi(o,l[0]),u[0]=Ni(o,u[0]),l[1]=Oi(t,l[1]),u[1]=Ni(t,u[1]),l[1]=Oi(s,l[1]),u[1]=Ni(s,u[1])}function Ewt(r,t,e,n,i,a,o,s){var l=eH,u=vn,h=Ni(Oi(l(r,e,i),1),0),c=Ni(Oi(l(t,n,a),1),0),f=u(r,e,i,h),d=u(t,n,a,c);o[0]=Oi(r,i,f),o[1]=Oi(t,a,d),s[0]=Ni(r,i,f),s[1]=Ni(t,a,d)}function Cwt(r,t,e,n,i,a,o,s,l){var u=su,h=lu,c=Math.abs(i-a);if(c%mh<1e-4&&c>1e-4){s[0]=r-e,s[1]=t-n,l[0]=r+e,l[1]=t+n;return}if(h_[0]=uE(i)*e+r,h_[1]=lE(i)*n+t,c_[0]=uE(a)*e+r,c_[1]=lE(a)*n+t,u(s,h_,c_),h(l,h_,c_),i=i%mh,i<0&&(i=i+mh),a=a%mh,a<0&&(a=a+mh),i>a&&!o?a+=mh:i<a&&o&&(i+=mh),o){var f=a;a=i,i=f}for(var d=0;d<a;d+=Math.PI/2)d>i&&(f_[0]=uE(d)*e+r,f_[1]=lE(d)*n+t,u(s,f_,s),h(l,f_,l))}var qe={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},yh=[],_h=[],Lo=[],Ll=[],Do=[],Oo=[],hE=Math.min,cE=Math.max,xh=Math.cos,Sh=Math.sin,As=Math.abs,YA=Math.PI,Wl=YA*2,fE=typeof Float32Array<"u",Pp=[];function dE(r){var t=Math.round(r/YA*1e8)/1e8;return t%2*YA}function QP(r,t){var e=dE(r[0]);e<0&&(e+=Wl);var n=e-r[0],i=r[1];i+=n,!t&&i-e>=Wl?i=e+Wl:t&&e-i>=Wl?i=e-Wl:!t&&e>i?i=e+(Wl-dE(e-i)):t&&e<i&&(i=e-(Wl-dE(i-e))),r[0]=e,r[1]=i}var ps=function(){function r(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return r.prototype.increaseVersion=function(){this._version++},r.prototype.getVersion=function(){return this._version},r.prototype.setScale=function(t,e,n){n=n||0,n>0&&(this._ux=As(n/Hx/t)||0,this._uy=As(n/Hx/e)||0)},r.prototype.setDPR=function(t){this.dpr=t},r.prototype.setContext=function(t){this._ctx=t},r.prototype.getContext=function(){return this._ctx},r.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},r.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},r.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(qe.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},r.prototype.lineTo=function(t,e){var n=As(t-this._xi),i=As(e-this._yi),a=n>this._ux||i>this._uy;if(this.addData(qe.L,t,e),this._ctx&&a&&this._ctx.lineTo(t,e),a)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var o=n*n+i*i;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=o)}return this},r.prototype.bezierCurveTo=function(t,e,n,i,a,o){return this._drawPendingPt(),this.addData(qe.C,t,e,n,i,a,o),this._ctx&&this._ctx.bezierCurveTo(t,e,n,i,a,o),this._xi=a,this._yi=o,this},r.prototype.quadraticCurveTo=function(t,e,n,i){return this._drawPendingPt(),this.addData(qe.Q,t,e,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,e,n,i),this._xi=n,this._yi=i,this},r.prototype.arc=function(t,e,n,i,a,o){this._drawPendingPt(),Pp[0]=i,Pp[1]=a,QP(Pp,o),i=Pp[0],a=Pp[1];var s=a-i;return this.addData(qe.A,t,e,n,n,i,s,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,i,a,o),this._xi=xh(a)*n+t,this._yi=Sh(a)*n+e,this},r.prototype.arcTo=function(t,e,n,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,n,i,a),this},r.prototype.rect=function(t,e,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,n,i),this.addData(qe.R,t,e,n,i),this},r.prototype.closePath=function(){this._drawPendingPt(),this.addData(qe.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&t.closePath(),this._xi=e,this._yi=n,this},r.prototype.fill=function(t){t&&t.fill(),this.toStatic()},r.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},r.prototype.len=function(){return this._len},r.prototype.setData=function(t){var e=t.length;!(this.data&&this.data.length===e)&&fE&&(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},r.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,a=0;a<e;a++)n+=t[a].len();fE&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var a=0;a<e;a++)for(var o=t[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},r.prototype.addData=function(t,e,n,i,a,o,s,l,u){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var c=0;c<arguments.length;c++)h[this._len++]=arguments[c]}},r.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},r.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},r.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,fE&&this._len>11&&(this.data=new Float32Array(t)))}},r.prototype.getBoundingRect=function(){Lo[0]=Lo[1]=Do[0]=Do[1]=Number.MAX_VALUE,Ll[0]=Ll[1]=Oo[0]=Oo[1]=-Number.MAX_VALUE;var t=this.data,e=0,n=0,i=0,a=0,o;for(o=0;o<this._len;){var s=t[o++],l=o===1;switch(l&&(e=t[o],n=t[o+1],i=e,a=n),s){case qe.M:e=i=t[o++],n=a=t[o++],Do[0]=i,Do[1]=a,Oo[0]=i,Oo[1]=a;break;case qe.L:B3(e,n,t[o],t[o+1],Do,Oo),e=t[o++],n=t[o++];break;case qe.C:bwt(e,n,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],Do,Oo),e=t[o++],n=t[o++];break;case qe.Q:Ewt(e,n,t[o++],t[o++],t[o],t[o+1],Do,Oo),e=t[o++],n=t[o++];break;case qe.A:var u=t[o++],h=t[o++],c=t[o++],f=t[o++],d=t[o++],g=t[o++]+d;o+=1;var p=!t[o++];l&&(i=xh(d)*c+u,a=Sh(d)*f+h),Cwt(u,h,c,f,d,g,p,Do,Oo),e=xh(g)*c+u,n=Sh(g)*f+h;break;case qe.R:i=e=t[o++],a=n=t[o++];var v=t[o++],m=t[o++];B3(i,a,i+v,a+m,Do,Oo);break;case qe.Z:e=i,n=a;break}su(Lo,Lo,Do),lu(Ll,Ll,Oo)}return o===0&&(Lo[0]=Lo[1]=Ll[0]=Ll[1]=0),new jt(Lo[0],Lo[1],Ll[0]-Lo[0],Ll[1]-Lo[1])},r.prototype._calculateLength=function(){var t=this.data,e=this._len,n=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,h=0,c=0,f=0;f<e;){var d=t[f++],g=f===1;g&&(a=t[f],o=t[f+1],s=a,l=o);var p=-1;switch(d){case qe.M:a=s=t[f++],o=l=t[f++];break;case qe.L:{var v=t[f++],m=t[f++],y=v-a,_=m-o;(As(y)>n||As(_)>i||f===e-1)&&(p=Math.sqrt(y*y+_*_),a=v,o=m);break}case qe.C:{var x=t[f++],w=t[f++],v=t[f++],m=t[f++],S=t[f++],T=t[f++];p=Yxt(a,o,x,w,v,m,S,T,10),a=S,o=T;break}case qe.Q:{var x=t[f++],w=t[f++],v=t[f++],m=t[f++];p=Zxt(a,o,x,w,v,m,10),a=v,o=m;break}case qe.A:var b=t[f++],E=t[f++],C=t[f++],M=t[f++],A=t[f++],R=t[f++],P=R+A;f+=1,g&&(s=xh(A)*C+b,l=Sh(A)*M+E),p=cE(C,M)*hE(Wl,Math.abs(R)),a=xh(P)*C+b,o=Sh(P)*M+E;break;case qe.R:{s=a=t[f++],l=o=t[f++];var L=t[f++],D=t[f++];p=L*2+D*2;break}case qe.Z:{var y=s-a,_=l-o;p=Math.sqrt(y*y+_*_),a=s,o=l;break}}p>=0&&(u[c++]=p,h+=p)}return this._pathLen=h,h},r.prototype.rebuildPath=function(t,e){var n=this.data,i=this._ux,a=this._uy,o=this._len,s,l,u,h,c,f,d=e<1,g,p,v=0,m=0,y,_=0,x,w;if(!(d&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,p=this._pathLen,y=e*p,!y)))t:for(var S=0;S<o;){var T=n[S++],b=S===1;switch(b&&(u=n[S],h=n[S+1],s=u,l=h),T!==qe.L&&_>0&&(t.lineTo(x,w),_=0),T){case qe.M:s=u=n[S++],l=h=n[S++],t.moveTo(u,h);break;case qe.L:{c=n[S++],f=n[S++];var E=As(c-u),C=As(f-h);if(E>i||C>a){if(d){var M=g[m++];if(v+M>y){var A=(y-v)/M;t.lineTo(u*(1-A)+c*A,h*(1-A)+f*A);break t}v+=M}t.lineTo(c,f),u=c,h=f,_=0}else{var R=E*E+C*C;R>_&&(x=c,w=f,_=R)}break}case qe.C:{var P=n[S++],L=n[S++],D=n[S++],k=n[S++],F=n[S++],B=n[S++];if(d){var M=g[m++];if(v+M>y){var A=(y-v)/M;Bu(u,P,D,F,A,yh),Bu(h,L,k,B,A,_h),t.bezierCurveTo(yh[1],_h[1],yh[2],_h[2],yh[3],_h[3]);break t}v+=M}t.bezierCurveTo(P,L,D,k,F,B),u=F,h=B;break}case qe.Q:{var P=n[S++],L=n[S++],D=n[S++],k=n[S++];if(d){var M=g[m++];if(v+M>y){var A=(y-v)/M;Hm(u,P,D,A,yh),Hm(h,L,k,A,_h),t.quadraticCurveTo(yh[1],_h[1],yh[2],_h[2]);break t}v+=M}t.quadraticCurveTo(P,L,D,k),u=D,h=k;break}case qe.A:var V=n[S++],Y=n[S++],q=n[S++],lt=n[S++],X=n[S++],St=n[S++],mt=n[S++],$=!n[S++],K=q>lt?q:lt,et=As(q-lt)>.001,W=X+St,Z=!1;if(d){var M=g[m++];v+M>y&&(W=X+St*(y-v)/M,Z=!0),v+=M}if(et&&t.ellipse?t.ellipse(V,Y,q,lt,mt,X,W,$):t.arc(V,Y,K,X,W,$),Z)break t;b&&(s=xh(X)*q+V,l=Sh(X)*lt+Y),u=xh(W)*q+V,h=Sh(W)*lt+Y;break;case qe.R:s=u=n[S],l=h=n[S+1],c=n[S++],f=n[S++];var at=n[S++],O=n[S++];if(d){var M=g[m++];if(v+M>y){var N=y-v;t.moveTo(c,f),t.lineTo(c+hE(N,at),f),N-=at,N>0&&t.lineTo(c+at,f+hE(N,O)),N-=O,N>0&&t.lineTo(c+cE(at-N,0),f+O),N-=at,N>0&&t.lineTo(c,f+cE(O-N,0));break t}v+=M}t.rect(c,f,at,O);break;case qe.Z:if(d){var M=g[m++];if(v+M>y){var A=(y-v)/M;t.lineTo(u*(1-A)+s*A,h*(1-A)+l*A);break t}v+=M}t.closePath(),u=s,h=l}}},r.prototype.clone=function(){var t=new r,e=this.data;return t.data=e.slice?e.slice():Array.prototype.slice.call(e),t._len=this._len,t},r.CMD=qe,r.initDefaultProps=function(){var t=r.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),r}();function Jl(r,t,e,n,i,a,o){if(i===0)return!1;var s=i,l=0,u=r;if(o>t+s&&o>n+s||o<t-s&&o<n-s||a>r+s&&a>e+s||a<r-s&&a<e-s)return!1;if(r!==e)l=(t-n)/(r-e),u=(r*n-e*t)/(r-e);else return Math.abs(a-r)<=s/2;var h=l*a-o+u,c=h*h/(l*l+1);return c<=s/2*s/2}function Mwt(r,t,e,n,i,a,o,s,l,u,h){if(l===0)return!1;var c=l;if(h>t+c&&h>n+c&&h>a+c&&h>s+c||h<t-c&&h<n-c&&h<a-c&&h<s-c||u>r+c&&u>e+c&&u>i+c&&u>o+c||u<r-c&&u<e-c&&u<i-c&&u<o-c)return!1;var f=tH(r,t,e,n,i,a,o,s,u,h,null);return f<=c/2}function NH(r,t,e,n,i,a,o,s,l){if(o===0)return!1;var u=o;if(l>t+u&&l>n+u&&l>a+u||l<t-u&&l<n-u&&l<a-u||s>r+u&&s>e+u&&s>i+u||s<r-u&&s<e-u&&s<i-u)return!1;var h=rH(r,t,e,n,i,a,s,l,null);return h<=u/2}var U3=Math.PI*2;function aa(r){return r%=U3,r<0&&(r+=U3),r}var Lp=Math.PI*2;function Awt(r,t,e,n,i,a,o,s,l){if(o===0)return!1;var u=o;s-=r,l-=t;var h=Math.sqrt(s*s+l*l);if(h-u>e||h+u<e)return!1;if(Math.abs(n-i)%Lp<1e-4)return!0;if(a){var c=n;n=aa(i),i=aa(c)}else n=aa(n),i=aa(i);n>i&&(i+=Lp);var f=Math.atan2(l,s);return f<0&&(f+=Lp),f>=n&&f<=i||f+Lp>=n&&f+Lp<=i}function Fs(r,t,e,n,i,a){if(a>t&&a>n||a<t&&a<n||n===t)return 0;var o=(a-t)/(n-t),s=n<t?1:-1;(o===1||o===0)&&(s=n<t?.5:-.5);var l=o*(e-r)+r;return l===i?1/0:l>i?s:0}var Dl=ps.CMD,wh=Math.PI*2,Iwt=1e-4;function Rwt(r,t){return Math.abs(r-t)<Iwt}var hi=[-1,-1,-1],Ma=[-1,-1];function Pwt(){var r=Ma[0];Ma[0]=Ma[1],Ma[1]=r}function Lwt(r,t,e,n,i,a,o,s,l,u){if(u>t&&u>n&&u>a&&u>s||u<t&&u<n&&u<a&&u<s)return 0;var h=zx(t,n,a,s,u,hi);if(h===0)return 0;for(var c=0,f=-1,d=void 0,g=void 0,p=0;p<h;p++){var v=hi[p],m=v===0||v===1?.5:1,y=nn(r,e,i,o,v);y<l||(f<0&&(f=Q9(t,n,a,s,Ma),Ma[1]<Ma[0]&&f>1&&Pwt(),d=nn(t,n,a,s,Ma[0]),f>1&&(g=nn(t,n,a,s,Ma[1]))),f===2?v<Ma[0]?c+=d<t?m:-m:v<Ma[1]?c+=g<d?m:-m:c+=s<g?m:-m:v<Ma[0]?c+=d<t?m:-m:c+=s<d?m:-m)}return c}function Dwt(r,t,e,n,i,a,o,s){if(s>t&&s>n&&s>a||s<t&&s<n&&s<a)return 0;var l=Xxt(t,n,a,s,hi);if(l===0)return 0;var u=eH(t,n,a);if(u>=0&&u<=1){for(var h=0,c=vn(t,n,a,u),f=0;f<l;f++){var d=hi[f]===0||hi[f]===1?.5:1,g=vn(r,e,i,hi[f]);g<o||(hi[f]<u?h+=c<t?d:-d:h+=a<c?d:-d)}return h}else{var d=hi[0]===0||hi[0]===1?.5:1,g=vn(r,e,i,hi[0]);return g<o?0:a<t?d:-d}}function Owt(r,t,e,n,i,a,o,s){if(s-=t,s>e||s<-e)return 0;var l=Math.sqrt(e*e-s*s);hi[0]=-l,hi[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=wh-1e-4){n=0,i=wh;var h=a?1:-1;return o>=hi[0]+r&&o<=hi[1]+r?h:0}if(n>i){var c=n;n=i,i=c}n<0&&(n+=wh,i+=wh);for(var f=0,d=0;d<2;d++){var g=hi[d];if(g+r>o){var p=Math.atan2(s,g),h=a?1:-1;p<0&&(p=wh+p),(p>=n&&p<=i||p+wh>=n&&p+wh<=i)&&(p>Math.PI/2&&p<Math.PI*1.5&&(h=-h),f+=h)}}return f}function FH(r,t,e,n,i){for(var a=r.data,o=r.len(),s=0,l=0,u=0,h=0,c=0,f,d,g=0;g<o;){var p=a[g++],v=g===1;switch(p===Dl.M&&g>1&&(e||(s+=Fs(l,u,h,c,n,i))),v&&(l=a[g],u=a[g+1],h=l,c=u),p){case Dl.M:h=a[g++],c=a[g++],l=h,u=c;break;case Dl.L:if(e){if(Jl(l,u,a[g],a[g+1],t,n,i))return!0}else s+=Fs(l,u,a[g],a[g+1],n,i)||0;l=a[g++],u=a[g++];break;case Dl.C:if(e){if(Mwt(l,u,a[g++],a[g++],a[g++],a[g++],a[g],a[g+1],t,n,i))return!0}else s+=Lwt(l,u,a[g++],a[g++],a[g++],a[g++],a[g],a[g+1],n,i)||0;l=a[g++],u=a[g++];break;case Dl.Q:if(e){if(NH(l,u,a[g++],a[g++],a[g],a[g+1],t,n,i))return!0}else s+=Dwt(l,u,a[g++],a[g++],a[g],a[g+1],n,i)||0;l=a[g++],u=a[g++];break;case Dl.A:var m=a[g++],y=a[g++],_=a[g++],x=a[g++],w=a[g++],S=a[g++];g+=1;var T=!!(1-a[g++]);f=Math.cos(w)*_+m,d=Math.sin(w)*x+y,v?(h=f,c=d):s+=Fs(l,u,f,d,n,i);var b=(n-m)*x/_+m;if(e){if(Awt(m,y,x,w,w+S,T,t,b,i))return!0}else s+=Owt(m,y,x,w,w+S,T,b,i);l=Math.cos(w+S)*_+m,u=Math.sin(w+S)*x+y;break;case Dl.R:h=l=a[g++],c=u=a[g++];var E=a[g++],C=a[g++];if(f=h+E,d=c+C,e){if(Jl(h,c,f,c,t,n,i)||Jl(f,c,f,d,t,n,i)||Jl(f,d,h,d,t,n,i)||Jl(h,d,h,c,t,n,i))return!0}else s+=Fs(f,c,f,d,n,i),s+=Fs(h,d,h,c,n,i);break;case Dl.Z:if(e){if(Jl(l,u,h,c,t,n,i))return!0}else s+=Fs(l,u,h,c,n,i);l=h,u=c;break}}return!e&&!Rwt(u,c)&&(s+=Fs(l,u,h,c,n,i)||0),s!==0}function Nwt(r,t,e){return FH(r,0,!1,t,e)}function Fwt(r,t,e,n){return FH(r,t,!0,e,n)}var Yx=It({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},bc),kwt={style:It({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},kw.style)},gE=ds.concat(["invisible","culling","z","z2","zlevel","parent"]),ae=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.update=function(){var e=this;r.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){e.buildPath(l,e.shape)}),i.silent=!0;var a=i.style;for(var o in n)a[o]!==n[o]&&(a[o]=n[o]);a.fill=n.fill?n.decal:null,a.decal=null,a.shadowColor=null,n.strokeFirst&&(a.stroke=null);for(var s=0;s<gE.length;++s)i[gE[s]]=this[gE[s]];i.__dirty|=ta}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(e){var n=he(e);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<n.length;a++){var o=n[a],s=e[o];o==="style"?this.style?tt(this.style,s):this.useStyle(s):o==="shape"?tt(this.shape,s):r.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if(e!=="none"){if(yt(e)){var n=Ux(e,0);return n>.5?zA:n>.2?SSt:VA}else if(e)return VA}return zA},t.prototype.getInsideTextStroke=function(e){var n=this.style.fill;if(yt(n)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=Ux(e,0)<BA;if(a===o)return n}},t.prototype.buildPath=function(e,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~nd},t.prototype.getUpdatedPathProxy=function(e){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},t.prototype.createPathProxy=function(){this.path=new ps(!1)},t.prototype.hasStroke=function(){var e=this.style,n=e.stroke;return!(n==null||n==="none"||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style,n=e.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var e=this._rect,n=this.style,i=!e;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&nd)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),e=o.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||i){s.copy(e);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var h=this.strokeContainThreshold;u=Math.max(u,h??4)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return e},t.prototype.contain=function(e,n){var i=this.transformCoordToLocal(e,n),a=this.getBoundingRect(),o=this.style;if(e=i[0],n=i[1],a.contain(e,n)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),Fwt(s,l/u,e,n)))return!0}if(this.hasFill())return Nwt(s,e,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=nd,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():e==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(e,n){e==="shape"?this.setShape(n):r.prototype.attrKV.call(this,e,n)},t.prototype.setShape=function(e,n){var i=this.shape;return i||(i=this.shape={}),typeof e=="string"?i[e]=n:tt(i,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&nd)},t.prototype.createStyle=function(e){return Rw(Yx,e)},t.prototype._innerSaveToNormal=function(e){r.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.shape&&!n.shape&&(n.shape=tt({},this.shape))},t.prototype._applyStateObj=function(e,n,i,a,o,s){r.prototype._applyStateObj.call(this,e,n,i,a,o,s);var l=!(n&&a),u;if(n&&n.shape?o?a?u=n.shape:(u=tt({},i.shape),tt(u,n.shape)):(u=tt({},a?this.shape:i.shape),tt(u,n.shape)):l&&(u=i.shape),u)if(o){this.shape=tt({},this.shape);for(var h={},c=he(u),f=0;f<c.length;f++){var d=c[f];typeof u[d]=="object"?this.shape[d]=u[d]:h[d]=u[d]}this._transitionState(e,{shape:h},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(e){for(var n=r.prototype._mergeStates.call(this,e),i,a=0;a<e.length;a++){var o=e[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return kwt},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var n=function(a){U(o,a);function o(s){var l=a.call(this,s)||this;return e.init&&e.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return Pt(e.style)},o.prototype.getDefaultShape=function(){return Pt(e.shape)},o}(t);for(var i in e)typeof e[i]=="function"&&(n.prototype[i]=e[i]);return n},t.initDefaultProps=function(){var e=t.prototype;e.type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,e.__dirty=ta|dv|nd}(),t}($a),Gwt=It({strokeFirst:!0,font:ku,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Yx),pg=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var e=this.style,n=e.stroke;return n!=null&&n!=="none"&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style,n=e.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(e){return Rw(Gwt,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var n=e.text;n!=null?n+="":n="";var i=$y(n,e.font,e.textAlign,e.textBaseline);if(i.x+=e.x||0,i.y+=e.y||0,this.hasStroke()){var a=e.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},t.initDefaultProps=function(){var e=t.prototype;e.dirtyRectTolerance=10}(),t}($a);pg.prototype.type="tspan";var Bwt=It({x:0,y:0},bc),zwt={style:It({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},kw.style)};function Vwt(r){return!!(r&&typeof r!="string"&&r.width&&r.height)}var bn=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createStyle=function(e){return Rw(Bwt,e)},t.prototype._getSize=function(e){var n=this.style,i=n[e];if(i!=null)return i;var a=Vwt(n.image)?n.image:this.__image;if(!a)return 0;var o=e==="width"?"height":"width",s=n[o];return s==null?a[e]:a[e]/a[o]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return zwt},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new jt(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}($a);bn.prototype.type="image";function Uwt(r,t){var e=t.x,n=t.y,i=t.width,a=t.height,o=t.r,s,l,u,h;i<0&&(e=e+i,i=-i),a<0&&(n=n+a,a=-a),typeof o=="number"?s=l=u=h=o:o instanceof Array?o.length===1?s=l=u=h=o[0]:o.length===2?(s=u=o[0],l=h=o[1]):o.length===3?(s=o[0],l=h=o[1],u=o[2]):(s=o[0],l=o[1],u=o[2],h=o[3]):s=l=u=h=0;var c;s+l>i&&(c=s+l,s*=i/c,l*=i/c),u+h>i&&(c=u+h,u*=i/c,h*=i/c),l+u>a&&(c=l+u,l*=a/c,u*=a/c),s+h>a&&(c=s+h,s*=a/c,h*=a/c),r.moveTo(e+s,n),r.lineTo(e+i-l,n),l!==0&&r.arc(e+i-l,n+l,l,-Math.PI/2,0),r.lineTo(e+i,n+a-u),u!==0&&r.arc(e+i-u,n+a-u,u,0,Math.PI/2),r.lineTo(e+h,n+a),h!==0&&r.arc(e+h,n+a-h,h,Math.PI/2,Math.PI),r.lineTo(e,n+s),s!==0&&r.arc(e+s,n+s,s,Math.PI,Math.PI*1.5)}var Sd=Math.round;function kH(r,t,e){if(t){var n=t.x1,i=t.x2,a=t.y1,o=t.y2;r.x1=n,r.x2=i,r.y1=a,r.y2=o;var s=e&&e.lineWidth;return s&&(Sd(n*2)===Sd(i*2)&&(r.x1=r.x2=hc(n,s,!0)),Sd(a*2)===Sd(o*2)&&(r.y1=r.y2=hc(a,s,!0))),r}}function GH(r,t,e){if(t){var n=t.x,i=t.y,a=t.width,o=t.height;r.x=n,r.y=i,r.width=a,r.height=o;var s=e&&e.lineWidth;return s&&(r.x=hc(n,s,!0),r.y=hc(i,s,!0),r.width=Math.max(hc(n+a,s,!1)-r.x,a===0?0:1),r.height=Math.max(hc(i+o,s,!1)-r.y,o===0?0:1)),r}}function hc(r,t,e){if(!t)return r;var n=Sd(r*2);return(n+Sd(t))%2===0?n/2:(n+(e?1:-1))/2}var Wwt=function(){function r(){this.x=0,this.y=0,this.width=0,this.height=0}return r}(),Hwt={},ve=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new Wwt},t.prototype.buildPath=function(e,n){var i,a,o,s;if(this.subPixelOptimize){var l=GH(Hwt,n,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,a=n.y,o=n.width,s=n.height;n.r?Uwt(e,n):e.rect(i,a,o,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(ae);ve.prototype.type="rect";var W3={fill:"#000"},H3=2,$wt={style:It({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},kw.style)},xe=function(r){U(t,r);function t(e){var n=r.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=W3,n.attr(e),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){r.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var n=this._children[e];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):r.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(e){var n=this.innerTransformable;return n?n.getLocalTransform(e):r.prototype.getLocalTransform.call(this,e)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),r.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,Zwt(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(e){r.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=e},t.prototype.removeSelfFromZr=function(e){r.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new jt(0,0,0,0),n=this._children,i=[],a=null,o=0;o<n.length;o++){var s=n[o],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(e.copy(l),e.applyTransform(u),a=a||e.clone(),a.union(e)):(a=a||l.clone(),a.union(l))}this._rect=a||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||W3},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,n){if(!n)return e;var i=n.rich,a=e.rich||i&&{};return tt(e,n),i&&a?(this._mergeRich(a,i),e.rich=a):a&&(e.rich=a),e},t.prototype._mergeRich=function(e,n){for(var i=he(n),a=0;a<i.length;a++){var o=i[a];e[o]=e[o]||{},tt(e[o],n[o])}},t.prototype.getAnimationStyleProps=function(){return $wt},t.prototype._getOrCreateChild=function(e){var n=this._children[this._childCursor];return(!n||!(n instanceof e))&&(n=new e),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var e=this.style,n=e.font||ku,i=e.padding,a=q3(e),o=pwt(a,e),s=pE(e),l=!!e.backgroundColor,u=o.outerHeight,h=o.outerWidth,c=o.contentWidth,f=o.lines,d=o.lineHeight,g=this._defaultStyle,p=e.x||0,v=e.y||0,m=e.align||g.align||"left",y=e.verticalAlign||g.verticalAlign||"top",_=p,x=id(v,o.contentHeight,y);if(s||i){var w=pv(p,h,m),S=id(v,u,y);s&&this._renderBackground(e,e,w,S,h,u)}x+=d/2,i&&(_=K3(p,m,i),y==="top"?x+=i[0]:y==="bottom"&&(x-=i[2]));for(var T=0,b=!1,E=j3("fill"in e?e.fill:(b=!0,g.fill)),C=Z3("stroke"in e?e.stroke:!l&&(!g.autoStroke||b)?(T=H3,g.stroke):null),M=e.textShadowBlur>0,A=e.width!=null&&(e.overflow==="truncate"||e.overflow==="break"||e.overflow==="breakAll"),R=o.calculatedLineHeight,P=0;P<f.length;P++){var L=this._getOrCreateChild(pg),D=L.createStyle();L.useStyle(D),D.text=f[P],D.x=_,D.y=x,m&&(D.textAlign=m),D.textBaseline="middle",D.opacity=e.opacity,D.strokeFirst=!0,M&&(D.shadowBlur=e.textShadowBlur||0,D.shadowColor=e.textShadowColor||"transparent",D.shadowOffsetX=e.textShadowOffsetX||0,D.shadowOffsetY=e.textShadowOffsetY||0),D.stroke=C,D.fill=E,C&&(D.lineWidth=e.lineWidth||T,D.lineDash=e.lineDash,D.lineDashOffset=e.lineDashOffset||0),D.font=n,Y3(D,e),x+=d,A&&L.setBoundingRect(new jt(pv(D.x,e.width,D.textAlign),id(D.y,R,D.textBaseline),c,R))}},t.prototype._updateRichTexts=function(){var e=this.style,n=q3(e),i=ywt(n,e),a=i.width,o=i.outerWidth,s=i.outerHeight,l=e.padding,u=e.x||0,h=e.y||0,c=this._defaultStyle,f=e.align||c.align,d=e.verticalAlign||c.verticalAlign,g=pv(u,o,f),p=id(h,s,d),v=g,m=p;l&&(v+=l[3],m+=l[0]);var y=v+a;pE(e)&&this._renderBackground(e,e,g,p,o,s);for(var _=!!e.backgroundColor,x=0;x<i.lines.length;x++){for(var w=i.lines[x],S=w.tokens,T=S.length,b=w.lineHeight,E=w.width,C=0,M=v,A=y,R=T-1,P=void 0;C<T&&(P=S[C],!P.align||P.align==="left");)this._placeToken(P,e,b,m,M,"left",_),E-=P.width,M+=P.width,C++;for(;R>=0&&(P=S[R],P.align==="right");)this._placeToken(P,e,b,m,A,"right",_),E-=P.width,A-=P.width,R--;for(M+=(a-(M-v)-(y-A)-E)/2;C<=R;)P=S[C],this._placeToken(P,e,b,m,M+P.width/2,"center",_),M+=P.width,C++;m+=b}},t.prototype._placeToken=function(e,n,i,a,o,s,l){var u=n.rich[e.styleName]||{};u.text=e.text;var h=e.verticalAlign,c=a+i/2;h==="top"?c=a+e.height/2:h==="bottom"&&(c=a+i-e.height/2);var f=!e.isLineHolder&&pE(u);f&&this._renderBackground(u,n,s==="right"?o-e.width:s==="center"?o-e.width/2:o,c-e.height/2,e.width,e.height);var d=!!u.backgroundColor,g=e.textPadding;g&&(o=K3(o,s,g),c-=e.height/2-g[0]-e.innerHeight/2);var p=this._getOrCreateChild(pg),v=p.createStyle();p.useStyle(v);var m=this._defaultStyle,y=!1,_=0,x=j3("fill"in u?u.fill:"fill"in n?n.fill:(y=!0,m.fill)),w=Z3("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!m.autoStroke||y)?(_=H3,m.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;v.text=e.text,v.x=o,v.y=c,S&&(v.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,v.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",v.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,v.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),v.textAlign=s,v.textBaseline="middle",v.font=e.font||ku,v.opacity=os(u.opacity,n.opacity,1),Y3(v,u),w&&(v.lineWidth=os(u.lineWidth,n.lineWidth,_),v.lineDash=Vt(u.lineDash,n.lineDash),v.lineDashOffset=n.lineDashOffset||0,v.stroke=w),x&&(v.fill=x);var T=e.contentWidth,b=e.contentHeight;p.setBoundingRect(new jt(pv(v.x,T,v.textAlign),id(v.y,b,v.textBaseline),T,b))},t.prototype._renderBackground=function(e,n,i,a,o,s){var l=e.backgroundColor,u=e.borderWidth,h=e.borderColor,c=l&&l.image,f=l&&!c,d=e.borderRadius,g=this,p,v;if(f||e.lineHeight||u&&h){p=this._getOrCreateChild(ve),p.useStyle(p.createStyle()),p.style.fill=null;var m=p.shape;m.x=i,m.y=a,m.width=o,m.height=s,m.r=d,p.dirtyShape()}if(f){var y=p.style;y.fill=l||null,y.fillOpacity=Vt(e.fillOpacity,1)}else if(c){v=this._getOrCreateChild(bn),v.onload=function(){g.dirtyStyle()};var _=v.style;_.image=l.image,_.x=i,_.y=a,_.width=o,_.height=s}if(u&&h){var y=p.style;y.lineWidth=u,y.stroke=h,y.strokeOpacity=Vt(e.strokeOpacity,1),y.lineDash=e.borderDash,y.lineDashOffset=e.borderDashOffset||0,p.strokeContainThreshold=0,p.hasFill()&&p.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var x=(p||v).style;x.shadowBlur=e.shadowBlur||0,x.shadowColor=e.shadowColor||"transparent",x.shadowOffsetX=e.shadowOffsetX||0,x.shadowOffsetY=e.shadowOffsetY||0,x.opacity=os(e.opacity,n.opacity,1)},t.makeFont=function(e){var n="";return zH(e)&&(n=[e.fontStyle,e.fontWeight,BH(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),n&&so(n)||e.textFont||e.font},t}($a),Ywt={left:!0,right:1,center:1},Xwt={top:1,bottom:1,middle:1},$3=["fontStyle","fontWeight","fontSize","fontFamily"];function BH(r){return typeof r=="string"&&(r.indexOf("px")!==-1||r.indexOf("rem")!==-1||r.indexOf("em")!==-1)?r:isNaN(+r)?NP+"px":r+"px"}function Y3(r,t){for(var e=0;e<$3.length;e++){var n=$3[e],i=t[n];i!=null&&(r[n]=i)}}function zH(r){return r.fontSize!=null||r.fontFamily||r.fontWeight}function Zwt(r){return X3(r),I(r.rich,X3),r}function X3(r){if(r){r.font=xe.makeFont(r);var t=r.align;t==="middle"&&(t="center"),r.align=t==null||Ywt[t]?t:"left";var e=r.verticalAlign;e==="center"&&(e="middle"),r.verticalAlign=e==null||Xwt[e]?e:"top";var n=r.padding;n&&(r.padding=VP(r.padding))}}function Z3(r,t){return r==null||t<=0||r==="transparent"||r==="none"?null:r.image||r.colorStops?"#000":r}function j3(r){return r==null||r==="none"?null:r.image||r.colorStops?"#000":r}function K3(r,t,e){return t==="right"?r-e[1]:t==="center"?r+e[3]/2-e[1]/2:r+e[3]}function q3(r){var t=r.text;return t!=null&&(t+=""),t}function pE(r){return!!(r.backgroundColor||r.lineHeight||r.borderWidth&&r.borderColor)}var Ft=me(),XA=function(r,t,e,n){if(n){var i=Ft(n);i.dataIndex=e,i.dataType=t,i.seriesIndex=r,i.ssrType="chart",n.type==="group"&&n.traverse(function(a){var o=Ft(a);o.seriesIndex=r,o.dataIndex=e,o.dataType=t,o.ssrType="chart"})}},J3=1,Q3={},VH=me(),tL=me(),eL=0,Xy=1,Bw=2,Si=["emphasis","blur","select"],jm=["normal","emphasis","blur","select"],jg=10,jwt=9,Ec="highlight",A1="downplay",Qv="select",I1="unselect",tm="toggleSelect";function Rf(r){return r!=null&&r!=="none"}function zw(r,t,e){r.onHoverStateChange&&(r.hoverState||0)!==e&&r.onHoverStateChange(t),r.hoverState=e}function UH(r){zw(r,"emphasis",Bw)}function WH(r){r.hoverState===Bw&&zw(r,"normal",eL)}function rL(r){zw(r,"blur",Xy)}function HH(r){r.hoverState===Xy&&zw(r,"normal",eL)}function Kwt(r){r.selected=!0}function qwt(r){r.selected=!1}function t5(r,t,e){t(r,e)}function _l(r,t,e){t5(r,t,e),r.isGroup&&r.traverse(function(n){t5(n,t,e)})}function Xx(r,t){switch(t){case"emphasis":r.hoverState=Bw;break;case"normal":r.hoverState=eL;break;case"blur":r.hoverState=Xy;break;case"select":r.selected=!0}}function Jwt(r,t,e,n){for(var i=r.style,a={},o=0;o<t.length;o++){var s=t[o],l=i[s];a[s]=l??(n&&n[s])}for(var o=0;o<r.animators.length;o++){var u=r.animators[o];u.__fromStateTransition&&u.__fromStateTransition.indexOf(e)<0&&u.targetName==="style"&&u.saveTo(a,t)}return a}function Qwt(r,t,e,n){var i=e&&te(e,"select")>=0,a=!1;if(r instanceof ae){var o=VH(r),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(Rf(s)||Rf(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(a=!0,n=tt({},n),u=tt({},u),u.fill=s):!Rf(u.fill)&&Rf(s)?(a=!0,n=tt({},n),u=tt({},u),u.fill=LA(s)):!Rf(u.stroke)&&Rf(l)&&(a||(n=tt({},n),u=tt({},u)),u.stroke=LA(l)),n.style=u}}if(n&&n.z2==null){a||(n=tt({},n));var h=r.z2EmphasisLift;n.z2=r.z2+(h??jg)}return n}function tTt(r,t,e){if(e&&e.z2==null){e=tt({},e);var n=r.z2SelectLift;e.z2=r.z2+(n??jwt)}return e}function eTt(r,t,e){var n=te(r.currentStates,t)>=0,i=r.style.opacity,a=n?null:Jwt(r,["opacity"],t,{opacity:1});e=e||{};var o=e.style||{};return o.opacity==null&&(e=tt({},e),o=tt({opacity:n?i:a.opacity*.1},o),e.style=o),e}function vE(r,t){var e=this.states[r];if(this.style){if(r==="emphasis")return Qwt(this,r,t,e);if(r==="blur")return eTt(this,r,e);if(r==="select")return tTt(this,r,e)}return e}function Wc(r){r.stateProxy=vE;var t=r.getTextContent(),e=r.getTextGuideLine();t&&(t.stateProxy=vE),e&&(e.stateProxy=vE)}function e5(r,t){!ZH(r,t)&&!r.__highByOuter&&_l(r,UH)}function r5(r,t){!ZH(r,t)&&!r.__highByOuter&&_l(r,WH)}function ul(r,t){r.__highByOuter|=1<<(t||0),_l(r,UH)}function hl(r,t){!(r.__highByOuter&=~(1<<(t||0)))&&_l(r,WH)}function $H(r){_l(r,rL)}function nL(r){_l(r,HH)}function YH(r){_l(r,Kwt)}function XH(r){_l(r,qwt)}function ZH(r,t){return r.__highDownSilentOnTouch&&t.zrByTouch}function jH(r){var t=r.getModel(),e=[],n=[];t.eachComponent(function(i,a){var o=tL(a),s=i==="series",l=s?r.getViewOfSeriesModel(a):r.getViewOfComponentModel(a);!s&&n.push(l),o.isBlured&&(l.group.traverse(function(u){HH(u)}),s&&e.push(a)),o.isBlured=!1}),I(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(e,!1,t)})}function ZA(r,t,e,n){var i=n.getModel();e=e||"coordinateSystem";function a(u,h){for(var c=0;c<h.length;c++){var f=u.getItemGraphicEl(h[c]);f&&nL(f)}}if(r!=null&&!(!t||t==="none")){var o=i.getSeriesByIndex(r),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var h=o===u,c=u.coordinateSystem;c&&c.master&&(c=c.master);var f=c&&s?c===s:h;if(!(e==="series"&&!h||e==="coordinateSystem"&&!f||t==="series"&&h)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(v){v.__highByOuter&&h&&t==="self"||rL(v)}),Qn(t))a(u.getData(),t);else if(Rt(t))for(var g=he(t),p=0;p<g.length;p++)a(u.getData(g[p]),t[g[p]]);l.push(u),tL(u).isBlured=!0}}),i.eachComponent(function(u,h){if(u!=="series"){var c=n.getViewOfComponentModel(h);c&&c.toggleBlurSeries&&c.toggleBlurSeries(l,!0,i)}})}}function jA(r,t,e){if(!(r==null||t==null)){var n=e.getModel().getComponent(r,t);if(n){tL(n).isBlured=!0;var i=e.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(a){rL(a)})}}}function rTt(r,t,e){var n=r.seriesIndex,i=r.getData(t.dataType);if(i){var a=Vc(i,t);a=(rt(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var u=Ft(o);ZA(n,u.focus,u.blurScope,e)}else{var h=r.get(["emphasis","focus"]),c=r.get(["emphasis","blurScope"]);h!=null&&ZA(n,h,c,e)}}}function iL(r,t,e,n){var i={focusSelf:!1,dispatchers:null};if(r==null||r==="series"||t==null||e==null)return i;var a=n.getModel().getComponent(r,t);if(!a)return i;var o=n.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(e),l,u=0;u<s.length;u++)if(Ft(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function nTt(r,t,e){var n=Ft(r),i=iL(n.componentMainType,n.componentIndex,n.componentHighDownName,e),a=i.dispatchers,o=i.focusSelf;a?(o&&jA(n.componentMainType,n.componentIndex,e),I(a,function(s){return e5(s,t)})):(ZA(n.seriesIndex,n.focus,n.blurScope,e),n.focus==="self"&&jA(n.componentMainType,n.componentIndex,e),e5(r,t))}function iTt(r,t,e){jH(e);var n=Ft(r),i=iL(n.componentMainType,n.componentIndex,n.componentHighDownName,e).dispatchers;i?I(i,function(a){return r5(a,t)}):r5(r,t)}function aTt(r,t,e){if(qA(t)){var n=t.dataType,i=r.getData(n),a=Vc(i,t);rt(a)||(a=[a]),r[t.type===tm?"toggleSelect":t.type===Qv?"select":"unselect"](a,n)}}function n5(r){var t=r.getAllData();I(t,function(e){var n=e.data,i=e.type;n.eachItemGraphicEl(function(a,o){r.isSelected(o,i)?YH(a):XH(a)})})}function oTt(r){var t=[];return r.eachSeries(function(e){var n=e.getAllData();I(n,function(i){i.data;var a=i.type,o=e.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:e.seriesIndex};a!=null&&(s.dataType=a),t.push(s)}})}),t}function Cc(r,t,e){cc(r,!0),_l(r,Wc),KA(r,t,e)}function sTt(r){cc(r,!1)}function wr(r,t,e,n){n?sTt(r):Cc(r,t,e)}function KA(r,t,e){var n=Ft(r);t!=null?(n.focus=t,n.blurScope=e):n.focus&&(n.focus=null)}var i5=["emphasis","blur","select"],lTt={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function On(r,t,e,n){e=e||"itemStyle";for(var i=0;i<i5.length;i++){var a=i5[i],o=t.getModel([a,e]),s=r.ensureState(a);s.style=n?n(o):o[lTt[e]]()}}function cc(r,t){var e=t===!1,n=r;r.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=r.highDownSilentOnTouch),(!e||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!e)}function Km(r){return!!(r&&r.__highDownDispatcher)}function uTt(r,t,e){var n=Ft(r);n.componentMainType=t.mainType,n.componentIndex=t.componentIndex,n.componentHighDownName=e}function hTt(r){var t=Q3[r];return t==null&&J3<=32&&(t=Q3[r]=J3++),t}function qA(r){var t=r.type;return t===Qv||t===I1||t===tm}function a5(r){var t=r.type;return t===Ec||t===A1}function cTt(r){var t=VH(r);t.normalFill=r.style.fill,t.normalStroke=r.style.stroke;var e=r.states.select||{};t.selectFill=e.style&&e.style.fill||null,t.selectStroke=e.style&&e.style.stroke||null}var Pf=ps.CMD,fTt=[[],[],[]],o5=Math.sqrt,dTt=Math.atan2;function KH(r,t){if(t){var e=r.data,n=r.len(),i,a,o,s,l,u,h=Pf.M,c=Pf.C,f=Pf.L,d=Pf.R,g=Pf.A,p=Pf.Q;for(o=0,s=0;o<n;){switch(i=e[o++],s=o,a=0,i){case h:a=1;break;case f:a=1;break;case c:a=3;break;case p:a=2;break;case g:var v=t[4],m=t[5],y=o5(t[0]*t[0]+t[1]*t[1]),_=o5(t[2]*t[2]+t[3]*t[3]),x=dTt(-t[1]/_,t[0]/y);e[o]*=y,e[o++]+=v,e[o]*=_,e[o++]+=m,e[o++]*=y,e[o++]*=_,e[o++]+=x,e[o++]+=x,o+=2,s=o;break;case d:u[0]=e[o++],u[1]=e[o++],Ln(u,u,t),e[s++]=u[0],e[s++]=u[1],u[0]+=e[o++],u[1]+=e[o++],Ln(u,u,t),e[s++]=u[0],e[s++]=u[1]}for(l=0;l<a;l++){var w=fTt[l];w[0]=e[o++],w[1]=e[o++],Ln(w,w,t),e[s++]=w[0],e[s++]=w[1]}}r.increaseVersion()}}var mE=Math.sqrt,d_=Math.sin,g_=Math.cos,Dp=Math.PI;function s5(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function JA(r,t){return(r[0]*t[0]+r[1]*t[1])/(s5(r)*s5(t))}function l5(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(JA(r,t))}function u5(r,t,e,n,i,a,o,s,l,u,h){var c=l*(Dp/180),f=g_(c)*(r-e)/2+d_(c)*(t-n)/2,d=-1*d_(c)*(r-e)/2+g_(c)*(t-n)/2,g=f*f/(o*o)+d*d/(s*s);g>1&&(o*=mE(g),s*=mE(g));var p=(i===a?-1:1)*mE((o*o*(s*s)-o*o*(d*d)-s*s*(f*f))/(o*o*(d*d)+s*s*(f*f)))||0,v=p*o*d/s,m=p*-s*f/o,y=(r+e)/2+g_(c)*v-d_(c)*m,_=(t+n)/2+d_(c)*v+g_(c)*m,x=l5([1,0],[(f-v)/o,(d-m)/s]),w=[(f-v)/o,(d-m)/s],S=[(-1*f-v)/o,(-1*d-m)/s],T=l5(w,S);if(JA(w,S)<=-1&&(T=Dp),JA(w,S)>=1&&(T=0),T<0){var b=Math.round(T/Dp*1e6)/1e6;T=Dp*2+b%2*Dp}h.addData(u,y,_,o,s,x,T,c,a)}var gTt=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,pTt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function vTt(r){var t=new ps;if(!r)return t;var e=0,n=0,i=e,a=n,o,s=ps.CMD,l=r.match(gTt);if(!l)return t;for(var u=0;u<l.length;u++){for(var h=l[u],c=h.charAt(0),f=void 0,d=h.match(pTt)||[],g=d.length,p=0;p<g;p++)d[p]=parseFloat(d[p]);for(var v=0;v<g;){var m=void 0,y=void 0,_=void 0,x=void 0,w=void 0,S=void 0,T=void 0,b=e,E=n,C=void 0,M=void 0;switch(c){case"l":e+=d[v++],n+=d[v++],f=s.L,t.addData(f,e,n);break;case"L":e=d[v++],n=d[v++],f=s.L,t.addData(f,e,n);break;case"m":e+=d[v++],n+=d[v++],f=s.M,t.addData(f,e,n),i=e,a=n,c="l";break;case"M":e=d[v++],n=d[v++],f=s.M,t.addData(f,e,n),i=e,a=n,c="L";break;case"h":e+=d[v++],f=s.L,t.addData(f,e,n);break;case"H":e=d[v++],f=s.L,t.addData(f,e,n);break;case"v":n+=d[v++],f=s.L,t.addData(f,e,n);break;case"V":n=d[v++],f=s.L,t.addData(f,e,n);break;case"C":f=s.C,t.addData(f,d[v++],d[v++],d[v++],d[v++],d[v++],d[v++]),e=d[v-2],n=d[v-1];break;case"c":f=s.C,t.addData(f,d[v++]+e,d[v++]+n,d[v++]+e,d[v++]+n,d[v++]+e,d[v++]+n),e+=d[v-2],n+=d[v-1];break;case"S":m=e,y=n,C=t.len(),M=t.data,o===s.C&&(m+=e-M[C-4],y+=n-M[C-3]),f=s.C,b=d[v++],E=d[v++],e=d[v++],n=d[v++],t.addData(f,m,y,b,E,e,n);break;case"s":m=e,y=n,C=t.len(),M=t.data,o===s.C&&(m+=e-M[C-4],y+=n-M[C-3]),f=s.C,b=e+d[v++],E=n+d[v++],e+=d[v++],n+=d[v++],t.addData(f,m,y,b,E,e,n);break;case"Q":b=d[v++],E=d[v++],e=d[v++],n=d[v++],f=s.Q,t.addData(f,b,E,e,n);break;case"q":b=d[v++]+e,E=d[v++]+n,e+=d[v++],n+=d[v++],f=s.Q,t.addData(f,b,E,e,n);break;case"T":m=e,y=n,C=t.len(),M=t.data,o===s.Q&&(m+=e-M[C-4],y+=n-M[C-3]),e=d[v++],n=d[v++],f=s.Q,t.addData(f,m,y,e,n);break;case"t":m=e,y=n,C=t.len(),M=t.data,o===s.Q&&(m+=e-M[C-4],y+=n-M[C-3]),e+=d[v++],n+=d[v++],f=s.Q,t.addData(f,m,y,e,n);break;case"A":_=d[v++],x=d[v++],w=d[v++],S=d[v++],T=d[v++],b=e,E=n,e=d[v++],n=d[v++],f=s.A,u5(b,E,e,n,S,T,_,x,w,f,t);break;case"a":_=d[v++],x=d[v++],w=d[v++],S=d[v++],T=d[v++],b=e,E=n,e+=d[v++],n+=d[v++],f=s.A,u5(b,E,e,n,S,T,_,x,w,f,t);break}}(c==="z"||c==="Z")&&(f=s.Z,t.addData(f),e=i,n=a),o=f}return t.toStatic(),t}var qH=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.applyTransform=function(e){},t}(ae);function JH(r){return r.setData!=null}function QH(r,t){var e=vTt(r),n=tt({},t);return n.buildPath=function(i){if(JH(i)){i.setData(e.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;e.rebuildPath(a,1)}},n.applyTransform=function(i){KH(e,i),this.dirtyShape()},n}function t$(r,t){return new qH(QH(r,t))}function mTt(r,t){var e=QH(r,t),n=function(i){U(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=e.applyTransform,s.buildPath=e.buildPath,s}return a}(qH);return n}function yTt(r,t){for(var e=[],n=r.length,i=0;i<n;i++){var a=r[i];e.push(a.getUpdatedPathProxy(!0))}var o=new ae(t);return o.createPathProxy(),o.buildPath=function(s){if(JH(s)){s.appendPath(e);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function aL(r,t){t=t||{};var e=new ae;return r.shape&&e.setShape(r.shape),e.setStyle(r.style),t.bakeTransform?KH(e.path,r.getComputedTransform()):t.toLocal?e.setLocalTransform(r.getComputedTransform()):e.copyTransform(r),e.buildPath=r.buildPath,e.applyTransform=e.applyTransform,e.z=r.z,e.z2=r.z2,e.zlevel=r.zlevel,e}var _Tt=function(){function r(){this.cx=0,this.cy=0,this.r=0}return r}(),xl=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new _Tt},t.prototype.buildPath=function(e,n){e.moveTo(n.cx+n.r,n.cy),e.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(ae);xl.prototype.type="circle";var xTt=function(){function r(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return r}(),Vw=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new xTt},t.prototype.buildPath=function(e,n){var i=.5522848,a=n.cx,o=n.cy,s=n.rx,l=n.ry,u=s*i,h=l*i;e.moveTo(a-s,o),e.bezierCurveTo(a-s,o-h,a-u,o-l,a,o-l),e.bezierCurveTo(a+u,o-l,a+s,o-h,a+s,o),e.bezierCurveTo(a+s,o+h,a+u,o+l,a,o+l),e.bezierCurveTo(a-u,o+l,a-s,o+h,a-s,o),e.closePath()},t}(ae);Vw.prototype.type="ellipse";var e$=Math.PI,yE=e$*2,Th=Math.sin,Lf=Math.cos,STt=Math.acos,Bn=Math.atan2,h5=Math.abs,em=Math.sqrt,vv=Math.max,No=Math.min,to=1e-4;function wTt(r,t,e,n,i,a,o,s){var l=e-r,u=n-t,h=o-i,c=s-a,f=c*l-h*u;if(!(f*f<to))return f=(h*(t-a)-c*(r-i))/f,[r+f*l,t+f*u]}function p_(r,t,e,n,i,a,o){var s=r-e,l=t-n,u=(o?a:-a)/em(s*s+l*l),h=u*l,c=-u*s,f=r+h,d=t+c,g=e+h,p=n+c,v=(f+g)/2,m=(d+p)/2,y=g-f,_=p-d,x=y*y+_*_,w=i-a,S=f*p-g*d,T=(_<0?-1:1)*em(vv(0,w*w*x-S*S)),b=(S*_-y*T)/x,E=(-S*y-_*T)/x,C=(S*_+y*T)/x,M=(-S*y+_*T)/x,A=b-v,R=E-m,P=C-v,L=M-m;return A*A+R*R>P*P+L*L&&(b=C,E=M),{cx:b,cy:E,x0:-h,y0:-c,x1:b*(i/w-1),y1:E*(i/w-1)}}function TTt(r){var t;if(rt(r)){var e=r.length;if(!e)return r;e===1?t=[r[0],r[0],0,0]:e===2?t=[r[0],r[0],r[1],r[1]]:e===3?t=r.concat(r[2]):t=r}else t=[r,r,r,r];return t}function bTt(r,t){var e,n=vv(t.r,0),i=vv(t.r0||0,0),a=n>0,o=i>0;if(!(!a&&!o)){if(a||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var h=t.cx,c=t.cy,f=!!t.clockwise,d=h5(u-l),g=d>yE&&d%yE;if(g>to&&(d=g),!(n>to))r.moveTo(h,c);else if(d>yE-to)r.moveTo(h+n*Lf(l),c+n*Th(l)),r.arc(h,c,n,l,u,!f),i>to&&(r.moveTo(h+i*Lf(u),c+i*Th(u)),r.arc(h,c,i,u,l,f));else{var p=void 0,v=void 0,m=void 0,y=void 0,_=void 0,x=void 0,w=void 0,S=void 0,T=void 0,b=void 0,E=void 0,C=void 0,M=void 0,A=void 0,R=void 0,P=void 0,L=n*Lf(l),D=n*Th(l),k=i*Lf(u),F=i*Th(u),B=d>to;if(B){var V=t.cornerRadius;V&&(e=TTt(V),p=e[0],v=e[1],m=e[2],y=e[3]);var Y=h5(n-i)/2;if(_=No(Y,m),x=No(Y,y),w=No(Y,p),S=No(Y,v),E=T=vv(_,x),C=b=vv(w,S),(T>to||b>to)&&(M=n*Lf(u),A=n*Th(u),R=i*Lf(l),P=i*Th(l),d<e$)){var q=wTt(L,D,R,P,M,A,k,F);if(q){var lt=L-q[0],X=D-q[1],St=M-q[0],mt=A-q[1],$=1/Th(STt((lt*St+X*mt)/(em(lt*lt+X*X)*em(St*St+mt*mt)))/2),K=em(q[0]*q[0]+q[1]*q[1]);E=No(T,(n-K)/($+1)),C=No(b,(i-K)/($-1))}}}if(!B)r.moveTo(h+L,c+D);else if(E>to){var et=No(m,E),W=No(y,E),Z=p_(R,P,L,D,n,et,f),at=p_(M,A,k,F,n,W,f);r.moveTo(h+Z.cx+Z.x0,c+Z.cy+Z.y0),E<T&&et===W?r.arc(h+Z.cx,c+Z.cy,E,Bn(Z.y0,Z.x0),Bn(at.y0,at.x0),!f):(et>0&&r.arc(h+Z.cx,c+Z.cy,et,Bn(Z.y0,Z.x0),Bn(Z.y1,Z.x1),!f),r.arc(h,c,n,Bn(Z.cy+Z.y1,Z.cx+Z.x1),Bn(at.cy+at.y1,at.cx+at.x1),!f),W>0&&r.arc(h+at.cx,c+at.cy,W,Bn(at.y1,at.x1),Bn(at.y0,at.x0),!f))}else r.moveTo(h+L,c+D),r.arc(h,c,n,l,u,!f);if(!(i>to)||!B)r.lineTo(h+k,c+F);else if(C>to){var et=No(p,C),W=No(v,C),Z=p_(k,F,M,A,i,-W,f),at=p_(L,D,R,P,i,-et,f);r.lineTo(h+Z.cx+Z.x0,c+Z.cy+Z.y0),C<b&&et===W?r.arc(h+Z.cx,c+Z.cy,C,Bn(Z.y0,Z.x0),Bn(at.y0,at.x0),!f):(W>0&&r.arc(h+Z.cx,c+Z.cy,W,Bn(Z.y0,Z.x0),Bn(Z.y1,Z.x1),!f),r.arc(h,c,i,Bn(Z.cy+Z.y1,Z.cx+Z.x1),Bn(at.cy+at.y1,at.cx+at.x1),f),et>0&&r.arc(h+at.cx,c+at.cy,et,Bn(at.y1,at.x1),Bn(at.y0,at.x0),!f))}else r.lineTo(h+k,c+F),r.arc(h,c,i,u,l,f)}r.closePath()}}}var ETt=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return r}(),wi=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new ETt},t.prototype.buildPath=function(e,n){bTt(e,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(ae);wi.prototype.type="sector";var CTt=function(){function r(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return r}(),Zy=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new CTt},t.prototype.buildPath=function(e,n){var i=n.cx,a=n.cy,o=Math.PI*2;e.moveTo(i+n.r,a),e.arc(i,a,n.r,0,o,!1),e.moveTo(i+n.r0,a),e.arc(i,a,n.r0,0,o,!0)},t}(ae);Zy.prototype.type="ring";function MTt(r,t,e,n){var i=[],a=[],o=[],s=[],l,u,h,c;if(n){h=[1/0,1/0],c=[-1/0,-1/0];for(var f=0,d=r.length;f<d;f++)su(h,h,r[f]),lu(c,c,r[f]);su(h,h,n[0]),lu(c,c,n[1])}for(var f=0,d=r.length;f<d;f++){var g=r[f];if(e)l=r[f?f-1:d-1],u=r[(f+1)%d];else if(f===0||f===d-1){i.push(Js(r[f]));continue}else l=r[f-1],u=r[f+1];uc(a,u,l),S1(a,a,t);var p=TA(g,l),v=TA(g,u),m=p+v;m!==0&&(p/=m,v/=m),S1(o,a,-p),S1(s,a,v);var y=n3([],g,o),_=n3([],g,s);n&&(lu(y,y,h),su(y,y,c),lu(_,_,h),su(_,_,c)),i.push(y),i.push(_)}return e&&i.push(i.shift()),i}function r$(r,t,e){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var a=MTt(i,n,e,t.smoothConstraint);r.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(e?o:o-1);s++){var l=a[s*2],u=a[s*2+1],h=i[(s+1)%o];r.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{r.moveTo(i[0][0],i[0][1]);for(var s=1,c=i.length;s<c;s++)r.lineTo(i[s][0],i[s][1])}e&&r.closePath()}}var ATt=function(){function r(){this.points=null,this.smooth=0,this.smoothConstraint=null}return r}(),Ti=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new ATt},t.prototype.buildPath=function(e,n){r$(e,n,!0)},t}(ae);Ti.prototype.type="polygon";var ITt=function(){function r(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return r}(),Ei=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ITt},t.prototype.buildPath=function(e,n){r$(e,n,!1)},t}(ae);Ei.prototype.type="polyline";var RTt={},PTt=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}(),sn=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new PTt},t.prototype.buildPath=function(e,n){var i,a,o,s;if(this.subPixelOptimize){var l=kH(RTt,n,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=n.x1,a=n.y1,o=n.x2,s=n.y2;var u=n.percent;u!==0&&(e.moveTo(i,a),u<1&&(o=i*(1-u)+o*u,s=a*(1-u)+s*u),e.lineTo(o,s))},t.prototype.pointAt=function(e){var n=this.shape;return[n.x1*(1-e)+n.x2*e,n.y1*(1-e)+n.y2*e]},t}(ae);sn.prototype.type="line";var Ci=[],LTt=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return r}();function c5(r,t,e){var n=r.cpx2,i=r.cpy2;return n!=null||i!=null?[(e?p3:nn)(r.x1,r.cpx1,r.cpx2,r.x2,t),(e?p3:nn)(r.y1,r.cpy1,r.cpy2,r.y2,t)]:[(e?AA:vn)(r.x1,r.cpx1,r.x2,t),(e?AA:vn)(r.y1,r.cpy1,r.y2,t)]}var jy=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new LTt},t.prototype.buildPath=function(e,n){var i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,h=n.cpx2,c=n.cpy2,f=n.percent;f!==0&&(e.moveTo(i,a),h==null||c==null?(f<1&&(Hm(i,l,o,f,Ci),l=Ci[1],o=Ci[2],Hm(a,u,s,f,Ci),u=Ci[1],s=Ci[2]),e.quadraticCurveTo(l,u,o,s)):(f<1&&(Bu(i,l,h,o,f,Ci),l=Ci[1],h=Ci[2],o=Ci[3],Bu(a,u,c,s,f,Ci),u=Ci[1],c=Ci[2],s=Ci[3]),e.bezierCurveTo(l,u,h,c,o,s)))},t.prototype.pointAt=function(e){return c5(this.shape,e,!1)},t.prototype.tangentAt=function(e){var n=c5(this.shape,e,!0);return Yg(n,n)},t}(ae);jy.prototype.type="bezier-curve";var DTt=function(){function r(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),Uw=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new DTt},t.prototype.buildPath=function(e,n){var i=n.cx,a=n.cy,o=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,h=Math.cos(s),c=Math.sin(s);e.moveTo(h*o+i,c*o+a),e.arc(i,a,o,s,l,!u)},t}(ae);Uw.prototype.type="arc";var oL=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="compound",e}return t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,n=this.shapeChanged(),i=0;i<e.length;i++)n=n||e[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<e.length;i++)e[i].path||e[i].createPathProxy(),e[i].path.setScale(n[0],n[1],e[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,n){for(var i=n.paths||[],a=0;a<i.length;a++)i[a].buildPath(e,i[a].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],n=0;n<e.length;n++)e[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),ae.prototype.getBoundingRect.call(this)},t}(ae),n$=function(){function r(t){this.colorStops=t||[]}return r.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},r}(),Ky=function(r){U(t,r);function t(e,n,i,a,o,s){var l=r.call(this,o)||this;return l.x=e??0,l.y=n??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return t}(n$),i$=function(r){U(t,r);function t(e,n,i,a,o){var s=r.call(this,a)||this;return s.x=e??.5,s.y=n??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return t}(n$),bh=[0,0],Eh=[0,0],v_=new $t,m_=new $t,Zx=function(){function r(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new $t;for(var n=0;n<2;n++)this._axes[n]=new $t;t&&this.fromBoundingRect(t,e)}return r.prototype.fromBoundingRect=function(t,e){var n=this._corners,i=this._axes,a=t.x,o=t.y,s=a+t.width,l=o+t.height;if(n[0].set(a,o),n[1].set(s,o),n[2].set(s,l),n[3].set(a,l),e)for(var u=0;u<4;u++)n[u].transform(e);$t.sub(i[0],n[1],n[0]),$t.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},r.prototype.intersect=function(t,e){var n=!0,i=!e;return v_.set(1/0,1/0),m_.set(0,0),!this._intersectCheckOneSide(this,t,v_,m_,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,v_,m_,i,-1)&&(n=!1,i)||i||$t.copy(e,n?v_:m_),n},r.prototype._intersectCheckOneSide=function(t,e,n,i,a,o){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,bh),this._getProjMinMaxOnAxis(l,e._corners,Eh),bh[1]<Eh[0]||bh[0]>Eh[1]){if(s=!1,a)return s;var h=Math.abs(Eh[0]-bh[1]),c=Math.abs(bh[0]-Eh[1]);Math.min(h,c)>i.len()&&(h<c?$t.scale(i,u,-h*o):$t.scale(i,u,c*o))}else if(n){var h=Math.abs(Eh[0]-bh[1]),c=Math.abs(bh[0]-Eh[1]);Math.min(h,c)<n.len()&&(h<c?$t.scale(n,u,h*o):$t.scale(n,u,-c*o))}}return s},r.prototype._getProjMinMaxOnAxis=function(t,e,n){for(var i=this._axes[t],a=this._origin,o=e[0].dot(i)+a[t],s=o,l=o,u=1;u<e.length;u++){var h=e[u].dot(i)+a[t];s=Math.min(h,s),l=Math.max(h,l)}n[0]=s,n[1]=l},r}(),OTt=[],NTt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return t.prototype.traverse=function(e,n){e.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,n){n?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,n){n=n||!1;for(var i=0;i<e.length;i++)this.addDisplayable(e[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var n=this._cursor;n<this._displayables.length;n++)e&&e(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)e&&e(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){var n=this._displayables[e];n.parent=this,n.update(),n.parent=null}for(var e=0;e<this._temporaryDisplayables.length;e++){var n=this._temporaryDisplayables[e];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new jt(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(OTt)),e.union(a)}this._rect=e}return this._rect},t.prototype.contain=function(e,n){var i=this.transformCoordToLocal(e,n),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(e,n))return!0}return!1},t}($a),a$=me();function Kg(r,t,e,n,i){var a;if(t&&t.ecModel){var o=t.ecModel.getUpdatePayload();a=o&&o.animation}var s=t&&t.isAnimationEnabled(),l=r==="update";if(s){var u=void 0,h=void 0,c=void 0;n?(u=Vt(n.duration,200),h=Vt(n.easing,"cubicOut"),c=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),h=t.getShallow(l?"animationEasingUpdate":"animationEasing"),c=t.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(h=a.easing),a.delay!=null&&(c=a.delay)),At(c)&&(c=c(e,i)),At(u)&&(u=u(e));var f={duration:u||0,delay:c,easing:h};return f}else return null}function sL(r,t,e,n,i,a,o){var s=!1,l;At(i)?(o=a,a=i,i=null):Rt(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=r==="leave";u||t.stopAnimation("leave");var h=Kg(r,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(h&&h.duration>0){var c=h.duration,f=h.delay,d=h.easing,g={duration:c,delay:f||0,easing:d,done:a,force:!!a||!!o,setToFinal:!u,scope:r,during:o};s?t.animateFrom(e,g):t.animateTo(e,g)}else t.stopAnimation(),!s&&t.attr(e),o&&o(1),a&&a()}function Ae(r,t,e,n,i,a){sL("update",r,t,e,n,i,a)}function pr(r,t,e,n,i,a){sL("enter",r,t,e,n,i,a)}function Wd(r){if(!r.__zr)return!0;for(var t=0;t<r.animators.length;t++){var e=r.animators[t];if(e.scope==="leave")return!0}return!1}function zu(r,t,e,n,i,a){Wd(r)||sL("leave",r,t,e,n,i,a)}function f5(r,t,e,n){r.removeTextContent(),r.removeTextGuideLine(),zu(r,{style:{opacity:0}},t,e,n)}function qm(r,t,e){function n(){r.parent&&r.parent.remove(r)}r.isGroup?r.traverse(function(i){i.isGroup||f5(i,t,e,n)}):f5(r,t,e,n)}function xo(r){a$(r).oldStyle=r.style}function FTt(r){return a$(r).oldStyle}var jx=Math.max,Kx=Math.min,QA={};function kTt(r){return ae.extend(r)}var GTt=mTt;function BTt(r,t){return GTt(r,t)}function So(r,t){QA[r]=t}function lL(r){if(QA.hasOwnProperty(r))return QA[r]}function Ww(r,t,e,n){var i=t$(r,t);return e&&(n==="center"&&(e=s$(e,i.getBoundingRect())),l$(i,e)),i}function o$(r,t,e){var n=new bn({style:{image:r,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(e==="center"){var a={width:i.width,height:i.height};n.setStyle(s$(t,a))}}});return n}function s$(r,t){var e=t.width/t.height,n=r.height*e,i;n<=r.width?i=r.height:(n=r.width,i=n/e);var a=r.x+r.width/2,o=r.y+r.height/2;return{x:a-n/2,y:o-i/2,width:n,height:i}}var La=yTt;function l$(r,t){if(r.applyTransform){var e=r.getBoundingRect(),n=e.calculateTransform(t);r.applyTransform(n)}}function vg(r,t){return kH(r,r,{lineWidth:t}),r}function zTt(r){return GH(r.shape,r.shape,r.style),r}var R1=hc;function Mc(r,t){for(var e=Pw([]);r&&r!==t;)Qs(e,r.getLocalTransform(),e),r=r.parent;return e}function fo(r,t,e){return t&&!Qn(t)&&(t=Ws.getLocalTransform(t)),e&&(t=Xg([],t)),Ln([],r,t)}function Hw(r,t,e){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[r==="left"?-n:r==="right"?n:0,r==="top"?-i:r==="bottom"?i:0];return a=fo(a,t,e),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function d5(r){return!r.isGroup}function VTt(r){return r.shape!=null}function qy(r,t,e){if(!r||!t)return;function n(o){var s={};return o.traverse(function(l){d5(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return VTt(o)&&(s.shape=tt({},o.shape)),s}var a=n(r);t.traverse(function(o){if(d5(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),Ae(o,l,e,Ft(o).dataIndex)}}})}function u$(r,t){return nt(r,function(e){var n=e[0];n=jx(n,t.x),n=Kx(n,t.x+t.width);var i=e[1];return i=jx(i,t.y),i=Kx(i,t.y+t.height),[n,i]})}function UTt(r,t){var e=jx(r.x,t.x),n=Kx(r.x+r.width,t.x+t.width),i=jx(r.y,t.y),a=Kx(r.y+r.height,t.y+t.height);if(n>=e&&a>=i)return{x:e,y:i,width:n-e,height:a-i}}function Jy(r,t,e){var n=tt({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(e=e||{x:-1,y:-1,width:2,height:2},r)return r.indexOf("image://")===0?(i.image=r.slice(8),It(i,e),new bn(n)):Ww(r.replace("path://",""),n,e,"center")}function mv(r,t,e,n,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(h$(r,t,e,n,s[0],s[1],o[0],o[1]))return!0;o=s}}function h$(r,t,e,n,i,a,o,s){var l=e-r,u=n-t,h=o-i,c=s-a,f=_E(h,c,l,u);if(WTt(f))return!1;var d=r-i,g=t-a,p=_E(d,g,l,u)/f;if(p<0||p>1)return!1;var v=_E(d,g,h,c)/f;return!(v<0||v>1)}function _E(r,t,e,n){return r*n-e*t}function WTt(r){return r<=1e-6&&r>=-1e-6}function qg(r){var t=r.itemTooltipOption,e=r.componentModel,n=r.itemName,i=yt(t)?{formatter:t}:t,a=e.mainType,o=e.componentIndex,s={componentType:a,name:n,$vars:["name"]};s[a+"Index"]=o;var l=r.formatterParamsExtra;l&&I(he(l),function(h){xt(s,h)||(s[h]=l[h],s.$vars.push(h))});var u=Ft(r.el);u.componentMainType=a,u.componentIndex=o,u.tooltipConfig={name:n,option:It({content:n,encodeHTMLContent:!0,formatterParams:s},i)}}function g5(r,t){var e;r.isGroup&&(e=t(r)),e||r.traverse(t)}function Qu(r,t){if(r)if(rt(r))for(var e=0;e<r.length;e++)g5(r[e],t);else g5(r,t)}So("circle",xl);So("ellipse",Vw);So("sector",wi);So("ring",Zy);So("polygon",Ti);So("polyline",Ei);So("rect",ve);So("line",sn);So("bezierCurve",jy);So("arc",Uw);const nf=Object.freeze(Object.defineProperty({__proto__:null,Arc:Uw,BezierCurve:jy,BoundingRect:jt,Circle:xl,CompoundPath:oL,Ellipse:Vw,Group:Dt,Image:bn,IncrementalDisplayable:NTt,Line:sn,LinearGradient:Ky,OrientedBoundingRect:Zx,Path:ae,Point:$t,Polygon:Ti,Polyline:Ei,RadialGradient:i$,Rect:ve,Ring:Zy,Sector:wi,Text:xe,applyTransform:fo,clipPointsByRect:u$,clipRectByRect:UTt,createIcon:Jy,extendPath:BTt,extendShape:kTt,getShapeClass:lL,getTransform:Mc,groupTransition:qy,initProps:pr,isElementRemoved:Wd,lineLineIntersect:h$,linePolygonIntersect:mv,makeImage:o$,makePath:Ww,mergePath:La,registerShape:So,removeElement:zu,removeElementWithFadeOut:qm,resizePath:l$,setTooltipConfig:qg,subPixelOptimize:R1,subPixelOptimizeLine:vg,subPixelOptimizeRect:zTt,transformDirection:Hw,traverseElements:Qu,updateProps:Ae},Symbol.toStringTag,{value:"Module"}));var $w={};function c$(r,t){for(var e=0;e<Si.length;e++){var n=Si[e],i=t[n],a=r.ensureState(n);a.style=a.style||{},a.style.text=i}var o=r.currentStates.slice();r.clearStates(!0),r.setStyle({text:t.normal}),r.useStates(o,!0)}function tI(r,t,e){var n=r.labelFetcher,i=r.labelDataIndex,a=r.labelDimIndex,o=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),e!=null?{interpolatedValue:e}:null)),s==null&&(s=At(r.defaultText)?r.defaultText(i,r,e):r.defaultText);for(var l={normal:s},u=0;u<Si.length;u++){var h=Si[u],c=t[h];l[h]=Vt(n?n.getFormattedLabel(i,h,null,a,c&&c.get("formatter")):null,s)}return l}function Nn(r,t,e,n){e=e||$w;for(var i=r instanceof xe,a=!1,o=0;o<jm.length;o++){var s=t[jm[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?r:r.getTextContent();if(a){i||(l||(l=new xe,r.setTextContent(l)),r.stateProxy&&(l.stateProxy=r.stateProxy));var u=tI(e,t),h=t.normal,c=!!h.getShallow("show"),f=sr(h,n&&n.normal,e,!1,!i);f.text=u.normal,i||r.setTextConfig(qx(h,e,!1));for(var o=0;o<Si.length;o++){var d=Si[o],s=t[d];if(s){var g=l.ensureState(d),p=!!Vt(s.getShallow("show"),c);if(p!==c&&(g.ignore=!p),g.style=sr(s,n&&n[d],e,!0,!i),g.style.text=u[d],!i){var v=r.ensureState(d);v.textConfig=qx(s,e,!0)}}}l.silent=!!h.getShallow("silent"),l.style.x!=null&&(f.x=l.style.x),l.style.y!=null&&(f.y=l.style.y),l.ignore=!c,l.useStyle(f),l.dirty(),e.enableTextSetter&&(Jg(l).setLabelText=function(m){var y=tI(e,t,m);c$(l,y)})}else l&&(l.ignore=!0);r.dirty()}function hn(r,t){t=t||"label";for(var e={normal:r.getModel(t)},n=0;n<Si.length;n++){var i=Si[n];e[i]=r.getModel([i,t])}return e}function sr(r,t,e,n,i){var a={};return HTt(a,r,e,n,i),t&&tt(a,t),a}function qx(r,t,e){t=t||{};var n={},i,a=r.getShallow("rotate"),o=Vt(r.getShallow("distance"),e?null:5),s=r.getShallow("offset");return i=r.getShallow("position")||(e?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),a!=null&&(a*=Math.PI/180,n.rotation=a),o!=null&&(n.distance=o),n.outsideFill=r.get("color")==="inherit"?t.inheritColor||null:"auto",n}function HTt(r,t,e,n,i){e=e||$w;var a=t.ecModel,o=a&&a.option.textStyle,s=$Tt(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var h=t.getModel(["rich",u]);y5(l[u]={},h,o,e,n,i,!1,!0)}}l&&(r.rich=l);var c=t.get("overflow");c&&(r.overflow=c);var f=t.get("minMargin");f!=null&&(r.margin=f),y5(r,t,o,e,n,i,!0,!1)}function $Tt(r){for(var t;r&&r!==r.ecModel;){var e=(r.option||$w).rich;if(e){t=t||{};for(var n=he(e),i=0;i<n.length;i++){var a=n[i];t[a]=1}}r=r.parentModel}return t}var p5=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],v5=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],m5=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function y5(r,t,e,n,i,a,o,s){e=!i&&e||$w;var l=n&&n.inheritColor,u=t.getShallow("color"),h=t.getShallow("textBorderColor"),c=Vt(t.getShallow("opacity"),e.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(h==="inherit"||h==="auto")&&(l?h=l:h=null),a||(u=u||e.color,h=h||e.textBorderColor),u!=null&&(r.fill=u),h!=null&&(r.stroke=h);var f=Vt(t.getShallow("textBorderWidth"),e.textBorderWidth);f!=null&&(r.lineWidth=f);var d=Vt(t.getShallow("textBorderType"),e.textBorderType);d!=null&&(r.lineDash=d);var g=Vt(t.getShallow("textBorderDashOffset"),e.textBorderDashOffset);g!=null&&(r.lineDashOffset=g),!i&&c==null&&!s&&(c=n&&n.defaultOpacity),c!=null&&(r.opacity=c),!i&&!a&&r.fill==null&&n.inheritColor&&(r.fill=n.inheritColor);for(var p=0;p<p5.length;p++){var v=p5[p],m=Vt(t.getShallow(v),e[v]);m!=null&&(r[v]=m)}for(var p=0;p<v5.length;p++){var v=v5[p],m=t.getShallow(v);m!=null&&(r[v]=m)}if(r.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(r.verticalAlign=y)}if(!o||!n.disableBox){for(var p=0;p<m5.length;p++){var v=m5[p],m=t.getShallow(v);m!=null&&(r[v]=m)}var _=t.getShallow("borderType");_!=null&&(r.borderDash=_),(r.backgroundColor==="auto"||r.backgroundColor==="inherit")&&l&&(r.backgroundColor=l),(r.borderColor==="auto"||r.borderColor==="inherit")&&l&&(r.borderColor=l)}}function uL(r,t){var e=t&&t.getModel("textStyle");return so([r.fontStyle||e&&e.getShallow("fontStyle")||"",r.fontWeight||e&&e.getShallow("fontWeight")||"",(r.fontSize||e&&e.getShallow("fontSize")||12)+"px",r.fontFamily||e&&e.getShallow("fontFamily")||"sans-serif"].join(" "))}var Jg=me();function f$(r,t,e,n){if(r){var i=Jg(r);i.prevValue=i.value,i.value=e;var a=t.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}function d$(r,t,e,n,i){var a=Jg(r);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Vt(a.interpolatedValue,a.prevValue),l=a.value;function u(h){var c=IH(e,a.precision,s,l,h);a.interpolatedValue=h===1?null:c;var f=tI({labelDataIndex:t,labelFetcher:i,defaultText:o?o(c):c+""},a.statesModels,c);c$(r,f)}r.percent=0,(a.prevValue==null?pr:Ae)(r,{percent:1},n,t,null,u)}var YTt=["textStyle","color"],xE=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],SE=new xe,XTt=function(){function r(){}return r.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(YTt):null)},r.prototype.getFont=function(){return uL({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},r.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<xE.length;n++)e[xE[n]]=this.getShallow(xE[n]);return SE.useStyle(e),SE.update(),SE.getBoundingRect()},r}(),g$=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],ZTt=Uc(g$),jTt=function(){function r(){}return r.prototype.getLineStyle=function(t){return ZTt(this,t)},r}(),p$=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],KTt=Uc(p$),qTt=function(){function r(){}return r.prototype.getItemStyle=function(t,e){return KTt(this,t,e)},r}(),Oe=function(){function r(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}return r.prototype.init=function(t,e,n){},r.prototype.mergeOption=function(t,e){Zt(this.option,t,!0)},r.prototype.get=function(t,e){return t==null?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},r.prototype.getShallow=function(t,e){var n=this.option,i=n==null?n:n[t];if(i==null&&!e){var a=this.parentModel;a&&(i=a.getShallow(t))}return i},r.prototype.getModel=function(t,e){var n=t!=null,i=n?this.parsePath(t):null,a=n?this._doGet(i):this.option;return e=e||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new r(a,e,this.ecModel)},r.prototype.isEmpty=function(){return this.option==null},r.prototype.restoreData=function(){},r.prototype.clone=function(){var t=this.constructor;return new t(Pt(this.option))},r.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},r.prototype.resolveParentPath=function(t){return t},r.prototype.isAnimationEnabled=function(){if(!le.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},r.prototype._doGet=function(t,e){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&e&&(n=e._doGet(this.resolveParentPath(t),e.parentModel)),n},r}();qP(Oe);owt(Oe);Hr(Oe,jTt);Hr(Oe,qTt);Hr(Oe,cwt);Hr(Oe,XTt);var JTt=Math.round(Math.random()*10);function Qg(r){return[r||"",JTt++].join("_")}function QTt(r){var t={};r.registerSubTypeDefaulter=function(e,n){var i=Qo(e);t[i.main]=n},r.determineSubType=function(e,n){var i=n.type;if(!i){var a=Qo(e).main;r.hasSubTypes(e)&&t[a]&&(i=t[a](n))}return i}}function tbt(r,t){r.topologicalTravel=function(a,o,s,l){if(!a.length)return;var u=e(o),h=u.graph,c=u.noEntryList,f={};for(I(a,function(y){f[y]=!0});c.length;){var d=c.pop(),g=h[d],p=!!f[d];p&&(s.call(l,d,g.originalDeps.slice()),delete f[d]),I(g.successor,p?m:v)}I(f,function(){var y="";throw new Error(y)});function v(y){h[y].entryCount--,h[y].entryCount===0&&c.push(y)}function m(y){f[y]=!0,v(y)}};function e(a){var o={},s=[];return I(a,function(l){var u=n(o,l),h=u.originalDeps=t(l),c=i(h,a);u.entryCount=c.length,u.entryCount===0&&s.push(l),I(c,function(f){te(u.predecessor,f)<0&&u.predecessor.push(f);var d=n(o,f);te(d.successor,f)<0&&d.successor.push(l)})}),{graph:o,noEntryList:s}}function n(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return I(a,function(l){te(o,l)>=0&&s.push(l)}),s}}function th(r,t){return Zt(Zt({},r,!0),t,!0)}const ebt={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},rbt={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var Jx="ZH",hL="EN",Hd=hL,P1={},cL={},v$=le.domSupported?function(){var r=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Hd).toUpperCase();return r.indexOf(Jx)>-1?Jx:Hd}():Hd;function m$(r,t){r=r.toUpperCase(),cL[r]=new Oe(t),P1[r]=t}function nbt(r){if(yt(r)){var t=P1[r.toUpperCase()]||{};return r===Jx||r===hL?Pt(t):Zt(Pt(t),Pt(P1[Hd]),!1)}else return Zt(Pt(r),Pt(P1[Hd]),!1)}function eI(r){return cL[r]}function ibt(){return cL[Hd]}m$(hL,ebt);m$(Jx,rbt);var fL=1e3,dL=fL*60,rm=dL*60,Da=rm*24,_5=Da*365,yv={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},y_="{yyyy}-{MM}-{dd}",x5={year:"{yyyy}",month:"{yyyy}-{MM}",day:y_,hour:y_+" "+yv.hour,minute:y_+" "+yv.minute,second:y_+" "+yv.second,millisecond:yv.none},wE=["year","month","day","hour","minute","second","millisecond"],y$=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Ol(r,t){return r+="","0000".substr(0,t-r.length)+r}function $d(r){switch(r){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return r}}function abt(r){return r===$d(r)}function obt(r){switch(r){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Yw(r,t,e,n){var i=gs(r),a=i[gL(e)](),o=i[Yd(e)]()+1,s=Math.floor((o-1)/3)+1,l=i[Xw(e)](),u=i["get"+(e?"UTC":"")+"Day"](),h=i[Jm(e)](),c=(h-1)%12+1,f=i[Zw(e)](),d=i[jw(e)](),g=i[Kw(e)](),p=h>=12?"pm":"am",v=p.toUpperCase(),m=n instanceof Oe?n:eI(n||v$)||ibt(),y=m.getModel("time"),_=y.get("month"),x=y.get("monthAbbr"),w=y.get("dayOfWeek"),S=y.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,p+"").replace(/{A}/g,v+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Ol(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,_[o-1]).replace(/{MMM}/g,x[o-1]).replace(/{MM}/g,Ol(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,Ol(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,w[u]).replace(/{ee}/g,S[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Ol(h,2)).replace(/{H}/g,h+"").replace(/{hh}/g,Ol(c+"",2)).replace(/{h}/g,c+"").replace(/{mm}/g,Ol(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,Ol(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,Ol(g,3)).replace(/{S}/g,g+"")}function sbt(r,t,e,n,i){var a=null;if(yt(e))a=e;else if(At(e))a=e(r.value,t,{level:r.level});else{var o=tt({},yv);if(r.level>0)for(var s=0;s<wE.length;++s)o[wE[s]]="{primary|"+o[wE[s]]+"}";var l=e?e.inherit===!1?e:It(e,o):o,u=_$(r.value,i);if(l[u])a=l[u];else if(l.inherit){for(var h=y$.indexOf(u),s=h-1;s>=0;--s)if(l[u]){a=l[u];break}a=a||o.none}if(rt(a)){var c=r.level==null?0:r.level>=0?r.level:a.length+r.level;c=Math.min(c,a.length-1),a=a[c]}}return Yw(new Date(r.value),a,i,n)}function _$(r,t){var e=gs(r),n=e[Yd(t)]()+1,i=e[Xw(t)](),a=e[Jm(t)](),o=e[Zw(t)](),s=e[jw(t)](),l=e[Kw(t)](),u=l===0,h=u&&s===0,c=h&&o===0,f=c&&a===0,d=f&&i===1,g=d&&n===1;return g?"year":d?"month":f?"day":c?"hour":h?"minute":u?"second":"millisecond"}function S5(r,t,e){var n=be(r)?gs(r):r;switch(t=t||_$(r,e),t){case"year":return n[gL(e)]();case"half-year":return n[Yd(e)]()>=6?1:0;case"quarter":return Math.floor((n[Yd(e)]()+1)/4);case"month":return n[Yd(e)]();case"day":return n[Xw(e)]();case"half-day":return n[Jm(e)]()/24;case"hour":return n[Jm(e)]();case"minute":return n[Zw(e)]();case"second":return n[jw(e)]();case"millisecond":return n[Kw(e)]()}}function gL(r){return r?"getUTCFullYear":"getFullYear"}function Yd(r){return r?"getUTCMonth":"getMonth"}function Xw(r){return r?"getUTCDate":"getDate"}function Jm(r){return r?"getUTCHours":"getHours"}function Zw(r){return r?"getUTCMinutes":"getMinutes"}function jw(r){return r?"getUTCSeconds":"getSeconds"}function Kw(r){return r?"getUTCMilliseconds":"getMilliseconds"}function lbt(r){return r?"setUTCFullYear":"setFullYear"}function x$(r){return r?"setUTCMonth":"setMonth"}function S$(r){return r?"setUTCDate":"setDate"}function w$(r){return r?"setUTCHours":"setHours"}function T$(r){return r?"setUTCMinutes":"setMinutes"}function b$(r){return r?"setUTCSeconds":"setSeconds"}function E$(r){return r?"setUTCMilliseconds":"setMilliseconds"}function C$(r){if(!SH(r))return yt(r)?r:"-";var t=(r+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function M$(r,t){return r=(r||"").toLowerCase().replace(/-(.)/g,function(e,n){return n.toUpperCase()}),t&&r&&(r=r.charAt(0).toUpperCase()+r.slice(1)),r}var tp=VP;function rI(r,t,e){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(h){return h&&so(h)?h:"-"}function a(h){return!!(h!=null&&!isNaN(h)&&isFinite(h))}var o=t==="time",s=r instanceof Date;if(o||s){var l=o?gs(r):r;if(isNaN(+l)){if(s)return"-"}else return Yw(l,n,e)}if(t==="ordinal")return xA(r)?i(r):be(r)&&a(r)?r+"":"-";var u=ll(r);return a(u)?C$(u):xA(r)?i(r):typeof r=="boolean"?r+"":"-"}var w5=["a","b","c","d","e","f","g"],TE=function(r,t){return"{"+r+(t??"")+"}"};function A$(r,t,e){rt(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],a=0;a<i.length;a++){var o=w5[a];r=r.replace(TE(o),TE(o,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];r=r.replace(TE(w5[l],s),e?Di(u):u)}return r}function ubt(r,t,e){return I(t,function(n,i){r=r.replace("{"+i+"}",n)}),r}function hbt(r,t){var e=yt(r)?{color:r,extraCssText:t}:r||{},n=e.color,i=e.type;t=e.extraCssText;var a=e.renderMode||"html";if(!n)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Di(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Di(n)+";"+(t||"")+'"></span>';var o=e.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function Hc(r,t){return t=t||"transparent",yt(r)?r:Rt(r)&&r.colorStops&&(r.colorStops[0]||{}).color||t}function Qx(r,t){if(t==="_blank"||t==="blank"){var e=window.open();e.opener=null,e.location.href=r}else window.open(r,t)}var L1=I,I$=["left","right","top","bottom","width","height"],fc=[["width","left","right"],["height","top","bottom"]];function pL(r,t,e,n,i){var a=0,o=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var h=l.getBoundingRect(),c=t.childAt(u+1),f=c&&c.getBoundingRect(),d,g;if(r==="horizontal"){var p=h.width+(f?-f.x+h.x:0);d=a+p,d>n||l.newline?(a=0,d=p,o+=s+e,s=h.height):s=Math.max(s,h.height)}else{var v=h.height+(f?-f.y+h.y:0);g=o+v,g>i||l.newline?(a+=s+e,o=0,g=v,s=h.width):s=Math.max(s,h.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),r==="horizontal"?a=d+e:o=g+e)})}var Ac=pL;Wt(pL,"vertical");Wt(pL,"horizontal");function cbt(r,t,e){var n=t.width,i=t.height,a=ft(r.left,n),o=ft(r.top,i),s=ft(r.right,n),l=ft(r.bottom,i);return(isNaN(a)||isNaN(parseFloat(r.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(r.right)))&&(s=n),(isNaN(o)||isNaN(parseFloat(r.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(r.bottom)))&&(l=i),e=tp(e||0),{width:Math.max(s-a-e[1]-e[3],0),height:Math.max(l-o-e[0]-e[2],0)}}function qr(r,t,e){e=tp(e||0);var n=t.width,i=t.height,a=ft(r.left,n),o=ft(r.top,i),s=ft(r.right,n),l=ft(r.bottom,i),u=ft(r.width,n),h=ft(r.height,i),c=e[2]+e[0],f=e[1]+e[3],d=r.aspect;switch(isNaN(u)&&(u=n-s-f-a),isNaN(h)&&(h=i-l-c-o),d!=null&&(isNaN(u)&&isNaN(h)&&(d>n/i?u=n*.8:h=i*.8),isNaN(u)&&(u=d*h),isNaN(h)&&(h=u/d)),isNaN(a)&&(a=n-s-u-f),isNaN(o)&&(o=i-l-h-c),r.left||r.right){case"center":a=n/2-u/2-e[3];break;case"right":a=n-u-f;break}switch(r.top||r.bottom){case"middle":case"center":o=i/2-h/2-e[0];break;case"bottom":o=i-h-c;break}a=a||0,o=o||0,isNaN(u)&&(u=n-f-a-(s||0)),isNaN(h)&&(h=i-c-o-(l||0));var g=new jt(a+e[3],o+e[0],u,h);return g.margin=e,g}function qw(r,t,e,n,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||r,a.x=r.x,a.y=r.y,!o&&!s)return!1;var u;if(l==="raw")u=r.type==="group"?new jt(0,0,+t.width||0,+t.height||0):r.getBoundingRect();else if(u=r.getBoundingRect(),r.needLocalTransform()){var h=r.getLocalTransform();u=u.clone(),u.applyTransform(h)}var c=qr(It({width:u.width,height:u.height},t),e,n),f=o?c.x-u.x:0,d=s?c.y-u.y:0;return l==="raw"?(a.x=f,a.y=d):(a.x+=f,a.y+=d),a===r&&r.markRedraw(),!0}function fbt(r,t){return r[fc[t][0]]!=null||r[fc[t][1]]!=null&&r[fc[t][2]]!=null}function Qm(r){var t=r.layoutMode||r.constructor.layoutMode;return Rt(t)?t:t?{type:t}:null}function Vu(r,t,e){var n=e&&e.ignoreSize;!rt(n)&&(n=[n,n]);var i=o(fc[0],0),a=o(fc[1],1);u(fc[0],r,i),u(fc[1],r,a);function o(h,c){var f={},d=0,g={},p=0,v=2;if(L1(h,function(_){g[_]=r[_]}),L1(h,function(_){s(t,_)&&(f[_]=g[_]=t[_]),l(f,_)&&d++,l(g,_)&&p++}),n[c])return l(t,h[1])?g[h[2]]=null:l(t,h[2])&&(g[h[1]]=null),g;if(p===v||!d)return g;if(d>=v)return f;for(var m=0;m<h.length;m++){var y=h[m];if(!s(f,y)&&s(r,y)){f[y]=r[y];break}}return f}function s(h,c){return h.hasOwnProperty(c)}function l(h,c){return h[c]!=null&&h[c]!=="auto"}function u(h,c,f){L1(h,function(d){c[d]=f[d]})}}function ep(r){return R$({},r)}function R$(r,t){return t&&r&&L1(I$,function(e){t.hasOwnProperty(e)&&(r[e]=t[e])}),r}var dbt=me(),ue=function(r){U(t,r);function t(e,n,i){var a=r.call(this,e,n,i)||this;return a.uid=Qg("ec_cpt_model"),a}return t.prototype.init=function(e,n,i){this.mergeDefaultAndTheme(e,i)},t.prototype.mergeDefaultAndTheme=function(e,n){var i=Qm(this),a=i?ep(e):{},o=n.getTheme();Zt(e,o.get(this.mainType)),Zt(e,this.getDefaultOption()),i&&Vu(e,a,i)},t.prototype.mergeOption=function(e,n){Zt(this.option,e,!0);var i=Qm(this);i&&Vu(this.option,e,i)},t.prototype.optionUpdated=function(e,n){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!nwt(e))return e.defaultOption;var n=dbt(this);if(!n.defaultOption){for(var i=[],a=e;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=Zt(s,i[l],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(e,n){var i=e+"Index",a=e+"Id";return Yy(this.ecModel,e,{index:this.get(i,!0),id:this.get(a,!0)},n)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=function(){var e=t.prototype;e.type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0}(),t}(Oe);PH(ue,Oe);Nw(ue);QTt(ue);tbt(ue,gbt);function gbt(r){var t=[];return I(ue.getClassesByMainType(r),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=nt(t,function(e){return Qo(e).main}),r!=="dataset"&&te(t,"dataset")<=0&&t.unshift("dataset"),t}var P$="";typeof navigator<"u"&&(P$=navigator.platform||"");var Df="rgba(0, 0, 0, 0.2)";const pbt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Df,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Df,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Df,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Df,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Df,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Df,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:P$.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var L$=wt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),ja="original",ti="arrayRows",Ka="objectRows",ys="keyedColumns",Su="typedArray",D$="unknown",ss="column",rp="row",An={Must:1,Might:2,Not:3},O$=me();function vbt(r){O$(r).datasetMap=wt()}function N$(r,t,e){var n={},i=mL(t);if(!i||!r)return n;var a=[],o=[],s=t.ecModel,l=O$(s).datasetMap,u=i.uid+"_"+e.seriesLayoutBy,h,c;r=r.slice(),I(r,function(p,v){var m=Rt(p)?p:r[v]={name:p};m.type==="ordinal"&&h==null&&(h=v,c=g(m)),n[m.name]=[]});var f=l.get(u)||l.set(u,{categoryWayDim:c,valueWayDim:0});I(r,function(p,v){var m=p.name,y=g(p);if(h==null){var _=f.valueWayDim;d(n[m],_,y),d(o,_,y),f.valueWayDim+=y}else if(h===v)d(n[m],0,y),d(a,0,y);else{var _=f.categoryWayDim;d(n[m],_,y),d(o,_,y),f.categoryWayDim+=y}});function d(p,v,m){for(var y=0;y<m;y++)p.push(v+y)}function g(p){var v=p.dimsDef;return v?v.length:1}return a.length&&(n.itemName=a),o.length&&(n.seriesName=o),n}function vL(r,t,e){var n={},i=mL(r);if(!i)return n;var a=t.sourceFormat,o=t.dimensionsDefine,s;(a===Ka||a===ys)&&I(o,function(h,c){(Rt(h)?h.name:h)==="name"&&(s=c)});var l=function(){for(var h={},c={},f=[],d=0,g=Math.min(5,e);d<g;d++){var p=k$(t.data,a,t.seriesLayoutBy,o,t.startIndex,d);f.push(p);var v=p===An.Not;if(v&&h.v==null&&d!==s&&(h.v=d),(h.n==null||h.n===h.v||!v&&f[h.n]===An.Not)&&(h.n=d),m(h)&&f[h.n]!==An.Not)return h;v||(p===An.Might&&c.v==null&&d!==s&&(c.v=d),(c.n==null||c.n===c.v)&&(c.n=d))}function m(y){return y.v!=null&&y.n!=null}return m(h)?h:m(c)?c:null}();if(l){n.value=[l.v];var u=s??l.n;n.itemName=[u],n.seriesName=[u]}return n}function mL(r){var t=r.get("data",!0);if(!t)return Yy(r.ecModel,"dataset",{index:r.get("datasetIndex",!0),id:r.get("datasetId",!0)},Br).models[0]}function mbt(r){return!r.get("transform",!0)&&!r.get("fromTransformResult",!0)?[]:Yy(r.ecModel,"dataset",{index:r.get("fromDatasetIndex",!0),id:r.get("fromDatasetId",!0)},Br).models}function F$(r,t){return k$(r.data,r.sourceFormat,r.seriesLayoutBy,r.dimensionsDefine,r.startIndex,t)}function k$(r,t,e,n,i,a){var o,s=5;if(Wi(r))return An.Not;var l,u;if(n){var h=n[a];Rt(h)?(l=h.name,u=h.type):yt(h)&&(l=h)}if(u!=null)return u==="ordinal"?An.Must:An.Not;if(t===ti){var c=r;if(e===rp){for(var f=c[a],d=0;d<(f||[]).length&&d<s;d++)if((o=x(f[i+d]))!=null)return o}else for(var d=0;d<c.length&&d<s;d++){var g=c[i+d];if(g&&(o=x(g[a]))!=null)return o}}else if(t===Ka){var p=r;if(!l)return An.Not;for(var d=0;d<p.length&&d<s;d++){var v=p[d];if(v&&(o=x(v[l]))!=null)return o}}else if(t===ys){var m=r;if(!l)return An.Not;var f=m[l];if(!f||Wi(f))return An.Not;for(var d=0;d<f.length&&d<s;d++)if((o=x(f[d]))!=null)return o}else if(t===ja)for(var y=r,d=0;d<y.length&&d<s;d++){var v=y[d],_=Zg(v);if(!rt(_))return An.Not;if((o=x(_[a]))!=null)return o}function x(w){var S=yt(w);if(w!=null&&Number.isFinite(Number(w))&&w!=="")return S?An.Might:An.Not;if(S&&w!=="-")return An.Must}return An.Not}var nI=wt();function ybt(r,t){xi(nI.get(r)==null&&t),nI.set(r,t)}function _bt(r,t,e){var n=nI.get(t);if(!n)return e;var i=n(r);return i?e.concat(i):e}var T5=me(),xbt=me(),yL=function(){function r(){}return r.prototype.getColorFromPalette=function(t,e,n){var i=Ye(this.get("color",!0)),a=this.get("colorLayer",!0);return G$(this,T5,i,a,t,e,n)},r.prototype.clearColorPalette=function(){wbt(this,T5)},r}();function iI(r,t,e,n){var i=Ye(r.get(["aria","decal","decals"]));return G$(r,xbt,i,null,t,e,n)}function Sbt(r,t){for(var e=r.length,n=0;n<e;n++)if(r[n].length>t)return r[n];return r[e-1]}function G$(r,t,e,n,i,a,o){a=a||r;var s=t(a),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var h=o==null||!n?e:Sbt(n,o);if(h=h||e,!(!h||!h.length)){var c=h[l];return i&&(u[i]=c),s.paletteIdx=(l+1)%h.length,c}}function wbt(r,t){t(r).paletteIdx=0,t(r).paletteNameMap={}}var __,Op,b5,E5="\0_ec_inner",Tbt=1,_L=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e,n,i,a,o,s){a=a||{},this.option=null,this._theme=new Oe(a),this._locale=new Oe(o),this._optionManager=s},t.prototype.setOption=function(e,n,i){var a=A5(n);this._optionManager.setOption(e,i,a),this._resetOption(null,a)},t.prototype.resetOption=function(e,n){return this._resetOption(e,A5(n))},t.prototype._resetOption=function(e,n){var i=!1,a=this._optionManager;if(!e||e==="recreate"){var o=a.mountOption(e==="recreate");!this.option||e==="recreate"?b5(this,o):(this.restoreData(),this._mergeOption(o,n)),i=!0}if((e==="timeline"||e==="media")&&this.restoreData(),!e||e==="recreate"||e==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!e||e==="recreate"||e==="media"){var l=a.getMediaOption(this);l.length&&I(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,n){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=wt(),u=n&&n.replaceMergeMainTypeMap;vbt(this),I(e,function(c,f){c!=null&&(ue.hasClass(f)?f&&(s.push(f),l.set(f,!0)):i[f]=i[f]==null?Pt(c):Zt(i[f],c,!0))}),u&&u.each(function(c,f){ue.hasClass(f)&&!l.get(f)&&(s.push(f),l.set(f,!0))}),ue.topologicalTravel(s,ue.getAllClassMainTypes(),h,this);function h(c){var f=_bt(this,c,Ye(e[c])),d=a.get(c),g=d?u&&u.get(c)?"replaceMerge":"normalMerge":"replaceAll",p=CH(d,f,g);ZSt(p,c,ue),i[c]=null,a.set(c,null),o.set(c,0);var v=[],m=[],y=0,_;I(p,function(x,w){var S=x.existing,T=x.newOption;if(!T)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var b=c==="series",E=ue.getClass(c,x.keyInfo.subType,!b);if(!E)return;if(c==="tooltip"){if(_)return;_=!0}if(S&&S.constructor===E)S.name=x.keyInfo.name,S.mergeOption(T,this),S.optionUpdated(T,!1);else{var C=tt({componentIndex:w},x.keyInfo);S=new E(T,this,this,C),tt(S,C),x.brandNew&&(S.__requireNewView=!0),S.init(T,this,this),S.optionUpdated(null,!0)}}S?(v.push(S.option),m.push(S),y++):(v.push(void 0),m.push(void 0))},this),i[c]=v,a.set(c,m),o.set(c,y),c==="series"&&__(this)}this._seriesIndices||__(this)},t.prototype.getOption=function(){var e=Pt(this.option);return I(e,function(n,i){if(ue.hasClass(i)){for(var a=Ye(n),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!Zm(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,e[i]=a}}),delete e[E5],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,n){var i=this._componentsMap.get(e);if(i){var a=i[n||0];if(a)return a;if(n==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},t.prototype.queryComponents=function(e){var n=e.mainType;if(!n)return[];var i=e.index,a=e.id,o=e.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],I(Ye(i),function(u){s[u]&&l.push(s[u])})):a!=null?l=C5("id",a,s):o!=null?l=C5("name",o,s):l=ze(s,function(u){return!!u}),M5(l,e)},t.prototype.findComponents=function(e){var n=e.query,i=e.mainType,a=s(n),o=a?this.queryComponents(a):ze(this._componentsMap.get(i),function(u){return!!u});return l(M5(o,e));function s(u){var h=i+"Index",c=i+"Id",f=i+"Name";return u&&(u[h]!=null||u[c]!=null||u[f]!=null)?{mainType:i,index:u[h],id:u[c],name:u[f]}:null}function l(u){return e.filter?ze(u,e.filter):u}},t.prototype.eachComponent=function(e,n,i){var a=this._componentsMap;if(At(e)){var o=n,s=e;a.each(function(c,f){for(var d=0;c&&d<c.length;d++){var g=c[d];g&&s.call(o,f,g,g.componentIndex)}})}else for(var l=yt(e)?a.get(e):Rt(e)?this.findComponents(e):null,u=0;l&&u<l.length;u++){var h=l[u];h&&n.call(i,h,h.componentIndex)}},t.prototype.getSeriesByName=function(e){var n=Zr(e,null);return ze(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return ze(this._componentsMap.get("series"),function(n){return!!n&&n.subType===e})},t.prototype.getSeries=function(){return ze(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,n){Op(this),I(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];e.call(n,a,i)},this)},t.prototype.eachRawSeries=function(e,n){I(this._componentsMap.get("series"),function(i){i&&e.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(e,n,i){Op(this),I(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===e&&n.call(i,o,a)},this)},t.prototype.eachRawSeriesByType=function(e,n,i){return I(this.getSeriesByType(e),n,i)},t.prototype.isSeriesFiltered=function(e){return Op(this),this._seriesIndicesMap.get(e.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,n){Op(this);var i=[];I(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];e.call(n,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=wt(i)},t.prototype.restoreData=function(e){__(this);var n=this._componentsMap,i=[];n.each(function(a,o){ue.hasClass(o)&&i.push(o)}),ue.topologicalTravel(i,ue.getAllClassMainTypes(),function(a){I(n.get(a),function(o){o&&(a!=="series"||!bbt(o,e))&&o.restoreData()})})},t.internalField=function(){__=function(e){var n=e._seriesIndices=[];I(e._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),e._seriesIndicesMap=wt(n)},Op=function(e){},b5=function(e,n){e.option={},e.option[E5]=Tbt,e._componentsMap=wt({series:[]}),e._componentsCount=wt();var i=n.aria;Rt(i)&&i.enabled==null&&(i.enabled=!0),Ebt(n,e._theme.option),Zt(n,pbt,!1),e._mergeOption(n,null)}}(),t}(Oe);function bbt(r,t){if(t){var e=t.seriesIndex,n=t.seriesId,i=t.seriesName;return e!=null&&r.componentIndex!==e||n!=null&&r.id!==n||i!=null&&r.name!==i}}function Ebt(r,t){var e=r.color&&!r.colorLayer;I(t,function(n,i){i==="colorLayer"&&e||ue.hasClass(i)||(typeof n=="object"?r[i]=r[i]?Zt(r[i],n,!1):Pt(n):r[i]==null&&(r[i]=n))})}function C5(r,t,e){if(rt(t)){var n=wt();return I(t,function(a){if(a!=null){var o=Zr(a,null);o!=null&&n.set(a,!0)}}),ze(e,function(a){return a&&n.get(a[r])})}else{var i=Zr(t,null);return ze(e,function(a){return a&&i!=null&&a[r]===i})}}function M5(r,t){return t.hasOwnProperty("subType")?ze(r,function(e){return e&&e.subType===t.subType}):r}function A5(r){var t=wt();return r&&I(Ye(r.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}Hr(_L,yL);var Cbt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],B$=function(){function r(t){I(Cbt,function(e){this[e]=_t(t[e],t)},this)}return r}(),bE={},Qy=function(){function r(){this._coordinateSystems=[]}return r.prototype.create=function(t,e){var n=[];I(bE,function(i,a){var o=i.create(t,e);n=n.concat(o||[])}),this._coordinateSystems=n},r.prototype.update=function(t,e){I(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},r.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},r.register=function(t,e){bE[t]=e},r.get=function(t){return bE[t]},r}(),Mbt=/^(min|max)?(.+)$/,Abt=function(){function r(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return r.prototype.setOption=function(t,e,n){t&&(I(Ye(t.series),function(o){o&&o.data&&Wi(o.data)&&Fx(o.data)}),I(Ye(t.dataset),function(o){o&&o.source&&Wi(o.source)&&Fx(o.source)})),t=Pt(t);var i=this._optionBackup,a=Ibt(t,e,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},r.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],Pt(t?e.baseOption:this._newBaseOption)},r.prototype.getTimelineOption=function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=Pt(n[i.getCurrentIndex()]))}return e},r.prototype.getMediaOption=function(t){var e=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,u=i.length;l<u;l++)Rbt(i[l].query,e,n)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!Lbt(o,this._currentMediaIndices)&&(s=nt(o,function(h){return Pt(h===-1?a.option:i[h].option)})),this._currentMediaIndices=o,s},r}();function Ibt(r,t,e){var n=[],i,a,o=r.baseOption,s=r.timeline,l=r.options,u=r.media,h=!!r.media,c=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((c||h)&&(r.options=r.media=null),a=r),h&&rt(u)&&I(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),f(a),I(l,function(d){return f(d)}),I(n,function(d){return f(d.option)});function f(d){I(t,function(g){g(d,e)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function Rbt(r,t,e){var n={width:t,height:e,aspectratio:t/e},i=!0;return I(r,function(a,o){var s=o.match(Mbt);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();Pbt(n[u],a,l)||(i=!1)}}),i}function Pbt(r,t,e){return e==="min"?r>=t:e==="max"?r<=t:r===t}function Lbt(r,t){return r.join(",")===t.join(",")}var Ja=I,ty=Rt,I5=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function EE(r){var t=r&&r.itemStyle;if(t)for(var e=0,n=I5.length;e<n;e++){var i=I5[e],a=t.normal,o=t.emphasis;a&&a[i]&&(r[i]=r[i]||{},r[i].normal?Zt(r[i].normal,a[i]):r[i].normal=a[i],a[i]=null),o&&o[i]&&(r[i]=r[i]||{},r[i].emphasis?Zt(r[i].emphasis,o[i]):r[i].emphasis=o[i],o[i]=null)}}function Un(r,t,e){if(r&&r[t]&&(r[t].normal||r[t].emphasis)){var n=r[t].normal,i=r[t].emphasis;n&&(e?(r[t].normal=r[t].emphasis=null,It(r[t],n)):r[t]=n),i&&(r.emphasis=r.emphasis||{},r.emphasis[t]=i,i.focus&&(r.emphasis.focus=i.focus),i.blurScope&&(r.emphasis.blurScope=i.blurScope))}}function _v(r){Un(r,"itemStyle"),Un(r,"lineStyle"),Un(r,"areaStyle"),Un(r,"label"),Un(r,"labelLine"),Un(r,"upperLabel"),Un(r,"edgeLabel")}function Or(r,t){var e=ty(r)&&r[t],n=ty(e)&&e.textStyle;if(n)for(var i=0,a=N3.length;i<a;i++){var o=N3[i];n.hasOwnProperty(o)&&(e[o]=n[o])}}function Ca(r){r&&(_v(r),Or(r,"label"),r.emphasis&&Or(r.emphasis,"label"))}function Dbt(r){if(ty(r)){EE(r),_v(r),Or(r,"label"),Or(r,"upperLabel"),Or(r,"edgeLabel"),r.emphasis&&(Or(r.emphasis,"label"),Or(r.emphasis,"upperLabel"),Or(r.emphasis,"edgeLabel"));var t=r.markPoint;t&&(EE(t),Ca(t));var e=r.markLine;e&&(EE(e),Ca(e));var n=r.markArea;n&&Ca(n);var i=r.data;if(r.type==="graph"){i=i||r.nodes;var a=r.links||r.edges;if(a&&!Wi(a))for(var o=0;o<a.length;o++)Ca(a[o]);I(r.categories,function(u){_v(u)})}if(i&&!Wi(i))for(var o=0;o<i.length;o++)Ca(i[o]);if(t=r.markPoint,t&&t.data)for(var s=t.data,o=0;o<s.length;o++)Ca(s[o]);if(e=r.markLine,e&&e.data)for(var l=e.data,o=0;o<l.length;o++)rt(l[o])?(Ca(l[o][0]),Ca(l[o][1])):Ca(l[o]);r.type==="gauge"?(Or(r,"axisLabel"),Or(r,"title"),Or(r,"detail")):r.type==="treemap"?(Un(r.breadcrumb,"itemStyle"),I(r.levels,function(u){_v(u)})):r.type==="tree"&&_v(r.leaves)}}function Is(r){return rt(r)?r:r?[r]:[]}function R5(r){return(rt(r)?r[0]:r)||{}}function Obt(r,t){Ja(Is(r.series),function(n){ty(n)&&Dbt(n)});var e=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&e.push("valueAxis","categoryAxis","logAxis","timeAxis"),Ja(e,function(n){Ja(Is(r[n]),function(i){i&&(Or(i,"axisLabel"),Or(i.axisPointer,"label"))})}),Ja(Is(r.parallel),function(n){var i=n&&n.parallelAxisDefault;Or(i,"axisLabel"),Or(i&&i.axisPointer,"label")}),Ja(Is(r.calendar),function(n){Un(n,"itemStyle"),Or(n,"dayLabel"),Or(n,"monthLabel"),Or(n,"yearLabel")}),Ja(Is(r.radar),function(n){Or(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),Ja(Is(r.geo),function(n){ty(n)&&(Ca(n),Ja(Is(n.regions),function(i){Ca(i)}))}),Ja(Is(r.timeline),function(n){Ca(n),Un(n,"label"),Un(n,"itemStyle"),Un(n,"controlStyle",!0);var i=n.data;rt(i)&&I(i,function(a){Rt(a)&&(Un(a,"label"),Un(a,"itemStyle"))})}),Ja(Is(r.toolbox),function(n){Un(n,"iconStyle"),Ja(n.feature,function(i){Un(i,"iconStyle")})}),Or(R5(r.axisPointer),"label"),Or(R5(r.tooltip).axisPointer,"label")}function Nbt(r,t){for(var e=t.split(","),n=r,i=0;i<e.length&&(n=n&&n[e[i]],n!=null);i++);return n}function Fbt(r,t,e,n){for(var i=t.split(","),a=r,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];a[i[s]]==null&&(a[i[s]]=e)}function P5(r){r&&I(kbt,function(t){t[0]in r&&!(t[1]in r)&&(r[t[1]]=r[t[0]])})}var kbt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Gbt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],CE=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Np(r){var t=r&&r.itemStyle;if(t)for(var e=0;e<CE.length;e++){var n=CE[e][1],i=CE[e][0];t[n]!=null&&(t[i]=t[n])}}function L5(r){r&&r.alignTo==="edge"&&r.margin!=null&&r.edgeDistance==null&&(r.edgeDistance=r.margin)}function D5(r){r&&r.downplay&&!r.blur&&(r.blur=r.downplay)}function Bbt(r){r&&r.focusNodeAdjacency!=null&&(r.emphasis=r.emphasis||{},r.emphasis.focus==null&&(r.emphasis.focus="adjacency"))}function z$(r,t){if(r)for(var e=0;e<r.length;e++)t(r[e]),r[e]&&z$(r[e].children,t)}function V$(r,t){Obt(r,t),r.series=Ye(r.series),I(r.series,function(e){if(Rt(e)){var n=e.type;if(n==="line")e.clipOverflow!=null&&(e.clip=e.clipOverflow);else if(n==="pie"||n==="gauge"){e.clockWise!=null&&(e.clockwise=e.clockWise),L5(e.label);var i=e.data;if(i&&!Wi(i))for(var a=0;a<i.length;a++)L5(i[a]);e.hoverOffset!=null&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if(n==="gauge"){var o=Nbt(e,"pointer.color");o!=null&&Fbt(e,"itemStyle.color",o)}else if(n==="bar"){Np(e),Np(e.backgroundStyle),Np(e.emphasis);var i=e.data;if(i&&!Wi(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(Np(i[a]),Np(i[a]&&i[a].emphasis))}else if(n==="sunburst"){var s=e.highlightPolicy;s&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=s)),D5(e),z$(e.data,D5)}else n==="graph"||n==="sankey"?Bbt(e):n==="map"&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&It(e,e.mapLocation));e.hoverAnimation!=null&&(e.emphasis=e.emphasis||{},e.emphasis&&e.emphasis.scale==null&&(e.emphasis.scale=e.hoverAnimation)),P5(e)}}),r.dataRange&&(r.visualMap=r.dataRange),I(Gbt,function(e){var n=r[e];n&&(rt(n)||(n=[n]),I(n,function(i){P5(i)}))})}function zbt(r){var t=wt();r.eachSeries(function(e){var n=e.get("stack");if(n){var i=t.get(n)||t.set(n,[]),a=e.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:e};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),t.each(Vbt)}function Vbt(r){I(r,function(t,e){var n=[],i=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],o=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(u,h,c){var f=o.get(t.stackedDimension,c);if(isNaN(f))return i;var d,g;s?g=o.getRawIndex(c):d=o.get(t.stackedByDimension,c);for(var p=NaN,v=e-1;v>=0;v--){var m=r[v];if(s||(g=m.data.rawIndexOf(m.stackedByDimension,d)),g>=0){var y=m.data.getByRawIndex(m.stackResultDimension,g);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&f>=0&&y>0||l==="samesign"&&f<=0&&y<0){f=kSt(f,y),p=y;break}}}return n[0]=f,n[1]=p,n})})}var Jw=function(){function r(t){this.data=t.data||(t.sourceFormat===ys?{}:[]),this.sourceFormat=t.sourceFormat||D$,this.seriesLayoutBy=t.seriesLayoutBy||ss,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var n=0;n<e.length;n++){var i=e[n];i.type==null&&F$(this,n)===An.Must&&(i.type="ordinal")}}return r}();function xL(r){return r instanceof Jw}function aI(r,t,e){e=e||U$(r);var n=t.seriesLayoutBy,i=Wbt(r,e,n,t.sourceHeader,t.dimensions),a=new Jw({data:r,sourceFormat:e,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Pt(t)});return a}function SL(r){return new Jw({data:r,sourceFormat:Wi(r)?Su:ja})}function Ubt(r){return new Jw({data:r.data,sourceFormat:r.sourceFormat,seriesLayoutBy:r.seriesLayoutBy,dimensionsDefine:Pt(r.dimensionsDefine),startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount})}function U$(r){var t=D$;if(Wi(r))t=Su;else if(rt(r)){r.length===0&&(t=ti);for(var e=0,n=r.length;e<n;e++){var i=r[e];if(i!=null){if(rt(i)||Wi(i)){t=ti;break}else if(Rt(i)){t=Ka;break}}}}else if(Rt(r)){for(var a in r)if(xt(r,a)&&Qn(r[a])){t=ys;break}}return t}function Wbt(r,t,e,n,i){var a,o;if(!r)return{dimensionsDefine:O5(i),startIndex:o,dimensionsDetectedCount:a};if(t===ti){var s=r;n==="auto"||n==null?N5(function(u){u!=null&&u!=="-"&&(yt(u)?o==null&&(o=1):o=0)},e,s,10):o=be(n)?n:n?1:0,!i&&o===1&&(i=[],N5(function(u,h){i[h]=u!=null?u+"":""},e,s,1/0)),a=i?i.length:e===rp?s.length:s[0]?s[0].length:null}else if(t===Ka)i||(i=Hbt(r));else if(t===ys)i||(i=[],I(r,function(u,h){i.push(h)}));else if(t===ja){var l=Zg(r[0]);a=rt(l)&&l.length||1}return{startIndex:o,dimensionsDefine:O5(i),dimensionsDetectedCount:a}}function Hbt(r){for(var t=0,e;t<r.length&&!(e=r[t++]););if(e)return he(e)}function O5(r){if(r){var t=wt();return nt(r,function(e,n){e=Rt(e)?e:{name:e};var i={name:e.name,displayName:e.displayName,type:e.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=t.get(i.name);return a?i.name+="-"+a.count++:t.set(i.name,{count:1}),i})}}function N5(r,t,e,n){if(t===rp)for(var i=0;i<e.length&&i<n;i++)r(e[i]?e[i][0]:null,i);else for(var a=e[0]||[],i=0;i<a.length&&i<n;i++)r(a[i],i)}function W$(r){var t=r.sourceFormat;return t===Ka||t===ys}var Ch,Mh,Ah,F5,k5,H$=function(){function r(t,e){var n=xL(t)?t:SL(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Su&&(this._offset=0,this._dimSize=e,this._data=i),k5(this,i,n)}return r.prototype.getSource=function(){return this._source},r.prototype.count=function(){return 0},r.prototype.getItem=function(t,e){},r.prototype.appendData=function(t){},r.prototype.clean=function(){},r.protoInitialize=function(){var t=r.prototype;t.pure=!1,t.persistent=!0}(),r.internalField=function(){var t;k5=function(o,s,l){var u=l.sourceFormat,h=l.seriesLayoutBy,c=l.startIndex,f=l.dimensionsDefine,d=F5[wL(u,h)];if(tt(o,d),u===Su)o.getItem=e,o.count=i,o.fillStorage=n;else{var g=$$(u,h);o.getItem=_t(g,null,s,c,f);var p=Y$(u,h);o.count=_t(p,null,s,c,f)}};var e=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,h=u*o,c=0;c<u;c++)s[c]=l[h+c];return s},n=function(o,s,l,u){for(var h=this._data,c=this._dimSize,f=0;f<c;f++){for(var d=u[f],g=d[0]==null?1/0:d[0],p=d[1]==null?-1/0:d[1],v=s-o,m=l[f],y=0;y<v;y++){var _=h[y*c+f];m[o+y]=_,_<g&&(g=_),_>p&&(p=_)}d[0]=g,d[1]=p}},i=function(){return this._data?this._data.length/this._dimSize:0};F5=(t={},t[ti+"_"+ss]={pure:!0,appendData:a},t[ti+"_"+rp]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Ka]={pure:!0,appendData:a},t[ys]={pure:!0,appendData:function(o){var s=this._data;I(o,function(l,u){for(var h=s[u]||(s[u]=[]),c=0;c<(l||[]).length;c++)h.push(l[c])})}},t[ja]={appendData:a},t[Su]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),r}(),G5=function(r,t,e,n){return r[n]},$bt=(Ch={},Ch[ti+"_"+ss]=function(r,t,e,n){return r[n+t]},Ch[ti+"_"+rp]=function(r,t,e,n,i){n+=t;for(var a=i||[],o=r,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[n]:null}return a},Ch[Ka]=G5,Ch[ys]=function(r,t,e,n,i){for(var a=i||[],o=0;o<e.length;o++){var s=e[o].name,l=r[s];a[o]=l?l[n]:null}return a},Ch[ja]=G5,Ch);function $$(r,t){var e=$bt[wL(r,t)];return e}var B5=function(r,t,e){return r.length},Ybt=(Mh={},Mh[ti+"_"+ss]=function(r,t,e){return Math.max(0,r.length-t)},Mh[ti+"_"+rp]=function(r,t,e){var n=r[0];return n?Math.max(0,n.length-t):0},Mh[Ka]=B5,Mh[ys]=function(r,t,e){var n=e[0].name,i=r[n];return i?i.length:0},Mh[ja]=B5,Mh);function Y$(r,t){var e=Ybt[wL(r,t)];return e}var ME=function(r,t,e){return r[t]},Xbt=(Ah={},Ah[ti]=ME,Ah[Ka]=function(r,t,e){return r[e]},Ah[ys]=ME,Ah[ja]=function(r,t,e){var n=Zg(r);return n instanceof Array?n[t]:n},Ah[Su]=ME,Ah);function X$(r){var t=Xbt[r];return t}function wL(r,t){return r===ti?r+"_"+t:r}function mg(r,t,e){if(r){var n=r.getRawDataItem(t);if(n!=null){var i=r.getStore(),a=i.getSource().sourceFormat;if(e!=null){var o=r.getDimensionIndex(e),s=i.getDimensionProperty(o);return X$(a)(n,o,s)}else{var l=n;return a===ja&&(l=Zg(n)),l}}}}var Zbt=/\{@(.+?)\}/g,Qw=function(){function r(){}return r.prototype.getDataParams=function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),a=n.getRawIndex(t),o=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],h=l&&l.stroke,c=this.mainType,f=c==="series",d=n.userOutput&&n.userOutput.get();return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:o,dataIndex:a,data:s,dataType:e,value:i,color:u,borderColor:h,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},r.prototype.getFormattedLabel=function(t,e,n,i,a,o){e=e||"normal";var s=this.getData(n),l=this.getDataParams(t,n);if(o&&(l.value=o.interpolatedValue),i!=null&&rt(l.value)&&(l.value=l.value[i]),!a){var u=s.getItemModel(t);a=u.get(e==="normal"?["label","formatter"]:[e,"label","formatter"])}if(At(a))return l.status=e,l.dimensionIndex=i,a(l);if(yt(a)){var h=A$(a,l);return h.replace(Zbt,function(c,f){var d=f.length,g=f;g.charAt(0)==="["&&g.charAt(d-1)==="]"&&(g=+g.slice(1,d-1));var p=mg(s,t,g);if(o&&rt(o.interpolatedValue)){var v=s.getDimensionIndex(g);v>=0&&(p=o.interpolatedValue[v])}return p!=null?p+"":""})}},r.prototype.getRawValue=function(t,e){return mg(this.getData(e),t)},r.prototype.formatTooltip=function(t,e,n){},r}();function z5(r){var t,e;return Rt(r)?r.type&&(e=r):t=r,{text:t,frag:e}}function nm(r){return new jbt(r)}var jbt=function(){function r(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return r.prototype.perform=function(t){var e=this._upstream,n=t&&t.skip;if(this._dirty&&e){var i=this.context;i.data=i.outputData=e.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!n&&(a=this._plan(this.context));var o=h(this._modBy),s=this._modDataCount||0,l=h(t&&t.modBy),u=t&&t.modDataCount||0;(o!==l||s!==u)&&(a="reset");function h(y){return!(y>=1)&&(y=1),y}var c;(this._dirty||a==="reset")&&(this._dirty=!1,c=this._doReset(n)),this._modBy=l,this._modDataCount=u;var f=t&&t.step;if(e?this._dueEnd=e._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,g=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!n&&(c||d<g)){var p=this._progress;if(rt(p))for(var v=0;v<p.length;v++)this._doProgress(p[v],d,g,l,u);else this._doProgress(p,d,g,l,u)}this._dueIndex=g;var m=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},r.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},r.prototype._doProgress=function(t,e,n,i,a){V5.reset(e,n,i,a),this._callingProgress=t,this._callingProgress({start:e,end:n,count:n-e,next:V5.next},this.context)},r.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var e,n;!t&&this._reset&&(e=this._reset(this.context),e&&e.progress&&(n=e.forceFirstProgress,e=e.progress),rt(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},r.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},r.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},r.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},r.prototype.getUpstream=function(){return this._upstream},r.prototype.getDownstream=function(){return this._downstream},r.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},r}(),V5=function(){var r,t,e,n,i,a={reset:function(l,u,h,c){t=l,r=u,e=h,n=c,i=Math.ceil(n/e),a.next=e>1&&n>0?s:o}};return a;function o(){return t<r?t++:null}function s(){var l=t%i*e+Math.ceil(t/i),u=t>=r?null:l<n?l:t;return t++,u}}();function wu(r,t){var e=t&&t.type;return e==="ordinal"?r:(e==="time"&&!be(r)&&r!=null&&r!=="-"&&(r=+gs(r)),r==null||r===""?NaN:Number(r))}var Kbt=wt({number:function(r){return parseFloat(r)},time:function(r){return+gs(r)},trim:function(r){return yt(r)?so(r):r}});function Z$(r){return Kbt.get(r)}var j$={lt:function(r,t){return r<t},lte:function(r,t){return r<=t},gt:function(r,t){return r>t},gte:function(r,t){return r>=t}},qbt=function(){function r(t,e){if(!be(e)){var n="";Pe(n)}this._opFn=j$[t],this._rvalFloat=ll(e)}return r.prototype.evaluate=function(t){return be(t)?this._opFn(t,this._rvalFloat):this._opFn(ll(t),this._rvalFloat)},r}(),K$=function(){function r(t,e){var n=t==="desc";this._resultLT=n?1:-1,e==null&&(e=n?"min":"max"),this._incomparable=e==="min"?-1/0:1/0}return r.prototype.evaluate=function(t,e){var n=be(t)?t:ll(t),i=be(e)?e:ll(e),a=isNaN(n),o=isNaN(i);if(a&&(n=this._incomparable),o&&(i=this._incomparable),a&&o){var s=yt(t),l=yt(e);s&&(n=l?t:0),l&&(i=s?e:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},r}(),Jbt=function(){function r(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=ll(e)}return r.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(e=ll(t)===this._rvalFloat)}return this._isEQ?e:!e},r}();function Qbt(r,t){return r==="eq"||r==="ne"?new Jbt(r==="eq",t):xt(j$,r)?new qbt(r,t):null}var tEt=function(){function r(){}return r.prototype.getRawData=function(){throw new Error("not supported")},r.prototype.getRawDataItem=function(t){throw new Error("not supported")},r.prototype.cloneRawData=function(){},r.prototype.getDimensionInfo=function(t){},r.prototype.cloneAllDimensionInfo=function(){},r.prototype.count=function(){},r.prototype.retrieveValue=function(t,e){},r.prototype.retrieveValueFromItem=function(t,e){},r.prototype.convertValue=function(t,e){return wu(t,e)},r}();function eEt(r,t){var e=new tEt,n=r.data,i=e.sourceFormat=r.sourceFormat,a=r.startIndex,o="";r.seriesLayoutBy!==ss&&Pe(o);var s=[],l={},u=r.dimensionsDefine;if(u)I(u,function(p,v){var m=p.name,y={index:v,name:m,displayName:p.displayName};if(s.push(y),m!=null){var _="";xt(l,m)&&Pe(_),l[m]=y}});else for(var h=0;h<r.dimensionsDetectedCount;h++)s.push({index:h});var c=$$(i,ss);t.__isBuiltIn&&(e.getRawDataItem=function(p){return c(n,a,s,p)},e.getRawData=_t(rEt,null,r)),e.cloneRawData=_t(nEt,null,r);var f=Y$(i,ss);e.count=_t(f,null,n,a,s);var d=X$(i);e.retrieveValue=function(p,v){var m=c(n,a,s,p);return g(m,v)};var g=e.retrieveValueFromItem=function(p,v){if(p!=null){var m=s[v];if(m)return d(p,v,m.name)}};return e.getDimensionInfo=_t(iEt,null,s,l),e.cloneAllDimensionInfo=_t(aEt,null,s),e}function rEt(r){var t=r.sourceFormat;if(!TL(t)){var e="";Pe(e)}return r.data}function nEt(r){var t=r.sourceFormat,e=r.data;if(!TL(t)){var n="";Pe(n)}if(t===ti){for(var i=[],a=0,o=e.length;a<o;a++)i.push(e[a].slice());return i}else if(t===Ka){for(var i=[],a=0,o=e.length;a<o;a++)i.push(tt({},e[a]));return i}}function iEt(r,t,e){if(e!=null){if(be(e)||!isNaN(e)&&!xt(t,e))return r[e];if(xt(t,e))return t[e]}}function aEt(r){return Pt(r)}var q$=wt();function oEt(r){r=Pt(r);var t=r.type,e="";t||Pe(e);var n=t.split(":");n.length!==2&&Pe(e);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),r.__isBuiltIn=i,q$.set(t,r)}function sEt(r,t,e){var n=Ye(r),i=n.length,a="";i||Pe(a);for(var o=0,s=i;o<s;o++){var l=n[o];t=lEt(l,t),o!==s-1&&(t.length=Math.max(t.length,1))}return t}function lEt(r,t,e,n){var i="";t.length||Pe(i),Rt(r)||Pe(i);var a=r.type,o=q$.get(a);o||Pe(i);var s=nt(t,function(u){return eEt(u,o)}),l=Ye(o.transform({upstream:s[0],upstreamList:s,config:Pt(r.config)}));return nt(l,function(u,h){var c="";Rt(u)||Pe(c),u.data||Pe(c);var f=U$(u.data);TL(f)||Pe(c);var d,g=t[0];if(g&&h===0&&!u.dimensions){var p=g.startIndex;p&&(u.data=g.data.slice(0,p).concat(u.data)),d={seriesLayoutBy:ss,sourceHeader:p,dimensions:g.metaRawOption.dimensions}}else d={seriesLayoutBy:ss,sourceHeader:0,dimensions:u.dimensions};return aI(u.data,d,null)})}function TL(r){return r===ti||r===Ka}var tT="undefined",uEt=typeof Uint32Array===tT?Array:Uint32Array,hEt=typeof Uint16Array===tT?Array:Uint16Array,J$=typeof Int32Array===tT?Array:Int32Array,U5=typeof Float64Array===tT?Array:Float64Array,Q$={float:U5,int:J$,ordinal:Array,number:Array,time:U5},AE;function Fp(r){return r>65535?uEt:hEt}function Of(){return[1/0,-1/0]}function cEt(r){var t=r.constructor;return t===Array?r.slice():new t(r)}function W5(r,t,e,n,i){var a=Q$[e||"float"];if(i){var o=r[t],s=o&&o.length;if(s!==n){for(var l=new a(n),u=0;u<s;u++)l[u]=o[u];r[t]=l}}else r[t]=new a(n)}var oI=function(){function r(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=wt()}return r.prototype.initData=function(t,e,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),a=this.defaultDimValueGetter=AE[i.sourceFormat];this._dimValueGetter=n||a,this._rawExtent=[],W$(i),this._dimensions=nt(e,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,t.count())},r.prototype.getProvider=function(){return this._provider},r.prototype.getSource=function(){return this._provider.getSource()},r.prototype.ensureCalculationDimension=function(t,e){var n=this._calcDimNameToIdx,i=this._dimensions,a=n.get(t);if(a!=null){if(i[a].type===e)return a}else a=i.length;return i[a]={type:e},n.set(t,a),this._chunks[a]=new Q$[e||"float"](this._rawCount),this._rawExtent[a]=Of(),a},r.prototype.collectOrdinalMeta=function(t,e){var n=this._chunks[t],i=this._dimensions[t],a=this._rawExtent,o=i.ordinalOffset||0,s=n.length;o===0&&(a[t]=Of());for(var l=a[t],u=o;u<s;u++){var h=n[u]=e.parseAndCollect(n[u]);isNaN(h)||(l[0]=Math.min(h,l[0]),l[1]=Math.max(h,l[1]))}i.ordinalMeta=e,i.ordinalOffset=s,i.type="ordinal"},r.prototype.getOrdinalMeta=function(t){var e=this._dimensions[t],n=e.ordinalMeta;return n},r.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},r.prototype.appendData=function(t){var e=this._provider,n=this.count();e.appendData(t);var i=e.count();return e.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},r.prototype.appendValues=function(t,e){for(var n=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(t.length,e||0),u=0;u<a;u++){var h=i[u];W5(n,u,h.type,l,!0)}for(var c=[],f=s;f<l;f++)for(var d=f-s,g=0;g<a;g++){var h=i[g],p=AE.arrayRows.call(this,t[d]||c,h.property,d,g);n[g][f]=p;var v=o[g];p<v[0]&&(v[0]=p),p>v[1]&&(v[1]=p)}return this._rawCount=this._count=l,{start:s,end:l}},r.prototype._initDataFromProvider=function(t,e,n){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=nt(o,function(y){return y.property}),h=0;h<s;h++){var c=o[h];l[h]||(l[h]=Of()),W5(a,h,c.type,e,n)}if(i.fillStorage)i.fillStorage(t,e,a,l);else for(var f=[],d=t;d<e;d++){f=i.getItem(d,f);for(var g=0;g<s;g++){var p=a[g],v=this._dimValueGetter(f,u[g],d,g);p[d]=v;var m=l[g];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=e,this._extent=[]},r.prototype.count=function(){return this._count},r.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(e)]:NaN},r.prototype.getValues=function(t,e){var n=[],i=[];if(e==null){e=t,t=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=t;for(var a=0,o=i.length;a<o;a++)n.push(this.get(i[a],e));return n},r.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._chunks[t];return n?n[e]:NaN},r.prototype.getSum=function(t){var e=this._chunks[t],n=0;if(e)for(var i=0,a=this.count();i<a;i++){var o=this.get(t,i);isNaN(o)||(n+=o)}return n},r.prototype.getMedian=function(t){var e=[];this.each([t],function(a){isNaN(a)||e.push(a)});var n=e.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},r.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(e[o]<t)i=o+1;else if(e[o]>t)a=o-1;else return o}return-1},r.prototype.indicesOfNearest=function(t,e,n){var i=this._chunks,a=i[t],o=[];if(!a)return o;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,h=0,c=this.count();h<c;h++){var f=this.getRawIndex(h),d=e-a[f],g=Math.abs(d);g<=n&&((g<s||g===s&&d>=0&&l<0)&&(s=g,l=d,u=0),d===l&&(o[u++]=h))}return o.length=u,o},r.prototype.getIndices=function(){var t,e=this._indices;if(e){var n=e.constructor,i=this._count;if(n===Array){t=new n(i);for(var a=0;a<i;a++)t[a]=e[a]}else t=new n(e.buffer,0,i)}else{var n=Fp(this._rawCount);t=new n(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},r.prototype.filter=function(t,e){if(!this._count)return this;for(var n=this.clone(),i=n.count(),a=Fp(n._rawCount),o=new a(i),s=[],l=t.length,u=0,h=t[0],c=n._chunks,f=0;f<i;f++){var d=void 0,g=n.getRawIndex(f);if(l===0)d=e(f);else if(l===1){var p=c[h][g];d=e(p,f)}else{for(var v=0;v<l;v++)s[v]=c[t[v]][g];s[v]=f,d=e.apply(null,s)}d&&(o[u++]=g)}return u<i&&(n._indices=o),n._count=u,n._extent=[],n._updateGetRawIdx(),n},r.prototype.selectRange=function(t){var e=this.clone(),n=e._count;if(!n)return this;var i=he(t),a=i.length;if(!a)return this;var o=e.count(),s=Fp(e._rawCount),l=new s(o),u=0,h=i[0],c=t[h][0],f=t[h][1],d=e._chunks,g=!1;if(!e._indices){var p=0;if(a===1){for(var v=d[i[0]],m=0;m<n;m++){var y=v[m];(y>=c&&y<=f||isNaN(y))&&(l[u++]=p),p++}g=!0}else if(a===2){for(var v=d[i[0]],_=d[i[1]],x=t[i[1]][0],w=t[i[1]][1],m=0;m<n;m++){var y=v[m],S=_[m];(y>=c&&y<=f||isNaN(y))&&(S>=x&&S<=w||isNaN(S))&&(l[u++]=p),p++}g=!0}}if(!g)if(a===1)for(var m=0;m<o;m++){var T=e.getRawIndex(m),y=d[i[0]][T];(y>=c&&y<=f||isNaN(y))&&(l[u++]=T)}else for(var m=0;m<o;m++){for(var b=!0,T=e.getRawIndex(m),E=0;E<a;E++){var C=i[E],y=d[C][T];(y<t[C][0]||y>t[C][1])&&(b=!1)}b&&(l[u++]=e.getRawIndex(m))}return u<o&&(e._indices=l),e._count=u,e._extent=[],e._updateGetRawIdx(),e},r.prototype.map=function(t,e){var n=this.clone(t);return this._updateDims(n,t,e),n},r.prototype.modify=function(t,e){this._updateDims(this,t,e)},r.prototype._updateDims=function(t,e,n){for(var i=t._chunks,a=[],o=e.length,s=t.count(),l=[],u=t._rawExtent,h=0;h<e.length;h++)u[e[h]]=Of();for(var c=0;c<s;c++){for(var f=t.getRawIndex(c),d=0;d<o;d++)l[d]=i[e[d]][f];l[o]=c;var g=n&&n.apply(null,l);if(g!=null){typeof g!="object"&&(a[0]=g,g=a);for(var h=0;h<g.length;h++){var p=e[h],v=g[h],m=u[p],y=i[p];y&&(y[f]=v),v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}}},r.prototype.lttbDownSample=function(t,e){var n=this.clone([t],!0),i=n._chunks,a=i[t],o=this.count(),s=0,l=Math.floor(1/e),u=this.getRawIndex(0),h,c,f,d=new(Fp(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));d[s++]=u;for(var g=1;g<o-1;g+=l){for(var p=Math.min(g+l,o-1),v=Math.min(g+l*2,o),m=(v+p)/2,y=0,_=p;_<v;_++){var x=this.getRawIndex(_),w=a[x];isNaN(w)||(y+=w)}y/=v-p;var S=g,T=Math.min(g+l,o),b=g-1,E=a[u];h=-1,f=S;for(var C=-1,M=0,_=S;_<T;_++){var x=this.getRawIndex(_),w=a[x];if(isNaN(w)){M++,C<0&&(C=x);continue}c=Math.abs((b-m)*(w-E)-(b-_)*(y-E)),c>h&&(h=c,f=x)}M>0&&M<T-S&&(d[s++]=Math.min(C,f),f=Math.max(C,f)),d[s++]=f,u=f}return d[s++]=this.getRawIndex(o-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},r.prototype.downSample=function(t,e,n,i){for(var a=this.clone([t],!0),o=a._chunks,s=[],l=Math.floor(1/e),u=o[t],h=this.count(),c=a._rawExtent[t]=Of(),f=new(Fp(this._rawCount))(Math.ceil(h/l)),d=0,g=0;g<h;g+=l){l>h-g&&(l=h-g,s.length=l);for(var p=0;p<l;p++){var v=this.getRawIndex(g+p);s[p]=u[v]}var m=n(s),y=this.getRawIndex(Math.min(g+i(s,m)||0,h-1));u[y]=m,m<c[0]&&(c[0]=m),m>c[1]&&(c[1]=m),f[d++]=y}return a._count=d,a._indices=f,a._updateGetRawIdx(),a},r.prototype.each=function(t,e){if(this._count)for(var n=t.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(n){case 0:e(a);break;case 1:e(i[t[0]][s],a);break;case 2:e(i[t[0]][s],i[t[1]][s],a);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][s];u[l]=a,e.apply(null,u)}}},r.prototype.getDataExtent=function(t){var e=this._chunks[t],n=Of();if(!e)return n;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[t].slice();if(o=this._extent[t],o)return o.slice();o=n;for(var s=o[0],l=o[1],u=0;u<i;u++){var h=this.getRawIndex(u),c=e[h];c<s&&(s=c),c>l&&(l=c)}return o=[s,l],this._extent[t]=o,o},r.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var n=[],i=this._chunks,a=0;a<i.length;a++)n.push(i[a][e]);return n},r.prototype.clone=function(t,e){var n=new r,i=this._chunks,a=t&&cs(t,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)n._chunks[o]=a[o]?cEt(i[o]):i[o];else n._chunks=i;return this._copyCommonProps(n),e||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},r.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Pt(this._extent),t._rawExtent=Pt(this._rawExtent)},r.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var n=this._indices.length;e=new t(n);for(var i=0;i<n;i++)e[i]=this._indices[i]}else e=new t(this._indices);return e}return null},r.prototype._getRawIdxIdentity=function(t){return t},r.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},r.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},r.internalField=function(){function t(e,n,i,a){return wu(e[a],this._dimensions[a])}AE={arrayRows:t,objectRows:function(e,n,i,a){return wu(e[n],this._dimensions[a])},keyedColumns:t,original:function(e,n,i,a){var o=e&&(e.value==null?e:e.value);return wu(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(e,n,i,a){return e[a]}}}(),r}(),tY=function(){function r(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return r.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},r.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},r.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},r.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},r.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,e=this._getUpstreamSourceManagers(),n=!!e.length,i,a;if(x_(t)){var o=t,s=void 0,l=void 0,u=void 0;if(n){var h=e[0];h.prepareSource(),u=h.getSource(),s=u.data,l=u.sourceFormat,a=[h._getVersionSign()]}else s=o.get("data",!0),l=Wi(s)?Su:ja,a=[];var c=this._getSourceMetaRawOption()||{},f=u&&u.metaRawOption||{},d=Vt(c.seriesLayoutBy,f.seriesLayoutBy)||null,g=Vt(c.sourceHeader,f.sourceHeader),p=Vt(c.dimensions,f.dimensions),v=d!==f.seriesLayoutBy||!!g!=!!f.sourceHeader||p;i=v?[aI(s,{seriesLayoutBy:d,sourceHeader:g,dimensions:p},l)]:[]}else{var m=t;if(n){var y=this._applyTransform(e);i=y.sourceList,a=y.upstreamSignList}else{var _=m.get("source",!0);i=[aI(_,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},r.prototype._applyTransform=function(t){var e=this._sourceHost,n=e.get("transform",!0),i=e.get("fromTransformResult",!0);if(i!=null){var a="";t.length!==1&&$5(a)}var o,s=[],l=[];return I(t,function(u){u.prepareSource();var h=u.getSource(i||0),c="";i!=null&&!h&&$5(c),s.push(h),l.push(u._getVersionSign())}),n?o=sEt(n,s,{datasetIndex:e.componentIndex}):i!=null&&(o=[Ubt(s[0])]),{sourceList:o,upstreamSignList:l}},r.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var n=t[e];if(n._isDirty()||this._upstreamSignList[e]!==n._getVersionSign())return!0}},r.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return e},r.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},r.prototype._innerGetDataStore=function(t,e,n){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[n];if(!s){var l=this._getUpstreamSourceManagers()[0];x_(this._sourceHost)&&l?s=l._innerGetDataStore(t,e,n):(s=new oI,s.initData(new H$(e,t.length),t)),o[n]=s}return s},r.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(x_(t)){var e=mL(t);return e?[e.getSourceManager()]:[]}else return nt(mbt(t),function(n){return n.getSourceManager()})},r.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,e,n,i;if(x_(t))e=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;e=a.get("seriesLayoutBy",!0),n=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:n,dimensions:i}},r}();function H5(r){var t=r.option.transform;t&&Fx(r.option.transform)}function x_(r){return r.mainType==="series"}function $5(r){throw new Error(r)}var eY="line-height:1";function rY(r,t){var e=r.color||"#6e7079",n=r.fontSize||12,i=r.fontWeight||"400",a=r.color||"#464646",o=r.fontSize||14,s=r.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Di(n+"")+"px;color:"+Di(e)+";font-weight:"+Di(i+""),valueStyle:"font-size:"+Di(o+"")+"px;color:"+Di(a)+";font-weight:"+Di(s+"")}:{nameStyle:{fontSize:n,fill:e,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var fEt=[0,10,20,30],dEt=["",`
`,`

`,`


`];function cn(r,t){return t.type=r,t}function sI(r){return r.type==="section"}function nY(r){return sI(r)?gEt:pEt}function iY(r){if(sI(r)){var t=0,e=r.blocks.length,n=e>1||e>0&&!r.noHeader;return I(r.blocks,function(i){var a=iY(i);a>=t&&(t=a+ +(n&&(!a||sI(i)&&!i.noHeader)))}),t}return 0}function gEt(r,t,e,n){var i=t.noHeader,a=vEt(iY(t)),o=[],s=t.blocks||[];xi(!s||rt(s)),s=s||[];var l=r.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(xt(u,l)){var h=new K$(u[l],null);s.sort(function(g,p){return h.evaluate(g.sortParam,p.sortParam)})}else l==="seriesDesc"&&s.reverse()}I(s,function(g,p){var v=t.valueFormatter,m=nY(g)(v?tt(tt({},r),{valueFormatter:v}):r,g,p>0?a.html:0,n);m!=null&&o.push(m)});var c=r.renderMode==="richText"?o.join(a.richText):lI(o.join(""),i?e:a.html);if(i)return c;var f=rI(t.header,"ordinal",r.useUTC),d=rY(n,r.renderMode).nameStyle;return r.renderMode==="richText"?aY(r,f,d)+a.richText+c:lI('<div style="'+d+";"+eY+';">'+Di(f)+"</div>"+c,e)}function pEt(r,t,e,n){var i=r.renderMode,a=t.noName,o=t.noValue,s=!t.markerType,l=t.name,u=r.useUTC,h=t.valueFormatter||r.valueFormatter||function(x){return x=rt(x)?x:[x],nt(x,function(w,S){return rI(w,rt(d)?d[S]:d,u)})};if(!(a&&o)){var c=s?"":r.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),f=a?"":rI(l,"ordinal",u),d=t.valueType,g=o?[]:h(t.value,t.dataIndex),p=!s||!a,v=!s&&a,m=rY(n,i),y=m.nameStyle,_=m.valueStyle;return i==="richText"?(s?"":c)+(a?"":aY(r,f,y))+(o?"":_Et(r,g,p,v,_)):lI((s?"":c)+(a?"":mEt(f,!s,y))+(o?"":yEt(g,p,v,_)),e)}}function Y5(r,t,e,n,i,a){if(r){var o=nY(r),s={useUTC:i,renderMode:e,orderMode:n,markupStyleCreator:t,valueFormatter:r.valueFormatter};return o(s,r,0,a)}}function vEt(r){return{html:fEt[r],richText:dEt[r]}}function lI(r,t){var e='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+eY+';">'+r+e+"</div>"}function mEt(r,t,e){var n=t?"margin-left:2px":"";return'<span style="'+e+";"+n+'">'+Di(r)+"</span>"}function yEt(r,t,e,n){var i=e?"10px":"20px",a=t?"float:right;margin-left:"+i:"";return r=rt(r)?r:[r],'<span style="'+a+";"+n+'">'+nt(r,function(o){return Di(o)}).join("&nbsp;&nbsp;")+"</span>"}function aY(r,t,e){return r.markupStyleCreator.wrapRichTextStyle(t,e)}function _Et(r,t,e,n,i){var a=[i],o=n?10:20;return e&&a.push({padding:[0,0,0,o],align:"right"}),r.markupStyleCreator.wrapRichTextStyle(rt(t)?t.join("  "):t,a)}function oY(r,t){var e=r.getData().getItemVisual(t,"style"),n=e[r.visualDrawType];return Hc(n)}function sY(r,t){var e=r.get("padding");return e??(t==="richText"?[8,10]:10)}var IE=function(){function r(){this.richTextStyles={},this._nextStyleNameId=wH()}return r.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},r.prototype.makeTooltipMarker=function(t,e,n){var i=n==="richText"?this._generateStyleName():null,a=hbt({color:e,type:t,renderMode:n,markerId:i});return yt(a)?a:(this.richTextStyles[i]=a.style,a.content)},r.prototype.wrapRichTextStyle=function(t,e){var n={};rt(e)?I(e,function(a){return tt(n,a)}):tt(n,e);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},r}();function lY(r){var t=r.series,e=r.dataIndex,n=r.multipleSeries,i=t.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=t.getRawValue(e),l=rt(s),u=oY(t,e),h,c,f,d;if(o>1||l&&!o){var g=xEt(s,t,e,a,u);h=g.inlineValues,c=g.inlineValueTypes,f=g.blocks,d=g.inlineValues[0]}else if(o){var p=i.getDimensionInfo(a[0]);d=h=mg(i,e,a[0]),c=p.type}else d=h=l?s[0]:s;var v=jP(t),m=v&&t.name||"",y=i.getName(e),_=n?m:y;return cn("section",{header:m,noHeader:n||!v,sortParam:d,blocks:[cn("nameValue",{markerType:"item",markerColor:u,name:_,noName:!so(_),value:h,valueType:c,dataIndex:e})].concat(f||[])})}function xEt(r,t,e,n,i){var a=t.getData(),o=cs(r,function(c,f,d){var g=a.getDimensionInfo(d);return c=c||g&&g.tooltip!==!1&&g.displayName!=null},!1),s=[],l=[],u=[];n.length?I(n,function(c){h(mg(a,e,c),c)}):I(r,h);function h(c,f){var d=a.getDimensionInfo(f);!d||d.otherDims.tooltip===!1||(o?u.push(cn("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:c,valueType:d.type})):(s.push(c),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Nl=me();function S_(r,t){return r.getName(t)||r.getId(t)}var D1="__universalTransitionEnabled",lr=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return t.prototype.init=function(e,n,i){this.seriesIndex=this.componentIndex,this.dataTask=nm({count:wEt,reset:TEt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,i);var a=Nl(this).sourceManager=new tY(this);a.prepareSource();var o=this.getInitialData(e,i);Z5(o,this),this.dataTask.context.data=o,Nl(this).dataBeforeProcessed=o,X5(this),this._initSelectedMapFromData(o)},t.prototype.mergeDefaultAndTheme=function(e,n){var i=Qm(this),a=i?ep(e):{},o=this.subType;ue.hasClass(o)&&(o+="Series"),Zt(e,n.getTheme().get(this.subType)),Zt(e,this.getDefaultOption()),zc(e,"label",["show"]),this.fillDataTextStyle(e.data),i&&Vu(e,a,i)},t.prototype.mergeOption=function(e,n){e=Zt(this.option,e,!0),this.fillDataTextStyle(e.data);var i=Qm(this);i&&Vu(this.option,e,i);var a=Nl(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(e,n);Z5(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Nl(this).dataBeforeProcessed=o,X5(this),this._initSelectedMapFromData(o)},t.prototype.fillDataTextStyle=function(e){if(e&&!Wi(e))for(var n=["show"],i=0;i<e.length;i++)e[i]&&e[i].label&&zc(e[i],"label",n)},t.prototype.getInitialData=function(e,n){},t.prototype.appendData=function(e){var n=this.getRawData();n.appendData(e.data)},t.prototype.getData=function(e){var n=uI(this);if(n){var i=n.context.data;return e==null||!i.getLinkedData?i:i.getLinkedData(e)}else return Nl(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var n=uI(this);if(n){var i=n.context;i.outputData=e,n!==this.dataTask&&(i.data=e)}Nl(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return wt(e)},t.prototype.getSourceManager=function(){return Nl(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Nl(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var e=this.get("colorBy");return e||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,n,i){return lY({series:this,dataIndex:e,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(le.node&&!(e&&e.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,n,i){var a=this.ecModel,o=yL.prototype.getColorFromPalette.call(this,e,n,i);return o||(o=a.getColorFromPalette(e,n,i)),o},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,n){this._innerSelect(this.getData(n),e)},t.prototype.unselect=function(e,n){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(n);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<e.length;s++){var l=e[s],u=S_(o,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(e,n){for(var i=[],a=0;a<e.length;a++)i[0]=e[a],this.isSelected(e[a],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,n=he(e),i=[],a=0;a<n.length;a++){var o=e[n[a]];o>=0&&i.push(o)}return i},t.prototype.isSelected=function(e,n){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(n);return(i==="all"||i[S_(a,e)])&&!a.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[D1])return!0;var e=this.option.universalTransition;return e?e===!0?!0:e&&e.enabled:!1},t.prototype._innerSelect=function(e,n){var i,a,o=this.option,s=o.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){Rt(o.selectedMap)||(o.selectedMap={});for(var u=o.selectedMap,h=0;h<l;h++){var c=n[h],f=S_(e,c);u[f]=!0,this._selectedDataIndicesMap[f]=e.getRawIndex(c)}}else if(s==="single"||s===!0){var d=n[l-1],f=S_(e,d);o.selectedMap=(i={},i[f]=!0,i),this._selectedDataIndicesMap=(a={},a[f]=e.getRawIndex(d),a)}}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var n=[];e.hasItemOption&&e.each(function(i){var a=e.getRawDataItem(i);a&&a.selected&&n.push(i)}),n.length>0&&this._innerSelect(e,n)}},t.registerClass=function(e){return ue.registerClass(e)},t.protoInitialize=function(){var e=t.prototype;e.type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"}(),t}(ue);Hr(lr,Qw);Hr(lr,yL);PH(lr,ue);function X5(r){var t=r.name;jP(r)||(r.name=SEt(r)||t)}function SEt(r){var t=r.getRawData(),e=t.mapDimensionsAll("seriesName"),n=[];return I(e,function(i){var a=t.getDimensionInfo(i);a.displayName&&n.push(a.displayName)}),n.join(" ")}function wEt(r){return r.model.getRawData().count()}function TEt(r){var t=r.model;return t.setData(t.getRawData().cloneShallow()),bEt}function bEt(r,t){t.outputData&&r.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function Z5(r,t){I(kx(r.CHANGABLE_METHODS,r.DOWNSAMPLE_METHODS),function(e){r.wrapMethod(e,Wt(EEt,t))})}function EEt(r,t){var e=uI(r);return e&&e.setOutputEnd((t||this).count()),t}function uI(r){var t=(r.ecModel||{}).scheduler,e=t&&t.getPipeline(r.uid);if(e){var n=e.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(r.uid))}return n}}var yr=function(){function r(){this.group=new Dt,this.uid=Qg("viewComponent")}return r.prototype.init=function(t,e){},r.prototype.render=function(t,e,n,i){},r.prototype.dispose=function(t,e){},r.prototype.updateView=function(t,e,n,i){},r.prototype.updateLayout=function(t,e,n,i){},r.prototype.updateVisual=function(t,e,n,i){},r.prototype.toggleBlurSeries=function(t,e,n){},r.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},r}();qP(yr);Nw(yr);function np(){var r=me();return function(t){var e=r(t),n=t.pipelineContext,i=!!e.large,a=!!e.progressiveRender,o=e.large=!!(n&&n.large),s=e.progressiveRender=!!(n&&n.progressiveRender);return(i!==o||a!==s)&&"reset"}}var uY=me(),CEt=np(),Ke=function(){function r(){this.group=new Dt,this.uid=Qg("viewChart"),this.renderTask=nm({plan:MEt,reset:AEt}),this.renderTask.context={view:this}}return r.prototype.init=function(t,e){},r.prototype.render=function(t,e,n,i){},r.prototype.highlight=function(t,e,n,i){var a=t.getData(i&&i.dataType);a&&K5(a,i,"emphasis")},r.prototype.downplay=function(t,e,n,i){var a=t.getData(i&&i.dataType);a&&K5(a,i,"normal")},r.prototype.remove=function(t,e){this.group.removeAll()},r.prototype.dispose=function(t,e){},r.prototype.updateView=function(t,e,n,i){this.render(t,e,n,i)},r.prototype.updateLayout=function(t,e,n,i){this.render(t,e,n,i)},r.prototype.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},r.prototype.eachRendered=function(t){Qu(this.group,t)},r.markUpdateMethod=function(t,e){uY(t).updateMethod=e},r.protoInitialize=function(){var t=r.prototype;t.type="chart"}(),r}();function j5(r,t,e){r&&Km(r)&&(t==="emphasis"?ul:hl)(r,e)}function K5(r,t,e){var n=Vc(r,t),i=t&&t.highlightKey!=null?hTt(t.highlightKey):null;n!=null?I(Ye(n),function(a){j5(r.getItemGraphicEl(a),e,i)}):r.eachItemGraphicEl(function(a){j5(a,e,i)})}qP(Ke);Nw(Ke);function MEt(r){return CEt(r.model)}function AEt(r){var t=r.model,e=r.ecModel,n=r.api,i=r.payload,a=t.pipelineContext.progressiveRender,o=r.view,s=i&&uY(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](t,e,n,i),IEt[l]}var IEt={incrementalPrepareRender:{progress:function(r,t){t.view.incrementalRender(r,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(r,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},tS="\0__throttleOriginMethod",q5="\0__throttleRate",J5="\0__throttleType";function bL(r,t,e){var n,i=0,a=0,o=null,s,l,u,h;t=t||0;function c(){a=new Date().getTime(),o=null,r.apply(l,u||[])}var f=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];n=new Date().getTime(),l=this,u=d;var p=h||t,v=h||e;h=null,s=n-(v?i:a)-p,clearTimeout(o),v?o=setTimeout(c,p):s>=0?c():o=setTimeout(c,-s),i=n};return f.clear=function(){o&&(clearTimeout(o),o=null)},f.debounceNextCall=function(d){h=d},f}function ip(r,t,e,n){var i=r[t];if(i){var a=i[tS]||i,o=i[J5],s=i[q5];if(s!==e||o!==n){if(e==null||!n)return r[t]=a;i=r[t]=bL(a,e,n==="debounce"),i[tS]=a,i[J5]=n,i[q5]=e}return i}}function ey(r,t){var e=r[t];e&&e[tS]&&(e.clear&&e.clear(),r[t]=e[tS])}var Q5=me(),tG={itemStyle:Uc(p$,!0),lineStyle:Uc(g$,!0)},REt={lineStyle:"stroke",itemStyle:"fill"};function hY(r,t){var e=r.visualStyleMapper||tG[t];return e||tG.itemStyle}function cY(r,t){var e=r.visualDrawType||REt[t];return e||"fill"}var PEt={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){var e=r.getData(),n=r.visualStyleAccessPath||"itemStyle",i=r.getModel(n),a=hY(r,n),o=a(i),s=i.getShallow("decal");s&&(e.setVisual("decal",s),s.dirty=!0);var l=cY(r,n),u=o[l],h=At(u)?u:null,c=o.fill==="auto"||o.stroke==="auto";if(!o[l]||h||c){var f=r.getColorFromPalette(r.name,null,t.getSeriesCount());o[l]||(o[l]=f,e.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||At(o.fill)?f:o.fill,o.stroke=o.stroke==="auto"||At(o.stroke)?f:o.stroke}if(e.setVisual("style",o),e.setVisual("drawType",l),!t.isSeriesFiltered(r)&&h)return e.setVisual("colorFromPalette",!1),{dataEach:function(d,g){var p=r.getDataParams(g),v=tt({},o);v[l]=h(p),d.setItemVisual(g,"style",v)}}}},kp=new Oe,LEt={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){if(!(r.ignoreStyleOnData||t.isSeriesFiltered(r))){var e=r.getData(),n=r.visualStyleAccessPath||"itemStyle",i=hY(r,n),a=e.getVisual("drawType");return{dataEach:e.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[n]){kp.option=l[n];var u=i(kp),h=o.ensureUniqueItemVisual(s,"style");tt(h,u),kp.option.decal&&(o.setItemVisual(s,"decal",kp.option.decal),kp.option.decal.dirty=!0),a in u&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},DEt={performRawSeries:!0,overallReset:function(r){var t=wt();r.eachSeries(function(e){var n=e.getColorBy();if(!e.isColorBySeries()){var i=e.type+"-"+n,a=t.get(i);a||(a={},t.set(i,a)),Q5(e).scope=a}}),r.eachSeries(function(e){if(!(e.isColorBySeries()||r.isSeriesFiltered(e))){var n=e.getRawData(),i={},a=e.getData(),o=Q5(e).scope,s=e.visualStyleAccessPath||"itemStyle",l=cY(e,s);a.each(function(u){var h=a.getRawIndex(u);i[h]=u}),n.each(function(u){var h=i[u],c=a.getItemVisual(h,"colorFromPalette");if(c){var f=a.ensureUniqueItemVisual(h,"style"),d=n.getName(u)||u+"",g=n.count();f[l]=e.getColorFromPalette(d,o,g)}})}})}},w_=Math.PI;function OEt(r,t){t=t||{},It(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var e=new Dt,n=new ve({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});e.add(n);var i=new xe({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new ve({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});e.add(a);var o;return t.showSpinner&&(o=new Uw({shape:{startAngle:-w_/2,endAngle:-w_/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:w_*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:w_*3/2}).delay(300).start("circularInOut"),e.add(o)),e.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(r.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),h=r.getHeight()/2;t.showSpinner&&o.setShape({cx:u,cy:h}),a.setShape({x:u-l,y:h-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:r.getWidth(),height:r.getHeight()})},e.resize(),e}var fY=function(){function r(t,e,n,i){this._stageTaskMap=wt(),this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return r.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},r.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,a=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,o=a?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},r.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},r.prototype.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData(),a=i.count(),o=n.progressiveEnabled&&e.incrementalPrepareRender&&a>=n.threshold,s=t.get("large")&&a>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=n.context={progressiveRender:o,modDataCount:l,large:s}},r.prototype.restorePipelines=function(t){var e=this,n=e._pipelineMap=wt();t.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;n.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),e._pipe(i,i.dataTask)})},r.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),n=this.api;I(this._allHandlers,function(i){var a=t.get(i.uid)||t.set(i.uid,{}),o="";xi(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,e,n),i.overallReset&&this._createOverallStageTask(i,a,e,n)},this)},r.prototype.prepareView=function(t,e,n,i){var a=t.renderTask,o=a.context;o.model=e,o.ecModel=n,o.api=i,a.__block=!t.incrementalPrepareRender,this._pipe(e,a)},r.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},r.prototype.performVisualTasks=function(t,e,n){this._performStageTasks(this._visualHandlers,t,e,n)},r.prototype._performStageTasks=function(t,e,n,i){i=i||{};var a=!1,o=this;I(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var h=o._stageTaskMap.get(l.uid),c=h.seriesTaskMap,f=h.overallTask;if(f){var d,g=f.agentStubMap;g.each(function(v){s(i,v)&&(v.dirty(),d=!0)}),d&&f.dirty(),o.updatePayload(f,n);var p=o.getPerformArgs(f,i.block);g.each(function(v){v.perform(p)}),f.perform(p)&&(a=!0)}else c&&c.each(function(v,m){s(i,v)&&v.dirty();var y=o.getPerformArgs(v,i.block);y.skip=!l.performRawSeries&&e.isSeriesFiltered(v.context.model),o.updatePayload(v,n),v.perform(y)&&(a=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},r.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(n){e=n.dataTask.perform()||e}),this.unfinished=e||this.unfinished},r.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},r.prototype.updatePayload=function(t,e){e!=="remain"&&(t.context.payload=e)},r.prototype._createSeriesStageTask=function(t,e,n,i){var a=this,o=e.seriesTaskMap,s=e.seriesTaskMap=wt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(h):l?n.eachRawSeriesByType(l,h):u&&u(n,i).each(h);function h(c){var f=c.uid,d=s.set(f,o&&o.get(f)||nm({plan:BEt,reset:zEt,count:UEt}));d.context={model:c,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(c,d)}},r.prototype._createOverallStageTask=function(t,e,n,i){var a=this,o=e.overallTask=e.overallTask||nm({reset:NEt});o.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=wt(),u=t.seriesType,h=t.getTargetSeries,c=!0,f=!1,d="";xi(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,g):h?h(n,i).each(g):(c=!1,I(n.getSeries(),g));function g(p){var v=p.uid,m=l.set(v,s&&s.get(v)||(f=!0,nm({reset:FEt,onDirty:GEt})));m.context={model:p,overallProgress:c},m.agent=o,m.__block=c,a._pipe(p,m)}f&&o.dirty()},r.prototype._pipe=function(t,e){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=e),i.tail&&i.tail.pipe(e),i.tail=e,e.__idxInPipeline=i.count++,e.__pipeline=i},r.wrapStageHandler=function(t,e){return At(t)&&(t={overallReset:t,seriesType:WEt(t)}),t.uid=Qg("stageHandler"),e&&(t.visualType=e),t},r}();function NEt(r){r.overallReset(r.ecModel,r.api,r.payload)}function FEt(r){return r.overallProgress&&kEt}function kEt(){this.agent.dirty(),this.getDownstream().dirty()}function GEt(){this.agent&&this.agent.dirty()}function BEt(r){return r.plan?r.plan(r.model,r.ecModel,r.api,r.payload):null}function zEt(r){r.useClearVisual&&r.data.clearAllVisual();var t=r.resetDefines=Ye(r.reset(r.model,r.ecModel,r.api,r.payload));return t.length>1?nt(t,function(e,n){return dY(n)}):VEt}var VEt=dY(0);function dY(r){return function(t,e){var n=e.data,i=e.resetDefines[r];if(i&&i.dataEach)for(var a=t.start;a<t.end;a++)i.dataEach(n,a);else i&&i.progress&&i.progress(t,n)}}function UEt(r){return r.data.count()}function WEt(r){eS=null;try{r(ry,gY)}catch{}return eS}var ry={},gY={},eS;pY(ry,_L);pY(gY,B$);ry.eachSeriesByType=ry.eachRawSeriesByType=function(r){eS=r};ry.eachComponent=function(r){r.mainType==="series"&&r.subType&&(eS=r.subType)};function pY(r,t){for(var e in t.prototype)r[e]=Lr}var eG=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const HEt={color:eG,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],eG]};var ai="#B9B8CE",rG="#100C2A",T_=function(){return{axisLine:{lineStyle:{color:ai}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},nG=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],vY={darkMode:!0,color:nG,backgroundColor:rG,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ai}},textStyle:{color:ai},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ai}},dataZoom:{borderColor:"#71708A",textStyle:{color:ai},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ai}},timeline:{lineStyle:{color:ai},label:{color:ai},controlStyle:{color:ai,borderColor:ai}},calendar:{itemStyle:{color:rG},dayLabel:{color:ai},monthLabel:{color:ai},yearLabel:{color:ai}},timeAxis:T_(),logAxis:T_(),valueAxis:T_(),categoryAxis:T_(),line:{symbol:"circle"},graph:{color:nG},gauge:{title:{color:ai},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ai},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};vY.categoryAxis.splitLine.show=!1;var $Et=function(){function r(){}return r.prototype.normalizeQuery=function(t){var e={},n={},i={};if(yt(t)){var a=Qo(t);e.mainType=a.main||null,e.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};I(t,function(l,u){for(var h=!1,c=0;c<o.length;c++){var f=o[c],d=u.lastIndexOf(f);if(d>0&&d===u.length-f.length){var g=u.slice(0,d);g!=="data"&&(e.mainType=g,e[f.toLowerCase()]=l,h=!0)}}s.hasOwnProperty(u)&&(n[u]=l,h=!0),h||(i[u]=l)})}return{cptQuery:e,dataQuery:n,otherQuery:i}},r.prototype.filter=function(t,e){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,a=n.packedEvent,o=n.model,s=n.view;if(!o||!s)return!0;var l=e.cptQuery,u=e.dataQuery;return h(l,o,"mainType")&&h(l,o,"subType")&&h(l,o,"index","componentIndex")&&h(l,o,"name")&&h(l,o,"id")&&h(u,a,"name")&&h(u,a,"dataIndex")&&h(u,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,i,a));function h(c,f,d,g){return c[d]==null||f[g||d]===c[d]}},r.prototype.afterTrigger=function(){this.eventInfo=null},r}(),hI=["symbol","symbolSize","symbolRotate","symbolOffset"],iG=hI.concat(["symbolKeepAspect"]),YEt={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){var e=r.getData();if(r.legendIcon&&e.setVisual("legendIcon",r.legendIcon),!r.hasSymbolVisual)return;for(var n={},i={},a=!1,o=0;o<hI.length;o++){var s=hI[o],l=r.get(s);At(l)?(a=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||r.defaultSymbol,e.setVisual(tt({legendIcon:r.legendIcon||n.symbol,symbolKeepAspect:r.get("symbolKeepAspect")},n)),t.isSeriesFiltered(r))return;var u=he(i);function h(c,f){for(var d=r.getRawValue(f),g=r.getDataParams(f),p=0;p<u.length;p++){var v=u[p];c.setItemVisual(f,v,i[v](d,g))}}return{dataEach:a?h:null}}},XEt={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){if(!r.hasSymbolVisual||t.isSeriesFiltered(r))return;var e=r.getData();function n(i,a){for(var o=i.getItemModel(a),s=0;s<iG.length;s++){var l=iG[s],u=o.getShallow(l,!0);u!=null&&i.setItemVisual(a,l,u)}}return{dataEach:e.hasItemOption?n:null}}};function EL(r,t,e){switch(e){case"color":var n=r.getItemVisual(t,"style");return n[r.getVisual("drawType")];case"opacity":return r.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getItemVisual(t,e)}}function t0(r,t){switch(t){case"color":var e=r.getVisual("style");return e[r.getVisual("drawType")];case"opacity":return r.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getVisual(t)}}function mY(r,t,e,n){switch(e){case"color":var i=r.ensureUniqueItemVisual(t,"style");i[r.getVisual("drawType")]=n,r.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":r.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":r.setItemVisual(t,e,n);break}}function yY(r,t){function e(n,i){var a=[];return n.eachComponent({mainType:"series",subType:r,query:i},function(o){a.push(o.seriesIndex)}),a}I([[r+"ToggleSelect","toggleSelect"],[r+"Select","select"],[r+"UnSelect","unselect"]],function(n){t(n[0],function(i,a,o){i=tt({},i),o.dispatchAction(tt(i,{type:n[1],seriesIndex:e(a,i)}))})})}function Nf(r,t,e,n,i){var a=r+t;e.isSilent(a)||n.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,u=i.selected,h=0;h<u.length;h++)if(u[h].seriesIndex===s){var c=o.getData(),f=Vc(c,i.fromActionPayload);e.trigger(a,{type:a,seriesId:o.id,name:rt(f)?c.getName(f[0]):c.getName(f),selected:yt(l)?l:tt({},l)})}})}function ZEt(r,t,e){r.on("selectchanged",function(n){var i=e.getModel();n.isFromClick?(Nf("map","selectchanged",t,i,n),Nf("pie","selectchanged",t,i,n)):n.fromAction==="select"?(Nf("map","selected",t,i,n),Nf("pie","selected",t,i,n)):n.fromAction==="unselect"&&(Nf("map","unselected",t,i,n),Nf("pie","unselected",t,i,n))})}function dc(r,t,e){for(var n;r&&!(t(r)&&(n=r,e));)r=r.__hostTarget||r.parent;return n}var jEt=Math.round(Math.random()*9),KEt=typeof Object.defineProperty=="function",qEt=function(){function r(){this._id="__ec_inner_"+jEt++}return r.prototype.get=function(t){return this._guard(t)[this._id]},r.prototype.set=function(t,e){var n=this._guard(t);return KEt?Object.defineProperty(n,this._id,{value:e,enumerable:!1,configurable:!0}):n[this._id]=e,this},r.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},r.prototype.has=function(t){return!!this._guard(t)[this._id]},r.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},r}(),JEt=ae.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,t){var e=t.cx,n=t.cy,i=t.width/2,a=t.height/2;r.moveTo(e,n-a),r.lineTo(e+i,n+a),r.lineTo(e-i,n+a),r.closePath()}}),QEt=ae.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,t){var e=t.cx,n=t.cy,i=t.width/2,a=t.height/2;r.moveTo(e,n-a),r.lineTo(e+i,n),r.lineTo(e,n+a),r.lineTo(e-i,n),r.closePath()}}),tCt=ae.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,t){var e=t.x,n=t.y,i=t.width/5*3,a=Math.max(i,t.height),o=i/2,s=o*o/(a-o),l=n-a+o+s,u=Math.asin(s/o),h=Math.cos(u)*o,c=Math.sin(u),f=Math.cos(u),d=o*.6,g=o*.7;r.moveTo(e-h,l+s),r.arc(e,l,o,Math.PI-u,Math.PI*2+u),r.bezierCurveTo(e+h-c*d,l+s+f*d,e,n-g,e,n),r.bezierCurveTo(e,n-g,e-h+c*d,l+s+f*d,e-h,l+s),r.closePath()}}),eCt=ae.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,t){var e=t.height,n=t.width,i=t.x,a=t.y,o=n/3*2;r.moveTo(i,a),r.lineTo(i+o,a+e),r.lineTo(i,a+e/4*3),r.lineTo(i-o,a+e),r.lineTo(i,a),r.closePath()}}),rCt={line:sn,rect:ve,roundRect:ve,square:ve,circle:xl,diamond:QEt,pin:tCt,arrow:eCt,triangle:JEt},nCt={line:function(r,t,e,n,i){i.x1=r,i.y1=t+n/2,i.x2=r+e,i.y2=t+n/2},rect:function(r,t,e,n,i){i.x=r,i.y=t,i.width=e,i.height=n},roundRect:function(r,t,e,n,i){i.x=r,i.y=t,i.width=e,i.height=n,i.r=Math.min(e,n)/4},square:function(r,t,e,n,i){var a=Math.min(e,n);i.x=r,i.y=t,i.width=a,i.height=a},circle:function(r,t,e,n,i){i.cx=r+e/2,i.cy=t+n/2,i.r=Math.min(e,n)/2},diamond:function(r,t,e,n,i){i.cx=r+e/2,i.cy=t+n/2,i.width=e,i.height=n},pin:function(r,t,e,n,i){i.x=r+e/2,i.y=t+n/2,i.width=e,i.height=n},arrow:function(r,t,e,n,i){i.x=r+e/2,i.y=t+n/2,i.width=e,i.height=n},triangle:function(r,t,e,n,i){i.cx=r+e/2,i.cy=t+n/2,i.width=e,i.height=n}},rS={};I(rCt,function(r,t){rS[t]=new r});var iCt=ae.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(r,t,e){var n=$x(r,t,e),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=e.y+e.height*.4),n},buildPath:function(r,t,e){var n=t.symbolType;if(n!=="none"){var i=rS[n];i||(n="rect",i=rS[n]),nCt[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(r,i.shape,e)}}});function aCt(r,t){if(this.type!=="image"){var e=this.style;this.__isEmptyBrush?(e.stroke=r,e.fill=t||"#fff",e.lineWidth=2):this.shape.symbolType==="line"?e.stroke=r:e.fill=r,this.markRedraw()}}function Ur(r,t,e,n,i,a,o){var s=r.indexOf("empty")===0;s&&(r=r.substr(5,1).toLowerCase()+r.substr(6));var l;return r.indexOf("image://")===0?l=o$(r.slice(8),new jt(t,e,n,i),o?"center":"cover"):r.indexOf("path://")===0?l=Ww(r.slice(7),{},new jt(t,e,n,i),o?"center":"cover"):l=new iCt({shape:{symbolType:r,x:t,y:e,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=aCt,a&&l.setColor(a),l}function ap(r){return rt(r)||(r=[+r,+r]),[r[0]||0,r[1]||0]}function af(r,t){if(r!=null)return rt(r)||(r=[r,r]),[ft(r[0],t[0])||0,ft(Vt(r[1],r[0]),t[1])||0]}function gc(r){return isFinite(r)}function oCt(r,t,e){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,a=t.y==null?0:t.y,o=t.y2==null?0:t.y2;t.global||(n=n*e.width+e.x,i=i*e.width+e.x,a=a*e.height+e.y,o=o*e.height+e.y),n=gc(n)?n:0,i=gc(i)?i:1,a=gc(a)?a:0,o=gc(o)?o:0;var s=r.createLinearGradient(n,a,i,o);return s}function sCt(r,t,e){var n=e.width,i=e.height,a=Math.min(n,i),o=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(o=o*n+e.x,s=s*i+e.y,l=l*a),o=gc(o)?o:.5,s=gc(s)?s:.5,l=l>=0&&gc(l)?l:.5;var u=r.createRadialGradient(o,s,0,o,s,l);return u}function cI(r,t,e){for(var n=t.type==="radial"?sCt(r,t,e):oCt(r,t,e),i=t.colorStops,a=0;a<i.length;a++)n.addColorStop(i[a].offset,i[a].color);return n}function lCt(r,t){if(r===t||!r&&!t)return!1;if(!r||!t||r.length!==t.length)return!0;for(var e=0;e<r.length;e++)if(r[e]!==t[e])return!0;return!1}function b_(r){return parseInt(r,10)}function wd(r,t,e){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(e[n]!=null&&e[n]!=="auto")return parseFloat(e[n]);var s=document.defaultView.getComputedStyle(r);return(r[i]||b_(s[n])||b_(r.style[n]))-(b_(s[a])||0)-(b_(s[o])||0)|0}function uCt(r,t){return!r||r==="solid"||!(t>0)?null:r==="dashed"?[4*t,2*t]:r==="dotted"?[t]:be(r)?[r]:rt(r)?r:null}function CL(r){var t=r.style,e=t.lineDash&&t.lineWidth>0&&uCt(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(e){var i=t.strokeNoScale&&r.getLineScale?r.getLineScale():1;i&&i!==1&&(e=nt(e,function(a){return a/i}),n/=i)}return[e,n]}var hCt=new ps(!0);function nS(r){var t=r.stroke;return!(t==null||t==="none"||!(r.lineWidth>0))}function aG(r){return typeof r=="string"&&r!=="none"}function iS(r){var t=r.fill;return t!=null&&t!=="none"}function oG(r,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var e=r.globalAlpha;r.globalAlpha=t.fillOpacity*t.opacity,r.fill(),r.globalAlpha=e}else r.fill()}function sG(r,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var e=r.globalAlpha;r.globalAlpha=t.strokeOpacity*t.opacity,r.stroke(),r.globalAlpha=e}else r.stroke()}function fI(r,t,e){var n=JP(t.image,t.__image,e);if(Fw(n)){var i=r.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*x1),a.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(a)}return i}}function cCt(r,t,e,n){var i,a=nS(e),o=iS(e),s=e.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var h=t.path||hCt,c=t.__dirty;if(!n){var f=e.fill,d=e.stroke,g=o&&!!f.colorStops,p=a&&!!d.colorStops,v=o&&!!f.image,m=a&&!!d.image,y=void 0,_=void 0,x=void 0,w=void 0,S=void 0;(g||p)&&(S=t.getBoundingRect()),g&&(y=c?cI(r,f,S):t.__canvasFillGradient,t.__canvasFillGradient=y),p&&(_=c?cI(r,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=_),v&&(x=c||!t.__canvasFillPattern?fI(r,f,t):t.__canvasFillPattern,t.__canvasFillPattern=x),m&&(w=c||!t.__canvasStrokePattern?fI(r,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=x),g?r.fillStyle=y:v&&(x?r.fillStyle=x:o=!1),p?r.strokeStyle=_:m&&(w?r.strokeStyle=w:a=!1)}var T=t.getGlobalScale();h.setScale(T[0],T[1],t.segmentIgnoreThreshold);var b,E;r.setLineDash&&e.lineDash&&(i=CL(t),b=i[0],E=i[1]);var C=!0;(u||c&nd)&&(h.setDPR(r.dpr),l?h.setContext(null):(h.setContext(r),C=!1),h.reset(),t.buildPath(h,t.shape,n),h.toStatic(),t.pathUpdated()),C&&h.rebuildPath(r,l?s:1),b&&(r.setLineDash(b),r.lineDashOffset=E),n||(e.strokeFirst?(a&&sG(r,e),o&&oG(r,e)):(o&&oG(r,e),a&&sG(r,e))),b&&r.setLineDash([])}function fCt(r,t,e){var n=t.__image=JP(e.image,t.__image,t,t.onload);if(!(!n||!Fw(n))){var i=e.x||0,a=e.y||0,o=t.getWidth(),s=t.getHeight(),l=n.width/n.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=n.width,s=n.height),e.sWidth&&e.sHeight){var u=e.sx||0,h=e.sy||0;r.drawImage(n,u,h,e.sWidth,e.sHeight,i,a,o,s)}else if(e.sx&&e.sy){var u=e.sx,h=e.sy,c=o-u,f=s-h;r.drawImage(n,u,h,c,f,i,a,o,s)}else r.drawImage(n,i,a,o,s)}}function dCt(r,t,e){var n,i=e.text;if(i!=null&&(i+=""),i){r.font=e.font||ku,r.textAlign=e.textAlign,r.textBaseline=e.textBaseline;var a=void 0,o=void 0;r.setLineDash&&e.lineDash&&(n=CL(t),a=n[0],o=n[1]),a&&(r.setLineDash(a),r.lineDashOffset=o),e.strokeFirst?(nS(e)&&r.strokeText(i,e.x,e.y),iS(e)&&r.fillText(i,e.x,e.y)):(iS(e)&&r.fillText(i,e.x,e.y),nS(e)&&r.strokeText(i,e.x,e.y)),a&&r.setLineDash([])}}var lG=["shadowBlur","shadowOffsetX","shadowOffsetY"],uG=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function _Y(r,t,e,n,i){var a=!1;if(!n&&(e=e||{},t===e))return!1;if(n||t.opacity!==e.opacity){Gi(r,i),a=!0;var o=Math.max(Math.min(t.opacity,1),0);r.globalAlpha=isNaN(o)?bc.opacity:o}(n||t.blend!==e.blend)&&(a||(Gi(r,i),a=!0),r.globalCompositeOperation=t.blend||bc.blend);for(var s=0;s<lG.length;s++){var l=lG[s];(n||t[l]!==e[l])&&(a||(Gi(r,i),a=!0),r[l]=r.dpr*(t[l]||0))}return(n||t.shadowColor!==e.shadowColor)&&(a||(Gi(r,i),a=!0),r.shadowColor=t.shadowColor||bc.shadowColor),a}function hG(r,t,e,n,i){var a=ny(t,i.inHover),o=n?null:e&&ny(e,i.inHover)||{};if(a===o)return!1;var s=_Y(r,a,o,n,i);if((n||a.fill!==o.fill)&&(s||(Gi(r,i),s=!0),aG(a.fill)&&(r.fillStyle=a.fill)),(n||a.stroke!==o.stroke)&&(s||(Gi(r,i),s=!0),aG(a.stroke)&&(r.strokeStyle=a.stroke)),(n||a.opacity!==o.opacity)&&(s||(Gi(r,i),s=!0),r.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);r.lineWidth!==u&&(s||(Gi(r,i),s=!0),r.lineWidth=u)}for(var h=0;h<uG.length;h++){var c=uG[h],f=c[0];(n||a[f]!==o[f])&&(s||(Gi(r,i),s=!0),r[f]=a[f]||c[1])}return s}function gCt(r,t,e,n,i){return _Y(r,ny(t,i.inHover),e&&ny(e,i.inHover),n,i)}function xY(r,t){var e=t.transform,n=r.dpr||1;e?r.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):r.setTransform(n,0,0,n,0,0)}function pCt(r,t,e){for(var n=!1,i=0;i<r.length;i++){var a=r[i];n=n||a.isZeroArea(),xY(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}e.allClipped=n}function vCt(r,t){return r&&t?r[0]!==t[0]||r[1]!==t[1]||r[2]!==t[2]||r[3]!==t[3]||r[4]!==t[4]||r[5]!==t[5]:!(!r&&!t)}var cG=1,fG=2,dG=3,gG=4;function mCt(r){var t=iS(r),e=nS(r);return!(r.lineDash||!(+t^+e)||t&&typeof r.fill!="string"||e&&typeof r.stroke!="string"||r.strokePercent<1||r.strokeOpacity<1||r.fillOpacity<1)}function Gi(r,t){t.batchFill&&r.fill(),t.batchStroke&&r.stroke(),t.batchFill="",t.batchStroke=""}function ny(r,t){return t&&r.__hoverStyle||r.style}function SY(r,t){pc(r,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function pc(r,t,e,n){var i=t.transform;if(!t.shouldBePainted(e.viewWidth,e.viewHeight,!1,!1)){t.__dirty&=~ta,t.__isRendered=!1;return}var a=t.__clipPaths,o=e.prevElClipPaths,s=!1,l=!1;if((!o||lCt(a,o))&&(o&&o.length&&(Gi(r,e),r.restore(),l=s=!0,e.prevElClipPaths=null,e.allClipped=!1,e.prevEl=null),a&&a.length&&(Gi(r,e),r.save(),pCt(a,r,e),s=!0),e.prevElClipPaths=a),e.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=e.prevEl;u||(l=s=!0);var h=t instanceof ae&&t.autoBatch&&mCt(t.style);s||vCt(i,u.transform)?(Gi(r,e),xY(r,t)):h||Gi(r,e);var c=ny(t,e.inHover);t instanceof ae?(e.lastDrawType!==cG&&(l=!0,e.lastDrawType=cG),hG(r,t,u,l,e),(!h||!e.batchFill&&!e.batchStroke)&&r.beginPath(),cCt(r,t,c,h),h&&(e.batchFill=c.fill||"",e.batchStroke=c.stroke||"")):t instanceof pg?(e.lastDrawType!==dG&&(l=!0,e.lastDrawType=dG),hG(r,t,u,l,e),dCt(r,t,c)):t instanceof bn?(e.lastDrawType!==fG&&(l=!0,e.lastDrawType=fG),gCt(r,t,u,l,e),fCt(r,t,c)):t.getTemporalDisplayables&&(e.lastDrawType!==gG&&(l=!0,e.lastDrawType=gG),yCt(r,t,e)),h&&n&&Gi(r,e),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),e.prevEl=t,t.__dirty=0,t.__isRendered=!0}function yCt(r,t,e){var n=t.getDisplayables(),i=t.getTemporalDisplayables();r.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:e.viewWidth,viewHeight:e.viewHeight,inHover:e.inHover},o,s;for(o=t.getCursor(),s=n.length;o<s;o++){var l=n[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),pc(r,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,h=i.length;u<h;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),pc(r,l,a,u===h-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,r.restore()}var RE=new qEt,pG=new Hy(100),vG=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function yg(r,t){if(r==="none")return null;var e=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";r.dirty&&RE.delete(r);var a=RE.get(r);if(a)return a;var o=It(r,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/e,RE.set(r,s),r.dirty=!1,s;function l(u){for(var h=[e],c=!0,f=0;f<vG.length;++f){var d=o[vG[f]];if(d!=null&&!rt(d)&&!yt(d)&&!be(d)&&typeof d!="boolean"){c=!1;break}h.push(d)}var g;if(c){g=h.join(",")+(i?"-svg":"");var p=pG.get(g);p&&(i?u.svgElement=p:u.image=p)}var v=TY(o.dashArrayX),m=_Ct(o.dashArrayY),y=wY(o.symbol),_=xCt(v),x=bY(m),w=!i&&Gu.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},T=E(),b;w&&(w.width=T.width*e,w.height=T.height*e,b=w.getContext("2d")),C(),c&&pG.put(g,w||S),u.image=w,u.svgElement=S,u.svgWidth=T.width,u.svgHeight=T.height;function E(){for(var M=1,A=0,R=_.length;A<R;++A)M=D3(M,_[A]);for(var P=1,A=0,R=y.length;A<R;++A)P=D3(P,y[A].length);M*=P;var L=x*_.length*y.length;return{width:Math.max(1,Math.min(M,o.maxTileWidth)),height:Math.max(1,Math.min(L,o.maxTileHeight))}}function C(){b&&(b.clearRect(0,0,w.width,w.height),o.backgroundColor&&(b.fillStyle=o.backgroundColor,b.fillRect(0,0,w.width,w.height)));for(var M=0,A=0;A<m.length;++A)M+=m[A];if(M<=0)return;for(var R=-x,P=0,L=0,D=0;R<T.height;){if(P%2===0){for(var k=L/2%y.length,F=0,B=0,V=0;F<T.width*2;){for(var Y=0,A=0;A<v[D].length;++A)Y+=v[D][A];if(Y<=0)break;if(B%2===0){var q=(1-o.symbolSize)*.5,lt=F+v[D][B]*q,X=R+m[P]*q,St=v[D][B]*o.symbolSize,mt=m[P]*o.symbolSize,$=V/2%y[k].length;K(lt,X,St,mt,y[k][$])}F+=v[D][B],++V,++B,B===v[D].length&&(B=0)}++D,D===v.length&&(D=0)}R+=m[P],++L,++P,P===m.length&&(P=0)}function K(et,W,Z,at,O){var N=i?1:e,H=Ur(O,et*N,W*N,Z*N,at*N,o.color,o.symbolKeepAspect);if(i){var Q=n.painter.renderOneToVNode(H);Q&&S.children.push(Q)}else SY(b,H)}}}}function wY(r){if(!r||r.length===0)return[["rect"]];if(yt(r))return[[r]];for(var t=!0,e=0;e<r.length;++e)if(!yt(r[e])){t=!1;break}if(t)return wY([r]);for(var n=[],e=0;e<r.length;++e)yt(r[e])?n.push([r[e]]):n.push(r[e]);return n}function TY(r){if(!r||r.length===0)return[[0,0]];if(be(r)){var t=Math.ceil(r);return[[t,t]]}for(var e=!0,n=0;n<r.length;++n)if(!be(r[n])){e=!1;break}if(e)return TY([r]);for(var i=[],n=0;n<r.length;++n)if(be(r[n])){var t=Math.ceil(r[n]);i.push([t,t])}else{var t=nt(r[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function _Ct(r){if(!r||typeof r=="object"&&r.length===0)return[0,0];if(be(r)){var t=Math.ceil(r);return[t,t]}var e=nt(r,function(n){return Math.ceil(n)});return r.length%2?e.concat(e):e}function xCt(r){return nt(r,function(t){return bY(t)})}function bY(r){for(var t=0,e=0;e<r.length;++e)t+=r[e];return r.length%2===1?t*2:t}function SCt(r,t){r.eachRawSeries(function(e){if(!r.isSeriesFiltered(e)){var n=e.getData();n.hasItemVisual()&&n.each(function(o){var s=n.getItemVisual(o,"decal");if(s){var l=n.ensureUniqueItemVisual(o,"style");l.decal=yg(s,t)}});var i=n.getVisual("decal");if(i){var a=n.getVisual("style");a.decal=yg(i,t)}}})}var ro=new Za,EY={};function wCt(r,t){EY[r]=t}function TCt(r){return EY[r]}var bCt=1,ECt=800,CCt=900,MCt=1e3,ACt=2e3,ICt=5e3,CY=1e3,RCt=1100,ML=2e3,MY=3e3,PCt=4e3,eT=4500,LCt=4600,DCt=5e3,OCt=6e3,AY=7e3,NCt={PROCESSOR:{FILTER:MCt,SERIES_FILTER:ECt,STATISTIC:ICt},VISUAL:{LAYOUT:CY,PROGRESSIVE_LAYOUT:RCt,GLOBAL:ML,CHART:MY,POST_CHART_LAYOUT:LCt,COMPONENT:PCt,BRUSH:DCt,CHART_ITEM:eT,ARIA:OCt,DECAL:AY}},zn="__flagInMainProcess",Mi="__pendingUpdate",PE="__needsUpdateStatus",mG=/^[a-zA-Z0-9_]+$/,LE="__connectUpdateStatus",yG=0,FCt=1,kCt=2;function IY(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.isDisposed()){this.id;return}return PY(this,r,t)}}function RY(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return PY(this,r,t)}}function PY(r,t,e){return e[0]=e[0]&&e[0].toLowerCase(),Za.prototype[t].apply(r,e)}var LY=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Za),DY=LY.prototype;DY.on=RY("on");DY.off=RY("off");var Ff,DE,E_,Fl,OE,NE,FE,Gp,Bp,_G,xG,kE,SG,C_,wG,OY,ya,TG,NY=function(r){U(t,r);function t(e,n,i){var a=r.call(this,new $Et)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},yt(n)&&(n=FY[n]),a._dom=e;var o="canvas",s="auto",l=!1;i.ssr&&DSt(function(f){var d=Ft(f),g=d.dataIndex;if(g!=null){var p=wt();return p.set("series_index",d.seriesIndex),p.set("data_index",g),d.ssrType&&p.set("ssr_type",d.ssrType),p}});var u=a._zr=I3(e,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Vt(i.useDirtyRect,l),useCoarsePointer:Vt(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=bL(_t(u.flush,u),17),n=Pt(n),n&&V$(n,!0),a._theme=n,a._locale=nbt(i.locale||v$),a._coordSysMgr=new Qy;var h=a._api=wG(a);function c(f,d){return f.__prio-d.__prio}return T1(oS,c),T1(dI,c),a._scheduler=new fY(a,h,dI,oS),a._messageCenter=new LY,a._initEvents(),a.resize=_t(a.resize,a),u.animation.on("frame",a._onframe,a),_G(u,a),xG(u,a),Fx(a),a}return t.prototype._onframe=function(){if(!this._disposed){TG(this);var e=this._scheduler;if(this[Mi]){var n=this[Mi].silent;this[zn]=!0;try{Ff(this),Fl.update.call(this,null,this[Mi].updateParams)}catch(l){throw this[zn]=!1,this[Mi]=null,l}this._zr.flush(),this[zn]=!1,this[Mi]=null,Gp.call(this,n),Bp.call(this,n)}else if(e.unfinished){var i=bCt,a=this._model,o=this._api;e.unfinished=!1;do{var s=+new Date;e.performSeriesTasks(a),e.performDataProcessorTasks(a),NE(this,a),e.performVisualTasks(a),C_(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,n,i){if(!this[zn]){if(this._disposed){this.id;return}var a,o,s;if(Rt(n)&&(i=n.lazyUpdate,a=n.silent,o=n.replaceMerge,s=n.transition,n=n.notMerge),this[zn]=!0,!this._model||n){var l=new Abt(this._api),u=this._theme,h=this._model=new _L;h.scheduler=this._scheduler,h.ssr=this._ssr,h.init(null,null,null,u,this._locale,l)}this._model.setOption(e,{replaceMerge:o},gI);var c={seriesTransition:s,optionChanged:!0};if(i)this[Mi]={silent:a,updateParams:c},this[zn]=!1,this.getZr().wakeUp();else{try{Ff(this),Fl.update.call(this,null,c)}catch(f){throw this[Mi]=null,this[zn]=!1,f}this._ssr||this._zr.flush(),this[Mi]=null,this[zn]=!1,Gp.call(this,a),Bp.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||le.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){e=e||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){e=e||{};var n=this._zr.painter;return n.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){if(le.svgSupported){var e=this._zr,n=e.storage.getDisplayList();return I(n,function(i){i.stopAnimation(null,!0)}),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(this._disposed){this.id;return}e=e||{};var n=e.excludeComponents,i=this._model,a=[],o=this;I(n,function(l){i.eachComponent({mainType:l},function(u){var h=o._componentsMap[u.__viewId];h.group.ignore||(a.push(h),h.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return I(a,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(e){if(this._disposed){this.id;return}var n=e.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(bG[i]){var l=s,u=s,h=-s,c=-s,f=[],d=e&&e.pixelRatio||this.getDevicePixelRatio();I(am,function(_,x){if(_.group===i){var w=n?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas(Pt(e)),S=_.getDom().getBoundingClientRect();l=a(S.left,l),u=a(S.top,u),h=o(S.right,h),c=o(S.bottom,c),f.push({dom:w,left:S.left,top:S.top})}}),l*=d,u*=d,h*=d,c*=d;var g=h-l,p=c-u,v=Gu.createCanvas(),m=I3(v,{renderer:n?"svg":"canvas"});if(m.resize({width:g,height:p}),n){var y="";return I(f,function(_){var x=_.left-l,w=_.top-u;y+='<g transform="translate('+x+","+w+')">'+_.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,e.connectedBackgroundColor&&m.painter.setBackgroundColor(e.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return e.connectedBackgroundColor&&m.add(new ve({shape:{x:0,y:0,width:g,height:p},style:{fill:e.connectedBackgroundColor}})),I(f,function(_){var x=new bn({style:{x:_.left*d-l,y:_.top*d-u,image:_.dom}});m.add(x)}),m.refreshImmediately(),v.toDataURL("image/"+(e&&e.type||"png"))}else return this.getDataURL(e)},t.prototype.convertToPixel=function(e,n){return OE(this,"convertToPixel",e,n)},t.prototype.convertFromPixel=function(e,n){return OE(this,"convertFromPixel",e,n)},t.prototype.containPixel=function(e,n){if(this._disposed){this.id;return}var i=this._model,a,o=Jv(i,e);return I(o,function(s,l){l.indexOf("Models")>=0&&I(s,function(u){var h=u.coordinateSystem;if(h&&h.containPoint)a=a||!!h.containPoint(n);else if(l==="seriesModels"){var c=this._chartsMap[u.__viewId];c&&c.containPoint&&(a=a||c.containPoint(n,u))}},this)},this),!!a},t.prototype.getVisual=function(e,n){var i=this._model,a=Jv(i,e,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?EL(s,l,n):t0(s,n)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e=this;I(GCt,function(n){var i=function(a){var o=e.getModel(),s=a.target,l,u=n==="globalout";if(u?l={}:s&&dc(s,function(g){var p=Ft(g);if(p&&p.dataIndex!=null){var v=p.dataModel||o.getSeriesByIndex(p.seriesIndex);return l=v&&v.getDataParams(p.dataIndex,p.dataType,s)||{},!0}else if(p.eventData)return l=tt({},p.eventData),!0},!0),l){var h=l.componentType,c=l.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",c=l.seriesIndex);var f=h&&c!=null&&o.getComponent(h,c),d=f&&e[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];l.event=a,l.type=n,e._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:f,view:d},e.trigger(n,l)}};i.zrEventfulCallAtLast=!0,e._zr.on(n,i,e)}),I(im,function(n,i){e._messageCenter.on(i,function(a){this.trigger(i,a)},e)}),I(["selectchanged"],function(n){e._messageCenter.on(n,function(i){this.trigger(n,i)},e)}),ZEt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var e=this.getDom();e&&AH(this.getDom(),IL,"");var n=this,i=n._api,a=n._model;I(n._componentsViews,function(o){o.dispose(a,i)}),I(n._chartsViews,function(o){o.dispose(a,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete am[n.id]},t.prototype.resize=function(e){if(!this[zn]){if(this._disposed){this.id;return}this._zr.resize(e);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),a=e&&e.silent;this[Mi]&&(a==null&&(a=this[Mi].silent),i=!0,this[Mi]=null),this[zn]=!0;try{i&&Ff(this),Fl.update.call(this,{type:"resize",animation:tt({duration:0},e&&e.animation)})}catch(o){throw this[zn]=!1,o}this[zn]=!1,Gp.call(this,a),Bp.call(this,a)}}},t.prototype.showLoading=function(e,n){if(this._disposed){this.id;return}if(Rt(e)&&(n=e,e=""),e=e||"default",this.hideLoading(),!!pI[e]){var i=pI[e](this._api,n),a=this._zr;this._loadingFX=i,a.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(e){var n=tt({},e);return n.type=im[e.type],n},t.prototype.dispatchAction=function(e,n){if(this._disposed){this.id;return}if(Rt(n)||(n={silent:!!n}),!!aS[e.type]&&this._model){if(this[zn]){this._pendingActions.push(e);return}var i=n.silent;FE.call(this,e,i);var a=n.flush;a?this._zr.flush():a!==!1&&le.browser.weChat&&this._throttledZrFlush(),Gp.call(this,i),Bp.call(this,i)}},t.prototype.updateLabelLayout=function(){ro.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed){this.id;return}var n=e.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(n);a.appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Ff=function(c){var f=c._scheduler;f.restorePipelines(c._model),f.prepareStageTasks(),DE(c,!0),DE(c,!1),f.plan()},DE=function(c,f){for(var d=c._model,g=c._scheduler,p=f?c._componentsViews:c._chartsViews,v=f?c._componentsMap:c._chartsMap,m=c._zr,y=c._api,_=0;_<p.length;_++)p[_].__alive=!1;f?d.eachComponent(function(S,T){S!=="series"&&x(T)}):d.eachSeries(x);function x(S){var T=S.__requireNewView;S.__requireNewView=!1;var b="_ec_"+S.id+"_"+S.type,E=!T&&v[b];if(!E){var C=Qo(S.type),M=f?yr.getClass(C.main,C.sub):Ke.getClass(C.sub);E=new M,E.init(d,y),v[b]=E,p.push(E),m.add(E.group)}S.__viewId=E.__id=b,E.__alive=!0,E.__model=S,E.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!f&&g.prepareView(E,S,d,y)}for(var _=0;_<p.length;){var w=p[_];w.__alive?_++:(!f&&w.renderTask.dispose(),m.remove(w.group),w.dispose(d,y),p.splice(_,1),v[w.__id]===w&&delete v[w.__id],w.__id=w.group.__ecComponentInfo=null)}},E_=function(c,f,d,g,p){var v=c._model;if(v.setUpdatePayload(d),!g){I([].concat(c._componentsViews).concat(c._chartsViews),w);return}var m={};m[g+"Id"]=d[g+"Id"],m[g+"Index"]=d[g+"Index"],m[g+"Name"]=d[g+"Name"];var y={mainType:g,query:m};p&&(y.subType=p);var _=d.excludeSeriesId,x;_!=null&&(x=wt(),I(Ye(_),function(S){var T=Zr(S,null);T!=null&&x.set(T,!0)})),v&&v.eachComponent(y,function(S){var T=x&&x.get(S.id)!=null;if(!T)if(a5(d))if(S instanceof lr)d.type===Ec&&!d.notBlur&&!S.get(["emphasis","disabled"])&&rTt(S,d,c._api);else{var b=iL(S.mainType,S.componentIndex,d.name,c._api),E=b.focusSelf,C=b.dispatchers;d.type===Ec&&E&&!d.notBlur&&jA(S.mainType,S.componentIndex,c._api),C&&I(C,function(M){d.type===Ec?ul(M):hl(M)})}else qA(d)&&S instanceof lr&&(aTt(S,d,c._api),n5(S),ya(c))},c),v&&v.eachComponent(y,function(S){var T=x&&x.get(S.id)!=null;T||w(c[g==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},c);function w(S){S&&S.__alive&&S[f]&&S[f](S.__model,v,c._api,d)}},Fl={prepareAndUpdate:function(c){Ff(this),Fl.update.call(this,c,{optionChanged:c.newOption!=null})},update:function(c,f){var d=this._model,g=this._api,p=this._zr,v=this._coordSysMgr,m=this._scheduler;if(d){d.setUpdatePayload(c),m.restoreData(d,c),m.performSeriesTasks(d),v.create(d,g),m.performDataProcessorTasks(d,c),NE(this,d),v.update(d,g),e(d),m.performVisualTasks(d,c),kE(this,d,g,c,f);var y=d.get("backgroundColor")||"transparent",_=d.get("darkMode");p.setBackgroundColor(y),_!=null&&_!=="auto"&&p.setDarkMode(_),ro.trigger("afterupdate",d,g)}},updateTransform:function(c){var f=this,d=this._model,g=this._api;if(d){d.setUpdatePayload(c);var p=[];d.eachComponent(function(m,y){if(m!=="series"){var _=f.getViewOfComponentModel(y);if(_&&_.__alive)if(_.updateTransform){var x=_.updateTransform(y,d,g,c);x&&x.update&&p.push(_)}else p.push(_)}});var v=wt();d.eachSeries(function(m){var y=f._chartsMap[m.__viewId];if(y.updateTransform){var _=y.updateTransform(m,d,g,c);_&&_.update&&v.set(m.uid,1)}else v.set(m.uid,1)}),e(d),this._scheduler.performVisualTasks(d,c,{setDirty:!0,dirtyMap:v}),C_(this,d,g,c,{},v),ro.trigger("afterupdate",d,g)}},updateView:function(c){var f=this._model;f&&(f.setUpdatePayload(c),Ke.markUpdateMethod(c,"updateView"),e(f),this._scheduler.performVisualTasks(f,c,{setDirty:!0}),kE(this,f,this._api,c,{}),ro.trigger("afterupdate",f,this._api))},updateVisual:function(c){var f=this,d=this._model;d&&(d.setUpdatePayload(c),d.eachSeries(function(g){g.getData().clearAllVisual()}),Ke.markUpdateMethod(c,"updateVisual"),e(d),this._scheduler.performVisualTasks(d,c,{visualType:"visual",setDirty:!0}),d.eachComponent(function(g,p){if(g!=="series"){var v=f.getViewOfComponentModel(p);v&&v.__alive&&v.updateVisual(p,d,f._api,c)}}),d.eachSeries(function(g){var p=f._chartsMap[g.__viewId];p.updateVisual(g,d,f._api,c)}),ro.trigger("afterupdate",d,this._api))},updateLayout:function(c){Fl.update.call(this,c)}},OE=function(c,f,d,g){if(c._disposed){c.id;return}for(var p=c._model,v=c._coordSysMgr.getCoordinateSystems(),m,y=Jv(p,d),_=0;_<v.length;_++){var x=v[_];if(x[f]&&(m=x[f](p,y,g))!=null)return m}},NE=function(c,f){var d=c._chartsMap,g=c._scheduler;f.eachSeries(function(p){g.updateStreamModes(p,d[p.__viewId])})},FE=function(c,f){var d=this,g=this.getModel(),p=c.type,v=c.escapeConnect,m=aS[p],y=m.actionInfo,_=(y.update||"update").split(":"),x=_.pop(),w=_[0]!=null&&Qo(_[0]);this[zn]=!0;var S=[c],T=!1;c.batch&&(T=!0,S=nt(c.batch,function(P){return P=It(tt({},P),c),P.batch=null,P}));var b=[],E,C=qA(c),M=a5(c);if(M&&jH(this._api),I(S,function(P){if(E=m.action(P,d._model,d._api),E=E||tt({},P),E.type=y.event||E.type,b.push(E),M){var L=KP(c),D=L.queryOptionMap,k=L.mainTypeSpecified,F=k?D.keys()[0]:"series";E_(d,x,P,F),ya(d)}else C?(E_(d,x,P,"series"),ya(d)):w&&E_(d,x,P,w.main,w.sub)}),x!=="none"&&!M&&!C&&!w)try{this[Mi]?(Ff(this),Fl.update.call(this,c),this[Mi]=null):Fl[x].call(this,c)}catch(P){throw this[zn]=!1,P}if(T?E={type:y.event||p,escapeConnect:v,batch:b}:E=b[0],this[zn]=!1,!f){var A=this._messageCenter;if(A.trigger(E.type,E),C){var R={type:"selectchanged",escapeConnect:v,selected:oTt(g),isFromClick:c.isFromClick||!1,fromAction:c.type,fromActionPayload:c};A.trigger(R.type,R)}}},Gp=function(c){for(var f=this._pendingActions;f.length;){var d=f.shift();FE.call(this,d,c)}},Bp=function(c){!c&&this.trigger("updated")},_G=function(c,f){c.on("rendered",function(d){f.trigger("rendered",d),c.animation.isFinished()&&!f[Mi]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},xG=function(c,f){c.on("mouseover",function(d){var g=d.target,p=dc(g,Km);p&&(nTt(p,d,f._api),ya(f))}).on("mouseout",function(d){var g=d.target,p=dc(g,Km);p&&(iTt(p,d,f._api),ya(f))}).on("click",function(d){var g=d.target,p=dc(g,function(y){return Ft(y).dataIndex!=null},!0);if(p){var v=p.selected?"unselect":"select",m=Ft(p);f._api.dispatchAction({type:v,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function e(c){c.clearColorPalette(),c.eachSeries(function(f){f.clearColorPalette()})}function n(c){var f=[],d=[],g=!1;if(c.eachComponent(function(y,_){var x=_.get("zlevel")||0,w=_.get("z")||0,S=_.getZLevelKey();g=g||!!S,(y==="series"?d:f).push({zlevel:x,z:w,idx:_.componentIndex,type:y,key:S})}),g){var p=f.concat(d),v,m;T1(p,function(y,_){return y.zlevel===_.zlevel?y.z-_.z:y.zlevel-_.zlevel}),I(p,function(y){var _=c.getComponent(y.type,y.idx),x=y.zlevel,w=y.key;v!=null&&(x=Math.max(v,x)),w?(x===v&&w!==m&&x++,m=w):m&&(x===v&&x++,m=""),v=x,_.setZLevel(x)})}}kE=function(c,f,d,g,p){n(f),SG(c,f,d,g,p),I(c._chartsViews,function(v){v.__alive=!1}),C_(c,f,d,g,p),I(c._chartsViews,function(v){v.__alive||v.remove(f,d)})},SG=function(c,f,d,g,p,v){I(v||c._componentsViews,function(m){var y=m.__model;u(y,m),m.render(y,f,d,g),s(y,m),h(y,m)})},C_=function(c,f,d,g,p,v){var m=c._scheduler;p=tt(p||{},{updatedSeries:f.getSeries()}),ro.trigger("series:beforeupdate",f,d,p);var y=!1;f.eachSeries(function(_){var x=c._chartsMap[_.__viewId];x.__alive=!0;var w=x.renderTask;m.updatePayload(w,g),u(_,x),v&&v.get(_.uid)&&w.dirty(),w.perform(m.getPerformArgs(w))&&(y=!0),x.group.silent=!!_.get("silent"),o(_,x),n5(_)}),m.unfinished=y||m.unfinished,ro.trigger("series:layoutlabels",f,d,p),ro.trigger("series:transition",f,d,p),f.eachSeries(function(_){var x=c._chartsMap[_.__viewId];s(_,x),h(_,x)}),a(c,f),ro.trigger("series:afterupdate",f,d,p)},ya=function(c){c[PE]=!0,c.getZr().wakeUp()},TG=function(c){c[PE]&&(c.getZr().storage.traverse(function(f){Wd(f)||i(f)}),c[PE]=!1)};function i(c){for(var f=[],d=c.currentStates,g=0;g<d.length;g++){var p=d[g];p==="emphasis"||p==="blur"||p==="select"||f.push(p)}c.selected&&c.states.select&&f.push("select"),c.hoverState===Bw&&c.states.emphasis?f.push("emphasis"):c.hoverState===Xy&&c.states.blur&&f.push("blur"),c.useStates(f)}function a(c,f){var d=c._zr,g=d.storage,p=0;g.traverse(function(v){v.isGroup||p++}),p>f.get("hoverLayerThreshold")&&!le.node&&!le.worker&&f.eachSeries(function(v){if(!v.preventUsingHoverLayer){var m=c._chartsMap[v.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function o(c,f){var d=c.get("blendMode")||null;f.eachRendered(function(g){g.isGroup||(g.style.blend=d)})}function s(c,f){if(!c.preventAutoZ){var d=c.get("z")||0,g=c.get("zlevel")||0;f.eachRendered(function(p){return l(p,d,g,-1/0),!0})}}function l(c,f,d,g){var p=c.getTextContent(),v=c.getTextGuideLine(),m=c.isGroup;if(m)for(var y=c.childrenRef(),_=0;_<y.length;_++)g=Math.max(l(y[_],f,d,g),g);else c.z=f,c.zlevel=d,g=Math.max(c.z2,g);if(p&&(p.z=f,p.zlevel=d,isFinite(g)&&(p.z2=g+2)),v){var x=c.textGuideLineConfig;v.z=f,v.zlevel=d,isFinite(g)&&(v.z2=g+(x&&x.showAbove?1:-1))}return g}function u(c,f){f.eachRendered(function(d){if(!Wd(d)){var g=d.getTextContent(),p=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function h(c,f){var d=c.getModel("stateAnimation"),g=c.isAnimationEnabled(),p=d.get("duration"),v=p>0?{duration:p,delay:d.get("delay"),easing:d.get("easing")}:null;f.eachRendered(function(m){if(m.states&&m.states.emphasis){if(Wd(m))return;if(m instanceof ae&&cTt(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(g){m.stateTransition=v;var _=m.getTextContent(),x=m.getTextGuideLine();_&&(_.stateTransition=v),x&&(x.stateTransition=v)}m.__dirty&&i(m)}})}wG=function(c){return new(function(f){U(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return c._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(g){for(;g;){var p=g.__ecComponentInfo;if(p!=null)return c._model.getComponent(p.mainType,p.index);g=g.parent}},d.prototype.enterEmphasis=function(g,p){ul(g,p),ya(c)},d.prototype.leaveEmphasis=function(g,p){hl(g,p),ya(c)},d.prototype.enterBlur=function(g){$H(g),ya(c)},d.prototype.leaveBlur=function(g){nL(g),ya(c)},d.prototype.enterSelect=function(g){YH(g),ya(c)},d.prototype.leaveSelect=function(g){XH(g),ya(c)},d.prototype.getModel=function(){return c.getModel()},d.prototype.getViewOfComponentModel=function(g){return c.getViewOfComponentModel(g)},d.prototype.getViewOfSeriesModel=function(g){return c.getViewOfSeriesModel(g)},d}(B$))(c)},OY=function(c){function f(d,g){for(var p=0;p<d.length;p++){var v=d[p];v[LE]=g}}I(im,function(d,g){c._messageCenter.on(g,function(p){if(bG[c.group]&&c[LE]!==yG){if(p&&p.escapeConnect)return;var v=c.makeActionFromEvent(p),m=[];I(am,function(y){y!==c&&y.group===c.group&&m.push(y)}),f(m,yG),I(m,function(y){y[LE]!==FCt&&y.dispatchAction(v)}),f(m,kCt)}})})}}(),t}(Za),AL=NY.prototype;AL.on=IY("on");AL.off=IY("off");AL.one=function(r,t,e){var n=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];t&&t.apply&&t.apply(this,a),n.off(r,i)}this.on.call(this,r,i,e)};var GCt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var aS={},im={},dI=[],gI=[],oS=[],FY={},pI={},am={},bG={},BCt=+new Date-0,IL="_echarts_instance_";function zCt(r,t,e){{var n=VCt(r);if(n)return n}var i=new NY(r,t,e);return i.id="ec_"+BCt++,am[i.id]=i,AH(r,IL,i.id),OY(i),ro.trigger("afterinit",i),i}function VCt(r){return am[QSt(r,IL)]}function kY(r,t){FY[r]=t}function GY(r){te(gI,r)<0&&gI.push(r)}function BY(r,t){PL(dI,r,t,ACt)}function UCt(r){RL("afterinit",r)}function WCt(r){RL("afterupdate",r)}function RL(r,t){ro.on(r,t)}function _s(r,t,e){At(t)&&(e=t,t="");var n=Rt(r)?r.type:[r,r={event:t}][0];r.event=(r.event||n).toLowerCase(),t=r.event,!im[t]&&(xi(mG.test(n)&&mG.test(t)),aS[n]||(aS[n]={action:e,actionInfo:r}),im[t]=n)}function zY(r,t){Qy.register(r,t)}function HCt(r,t){PL(oS,r,t,CY,"layout")}function of(r,t){PL(oS,r,t,MY,"visual")}var EG=[];function PL(r,t,e,n,i){if((At(t)||Rt(t))&&(e=t,t=n),!(te(EG,e)>=0)){EG.push(e);var a=fY.wrapStageHandler(e,i);a.__prio=t,a.__raw=e,r.push(a)}}function VY(r,t){pI[r]=t}function $Ct(r,t,e){var n=TCt("registerMap");n&&n(r,t,e)}var YCt=oEt;of(ML,PEt);of(eT,LEt);of(eT,DEt);of(ML,YEt);of(eT,XEt);of(AY,SCt);GY(V$);BY(CCt,zbt);VY("default",OEt);_s({type:Ec,event:Ec,update:Ec},Lr);_s({type:A1,event:A1,update:A1},Lr);_s({type:Qv,event:Qv,update:Qv},Lr);_s({type:I1,event:I1,update:I1},Lr);_s({type:tm,event:tm,update:tm},Lr);kY("light",HEt);kY("dark",vY);var CG=[],XCt={registerPreprocessor:GY,registerProcessor:BY,registerPostInit:UCt,registerPostUpdate:WCt,registerUpdateLifecycle:RL,registerAction:_s,registerCoordinateSystem:zY,registerLayout:HCt,registerVisual:of,registerTransform:YCt,registerLoading:VY,registerMap:$Ct,registerImpl:wCt,PRIORITY:NCt,ComponentModel:ue,ComponentView:yr,SeriesModel:lr,ChartView:Ke,registerComponentModel:function(r){ue.registerClass(r)},registerComponentView:function(r){yr.registerClass(r)},registerSeriesModel:function(r){lr.registerClass(r)},registerChartView:function(r){Ke.registerClass(r)},registerSubTypeDefaulter:function(r,t){ue.registerSubTypeDefaulter(r,t)},registerPainter:function(r,t){PSt(r,t)}};function ne(r){if(rt(r)){I(r,function(t){ne(t)});return}te(CG,r)>=0||(CG.push(r),At(r)&&(r={install:r}),r.install(XCt))}function zp(r){return r==null?0:r.length||1}function MG(r){return r}var cl=function(){function r(t,e,n,i,a,o){this._old=t,this._new=e,this._oldKeyGetter=n||MG,this._newKeyGetter=i||MG,this.context=a,this._diffModeMultiple=o==="multiple"}return r.prototype.add=function(t){return this._add=t,this},r.prototype.update=function(t){return this._update=t,this},r.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},r.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},r.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},r.prototype.remove=function(t){return this._remove=t,this},r.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},r.prototype._executeOneToOne=function(){var t=this._old,e=this._new,n={},i=new Array(t.length),a=new Array(e.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(e,n,a,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=i[o],l=n[s],u=zp(l);if(u>1){var h=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(h,o)}else u===1?(n[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,n)},r.prototype._executeMultiple=function(){var t=this._old,e=this._new,n={},i={},a=[],o=[];this._initIndexMap(t,n,a,"_oldKeyGetter"),this._initIndexMap(e,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],u=n[l],h=i[l],c=zp(u),f=zp(h);if(c>1&&f===1)this._updateManyToOne&&this._updateManyToOne(h,u),i[l]=null;else if(c===1&&f>1)this._updateOneToMany&&this._updateOneToMany(h,u),i[l]=null;else if(c===1&&f===1)this._update&&this._update(h,u),i[l]=null;else if(c>1&&f>1)this._updateManyToMany&&this._updateManyToMany(h,u),i[l]=null;else if(c>1)for(var d=0;d<c;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(o,i)},r.prototype._performRestAdd=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],a=e[i],o=zp(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);e[i]=null}},r.prototype._initIndexMap=function(t,e,n,i){for(var a=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[i](t[o],o);if(a||(n[o]=s),!!e){var l=e[s],u=zp(l);u===0?(e[s]=o,a&&n.push(s)):u===1?e[s]=[l,o]:l.push(o)}}},r}(),ZCt=function(){function r(t,e){this._encode=t,this._schema=e}return r.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},r.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},r}();function jCt(r,t){var e={},n=e.encode={},i=wt(),a=[],o=[],s={};I(r.dimensions,function(f){var d=r.getDimensionInfo(f),g=d.coordDim;if(g){var p=d.coordDimIndex;GE(n,g)[p]=f,d.isExtraCoord||(i.set(g,1),KCt(d.type)&&(a[0]=f),GE(s,g)[p]=r.getDimensionIndex(d.name)),d.defaultTooltip&&o.push(f)}L$.each(function(v,m){var y=GE(n,m),_=d.otherDims[m];_!=null&&_!==!1&&(y[_]=d.name)})});var l=[],u={};i.each(function(f,d){var g=n[d];u[d]=g[0],l=l.concat(g)}),e.dataDimsOnCoord=l,e.dataDimIndicesOnCoord=nt(l,function(f){return r.getDimensionInfo(f).storeDimIndex}),e.encodeFirstDimNotExtra=u;var h=n.label;h&&h.length&&(a=h.slice());var c=n.tooltip;return c&&c.length?o=c.slice():o.length||(o=a.slice()),n.defaultedLabel=a,n.defaultedTooltip=o,e.userOutput=new ZCt(s,t),e}function GE(r,t){return r.hasOwnProperty(t)||(r[t]=[]),r[t]}function sS(r){return r==="category"?"ordinal":r==="time"?"time":"float"}function KCt(r){return!(r==="ordinal"||r==="time")}var O1=function(){function r(t){this.otherDims={},t!=null&&tt(this,t)}return r}(),qCt=me(),JCt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},UY=function(){function r(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return r.prototype.isDimensionOmitted=function(){return this._dimOmitted},r.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=$Y(this.source)))},r.prototype.getSourceDimensionIndex=function(t){return Vt(this._dimNameMap.get(t),-1)},r.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},r.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=W$(this.source),n=!YY(t),i="",a=[],o=0,s=0;o<t;o++){var l=void 0,u=void 0,h=void 0,c=this.dimensions[s];if(c&&c.storeDimIndex===o)l=e?c.name:null,u=c.type,h=c.ordinalMeta,s++;else{var f=this.getSourceDimension(o);f&&(l=e?f.name:null,u=f.type)}a.push({property:l,type:u,ordinalMeta:h}),e&&l!=null&&(!c||!c.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=JCt[u]||"f",h&&(i+=h.uid),i+="$"}var d=this.source,g=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:a,hash:g}},r.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,n=0;e<this._fullDimCount;e++){var i=void 0,a=this.dimensions[n];if(a&&a.storeDimIndex===e)a.isCalculationCoord||(i=a.name),n++;else{var o=this.getSourceDimension(e);o&&(i=o.name)}t.push(i)}return t},r.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},r}();function WY(r){return r instanceof UY}function HY(r){for(var t=wt(),e=0;e<(r||[]).length;e++){var n=r[e],i=Rt(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,e)}return t}function $Y(r){var t=qCt(r);return t.dimNameMap||(t.dimNameMap=HY(r.dimensionsDefine))}function YY(r){return r>30}var Vp=Rt,kl=nt,QCt=typeof Int32Array>"u"?Array:Int32Array,tMt="e\0\0",AG=-1,eMt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],rMt=["_approximateExtent"],IG,M_,Up,Wp,BE,A_,zE,vi=function(){function r(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;WY(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var a={},o=[],s={},l=!1,u={},h=0;h<n.length;h++){var c=n[h],f=yt(c)?new O1({name:c}):c instanceof O1?c:new O1(c),d=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=d,f.coordDimIndex=0);var g=f.otherDims=f.otherDims||{};o.push(d),a[d]=f,u[d]!=null&&(l=!0),f.createInvertedIndices&&(s[d]=[]),g.itemName===0&&(this._nameDimIdx=h),g.itemId===0&&(this._idDimIdx=h),i&&(f.storeDimIndex=h)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=e,this._invertedIndicesMap=s,this._dimOmitted){var p=this._dimIdxToName=wt();I(o,function(v){p.set(a[v].storeDimIndex,v)})}}return r.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var n=this._dimIdxToName.get(e);if(n!=null)return n;var i=this._schema.getSourceDimension(e);if(i)return i.name},r.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},r.prototype._recognizeDimIndex=function(t){if(be(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},r.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},r.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},r.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(n){return e.hasOwnProperty(n)?e[n]:void 0}:function(n){return e[n]}},r.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},r.prototype.mapDimension=function(t,e){var n=this._dimSummary;if(e==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[e]:null},r.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,n=e.encode[t];return(n||[]).slice()},r.prototype.getStore=function(){return this._store},r.prototype.initData=function(t,e,n){var i=this,a;if(t instanceof oI&&(a=t),!a){var o=this.dimensions,s=xL(t)||Qn(t)?new H$(t,o.length):t;a=new oI;var l=kl(o,function(u){return{type:i._dimInfos[u].type,property:u}});a.initData(s,l,n)}this._store=a,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=jCt(this,this._schema),this.userOutput=this._dimSummary.userOutput},r.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},r.prototype.appendValues=function(t,e){var n=this._store.appendValues(t,e.length),i=n.start,a=n.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=e[l],o&&zE(this,s)}},r.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,n=0;n<e.length;n++){var i=this._dimInfos[e[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},r.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Su&&!t.fillStorage},r.prototype._doInit=function(t,e){if(!(t>=e)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===ja;if(l&&!i.pure)for(var u=[],h=t;h<e;h++){var c=i.getItem(h,u);if(!this.hasItemOption&&zSt(c)&&(this.hasItemOption=!0),c){var f=c.name;a[h]==null&&f!=null&&(a[h]=Zr(f,null));var d=c.id;o[h]==null&&d!=null&&(o[h]=Zr(d,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<e;h++)zE(this,h);IG(this)}},r.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},r.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},r.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},r.prototype.setCalculationInfo=function(t,e){Vp(t)?tt(this._calculationInfo,t):this._calculationInfo[t]=e},r.prototype.getName=function(t){var e=this.getRawIndex(t),n=this._nameList[e];return n==null&&this._nameDimIdx!=null&&(n=Up(this,this._nameDimIdx,e)),n==null&&(n=""),n},r.prototype._getCategory=function(t,e){var n=this._store.get(t,e),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},r.prototype.getId=function(t){return M_(this,this.getRawIndex(t))},r.prototype.count=function(){return this._store.count()},r.prototype.get=function(t,e){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,e)},r.prototype.getByRawIndex=function(t,e){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,e)},r.prototype.getIndices=function(){return this._store.getIndices()},r.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},r.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},r.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},r.prototype.getValues=function(t,e){var n=this,i=this._store;return rt(t)?i.getValues(kl(t,function(a){return n._getStoreDimIndex(a)}),e):i.getValues(t)},r.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,n=0,i=e.length;n<i;n++)if(isNaN(this._store.get(e[n],t)))return!1;return!0},r.prototype.indexOfName=function(t){for(var e=0,n=this._store.count();e<n;e++)if(this.getName(e)===t)return e;return-1},r.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},r.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},r.prototype.rawIndexOf=function(t,e){var n=t&&this._invertedIndicesMap[t],i=n[e];return i==null||isNaN(i)?AG:i},r.prototype.indicesOfNearest=function(t,e,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,n)},r.prototype.each=function(t,e,n){At(t)&&(n=e,e=t,t=[]);var i=n||this,a=kl(Wp(t),this._getStoreDimIndex,this);this._store.each(a,i?_t(e,i):e)},r.prototype.filterSelf=function(t,e,n){At(t)&&(n=e,e=t,t=[]);var i=n||this,a=kl(Wp(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?_t(e,i):e),this},r.prototype.selectRange=function(t){var e=this,n={},i=he(t);return I(i,function(a){var o=e._getStoreDimIndex(a);n[o]=t[a]}),this._store=this._store.selectRange(n),this},r.prototype.mapArray=function(t,e,n){At(t)&&(n=e,e=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(e&&e.apply(this,arguments))},n),i},r.prototype.map=function(t,e,n,i){var a=n||i||this,o=kl(Wp(t),this._getStoreDimIndex,this),s=A_(this);return s._store=this._store.map(o,a?_t(e,a):e),s},r.prototype.modify=function(t,e,n,i){var a=n||i||this,o=kl(Wp(t),this._getStoreDimIndex,this);this._store.modify(o,a?_t(e,a):e)},r.prototype.downSample=function(t,e,n,i){var a=A_(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),e,n,i),a},r.prototype.lttbDownSample=function(t,e){var n=A_(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),n},r.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},r.prototype.getItemModel=function(t){var e=this.hostModel,n=this.getRawDataItem(t);return new Oe(n,e,e&&e.ecModel)},r.prototype.diff=function(t){var e=this;return new cl(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return M_(t,n)},function(n){return M_(e,n)})},r.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},r.prototype.setVisual=function(t,e){this._visual=this._visual||{},Vp(t)?tt(this._visual,t):this._visual[t]=e},r.prototype.getItemVisual=function(t,e){var n=this._itemVisuals[t],i=n&&n[e];return i??this.getVisual(e)},r.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},r.prototype.ensureUniqueItemVisual=function(t,e){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var a=i[e];return a==null&&(a=this.getVisual(e),rt(a)?a=a.slice():Vp(a)&&(a=tt({},a)),i[e]=a),a},r.prototype.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,Vp(e)?tt(i,e):i[e]=n},r.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},r.prototype.setLayout=function(t,e){Vp(t)?tt(this._layout,t):this._layout[t]=e},r.prototype.getLayout=function(t){return this._layout[t]},r.prototype.getItemLayout=function(t){return this._itemLayouts[t]},r.prototype.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?tt(this._itemLayouts[t]||{},e):e},r.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},r.prototype.setItemGraphicEl=function(t,e){var n=this.hostModel&&this.hostModel.seriesIndex;XA(n,this.dataType,t,e),this._graphicEls[t]=e},r.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},r.prototype.eachItemGraphicEl=function(t,e){I(this._graphicEls,function(n,i){n&&t&&t.call(e,n,i)})},r.prototype.cloneShallow=function(t){return t||(t=new r(this._schema?this._schema:kl(this.dimensions,this._getDimInfo,this),this.hostModel)),BE(t,this),t._store=this._store,t},r.prototype.wrapMethod=function(t,e){var n=this[t];At(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return e.apply(this,[i].concat(zP(arguments)))})},r.internalField=function(){IG=function(t){var e=t._invertedIndicesMap;I(e,function(n,i){var a=t._dimInfos[i],o=a.ordinalMeta,s=t._store;if(o){n=e[i]=new QCt(o.categories.length);for(var l=0;l<n.length;l++)n[l]=AG;for(var l=0;l<s.count();l++)n[s.get(a.storeDimIndex,l)]=l}})},Up=function(t,e,n){return Zr(t._getCategory(e,n),null)},M_=function(t,e){var n=t._idList[e];return n==null&&t._idDimIdx!=null&&(n=Up(t,t._idDimIdx,e)),n==null&&(n=tMt+e),n},Wp=function(t){return rt(t)||(t=t!=null?[t]:[]),t},A_=function(t){var e=new r(t._schema?t._schema:kl(t.dimensions,t._getDimInfo,t),t.hostModel);return BE(e,t),e},BE=function(t,e){I(eMt.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,I(rMt,function(n){t[n]=Pt(e[n])}),t._calculationInfo=tt({},e._calculationInfo)},zE=function(t,e){var n=t._nameList,i=t._idList,a=t._nameDimIdx,o=t._idDimIdx,s=n[e],l=i[e];if(s==null&&a!=null&&(n[e]=s=Up(t,a,e)),l==null&&o!=null&&(i[e]=l=Up(t,o,e)),l==null&&s!=null){var u=t._nameRepeatCount,h=u[s]=(u[s]||0)+1;l=s,h>1&&(l+="__ec__"+h),i[e]=l}}}(),r}();function e0(r,t){xL(r)||(r=SL(r)),t=t||{};var e=t.coordDimensions||[],n=t.dimensionsDefine||r.dimensionsDefine||[],i=wt(),a=[],o=iMt(r,e,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&YY(o),l=n===r.dimensionsDefine,u=l?$Y(r):HY(n),h=t.encodeDefine;!h&&t.encodeDefaulter&&(h=t.encodeDefaulter(r,o));for(var c=wt(h),f=new J$(o),d=0;d<f.length;d++)f[d]=-1;function g(E){var C=f[E];if(C<0){var M=n[E],A=Rt(M)?M:{name:M},R=new O1,P=A.name;P!=null&&u.get(P)!=null&&(R.name=R.displayName=P),A.type!=null&&(R.type=A.type),A.displayName!=null&&(R.displayName=A.displayName);var L=a.length;return f[E]=L,R.storeDimIndex=E,a.push(R),R}return a[C]}if(!s)for(var d=0;d<o;d++)g(d);c.each(function(E,C){var M=Ye(E).slice();if(M.length===1&&!yt(M[0])&&M[0]<0){c.set(C,!1);return}var A=c.set(C,[]);I(M,function(R,P){var L=yt(R)?u.get(R):R;L!=null&&L<o&&(A[P]=L,v(g(L),C,P))})});var p=0;I(e,function(E){var C,M,A,R;if(yt(E))C=E,R={};else{R=E,C=R.name;var P=R.ordinalMeta;R.ordinalMeta=null,R=tt({},R),R.ordinalMeta=P,M=R.dimsDef,A=R.otherDims,R.name=R.coordDim=R.coordDimIndex=R.dimsDef=R.otherDims=null}var L=c.get(C);if(L!==!1){if(L=Ye(L),!L.length)for(var D=0;D<(M&&M.length||1);D++){for(;p<o&&g(p).coordDim!=null;)p++;p<o&&L.push(p++)}I(L,function(k,F){var B=g(k);if(l&&R.type!=null&&(B.type=R.type),v(It(B,R),C,F),B.name==null&&M){var V=M[F];!Rt(V)&&(V={name:V}),B.name=B.displayName=V.name,B.defaultTooltip=V.defaultTooltip}A&&It(B.otherDims,A)})}});function v(E,C,M){L$.get(C)!=null?E.otherDims[C]=M:(E.coordDim=C,E.coordDimIndex=M,i.set(C,!0))}var m=t.generateCoord,y=t.generateCoordCount,_=y!=null;y=m?y||1:0;var x=m||"value";function w(E){E.name==null&&(E.name=E.coordDim)}if(s)I(a,function(E){w(E)}),a.sort(function(E,C){return E.storeDimIndex-C.storeDimIndex});else for(var S=0;S<o;S++){var T=g(S),b=T.coordDim;b==null&&(T.coordDim=aMt(x,i,_),T.coordDimIndex=0,(!m||y<=0)&&(T.isExtraCoord=!0),y--),w(T),T.type==null&&(F$(r,S)===An.Must||T.isExtraCoord&&(T.otherDims.itemName!=null||T.otherDims.seriesName!=null))&&(T.type="ordinal")}return nMt(a),new UY({source:r,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function nMt(r){for(var t=wt(),e=0;e<r.length;e++){var n=r[e],i=n.name,a=t.get(i)||0;a>0&&(n.name=i+(a-1)),a++,t.set(i,a)}}function iMt(r,t,e,n){var i=Math.max(r.dimensionsDetectedCount||1,t.length,e.length,n||0);return I(t,function(a){var o;Rt(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function aMt(r,t,e){if(e||t.hasKey(r)){for(var n=0;t.hasKey(r+n);)n++;r+=n}return t.set(r,!0),r}var oMt=function(){function r(t){this.coordSysDims=[],this.axisMap=wt(),this.categoryAxisMap=wt(),this.coordSysName=t}return r}();function sMt(r){var t=r.get("coordinateSystem"),e=new oMt(t),n=lMt[t];if(n)return n(r,e,e.axisMap,e.categoryAxisMap),e}var lMt={cartesian2d:function(r,t,e,n){var i=r.getReferringComponents("xAxis",Br).models[0],a=r.getReferringComponents("yAxis",Br).models[0];t.coordSysDims=["x","y"],e.set("x",i),e.set("y",a),kf(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),kf(a)&&(n.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(r,t,e,n){var i=r.getReferringComponents("singleAxis",Br).models[0];t.coordSysDims=["single"],e.set("single",i),kf(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(r,t,e,n){var i=r.getReferringComponents("polar",Br).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",a),e.set("angle",o),kf(a)&&(n.set("radius",a),t.firstCategoryDimIndex=0),kf(o)&&(n.set("angle",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(r,t,e,n){t.coordSysDims=["lng","lat"]},parallel:function(r,t,e,n){var i=r.ecModel,a=i.getComponent("parallel",r.get("parallelIndex")),o=t.coordSysDims=a.dimensions.slice();I(a.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),h=o[l];e.set(h,u),kf(u)&&(n.set(h,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function kf(r){return r.get("type")==="category"}function uMt(r,t,e){e=e||{};var n=e.byIndex,i=e.stackedCoordDimension,a,o,s;hMt(t)?a=t:(o=t.schema,a=o.dimensions,s=t.store);var l=!!(r&&r.get("stack")),u,h,c,f;if(I(a,function(y,_){yt(y)&&(a[_]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!u&&y.ordinalMeta&&(u=y),!h&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(h=y))}),h&&!n&&!u&&(n=!0),h){c="__\0ecstackresult_"+r.id,f="__\0ecstackedover_"+r.id,u&&(u.createInvertedIndices=!0);var d=h.coordDim,g=h.type,p=0;I(a,function(y){y.coordDim===d&&p++});var v={name:c,coordDim:d,coordDimIndex:p,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},m={name:f,coordDim:f,coordDimIndex:p+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(v.storeDimIndex=s.ensureCalculationDimension(f,g),m.storeDimIndex=s.ensureCalculationDimension(c,g)),o.appendCalculationDimension(v),o.appendCalculationDimension(m)):(a.push(v),a.push(m))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:f,stackResultDimension:c}}function hMt(r){return!WY(r.schema)}function Uu(r,t){return!!t&&t===r.getCalculationInfo("stackedDimension")}function XY(r,t){return Uu(r,t)?r.getCalculationInfo("stackResultDimension"):t}function cMt(r,t){var e=r.get("coordinateSystem"),n=Qy.get(e),i;return t&&t.coordSysDims&&(i=nt(t.coordSysDims,function(a){var o={name:a},s=t.axisMap.get(a);if(s){var l=s.get("type");o.type=sS(l)}return o})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function fMt(r,t,e){var n,i;return e&&I(r,function(a,o){var s=a.coordDim,l=e.categoryAxisMap.get(s);l&&(n==null&&(n=o),a.ordinalMeta=l.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(r[n].otherDims.itemName=0),n}function Sl(r,t,e){e=e||{};var n=t.getSourceManager(),i,a=!1;r?(a=!0,i=SL(r)):(i=n.getSource(),a=i.sourceFormat===ja);var o=sMt(t),s=cMt(t,o),l=e.useEncodeDefaulter,u=At(l)?l:l?Wt(N$,s,t):null,h={coordDimensions:s,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},c=e0(i,h),f=fMt(c.dimensions,e.createInvertedIndices,o),d=a?null:n.getSharedDataStore(c),g=uMt(t,{schema:c,store:d}),p=new vi(c,t);p.setCalculationInfo(g);var v=f!=null&&dMt(i)?function(m,y,_,x){return x===f?_:this.defaultDimValueGetter(m,y,_,x)}:null;return p.hasItemOption=!1,p.initData(a?i:d,null,v),p}function dMt(r){if(r.sourceFormat===ja){var t=gMt(r.data||[]);return!rt(Zg(t))}}function gMt(r){for(var t=0;t<r.length&&r[t]==null;)t++;return r[t]}var xs=function(){function r(t){this._setting=t||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(t){return this._setting[t]},r.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},r.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},r.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(t){this._isBlank=t},r}();Nw(xs);var pMt=0,vI=function(){function r(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++pMt}return r.createByAxisModel=function(t){var e=t.option,n=e.data,i=n&&nt(n,vMt);return new r({categories:i,needCollect:!i,deduplication:e.dedplication!==!1})},r.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},r.prototype.parseAndCollect=function(t){var e,n=this._needCollect;if(!yt(t)&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var i=this._getOrCreateMap();return e=i.get(t),e==null&&(n?(e=this.categories.length,this.categories[e]=t,i.set(t,e)):e=NaN),e},r.prototype._getOrCreateMap=function(){return this._map||(this._map=wt(this.categories))},r}();function vMt(r){return Rt(r)&&r.value!=null?r.value:r+""}function mI(r){return r.type==="interval"||r.type==="log"}function mMt(r,t,e,n){var i={},a=r[1]-r[0],o=i.interval=xH(a/t);e!=null&&o<e&&(o=i.interval=e),n!=null&&o>n&&(o=i.interval=n);var s=i.intervalPrecision=ZY(o),l=i.niceTickExtent=[Cr(Math.ceil(r[0]/o)*o,s),Cr(Math.floor(r[1]/o)*o,s)];return yMt(l,r),i}function VE(r){var t=Math.pow(10,ZP(r)),e=r/t;return e?e===2?e=3:e===3?e=5:e*=2:e=1,Cr(e*t)}function ZY(r){return Jo(r)+2}function RG(r,t,e){r[t]=Math.max(Math.min(r[t],e[1]),e[0])}function yMt(r,t){!isFinite(r[0])&&(r[0]=t[0]),!isFinite(r[1])&&(r[1]=t[1]),RG(r,0,t),RG(r,1,t),r[0]>r[1]&&(r[0]=r[1])}function rT(r,t){return r>=t[0]&&r<=t[1]}function nT(r,t){return t[1]===t[0]?.5:(r-t[0])/(t[1]-t[0])}function iT(r,t){return r*(t[1]-t[0])+t[0]}var aT=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new vI({})),rt(i)&&(i=new vI({categories:nt(i,function(a){return Rt(a)?a.value:a})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(e){return e==null?NaN:yt(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return e=this.parse(e),rT(e,this._extent)&&this._ordinalMeta.categories[e]!=null},t.prototype.normalize=function(e){return e=this._getTickNumber(this.parse(e)),nT(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(iT(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],n=this._extent,i=n[0];i<=n[1];)e.push({value:i}),i++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(e==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=e.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);o<l;++o){var u=n[o];i[o]=u,a[u]=o}for(var h=0;o<s;++o){for(;a[h]!=null;)h++;i.push(h),a[h]=o}},t.prototype._getTickNumber=function(e){var n=this._ticksByOrdinalNumber;return n&&e>=0&&e<n.length?n[e]:e},t.prototype.getRawOrdinalNumber=function(e){var n=this._ordinalNumbersByTick;return n&&e>=0&&e<n.length?n[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var n=this.getRawOrdinalNumber(e.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,n){this.unionExtent(e.getApproximateExtent(n))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(xs);xs.registerClass(aT);var Ih=Cr,fl=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return rT(e,this._extent)},t.prototype.normalize=function(e){return nT(e,this._extent)},t.prototype.scale=function(e){return iT(e,this._extent)},t.prototype.setExtent=function(e,n){var i=this._extent;isNaN(e)||(i[0]=parseFloat(e)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(e){var n=this._extent;e[0]<n[0]&&(n[0]=e[0]),e[1]>n[1]&&(n[1]=e[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=ZY(e)},t.prototype.getTicks=function(e){var n=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<a[0]&&(e?s.push({value:Ih(a[0]-n,o)}):s.push({value:i[0]}));for(var u=a[0];u<=a[1]&&(s.push({value:u}),u=Ih(u+n,o),u!==s[s.length-1].value);)if(s.length>l)return[];var h=s.length?s[s.length-1].value:a[1];return i[1]>h&&(e?s.push({value:Ih(h+n,o)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(e){for(var n=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<n.length;o++){for(var s=n[o],l=n[o-1],u=0,h=[],c=s.value-l.value,f=c/e;u<e-1;){var d=Ih(l.value+(u+1)*f);d>a[0]&&d<a[1]&&h.push(d),u++}i.push(h)}return i},t.prototype.getLabel=function(e,n){if(e==null)return"";var i=n&&n.precision;i==null?i=Jo(e.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=Ih(e.value,i,!0);return C$(a)},t.prototype.calcNiceTicks=function(e,n,i){e=e||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=mMt(a,e,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);e.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var a=n[1]-n[0];isFinite(a)||(n[0]=0,n[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(n[0]=Ih(Math.floor(n[0]/o)*o)),e.fixMax||(n[1]=Ih(Math.ceil(n[1]/o)*o))},t.prototype.setNiceExtent=function(e,n){this._niceExtent=[e,n]},t.type="interval",t}(xs);xs.registerClass(fl);var jY=typeof Float32Array<"u",_Mt=jY?Float32Array:Array;function ts(r){return rt(r)?jY?new Float32Array(r):r:new _Mt(r)}var yI="__ec_stack_";function LL(r){return r.get("stack")||yI+r.seriesIndex}function DL(r){return r.dim+r.index}function xMt(r){var t=[],e=r.axis,n="axis0";if(e.type==="category"){for(var i=e.getBandWidth(),a=0;a<r.count;a++)t.push(It({bandWidth:i,axisKey:n,stackId:yI+a},r));for(var o=JY(t),s=[],a=0;a<r.count;a++){var l=o[n][yI+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function KY(r,t){var e=[];return t.eachSeriesByType(r,function(n){eX(n)&&e.push(n)}),e}function SMt(r){var t={};I(r,function(l){var u=l.coordinateSystem,h=u.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var c=l.getData(),f=h.dim+"_"+h.index,d=c.getDimensionIndex(c.mapDimension(h.dim)),g=c.getStore(),p=0,v=g.count();p<v;++p){var m=g.get(d,p);t[f]?t[f].push(m):t[f]=[m]}});var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}e[n]=a}}return e}function qY(r){var t=SMt(r),e=[];return I(r,function(n){var i=n.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=t[l],h=Math.abs(o[1]-o[0]),c=a.scale.getExtent(),f=Math.abs(c[1]-c[0]);s=u?h/f*u:h}else{var d=n.getData();s=Math.abs(o[1]-o[0])/d.count()}var g=ft(n.get("barWidth"),s),p=ft(n.get("barMaxWidth"),s),v=ft(n.get("barMinWidth")||(rX(n)?.5:1),s),m=n.get("barGap"),y=n.get("barCategoryGap");e.push({bandWidth:s,barWidth:g,barMaxWidth:p,barMinWidth:v,barGap:m,barCategoryGap:y,axisKey:DL(a),stackId:LL(n)})}),JY(e)}function JY(r){var t={};I(r,function(n,i){var a=n.axisKey,o=n.bandWidth,s=t[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[a]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=n.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(s.remainedWidth,h),s.remainedWidth-=h);var c=n.barMaxWidth;c&&(l[u].maxWidth=c);var f=n.barMinWidth;f&&(l[u].minWidth=f);var d=n.barGap;d!=null&&(s.gap=d);var g=n.barCategoryGap;g!=null&&(s.categoryGap=g)});var e={};return I(t,function(n,i){e[i]={};var a=n.stacks,o=n.bandWidth,s=n.categoryGap;if(s==null){var l=he(a).length;s=Math.max(35-l*4,15)+"%"}var u=ft(s,o),h=ft(n.gap,1),c=n.remainedWidth,f=n.autoWidthCount,d=(c-u)/(f+(f-1)*h);d=Math.max(d,0),I(a,function(m){var y=m.maxWidth,_=m.minWidth;if(m.width){var x=m.width;y&&(x=Math.min(x,y)),_&&(x=Math.max(x,_)),m.width=x,c-=x+h*x,f--}else{var x=d;y&&y<x&&(x=Math.min(y,c)),_&&_>x&&(x=_),x!==d&&(m.width=x,c-=x+h*x,f--)}}),d=(c-u)/(f+(f-1)*h),d=Math.max(d,0);var g=0,p;I(a,function(m,y){m.width||(m.width=d),p=m,g+=m.width*(1+h)}),p&&(g-=p.width*h);var v=-g/2;I(a,function(m,y){e[i][y]=e[i][y]||{bandWidth:o,offset:v,width:m.width},v+=m.width*(1+h)})}),e}function wMt(r,t,e){if(r&&t){var n=r[DL(t)];return n!=null&&e!=null?n[LL(e)]:n}}function QY(r,t){var e=KY(r,t),n=qY(e);I(e,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=LL(i),u=n[DL(s)][l],h=u.offset,c=u.width;a.setLayout({bandWidth:u.bandWidth,offset:h,size:c})})}function tX(r){return{seriesType:r,plan:np(),reset:function(t){if(eX(t)){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),a=n.getOtherAxis(i),o=e.getDimensionIndex(e.mapDimension(a.dim)),s=e.getDimensionIndex(e.mapDimension(i.dim)),l=t.get("showBackground",!0),u=e.mapDimension(a.dim),h=e.getCalculationInfo("stackResultDimension"),c=Uu(e,u)&&!!e.getCalculationInfo("stackedOnSeries"),f=a.isHorizontal(),d=TMt(i,a),g=rX(t),p=t.get("barMinHeight")||0,v=h&&e.getDimensionIndex(h),m=e.getLayout("size"),y=e.getLayout("offset");return{progress:function(_,x){for(var w=_.count,S=g&&ts(w*3),T=g&&l&&ts(w*3),b=g&&ts(w),E=n.master.getRect(),C=f?E.width:E.height,M,A=x.getStore(),R=0;(M=_.next())!=null;){var P=A.get(c?v:o,M),L=A.get(s,M),D=d,k=void 0;c&&(k=+P-A.get(o,M));var F=void 0,B=void 0,V=void 0,Y=void 0;if(f){var q=n.dataToPoint([P,L]);if(c){var lt=n.dataToPoint([k,L]);D=lt[0]}F=D,B=q[1]+y,V=q[0]-D,Y=m,Math.abs(V)<p&&(V=(V<0?-1:1)*p)}else{var q=n.dataToPoint([L,P]);if(c){var lt=n.dataToPoint([L,k]);D=lt[1]}F=q[0]+y,B=D,V=m,Y=q[1]-D,Math.abs(Y)<p&&(Y=(Y<=0?-1:1)*p)}g?(S[R]=F,S[R+1]=B,S[R+2]=f?V:Y,T&&(T[R]=f?E.x:F,T[R+1]=f?B:E.y,T[R+2]=C),b[M]=M):x.setItemLayout(M,{x:F,y:B,width:V,height:Y}),R+=3}g&&x.setLayout({largePoints:S,largeDataIndices:b,largeBackgroundPoints:T,valueAxisHorizontal:f})}}}}}}function eX(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function rX(r){return r.pipelineContext&&r.pipelineContext.large}function TMt(r,t){var e=t.model.get("startValue");return e||(e=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?e>0?e:1:e))}var bMt=function(r,t,e,n){for(;e<n;){var i=e+n>>>1;r[i][1]<t?e=i+1:n=i}return e},OL=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="time",n}return t.prototype.getLabel=function(e){var n=this.getSetting("useUTC");return Yw(e.value,x5[obt($d(this._minLevelUnit))]||x5.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,n,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return sbt(e,n,i,o,a)},t.prototype.getTicks=function(){var e=this._interval,n=this._extent,i=[];if(!e)return i;i.push({value:n[0],level:0});var a=this.getSetting("useUTC"),o=PMt(this._minLevelUnit,this._approxInterval,a,n);return i=i.concat(o),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(e){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Da,n[1]+=Da),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Da}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,n,i){e=e||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/e,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=I_.length,l=Math.min(bMt(I_,this._approxInterval,0,s),s-1);this._interval=I_[l][1],this._minLevelUnit=I_[Math.max(l-1,0)][0]},t.prototype.parse=function(e){return be(e)?e:+gs(e)},t.prototype.contain=function(e){return rT(this.parse(e),this._extent)},t.prototype.normalize=function(e){return nT(this.parse(e),this._extent)},t.prototype.scale=function(e){return iT(e,this._extent)},t.type="time",t}(fl),I_=[["second",fL],["minute",dL],["hour",rm],["quarter-day",rm*6],["half-day",rm*12],["day",Da*1.2],["half-week",Da*3.5],["week",Da*7],["month",Da*31],["quarter",Da*95],["half-year",_5/2],["year",_5]];function EMt(r,t,e,n){var i=gs(t),a=gs(e),o=function(g){return S5(i,g,n)===S5(a,g,n)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},h=function(){return u()&&o("hour")},c=function(){return h()&&o("minute")},f=function(){return c()&&o("second")},d=function(){return f()&&o("millisecond")};switch(r){case"year":return s();case"month":return l();case"day":return u();case"hour":return h();case"minute":return c();case"second":return f();case"millisecond":return d()}}function CMt(r,t){return r/=Da,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function MMt(r){var t=30*Da;return r/=t,r>6?6:r>3?3:r>2?2:1}function AMt(r){return r/=rm,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function PG(r,t){return r/=t?dL:fL,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function IMt(r){return xH(r)}function RMt(r,t,e){var n=new Date(r);switch($d(t)){case"year":case"month":n[x$(e)](0);case"day":n[S$(e)](1);case"hour":n[w$(e)](0);case"minute":n[T$(e)](0);case"second":n[b$(e)](0),n[E$(e)](0)}return n.getTime()}function PMt(r,t,e,n){var i=1e4,a=y$,o=0;function s(C,M,A,R,P,L,D){for(var k=new Date(M),F=M,B=k[R]();F<A&&F<=n[1];)D.push({value:F}),B+=C,k[P](B),F=k.getTime();D.push({value:F,notAdd:!0})}function l(C,M,A){var R=[],P=!M.length;if(!EMt($d(C),n[0],n[1],e)){P&&(M=[{value:RMt(new Date(n[0]),C,e)},{value:n[1]}]);for(var L=0;L<M.length-1;L++){var D=M[L].value,k=M[L+1].value;if(D!==k){var F=void 0,B=void 0,V=void 0,Y=!1;switch(C){case"year":F=Math.max(1,Math.round(t/Da/365)),B=gL(e),V=lbt(e);break;case"half-year":case"quarter":case"month":F=MMt(t),B=Yd(e),V=x$(e);break;case"week":case"half-week":case"day":F=CMt(t),B=Xw(e),V=S$(e),Y=!0;break;case"half-day":case"quarter-day":case"hour":F=AMt(t),B=Jm(e),V=w$(e);break;case"minute":F=PG(t,!0),B=Zw(e),V=T$(e);break;case"second":F=PG(t,!1),B=jw(e),V=b$(e);break;case"millisecond":F=IMt(t),B=Kw(e),V=E$(e);break}s(F,D,k,B,V,Y,R),C==="year"&&A.length>1&&L===0&&A.unshift({value:A[0].value-F})}}for(var L=0;L<R.length;L++)A.push(R[L]);return R}}for(var u=[],h=[],c=0,f=0,d=0;d<a.length&&o++<i;++d){var g=$d(a[d]);if(abt(a[d])){l(a[d],u[u.length-1]||[],h);var p=a[d+1]?$d(a[d+1]):null;if(g!==p){if(h.length){f=c,h.sort(function(C,M){return C.value-M.value});for(var v=[],m=0;m<h.length;++m){var y=h[m].value;(m===0||h[m-1].value!==y)&&(v.push(h[m]),y>=n[0]&&y<=n[1]&&c++)}var _=(n[1]-n[0])/t;if(c>_*1.5&&f>_/1.5||(u.push(v),c>_||r===a[d]))break}h=[]}}}for(var x=ze(nt(u,function(C){return ze(C,function(M){return M.value>=n[0]&&M.value<=n[1]&&!M.notAdd})}),function(C){return C.length>0}),w=[],S=x.length-1,d=0;d<x.length;++d)for(var T=x[d],b=0;b<T.length;++b)w.push({value:T[b].value,level:S-d});w.sort(function(C,M){return C.value-M.value});for(var E=[],d=0;d<w.length;++d)(d===0||w[d].value!==w[d-1].value)&&E.push(w[d]);return E}xs.registerClass(OL);var LG=xs.prototype,om=fl.prototype,LMt=Cr,DMt=Math.floor,OMt=Math.ceil,R_=Math.pow,Qa=Math.log,NL=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new fl,e._interval=0,e}return t.prototype.getTicks=function(e){var n=this._originalScale,i=this._extent,a=n.getExtent(),o=om.getTicks.call(this,e);return nt(o,function(s){var l=s.value,u=Cr(R_(this.base,l));return u=l===i[0]&&this._fixMin?P_(u,a[0]):u,u=l===i[1]&&this._fixMax?P_(u,a[1]):u,{value:u}},this)},t.prototype.setExtent=function(e,n){var i=Qa(this.base);e=Qa(Math.max(0,e))/i,n=Qa(Math.max(0,n))/i,om.setExtent.call(this,e,n)},t.prototype.getExtent=function(){var e=this.base,n=LG.getExtent.call(this);n[0]=R_(e,n[0]),n[1]=R_(e,n[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(n[0]=P_(n[0],a[0])),this._fixMax&&(n[1]=P_(n[1],a[1])),n},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var n=this.base;e[0]=Qa(e[0])/Qa(n),e[1]=Qa(e[1])/Qa(n),LG.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,n){this.unionExtent(e.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(e){e=e||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var a=BSt(i),o=e/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[Cr(OMt(n[0]/a)*a),Cr(DMt(n[1]/a)*a)];this._interval=a,this._niceExtent=s}},t.prototype.calcNiceExtent=function(e){om.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return e=Qa(e)/Qa(this.base),rT(e,this._extent)},t.prototype.normalize=function(e){return e=Qa(e)/Qa(this.base),nT(e,this._extent)},t.prototype.scale=function(e){return e=iT(e,this._extent),R_(this.base,e)},t.type="log",t}(xs),nX=NL.prototype;nX.getMinorTicks=om.getMinorTicks;nX.getLabel=om.getLabel;function P_(r,t){return LMt(r,Jo(t))}xs.registerClass(NL);var NMt=function(){function r(t,e,n){this._prepareParams(t,e,n)}return r.prototype._prepareParams=function(t,e,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&e.getNeedCrossZero&&e.getNeedCrossZero();var a=e.get("min",!0);a==null&&(a=e.get("startValue",!0));var o=this._modelMinRaw=a;At(o)?this._modelMinNum=L_(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=L_(t,o));var s=this._modelMaxRaw=e.get("max",!0);if(At(s)?this._modelMaxNum=L_(t,s({min:n[0],max:n[1]})):s!=="dataMax"&&(this._modelMaxNum=L_(t,s)),i)this._axisDataLen=e.getCategories().length;else{var l=e.get("boundaryGap"),u=rt(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[_o(u[0],1),_o(u[1],1)]}},r.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,n=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=t?null:n-e||Math.abs(e),s=this._modelMinRaw==="dataMin"?e:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,h=l!=null;s==null&&(s=t?i?0:NaN:e-a[0]*o),l==null&&(l=t?i?i-1:NaN:n+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var c=Wm(s)||Wm(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!h&&(l=0));var f=this._determinedMin,d=this._determinedMax;return f!=null&&(s=f,u=!0),d!=null&&(l=d,h=!0),{min:s,max:l,minFixed:u,maxFixed:h,isBlank:c}},r.prototype.modifyDataMinMax=function(t,e){this[kMt[t]]=e},r.prototype.setDeterminedMinMax=function(t,e){var n=FMt[t];this[n]=e},r.prototype.freeze=function(){this.frozen=!0},r}(),FMt={min:"_determinedMin",max:"_determinedMax"},kMt={min:"_dataMin",max:"_dataMax"};function iX(r,t,e){var n=r.rawExtentInfo;return n||(n=new NMt(r,t,e),r.rawExtentInfo=n,n)}function L_(r,t){return t==null?null:Wm(t)?NaN:r.parse(t)}function aX(r,t){var e=r.type,n=iX(r,t,r.getExtent()).calculate();r.setBlank(n.isBlank);var i=n.min,a=n.max,o=t.ecModel;if(o&&e==="time"){var s=KY("bar",o),l=!1;if(I(s,function(c){l=l||c.getBaseAxis()===t.axis}),l){var u=qY(s),h=GMt(i,a,t,u);i=h.min,a=h.max}}return{extent:[i,a],fixMin:n.minFixed,fixMax:n.maxFixed}}function GMt(r,t,e,n){var i=e.axis.getExtent(),a=i[1]-i[0],o=wMt(n,e.axis);if(o===void 0)return{min:r,max:t};var s=1/0;I(o,function(d){s=Math.min(d.offset,s)});var l=-1/0;I(o,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,h=t-r,c=1-(s+l)/a,f=h/c-h;return t+=f*(l/u),r-=f*(s/u),{min:r,max:t}}function _g(r,t){var e=t,n=aX(r,e),i=n.extent,a=e.get("splitNumber");r instanceof NL&&(r.base=e.get("logBase"));var o=r.type,s=e.get("interval"),l=o==="interval"||o==="time";r.setExtent(i[0],i[1]),r.calcNiceExtent({splitNumber:a,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?e.get("minInterval"):null,maxInterval:l?e.get("maxInterval"):null}),s!=null&&r.setInterval&&r.setInterval(s)}function oT(r,t){if(t=t||r.get("type"),t)switch(t){case"category":return new aT({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new OL({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(xs.getClass(t)||fl)}}function BMt(r){var t=r.scale.getExtent(),e=t[0],n=t[1];return!(e>0&&n>0||e<0&&n<0)}function op(r){var t=r.getLabelModel().get("formatter"),e=r.type==="category"?r.scale.getExtent()[0]:null;return r.scale.type==="time"?function(n){return function(i,a){return r.scale.getFormattedLabel(i,a,n)}}(t):yt(t)?function(n){return function(i){var a=r.scale.getLabel(i),o=n.replace("{value}",a??"");return o}}(t):At(t)?function(n){return function(i,a){return e!=null&&(a=i.value-e),n(FL(r,i),a,i.level!=null?{level:i.level}:null)}}(t):function(n){return r.scale.getLabel(n)}}function FL(r,t){return r.type==="category"?r.scale.getLabel(t):t.value}function zMt(r){var t=r.model,e=r.scale;if(!(!t.get(["axisLabel","show"])||e.isBlank())){var n,i,a=e.getExtent();e instanceof aT?i=e.count():(n=e.getTicks(),i=n.length);var o=r.getLabelModel(),s=op(r),l,u=1;i>40&&(u=Math.ceil(i/40));for(var h=0;h<i;h+=u){var c=n?n[h]:{value:a[0]+h},f=s(c,h),d=o.getTextRect(f),g=VMt(d,o.get("rotate")||0);l?l.union(g):l=g}return l}}function VMt(r,t){var e=t*Math.PI/180,n=r.width,i=r.height,a=n*Math.abs(Math.cos(e))+Math.abs(i*Math.sin(e)),o=n*Math.abs(Math.sin(e))+Math.abs(i*Math.cos(e)),s=new jt(r.x,r.y,a,o);return s}function kL(r){var t=r.get("interval");return t??"auto"}function oX(r){return r.type==="category"&&kL(r.getLabelModel())===0}function lS(r,t){var e={};return I(r.mapDimensionsAll(t),function(n){e[XY(r,n)]=!0}),he(e)}function UMt(r,t,e){t&&I(lS(t,e),function(n){var i=t.getApproximateExtent(n);i[0]<r[0]&&(r[0]=i[0]),i[1]>r[1]&&(r[1]=i[1])})}var r0=function(){function r(){}return r.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},r.prototype.getCoordSysModel=function(){},r}(),WMt=1e-8;function DG(r,t){return Math.abs(r-t)<WMt}function ec(r,t,e){var n=0,i=r[0];if(!i)return!1;for(var a=1;a<r.length;a++){var o=r[a];n+=Fs(i[0],i[1],o[0],o[1],t,e),i=o}var s=r[0];return(!DG(i[0],s[0])||!DG(i[1],s[1]))&&(n+=Fs(i[0],i[1],s[0],s[1],t,e)),n!==0}var HMt=[];function UE(r,t){for(var e=0;e<r.length;e++)Ln(r[e],r[e],t)}function OG(r,t,e,n){for(var i=0;i<r.length;i++){var a=r[i];n&&(a=n.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(su(t,t,a),lu(e,e,a))}}function $Mt(r){for(var t=0,e=0,n=0,i=r.length,a=r[i-1][0],o=r[i-1][1],s=0;s<i;s++){var l=r[s][0],u=r[s][1],h=a*u-l*o;t+=h,e+=(a+l)*h,n+=(o+u)*h,a=l,o=u}return t?[e/t/3,n/t/3,t]:[r[0][0]||0,r[0][1]||0]}var sX=function(){function r(t){this.name=t}return r.prototype.setCenter=function(t){this._center=t},r.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},r}(),NG=function(){function r(t,e){this.type="polygon",this.exterior=t,this.interiors=e}return r}(),FG=function(){function r(t){this.type="linestring",this.points=t}return r}(),lX=function(r){U(t,r);function t(e,n,i){var a=r.call(this,e)||this;return a.type="geoJSON",a.geometries=n,a._center=i&&[i[0],i[1]],a}return t.prototype.calcCenter=function(){for(var e=this.geometries,n,i=0,a=0;a<e.length;a++){var o=e[a],s=o.exterior,l=s&&s.length;l>i&&(n=o,i=l)}if(n)return $Mt(n.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(e){var n=this._rect;if(n&&!e)return n;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return I(o,function(s){s.type==="polygon"?OG(s.exterior,i,a,e):I(s.points,function(l){OG(l,i,a,e)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),n=new jt(i[0],i[1],a[0]-i[0],a[1]-i[1]),e||(this._rect=n),n},t.prototype.contain=function(e){var n=this.getBoundingRect(),i=this.geometries;if(!n.contain(e[0],e[1]))return!1;t:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(ec(l,e[0],e[1])){for(var h=0;h<(u?u.length:0);h++)if(ec(u[h],e[0],e[1]))continue t;return!0}}}return!1},t.prototype.transformTo=function(e,n,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new jt(e,n,i,a),u=o.calculateTransform(l),h=this.geometries,c=0;c<h.length;c++){var f=h[c];f.type==="polygon"?(UE(f.exterior,u),I(f.interiors,function(d){UE(d,u)})):I(f.points,function(d){UE(d,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(e){e==null&&(e=this.name);var n=new t(e,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},t}(sX),YMt=function(r){U(t,r);function t(e,n){var i=r.call(this,e)||this;return i.type="geoSVG",i._elOnlyForCalculate=n,i}return t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,n=e.getBoundingRect(),i=[n.x+n.width/2,n.y+n.height/2],a=Pw(HMt),o=e;o&&!o.isGeoSVGGraphicRoot;)Qs(a,o.getLocalTransform(),a),o=o.parent;return Xg(a,a),Ln(i,i,a),i},t}(sX);function XMt(r){if(!r.UTF8Encoding)return r;var t=r,e=t.UTF8Scale;e==null&&(e=1024);var n=t.features;return I(n,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=uX(s,o,e);break;case"Polygon":WE(s,o,e);break;case"MultiLineString":WE(s,o,e);break;case"MultiPolygon":I(s,function(l,u){return WE(l,o[u],e)})}}),t.UTF8Encoding=!1,t}function WE(r,t,e){for(var n=0;n<r.length;n++)r[n]=uX(r[n],t[n],e)}function uX(r,t,e){for(var n=[],i=t[0],a=t[1],o=0;o<r.length;o+=2){var s=r.charCodeAt(o)-64,l=r.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,n.push([s/e,l/e])}return n}function ZMt(r,t){return r=XMt(r),nt(ze(r.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var n=e.properties,i=e.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new NG(o[0],o.slice(1)));break;case"MultiPolygon":I(i.coordinates,function(l){l[0]&&a.push(new NG(l[0],l.slice(1)))});break;case"LineString":a.push(new FG([i.coordinates]));break;case"MultiLineString":a.push(new FG(i.coordinates))}var s=new lX(n[t||"name"],a,n.cp);return s.properties=n,s})}var iy=me();function hX(r,t){var e=nt(t,function(n){return r.scale.parse(n)});return r.type==="time"&&e.length>0&&(e.sort(),e.unshift(e[0]),e.push(e[e.length-1])),e}function jMt(r){var t=r.getLabelModel().get("customValues");if(t){var e=op(r);return{labels:hX(r,t).map(function(n){var i={value:n};return{formattedLabel:e(i),rawLabel:r.scale.getLabel(i),tickValue:n}})}}return r.type==="category"?qMt(r):QMt(r)}function KMt(r,t){var e=r.getTickModel().get("customValues");return e?{ticks:hX(r,e)}:r.type==="category"?JMt(r,t):{ticks:nt(r.scale.getTicks(),function(n){return n.value})}}function qMt(r){var t=r.getLabelModel(),e=cX(r,t);return!t.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:e.labelCategoryInterval}:e}function cX(r,t){var e=fX(r,"labels"),n=kL(t),i=dX(e,n);if(i)return i;var a,o;return At(n)?a=vX(r,n):(o=n==="auto"?tAt(r):n,a=pX(r,o)),gX(e,n,{labels:a,labelCategoryInterval:o})}function JMt(r,t){var e=fX(r,"ticks"),n=kL(t),i=dX(e,n);if(i)return i;var a,o;if((!t.get("show")||r.scale.isBlank())&&(a=[]),At(n))a=vX(r,n,!0);else if(n==="auto"){var s=cX(r,r.getLabelModel());o=s.labelCategoryInterval,a=nt(s.labels,function(l){return l.tickValue})}else o=n,a=pX(r,o,!0);return gX(e,n,{ticks:a,tickCategoryInterval:o})}function QMt(r){var t=r.scale.getTicks(),e=op(r);return{labels:nt(t,function(n,i){return{level:n.level,formattedLabel:e(n,i),rawLabel:r.scale.getLabel(n),tickValue:n.value}})}}function fX(r,t){return iy(r)[t]||(iy(r)[t]=[])}function dX(r,t){for(var e=0;e<r.length;e++)if(r[e].key===t)return r[e].value}function gX(r,t,e){return r.push({key:t,value:e}),e}function tAt(r){var t=iy(r).autoInterval;return t??(iy(r).autoInterval=r.calculateCategoryInterval())}function eAt(r){var t=rAt(r),e=op(r),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=r.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=r.dataToCoord(l+1)-r.dataToCoord(l),h=Math.abs(u*Math.cos(n)),c=Math.abs(u*Math.sin(n)),f=0,d=0;l<=a[1];l+=s){var g=0,p=0,v=$y(e({value:l}),t.font,"center","top");g=v.width*1.3,p=v.height*1.3,f=Math.max(f,g,7),d=Math.max(d,p,7)}var m=f/h,y=d/c;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(m,y))),x=iy(r.model),w=r.getExtent(),S=x.lastAutoInterval,T=x.lastTickCount;return S!=null&&T!=null&&Math.abs(S-_)<=1&&Math.abs(T-o)<=1&&S>_&&x.axisExtent0===w[0]&&x.axisExtent1===w[1]?_=S:(x.lastTickCount=o,x.lastAutoInterval=_,x.axisExtent0=w[0],x.axisExtent1=w[1]),_}function rAt(r){var t=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function pX(r,t,e){var n=op(r),i=r.scale,a=i.getExtent(),o=r.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=a[0],h=i.count();u!==0&&l>1&&h/l>2&&(u=Math.round(Math.ceil(u/l)*l));var c=oX(r),f=o.get("showMinLabel")||c,d=o.get("showMaxLabel")||c;f&&u!==a[0]&&p(a[0]);for(var g=u;g<=a[1];g+=l)p(g);d&&g-l!==a[1]&&p(a[1]);function p(v){var m={value:v};s.push(e?v:{formattedLabel:n(m),rawLabel:i.getLabel(m),tickValue:v})}return s}function vX(r,t,e){var n=r.scale,i=op(r),a=[];return I(n.getTicks(),function(o){var s=n.getLabel(o),l=o.value;t(o.value,s)&&a.push(e?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var kG=[0,1],wo=function(){function r(t,e,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=n||[0,0]}return r.prototype.contain=function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return t>=n&&t<=i},r.prototype.containData=function(t){return this.scale.contain(t)},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(t){return yH(t||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(t,e){var n=this._extent;n[0]=t,n[1]=e},r.prototype.dataToCoord=function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),GG(n,i.count())),Fe(t,kG,n,e)},r.prototype.coordToData=function(t,e){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),GG(n,i.count()));var a=Fe(t,n,kG,e);return this.scale.scale(a)},r.prototype.pointToData=function(t,e){},r.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),n=KMt(this,e),i=n.ticks,a=nt(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=e.get("alignWithLabel");return nAt(this,a,o,t.clamp),a},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var n=this.scale.getMinorTicks(e),i=nt(n,function(a){return nt(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},r.prototype.getViewLabels=function(){return jMt(this).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},r.prototype.calculateCategoryInterval=function(){return eAt(this)},r}();function GG(r,t){var e=r[1]-r[0],n=t,i=e/n/2;r[0]+=i,r[1]-=i}function nAt(r,t,e,n){var i=t.length;if(!r.onBand||e||!i)return;var a=r.getExtent(),o,s;if(i===1)t[0].coord=a[0],o=t[1]={coord:a[1]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;I(t,function(d){d.coord-=u/2});var h=r.scale.getExtent();s=1+h[1]-t[i-1].tickValue,o={coord:t[i-1].coord+u*s},t.push(o)}var c=a[0]>a[1];f(t[0].coord,a[0])&&(n?t[0].coord=a[0]:t.shift()),n&&f(a[0],t[0].coord)&&t.unshift({coord:a[0]}),f(a[1],o.coord)&&(n?o.coord=a[1]:t.pop()),n&&f(o.coord,a[1])&&t.push({coord:a[1]});function f(d,g){return d=Cr(d),g=Cr(g),c?d>g:d<g}}var Hp=Math.PI*2,Rh=ps.CMD,iAt=["top","right","bottom","left"];function aAt(r,t,e,n,i){var a=e.width,o=e.height;switch(r){case"top":n.set(e.x+a/2,e.y-t),i.set(0,-1);break;case"bottom":n.set(e.x+a/2,e.y+o+t),i.set(0,1);break;case"left":n.set(e.x-t,e.y+o/2),i.set(-1,0);break;case"right":n.set(e.x+a+t,e.y+o/2),i.set(1,0);break}}function oAt(r,t,e,n,i,a,o,s,l){o-=r,s-=t;var u=Math.sqrt(o*o+s*s);o/=u,s/=u;var h=o*e+r,c=s*e+t;if(Math.abs(n-i)%Hp<1e-4)return l[0]=h,l[1]=c,u-e;if(a){var f=n;n=aa(i),i=aa(f)}else n=aa(n),i=aa(i);n>i&&(i+=Hp);var d=Math.atan2(s,o);if(d<0&&(d+=Hp),d>=n&&d<=i||d+Hp>=n&&d+Hp<=i)return l[0]=h,l[1]=c,u-e;var g=e*Math.cos(n)+r,p=e*Math.sin(n)+t,v=e*Math.cos(i)+r,m=e*Math.sin(i)+t,y=(g-o)*(g-o)+(p-s)*(p-s),_=(v-o)*(v-o)+(m-s)*(m-s);return y<_?(l[0]=g,l[1]=p,Math.sqrt(y)):(l[0]=v,l[1]=m,Math.sqrt(_))}function uS(r,t,e,n,i,a,o,s){var l=i-r,u=a-t,h=e-r,c=n-t,f=Math.sqrt(h*h+c*c);h/=f,c/=f;var d=l*h+u*c,g=d/f;s&&(g=Math.min(Math.max(g,0),1)),g*=f;var p=o[0]=r+g*h,v=o[1]=t+g*c;return Math.sqrt((p-i)*(p-i)+(v-a)*(v-a))}function mX(r,t,e,n,i,a,o){e<0&&(r=r+e,e=-e),n<0&&(t=t+n,n=-n);var s=r+e,l=t+n,u=o[0]=Math.min(Math.max(i,r),s),h=o[1]=Math.min(Math.max(a,t),l);return Math.sqrt((u-i)*(u-i)+(h-a)*(h-a))}var no=[];function sAt(r,t,e){var n=mX(t.x,t.y,t.width,t.height,r.x,r.y,no);return e.set(no[0],no[1]),n}function lAt(r,t,e){for(var n=0,i=0,a=0,o=0,s,l,u=1/0,h=t.data,c=r.x,f=r.y,d=0;d<h.length;){var g=h[d++];d===1&&(n=h[d],i=h[d+1],a=n,o=i);var p=u;switch(g){case Rh.M:a=h[d++],o=h[d++],n=a,i=o;break;case Rh.L:p=uS(n,i,h[d],h[d+1],c,f,no,!0),n=h[d++],i=h[d++];break;case Rh.C:p=tH(n,i,h[d++],h[d++],h[d++],h[d++],h[d],h[d+1],c,f,no),n=h[d++],i=h[d++];break;case Rh.Q:p=rH(n,i,h[d++],h[d++],h[d],h[d+1],c,f,no),n=h[d++],i=h[d++];break;case Rh.A:var v=h[d++],m=h[d++],y=h[d++],_=h[d++],x=h[d++],w=h[d++];d+=1;var S=!!(1-h[d++]);s=Math.cos(x)*y+v,l=Math.sin(x)*_+m,d<=1&&(a=s,o=l);var T=(c-v)*_/y+v;p=oAt(v,m,_,x,x+w,S,T,f,no),n=Math.cos(x+w)*y+v,i=Math.sin(x+w)*_+m;break;case Rh.R:a=n=h[d++],o=i=h[d++];var b=h[d++],E=h[d++];p=mX(a,o,b,E,c,f,no);break;case Rh.Z:p=uS(n,i,a,o,c,f,no,!0),n=a,i=o;break}p<u&&(u=p,e.set(no[0],no[1]))}return u}var lo=new $t,ar=new $t,Rr=new $t,es=new $t,jo=new $t;function BG(r,t){if(r){var e=r.getTextGuideLine(),n=r.getTextContent();if(n&&e){var i=r.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||iAt,s=n.getBoundingRect().clone();s.applyTransform(n.getComputedTransform());var l=1/0,u=i.anchor,h=r.getComputedTransform(),c=h&&Xg([],h),f=t.get("length2")||0;u&&Rr.copy(u);for(var d=0;d<o.length;d++){var g=o[d];aAt(g,0,s,lo,es),$t.scaleAndAdd(ar,lo,es,f),ar.transform(c);var p=r.getBoundingRect(),v=u?u.distance(ar):r instanceof ae?lAt(ar,r.path,Rr):sAt(ar,p,Rr);v<l&&(l=v,ar.transform(h),Rr.transform(h),Rr.toArray(a[0]),ar.toArray(a[1]),lo.toArray(a[2]))}yX(a,t.get("minTurnAngle")),e.setShape({points:a})}}}var hS=[],ci=new $t;function yX(r,t){if(t<=180&&t>0){t=t/180*Math.PI,lo.fromArray(r[0]),ar.fromArray(r[1]),Rr.fromArray(r[2]),$t.sub(es,lo,ar),$t.sub(jo,Rr,ar);var e=es.len(),n=jo.len();if(!(e<.001||n<.001)){es.scale(1/e),jo.scale(1/n);var i=es.dot(jo),a=Math.cos(t);if(a<i){var o=uS(ar.x,ar.y,Rr.x,Rr.y,lo.x,lo.y,hS,!1);ci.fromArray(hS),ci.scaleAndAdd(jo,o/Math.tan(Math.PI-t));var s=Rr.x!==ar.x?(ci.x-ar.x)/(Rr.x-ar.x):(ci.y-ar.y)/(Rr.y-ar.y);if(isNaN(s))return;s<0?$t.copy(ci,ar):s>1&&$t.copy(ci,Rr),ci.toArray(r[1])}}}}function uAt(r,t,e){if(e<=180&&e>0){e=e/180*Math.PI,lo.fromArray(r[0]),ar.fromArray(r[1]),Rr.fromArray(r[2]),$t.sub(es,ar,lo),$t.sub(jo,Rr,ar);var n=es.len(),i=jo.len();if(!(n<.001||i<.001)){es.scale(1/n),jo.scale(1/i);var a=es.dot(t),o=Math.cos(e);if(a<o){var s=uS(ar.x,ar.y,Rr.x,Rr.y,lo.x,lo.y,hS,!1);ci.fromArray(hS);var l=Math.PI/2,u=Math.acos(jo.dot(t)),h=l+u-e;if(h>=l)$t.copy(ci,Rr);else{ci.scaleAndAdd(jo,s/Math.tan(Math.PI/2-h));var c=Rr.x!==ar.x?(ci.x-ar.x)/(Rr.x-ar.x):(ci.y-ar.y)/(Rr.y-ar.y);if(isNaN(c))return;c<0?$t.copy(ci,ar):c>1&&$t.copy(ci,Rr)}ci.toArray(r[1])}}}}function HE(r,t,e,n){var i=e==="normal",a=i?r:r.ensureState(e);a.ignore=t;var o=n.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=n.getModel("lineStyle").getLineStyle();i?r.useStyle(s):a.style=s}function hAt(r,t){var e=t.smooth,n=t.points;if(n)if(r.moveTo(n[0][0],n[0][1]),e>0&&n.length>=3){var i=ou(n[0],n[1]),a=ou(n[1],n[2]);if(!i||!a){r.lineTo(n[1][0],n[1][1]),r.lineTo(n[2][0],n[2][1]);return}var o=Math.min(i,a)*e,s=w1([],n[1],n[0],o/i),l=w1([],n[1],n[2],o/a),u=w1([],s,l,.5);r.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),r.bezierCurveTo(l[0],l[1],l[0],l[1],n[2][0],n[2][1])}else for(var h=1;h<n.length;h++)r.lineTo(n[h][0],n[h][1])}function GL(r,t,e){var n=r.getTextGuideLine(),i=r.getTextContent();if(!i){n&&r.removeTextGuideLine();return}for(var a=t.normal,o=a.get("show"),s=i.ignore,l=0;l<jm.length;l++){var u=jm[l],h=t[u],c=u==="normal";if(h){var f=h.get("show"),d=c?s:Vt(i.states[u]&&i.states[u].ignore,s);if(d||!Vt(f,o)){var g=c?n:n&&n.states[u];g&&(g.ignore=!0),n&&HE(n,!0,u,h);continue}n||(n=new Ei,r.setTextGuideLine(n),!c&&(s||!o)&&HE(n,!0,"normal",t.normal),r.stateProxy&&(n.stateProxy=r.stateProxy)),HE(n,!1,u,h)}}if(n){It(n.style,e),n.style.fill=null;var p=a.get("showAbove"),v=r.textGuideLineConfig=r.textGuideLineConfig||{};v.showAbove=p||!1,n.buildPath=hAt}}function BL(r,t){t=t||"labelLine";for(var e={normal:r.getModel(t)},n=0;n<Si.length;n++){var i=Si[n];e[i]=r.getModel([i,t])}return e}function _X(r){for(var t=[],e=0;e<r.length;e++){var n=r[e];if(!n.defaultAttr.ignore){var i=n.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,u=o.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=s?new Zx(o,a):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:o,obb:h,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:a})}}return t}function xX(r,t,e,n,i,a){var o=r.length;if(o<2)return;r.sort(function(b,E){return b.rect[t]-E.rect[t]});for(var s=0,l,u=!1,h=0,c=0;c<o;c++){var f=r[c],d=f.rect;l=d[t]-s,l<0&&(d[t]-=l,f.label[t]-=l,u=!0);var g=Math.max(-l,0);h+=g,s=d[t]+d[e]}h>0&&a&&w(-h/o,0,o);var p=r[0],v=r[o-1],m,y;_(),m<0&&S(-m,.8),y<0&&S(y,.8),_(),x(m,y,1),x(y,m,-1),_(),m<0&&T(-m),y<0&&T(y);function _(){m=p.rect[t]-n,y=i-v.rect[t]-v.rect[e]}function x(b,E,C){if(b<0){var M=Math.min(E,-b);if(M>0){w(M*C,0,o);var A=M+b;A<0&&S(-A*C,1)}else S(-b*C,1)}}function w(b,E,C){b!==0&&(u=!0);for(var M=E;M<C;M++){var A=r[M],R=A.rect;R[t]+=b,A.label[t]+=b}}function S(b,E){for(var C=[],M=0,A=1;A<o;A++){var R=r[A-1].rect,P=Math.max(r[A].rect[t]-R[t]-R[e],0);C.push(P),M+=P}if(M){var L=Math.min(Math.abs(b)/M,E);if(b>0)for(var A=0;A<o-1;A++){var D=C[A]*L;w(D,0,A+1)}else for(var A=o-1;A>0;A--){var D=C[A-1]*L;w(-D,A,o)}}}function T(b){var E=b<0?-1:1;b=Math.abs(b);for(var C=Math.ceil(b/(o-1)),M=0;M<o-1;M++)if(E>0?w(C,0,M+1):w(-C,o-M-1,o),b-=C,b<=0)return}return u}function cAt(r,t,e,n){return xX(r,"x","width",t,e,n)}function SX(r,t,e,n){return xX(r,"y","height",t,e,n)}function wX(r){var t=[];r.sort(function(p,v){return v.priority-p.priority});var e=new jt(0,0,0,0);function n(p){if(!p.ignore){var v=p.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}p.ignore=!0}for(var i=0;i<r.length;i++){var a=r[i],o=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,h=a.labelLine;e.copy(a.rect),e.width-=.1,e.height-=.1,e.x+=.05,e.y+=.05;for(var c=a.obb,f=!1,d=0;d<t.length;d++){var g=t[d];if(e.intersect(g.rect)){if(o&&g.axisAligned){f=!0;break}if(g.obb||(g.obb=new Zx(g.localRect,g.transform)),c||(c=new Zx(s,l)),c.intersect(g.obb)){f=!0;break}}}f?(n(u),h&&n(h)):(u.attr("ignore",a.defaultAttr.ignore),h&&h.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}function fAt(r){if(r){for(var t=[],e=0;e<r.length;e++)t.push(r[e].slice());return t}}function dAt(r,t){var e=r.label,n=t&&t.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:e.style.align,verticalAlign:e.style.verticalAlign,labelLinePoints:fAt(n&&n.shape.points)}}var zG=["align","verticalAlign","width","height","fontSize"],ni=new Ws,$E=me(),gAt=me();function D_(r,t,e){for(var n=0;n<e.length;n++){var i=e[n];t[i]!=null&&(r[i]=t[i])}}var O_=["x","y","rotation"],pAt=function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(t,e,n,i,a){var o=i.style,s=i.__hostTarget,l=s.textConfig||{},u=i.getComputedTransform(),h=i.getBoundingRect().plain();jt.applyTransform(h,h,u),u?ni.setLocalTransform(u):(ni.x=ni.y=ni.rotation=ni.originX=ni.originY=0,ni.scaleX=ni.scaleY=1),ni.rotation=aa(ni.rotation);var c=i.__hostTarget,f;if(c){f=c.getBoundingRect().plain();var d=c.getComputedTransform();jt.applyTransform(f,f,d)}var g=f&&c.getTextGuideLine();this._labelList.push({label:i,labelLine:g,seriesModel:n,dataIndex:t,dataType:e,layoutOption:a,computedLayoutOption:null,rect:h,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:g&&g.ignore,x:ni.x,y:ni.y,scaleX:ni.scaleX,scaleY:ni.scaleY,rotation:ni.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},r.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var n=t.__model,i=n.get("labelLayout");(At(i)||he(i).length)&&t.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=Ft(a);o&&!o.disableLabelLayout&&e._addLabel(s.dataIndex,s.dataType,n,o,i)})},r.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),n=t.getHeight();function i(_,x){return function(){BG(_,x)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,u=o.defaultAttr,h=void 0;At(o.layoutOption)?h=o.layoutOption(dAt(o,l)):h=o.layoutOption,h=h||{},o.computedLayoutOption=h;var c=Math.PI/180;l&&l.setTextConfig({local:!1,position:h.x!=null||h.y!=null?null:u.attachedPos,rotation:h.rotate!=null?h.rotate*c:u.attachedRot,offset:[h.dx||0,h.dy||0]});var f=!1;if(h.x!=null?(s.x=ft(h.x,e),s.setStyle("x",0),f=!0):(s.x=u.x,s.setStyle("x",u.style.x)),h.y!=null?(s.y=ft(h.y,n),s.setStyle("y",0),f=!0):(s.y=u.y,s.setStyle("y",u.style.y)),h.labelLinePoints){var d=l.getTextGuideLine();d&&(d.setShape({points:h.labelLinePoints}),f=!1)}var g=$E(s);g.needsUpdateLabelLine=f,s.rotation=h.rotate!=null?h.rotate*c:u.rotation,s.scaleX=u.scaleX,s.scaleY=u.scaleY;for(var p=0;p<zG.length;p++){var v=zG[p];s.setStyle(v,h[v]!=null?h[v]:u.style[v])}if(h.draggable){if(s.draggable=!0,s.cursor="move",l){var m=o.seriesModel;if(o.dataIndex!=null){var y=o.seriesModel.getData(o.dataType);m=y.getItemModel(o.dataIndex)}s.on("drag",i(l,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=u.cursor}},r.prototype.layout=function(t){var e=t.getWidth(),n=t.getHeight(),i=_X(this._labelList),a=ze(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=ze(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});cAt(a,0,e),SX(o,0,n);var s=ze(i,function(l){return l.layoutOption.hideOverlap});wX(s)},r.prototype.processLabelsOverall=function(){var t=this;I(this._chartViewList,function(e){var n=e.__model,i=e.ignoreLabelLineUpdate,a=n.isAnimationEnabled();e.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!i,l=o.getTextContent();!s&&l&&(s=$E(l).needsUpdateLabelLine),s&&t._updateLabelLine(o,n),a&&t._animateLabels(o,n)})})},r.prototype._updateLabelLine=function(t,e){var n=t.getTextContent(),i=Ft(t),a=i.dataIndex;if(n&&a!=null){var o=e.getData(i.dataType),s=o.getItemModel(a),l={},u=o.getItemVisual(a,"style");if(u){var h=o.getVisual("drawType");l.stroke=u[h]}var c=s.getModel("labelLine");GL(t,BL(s),l),BG(t,c)}},r.prototype._animateLabels=function(t,e){var n=t.getTextContent(),i=t.getTextGuideLine();if(n&&(t.forceLabelAnimation||!n.ignore&&!n.invisible&&!t.disableLabelAnimation&&!Wd(t))){var a=$E(n),o=a.oldLayout,s=Ft(t),l=s.dataIndex,u={x:n.x,y:n.y,rotation:n.rotation},h=e.getData(s.dataType);if(o){n.attr(o);var f=t.prevStates;f&&(te(f,"select")>=0&&n.attr(a.oldLayoutSelect),te(f,"emphasis")>=0&&n.attr(a.oldLayoutEmphasis)),Ae(n,u,e,l)}else if(n.attr(u),!Jg(n).valueAnimation){var c=Vt(n.style.opacity,1);n.style.opacity=0,pr(n,{style:{opacity:c}},e,l)}if(a.oldLayout=u,n.states.select){var d=a.oldLayoutSelect={};D_(d,u,O_),D_(d,n.states.select,O_)}if(n.states.emphasis){var g=a.oldLayoutEmphasis={};D_(g,u,O_),D_(g,n.states.emphasis,O_)}d$(n,l,h,e,e)}if(i&&!i.ignore&&!i.invisible){var a=gAt(i),o=a.oldLayout,p={points:i.shape.points};o?(i.attr({shape:o}),Ae(i,{shape:p},e)):(i.setShape(p),i.style.strokePercent=0,pr(i,{style:{strokePercent:1}},e)),a.oldLayout=p}},r}(),YE=me();function vAt(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,e,n){var i=YE(e).labelManager;i||(i=YE(e).labelManager=new pAt),i.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(t,e,n){var i=YE(e).labelManager;n.updatedSeries.forEach(function(a){i.addLabelsOfSeries(e.getViewOfSeriesModel(a))}),i.updateLayoutConfig(e),i.layout(e),i.processLabelsOverall()})}var XE=Math.sin,ZE=Math.cos,TX=Math.PI,Ph=Math.PI*2,mAt=180/TX,bX=function(){function r(){}return r.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},r.prototype.moveTo=function(t,e){this._add("M",t,e)},r.prototype.lineTo=function(t,e){this._add("L",t,e)},r.prototype.bezierCurveTo=function(t,e,n,i,a,o){this._add("C",t,e,n,i,a,o)},r.prototype.quadraticCurveTo=function(t,e,n,i){this._add("Q",t,e,n,i)},r.prototype.arc=function(t,e,n,i,a,o){this.ellipse(t,e,n,n,0,i,a,o)},r.prototype.ellipse=function(t,e,n,i,a,o,s,l){var u=s-o,h=!l,c=Math.abs(u),f=cu(c-Ph)||(h?u>=Ph:-u>=Ph),d=u>0?u%Ph:u%Ph+Ph,g=!1;f?g=!0:cu(c)?g=!1:g=d>=TX==!!h;var p=t+n*ZE(o),v=e+i*XE(o);this._start&&this._add("M",p,v);var m=Math.round(a*mAt);if(f){var y=1/this._p,_=(h?1:-1)*(Ph-y);this._add("A",n,i,m,1,+h,t+n*ZE(o+_),e+i*XE(o+_)),y>.01&&this._add("A",n,i,m,0,+h,p,v)}else{var x=t+n*ZE(s),w=e+i*XE(s);this._add("A",n,i,m,+g,+h,x,w)}},r.prototype.rect=function(t,e,n,i){this._add("M",t,e),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(t,e,n,i,a,o,s,l,u){for(var h=[],c=this._p,f=1;f<arguments.length;f++){var d=arguments[f];if(isNaN(d)){this._invalid=!0;return}h.push(Math.round(d*c)/c)}this._d.push(t+h.join(" ")),this._start=t==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}(),zL="none",yAt=Math.round;function _At(r){var t=r.fill;return t!=null&&t!==zL}function xAt(r){var t=r.stroke;return t!=null&&t!==zL}var _I=["lineCap","miterLimit","lineJoin"],SAt=nt(_I,function(r){return"stroke-"+r.toLowerCase()});function wAt(r,t,e,n){var i=t.opacity==null?1:t.opacity;if(e instanceof bn){r("opacity",i);return}if(_At(t)){var a=Ym(t.fill);r("fill",a.color);var o=t.fillOpacity!=null?t.fillOpacity*a.opacity*i:a.opacity*i;o<1&&r("fill-opacity",o)}else r("fill",zL);if(xAt(t)){var s=Ym(t.stroke);r("stroke",s.color);var l=t.strokeNoScale?e.getLineScale():1,u=l?(t.lineWidth||0)/l:0,h=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*i:s.opacity*i,c=t.strokeFirst;if(u!==1&&r("stroke-width",u),c&&r("paint-order",c?"stroke":"fill"),h<1&&r("stroke-opacity",h),t.lineDash){var f=CL(e),d=f[0],g=f[1];d&&(g=yAt(g||0),r("stroke-dasharray",d.join(",")),(g||n)&&r("stroke-dashoffset",g))}for(var p=0;p<_I.length;p++){var v=_I[p];if(t[v]!==Yx[v]){var m=t[v]||Yx[v];m&&r(SAt[p],m)}}}}var EX="http://www.w3.org/2000/svg",CX="http://www.w3.org/1999/xlink",TAt="http://www.w3.org/2000/xmlns/",bAt="http://www.w3.org/XML/1998/namespace",VG="ecmeta_";function MX(r){return document.createElementNS(EX,r)}function ln(r,t,e,n,i){return{tag:r,attrs:e||{},children:n,text:i,key:t}}function EAt(r,t){var e=[];if(t)for(var n in t){var i=t[n],a=n;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),e.push(a))}return"<"+r+" "+e.join(" ")+">"}function CAt(r){return"</"+r+">"}function VL(r,t){t=t||{};var e=t.newline?`
`:"";function n(i){var a=i.children,o=i.tag,s=i.attrs,l=i.text;return EAt(o,s)+(o!=="style"?Di(l):l||"")+(a?""+e+nt(a,function(u){return n(u)}).join(e)+e:"")+CAt(o)}return n(r)}function MAt(r,t,e){e=e||{};var n=e.newline?`
`:"",i=" {"+n,a=n+"}",o=nt(he(r),function(l){return l+i+nt(he(r[l]),function(u){return u+":"+r[l][u]+";"}).join(n)+a}).join(n),s=nt(he(t),function(l){return"@keyframes "+l+i+nt(he(t[l]),function(u){return u+i+nt(he(t[l][u]),function(h){var c=t[l][u][h];return h==="d"&&(c='path("'+c+'")'),h+":"+c+";"}).join(n)+a}).join(n)+a}).join(n);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(n)}function xI(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function UG(r,t,e,n){return ln("svg","root",{width:r,height:t,xmlns:EX,"xmlns:xlink":CX,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+r+" "+t:!1},e)}var AAt=0;function AX(){return AAt++}var WG={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Yh="transform-origin";function IAt(r,t,e){var n=tt({},r.shape);tt(n,t),r.buildPath(e,n);var i=new bX;return i.reset(uH(r)),e.rebuildPath(i,1),i.generateStr(),i.getStr()}function RAt(r,t){var e=t.originX,n=t.originY;(e||n)&&(r[Yh]=e+"px "+n+"px")}var PAt={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function IX(r,t){var e=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[e]=r,e}function LAt(r,t,e){var n=r.shape.paths,i={},a,o;if(I(n,function(l){var u=xI(e.zrId);u.animation=!0,sT(l,{},u,!0);var h=u.cssAnims,c=u.cssNodes,f=he(h),d=f.length;if(d){o=f[d-1];var g=h[o];for(var p in g){var v=g[p];i[p]=i[p]||{d:""},i[p].d+=v.d||""}for(var m in c){var y=c[m].animation;y.indexOf(o)>=0&&(a=y)}}}),!!a){t.d=!1;var s=IX(i,e);return a.replace(o,s)}}function HG(r){return yt(r)?WG[r]?"cubic-bezier("+WG[r]+")":$P(r)?r:"":""}function sT(r,t,e,n){var i=r.animators,a=i.length,o=[];if(r instanceof oL){var s=LAt(r,t,e);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var h=i[u],c=[h.getMaxTime()/1e3+"s"],f=HG(h.getClip().easing),d=h.getDelay();f?c.push(f):c.push("linear"),d&&c.push(d/1e3+"s"),h.getLoop()&&c.push("infinite");var g=c.join(" ");l[g]=l[g]||[g,[]],l[g][1].push(h)}function p(y){var _=y[1],x=_.length,w={},S={},T={},b="animation-timing-function";function E(K,et,W){for(var Z=K.getTracks(),at=K.getMaxTime(),O=0;O<Z.length;O++){var N=Z[O];if(N.needsAnimate()){var H=N.keyframes,Q=N.propName;if(W&&(Q=W(Q)),Q)for(var J=0;J<H.length;J++){var ot=H[J],ct=Math.round(ot.time/at*100)+"%",gt=HG(ot.easing),pt=ot.rawValue;(yt(pt)||be(pt))&&(et[ct]=et[ct]||{},et[ct][Q]=ot.rawValue,gt&&(et[ct][b]=gt))}}}}for(var C=0;C<x;C++){var M=_[C],A=M.targetName;A?A==="shape"&&E(M,S):!n&&E(M,w)}for(var R in w){var P={};gH(P,r),tt(P,w[R]);var L=hH(P),D=w[R][b];T[R]=L?{transform:L}:{},RAt(T[R],P),D&&(T[R][b]=D)}var k,F=!0;for(var R in S){T[R]=T[R]||{};var B=!k,D=S[R][b];B&&(k=new ps);var V=k.len();k.reset(),T[R].d=IAt(r,S[R],k);var Y=k.len();if(!B&&V!==Y){F=!1;break}D&&(T[R][b]=D)}if(!F)for(var R in T)delete T[R].d;if(!n)for(var C=0;C<x;C++){var M=_[C],A=M.targetName;A==="style"&&E(M,T,function(Z){return PAt[Z]})}for(var q=he(T),lt=!0,X,C=1;C<q.length;C++){var St=q[C-1],mt=q[C];if(T[St][Yh]!==T[mt][Yh]){lt=!1;break}X=T[St][Yh]}if(lt&&X){for(var R in T)T[R][Yh]&&delete T[R][Yh];t[Yh]=X}if(ze(q,function(K){return he(T[K]).length>0}).length){var $=IX(T,e);return $+" "+y[0]+" both"}}for(var v in l){var s=p(l[v]);s&&o.push(s)}if(o.length){var m=e.zrId+"-cls-"+AX();e.cssNodes["."+m]={animation:o.join(",")},t.class=m}}function DAt(r,t,e){if(!r.ignore)if(r.isSilent()){var n={"pointer-events":"none"};$G(n,t,e)}else{var i=r.states.emphasis&&r.states.emphasis.style?r.states.emphasis.style:{},a=i.fill;if(!a){var o=r.style&&r.style.fill,s=r.states.select&&r.states.select.style&&r.states.select.style.fill,l=r.currentStates.indexOf("select")>=0&&s||o;l&&(a=LA(l))}var u=i.lineWidth;if(u){var h=!i.strokeNoScale&&r.transform?r.transform[0]:1;u=u/h}var n={cursor:"pointer"};a&&(n.fill=a),i.stroke&&(n.stroke=i.stroke),u&&(n["stroke-width"]=u),$G(n,t,e)}}function $G(r,t,e,n){var i=JSON.stringify(r),a=e.cssStyleCache[i];a||(a=e.zrId+"-cls-"+AX(),e.cssStyleCache[i]=a,e.cssNodes["."+a+":hover"]=r),t.class=t.class?t.class+" "+a:a}var ay=Math.round;function RX(r){return r&&yt(r.src)}function PX(r){return r&&At(r.toDataURL)}function UL(r,t,e,n){wAt(function(i,a){var o=i==="fill"||i==="stroke";o&&lH(a)?DX(t,r,i,n):o&&YP(a)?OX(e,r,i,n):o&&a==="none"?r[i]="transparent":r[i]=a},t,e,!1),zAt(e,r,n)}function WL(r,t){var e=LSt(t);e&&(e.each(function(n,i){n!=null&&(r[(VG+i).toLowerCase()]=n+"")}),t.isSilent()&&(r[VG+"silent"]="true"))}function YG(r){return cu(r[0]-1)&&cu(r[1])&&cu(r[2])&&cu(r[3]-1)}function OAt(r){return cu(r[4])&&cu(r[5])}function HL(r,t,e){if(t&&!(OAt(t)&&YG(t))){var n=1e4;r.transform=YG(t)?"translate("+ay(t[4]*n)/n+" "+ay(t[5]*n)/n+")":eSt(t)}}function XG(r,t,e){for(var n=r.points,i=[],a=0;a<n.length;a++)i.push(ay(n[a][0]*e)/e),i.push(ay(n[a][1]*e)/e);t.points=i.join(" ")}function ZG(r){return!r.smooth}function NAt(r){var t=nt(r,function(e){return typeof e=="string"?[e,e]:e});return function(e,n,i){for(var a=0;a<t.length;a++){var o=t[a],s=e[o[0]];s!=null&&(n[o[1]]=ay(s*i)/i)}}}var FAt={circle:[NAt(["cx","cy","r"])],polyline:[XG,ZG],polygon:[XG,ZG]};function kAt(r){for(var t=r.animators,e=0;e<t.length;e++)if(t[e].targetName==="shape")return!0;return!1}function LX(r,t){var e=r.style,n=r.shape,i=FAt[r.type],a={},o=t.animation,s="path",l=r.style.strokePercent,u=t.compress&&uH(r)||4;if(i&&!t.willUpdate&&!(i[1]&&!i[1](n))&&!(o&&kAt(r))&&!(l<1)){s=r.type;var h=Math.pow(10,u);i[0](n,a,h)}else{var c=!r.path||r.shapeChanged();r.path||r.createPathProxy();var f=r.path;c&&(f.beginPath(),r.buildPath(f,r.shape),r.pathUpdated());var d=f.getVersion(),g=r,p=g.__svgPathBuilder;(g.__svgPathVersion!==d||!p||l!==g.__svgPathStrokePercent)&&(p||(p=g.__svgPathBuilder=new bX),p.reset(u),f.rebuildPath(p,l),p.generateStr(),g.__svgPathVersion=d,g.__svgPathStrokePercent=l),a.d=p.getStr()}return HL(a,r.transform),UL(a,e,r,t),WL(a,r),t.animation&&sT(r,a,t),t.emphasis&&DAt(r,a,t),ln(s,r.id+"",a)}function GAt(r,t){var e=r.style,n=e.image;if(n&&!yt(n)&&(RX(n)?n=n.src:PX(n)&&(n=n.toDataURL())),!!n){var i=e.x||0,a=e.y||0,o=e.width,s=e.height,l={href:n,width:o,height:s};return i&&(l.x=i),a&&(l.y=a),HL(l,r.transform),UL(l,e,r,t),WL(l,r),t.animation&&sT(r,l,t),ln("image",r.id+"",l)}}function BAt(r,t){var e=r.style,n=e.text;if(n!=null&&(n+=""),!(!n||isNaN(e.x)||isNaN(e.y))){var i=e.font||ku,a=e.x||0,o=nSt(e.y||0,Dw(i),e.textBaseline),s=rSt[e.textAlign]||e.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(zH(e)){var u="",h=e.fontStyle,c=BH(e.fontSize);if(!parseFloat(c))return;var f=e.fontFamily||B9,d=e.fontWeight;u+="font-size:"+c+";font-family:"+f+";",h&&h!=="normal"&&(u+="font-style:"+h+";"),d&&d!=="normal"&&(u+="font-weight:"+d+";"),l.style=u}else l.style="font: "+i;return n.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),HL(l,r.transform),UL(l,e,r,t),WL(l,r),t.animation&&sT(r,l,t),ln("text",r.id+"",l,void 0,n)}}function jG(r,t){if(r instanceof ae)return LX(r,t);if(r instanceof bn)return GAt(r,t);if(r instanceof pg)return BAt(r,t)}function zAt(r,t,e){var n=r.style;if(iSt(n)){var i=aSt(r),a=e.shadowCache,o=a[i];if(!o){var s=r.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var h=n.shadowOffsetX||0,c=n.shadowOffsetY||0,f=n.shadowBlur,d=Ym(n.shadowColor),g=d.opacity,p=d.color,v=f/2/l,m=f/2/u,y=v+" "+m;o=e.zrId+"-s"+e.shadowIdx++,e.defs[o]=ln("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[ln("feDropShadow","",{dx:h/l,dy:c/u,stdDeviation:y,"flood-color":p,"flood-opacity":g})]),a[i]=o}t.filter=Lw(o)}}function DX(r,t,e,n){var i=r[e],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(oH(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(sH(i))a="radialGradient",o.cx=Vt(i.x,.5),o.cy=Vt(i.y,.5),o.r=Vt(i.r,.5);else return;for(var s=i.colorStops,l=[],u=0,h=s.length;u<h;++u){var c=DA(s[u].offset)*100+"%",f=s[u].color,d=Ym(f),g=d.color,p=d.opacity,v={offset:c};v["stop-color"]=g,p<1&&(v["stop-opacity"]=p),l.push(ln("stop",u+"",v))}var m=ln(a,"",o,l),y=VL(m),_=n.gradientCache,x=_[y];x||(x=n.zrId+"-g"+n.gradientIdx++,_[y]=x,o.id=x,n.defs[x]=ln(a,x,o,l)),t[e]=Lw(x)}function OX(r,t,e,n){var i=r.style[e],a=r.getBoundingRect(),o={},s=i.repeat,l=s==="no-repeat",u=s==="repeat-x",h=s==="repeat-y",c;if(aH(i)){var f=i.imageWidth,d=i.imageHeight,g=void 0,p=i.image;if(yt(p)?g=p:RX(p)?g=p.src:PX(p)&&(g=p.toDataURL()),typeof Image>"u"){var v="Image width/height must been given explictly in svg-ssr renderer.";xi(f,v),xi(d,v)}else if(f==null||d==null){var m=function(C,M){if(C){var A=C.elm,R=f||M.width,P=d||M.height;C.tag==="pattern"&&(u?(P=1,R/=a.width):h&&(R=1,P/=a.height)),C.attrs.width=R,C.attrs.height=P,A&&(A.setAttribute("width",R),A.setAttribute("height",P))}},y=JP(g,null,r,function(C){l||m(S,C),m(c,C)});y&&y.width&&y.height&&(f=f||y.width,d=d||y.height)}c=ln("image","img",{href:g,width:f,height:d}),o.width=f,o.height=d}else i.svgElement&&(c=Pt(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(c){var _,x;l?_=x=1:u?(x=1,_=o.width/a.width):h?(_=1,x=o.height/a.height):o.patternUnits="userSpaceOnUse",_!=null&&!isNaN(_)&&(o.width=_),x!=null&&!isNaN(x)&&(o.height=x);var w=hH(i);w&&(o.patternTransform=w);var S=ln("pattern","",o,[c]),T=VL(S),b=n.patternCache,E=b[T];E||(E=n.zrId+"-p"+n.patternIdx++,b[T]=E,o.id=E,S=n.defs[E]=ln("pattern",E,o,[c])),t[e]=Lw(E)}}function VAt(r,t,e){var n=e.clipPathCache,i=e.defs,a=n[r.id];if(!a){a=e.zrId+"-c"+e.clipPathIdx++;var o={id:a};n[r.id]=a,i[a]=ln("clipPath",a,o,[LX(r,e)])}t["clip-path"]=Lw(a)}function KG(r){return document.createTextNode(r)}function rc(r,t,e){r.insertBefore(t,e)}function qG(r,t){r.removeChild(t)}function JG(r,t){r.appendChild(t)}function NX(r){return r.parentNode}function FX(r){return r.nextSibling}function jE(r,t){r.textContent=t}var QG=58,UAt=120,WAt=ln("","");function SI(r){return r===void 0}function Wo(r){return r!==void 0}function HAt(r,t,e){for(var n={},i=t;i<=e;++i){var a=r[i].key;a!==void 0&&(n[a]=i)}return n}function xv(r,t){var e=r.key===t.key,n=r.tag===t.tag;return n&&e}function oy(r){var t,e=r.children,n=r.tag;if(Wo(n)){var i=r.elm=MX(n);if($L(WAt,r),rt(e))for(t=0;t<e.length;++t){var a=e[t];a!=null&&JG(i,oy(a))}else Wo(r.text)&&!Rt(r.text)&&JG(i,KG(r.text))}else r.elm=KG(r.text);return r.elm}function kX(r,t,e,n,i){for(;n<=i;++n){var a=e[n];a!=null&&rc(r,oy(a),t)}}function cS(r,t,e,n){for(;e<=n;++e){var i=t[e];if(i!=null)if(Wo(i.tag)){var a=NX(i.elm);qG(a,i.elm)}else qG(r,i.elm)}}function $L(r,t){var e,n=t.elm,i=r&&r.attrs||{},a=t.attrs||{};if(i!==a){for(e in a){var o=a[e],s=i[e];s!==o&&(o===!0?n.setAttribute(e,""):o===!1?n.removeAttribute(e):e==="style"?n.style.cssText=o:e.charCodeAt(0)!==UAt?n.setAttribute(e,o):e==="xmlns:xlink"||e==="xmlns"?n.setAttributeNS(TAt,e,o):e.charCodeAt(3)===QG?n.setAttributeNS(bAt,e,o):e.charCodeAt(5)===QG?n.setAttributeNS(CX,e,o):n.setAttribute(e,o))}for(e in i)e in a||n.removeAttribute(e)}}function $At(r,t,e){for(var n=0,i=0,a=t.length-1,o=t[0],s=t[a],l=e.length-1,u=e[0],h=e[l],c,f,d,g;n<=a&&i<=l;)o==null?o=t[++n]:s==null?s=t[--a]:u==null?u=e[++i]:h==null?h=e[--l]:xv(o,u)?(ad(o,u),o=t[++n],u=e[++i]):xv(s,h)?(ad(s,h),s=t[--a],h=e[--l]):xv(o,h)?(ad(o,h),rc(r,o.elm,FX(s.elm)),o=t[++n],h=e[--l]):xv(s,u)?(ad(s,u),rc(r,s.elm,o.elm),s=t[--a],u=e[++i]):(SI(c)&&(c=HAt(t,n,a)),f=c[u.key],SI(f)?rc(r,oy(u),o.elm):(d=t[f],d.tag!==u.tag?rc(r,oy(u),o.elm):(ad(d,u),t[f]=void 0,rc(r,d.elm,o.elm))),u=e[++i]);(n<=a||i<=l)&&(n>a?(g=e[l+1]==null?null:e[l+1].elm,kX(r,g,e,i,l)):cS(r,t,n,a))}function ad(r,t){var e=t.elm=r.elm,n=r.children,i=t.children;r!==t&&($L(r,t),SI(t.text)?Wo(n)&&Wo(i)?n!==i&&$At(e,n,i):Wo(i)?(Wo(r.text)&&jE(e,""),kX(e,null,i,0,i.length-1)):Wo(n)?cS(e,n,0,n.length-1):Wo(r.text)&&jE(e,""):r.text!==t.text&&(Wo(n)&&cS(e,n,0,n.length-1),jE(e,t.text)))}function YAt(r,t){if(xv(r,t))ad(r,t);else{var e=r.elm,n=NX(e);oy(t),n!==null&&(rc(n,t.elm,FX(e)),cS(n,[r],0,0))}return t}var XAt=0,ZAt=function(){function r(t,e,n){if(this.type="svg",this.refreshHover=tB(),this.configLayer=tB(),this.storage=e,this._opts=n=tt({},n),this.root=t,this._id="zr"+XAt++,this._oldVNode=UG(n.width,n.height),t&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=MX("svg");$L(null,this._oldVNode),i.appendChild(a),t.appendChild(i)}this.resize(n.width,n.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",YAt(this._oldVNode,t),this._oldVNode=t}},r.prototype.renderOneToVNode=function(t){return jG(t,xI(this._id))},r.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),n=this._width,i=this._height,a=xI(this._id);a.animation=t.animation,a.willUpdate=t.willUpdate,a.compress=t.compress,a.emphasis=t.emphasis;var o=[],s=this._bgVNode=jAt(n,i,this._backgroundColor,a);s&&o.push(s);var l=t.compress?null:this._mainVNode=ln("g","main",{},[]);this._paintList(e,a,l?l.children:o),l&&o.push(l);var u=nt(he(a.defs),function(f){return a.defs[f]});if(u.length&&o.push(ln("defs","defs",{},u)),t.animation){var h=MAt(a.cssNodes,a.cssAnims,{newline:!0});if(h){var c=ln("style","stl",{},[],h);o.push(c)}}return UG(n,i,o,t.useViewBox)},r.prototype.renderToString=function(t){return t=t||{},VL(this.renderToVNode({animation:Vt(t.cssAnimation,!0),emphasis:Vt(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Vt(t.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(t,e,n){for(var i=t.length,a=[],o=0,s,l,u=0,h=0;h<i;h++){var c=t[h];if(!c.invisible){var f=c.__clipPaths,d=f&&f.length||0,g=l&&l.length||0,p=void 0;for(p=Math.max(d-1,g-1);p>=0&&!(f&&l&&f[p]===l[p]);p--);for(var v=g-1;v>p;v--)o--,s=a[o-1];for(var m=p+1;m<d;m++){var y={};VAt(f[m],y,e);var _=ln("g","clip-g-"+u++,y,[]);(s?s.children:n).push(_),a[o++]=_,s=_}l=f;var x=jG(c,e);x&&(s?s.children:n).push(x)}}},r.prototype.resize=function(t,e){var n=this._opts,i=this.root,a=this._viewport;if(t!=null&&(n.width=t),e!=null&&(n.height=e),i&&a&&(a.style.display="none",t=wd(i,0,n),e=wd(i,1,n),a.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,a){var o=a.style;o.width=t+"px",o.height=e+"px"}if(YP(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",e));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",e))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(t){var e=this.renderToString(),n="data:image/svg+xml;";return t?(e=sSt(e),e&&n+"base64,"+e):n+"charset=UTF-8,"+encodeURIComponent(e)},r}();function tB(r){return function(){}}function jAt(r,t,e,n){var i;if(e&&e!=="none")if(i=ln("rect","bg",{width:r,height:t,x:"0",y:"0"}),lH(e))DX({fill:e},i.attrs,"fill",n);else if(YP(e))OX({style:{fill:e},dirty:Lr,getBoundingRect:function(){return{width:r,height:t}}},i.attrs,"fill",n);else{var a=Ym(e),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}function KAt(r){r.registerPainter("svg",ZAt)}function eB(r,t,e){var n=Gu.createCanvas(),i=t.getWidth(),a=t.getHeight(),o=n.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",n.setAttribute("data-zr-dom-id",r)),n.width=i*e,n.height=a*e,n}var KE=function(r){U(t,r);function t(e,n,i){var a=r.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||Hx,typeof e=="string"?o=eB(e,n,i):Rt(e)&&(o=e,e=o.id),a.id=e,a.dom=o;var s=o.style;return s&&($9(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=n,a.dpr=i,a}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=eB("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),e!==1&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,n,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new jt(0,0,0,0);function h(y){if(!(!y.isFinite()||y.isZero()))if(o.length===0){var _=new jt(0,0,0,0);_.copy(y),o.push(_)}else{for(var x=!1,w=1/0,S=0,T=0;T<o.length;++T){var b=o[T];if(b.intersect(y)){var E=new jt(0,0,0,0);E.copy(b),E.union(y),o[T]=E,x=!0;break}else if(l){u.copy(y),u.union(b);var C=y.width*y.height,M=b.width*b.height,A=u.width*u.height,R=A-C-M;R<w&&(w=R,S=T)}}if(l&&(o[S].union(y),x=!0),!x){var _=new jt(0,0,0,0);_.copy(y),o.push(_)}l||(l=o.length>=s)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var f=e[c];if(f){var d=f.shouldBePainted(i,a,!0,!0),g=f.__isRendered&&(f.__dirty&ta||!d)?f.getPrevPaintRect():null;g&&h(g);var p=d&&(f.__dirty&ta||!f.__isRendered)?f.getPaintRect():null;p&&h(p)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var f=n[c],d=f&&f.shouldBePainted(i,a,!0,!0);if(f&&(!d||!f.__zr)&&f.__isRendered){var g=f.getPrevPaintRect();g&&h(g)}}var v;do{v=!1;for(var c=0;c<o.length;){if(o[c].isZero()){o.splice(c,1);continue}for(var m=c+1;m<o.length;)o[c].intersect(o[m])?(v=!0,o[c].union(o[m]),o.splice(m,1)):m++;c++}}while(v);return this._paintRects=o,o},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,n){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=e+"px",o.height=n+"px"),a.width=e*i,a.height=n*i,s&&(s.width=e*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(e,n,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;n=n||this.clearColor;var u=this.motionBlur&&!e,h=this.lastFrameAlpha,c=this.dpr,f=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/c,l/c));var d=this.domBack;function g(p,v,m,y){if(o.clearRect(p,v,m,y),n&&n!=="transparent"){var _=void 0;if(Iw(n)){var x=n.global||n.__width===m&&n.__height===y;_=x&&n.__canvasGradient||cI(o,n,{x:0,y:0,width:m,height:y}),n.__canvasGradient=_,n.__width=m,n.__height=y}else pxt(n)&&(n.scaleX=n.scaleX||c,n.scaleY=n.scaleY||c,_=fI(o,n,{dirty:function(){f.setUnpainted(),f.painter.refresh()}}));o.save(),o.fillStyle=_||n,o.fillRect(p,v,m,y),o.restore()}u&&(o.save(),o.globalAlpha=h,o.drawImage(d,p,v,m,y),o.restore())}!i||u?g(0,0,s,l):i.length&&I(i,function(p){g(p.x*c,p.y*c,p.width*c,p.height*c)})},t}(Za),rB=1e5,Lh=314159,N_=.01,qAt=.001;function JAt(r){return r?r.__builtin__?!0:!(typeof r.resize!="function"||typeof r.refresh!="function"):!1}function QAt(r,t){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+r+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}var tIt=function(){function r(t,e,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=tt({},n||{}),this.dpr=n.devicePixelRatio||Hx,this._singleCanvas=a,this.root=t;var o=t.style;o&&($9(t),t.innerHTML=""),this.storage=e;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var h=t,c=h.width,f=h.height;n.width!=null&&(c=n.width),n.height!=null&&(f=n.height),this.dpr=n.devicePixelRatio||1,h.width=c*this.dpr,h.height=f*this.dpr,this._width=c,this._height=f;var d=new KE(h,this,this.dpr);d.__builtin__=!0,d.initContext(),l[Lh]=d,d.zlevel=Lh,s.push(Lh),this._domRoot=t}else{this._width=wd(t,0,n),this._height=wd(t,1,n);var u=this._domRoot=QAt(this._width,this._height);t.appendChild(u)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),!!e){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<e;o++){var s=t[o];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(rB)),a||(a=n.ctx,a.save()),pc(a,s,i,o===e-1))}a&&a.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(rB)},r.prototype.paintOne=function(t,e){SY(t,e)},r.prototype._paintList=function(t,e,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var a=this._doPaintList(t,e,n),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;Gx(function(){l._paintList(t,e,n,i)})}}},r.prototype._compositeManually=function(){var t=this.getLayer(Lh).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)})},r.prototype._doPaintList=function(t,e,n){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&a.push(u)}for(var h=!0,c=!1,f=function(p){var v=a[p],m=v.ctx,y=o&&v.createRepaintRects(t,e,d._width,d._height),_=n?v.__startIndex:v.__drawIndex,x=!n&&v.incremental&&Date.now,w=x&&Date.now(),S=v.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,S,y);else if(_===v.__startIndex){var T=t[_];(!T.incremental||!T.notClear||n)&&v.clear(!1,S,y)}_===-1&&(_=v.__startIndex);var b,E=function(R){var P={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(b=_;b<v.__endIndex;b++){var L=t[b];if(L.__inHover&&(c=!0),i._doPaintEl(L,v,o,R,P,b===v.__endIndex-1),x){var D=Date.now()-w;if(D>15)break}}P.prevElClipPaths&&m.restore()};if(y)if(y.length===0)b=v.__endIndex;else for(var C=d.dpr,M=0;M<y.length;++M){var A=y[M];m.save(),m.beginPath(),m.rect(A.x*C,A.y*C,A.width*C,A.height*C),m.clip(),E(A),m.restore()}else m.save(),E(),m.restore();v.__drawIndex=b,v.__drawIndex<v.__endIndex&&(h=!1)},d=this,g=0;g<a.length;g++)f(g);return le.wxa&&I(this._layers,function(p){p&&p.ctx&&p.ctx.draw&&p.ctx.draw()}),{finished:h,needsRefreshHover:c}},r.prototype._doPaintEl=function(t,e,n,i,a,o){var s=e.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(pc(s,t,a,o),t.setPrevPaintRect(l))}else pc(s,t,a,o)},r.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Lh);var n=this._layers[t];return n||(n=new KE("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?Zt(n,this._layerConfig[t],!0):this._layerConfig[t-N_]&&Zt(n,this._layerConfig[t-N_],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},r.prototype.insertLayer=function(t,e){var n=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!n[t]&&JAt(e)){if(a>0&&t>i[0]){for(l=0;l<a-1&&!(i[l]<t&&i[l+1]>t);l++);s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=e,!e.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(e.dom,u.nextSibling):o.appendChild(e.dom)}else o.firstChild?o.insertBefore(e.dom,o.firstChild):o.appendChild(e.dom);e.painter||(e.painter=this)}},r.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i];t.call(e,this._layers[a],a)}},r.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i],o=this._layers[a];o.__builtin__&&t.call(e,o,a)}},r.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i],o=this._layers[a];o.__builtin__||t.call(e,o,a)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(c,f){c.__dirty=c.__used=!1});function e(c){a&&(a.__endIndex!==c&&(a.__dirty=!0),a.__endIndex=c)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,h=void 0;s!==u&&(s=u,o=0),i.incremental?(h=this.getLayer(u+qAt,this._needsManuallyCompositing),h.incremental=!0,o=1):h=this.getLayer(u+(o>0?N_:0),this._needsManuallyCompositing),h.__builtin__||GP("ZLevel "+u+" has been used by unkown layer "+h.id),h!==a&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,e(l),a=h),i.__dirty&ta&&!i.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}e(l),this.eachBuiltinLayer(function(c,f){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(t){t.clear()},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t,I(this._layers,function(e){e.setUnpainted()})},r.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?Zt(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===t||a===t+N_){var o=this._layers[a];Zt(o,n[t],!0)}}}},r.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(te(n,t),1))},r.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,a=this.root;if(t!=null&&(i.width=t),e!=null&&(i.height=e),t=wd(a,0,i),e=wd(a,1,i),n.style.display="",this._width!==t||e!==this._height){n.style.width=t+"px",n.style.height=e+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(t==null||e==null)return;this._width=t,this._height=e,this.getLayer(Lh).resize(t,e)}return this},r.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Lh].dom;var e=new KE("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=e.dom.width,a=e.dom.height;this.eachLayer(function(c){c.__builtin__?n.drawImage(c.dom,0,0,i,a):c.renderToCanvas&&(n.save(),c.renderToCanvas(n),n.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var h=s[l];pc(n,h,o,l===u-1)}return e.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r}();function eIt(r){r.registerPainter("canvas",tIt)}var rIt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e){return Sl(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var n=new Dt,i=Ur("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);n.add(i),i.setStyle(e.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=e.itemHeight*.8,u=Ur(s,(e.itemWidth-l)/2,(e.itemHeight-l)/2,l,l,e.itemStyle.fill);n.add(u),u.setStyle(e.itemStyle);var h=e.iconRotate==="inherit"?o:e.iconRotate||0;return u.rotation=h*Math.PI/180,u.setOrigin([e.itemWidth/2,e.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(lr);function xg(r,t){var e=r.mapDimensionsAll("defaultedLabel"),n=e.length;if(n===1){var i=mg(r,t,e[0]);return i!=null?i+"":null}else if(n){for(var a=[],o=0;o<e.length;o++)a.push(mg(r,t,e[o]));return a.join(" ")}}function GX(r,t){var e=r.mapDimensionsAll("defaultedLabel");if(!rt(t))return t+"";for(var n=[],i=0;i<e.length;i++){var a=r.getDimensionIndex(e[i]);a>=0&&n.push(t[a])}return n.join(" ")}var n0=function(r){U(t,r);function t(e,n,i,a){var o=r.call(this)||this;return o.updateData(e,n,i,a),o}return t.prototype._createSymbol=function(e,n,i,a,o){this.removeAll();var s=Ur(e,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=nIt,this._symbolType=e,this.add(s)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){ul(this.childAt(0))},t.prototype.downplay=function(){hl(this.childAt(0))},t.prototype.setZ=function(e,n){var i=this.childAt(0);i.zlevel=e,i.z=n},t.prototype.setDraggable=function(e,n){var i=this.childAt(0);i.draggable=e,i.cursor=!n&&e?"move":i.cursor},t.prototype.updateData=function(e,n,i,a){this.silent=!1;var o=e.getItemVisual(n,"symbol")||"circle",s=e.hostModel,l=t.getSymbolSize(e,n),u=o!==this._symbolType,h=a&&a.disableAnimation;if(u){var c=e.getItemVisual(n,"symbolKeepAspect");this._createSymbol(o,e,n,l,c)}else{var f=this.childAt(0);f.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};h?f.attr(d):Ae(f,d,s,n),xo(f)}if(this._updateCommon(e,n,l,i,a),u){var f=this.childAt(0);if(!h){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,pr(f,d,s,n)}}h&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,n,i,a,o){var s=this.childAt(0),l=e.hostModel,u,h,c,f,d,g,p,v,m;if(a&&(u=a.emphasisItemStyle,h=a.blurItemStyle,c=a.selectItemStyle,f=a.focus,d=a.blurScope,p=a.labelStatesModels,v=a.hoverScale,m=a.cursorStyle,g=a.emphasisDisabled),!a||e.hasItemOption){var y=a&&a.itemModel?a.itemModel:e.getItemModel(n),_=y.getModel("emphasis");u=_.getModel("itemStyle").getItemStyle(),c=y.getModel(["select","itemStyle"]).getItemStyle(),h=y.getModel(["blur","itemStyle"]).getItemStyle(),f=_.get("focus"),d=_.get("blurScope"),g=_.get("disabled"),p=hn(y),v=_.getShallow("scale"),m=y.getShallow("cursor")}var x=e.getItemVisual(n,"symbolRotate");s.attr("rotation",(x||0)*Math.PI/180||0);var w=af(e.getItemVisual(n,"symbolOffset"),i);w&&(s.x=w[0],s.y=w[1]),m&&s.attr("cursor",m);var S=e.getItemVisual(n,"style"),T=S.fill;if(s instanceof bn){var b=s.style;s.useStyle(tt({image:b.image,x:b.x,y:b.y,width:b.width,height:b.height},S))}else s.__isEmptyBrush?s.useStyle(tt({},S)):s.useStyle(S),s.style.decal=null,s.setColor(T,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var E=e.getItemVisual(n,"liftZ"),C=this._z2;E!=null?C==null&&(this._z2=s.z2,s.z2+=E):C!=null&&(s.z2=C,this._z2=null);var M=o&&o.useNameLabel;Nn(s,p,{labelFetcher:l,labelDataIndex:n,defaultText:A,inheritColor:T,defaultOpacity:S.opacity});function A(L){return M?e.getName(L):xg(e,L)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var R=s.ensureState("emphasis");R.style=u,s.ensureState("select").style=c,s.ensureState("blur").style=h;var P=v==null||v===!0?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;R.scaleX=this._sizeX*P,R.scaleY=this._sizeY*P,this.setSymbolScale(1),wr(this,f,d,g)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,n,i){var a=this.childAt(0),o=Ft(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&zu(l,{style:{opacity:0}},n,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();zu(a,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:o,cb:e,removeOpt:s})},t.getSymbolSize=function(e,n){return ap(e.getItemVisual(n,"symbolSize"))},t}(Dt);function nIt(r,t){this.parent.drift(r,t)}function qE(r,t,e,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&r.getItemVisual(e,"symbol")!=="none"}function nB(r){return r!=null&&!Rt(r)&&(r={isIgnore:r}),r||{}}function iB(r){var t=r.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:hn(t),cursorStyle:t.get("cursor")}}var i0=function(){function r(t){this.group=new Dt,this._SymbolCtor=t||n0}return r.prototype.updateData=function(t,e){this._progressiveEls=null,e=nB(e);var n=this.group,i=t.hostModel,a=this._data,o=this._SymbolCtor,s=e.disableAnimation,l=iB(t),u={disableAnimation:s},h=e.getSymbolPoint||function(c){return t.getItemLayout(c)};a||n.removeAll(),t.diff(a).add(function(c){var f=h(c);if(qE(t,f,c,e)){var d=new o(t,c,l,u);d.setPosition(f),t.setItemGraphicEl(c,d),n.add(d)}}).update(function(c,f){var d=a.getItemGraphicEl(f),g=h(c);if(!qE(t,g,c,e)){n.remove(d);return}var p=t.getItemVisual(c,"symbol")||"circle",v=d&&d.getSymbolType&&d.getSymbolType();if(!d||v&&v!==p)n.remove(d),d=new o(t,c,l,u),d.setPosition(g);else{d.updateData(t,c,l,u);var m={x:g[0],y:g[1]};s?d.attr(m):Ae(d,m,i)}n.add(d),t.setItemGraphicEl(c,d)}).remove(function(c){var f=a.getItemGraphicEl(c);f&&f.fadeOut(function(){n.remove(f)},i)}).execute(),this._getSymbolPoint=h,this._data=t},r.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(n,i){var a=t._getSymbolPoint(i);n.setPosition(a),n.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=iB(t),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e,n){this._progressiveEls=[],n=nB(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var o=e.getItemLayout(a);if(qE(e,o,a,n)){var s=new this._SymbolCtor(e,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),e.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},r.prototype.eachRendered=function(t){Qu(this._progressiveEls||this.group,t)},r.prototype.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){e.remove(i)},n.hostModel)}):e.removeAll()},r}();function BX(r,t,e){var n=r.getBaseAxis(),i=r.getOtherAxis(n),a=iIt(i,e),o=n.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(o),h=s==="x"||s==="radius"?1:0,c=nt(r.dimensions,function(g){return t.mapDimension(g)}),f=!1,d=t.getCalculationInfo("stackResultDimension");return Uu(t,c[0])&&(f=!0,c[0]=d),Uu(t,c[1])&&(f=!0,c[1]=d),{dataDimsForPoint:c,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!f,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function iIt(r,t){var e=0,n=r.scale.getExtent();return t==="start"?e=n[0]:t==="end"?e=n[1]:be(t)&&!isNaN(t)?e=t:n[0]>0?e=n[0]:n[1]<0&&(e=n[1]),e}function zX(r,t,e,n){var i=NaN;r.stacked&&(i=e.get(e.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=r.valueStart);var a=r.baseDataOffset,o=[];return o[a]=e.get(r.baseDim,n),o[1-a]=i,t.dataToPoint(o)}function aIt(r,t){var e=[];return t.diff(r).add(function(n){e.push({cmd:"+",idx:n})}).update(function(n,i){e.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){e.push({cmd:"-",idx:n})}).execute(),e}function oIt(r,t,e,n,i,a,o,s){for(var l=aIt(r,t),u=[],h=[],c=[],f=[],d=[],g=[],p=[],v=BX(i,t,o),m=r.getLayout("points")||[],y=t.getLayout("points")||[],_=0;_<l.length;_++){var x=l[_],w=!0,S=void 0,T=void 0;switch(x.cmd){case"=":S=x.idx*2,T=x.idx1*2;var b=m[S],E=m[S+1],C=y[T],M=y[T+1];(isNaN(b)||isNaN(E))&&(b=C,E=M),u.push(b,E),h.push(C,M),c.push(e[S],e[S+1]),f.push(n[T],n[T+1]),p.push(t.getRawIndex(x.idx1));break;case"+":var A=x.idx,R=v.dataDimsForPoint,P=i.dataToPoint([t.get(R[0],A),t.get(R[1],A)]);T=A*2,u.push(P[0],P[1]),h.push(y[T],y[T+1]);var L=zX(v,i,t,A);c.push(L[0],L[1]),f.push(n[T],n[T+1]),p.push(t.getRawIndex(A));break;case"-":w=!1}w&&(d.push(x),g.push(g.length))}g.sort(function(St,mt){return p[St]-p[mt]});for(var D=u.length,k=ts(D),F=ts(D),B=ts(D),V=ts(D),Y=[],_=0;_<g.length;_++){var q=g[_],lt=_*2,X=q*2;k[lt]=u[X],k[lt+1]=u[X+1],F[lt]=h[X],F[lt+1]=h[X+1],B[lt]=c[X],B[lt+1]=c[X+1],V[lt]=f[X],V[lt+1]=f[X+1],Y[_]=d[q]}return{current:k,next:F,stackedOnCurrent:B,stackedOnNext:V,status:Y}}var Gl=Math.min,Bl=Math.max;function Ic(r,t){return isNaN(r)||isNaN(t)}function wI(r,t,e,n,i,a,o,s,l){for(var u,h,c,f,d,g,p=e,v=0;v<n;v++){var m=t[p*2],y=t[p*2+1];if(p>=i||p<0)break;if(Ic(m,y)){if(l){p+=a;continue}break}if(p===e)r[a>0?"moveTo":"lineTo"](m,y),c=m,f=y;else{var _=m-u,x=y-h;if(_*_+x*x<.5){p+=a;continue}if(o>0){for(var w=p+a,S=t[w*2],T=t[w*2+1];S===m&&T===y&&v<n;)v++,w+=a,p+=a,S=t[w*2],T=t[w*2+1],m=t[p*2],y=t[p*2+1],_=m-u,x=y-h;var b=v+1;if(l)for(;Ic(S,T)&&b<n;)b++,w+=a,S=t[w*2],T=t[w*2+1];var E=.5,C=0,M=0,A=void 0,R=void 0;if(b>=n||Ic(S,T))d=m,g=y;else{C=S-u,M=T-h;var P=m-u,L=S-m,D=y-h,k=T-y,F=void 0,B=void 0;if(s==="x"){F=Math.abs(P),B=Math.abs(L);var V=C>0?1:-1;d=m-V*F*o,g=y,A=m+V*B*o,R=y}else if(s==="y"){F=Math.abs(D),B=Math.abs(k);var Y=M>0?1:-1;d=m,g=y-Y*F*o,A=m,R=y+Y*B*o}else F=Math.sqrt(P*P+D*D),B=Math.sqrt(L*L+k*k),E=B/(B+F),d=m-C*o*(1-E),g=y-M*o*(1-E),A=m+C*o*E,R=y+M*o*E,A=Gl(A,Bl(S,m)),R=Gl(R,Bl(T,y)),A=Bl(A,Gl(S,m)),R=Bl(R,Gl(T,y)),C=A-m,M=R-y,d=m-C*F/B,g=y-M*F/B,d=Gl(d,Bl(u,m)),g=Gl(g,Bl(h,y)),d=Bl(d,Gl(u,m)),g=Bl(g,Gl(h,y)),C=m-d,M=y-g,A=m+C*B/F,R=y+M*B/F}r.bezierCurveTo(c,f,d,g,m,y),c=A,f=R}else r.lineTo(m,y)}u=m,h=y,p+=a}return v}var VX=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),sIt=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new VX},t.prototype.buildPath=function(e,n){var i=n.points,a=0,o=i.length/2;if(n.connectNulls){for(;o>0&&Ic(i[o*2-2],i[o*2-1]);o--);for(;a<o&&Ic(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=wI(e,i,a,o,o,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(e,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=ps.CMD,s,l,u=n==="x",h=[],c=0;c<a.length;){var f=a[c++],d=void 0,g=void 0,p=void 0,v=void 0,m=void 0,y=void 0,_=void 0;switch(f){case o.M:s=a[c++],l=a[c++];break;case o.L:if(d=a[c++],g=a[c++],_=u?(e-s)/(d-s):(e-l)/(g-l),_<=1&&_>=0){var x=u?(g-l)*_+l:(d-s)*_+s;return u?[e,x]:[x,e]}s=d,l=g;break;case o.C:d=a[c++],g=a[c++],p=a[c++],v=a[c++],m=a[c++],y=a[c++];var w=u?zx(s,d,p,m,e,h):zx(l,g,v,y,e,h);if(w>0)for(var S=0;S<w;S++){var T=h[S];if(T<=1&&T>=0){var x=u?nn(l,g,v,y,T):nn(s,d,p,m,T);return u?[e,x]:[x,e]}}s=m,l=y;break}}},t}(ae),lIt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(VX),UX=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new lIt},t.prototype.buildPath=function(e,n){var i=n.points,a=n.stackedOnPoints,o=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&Ic(i[s*2-2],i[s*2-1]);s--);for(;o<s&&Ic(i[o*2],i[o*2+1]);o++);}for(;o<s;){var u=wI(e,i,o,s,s,1,n.smooth,l,n.connectNulls);wI(e,a,o+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),o+=u+1,e.closePath()}},t}(ae);function WX(r,t,e,n,i){var a=r.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,h=e.get(["lineStyle","width"])||2;o-=h/2,s-=h/2,l+=h,u+=h,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var c=new ve({shape:{x:o,y:s,width:l,height:u}});if(t){var f=r.getBaseAxis(),d=f.isHorizontal(),g=f.inverse;d?(g&&(c.shape.x+=l),c.shape.width=0):(g||(c.shape.y+=u),c.shape.height=0);var p=At(i)?function(v){i(v,c)}:null;pr(c,{shape:{width:l,height:u,x:o,y:s}},e,null,n,p)}return c}function HX(r,t,e){var n=r.getArea(),i=Cr(n.r0,1),a=Cr(n.r,1),o=new wi({shape:{cx:Cr(r.cx,1),cy:Cr(r.cy,1),r0:i,r:a,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=r.getBaseAxis().dim==="angle";s?o.shape.endAngle=n.startAngle:o.shape.r=i,pr(o,{shape:{endAngle:n.endAngle,r:a}},e)}return o}function a0(r,t,e,n,i){if(r){if(r.type==="polar")return HX(r,t,e);if(r.type==="cartesian2d")return WX(r,t,e,n,i)}else return null;return null}function sf(r,t){return r.type===t}function aB(r,t){if(r.length===t.length){for(var e=0;e<r.length;e++)if(r[e]!==t[e])return;return!0}}function oB(r){for(var t=1/0,e=1/0,n=-1/0,i=-1/0,a=0;a<r.length;){var o=r[a++],s=r[a++];isNaN(o)||(t=Math.min(o,t),n=Math.max(o,n)),isNaN(s)||(e=Math.min(s,e),i=Math.max(s,i))}return[[t,e],[n,i]]}function sB(r,t){var e=oB(r),n=e[0],i=e[1],a=oB(t),o=a[0],s=a[1];return Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function lB(r){return be(r)?r:r?.5:0}function uIt(r,t,e){if(!e.valueDim)return[];for(var n=t.count(),i=ts(n*2),a=0;a<n;a++){var o=zX(e,r,t,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function zl(r,t,e,n){var i=t.getBaseAxis(),a=i.dim==="x"||i.dim==="radius"?0:1,o=[],s=0,l=[],u=[],h=[],c=[];if(n){for(s=0;s<r.length;s+=2)!isNaN(r[s])&&!isNaN(r[s+1])&&c.push(r[s],r[s+1]);r=c}for(s=0;s<r.length-2;s+=2)switch(h[0]=r[s+2],h[1]=r[s+3],u[0]=r[s],u[1]=r[s+1],o.push(u[0],u[1]),e){case"end":l[a]=h[a],l[1-a]=u[1-a],o.push(l[0],l[1]);break;case"middle":var f=(u[a]+h[a])/2,d=[];l[a]=d[a]=f,l[1-a]=u[1-a],d[1-a]=h[1-a],o.push(l[0],l[1]),o.push(d[0],d[1]);break;default:l[a]=u[a],l[1-a]=h[1-a],o.push(l[0],l[1])}return o.push(r[s++],r[s++]),o}function hIt(r,t){var e=[],n=r.length,i,a;function o(h,c,f){var d=h.coord,g=(f-d)/(c.coord-d),p=tSt(g,[h.color,c.color]);return{coord:f,color:p}}for(var s=0;s<n;s++){var l=r[s],u=l.coord;if(u<0)i=l;else if(u>t){a?e.push(o(a,l,t)):i&&e.push(o(i,l,0),o(i,l,t));break}else i&&(e.push(o(i,l,0)),i=null),e.push(l),a=l}return e}function cIt(r,t,e){var n=r.getVisual("visualMeta");if(!(!n||!n.length||!r.count())&&t.type==="cartesian2d"){for(var i,a,o=n.length-1;o>=0;o--){var s=r.getDimensionInfo(n[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=n[o];break}}if(a){var l=t.getAxis(i),u=nt(a.stops,function(_){return{coord:l.toGlobalCoord(l.dataToCoord(_.value)),color:_.color}}),h=u.length,c=a.outerColors.slice();h&&u[0].coord>u[h-1].coord&&(u.reverse(),c.reverse());var f=hIt(u,i==="x"?e.getWidth():e.getHeight()),d=f.length;if(!d&&h)return u[0].coord<0?c[1]?c[1]:u[h-1].color:c[0]?c[0]:u[0].color;var g=10,p=f[0].coord-g,v=f[d-1].coord+g,m=v-p;if(m<.001)return"transparent";I(f,function(_){_.offset=(_.coord-p)/m}),f.push({offset:d?f[d-1].offset:.5,color:c[1]||"transparent"}),f.unshift({offset:d?f[0].offset:.5,color:c[0]||"transparent"});var y=new Ky(0,0,0,0,f,!0);return y[i]=p,y[i+"2"]=v,y}}}function fIt(r,t,e){var n=r.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var a=e.getAxesByScale("ordinal")[0];if(a&&!(i&&dIt(a,t))){var o=t.mapDimension(a.dim),s={};return I(a.getViewLabels(),function(l){var u=a.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(o,l))}}}}function dIt(r,t){var e=r.getExtent(),n=Math.abs(e[1]-e[0])/r.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(n0.getSymbolSize(t,o)[r.isHorizontal()?1:0]*1.5>n)return!1;return!0}function gIt(r,t){return isNaN(r)||isNaN(t)}function pIt(r){for(var t=r.length/2;t>0&&gIt(r[t*2-2],r[t*2-1]);t--);return t-1}function uB(r,t){return[r[t*2],r[t*2+1]]}function vIt(r,t,e){for(var n=r.length/2,i=e==="x"?0:1,a,o,s=0,l=-1,u=0;u<n;u++)if(o=r[u*2+i],!(isNaN(o)||isNaN(r[u*2+1-i]))){if(u===0){a=o;continue}if(a<=t&&o>=t||a>=t&&o<=t){l=u;break}s=u,a=o}return{range:[s,l],t:(t-a)/(o-a)}}function $X(r){if(r.get(["endLabel","show"]))return!0;for(var t=0;t<Si.length;t++)if(r.get([Si[t],"endLabel","show"]))return!0;return!1}function JE(r,t,e,n){if(sf(t,"cartesian2d")){var i=n.getModel("endLabel"),a=i.get("valueAnimation"),o=n.getData(),s={lastFrameIndex:0},l=$X(n)?function(d,g){r._endLabelOnDuring(d,g,o,s,a,i,t)}:null,u=t.getBaseAxis().isHorizontal(),h=WX(t,e,n,function(){var d=r._endLabel;d&&e&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var c=h.shape,f=Math.max(c.width,c.height);u?(c.y-=f,c.height+=f*2):(c.x-=f,c.width+=f*2)}return l&&l(1,h),h}else return HX(t,e,n)}function mIt(r,t){var e=t.getBaseAxis(),n=e.isHorizontal(),i=e.inverse,a=n?i?"right":"left":"center",o=n?"middle":i?"top":"bottom";return{normal:{align:r.get("align")||a,verticalAlign:r.get("verticalAlign")||o}}}var yIt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=new Dt,n=new i0;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=e},t.prototype.render=function(e,n,i){var a=this,o=e.coordinateSystem,s=this.group,l=e.getData(),u=e.getModel("lineStyle"),h=e.getModel("areaStyle"),c=l.getLayout("points")||[],f=o.type==="polar",d=this._coordSys,g=this._symbolDraw,p=this._polyline,v=this._polygon,m=this._lineGroup,y=!n.ssr&&e.get("animation"),_=!h.isEmpty(),x=h.get("origin"),w=BX(o,l,x),S=_&&uIt(o,l,w),T=e.get("showSymbol"),b=e.get("connectNulls"),E=T&&!f&&fIt(e,l,o),C=this._data;C&&C.eachItemGraphicEl(function(mt,$){mt.__temp&&(s.remove(mt),C.setItemGraphicEl($,null))}),T||g.remove(),s.add(m);var M=f?!1:e.get("step"),A;o&&o.getArea&&e.get("clip",!0)&&(A=o.getArea(),A.width!=null?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r+=.5)),this._clipShapeForSymbol=A;var R=cIt(l,o,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(p&&d.type===o.type&&M===this._step))T&&g.updateData(l,{isIgnore:E,clipShape:A,disableAnimation:!0,getSymbolPoint:function(mt){return[c[mt*2],c[mt*2+1]]}}),y&&this._initSymbolLabelAnimation(l,o,A),M&&(c=zl(c,o,M,b),S&&(S=zl(S,o,M,b))),p=this._newPolyline(c),_?v=this._newPolygon(c,S):v&&(m.remove(v),v=this._polygon=null),f||this._initOrUpdateEndLabel(e,o,Hc(R)),m.setClipPath(JE(this,o,!0,e));else{_&&!v?v=this._newPolygon(c,S):v&&!_&&(m.remove(v),v=this._polygon=null),f||this._initOrUpdateEndLabel(e,o,Hc(R));var P=m.getClipPath();if(P){var L=JE(this,o,!1,e);pr(P,{shape:L.shape},e)}else m.setClipPath(JE(this,o,!0,e));T&&g.updateData(l,{isIgnore:E,clipShape:A,disableAnimation:!0,getSymbolPoint:function(mt){return[c[mt*2],c[mt*2+1]]}}),(!aB(this._stackedOnPoints,S)||!aB(this._points,c))&&(y?this._doUpdateAnimation(l,S,o,i,M,x,b):(M&&(c=zl(c,o,M,b),S&&(S=zl(S,o,M,b))),p.setShape({points:c}),v&&v.setShape({points:c,stackedOnPoints:S})))}var D=e.getModel("emphasis"),k=D.get("focus"),F=D.get("blurScope"),B=D.get("disabled");if(p.useStyle(It(u.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),On(p,e,"lineStyle"),p.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var V=p.getState("emphasis").style;V.lineWidth=+p.style.lineWidth+1}Ft(p).seriesIndex=e.seriesIndex,wr(p,k,F,B);var Y=lB(e.get("smooth")),q=e.get("smoothMonotone");if(p.setShape({smooth:Y,smoothMonotone:q,connectNulls:b}),v){var lt=l.getCalculationInfo("stackedOnSeries"),X=0;v.useStyle(It(h.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),lt&&(X=lB(lt.get("smooth"))),v.setShape({smooth:Y,stackedOnSmooth:X,smoothMonotone:q,connectNulls:b}),On(v,e,"areaStyle"),Ft(v).seriesIndex=e.seriesIndex,wr(v,k,F,B)}var St=function(mt){a._changePolyState(mt)};l.eachItemGraphicEl(function(mt){mt&&(mt.onHoverStateChange=St)}),this._polyline.onHoverStateChange=St,this._data=l,this._coordSys=o,this._stackedOnPoints=S,this._points=c,this._step=M,this._valueOrigin=x,e.get("triggerLineEvent")&&(this.packEventData(e,p),v&&this.packEventData(e,v))},t.prototype.packEventData=function(e,n){Ft(n).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,n,i,a){var o=e.getData(),s=Vc(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),u=o.getItemGraphicEl(s);if(!u){var h=l[s*2],c=l[s*2+1];if(isNaN(h)||isNaN(c)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(h,c))return;var f=e.get("zlevel")||0,d=e.get("z")||0;u=new n0(o,s),u.x=h,u.y=c,u.setZ(f,d);var g=u.getSymbolPath().getTextContent();g&&(g.zlevel=f,g.z=d,g.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Ke.prototype.highlight.call(this,e,n,i,a)},t.prototype.downplay=function(e,n,i,a){var o=e.getData(),s=Vc(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Ke.prototype.downplay.call(this,e,n,i,a)},t.prototype._changePolyState=function(e){var n=this._polygon;Xx(this._polyline,e),n&&Xx(n,e)},t.prototype._newPolyline=function(e){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new sIt({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(e,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new UX({shape:{points:e,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(e,n,i){var a,o,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):n.type==="polar"&&(a=s.dim==="angle",o=!0);var u=e.hostModel,h=u.get("animationDuration");At(h)&&(h=h(null));var c=u.get("animationDelay")||0,f=At(c)?c(null):c;e.eachItemGraphicEl(function(d,g){var p=d;if(p){var v=[d.x,d.y],m=void 0,y=void 0,_=void 0;if(i)if(o){var x=i,w=n.pointToCoord(v);a?(m=x.startAngle,y=x.endAngle,_=-w[1]/180*Math.PI):(m=x.r0,y=x.r,_=w[0])}else{var S=i;a?(m=S.x,y=S.x+S.width,_=d.x):(m=S.y+S.height,y=S.y,_=d.y)}var T=y===m?0:(_-m)/(y-m);l&&(T=1-T);var b=At(c)?c(g):h*T+f,E=p.getSymbolPath(),C=E.getTextContent();p.attr({scaleX:0,scaleY:0}),p.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:b}),C&&C.animateFrom({style:{opacity:0}},{duration:300,delay:b}),E.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,n,i){var a=e.getModel("endLabel");if($X(e)){var o=e.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new xe({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var h=pIt(l);h>=0&&(Nn(s,hn(e,"endLabel"),{inheritColor:i,labelFetcher:e,labelDataIndex:h,defaultText:function(c,f,d){return d!=null?GX(o,d):xg(o,c)},enableTextSetter:!0},mIt(a,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,n,i,a,o,s,l){var u=this._endLabel,h=this._polyline;if(u){e<1&&a.originalX==null&&(a.originalX=u.x,a.originalY=u.y);var c=i.getLayout("points"),f=i.hostModel,d=f.get("connectNulls"),g=s.get("precision"),p=s.get("distance")||0,v=l.getBaseAxis(),m=v.isHorizontal(),y=v.inverse,_=n.shape,x=y?m?_.x:_.y+_.height:m?_.x+_.width:_.y,w=(m?p:0)*(y?-1:1),S=(m?0:-p)*(y?-1:1),T=m?"x":"y",b=vIt(c,x,T),E=b.range,C=E[1]-E[0],M=void 0;if(C>=1){if(C>1&&!d){var A=uB(c,E[0]);u.attr({x:A[0]+w,y:A[1]+S}),o&&(M=f.getRawValue(E[0]))}else{var A=h.getPointOn(x,T);A&&u.attr({x:A[0]+w,y:A[1]+S});var R=f.getRawValue(E[0]),P=f.getRawValue(E[1]);o&&(M=IH(i,g,R,P,b.t))}a.lastFrameIndex=E[0]}else{var L=e===1||a.lastFrameIndex>0?E[0]:0,A=uB(c,L);o&&(M=f.getRawValue(L)),u.attr({x:A[0]+w,y:A[1]+S})}if(o){var D=Jg(u);typeof D.setLabelText=="function"&&D.setLabelText(M)}}},t.prototype._doUpdateAnimation=function(e,n,i,a,o,s,l){var u=this._polyline,h=this._polygon,c=e.hostModel,f=oIt(this._data,e,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=f.current,g=f.stackedOnCurrent,p=f.next,v=f.stackedOnNext;if(o&&(d=zl(f.current,i,o,l),g=zl(f.stackedOnCurrent,i,o,l),p=zl(f.next,i,o,l),v=zl(f.stackedOnNext,i,o,l)),sB(d,p)>3e3||h&&sB(g,v)>3e3){u.stopAnimation(),u.setShape({points:p}),h&&(h.stopAnimation(),h.setShape({points:p,stackedOnPoints:v}));return}u.shape.__points=f.current,u.shape.points=d;var m={shape:{points:p}};f.current!==d&&(m.shape.__points=f.next),u.stopAnimation(),Ae(u,m,c),h&&(h.setShape({points:d,stackedOnPoints:g}),h.stopAnimation(),Ae(h,{shape:{stackedOnPoints:v}},c),u.shape.points!==h.shape.points&&(h.shape.points=u.shape.points));for(var y=[],_=f.status,x=0;x<_.length;x++){var w=_[x].cmd;if(w==="="){var S=e.getItemGraphicEl(_[x].idx1);S&&y.push({el:S,ptIdx:x})}}u.animators&&u.animators.length&&u.animators[0].during(function(){h&&h.dirtyShape();for(var T=u.shape.__points,b=0;b<y.length;b++){var E=y[b].el,C=y[b].ptIdx*2;E.x=T[C],E.y=T[C+1],E.markRedraw()}})},t.prototype.remove=function(e){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(n.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Ke);function o0(r,t){return{seriesType:r,plan:np(),reset:function(e){var n=e.getData(),i=e.coordinateSystem,a=e.pipelineContext,o=t||a.large;if(i){var s=nt(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");Uu(n,s[0])&&(s[0]=u),Uu(n,s[1])&&(s[1]=u);var h=n.getStore(),c=n.getDimensionIndex(s[0]),f=n.getDimensionIndex(s[1]);return l&&{progress:function(d,g){for(var p=d.end-d.start,v=o&&ts(p*l),m=[],y=[],_=d.start,x=0;_<d.end;_++){var w=void 0;if(l===1){var S=h.get(c,_);w=i.dataToPoint(S,null,y)}else m[0]=h.get(c,_),m[1]=h.get(f,_),w=i.dataToPoint(m,null,y);o?(v[x++]=w[0],v[x++]=w[1]):g.setItemLayout(_,w.slice())}o&&g.setLayout("points",v)}}}}}}var _It={average:function(r){for(var t=0,e=0,n=0;n<r.length;n++)isNaN(r[n])||(t+=r[n],e++);return e===0?NaN:t/e},sum:function(r){for(var t=0,e=0;e<r.length;e++)t+=r[e]||0;return t},max:function(r){for(var t=-1/0,e=0;e<r.length;e++)r[e]>t&&(t=r[e]);return isFinite(t)?t:NaN},min:function(r){for(var t=1/0,e=0;e<r.length;e++)r[e]<t&&(t=r[e]);return isFinite(t)?t:NaN},minmax:function(r){for(var t=-1/0,e=-1/0,n=0;n<r.length;n++){var i=r[n],a=Math.abs(i);a>t&&(t=a,e=i)}return isFinite(e)?e:NaN},nearest:function(r){return r[0]}},xIt=function(r){return Math.round(r.length/2)};function YX(r){return{seriesType:r,reset:function(t,e,n){var i=t.getData(),a=t.get("sampling"),o=t.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),u=o.getOtherAxis(l),h=l.getExtent(),c=n.getDevicePixelRatio(),f=Math.abs(h[1]-h[0])*(c||1),d=Math.round(s/f);if(isFinite(d)&&d>1){a==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var g=void 0;yt(a)?g=_It[a]:At(a)&&(g=a),g&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,g,xIt))}}}}}function SIt(r){r.registerChartView(yIt),r.registerSeriesModel(rIt),r.registerLayout(o0("line",!0)),r.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,YX("line"))}var sy=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,n){return Sl(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,n,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(e),s=a.dataToPoint(o);if(i)I(a.getAxes(),function(f,d){if(f.type==="category"&&n!=null){var g=f.getTicksCoords(),p=f.getTickModel().get("alignWithLabel"),v=o[d],m=n[d]==="x1"||n[d]==="y1";if(m&&!p&&(v+=1),g.length<2)return;if(g.length===2){s[d]=f.toGlobalCoord(f.getExtent()[m?1:0]);return}for(var y=void 0,_=void 0,x=1,w=0;w<g.length;w++){var S=g[w].coord,T=w===g.length-1?g[w-1].tickValue+x:g[w].tickValue;if(T===v){_=S;break}else if(T<v)y=S;else if(y!=null&&T>v){_=(S+y)/2;break}w===1&&(x=T-g[0].tickValue)}_==null&&(y?y&&(_=g[g.length-1].coord):_=g[0].coord),s[d]=f.toGlobalCoord(_)}});else{var l=this.getData(),u=l.getLayout("offset"),h=l.getLayout("size"),c=a.getBaseAxis().isHorizontal()?0:1;s[c]+=u+h/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(lr);lr.registerClass(sy);var wIt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return Sl(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>e&&(e=n),e},t.prototype.brushSelector=function(e,n,i){return i.rect(n.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=th(sy.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(sy),TIt=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),fS=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new TIt},t.prototype.buildPath=function(e,n){var i=n.cx,a=n.cy,o=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-o)*.5,u=o+l,h=n.startAngle,c=n.endAngle,f=n.clockwise,d=Math.PI*2,g=f?c-h<d:h-c<d;g||(h=c-(f?d:-d));var p=Math.cos(h),v=Math.sin(h),m=Math.cos(c),y=Math.sin(c);g?(e.moveTo(p*o+i,v*o+a),e.arc(p*u+i,v*u+a,l,-Math.PI+h,h,!f)):e.moveTo(p*s+i,v*s+a),e.arc(i,a,s,h,c,!f),e.arc(m*u+i,y*u+a,l,c-Math.PI*2,c-Math.PI,!f),o!==0&&e.arc(i,a,o,c,h,f)},t}(ae);function bIt(r,t){t=t||{};var e=t.isRoundCap;return function(n,i,a){var o=i.position;if(!o||o instanceof Array)return $x(n,i,a);var s=r(o),l=i.distance!=null?i.distance:5,u=this.shape,h=u.cx,c=u.cy,f=u.r,d=u.r0,g=(f+d)/2,p=u.startAngle,v=u.endAngle,m=(p+v)/2,y=e?Math.abs(f-d)/2:0,_=Math.cos,x=Math.sin,w=h+f*_(p),S=c+f*x(p),T="left",b="top";switch(s){case"startArc":w=h+(d-l)*_(m),S=c+(d-l)*x(m),T="center",b="top";break;case"insideStartArc":w=h+(d+l)*_(m),S=c+(d+l)*x(m),T="center",b="bottom";break;case"startAngle":w=h+g*_(p)+F_(p,l+y,!1),S=c+g*x(p)+k_(p,l+y,!1),T="right",b="middle";break;case"insideStartAngle":w=h+g*_(p)+F_(p,-l+y,!1),S=c+g*x(p)+k_(p,-l+y,!1),T="left",b="middle";break;case"middle":w=h+g*_(m),S=c+g*x(m),T="center",b="middle";break;case"endArc":w=h+(f+l)*_(m),S=c+(f+l)*x(m),T="center",b="bottom";break;case"insideEndArc":w=h+(f-l)*_(m),S=c+(f-l)*x(m),T="center",b="top";break;case"endAngle":w=h+g*_(v)+F_(v,l+y,!0),S=c+g*x(v)+k_(v,l+y,!0),T="left",b="middle";break;case"insideEndAngle":w=h+g*_(v)+F_(v,-l+y,!0),S=c+g*x(v)+k_(v,-l+y,!0),T="right",b="middle";break;default:return $x(n,i,a)}return n=n||{},n.x=w,n.y=S,n.align=T,n.verticalAlign=b,n}}function EIt(r,t,e,n){if(be(n)){r.setTextConfig({rotation:n});return}else if(rt(t)){r.setTextConfig({rotation:0});return}var i=r.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,u=e(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:r.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),r.setTextConfig({rotation:h})}function F_(r,t,e){return t*Math.sin(r)*(e?-1:1)}function k_(r,t,e){return t*Math.cos(r)*(e?1:-1)}function vc(r,t,e){var n=r.get("borderRadius");if(n==null)return e?{cornerRadius:0}:null;rt(n)||(n=[n,n,n,n]);var i=Math.abs(t.r||0-t.r0||0);return{cornerRadius:nt(n,function(a){return _o(a,i)})}}var QE=Math.max,tC=Math.min;function CIt(r,t){var e=r.getArea&&r.getArea();if(sf(r,"cartesian2d")){var n=r.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(e.x-=i,e.width+=i*2):(e.y-=i,e.height+=i*2)}}return e}var MIt=function(r){U(t,r);function t(){var e=r.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,n,i,a){this._model=e,this._removeOnRenderedListener(i),this._updateDrawMode(e);var o=e.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,n,i):this._renderNormal(e,n,i,a))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,n){this._progressiveEls=[],this._incrementalRenderLarge(e,n)},t.prototype.eachRendered=function(e){Qu(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(e,n,i,a){var o=this.group,s=e.getData(),l=this._data,u=e.coordinateSystem,h=u.getBaseAxis(),c;u.type==="cartesian2d"?c=h.isHorizontal():u.type==="polar"&&(c=h.dim==="angle");var f=e.isAnimationEnabled()?e:null,d=AIt(e,u);d&&this._enableRealtimeSort(d,s,i);var g=e.get("clip",!0)||d,p=CIt(u,s);o.removeClipPath();var v=e.get("roundCap",!0),m=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),_=y.get("borderRadius")||0,x=[],w=this._backgroundEls,S=a&&a.isInitSort,T=a&&a.type==="changeAxisOrder";function b(M){var A=G_[u.type](s,M),R=NIt(u,c,A);return R.useStyle(y.getItemStyle()),u.type==="cartesian2d"?R.setShape("r",_):R.setShape("cornerRadius",_),x[M]=R,R}s.diff(l).add(function(M){var A=s.getItemModel(M),R=G_[u.type](s,M,A);if(m&&b(M),!(!s.hasValue(M)||!gB[u.type](R))){var P=!1;g&&(P=hB[u.type](p,R));var L=cB[u.type](e,s,M,R,c,f,h.model,!1,v);d&&(L.forceLabelAnimation=!0),pB(L,s,M,A,R,e,c,u.type==="polar"),S?L.attr({shape:R}):d?fB(d,f,L,R,M,c,!1,!1):pr(L,{shape:R},e,M),s.setItemGraphicEl(M,L),o.add(L),L.ignore=P}}).update(function(M,A){var R=s.getItemModel(M),P=G_[u.type](s,M,R);if(m){var L=void 0;w.length===0?L=b(A):(L=w[A],L.useStyle(y.getItemStyle()),u.type==="cartesian2d"?L.setShape("r",_):L.setShape("cornerRadius",_),x[M]=L);var D=G_[u.type](s,M),k=ZX(c,D,u);Ae(L,{shape:k},f,M)}var F=l.getItemGraphicEl(A);if(!s.hasValue(M)||!gB[u.type](P)){o.remove(F);return}var B=!1;if(g&&(B=hB[u.type](p,P),B&&o.remove(F)),F?xo(F):F=cB[u.type](e,s,M,P,c,f,h.model,!!F,v),d&&(F.forceLabelAnimation=!0),T){var V=F.getTextContent();if(V){var Y=Jg(V);Y.prevValue!=null&&(Y.prevValue=Y.value)}}else pB(F,s,M,R,P,e,c,u.type==="polar");S?F.attr({shape:P}):d?fB(d,f,F,P,M,c,!0,T):Ae(F,{shape:P},e,M,null),s.setItemGraphicEl(M,F),F.ignore=B,o.add(F)}).remove(function(M){var A=l.getItemGraphicEl(M);A&&qm(A,e,M)}).execute();var E=this._backgroundGroup||(this._backgroundGroup=new Dt);E.removeAll();for(var C=0;C<x.length;++C)E.add(x[C]);o.add(E),this._backgroundEls=x,this._data=s},t.prototype._renderLarge=function(e,n,i){this._clear(),mB(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,n){this._removeBackground(),mB(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var n=e.get("clip",!0)&&a0(e.coordinateSystem,!1,e),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(e,n,i){var a=this;if(n.count()){var o=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,e,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),h=u&&u.shape;return h&&Math.abs(o.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){a._updateSortWithinSameData(n,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,n,i){var a=[];return e.each(e.mapDimension(n.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:nt(a,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,n,i){for(var a=i.scale,o=e.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var h=e.rawIndexOf(o,a.getRawOrdinalNumber(l)),c=h<0?Number.MIN_VALUE:n(e.indexOfRawIndex(h));if(c>s)return!0;s=c}return!1},t.prototype._isOrderDifferentInView=function(e,n){for(var i=n.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(e.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(e,n,i,a){if(this._isOrderChangedWithinSameData(e,n,i)){var o=this._dataSort(e,i,n);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(e,n,i){var a=n.baseAxis,o=this._dataSort(e,a,function(s){return e.get(e.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},t.prototype.remove=function(e,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(e,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var n=this.group,i=this._data;e&&e.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){qm(a,e,Ft(a).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Ke),hB={cartesian2d:function(r,t){var e=t.width<0?-1:1,n=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=r.x+r.width,a=r.y+r.height,o=QE(t.x,r.x),s=tC(t.x+t.width,i),l=QE(t.y,r.y),u=tC(t.y+t.height,a),h=s<o,c=u<l;return t.x=h&&o>i?s:o,t.y=c&&l>a?u:l,t.width=h?0:s-o,t.height=c?0:u-l,e<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),h||c},polar:function(r,t){var e=t.r0<=t.r?1:-1;if(e<0){var n=t.r;t.r=t.r0,t.r0=n}var i=tC(t.r,r.r),a=QE(t.r0,r.r0);t.r=i,t.r0=a;var o=i-a<0;if(e<0){var n=t.r;t.r=t.r0,t.r0=n}return o}},cB={cartesian2d:function(r,t,e,n,i,a,o,s,l){var u=new ve({shape:tt({},n),z2:1});if(u.__dataIndex=e,u.name="item",a){var h=u.shape,c=i?"height":"width";h[c]=0}return u},polar:function(r,t,e,n,i,a,o,s,l){var u=!i&&l?fS:wi,h=new u({shape:n,z2:1});h.name="item";var c=XX(i);if(h.calculateTextPosition=bIt(c,{isRoundCap:u===fS}),a){var f=h.shape,d=i?"r":"endAngle",g={};f[d]=i?n.r0:n.startAngle,g[d]=n[d],(s?Ae:pr)(h,{shape:g},a)}return h}};function AIt(r,t){var e=r.get("realtimeSort",!0),n=t.getBaseAxis();if(e&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function fB(r,t,e,n,i,a,o,s){var l,u;a?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(o?Ae:pr)(e,{shape:l},t,i,null);var h=t?r.baseAxis.model:null;(o?Ae:pr)(e,{shape:u},h,i)}function dB(r,t){for(var e=0;e<t.length;e++)if(!isFinite(r[t[e]]))return!0;return!1}var IIt=["x","y","width","height"],RIt=["cx","cy","r","startAngle","endAngle"],gB={cartesian2d:function(r){return!dB(r,IIt)},polar:function(r){return!dB(r,RIt)}},G_={cartesian2d:function(r,t,e){var n=r.getItemLayout(t),i=e?LIt(e,n):0,a=n.width>0?1:-1,o=n.height>0?1:-1;return{x:n.x+a*i/2,y:n.y+o*i/2,width:n.width-a*i,height:n.height-o*i}},polar:function(r,t,e){var n=r.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function PIt(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function XX(r){return function(t){var e=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+e;default:return n}}}(r)}function pB(r,t,e,n,i,a,o,s){var l=t.getItemVisual(e,"style");if(s){if(!a.get("roundCap")){var h=r.shape,c=vc(n.getModel("itemStyle"),h,!0);tt(h,c),r.setShape(h)}}else{var u=n.get(["itemStyle","borderRadius"])||0;r.setShape("r",u)}r.useStyle(l);var f=n.getShallow("cursor");f&&r.attr("cursor",f);var d=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",g=hn(n);Nn(r,g,{labelFetcher:a,labelDataIndex:e,defaultText:xg(a.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var p=r.getTextContent();if(s&&p){var v=n.get(["label","position"]);r.textConfig.inside=v==="middle"?!0:null,EIt(r,v==="outside"?d:v,XX(o),n.get(["label","rotate"]))}f$(p,g,a.getRawValue(e),function(y){return GX(t,y)});var m=n.getModel(["emphasis"]);wr(r,m.get("focus"),m.get("blurScope"),m.get("disabled")),On(r,n),PIt(i)&&(r.style.fill="none",r.style.stroke="none",I(r.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function LIt(r,t){var e=r.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var n=r.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),a=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,a)}var DIt=function(){function r(){}return r}(),vB=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new DIt},t.prototype.buildPath=function(e,n){for(var i=n.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,h=0;h<i.length;h+=3)l[a]=u,l[o]=i[h+2],s[a]=i[h+a],s[o]=i[h+o],e.rect(s[0],s[1],l[0],l[1])},t}(ae);function mB(r,t,e,n){var i=r.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=r.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var h=new vB({shape:{points:u},incremental:!!n,silent:!0,z2:0});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,h.useStyle(l.getItemStyle()),t.add(h),e&&e.push(h)}var c=new vB({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,t.add(c),c.useStyle(i.getVisual("style")),Ft(c).seriesIndex=r.seriesIndex,r.get("silent")||(c.on("mousedown",yB),c.on("mousemove",yB)),e&&e.push(c)}var yB=bL(function(r){var t=this,e=OIt(t,r.offsetX,r.offsetY);Ft(t).dataIndex=e>=0?e:null},30,!1);function OIt(r,t,e){for(var n=r.baseDimIdx,i=1-n,a=r.shape.points,o=r.largeDataIndices,s=[],l=[],u=r.barWidth,h=0,c=a.length/3;h<c;h++){var f=h*3;if(l[n]=u,l[i]=a[f+2],s[n]=a[f+n],s[i]=a[f+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&e>=s[1]&&e<=s[1]+l[1])return o[h]}return-1}function ZX(r,t,e){if(sf(e,"cartesian2d")){var n=t,i=e.getArea();return{x:r?n.x:i.x,y:r?i.y:n.y,width:r?n.width:i.width,height:r?i.height:n.height}}else{var i=e.getArea(),a=t;return{cx:i.cx,cy:i.cy,r0:r?i.r0:a.r0,r:r?i.r:a.r,startAngle:r?a.startAngle:0,endAngle:r?a.endAngle:Math.PI*2}}}function NIt(r,t,e){var n=r.type==="polar"?wi:ve;return new n({shape:ZX(t,e,r),silent:!0,z2:0})}function FIt(r){r.registerChartView(MIt),r.registerSeriesModel(wIt),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Wt(QY,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,tX("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,YX("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var _B=Math.PI*2,B_=Math.PI/180;function jX(r,t){return qr(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function KX(r,t){var e=jX(r,t),n=r.get("center"),i=r.get("radius");rt(i)||(i=[0,i]);var a=ft(e.width,t.getWidth()),o=ft(e.height,t.getHeight()),s=Math.min(a,o),l=ft(i[0],s/2),u=ft(i[1],s/2),h,c,f=r.coordinateSystem;if(f){var d=f.dataToPoint(n);h=d[0]||0,c=d[1]||0}else rt(n)||(n=[n,n]),h=ft(n[0],a)+e.x,c=ft(n[1],o)+e.y;return{cx:h,cy:c,r0:l,r:u}}function kIt(r,t,e){t.eachSeriesByType(r,function(n){var i=n.getData(),a=i.mapDimension("value"),o=jX(n,e),s=KX(n,e),l=s.cx,u=s.cy,h=s.r,c=s.r0,f=-n.get("startAngle")*B_,d=n.get("endAngle"),g=n.get("padAngle")*B_;d=d==="auto"?f-_B:-d*B_;var p=n.get("minAngle")*B_,v=p+g,m=0;i.each(a,function(k){!isNaN(k)&&m++});var y=i.getSum(a),_=Math.PI/(y||m)*2,x=n.get("clockwise"),w=n.get("roseType"),S=n.get("stillShowZeroSum"),T=i.getDataExtent(a);T[0]=0;var b=x?1:-1,E=[f,d],C=b*g/2;QP(E,!x),f=E[0],d=E[1];var M=qX(n);M.startAngle=f,M.endAngle=d,M.clockwise=x;var A=Math.abs(d-f),R=A,P=0,L=f;if(i.setLayout({viewRect:o,r:h}),i.each(a,function(k,F){var B;if(isNaN(k)){i.setItemLayout(F,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:l,cy:u,r0:c,r:w?NaN:h});return}w!=="area"?B=y===0&&S?_:k*_:B=A/m,B<v?(B=v,R-=v):P+=k;var V=L+b*B,Y=0,q=0;g>B?(Y=L+b*B/2,q=Y):(Y=L+C,q=V-C),i.setItemLayout(F,{angle:B,startAngle:Y,endAngle:q,clockwise:x,cx:l,cy:u,r0:c,r:w?Fe(k,T,[c,h]):h}),L=V}),R<_B&&m)if(R<=.001){var D=A/m;i.each(a,function(k,F){if(!isNaN(k)){var B=i.getItemLayout(F);B.angle=D;var V=0,Y=0;D<g?(V=f+b*(F+1/2)*D,Y=V):(V=f+b*F*D+C,Y=f+b*(F+1)*D-C),B.startAngle=V,B.endAngle=Y}})}else _=R/P,L=f,i.each(a,function(k,F){if(!isNaN(k)){var B=i.getItemLayout(F),V=B.angle===v?v:k*_,Y=0,q=0;V<g?(Y=L+b*V/2,q=Y):(Y=L+C,q=L+b*V-C),B.startAngle=Y,B.endAngle=q,L+=b*V}})})}var qX=me();function s0(r){return{seriesType:r,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(!(!n||!n.length)){var i=t.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<n.length;s++)if(!n[s].isSelected(o))return!1;return!0})}}}}var GIt=Math.PI/180;function xB(r,t,e,n,i,a,o,s,l,u){if(r.length<2)return;function h(p){for(var v=p.rB,m=v*v,y=0;y<p.list.length;y++){var _=p.list[y],x=Math.abs(_.label.y-e),w=n+_.len,S=w*w,T=Math.sqrt((1-Math.abs(x*x/m))*S),b=t+(T+_.len2)*i,E=b-_.label.x,C=_.targetTextWidth-E*i;JX(_,C,!0),_.label.x=b}}function c(p){for(var v={list:[],maxY:0},m={list:[],maxY:0},y=0;y<p.length;y++)if(p[y].labelAlignTo==="none"){var _=p[y],x=_.label.y>e?m:v,w=Math.abs(_.label.y-e);if(w>=x.maxY){var S=_.label.x-t-_.len2*i,T=n+_.len,b=Math.abs(S)<T?Math.sqrt(w*w/(1-S*S/T/T)):T;x.rB=b,x.maxY=w}x.list.push(_)}h(v),h(m)}for(var f=r.length,d=0;d<f;d++)if(r[d].position==="outer"&&r[d].labelAlignTo==="labelLine"){var g=r[d].label.x-u;r[d].linePoints[1][0]+=g,r[d].label.x=u}SX(r,l,l+o)&&c(r)}function BIt(r,t,e,n,i,a,o,s){for(var l=[],u=[],h=Number.MAX_VALUE,c=-Number.MAX_VALUE,f=0;f<r.length;f++){var d=r[f].label;eC(r[f])||(d.x<t?(h=Math.min(h,d.x),l.push(r[f])):(c=Math.max(c,d.x),u.push(r[f])))}for(var f=0;f<r.length;f++){var g=r[f];if(!eC(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var d=g.label,p=g.linePoints,v=void 0;g.labelAlignTo==="edge"?d.x<t?v=p[2][0]-g.labelDistance-o-g.edgeDistance:v=o+i-g.edgeDistance-p[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?d.x<t?v=h-o-g.bleedMargin:v=o+i-c-g.bleedMargin:d.x<t?v=d.x-o-g.bleedMargin:v=o+i-d.x-g.bleedMargin,g.targetTextWidth=v,JX(g,v)}}xB(u,t,e,n,1,i,a,o,s,c),xB(l,t,e,n,-1,i,a,o,s,h);for(var f=0;f<r.length;f++){var g=r[f];if(!eC(g)&&g.linePoints){var d=g.label,p=g.linePoints,m=g.labelAlignTo==="edge",y=d.style.padding,_=y?y[1]+y[3]:0,x=d.style.backgroundColor?0:_,w=g.rect.width+x,S=p[1][0]-p[2][0];m?d.x<t?p[2][0]=o+g.edgeDistance+w+g.labelDistance:p[2][0]=o+i-g.edgeDistance-w-g.labelDistance:(d.x<t?p[2][0]=d.x+g.labelDistance:p[2][0]=d.x-g.labelDistance,p[1][0]=p[2][0]+S),p[1][1]=p[2][1]=d.y}}}function JX(r,t,e){if(e===void 0&&(e=!1),r.labelStyleWidth==null){var n=r.label,i=n.style,a=r.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,u=i.overflow,h=a.width+(o?0:l);if(t<h||e){var c=a.height;if(u&&u.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",t-l);var f=n.getBoundingRect();n.setStyle("width",Math.ceil(f.width)),n.setStyle("backgroundColor",o)}else{var d=t-l,g=t<h?d:e?d>r.unconstrainedWidth?null:d:null;n.setStyle("width",g)}var p=n.getBoundingRect();a.width=p.width;var v=(n.style.margin||0)+2.1;a.height=p.height+v,a.y-=(a.height-c)/2}}}function eC(r){return r.position==="center"}function zIt(r){var t=r.getData(),e=[],n,i,a=!1,o=(r.get("minShowLabelAngle")||0)*GIt,s=t.getLayout("viewRect"),l=t.getLayout("r"),u=s.width,h=s.x,c=s.y,f=s.height;function d(S){S.ignore=!0}function g(S){if(!S.ignore)return!0;for(var T in S.states)if(S.states[T].ignore===!1)return!0;return!1}t.each(function(S){var T=t.getItemGraphicEl(S),b=T.shape,E=T.getTextContent(),C=T.getTextGuideLine(),M=t.getItemModel(S),A=M.getModel("label"),R=A.get("position")||M.get(["emphasis","label","position"]),P=A.get("distanceToLabelLine"),L=A.get("alignTo"),D=ft(A.get("edgeDistance"),u),k=A.get("bleedMargin"),F=M.getModel("labelLine"),B=F.get("length");B=ft(B,u);var V=F.get("length2");if(V=ft(V,u),Math.abs(b.endAngle-b.startAngle)<o){I(E.states,d),E.ignore=!0,C&&(I(C.states,d),C.ignore=!0);return}if(g(E)){var Y=(b.startAngle+b.endAngle)/2,q=Math.cos(Y),lt=Math.sin(Y),X,St,mt,$;n=b.cx,i=b.cy;var K=R==="inside"||R==="inner";if(R==="center")X=b.cx,St=b.cy,$="center";else{var et=(K?(b.r+b.r0)/2*q:b.r*q)+n,W=(K?(b.r+b.r0)/2*lt:b.r*lt)+i;if(X=et+q*3,St=W+lt*3,!K){var Z=et+q*(B+l-b.r),at=W+lt*(B+l-b.r),O=Z+(q<0?-1:1)*V,N=at;L==="edge"?X=q<0?h+D:h+u-D:X=O+(q<0?-P:P),St=N,mt=[[et,W],[Z,at],[O,N]]}$=K?"center":L==="edge"?q>0?"right":"left":q>0?"left":"right"}var H=Math.PI,Q=0,J=A.get("rotate");if(be(J))Q=J*(H/180);else if(R==="center")Q=0;else if(J==="radial"||J===!0){var ot=q<0?-Y+H:-Y;Q=ot}else if(J==="tangential"&&R!=="outside"&&R!=="outer"){var ct=Math.atan2(q,lt);ct<0&&(ct=H*2+ct);var gt=lt>0;gt&&(ct=H+ct),Q=ct-H}if(a=!!Q,E.x=X,E.y=St,E.rotation=Q,E.setStyle({verticalAlign:"middle"}),K){E.setStyle({align:$});var Lt=E.states.select;Lt&&(Lt.x+=E.x,Lt.y+=E.y)}else{var pt=E.getBoundingRect().clone();pt.applyTransform(E.getComputedTransform());var ut=(E.style.margin||0)+2.1;pt.y-=ut/2,pt.height+=ut,e.push({label:E,labelLine:C,position:R,len:B,len2:V,minTurnAngle:F.get("minTurnAngle"),maxSurfaceAngle:F.get("maxSurfaceAngle"),surfaceNormal:new $t(q,lt),linePoints:mt,textAlign:$,labelDistance:P,labelAlignTo:L,edgeDistance:D,bleedMargin:k,rect:pt,unconstrainedWidth:pt.width,labelStyleWidth:E.style.width})}T.setTextConfig({inside:K})}}),!a&&r.get("avoidLabelOverlap")&&BIt(e,n,i,l,u,f,h,c);for(var p=0;p<e.length;p++){var v=e[p],m=v.label,y=v.labelLine,_=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),_&&(I(m.states,d),m.ignore=!0);var x=m.states.select;x&&(x.x+=m.x,x.y+=m.y)}if(y){var w=v.linePoints;_||!w?(I(y.states,d),y.ignore=!0):(yX(w,v.minTurnAngle),uAt(w,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:w}),m.__hostTarget.textGuideLineConfig={anchor:new $t(w[0][0],w[0][1])})}}}var VIt=function(r){U(t,r);function t(e,n,i){var a=r.call(this)||this;a.z2=2;var o=new xe;return a.setTextContent(o),a.updateData(e,n,i,!0),a}return t.prototype.updateData=function(e,n,i,a){var o=this,s=e.hostModel,l=e.getItemModel(n),u=l.getModel("emphasis"),h=e.getItemLayout(n),c=tt(vc(l.getModel("itemStyle"),h,!0),h);if(isNaN(c.startAngle)){o.setShape(c);return}if(a){o.setShape(c);var f=s.getShallow("animationType");s.ecModel.ssr?(pr(o,{scaleX:0,scaleY:0},s,{dataIndex:n,isFrom:!0}),o.originX=c.cx,o.originY=c.cy):f==="scale"?(o.shape.r=h.r0,pr(o,{shape:{r:h.r}},s,n)):i!=null?(o.setShape({startAngle:i,endAngle:i}),pr(o,{shape:{startAngle:h.startAngle,endAngle:h.endAngle}},s,n)):(o.shape.endAngle=h.startAngle,Ae(o,{shape:{endAngle:h.endAngle}},s,n))}else xo(o),Ae(o,{shape:c},s,n);o.useStyle(e.getItemVisual(n,"style")),On(o,l);var d=(h.startAngle+h.endAngle)/2,g=s.get("selectedOffset"),p=Math.cos(d)*g,v=Math.sin(d)*g,m=l.getShallow("cursor");m&&o.attr("cursor",m),this._updateLabel(s,e,n),o.ensureState("emphasis").shape=tt({r:h.r+(u.get("scale")&&u.get("scaleSize")||0)},vc(u.getModel("itemStyle"),h)),tt(o.ensureState("select"),{x:p,y:v,shape:vc(l.getModel(["select","itemStyle"]),h)}),tt(o.ensureState("blur"),{shape:vc(l.getModel(["blur","itemStyle"]),h)});var y=o.getTextGuideLine(),_=o.getTextContent();y&&tt(y.ensureState("select"),{x:p,y:v}),tt(_.ensureState("select"),{x:p,y:v}),wr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,n,i){var a=this,o=n.getItemModel(i),s=o.getModel("labelLine"),l=n.getItemVisual(i,"style"),u=l&&l.fill,h=l&&l.opacity;Nn(a,hn(o),{labelFetcher:n.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:h,defaultText:e.getFormattedLabel(i,"normal")||n.getName(i)});var c=a.getTextContent();a.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var f=e.get(["label","position"]);if(f!=="outside"&&f!=="outer")a.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Ei,this.setTextGuideLine(d)),GL(this,BL(o),{stroke:u,opacity:os(s.get(["lineStyle","opacity"]),h,1)})}},t}(wi),UIt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,n,i,a){var o=e.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var h=o.getItemLayout(0),c=1;isNaN(h&&h.startAngle)&&c<o.count();++c)h=o.getItemLayout(c);h&&(u=h.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&e.get("showEmptyCircle")){var f=qX(e),d=new wi({shape:tt(KX(e,i),f)});d.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,l.add(d)}o.diff(s).add(function(g){var p=new VIt(o,g,u);o.setItemGraphicEl(g,p),l.add(p)}).update(function(g,p){var v=s.getItemGraphicEl(p);v.updateData(o,g,u),v.off("click"),l.add(v),o.setItemGraphicEl(g,v)}).remove(function(g){var p=s.getItemGraphicEl(g);qm(p,e,g)}).execute(),zIt(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,n){var i=n.getData(),a=i.getItemLayout(0);if(a){var o=e[0]-a.cx,s=e[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="pie",t}(Ke);function sp(r,t,e){t=rt(t)&&{coordDimensions:t}||tt({encodeDefine:r.getEncode()},t);var n=r.getSource(),i=e0(n,t).dimensions,a=new vi(i,r);return a.initData(n,e),a}var l0=function(){function r(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return r.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},r.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},r.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},r.prototype.getItemVisual=function(t,e){var n=this._getDataWithEncodedVisual();return n.getItemVisual(t,e)},r}(),WIt=me(),HIt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new l0(_t(this.getData,this),_t(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return sp(this,{coordDimensions:["value"],encodeDefaulter:Wt(vL,this)})},t.prototype.getDataParams=function(e){var n=this.getData(),i=WIt(n),a=i.seats;if(!a){var o=[];n.each(n.mapDimension("value"),function(l){o.push(l)}),a=i.seats=FSt(o,n.hostModel.get("percentPrecision"))}var s=r.prototype.getDataParams.call(this,e);return s.percent=a[e]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(e){zc(e,"labelLine",["show"]);var n=e.labelLine,i=e.emphasis.labelLine;n.show=n.show&&e.label.show,i.show=i.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(lr);function $It(r){return{seriesType:r,reset:function(t,e){var n=t.getData();n.filterSelf(function(i){var a=n.mapDimension("value"),o=n.get(a,i);return!(be(o)&&!isNaN(o)&&o<0)})}}}function YIt(r){r.registerChartView(UIt),r.registerSeriesModel(HIt),yY("pie",r.registerAction),r.registerLayout(Wt(kIt,"pie")),r.registerProcessor(s0("pie")),r.registerProcessor($It("pie"))}var XIt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,n){return Sl(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,n,i){return i.point(n.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(lr),QX=4,ZIt=function(){function r(){}return r}(),jIt=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new ZIt},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,n){var i=n.points,a=n.size,o=this.symbolProxy,s=o.shape,l=e.getContext?e.getContext():e,u=l&&a[0]<QX,h=this.softClipShape,c;if(u){this._ctx=l;return}for(this._ctx=null,c=this._off;c<i.length;){var f=i[c++],d=i[c++];isNaN(f)||isNaN(d)||h&&!h.contain(f,d)||(s.x=f-a[0]/2,s.y=d-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(e,s,!0))}this.incremental&&(this._off=c,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,n=e.points,i=e.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||a.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(e,n){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=a.length/2-1;u>=0;u--){var h=u*2,c=a[h]-s/2,f=a[h+1]-l/2;if(e>=c&&n>=f&&e<=c+s&&n<=f+l)return u}return-1},t.prototype.contain=function(e,n){var i=this.transformCoordToLocal(e,n),a=this.getBoundingRect();if(e=i[0],n=i[1],a.contain(e,n)){var o=this.hoverDataIdx=this.findDataIndex(e,n);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,i=n.points,a=n.size,o=a[0],s=a[1],l=1/0,u=1/0,h=-1/0,c=-1/0,f=0;f<i.length;){var d=i[f++],g=i[f++];l=Math.min(d,l),h=Math.max(d,h),u=Math.min(g,u),c=Math.max(g,c)}e=this._rect=new jt(l-o/2,u-s/2,h-l+o,c-u+s)}return e},t}(ae),KIt=function(){function r(){this.group=new Dt}return r.prototype.updateData=function(t,e){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,e)},r.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,a=n.startIndex*4*2;e=new Float32Array(e.buffer,a,i)}n.setShape("points",e),n.reset()})},r.prototype.incrementalPrepareUpdate=function(t){this._clear()},r.prototype.incrementalUpdate=function(t,e,n){var i=this._newAdded[0],a=e.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,e,n)}},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new jIt({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},r.prototype._setCommon=function(t,e,n){var i=e.hostModel;n=n||{};var a=e.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=n.clipShape||null,t.symbolProxy=Ur(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<QX;t.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=Ft(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(h){u.dataIndex=null;var c=t.hoverDataIdx;c>=0&&(u.dataIndex=c+(t.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),qIt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a=e.getData(),o=this._updateSymbolDraw(a,e);o.updateData(a,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,n,i){var a=e.getData(),o=this._updateSymbolDraw(a,e);o.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(e,n,i){this._symbolDraw.incrementalUpdate(e,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=e.end===n.getData().count()},t.prototype.updateTransform=function(e,n,i){var a=e.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=o0("").reset(e,n,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var n=e.coordinateSystem;return n&&n.getArea&&n.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,n){var i=this._symbolDraw,a=n.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new KIt:new i0,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Ke),JIt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(ue),TI=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Br).models[0]},t.type="cartesian2dAxis",t}(ue);Hr(TI,r0);var tZ={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},QIt=Zt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},tZ),YL=Zt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},tZ),tRt=Zt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},YL),eRt=It({logBase:10},YL);const eZ={category:QIt,value:YL,time:tRt,log:eRt};var rRt={value:1,category:1,time:1,log:1};function Sg(r,t,e,n){I(rRt,function(i,a){var o=Zt(Zt({},eZ[a],!0),n,!0),s=function(l){U(u,l);function u(){var h=l!==null&&l.apply(this,arguments)||this;return h.type=t+"Axis."+a,h}return u.prototype.mergeDefaultAndTheme=function(h,c){var f=Qm(this),d=f?ep(h):{},g=c.getTheme();Zt(h,g.get(a+"Axis")),Zt(h,this.getDefaultOption()),h.type=SB(h),f&&Vu(h,d,f)},u.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=vI.createByAxisModel(this))},u.prototype.getCategories=function(h){var c=this.option;if(c.type==="category")return h?c.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+a,u.defaultOption=o,u}(e);r.registerComponentModel(s)}),r.registerSubTypeDefaulter(t+"Axis",SB)}function SB(r){return r.type||(r.data?"category":"value")}var nRt=function(){function r(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return r.prototype.getAxis=function(t){return this._axes[t]},r.prototype.getAxes=function(){return nt(this._dimList,function(t){return this._axes[t]},this)},r.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),ze(this.getAxes(),function(e){return e.scale.type===t})},r.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},r}(),bI=["x","y"];function wB(r){return r.type==="interval"||r.type==="time"}var iRt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=bI,e}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!wB(e)||!wB(n))){var i=e.getExtent(),a=n.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],u=a[1]-a[0];if(!(!l||!u)){var h=(s[0]-o[0])/l,c=(s[1]-o[1])/u,f=o[0]-i[0]*h,d=o[1]-a[0]*c,g=this._transform=[h,0,0,c,f,d];this._invTransform=Xg([],g)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(e[0]))&&i.contain(i.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,n){var i=this.dataToPoint(e),a=this.dataToPoint(n),o=this.getArea(),s=new jt(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},t.prototype.dataToPoint=function(e,n,i){i=i||[];var a=e[0],o=e[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Ln(i,e,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,n)),i[1]=l.toGlobalCoord(l.dataToCoord(o,n)),i},t.prototype.clampData=function(e,n){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(e[0]),u=a.parse(e[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(e,n){var i=[];if(this._invTransform)return Ln(i,e,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(e[0]),n),i[1]=o.coordToData(o.toLocalCoord(e[1]),n),i},t.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},t.prototype.getArea=function(e){e=e||0;var n=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(n[0],n[1])-e,o=Math.min(i[0],i[1])-e,s=Math.max(n[0],n[1])-a+e,l=Math.max(i[0],i[1])-o+e;return new jt(a,o,s,l)},t}(nRt),aRt=function(r){U(t,r);function t(e,n,i,a,o){var s=r.call(this,e,n,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.getGlobalExtent=function(e){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),e&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(e,n){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(wo);function EI(r,t,e){e=e||{};var n=r.coordinateSystem,i=t.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,u=i.dim,h=n.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],f={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,g=u==="x"?[c[2]-d,c[3]+d]:[c[0]-d,c[1]+d];if(o){var p=o.toGlobalCoord(o.dataToCoord(0));g[f.onZero]=Math.max(Math.min(p,g[1]),g[0])}a.position=[u==="y"?g[f[l]]:c[0],u==="x"?g[f[l]]:c[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=v[s],a.labelOffset=o?g[f[s]]-g[f.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Sn(e.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var m=t.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-m:m,a.z2=1,a}function TB(r){return r.get("coordinateSystem")==="cartesian2d"}function bB(r){var t={xAxisModel:null,yAxisModel:null};return I(t,function(e,n){var i=n.replace(/Model$/,""),a=r.getReferringComponents(i,Br).models[0];t[n]=a}),t}var rC=Math.log;function rZ(r,t,e){var n=fl.prototype,i=n.getTicks.call(e),a=n.getTicks.call(e,!0),o=i.length-1,s=n.getInterval.call(e),l=aX(r,t),u=l.extent,h=l.fixMin,c=l.fixMax;if(r.type==="log"){var f=rC(r.base);u=[rC(u[0])/f,rC(u[1])/f]}r.setExtent(u[0],u[1]),r.calcNiceExtent({splitNumber:o,fixMin:h,fixMax:c});var d=n.getExtent.call(r);h&&(u[0]=d[0]),c&&(u[1]=d[1]);var g=n.getInterval.call(r),p=u[0],v=u[1];if(h&&c)g=(v-p)/o;else if(h)for(v=u[0]+g*o;v<u[1]&&isFinite(v)&&isFinite(u[1]);)g=VE(g),v=u[0]+g*o;else if(c)for(p=u[1]-g*o;p>u[0]&&isFinite(p)&&isFinite(u[0]);)g=VE(g),p=u[1]-g*o;else{var m=r.getTicks().length-1;m>o&&(g=VE(g));var y=g*o;v=Math.ceil(u[1]/g)*g,p=Cr(v-y),p<0&&u[0]>=0?(p=0,v=Cr(y)):v>0&&u[1]<=0&&(v=0,p=-Cr(y))}var _=(i[0].value-a[0].value)/s,x=(i[o].value-a[o].value)/s;n.setExtent.call(r,p+g*_,v+g*x),n.setInterval.call(r,g),(_||x)&&n.setNiceExtent.call(r,p+g,v-g)}var oRt=function(){function r(t,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=bI,this._initCartesian(t,e,n),this.model=t}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model);function i(o){var s,l=he(o),u=l.length;if(u){for(var h=[],c=u-1;c>=0;c--){var f=+l[c],d=o[f],g=d.model,p=d.scale;mI(p)&&g.get("alignTicks")&&g.get("interval")==null?h.push(d):(_g(p,g),mI(p)&&(s=d))}h.length&&(s||(s=h.pop(),_g(s.scale,s.model)),I(h,function(v){rZ(v.scale,v.model,s.scale)}))}}i(n.x),i(n.y);var a={};I(n.x,function(o){EB(n,"y",o,a)}),I(n.y,function(o){EB(n,"x",o,a)}),this.resize(this.model,e)},r.prototype.resize=function(t,e,n){var i=t.getBoxLayoutParams(),a=!n&&t.get("containLabel"),o=qr(i,{width:e.getWidth(),height:e.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(I(s,function(u){if(!u.model.get(["axisLabel","inside"])){var h=zMt(u);if(h){var c=u.isHorizontal()?"height":"width",f=u.model.get(["axisLabel","margin"]);o[c]-=h[c]+f,u.position==="top"?o.y+=h.height+f:u.position==="left"&&(o.x+=h.width+f)}}}),l()),I(this._coordsList,function(u){u.calcAffineTransform()});function l(){I(s,function(u){var h=u.isHorizontal(),c=h?[0,o.width]:[0,o.height],f=u.inverse?1:0;u.setExtent(c[f],c[1-f]),sRt(u,h?o.x:o.y)})}},r.prototype.getAxis=function(t,e){var n=this._axesMap[t];if(n!=null)return n[e||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(t,e){if(t!=null&&e!=null){var n="x"+t+"y"+e;return this._coordsMap[n]}Rt(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===t||a[i].getAxis("y").index===e)return a[i]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(t,e,n){var i=this._findConvertTarget(e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},r.prototype.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},r.prototype._findConvertTarget=function(t){var e=t.seriesModel,n=t.xAxisModel||e&&e.getReferringComponents("xAxis",Br).models[0],i=t.yAxisModel||e&&e.getReferringComponents("yAxis",Br).models[0],a=t.gridModel,o=this._coordsList,s,l;if(e)s=e.coordinateSystem,te(o,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},r.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},r.prototype._initCartesian=function(t,e,n){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(e.eachComponent("xAxis",u("x"),this),e.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,I(s.x,function(h,c){I(s.y,function(f,d){var g="x"+c+"y"+d,p=new iRt(g);p.master=i,p.model=t,i._coordsMap[g]=p,i._coordsList.push(p),p.addAxis(h),p.addAxis(f)})});function u(h){return function(c,f){if(nC(c,t)){var d=c.get("position");h==="x"?d!=="top"&&d!=="bottom"&&(d=o.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=o.left?"right":"left"),o[d]=!0;var g=new aRt(h,oT(c),[0,0],c.get("type"),d),p=g.type==="category";g.onBand=p&&c.get("boundaryGap"),g.inverse=c.get("inverse"),c.axis=g,g.model=c,g.grid=a,g.index=f,a._axesList.push(g),s[h][f]=g,l[h]++}}}},r.prototype._updateScale=function(t,e){I(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),t.eachSeries(function(i){if(TB(i)){var a=bB(i),o=a.xAxisModel,s=a.yAxisModel;if(!nC(o,e)||!nC(s,e))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=i.getData(),h=l.getAxis("x"),c=l.getAxis("y");n(u,h),n(u,c)}},this);function n(i,a){I(lS(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},r.prototype.getTooltipAxes=function(t){var e=[],n=[];return I(this.getCartesians(),function(i){var a=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),o=i.getOtherAxis(a);te(e,a)<0&&e.push(a),te(n,o)<0&&n.push(o)}),{baseAxes:e,otherAxes:n}},r.create=function(t,e){var n=[];return t.eachComponent("grid",function(i,a){var o=new r(i,t,e);o.name="grid_"+a,o.resize(i,e,!0),i.coordinateSystem=o,n.push(o)}),t.eachSeries(function(i){if(TB(i)){var a=bB(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),n},r.dimensions=bI,r}();function nC(r,t){return r.getCoordSysModel()===t}function EB(r,t,e,n){e.getAxesOnZeroOf=function(){return a?[a]:[]};var i=r[t],a,o=e.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)CB(i[l])&&(a=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&CB(i[u])&&!n[h(i[u])]){a=i[u];break}a&&(n[h(a)]=!0);function h(c){return c.dim+"_"+c.index}}function CB(r){return r&&r.type!=="category"&&r.type!=="time"&&BMt(r)}function sRt(r,t){var e=r.getExtent(),n=e[0]+e[1];r.toGlobalCoord=r.dim==="x"?function(i){return i+t}:function(i){return n-i+t},r.toLocalCoord=r.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}var fu=Math.PI,mi=function(){function r(t,e){this.group=new Dt,this.opt=e,this.axisModel=t,It(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Dt({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return r.prototype.hasBuilder=function(t){return!!MB[t]},r.prototype.add=function(t){MB[t](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(t,e,n){var i=_H(e-t),a,o;return Xm(i)?(o=n>0?"top":"bottom",a="center"):Xm(i-fu)?(o=n>0?"bottom":"top",a="center"):(o="middle",i>0&&i<fu?a=n>0?"right":"left":a=n>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},r.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},r.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},r}(),MB={axisLine:function(r,t,e,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&r.handleAutoShown&&(i=r.handleAutoShown("axisLine")),!!i){var a=t.axis.getExtent(),o=n.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(Ln(s,s,o),Ln(l,l,o));var h=tt({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new sn({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});vg(c.shape,c.style.lineWidth),c.anid="line",e.add(c);var f=t.get(["axisLine","symbol"]);if(f!=null){var d=t.get(["axisLine","symbolSize"]);yt(f)&&(f=[f,f]),(yt(d)||be(d))&&(d=[d,d]);var g=af(t.get(["axisLine","symbolOffset"])||0,d),p=d[0],v=d[1];I([{rotate:r.rotation+Math.PI/2,offset:g[0],r:0},{rotate:r.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,y){if(f[y]!=="none"&&f[y]!=null){var _=Ur(f[y],-p/2,-v/2,p,v,h.stroke,!0),x=m.r+m.offset,w=u?l:s;_.attr({rotation:m.rotate,x:w[0]+x*Math.cos(r.rotation),y:w[1]-x*Math.sin(r.rotation),silent:!0,z2:11}),e.add(_)}})}}},axisTickLabel:function(r,t,e,n){var i=hRt(e,n,t,r),a=fRt(e,n,t,r);if(uRt(t,a,i),cRt(e,n,t,r.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=_X(nt(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));wX(o)}},axisName:function(r,t,e,n){var i=Sn(r.axisName,t.get("name"));if(i){var a=t.get("nameLocation"),o=r.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),h=u[0]>u[1]?-1:1,c=[a==="start"?u[0]-h*l:a==="end"?u[1]+h*l:(u[0]+u[1])/2,IB(a)?r.labelOffset+o*l:0],f,d=t.get("nameRotate");d!=null&&(d=d*fu/180);var g;IB(a)?f=mi.innerTextLayout(r.rotation,d??r.rotation,o):(f=lRt(r.rotation,a,d||0,u),g=r.axisNameAvailableWidth,g!=null&&(g=Math.abs(g/Math.sin(f.rotation)),!isFinite(g)&&(g=null)));var p=s.getFont(),v=t.get("nameTruncate",!0)||{},m=v.ellipsis,y=Sn(r.nameTruncateMaxWidth,v.maxWidth,g),_=new xe({x:c[0],y:c[1],rotation:f.rotation,silent:mi.isLabelSilent(t),style:sr(s,{text:i,font:p,overflow:"truncate",width:y,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||f.textAlign,verticalAlign:s.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(qg({el:_,componentModel:t,itemName:i}),_.__fullText=i,_.anid="name",t.get("triggerEvent")){var x=mi.makeAxisEventDataBase(t);x.targetType="axisName",x.name=i,Ft(_).eventData=x}n.add(_),_.updateTransform(),e.add(_),_.decomposeTransform()}}};function lRt(r,t,e,n){var i=_H(e-r),a,o,s=n[0]>n[1],l=t==="start"&&!s||t!=="start"&&s;return Xm(i-fu/2)?(o=l?"bottom":"top",a="center"):Xm(i-fu*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<fu*1.5&&i>fu/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function uRt(r,t,e){if(!oX(r.axis)){var n=r.get(["axisLabel","showMinLabel"]),i=r.get(["axisLabel","showMaxLabel"]);t=t||[],e=e||[];var a=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],u=e[0],h=e[1],c=e[e.length-1],f=e[e.length-2];n===!1?(_a(a),_a(u)):AB(a,o)&&(n?(_a(o),_a(h)):(_a(a),_a(u))),i===!1?(_a(s),_a(c)):AB(l,s)&&(i?(_a(l),_a(f)):(_a(s),_a(c)))}}function _a(r){r&&(r.ignore=!0)}function AB(r,t){var e=r&&r.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!e||!n)){var i=Pw([]);return rf(i,i,-r.rotation),e.applyTransform(Qs([],i,r.getLocalTransform())),n.applyTransform(Qs([],i,t.getLocalTransform())),e.intersect(n)}}function IB(r){return r==="middle"||r==="center"}function nZ(r,t,e,n,i){for(var a=[],o=[],s=[],l=0;l<r.length;l++){var u=r[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=e,t&&(Ln(o,o,t),Ln(s,s,t));var h=new sn({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});vg(h.shape,h.style.lineWidth),h.anid=i+"_"+r[l].tickValue,a.push(h)}return a}function hRt(r,t,e,n){var i=e.axis,a=e.getModel("axisTick"),o=a.get("show");if(o==="auto"&&n.handleAutoShown&&(o=n.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=n.tickDirection*a.get("length"),u=i.getTicksCoords(),h=nZ(u,t.transform,l,It(s.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<h.length;c++)r.add(h[c]);return h}}function cRt(r,t,e,n){var i=e.axis,a=e.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=n*a.get("length"),u=It(s.getLineStyle(),It(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var c=nZ(o[h],t.transform,l,u,"minorticks_"+h),f=0;f<c.length;f++)r.add(c[f])}}function fRt(r,t,e,n){var i=e.axis,a=Sn(n.axisLabelShow,e.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=e.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),u=(Sn(n.labelRotate,o.get("rotate"))||0)*fu/180,h=mi.innerTextLayout(n.rotation,u,n.labelDirection),c=e.getCategories&&e.getCategories(!0),f=[],d=mi.isLabelSilent(e),g=e.get("triggerEvent");return I(l,function(p,v){var m=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(p.tickValue):p.tickValue,y=p.formattedLabel,_=p.rawLabel,x=o;if(c&&c[m]){var w=c[m];Rt(w)&&w.textStyle&&(x=new Oe(w.textStyle,o,e.ecModel))}var S=x.getTextColor()||e.get(["axisLine","lineStyle","color"]),T=i.dataToCoord(m),b=x.getShallow("align",!0)||h.textAlign,E=Vt(x.getShallow("alignMinLabel",!0),b),C=Vt(x.getShallow("alignMaxLabel",!0),b),M=x.getShallow("verticalAlign",!0)||x.getShallow("baseline",!0)||h.textVerticalAlign,A=Vt(x.getShallow("verticalAlignMinLabel",!0),M),R=Vt(x.getShallow("verticalAlignMaxLabel",!0),M),P=new xe({x:T,y:n.labelOffset+n.labelDirection*s,rotation:h.rotation,silent:d,z2:10+(p.level||0),style:sr(x,{text:y,align:v===0?E:v===l.length-1?C:b,verticalAlign:v===0?A:v===l.length-1?R:M,fill:At(S)?S(i.type==="category"?_:i.type==="value"?m+"":m,v):S})});if(P.anid="label_"+m,g){var L=mi.makeAxisEventDataBase(e);L.targetType="axisLabel",L.value=_,L.tickIndex=v,i.type==="category"&&(L.dataIndex=m),Ft(P).eventData=L}t.add(P),P.updateTransform(),f.push(P),r.add(P),P.decomposeTransform()}),f}}function dRt(r,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return gRt(e,r,t),e.seriesInvolved&&vRt(e,r),e}function gRt(r,t,e){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];I(e.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=ly(s.model),u=r.coordSysAxesInfo[l]={};r.coordSysMap[l]=s;var h=s.model,c=h.getModel("tooltip",n);if(I(s.getAxes(),Wt(p,!1,null)),s.getTooltipAxes&&n&&c.get("show")){var f=c.get("trigger")==="axis",d=c.get(["axisPointer","type"])==="cross",g=s.getTooltipAxes(c.get(["axisPointer","axis"]));(f||d)&&I(g.baseAxes,Wt(p,d?"cross":!0,f)),d&&I(g.otherAxes,Wt(p,"cross",!1))}function p(v,m,y){var _=y.model.getModel("axisPointer",i),x=_.get("show");if(!(!x||x==="auto"&&!v&&!CI(_))){m==null&&(m=_.get("triggerTooltip")),_=v?pRt(y,c,i,t,v,m):_;var w=_.get("snap"),S=_.get("triggerEmphasis"),T=ly(y.model),b=m||w||y.type==="category",E=r.axesInfo[T]={key:T,axis:y,coordSys:s,axisPointerModel:_,triggerTooltip:m,triggerEmphasis:S,involveSeries:b,snap:w,useHandle:CI(_),seriesModels:[],linkGroup:null};u[T]=E,r.seriesInvolved=r.seriesInvolved||b;var C=mRt(a,y);if(C!=null){var M=o[C]||(o[C]={axesInfo:{}});M.axesInfo[T]=E,M.mapper=a[C].mapper,E.linkGroup=M}}}})}function pRt(r,t,e,n,i,a){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};I(s,function(f){l[f]=Pt(o.get(f))}),l.snap=r.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var h=o.get(["label","show"]);if(u.show=h??!0,!a){var c=l.lineStyle=o.get("crossStyle");c&&It(u,c.textStyle)}}return r.model.getModel("axisPointer",new Oe(l,e,n))}function vRt(r,t){t.eachSeries(function(e){var n=e.coordinateSystem,i=e.get(["tooltip","trigger"],!0),a=e.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||a===!1||e.get(["axisPointer","show"],!0)===!1||I(r.coordSysAxesInfo[ly(n.model)],function(o){var s=o.axis;n.getAxis(s.dim)===s&&(o.seriesModels.push(e),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=e.getData().count())})})}function mRt(r,t){for(var e=t.model,n=t.dim,i=0;i<r.length;i++){var a=r[i]||{};if(iC(a[n+"AxisId"],e.id)||iC(a[n+"AxisIndex"],e.componentIndex)||iC(a[n+"AxisName"],e.name))return i}}function iC(r,t){return r==="all"||rt(r)&&te(r,t)>=0||r===t}function yRt(r){var t=XL(r);if(t){var e=t.axisPointerModel,n=t.axis.scale,i=e.option,a=e.get("status"),o=e.get("value");o!=null&&(o=n.parse(o));var s=CI(e);a==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function XL(r){var t=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[ly(r)]}function _Rt(r){var t=XL(r);return t&&t.axisPointerModel}function CI(r){return!!r.get(["handle","show"])}function ly(r){return r.type+"||"+r.id}var RB={},lf=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i,a){this.axisPointerClass&&yRt(e),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,i,!0)},t.prototype.updateAxisPointer=function(e,n,i,a){this._doUpdateAxisPointerClass(e,i,!1)},t.prototype.remove=function(e,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(e,n){this._disposeAxisPointer(n),r.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,n,i){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var o=_Rt(e);o?(this._axisPointer||(this._axisPointer=new a)).render(e,o,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,n){RB[e]=n},t.getAxisPointerClass=function(e){return e&&RB[e]},t.type="axis",t}(yr),MI=me();function iZ(r,t,e,n){var i=e.axis;if(!i.scale.isBlank()){var a=e.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var h=s.length,c=MI(r).splitAreaColors,f=wt(),d=0;if(c)for(var g=0;g<u.length;g++){var p=c.get(u[g].tickValue);if(p!=null){d=(p+(h-1)*g)%h;break}}var v=i.toGlobalCoord(u[0].coord),m=o.getAreaStyle();s=rt(s)?s:[s];for(var g=1;g<u.length;g++){var y=i.toGlobalCoord(u[g].coord),_=void 0,x=void 0,w=void 0,S=void 0;i.isHorizontal()?(_=v,x=l.y,w=y-_,S=l.height,v=_+w):(_=l.x,x=v,w=l.width,S=y-x,v=x+S);var T=u[g-1].tickValue;T!=null&&f.set(T,d),t.add(new ve({anid:T!=null?"area_"+T:null,shape:{x:_,y:x,width:w,height:S},style:It({fill:s[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%h}MI(r).splitAreaColors=f}}}function aZ(r){MI(r).splitAreaColors=null}var xRt=["axisLine","axisTickLabel","axisName"],SRt=["splitArea","splitLine","minorSplitLine"],oZ=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return t.prototype.render=function(e,n,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Dt,this.group.add(this._axisGroup),!!e.get("show")){var s=e.getCoordSysModel(),l=EI(s,e),u=new mi(e,tt({handleAutoShown:function(c){for(var f=s.coordinateSystem.getCartesians(),d=0;d<f.length;d++)if(mI(f[d].getOtherAxis(e.axis).scale))return!0;return!1}},l));I(xRt,u.add,u),this._axisGroup.add(u.getGroup()),I(SRt,function(c){e.get([c,"show"])&&wRt[c](this,this._axisGroup,e,s)},this);var h=a&&a.type==="changeAxisOrder"&&a.isInitSort;h||qy(o,this._axisGroup,e),r.prototype.render.call(this,e,n,i,a)}},t.prototype.remove=function(){aZ(this)},t.type="cartesianAxis",t}(lf),wRt={splitLine:function(r,t,e,n){var i=e.axis;if(!i.scale.isBlank()){var a=e.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=rt(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),h=0,c=i.getTicksCoords({tickModel:a}),f=[],d=[],g=o.getLineStyle(),p=0;p<c.length;p++){var v=i.toGlobalCoord(c[p].coord);u?(f[0]=v,f[1]=l.y,d[0]=v,d[1]=l.y+l.height):(f[0]=l.x,f[1]=v,d[0]=l.x+l.width,d[1]=v);var m=h++%s.length,y=c[p].tickValue,_=new sn({anid:y!=null?"line_"+c[p].tickValue:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:It({stroke:s[m]},g),silent:!0});vg(_.shape,g.lineWidth),t.add(_)}}},minorSplitLine:function(r,t,e,n){var i=e.axis,a=e.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var h=[],c=[],f=o.getLineStyle(),d=0;d<u.length;d++)for(var g=0;g<u[d].length;g++){var p=i.toGlobalCoord(u[d][g].coord);l?(h[0]=p,h[1]=s.y,c[0]=p,c[1]=s.y+s.height):(h[0]=s.x,h[1]=p,c[0]=s.x+s.width,c[1]=p);var v=new sn({anid:"minor_line_"+u[d][g].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:f,silent:!0});vg(v.shape,f.lineWidth),t.add(v)}},splitArea:function(r,t,e,n){iZ(r,t,e,n)}},sZ=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="xAxis",t}(oZ),TRt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=sZ.type,e}return t.type="yAxis",t}(oZ),bRt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="grid",e}return t.prototype.render=function(e,n){this.group.removeAll(),e.get("show")&&this.group.add(new ve({shape:e.coordinateSystem.getRect(),style:It({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(yr),PB={offset:0};function lZ(r){r.registerComponentView(bRt),r.registerComponentModel(JIt),r.registerCoordinateSystem("cartesian2d",oRt),Sg(r,"x",TI,PB),Sg(r,"y",TI,PB),r.registerComponentView(sZ),r.registerComponentView(TRt),r.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function ERt(r){ne(lZ),r.registerSeriesModel(XIt),r.registerChartView(qIt),r.registerLayout(o0("scatter"))}function CRt(r){r.eachSeriesByType("radar",function(t){var e=t.getData(),n=[],i=t.coordinateSystem;if(i){var a=i.getIndicatorAxes();I(a,function(o,s){e.each(e.mapDimension(a[s].dim),function(l,u){n[u]=n[u]||[];var h=i.dataToPoint(l,s);n[u][s]=LB(h)?h:DB(i)})}),e.each(function(o){var s=dxt(n[o],function(l){return LB(l)})||DB(i);n[o].push(s.slice()),e.setItemLayout(o,n[o])})}})}function LB(r){return!isNaN(r[0])&&!isNaN(r[1])}function DB(r){return[r.cx,r.cy]}function MRt(r){var t=r.polar;if(t){rt(t)||(t=[t]);var e=[];I(t,function(n,i){n.indicator?(n.type&&!n.shape&&(n.shape=n.type),r.radar=r.radar||[],rt(r.radar)||(r.radar=[r.radar]),r.radar.push(n)):e.push(n)}),r.polar=e}I(r.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})}var ARt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a=e.coordinateSystem,o=this.group,s=e.getData(),l=this._data;function u(f,d){var g=f.getItemVisual(d,"symbol")||"circle";if(g!=="none"){var p=ap(f.getItemVisual(d,"symbolSize")),v=Ur(g,-1,-1,2,2),m=f.getItemVisual(d,"symbolRotate")||0;return v.attr({style:{strokeNoScale:!0},z2:100,scaleX:p[0]/2,scaleY:p[1]/2,rotation:m*Math.PI/180||0}),v}}function h(f,d,g,p,v,m){g.removeAll();for(var y=0;y<d.length-1;y++){var _=u(p,v);_&&(_.__dimIdx=y,f[y]?(_.setPosition(f[y]),nf[m?"initProps":"updateProps"](_,{x:d[y][0],y:d[y][1]},e,v)):_.setPosition(d[y]),g.add(_))}}function c(f){return nt(f,function(d){return[a.cx,a.cy]})}s.diff(l).add(function(f){var d=s.getItemLayout(f);if(d){var g=new Ti,p=new Ei,v={shape:{points:d}};g.shape.points=c(d),p.shape.points=c(d),pr(g,v,e,f),pr(p,v,e,f);var m=new Dt,y=new Dt;m.add(p),m.add(g),m.add(y),h(p.shape.points,d,y,s,f,!0),s.setItemGraphicEl(f,m)}}).update(function(f,d){var g=l.getItemGraphicEl(d),p=g.childAt(0),v=g.childAt(1),m=g.childAt(2),y={shape:{points:s.getItemLayout(f)}};y.shape.points&&(h(p.shape.points,y.shape.points,m,s,f,!1),xo(v),xo(p),Ae(p,y,e),Ae(v,y,e),s.setItemGraphicEl(f,g))}).remove(function(f){o.remove(l.getItemGraphicEl(f))}).execute(),s.eachItemGraphicEl(function(f,d){var g=s.getItemModel(d),p=f.childAt(0),v=f.childAt(1),m=f.childAt(2),y=s.getItemVisual(d,"style"),_=y.fill;o.add(f),p.useStyle(It(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:_})),On(p,g,"lineStyle"),On(v,g,"areaStyle");var x=g.getModel("areaStyle"),w=x.isEmpty()&&x.parentModel.isEmpty();v.ignore=w,I(["emphasis","select","blur"],function(b){var E=g.getModel([b,"areaStyle"]),C=E.isEmpty()&&E.parentModel.isEmpty();v.ensureState(b).ignore=C&&w}),v.useStyle(It(x.getAreaStyle(),{fill:_,opacity:.7,decal:y.decal}));var S=g.getModel("emphasis"),T=S.getModel("itemStyle").getItemStyle();m.eachChild(function(b){if(b instanceof bn){var E=b.style;b.useStyle(tt({image:E.image,x:E.x,y:E.y,width:E.width,height:E.height},y))}else b.useStyle(y),b.setColor(_),b.style.strokeNoScale=!0;var C=b.ensureState("emphasis");C.style=Pt(T);var M=s.getStore().get(s.getDimensionIndex(b.__dimIdx),d);(M==null||isNaN(M))&&(M=""),Nn(b,hn(g),{labelFetcher:s.hostModel,labelDataIndex:d,labelDimIndex:b.__dimIdx,defaultText:M,inheritColor:_,defaultOpacity:y.opacity})}),wr(f,S.get("focus"),S.get("blurScope"),S.get("disabled"))}),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(Ke),IRt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new l0(_t(this.getData,this),_t(this.getRawData,this))},t.prototype.getInitialData=function(e,n){return sp(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,n,i){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(e),u=l===""?this.name:l,h=oY(this,e);return cn("section",{header:u,sortBlocks:!0,blocks:nt(s,function(c){var f=a.get(a.mapDimension(c.dim),e);return cn("nameValue",{markerType:"subItem",markerColor:h,name:c.name,value:f,sortParam:f})})})},t.prototype.getTooltipPosition=function(e){if(e!=null){for(var n=this.getData(),i=this.coordinateSystem,a=n.getValues(nt(i.dimensions,function(u){return n.mapDimension(u)}),e),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=i.getIndicatorAxes();return i.coordToPoint(l[o].dataToCoord(a[o]),o)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(lr),$p=eZ.value;function z_(r,t){return It({show:t},r)}var RRt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),n=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),h=this.get(["axisName","formatter"]),c=this.get("axisNameGap"),f=this.get("triggerEvent"),d=nt(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var p=l;g.color!=null&&(p=It({color:g.color},l));var v=Zt(Pt(g),{boundaryGap:e,splitNumber:n,scale:i,axisLine:a,axisTick:o,axisLabel:s,name:g.text,showName:u,nameLocation:"end",nameGap:c,nameTextStyle:p,triggerEvent:f},!1);if(yt(h)){var m=v.name;v.name=h.replace("{value}",m??"")}else At(h)&&(v.name=h(v.name,v));var y=new Oe(v,null,this.ecModel);return Hr(y,r0.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=d},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Zt({lineStyle:{color:"#bbb"}},$p.axisLine),axisLabel:z_($p.axisLabel,!1),axisTick:z_($p.axisTick,!1),splitLine:z_($p.splitLine,!0),splitArea:z_($p.splitArea,!0),indicator:[]},t}(ue),PRt=["axisLine","axisTickLabel","axisName"],LRt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a=this.group;a.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var n=e.coordinateSystem,i=n.getIndicatorAxes(),a=nt(i,function(o){var s=o.model.get("showName")?o.name:"",l=new mi(o.model,{axisName:s,position:[n.cx,n.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});I(a,function(o){I(PRt,o.add,o),this.group.add(o.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(e){var n=e.coordinateSystem,i=n.getIndicatorAxes();if(!i.length)return;var a=e.get("shape"),o=e.getModel("splitLine"),s=e.getModel("splitArea"),l=o.getModel("lineStyle"),u=s.getModel("areaStyle"),h=o.get("show"),c=s.get("show"),f=l.get("color"),d=u.get("color"),g=rt(f)?f:[f],p=rt(d)?d:[d],v=[],m=[];function y(L,D,k){var F=k%D.length;return L[F]=L[F]||[],F}if(a==="circle")for(var _=i[0].getTicksCoords(),x=n.cx,w=n.cy,S=0;S<_.length;S++){if(h){var T=y(v,g,S);v[T].push(new xl({shape:{cx:x,cy:w,r:_[S].coord}}))}if(c&&S<_.length-1){var T=y(m,p,S);m[T].push(new Zy({shape:{cx:x,cy:w,r0:_[S].coord,r:_[S+1].coord}}))}}else for(var b,E=nt(i,function(L,D){var k=L.getTicksCoords();return b=b==null?k.length-1:Math.min(k.length-1,b),nt(k,function(F){return n.coordToPoint(F.coord,D)})}),C=[],S=0;S<=b;S++){for(var M=[],A=0;A<i.length;A++)M.push(E[A][S]);if(M[0]&&M.push(M[0].slice()),h){var T=y(v,g,S);v[T].push(new Ei({shape:{points:M}}))}if(c&&C){var T=y(m,p,S-1);m[T].push(new Ti({shape:{points:M.concat(C)}}))}C=M.slice().reverse()}var R=l.getLineStyle(),P=u.getAreaStyle();I(m,function(L,D){this.group.add(La(L,{style:It({stroke:"none",fill:p[D%p.length]},P),silent:!0}))},this),I(v,function(L,D){this.group.add(La(L,{style:It({fill:"none",stroke:g[D%g.length]},R),silent:!0}))},this)},t.type="radar",t}(yr),DRt=function(r){U(t,r);function t(e,n,i){var a=r.call(this,e,n,i)||this;return a.type="value",a.angle=0,a.name="",a}return t}(wo),ORt=function(){function r(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=nt(t.getIndicatorModels(),function(i,a){var o="indicator_"+a,s=new DRt(o,new fl);return s.name=i.get("name"),s.model=i,i.axis=s,this.dimensions.push(o),s},this),this.resize(t,n)}return r.prototype.getIndicatorAxes=function(){return this._indicatorAxes},r.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},r.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e],i=n.angle,a=this.cx+t*Math.cos(i),o=this.cy-t*Math.sin(i);return[a,o]},r.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var a=Math.atan2(-n,e),o=1/0,s,l=-1,u=0;u<this._indicatorAxes.length;u++){var h=this._indicatorAxes[u],c=Math.abs(a-h.angle);c<o&&(s=h,l=u,o=c)}return[l,+(s&&s.coordToData(i))]},r.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),a=e.getHeight(),o=Math.min(i,a)/2;this.cx=ft(n[0],i),this.cy=ft(n[1],a),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");(yt(s)||be(s))&&(s=[0,s]),this.r0=ft(s[0],o),this.r=ft(s[1],o),I(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var h=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;h=Math.atan2(Math.sin(h),Math.cos(h)),l.angle=h},this)},r.prototype.update=function(t,e){var n=this._indicatorAxes,i=this._model;I(n,function(s){s.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||t.getComponent("radar",s.get("radarIndex"))!==i)){var u=s.getData();I(n,function(h){h.scale.unionExtentFromData(u,u.mapDimension(h.dim))})}},this);var a=i.get("splitNumber"),o=new fl;o.setExtent(0,a),o.setInterval(1),I(n,function(s,l){rZ(s.scale,s.model,o)})},r.prototype.convertToPixel=function(t,e,n){return null},r.prototype.convertFromPixel=function(t,e,n){return null},r.prototype.containPoint=function(t){return!1},r.create=function(t,e){var n=[];return t.eachComponent("radar",function(i){var a=new r(i,t,e);n.push(a),i.coordinateSystem=a}),t.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=n[i.get("radarIndex")||0])}),n},r.dimensions=[],r}();function NRt(r){r.registerCoordinateSystem("radar",ORt),r.registerComponentModel(RRt),r.registerComponentView(LRt),r.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(n){e.setItemVisual(n,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}function FRt(r){ne(NRt),r.registerChartView(ARt),r.registerSeriesModel(IRt),r.registerLayout(CRt),r.registerProcessor(s0("radar")),r.registerPreprocessor(MRt)}var OB="\0_ec_interaction_mutex";function kRt(r,t,e){var n=ZL(r);n[t]=e}function GRt(r,t,e){var n=ZL(r),i=n[t];i===e&&(n[t]=null)}function NB(r,t){return!!ZL(r)[t]}function ZL(r){return r[OB]||(r[OB]={})}_s({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Lr);var u0=function(r){U(t,r);function t(e){var n=r.call(this)||this;n._zr=e;var i=_t(n._mousedownHandler,n),a=_t(n._mousemoveHandler,n),o=_t(n._mouseupHandler,n),s=_t(n._mousewheelHandler,n),l=_t(n._pinchHandler,n);return n.enable=function(u,h){this.disable(),this._opt=It(Pt(h)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(e.on("mousedown",i),e.on("mousemove",a),e.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},n.disable=function(){e.off("mousedown",i),e.off("mousemove",a),e.off("mouseup",o),e.off("mousewheel",s),e.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!s3(e)){for(var n=e.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=e.offsetX,a=e.offsetY;this.pointerChecker&&this.pointerChecker(e,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!N1("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||NB(this._zr,"globalPan"))){var n=e.offsetX,i=e.offsetY,a=this._x,o=this._y,s=n-a,l=i-o;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&sl(e.event),uZ(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:a,oldY:o,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){s3(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var n=N1("zoomOnMouseWheel",e,this._opt),i=N1("moveOnMouseWheel",e,this._opt),a=e.wheelDelta,o=Math.abs(a),s=e.offsetX,l=e.offsetY;if(!(a===0||!n&&!i)){if(n){var u=o>3?1.4:o>1?1.2:1.1,h=a>0?u:1/u;aC(this,"zoom","zoomOnMouseWheel",e,{scale:h,originX:s,originY:l,isAvailableBehavior:null})}if(i){var c=Math.abs(a),f=(a>0?1:-1)*(c>3?.4:c>1?.15:.05);aC(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:f,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!NB(this._zr,"globalPan")){var n=e.pinchScale>1?1.1:1/1.1;aC(this,"zoom",null,e,{scale:n,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t}(Za);function aC(r,t,e,n,i){r.pointerChecker&&r.pointerChecker(n,i.originX,i.originY)&&(sl(n.event),uZ(r,t,e,n,i))}function uZ(r,t,e,n,i){i.isAvailableBehavior=_t(N1,null,e,n),r.trigger(t,i)}function N1(r,t,e){var n=e[r];return!r||n&&(!yt(n)||t.event[n+"Key"])}function jL(r,t,e){var n=r.target;n.x+=t,n.y+=e,n.dirty()}function KL(r,t,e,n){var i=r.target,a=r.zoomLimit,o=r.zoom=r.zoom||1;if(o*=t,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/r.zoom;r.zoom=o,i.x-=(e-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var BRt={axisPointer:1,tooltip:1,brush:1};function lT(r,t,e){var n=t.getComponentByElement(r.topTarget),i=n&&n.coordinateSystem;return n&&n!==e&&!BRt.hasOwnProperty(n.mainType)&&i&&i.model!==e}function hZ(r){if(yt(r)){var t=new DOMParser;r=t.parseFromString(r,"text/xml")}var e=r;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var oC,dS={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},FB=he(dS),gS={"alignment-baseline":"textBaseline","stop-color":"stopColor"},kB=he(gS),zRt=function(){function r(){this._defs={},this._root=null}return r.prototype.parse=function(t,e){e=e||{};var n=hZ(t);this._defsUsePending=[];var i=new Dt;this._root=i;var a=[],o=n.getAttribute("viewBox")||"",s=parseFloat(n.getAttribute("width")||e.width),l=parseFloat(n.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),Xi(n,i,null,!0,!1);for(var u=n.firstChild;u;)this._parseNode(u,i,a,null,!1,!1),u=u.nextSibling;WRt(this._defs,this._defsUsePending),this._defsUsePending=[];var h,c;if(o){var f=uT(o);f.length>=4&&(h={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(h&&s!=null&&l!=null&&(c=fZ(h,{x:0,y:0,width:s,height:l}),!e.ignoreViewBox)){var d=i;i=new Dt,i.add(d),d.scaleX=d.scaleY=c.scale,d.x=c.x,d.y=c.y}return!e.ignoreRootClip&&s!=null&&l!=null&&i.setClipPath(new ve({shape:{x:0,y:0,width:s,height:l}})),{root:i,width:s,height:l,viewBoxRect:h,viewBoxTransform:c,named:a}},r.prototype._parseNode=function(t,e,n,i,a,o){var s=t.nodeName.toLowerCase(),l,u=i;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=e;else{if(!a){var h=oC[s];if(h&&xt(oC,s)){l=h.call(this,t,e);var c=t.getAttribute("name");if(c){var f={name:c,namedFrom:null,svgNodeTagLower:s,el:l};n.push(f),s==="g"&&(u=f)}else i&&n.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:l});e.add(l)}}var d=GB[s];if(d&&xt(GB,s)){var g=d.call(this,t),p=t.getAttribute("id");p&&(this._defs[p]=g)}}if(l&&l.isGroup)for(var v=t.firstChild;v;)v.nodeType===1?this._parseNode(v,l,n,u,a,o):v.nodeType===3&&o&&this._parseText(v,l),v=v.nextSibling},r.prototype._parseText=function(t,e){var n=new pg({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});xa(e,n),Xi(t,n,this._defsUsePending,!1,!1),VRt(n,e);var i=n.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,n.scaleX*=a/9,n.scaleY*=a/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=n.getBoundingRect();return this._textX+=s.width,e.add(n),n},r.internalField=function(){oC={g:function(t,e){var n=new Dt;return xa(e,n),Xi(t,n,this._defsUsePending,!1,!1),n},rect:function(t,e){var n=new ve;return xa(e,n),Xi(t,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(t,e){var n=new xl;return xa(e,n),Xi(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),n.silent=!0,n},line:function(t,e){var n=new sn;return xa(e,n),Xi(t,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(t,e){var n=new Vw;return xa(e,n),Xi(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(t,e){var n=t.getAttribute("points"),i;n&&(i=VB(n));var a=new Ti({shape:{points:i||[]},silent:!0});return xa(e,a),Xi(t,a,this._defsUsePending,!1,!1),a},polyline:function(t,e){var n=t.getAttribute("points"),i;n&&(i=VB(n));var a=new Ei({shape:{points:i||[]},silent:!0});return xa(e,a),Xi(t,a,this._defsUsePending,!1,!1),a},image:function(t,e){var n=new bn;return xa(e,n),Xi(t,n,this._defsUsePending,!1,!1),n.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),n.silent=!0,n},text:function(t,e){var n=t.getAttribute("x")||"0",i=t.getAttribute("y")||"0",a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var s=new Dt;return xa(e,s),Xi(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");n!=null&&(this._textX=parseFloat(n)),i!=null&&(this._textY=parseFloat(i));var a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",s=new Dt;return xa(e,s),Xi(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(t,e){var n=t.getAttribute("d")||"",i=t$(n);return xa(e,i),Xi(t,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),r}(),GB={lineargradient:function(r){var t=parseInt(r.getAttribute("x1")||"0",10),e=parseInt(r.getAttribute("y1")||"0",10),n=parseInt(r.getAttribute("x2")||"10",10),i=parseInt(r.getAttribute("y2")||"0",10),a=new Ky(t,e,n,i);return BB(r,a),zB(r,a),a},radialgradient:function(r){var t=parseInt(r.getAttribute("cx")||"0",10),e=parseInt(r.getAttribute("cy")||"0",10),n=parseInt(r.getAttribute("r")||"0",10),i=new i$(t,e,n);return BB(r,i),zB(r,i),i}};function BB(r,t){var e=r.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(t.global=!0)}function zB(r,t){for(var e=r.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var n=e.getAttribute("offset"),i=void 0;n&&n.indexOf("%")>0?i=parseInt(n,10)/100:n?i=parseFloat(n):i=0;var a={};cZ(e,a,a);var o=a.stopColor||e.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:i,color:o})}e=e.nextSibling}}function xa(r,t){r&&r.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),It(t.__inheritedStyle,r.__inheritedStyle))}function VB(r){for(var t=uT(r),e=[],n=0;n<t.length;n+=2){var i=parseFloat(t[n]),a=parseFloat(t[n+1]);e.push([i,a])}return e}function Xi(r,t,e,n,i){var a=t,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};r.nodeType===1&&(YRt(r,t),cZ(r,o,s),n||XRt(r,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=UB(a,"fill",o.fill,e)),o.stroke!=null&&(a.style.stroke=UB(a,"stroke",o.stroke,e)),I(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),I(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),i&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=nt(uT(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function VRt(r,t){var e=t.__selfStyle;if(e){var n=e.textBaseline,i=n;!n||n==="auto"||n==="baseline"?i="alphabetic":n==="before-edge"||n==="text-before-edge"?i="top":n==="after-edge"||n==="text-after-edge"?i="bottom":(n==="central"||n==="mathematical")&&(i="middle"),r.style.textBaseline=i}var a=t.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),r.style.textAlign=s)}}var URt=/^url\(\s*#(.*?)\)/;function UB(r,t,e,n){var i=e&&e.match(URt);if(i){var a=so(i[1]);n.push([r,t,a]);return}return e==="none"&&(e=null),e}function WRt(r,t){for(var e=0;e<t.length;e++){var n=t[e];n[0].style[n[1]]=r[n[2]]}}var HRt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function uT(r){return r.match(HRt)||[]}var $Rt=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,sC=Math.PI/180;function YRt(r,t){var e=r.getAttribute("transform");if(e){e=e.replace(/,/g," ");var n=[],i=null;e.replace($Rt,function(c,f,d){return n.push(f,d),""});for(var a=n.length-1;a>0;a-=2){var o=n[a],s=n[a-1],l=uT(o);switch(i=i||oa(),s){case"translate":fs(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":HP(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":rf(i,i,-parseFloat(l[0])*sC,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*sC);Qs(i,[1,0,u,1,0,0],i);break;case"skewY":var h=Math.tan(parseFloat(l[0])*sC);Qs(i,[1,h,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}t.setLocalTransform(i)}}var WB=/([^\s:;]+)\s*:\s*([^:;]+)/g;function cZ(r,t,e){var n=r.getAttribute("style");if(n){WB.lastIndex=0;for(var i;(i=WB.exec(n))!=null;){var a=i[1],o=xt(dS,a)?dS[a]:null;o&&(t[o]=i[2]);var s=xt(gS,a)?gS[a]:null;s&&(e[s]=i[2])}}}function XRt(r,t,e){for(var n=0;n<FB.length;n++){var i=FB[n],a=r.getAttribute(i);a!=null&&(t[dS[i]]=a)}for(var n=0;n<kB.length;n++){var i=kB[n],a=r.getAttribute(i);a!=null&&(e[gS[i]]=a)}}function fZ(r,t){var e=t.width/r.width,n=t.height/r.height,i=Math.min(e,n);return{scale:i,x:-(r.x+r.width/2)*i+(t.x+t.width/2),y:-(r.y+r.height/2)*i+(t.y+t.height/2)}}function ZRt(r,t){var e=new zRt;return e.parse(r,t)}var jRt=wt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),KRt=function(){function r(t,e){this.type="geoSVG",this._usedGraphicMap=wt(),this._freedGraphics=[],this._mapName=t,this._parsedXML=hZ(e)}return r.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=JRt(t.named),n=e.regions,i=e.regionsMap;this._regions=n,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},r.prototype._buildGraphic=function(t){var e,n;try{e=t&&ZRt(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=e.root,xi(n!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var i=new Dt;i.add(n),i.isGeoSVGGraphicRoot=!0;var a=e.width,o=e.height,s=e.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,h=void 0,c=void 0,f=void 0;if(a!=null?(u=0,c=a):s&&(u=s.x,c=s.width),o!=null?(h=0,f=o):s&&(h=s.y,f=s.height),u==null||h==null){var d=n.getBoundingRect();u==null&&(u=d.x,c=d.width),h==null&&(h=d.y,f=d.height)}l=this._boundingRect=new jt(u,h,c,f)}if(s){var g=fZ(s,l);n.scaleX=n.scaleY=g.scale,n.x=g.x,n.y=g.y}i.setClipPath(new ve({shape:l.plain()}));var p=[];return I(e.named,function(v){jRt.get(v.svgNodeTagLower)!=null&&(p.push(v),qRt(v.el))}),{root:i,boundingRect:l,named:p}},r.prototype.useGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,n),n)},r.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);n&&(e.removeKey(t),this._freedGraphics.push(n))},r}();function qRt(r){r.silent=!1,r.isGroup&&r.traverse(function(t){t.silent=!1})}function JRt(r){var t=[],e=wt();return I(r,function(n){if(n.namedFrom==null){var i=new YMt(n.name,n.el);t.push(i),e.set(n.name,i)}}),{regions:t,regionsMap:e}}var AI=[126,25],HB="",Xh=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Dh=0;Dh<Xh.length;Dh++)for(var Gf=0;Gf<Xh[Dh].length;Gf++)Xh[Dh][Gf][0]/=10.5,Xh[Dh][Gf][1]/=-10.5/.75,Xh[Dh][Gf][0]+=AI[0],Xh[Dh][Gf][1]+=AI[1];function QRt(r,t){if(r==="china"){for(var e=0;e<t.length;e++)if(t[e].name===HB)return;t.push(new lX(HB,nt(Xh,function(n){return{type:"polygon",exterior:n}}),AI))}}var t2t={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function e2t(r,t){if(r==="china"){var e=t2t[t.name];if(e){var n=t.getCenter();n[0]+=e[0]/10.5,n[1]+=-e[1]/(10.5/.75),t.setCenter(n)}}}var r2t=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function n2t(r,t){r==="china"&&t.name===""&&t.geometries.push({type:"polygon",exterior:r2t[0]})}var i2t="name",a2t=function(){function r(t,e,n){this.type="geoJSON",this._parsedMap=wt(),this._mapName=t,this._specialAreas=n,this._geoJSON=s2t(e)}return r.prototype.load=function(t,e){e=e||i2t;var n=this._parsedMap.get(e);if(!n){var i=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:i,boundingRect:o2t(i)})}var a=wt(),o=[];return I(n.regions,function(s){var l=s.name;t&&xt(t,l)&&(s=s.cloneShallow(l=t[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:n.boundingRect||new jt(0,0,0,0),regionsMap:a}},r.prototype._parseToRegions=function(t){var e=this._mapName,n=this._geoJSON,i;try{i=n?ZMt(n,t):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return QRt(e,i),I(i,function(a){var o=a.name;e2t(e,a),n2t(e,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),i},r.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},r}();function o2t(r){for(var t,e=0;e<r.length;e++){var n=r[e].getBoundingRect();t=t||n.clone(),t.union(n)}return t}function s2t(r){return yt(r)?typeof JSON<"u"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}var Yp=wt();const dl={registerMap:function(r,t,e){if(t.svg){var n=new KRt(r,t.svg);Yp.set(r,n)}else{var i=t.geoJson||t.geoJSON;i&&!t.features?e=t.specialAreas:i=t;var n=new a2t(r,i,e);Yp.set(r,n)}},getGeoResource:function(r){return Yp.get(r)},getMapForUser:function(r){var t=Yp.get(r);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(r,t,e){var n=Yp.get(r);if(n)return n.load(t,e)}};var qL=["rect","circle","line","ellipse","polygon","polyline","path"],l2t=wt(qL),u2t=wt(qL.concat(["g"])),h2t=wt(qL.concat(["g"])),dZ=me();function V_(r){var t=r.getItemStyle(),e=r.get("areaColor");return e!=null&&(t.fill=e),t}function $B(r){var t=r.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var gZ=function(){function r(t){var e=new Dt;this.uid=Qg("ec_map_draw"),this._controller=new u0(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Dt),e.add(this._svgGroup=new Dt)}return r.prototype.draw=function(t,e,n,i,a){var o=t.mainType==="geo",s=t.getData&&t.getData();o&&e.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===t&&(s=m.getData())});var l=t.coordinateSystem,u=this._regionsGroup,h=this.group,c=l.getTransformInfo(),f=c.raw,d=c.roam,g=!u.childAt(0)||a;g?(h.x=d.x,h.y=d.y,h.scaleX=d.scaleX,h.scaleY=d.scaleY,h.dirty()):Ae(h,d,t);var p=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,v={api:n,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:p,isGeo:o,transformInfoRaw:f};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(t,e,n),this._updateMapSelectHandler(t,u,n,i)},r.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=wt(),n=wt(),i=this._regionsGroup,a=t.transformInfoRaw,o=t.mapOrGeoModel,s=t.data,l=t.geo.projection,u=l&&l.stream;function h(d,g){return g&&(d=g(d)),d&&[d[0]*a.scaleX+a.x,d[1]*a.scaleY+a.y]}function c(d){for(var g=[],p=!u&&l&&l.project,v=0;v<d.length;++v){var m=h(d[v],p);m&&g.push(m)}return g}function f(d){return{shape:{points:c(d)}}}i.removeAll(),I(t.geo.regions,function(d){var g=d.name,p=e.get(g),v=n.get(g)||{},m=v.dataIdx,y=v.regionModel;p||(p=e.set(g,new Dt),i.add(p),m=s?s.indexOfName(g):null,y=t.isGeo?o.getRegionModel(g):s?s.getItemModel(m):null,n.set(g,{dataIdx:m,regionModel:y}));var _=[],x=[];I(d.geometries,function(T){if(T.type==="polygon"){var b=[T.exterior].concat(T.interiors||[]);u&&(b=qB(b,u)),I(b,function(C){_.push(new Ti(f(C)))})}else{var E=T.points;u&&(E=qB(E,u,!0)),I(E,function(C){x.push(new Ei(f(C)))})}});var w=h(d.getCenter(),l&&l.project);function S(T,b){if(T.length){var E=new oL({culling:!0,segmentIgnoreThreshold:1,shape:{paths:T}});p.add(E),YB(t,E,m,y),XB(t,E,g,y,o,m,w),b&&($B(E),I(E.states,$B))}}S(_),S(x,!0)}),e.each(function(d,g){var p=n.get(g),v=p.dataIdx,m=p.regionModel;ZB(t,d,g,m,o,v),jB(t,d,g,m,o),KB(t,d,g,m,o)},this)},r.prototype._buildSVG=function(t){var e=t.geo.map,n=t.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var i=this._svgDispatcherMap=wt(),a=!1;I(this._svgGraphicRecord.named,function(o){var s=o.name,l=t.mapOrGeoModel,u=t.data,h=o.svgNodeTagLower,c=o.el,f=u?u.indexOfName(s):null,d=l.getRegionModel(s);if(l2t.get(h)!=null&&c instanceof $a&&YB(t,c,f,d),c instanceof $a&&(c.culling=!0),c.z2EmphasisLift=0,!o.namedFrom&&(h2t.get(h)!=null&&XB(t,c,s,d,l,f,null),ZB(t,c,s,d,l,f),jB(t,c,s,d,l),u2t.get(h)!=null)){var g=KB(t,c,s,d,l);g==="self"&&(a=!0);var p=i.get(s)||i.set(s,[]);p.push(c)}},this),this._enableBlurEntireSVG(a,t)},r.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=n.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Wc(a);var o=a.ensureState("blur").style||{};o.opacity==null&&i!=null&&(o.opacity=i),a.ensureState("emphasis")}})}},r.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},r.prototype.findHighDownDispatchers=function(t,e){if(t==null)return[];var n=e.coordinateSystem;if(n.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(t);return a?[a]:[]}}else if(n.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},r.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},r.prototype._useSVG=function(t){var e=dl.getGeoResource(t);if(e&&e.type==="geoSVG"){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=t}},r.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var e=dl.getGeoResource(t);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},r.prototype._updateController=function(t,e,n){var i=t.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(t.get("roam")||!1);var s=t.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=t.id,u}a.off("pan").on("pan",function(u){this._mouseDownFlag=!1,jL(o,u.dx,u.dy),n.dispatchAction(tt(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,KL(o,u.scale,u.originX,u.originY),n.dispatchAction(tt(l(),{totalZoom:o.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(u,h,c){return i.containPoint([h,c])&&!lT(u,n,t)})},r.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=dZ(e).ignore)})},r.prototype._updateMapSelectHandler=function(t,e,n,i){var a=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){a._mouseDownFlag=!0}),e.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},r}();function YB(r,t,e,n){var i=n.getModel("itemStyle"),a=n.getModel(["emphasis","itemStyle"]),o=n.getModel(["blur","itemStyle"]),s=n.getModel(["select","itemStyle"]),l=V_(i),u=V_(a),h=V_(s),c=V_(o),f=r.data;if(f){var d=f.getItemVisual(e,"style"),g=f.getItemVisual(e,"decal");r.isVisualEncodedByVisualMap&&d.fill&&(l.fill=d.fill),g&&(l.decal=yg(g,r.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=h,t.ensureState("blur").style=c,Wc(t)}function XB(r,t,e,n,i,a,o){var s=r.data,l=r.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),h=s&&s.getItemLayout(a);if(l||u||h&&h.showLabel){var c=l?e:a,f=void 0;(!s||a>=0)&&(f=i);var d=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Nn(t,hn(n),{labelFetcher:f,labelDataIndex:c,defaultText:e},d);var g=t.getTextContent();if(g&&(dZ(g).ignore=g.ignore,t.textConfig&&o)){var p=t.getBoundingRect().clone();t.textConfig.layoutRect=p,t.textConfig.position=[(o[0]-p.x)/p.width*100+"%",(o[1]-p.y)/p.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function ZB(r,t,e,n,i,a){r.data?r.data.setItemGraphicEl(a,t):Ft(t).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:e,region:n&&n.option||{}}}function jB(r,t,e,n,i){r.data||qg({el:t,componentModel:i,itemName:e,itemTooltipOption:n.get("tooltip")})}function KB(r,t,e,n,i){t.highDownSilentOnTouch=!!i.get("selectedMode");var a=n.getModel("emphasis"),o=a.get("focus");return wr(t,o,a.get("blurScope"),a.get("disabled")),r.isGeo&&uTt(t,i,e),o}function qB(r,t,e){var n=[],i;function a(){i=[]}function o(){i.length&&(n.push(i),i=[])}var s=t({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&i.push([l,u])},sphere:function(){}});return!e&&s.polygonStart(),I(r,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!e&&s.polygonEnd(),n}var c2t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===e.id){var s=this._mapDraw;s&&o.add(s.group)}else if(e.needsDrawMap){var s=this._mapDraw||new gZ(i);o.add(s.group),s.draw(e,n,i,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&n.getComponent("legend")&&this._renderSymbols(e,n,i)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,n,i){var a=e.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=a.getItemLayout(l);if(!(!u||!u.point)){var h=u.point,c=u.offset,f=new xl({style:{fill:e.getData().getVisual("style").fill},shape:{cx:h[0]+c*9,cy:h[1],r:3},silent:!0,z2:8+(c?0:jg+1)});if(!c){var d=e.mainSeries.getData(),g=a.getName(l),p=d.indexOfName(g),v=a.getItemModel(l),m=v.getModel("label"),y=d.getItemGraphicEl(p);Nn(f,hn(v),{labelFetcher:{getFormattedLabel:function(_,x){return e.getFormattedLabel(p,x)}},defaultText:g}),f.disableLabelAnimation=!0,m.get("position")||f.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(_){Xx(f,_)}}o.add(f)}}})},t.type="map",t}(Ke),f2t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(n){if(n!=null){var i=this.getData().getName(n),a=this.coordinateSystem,o=a.getRegion(i);return o&&a.dataToPoint(o.getCenter())}},e}return t.prototype.getInitialData=function(e){for(var n=sp(this,{coordDimensions:["value"],encodeDefaulter:Wt(vL,this)}),i=wt(),a=[],o=0,s=n.count();o<s;o++){var l=n.getName(o);i.set(l,!0)}var u=dl.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return I(u.regions,function(h){var c=h.name;i.get(c)||a.push(c)}),n.appendValues([],a),n},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var n=this.getData();return n.get(n.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var n=this.getData();return n.getItemModel(n.indexOfName(e))},t.prototype.formatTooltip=function(e,n,i){for(var a=this.getData(),o=this.getRawValue(e),s=a.getName(e),l=this.seriesGroup,u=[],h=0;h<l.length;h++){var c=l[h].originalData.indexOfName(s),f=a.mapDimension("value");isNaN(l[h].originalData.get(f,c))||u.push(l[h].name)}return cn("section",{header:u.join(", "),noHeader:!u.length,blocks:[cn("nameValue",{name:s,value:o})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var n=e.icon||"roundRect",i=Ur(n,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return i.setStyle(e.itemStyle),i.style.stroke="none",n.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(lr);function d2t(r,t){var e={};return I(r,function(n){n.each(n.mapDimension("value"),function(i,a){var o="ec-"+n.getName(a);e[o]=e[o]||[],isNaN(i)||e[o].push(i)})}),r[0].map(r[0].mapDimension("value"),function(n,i){for(var a="ec-"+r[0].getName(i),o=0,s=1/0,l=-1/0,u=e[a].length,h=0;h<u;h++)s=Math.min(s,e[a][h]),l=Math.max(l,e[a][h]),o+=e[a][h];var c;return t==="min"?c=s:t==="max"?c=l:t==="average"?c=o/u:c=o,u===0?NaN:c})}function g2t(r){var t={};r.eachSeriesByType("map",function(e){var n=e.getHostGeoModel(),i=n?"o"+n.id:"i"+e.getMapType();(t[i]=t[i]||[]).push(e)}),I(t,function(e,n){for(var i=d2t(nt(e,function(o){return o.getData()}),e[0].get("mapValueCalculation")),a=0;a<e.length;a++)e[a].originalData=e[a].getData();for(var a=0;a<e.length;a++)e[a].seriesGroup=e,e[a].needsDrawMap=a===0&&!e[a].getHostGeoModel(),e[a].setData(i.cloneShallow()),e[a].mainSeries=e[0]})}function p2t(r){var t={};r.eachSeriesByType("map",function(e){var n=e.getMapType();if(!(e.getHostGeoModel()||t[n])){var i={};I(e.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&r.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,h){var c=l.getName(h),f=s.getRegion(c);if(!(!f||isNaN(u))){var d=i[c]||0,g=s.dataToPoint(f.getCenter());i[c]=d+1,l.setItemLayout(h,{point:g,offset:d})}})});var a=e.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!i[s],a.setItemLayout(o,l)}),t[n]=!0}})}var JB=Ln,h0=function(r){U(t,r);function t(e){var n=r.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Ws,n._rawTransformable=new Ws,n.name=e,n}return t.prototype.setBoundingRect=function(e,n,i,a){return this._rect=new jt(e,n,i,a),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,n,i,a){this._transformTo(e,n,i,a),this._viewRect=new jt(e,n,i,a)},t.prototype._transformTo=function(e,n,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new jt(e,n,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(e,n){e&&(this._center=[ft(e[0],n.getWidth()),ft(e[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var n=this.zoomLimit;n&&(n.max!=null&&(e=Math.min(n.max,e)),n.min!=null&&(e=Math.max(n.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),n=e.x+e.width/2,i=e.y+e.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=Ln([],a,e),i=Ln([],i,e),n.originX=a[0],n.originY=a[1],n.x=i[0]-a[0],n.y=i[1]-a[1],n.scaleX=n.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,n=this._rawTransformable;n.parent=e,e.updateTransform(),n.updateTransform(),WP(this.transform||(this.transform=[]),n.transform||oa()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],Xg(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,n=this._roamTransformable,i=new Ws;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,n,i){var a=n?this._rawTransform:this.transform;return i=i||[],a?JB(i,e,a):si(i,e)},t.prototype.pointToData=function(e){var n=this.invTransform;return n?JB([],e,n):[e[0],e[1]]},t.prototype.convertToPixel=function(e,n,i){var a=QB(n);return a===this?a.dataToPoint(i):null},t.prototype.convertFromPixel=function(e,n,i){var a=QB(n);return a===this?a.pointToData(i):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(Ws);function QB(r){var t=r.seriesModel;return t?t.coordinateSystem:null}var v2t={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},pZ=["lng","lat"],II=function(r){U(t,r);function t(e,n,i){var a=r.call(this,e)||this;a.dimensions=pZ,a.type="geo",a._nameCoordMap=wt(),a.map=n;var o=i.projection,s=dl.load(n,i.nameMap,i.nameProperty),l=dl.getGeoResource(n);a.resourceType=l?l.type:null;var u=a.regions=s.regions,h=v2t[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var c;if(o)for(var f=0;f<u.length;f++){var d=u[f].getBoundingRect(o);c=c||d.clone(),c.union(d)}else c=s.boundingRect;return a.setBoundingRect(c.x,c.y,c.width,c.height),a.aspectScale=o?1:Vt(i.aspectScale,h.aspectScale),a._invertLongitute=o?!1:h.invertLongitute,a}return t.prototype._transformTo=function(e,n,i,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new jt(e,n,i,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var n=this.regions,i=0;i<n.length;i++){var a=n[i];if(a.type==="geoJSON"&&a.contain(e))return n[i]}},t.prototype.addGeoCoord=function(e,n){this._nameCoordMap.set(e,n)},t.prototype.getGeoCoord=function(e){var n=this._regionsMap.get(e);return this._nameCoordMap.get(e)||n&&n.getCenter()},t.prototype.dataToPoint=function(e,n,i){if(yt(e)&&(e=this.getGeoCoord(e)),e){var a=this.projection;return a&&(e=a.project(e)),e&&this.projectedToPoint(e,n,i)}},t.prototype.pointToData=function(e){var n=this.projection;return n&&(e=n.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(e){return r.prototype.pointToData.call(this,e)},t.prototype.projectedToPoint=function(e,n,i){return r.prototype.dataToPoint.call(this,e,n,i)},t.prototype.convertToPixel=function(e,n,i){var a=t4(n);return a===this?a.dataToPoint(i):null},t.prototype.convertFromPixel=function(e,n,i){var a=t4(n);return a===this?a.pointToData(i):null},t}(h0);Hr(II,h0);function t4(r){var t=r.geoModel,e=r.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Br).models[0]||{}).coordinateSystem:null}function e4(r,t){var e=r.get("boundingCoords");if(e!=null){var n=e[0],i=e[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var o=n[0],s=n[1],l=i[0],u=i[1];n=[1/0,1/0],i=[-1/0,-1/0];var h=function(S,T,b,E){for(var C=b-S,M=E-T,A=0;A<=100;A++){var R=A/100,P=a.project([S+C*R,T+M*R]);su(n,n,P),lu(i,i,P)}};h(o,s,l,s),h(l,s,l,u),h(l,u,o,u),h(o,u,l,s)}this.setBoundingRect(n[0],n[1],i[0]-n[0],i[1]-n[1])}}var c=this.getBoundingRect(),f=r.get("layoutCenter"),d=r.get("layoutSize"),g=t.getWidth(),p=t.getHeight(),v=c.width/c.height*this.aspectScale,m=!1,y,_;f&&d&&(y=[ft(f[0],g),ft(f[1],p)],_=ft(d,Math.min(g,p)),!isNaN(y[0])&&!isNaN(y[1])&&!isNaN(_)&&(m=!0));var x;if(m)x={},v>1?(x.width=_,x.height=_/v):(x.height=_,x.width=_*v),x.y=y[1]-x.height/2,x.x=y[0]-x.width/2;else{var w=r.getBoxLayoutParams();w.aspect=v,x=qr(w,{width:g,height:p})}this.setViewRect(x.x,x.y,x.width,x.height),this.setCenter(r.get("center"),t),this.setZoom(r.get("zoom"))}function m2t(r,t){I(t.get("geoCoord"),function(e,n){r.addGeoCoord(n,e)})}var y2t=function(){function r(){this.dimensions=pZ}return r.prototype.create=function(t,e){var n=[];function i(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}t.eachComponent("geo",function(o,s){var l=o.get("map"),u=new II(l+s,l,tt({nameMap:o.get("nameMap")},i(o)));u.zoomLimit=o.get("scaleLimit"),n.push(u),o.coordinateSystem=u,u.model=o,u.resize=e4,u.resize(o,e)}),t.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=n[l]}});var a={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),I(a,function(o,s){var l=nt(o,function(h){return h.get("nameMap")}),u=new II(s,s,tt({nameMap:BP(l)},i(o[0])));u.zoomLimit=Sn.apply(null,nt(o,function(h){return h.get("scaleLimit")})),n.push(u),u.resize=e4,u.resize(o[0],e),I(o,function(h){h.coordinateSystem=u,m2t(u,h)})}),n},r.prototype.getFilledRegions=function(t,e,n,i){for(var a=(t||[]).slice(),o=wt(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=dl.load(e,n,i);return I(l.regions,function(u){var h=u.name;!o.get(h)&&a.push({name:h})}),a},r}(),vZ=new y2t,_2t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,n,i){var a=dl.getGeoResource(e.map);if(a&&a.type==="geoJSON"){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,i),zc(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,n=this.option;n.regions=vZ.getFilledRegions(n.regions,n.map,n.nameMap,n.nameProperty);var i={};this._optionModelMap=cs(n.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new Oe(o,e,e.ecModel)),o.selected&&(i[s]=!0)),a},wt()),n.selectedMap||(n.selectedMap=i)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new Oe(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,n){var i=this.getRegionModel(e),a=n==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:e};if(At(a))return o.status=n,a(o);if(yt(a))return a.replace("{a}",e??"")},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var n=this.option,i=n.selectedMode;if(i){i!=="multiple"&&(n.selectedMap=null);var a=n.selectedMap||(n.selectedMap={});a[e]=!0}},t.prototype.unSelect=function(e){var n=this.option.selectedMap;n&&(n[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var n=this.option.selectedMap;return!!(n&&n[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(ue);function r4(r,t){return r.pointToProjected?r.pointToProjected(t):r.pointToData(t)}function JL(r,t,e,n){var i=r.getZoom(),a=r.getCenter(),o=t.zoom,s=r.projectedToPoint?r.projectedToPoint(a):r.dataToPoint(a);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,r.setCenter(r4(r,s),n)),o!=null){if(e){var l=e.min||0,u=e.max||1/0;o=Math.max(Math.min(i*o,u),l)/i}r.scaleX*=o,r.scaleY*=o;var h=(t.originX-r.x)*(o-1),c=(t.originY-r.y)*(o-1);r.x-=h,r.y-=c,r.updateTransform(),r.setCenter(r4(r,s),n),r.setZoom(o*i)}return{center:r.getCenter(),zoom:r.getZoom()}}var x2t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return t.prototype.init=function(e,n){this._api=n},t.prototype.render=function(e,n,i,a){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new gZ(i));var o=this._mapDraw;o.draw(e,n,i,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,n,i)},t.prototype._handleRegionClick=function(e){var n;dc(e.target,function(i){return(n=Ft(i).eventData)!=null},!0),n&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:n.name})},t.prototype.updateSelectStatus=function(e,n,i){var a=this;this._mapDraw.group.traverse(function(o){var s=Ft(o).eventData;if(s)return a._model.isSelected(s.name)?i.enterSelect(o):i.leaveSelect(o),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(yr);function S2t(r,t,e){dl.registerMap(r,t,e)}function mZ(r){r.registerCoordinateSystem("geo",vZ),r.registerComponentModel(_2t),r.registerComponentView(x2t),r.registerImpl("registerMap",S2t),r.registerImpl("getMap",function(e){return dl.getMapForUser(e)});function t(e,n){n.update="geo:updateSelectStatus",r.registerAction(n,function(i,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[e](i.name);var u=l.coordinateSystem;I(u.regions,function(c){o[c.name]=l.isSelected(c.name)||!1});var h=[];I(o,function(c,f){o[f]&&h.push(f)}),s.push({geoIndex:l.componentIndex,name:h})}),{selected:o,allSelected:s,name:i.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),r.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,n,i){var a=e.componentType||"series";n.eachComponent({mainType:a,query:e},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=JL(s,e,o.get("scaleLimit"),i);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&I(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function w2t(r){ne(mZ),r.registerChartView(c2t),r.registerSeriesModel(f2t),r.registerLayout(p2t),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,g2t),yY("map",r.registerAction)}function T2t(r){var t=r;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[t],n,i;n=e.pop();)if(i=n.children,n.isExpand&&i.length)for(var a=i.length,o=a-1;o>=0;o--){var s=i[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},e.push(s)}}function b2t(r,t){var e=r.isExpand?r.children:[],n=r.parentNode.children,i=r.hierNode.i?n[r.hierNode.i-1]:null;if(e.length){M2t(r);var a=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;i?(r.hierNode.prelim=i.hierNode.prelim+t(r,i),r.hierNode.modifier=r.hierNode.prelim-a):r.hierNode.prelim=a}else i&&(r.hierNode.prelim=i.hierNode.prelim+t(r,i));r.parentNode.hierNode.defaultAncestor=A2t(r,i,r.parentNode.hierNode.defaultAncestor||n[0],t)}function E2t(r){var t=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:t},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function n4(r){return arguments.length?r:P2t}function Sv(r,t){return r-=Math.PI/2,{x:t*Math.cos(r),y:t*Math.sin(r)}}function C2t(r,t){return qr(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function M2t(r){for(var t=r.children,e=t.length,n=0,i=0;--e>=0;){var a=t[e];a.hierNode.prelim+=n,a.hierNode.modifier+=n,i+=a.hierNode.change,n+=a.hierNode.shift+i}}function A2t(r,t,e,n){if(t){for(var i=r,a=r,o=a.parentNode.children[0],s=t,l=i.hierNode.modifier,u=a.hierNode.modifier,h=o.hierNode.modifier,c=s.hierNode.modifier;s=lC(s),a=uC(a),s&&a;){i=lC(i),o=uC(o),i.hierNode.ancestor=r;var f=s.hierNode.prelim+c-a.hierNode.prelim-u+n(s,a);f>0&&(R2t(I2t(s,r,e),r,f),u+=f,l+=f),c+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=i.hierNode.modifier,h+=o.hierNode.modifier}s&&!lC(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=c-l),a&&!uC(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-h,e=r)}return e}function lC(r){var t=r.children;return t.length&&r.isExpand?t[t.length-1]:r.hierNode.thread}function uC(r){var t=r.children;return t.length&&r.isExpand?t[0]:r.hierNode.thread}function I2t(r,t,e){return r.hierNode.ancestor.parentNode===t.parentNode?r.hierNode.ancestor:e}function R2t(r,t,e){var n=e/(t.hierNode.i-r.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,r.hierNode.change+=n}function P2t(r,t){return r.parentNode===t.parentNode?1:2}var L2t=function(){function r(){this.parentPoint=[],this.childPoints=[]}return r}(),D2t=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new L2t},t.prototype.buildPath=function(e,n){var i=n.childPoints,a=i.length,o=n.parentPoint,s=i[0],l=i[a-1];if(a===1){e.moveTo(o[0],o[1]),e.lineTo(s[0],s[1]);return}var u=n.orient,h=u==="TB"||u==="BT"?0:1,c=1-h,f=ft(n.forkPosition,1),d=[];d[h]=o[h],d[c]=o[c]+(l[c]-o[c])*f,e.moveTo(o[0],o[1]),e.lineTo(d[0],d[1]),e.moveTo(s[0],s[1]),d[h]=s[h],e.lineTo(d[0],d[1]),d[h]=l[h],e.lineTo(d[0],d[1]),e.lineTo(l[0],l[1]);for(var g=1;g<a-1;g++){var p=i[g];e.moveTo(p[0],p[1]),d[h]=p[h],e.lineTo(d[0],d[1])}},t}(ae),O2t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new Dt,e}return t.prototype.init=function(e,n){this._controller=new u0(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,n,i){var a=e.getData(),o=e.layoutInfo,s=this._mainGroup,l=e.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(e,i),this._updateController(e,n,i);var u=this._data;a.diff(u).add(function(h){i4(a,h)&&a4(a,h,null,s,e)}).update(function(h,c){var f=u.getItemGraphicEl(c);if(!i4(a,h)){f&&s4(u,c,f,s,e);return}a4(a,h,f,s,e)}).remove(function(h){var c=u.getItemGraphicEl(h);c&&s4(u,h,c,s,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(h,c){h.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:c})})}),this._data=a},t.prototype._updateViewCoordSys=function(e,n){var i=e.getData(),a=[];i.each(function(c){var f=i.getItemLayout(c);f&&!isNaN(f.x)&&!isNaN(f.y)&&a.push([+f.x,+f.y])});var o=[],s=[];Gw(a,o,s);var l=this._min,u=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=u?u[1]:s[1]+1);var h=e.coordinateSystem=new h0;h.zoomLimit=e.get("scaleLimit"),h.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),h.setCenter(e.get("center"),n),h.setZoom(e.get("zoom")),this.group.attr({x:h.x,y:h.y,scaleX:h.scaleX,scaleY:h.scaleY}),this._min=o,this._max=s},t.prototype._updateController=function(e,n,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(u,h,c){var f=l.getBoundingRect();return f.applyTransform(l.transform),f.contain(h,c)&&!lT(u,i,e)}),o.enable(e.get("roam")),s.zoomLimit=e.get("scaleLimit"),s.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){jL(s,u.dx,u.dy),i.dispatchAction({seriesId:e.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){KL(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(e),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var n=e.getData(),i=this._getNodeGlobalScale(e);n.eachItemGraphicEl(function(a,o){a.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(e){var n=e.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,a=n.scaleX||1,o=n.getZoom(),s=(o-1)*i+1;return s/a},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Ke);function i4(r,t){var e=r.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function a4(r,t,e,n,i){var a=!e,o=r.tree.getNodeByDataIndex(t),s=o.getModel(),l=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?l:"#fff",h=r.tree.root,c=o.parentNode===h?o:o.parentNode||o,f=r.getItemGraphicEl(c.dataIndex),d=c.getLayout(),g=f?{x:f.__oldX,y:f.__oldY,rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:d,p=o.getLayout();a?(e=new n0(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.x=g.x,e.y=g.y):e.updateData(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=p.rawX,e.__radialRawY=p.rawY,n.add(e),r.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,Ae(e,{x:p.x,y:p.y},i);var v=e.getSymbolPath();if(i.get("layout")==="radial"){var m=h.children[0],y=m.getLayout(),_=m.children.length,x=void 0,w=void 0;if(p.x===y.x&&o.isExpand===!0&&m.children.length){var S={x:(m.children[0].getLayout().x+m.children[_-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[_-1].getLayout().y)/2};x=Math.atan2(S.y-y.y,S.x-y.x),x<0&&(x=Math.PI*2+x),w=S.x<y.x,w&&(x=x-Math.PI)}else x=Math.atan2(p.y-y.y,p.x-y.x),x<0&&(x=Math.PI*2+x),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(w=p.x<y.x,w&&(x=x-Math.PI)):(w=p.x>y.x,w||(x=x-Math.PI));var T=w?"left":"right",b=s.getModel("label"),E=b.get("rotate"),C=E*(Math.PI/180),M=v.getTextContent();M&&(v.setTextConfig({position:b.get("position")||T,rotation:E==null?-x:C,origin:"center"}),M.setStyle("verticalAlign","middle"))}var A=s.get(["emphasis","focus"]),R=A==="relative"?kx(o.getAncestorsIndices(),o.getDescendantIndices()):A==="ancestor"?o.getAncestorsIndices():A==="descendant"?o.getDescendantIndices():null;R&&(Ft(e).focus=R),N2t(i,o,h,e,g,d,p,n),e.__edge&&(e.onHoverStateChange=function(P){if(P!=="blur"){var L=o.parentNode&&r.getItemGraphicEl(o.parentNode.dataIndex);L&&L.hoverState===Xy||Xx(e.__edge,P)}})}function N2t(r,t,e,n,i,a,o,s){var l=t.getModel(),u=r.get("edgeShape"),h=r.get("layout"),c=r.getOrient(),f=r.get(["lineStyle","curveness"]),d=r.get("edgeForkPosition"),g=l.getModel("lineStyle").getLineStyle(),p=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==e&&(p||(p=n.__edge=new jy({shape:RI(h,c,f,i,i)})),Ae(p,{shape:RI(h,c,f,a,o)},r));else if(u==="polyline"&&h==="orthogonal"&&t!==e&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var v=t.children,m=[],y=0;y<v.length;y++){var _=v[y].getLayout();m.push([_.x,_.y])}p||(p=n.__edge=new D2t({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:c,forkPosition:d}})),Ae(p,{shape:{parentPoint:[o.x,o.y],childPoints:m}},r)}p&&!(u==="polyline"&&!t.isExpand)&&(p.useStyle(It({strokeNoScale:!0,fill:null},g)),On(p,l,"lineStyle"),Wc(p),s.add(p))}function o4(r,t,e,n,i){var a=t.tree.root,o=yZ(a,r),s=o.source,l=o.sourceLayout,u=t.getItemGraphicEl(r.dataIndex);if(u){var h=t.getItemGraphicEl(s.dataIndex),c=h.__edge,f=u.__edge||(s.isExpand===!1||s.children.length===1?c:void 0),d=n.get("edgeShape"),g=n.get("layout"),p=n.get("orient"),v=n.get(["lineStyle","curveness"]);f&&(d==="curve"?zu(f,{shape:RI(g,p,v,l,l),style:{opacity:0}},n,{cb:function(){e.remove(f)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&zu(f,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){e.remove(f)},removeOpt:i}))}}function yZ(r,t){for(var e=t.parentNode===r?t:t.parentNode||t,n;n=e.getLayout(),n==null;)e=e.parentNode===r?e:e.parentNode||e;return{source:e,sourceLayout:n}}function s4(r,t,e,n,i){var a=r.tree.getNodeByDataIndex(t),o=r.tree.root,s=yZ(o,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};zu(e,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(e),r.setItemGraphicEl(t,null)},removeOpt:l}),e.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(u){o4(u,r,n,i,l)}),o4(a,r,n,i,l)}function RI(r,t,e,n,i){var a,o,s,l,u,h,c,f;if(r==="radial"){u=n.rawX,c=n.rawY,h=i.rawX,f=i.rawY;var d=Sv(u,c),g=Sv(u,c+(f-c)*e),p=Sv(h,f+(c-f)*e),v=Sv(h,f);return{x1:d.x||0,y1:d.y||0,x2:v.x||0,y2:v.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:p.x||0,cpy2:p.y||0}}else u=n.x,c=n.y,h=i.x,f=i.y,(t==="LR"||t==="RL")&&(a=u+(h-u)*e,o=c,s=h+(u-h)*e,l=f),(t==="TB"||t==="BT")&&(a=u,o=c+(f-c)*e,s=h,l=f+(c-f)*e);return{x1:u,y1:c,x2:h,y2:f,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Va=me();function _Z(r){var t=r.mainData,e=r.datas;e||(e={main:t},r.datasAttr={main:"data"}),r.datas=r.mainData=null,xZ(t,e,r),I(e,function(n){I(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,Wt(F2t,r))})}),t.wrapMethod("cloneShallow",Wt(G2t,r)),I(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,Wt(k2t,r))}),xi(e[t.dataType]===t)}function F2t(r,t){if(V2t(this)){var e=tt({},Va(this).datas);e[this.dataType]=t,xZ(t,e,r)}else QL(t,this.dataType,Va(this).mainData,r);return t}function k2t(r,t){return r.struct&&r.struct.update(),t}function G2t(r,t){return I(Va(t).datas,function(e,n){e!==t&&QL(e.cloneShallow(),n,t,r)}),t}function B2t(r){var t=Va(this).mainData;return r==null||t==null?t:Va(t).datas[r]}function z2t(){var r=Va(this).mainData;return r==null?[{data:r}]:nt(he(Va(r).datas),function(t){return{type:t,data:Va(r).datas[t]}})}function V2t(r){return Va(r).mainData===r}function xZ(r,t,e){Va(r).datas={},I(t,function(n,i){QL(n,i,r,e)})}function QL(r,t,e,n){Va(e).datas[t]=r,Va(r).mainData=e,r.dataType=t,n.struct&&(r[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=r),r.getLinkedData=B2t,r.getLinkedDataAll=z2t}var U2t=function(){function r(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(t,e,n){At(t)&&(n=e,e=t,t=null),t=t||{},yt(t)&&(t={order:t});var i=t.order||"preorder",a=this[t.attr||"children"],o;i==="preorder"&&(o=e.call(n,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(t,e,n);i==="postorder"&&e.call(n,this)},r.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},r.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var a=n[e].getNodeById(t);if(a)return a}},r.prototype.contains=function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var a=n[e].contains(t);if(a)return a}},r.prototype.getAncestors=function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},r.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},r.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},r.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},r.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,n=e.data.getItemModel(this.dataIndex);return n.getModel(t)}},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},r.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},r.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},r.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},r}(),tD=function(){function r(t){this.type="tree",this._nodes=[],this.hostModel=t}return r.prototype.eachNode=function(t,e,n){this.root.eachNode(t,e,n)},r.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},r.prototype.getNodeById=function(t){return this.root.getNodeById(t)},r.prototype.update=function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(t,e,n){var i=new r(e),a=[],o=1;s(t);function s(h,c){var f=h.value;o=Math.max(o,rt(f)?f.length:1),a.push(h);var d=new U2t(Zr(h.name,""),i);c?W2t(d,c):i.root=d,i._nodes.push(d);var g=h.children;if(g)for(var p=0;p<g.length;p++)s(g[p],d)}i.root.updateDepthAndHeight(0);var l=e0(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new vi(l,e);return u.initData(a),n&&n(u),_Z({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},r}();function W2t(r,t){var e=t.children;r.parentNode!==t&&(e.push(r),r.parentNode=t)}function uy(r,t,e){if(r&&te(t,r.type)>=0){var n=e.getData().tree.root,i=r.targetNode;if(yt(i)&&(i=n.getNodeById(i)),i&&n.contains(i))return{node:i};var a=r.targetNodeId;if(a!=null&&(i=n.getNodeById(a)))return{node:i}}}function SZ(r){for(var t=[];r;)r=r.parentNode,r&&t.push(r);return t.reverse()}function eD(r,t){var e=SZ(r);return te(e,t)>=0}function hT(r,t){for(var e=[];r;){var n=r.dataIndex;e.push({name:r.name,dataIndex:n,value:t.getRawValue(n)}),r=r.parentNode}return e.reverse(),e}var H2t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e){var n={name:e.name,children:e.data},i=e.leaves||{},a=new Oe(i,this,this.ecModel),o=tD.createTree(n,this,s);function s(c){c.wrapMethod("getItemModel",function(f,d){var g=o.getNodeByDataIndex(d);return g&&g.children.length&&g.isExpand||(f.parentModel=a),f})}var l=0;o.eachNode("preorder",function(c){c.depth>l&&(l=c.depth)});var u=e.expandAndCollapse,h=u&&e.initialTreeDepth>=0?e.initialTreeDepth:l;return o.root.eachNode("preorder",function(c){var f=c.hostTree.data.getRawDataItem(c.dataIndex);c.isExpand=f&&f.collapsed!=null?!f.collapsed:c.depth<=h}),o.data},t.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,n,i){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(e),l=s.getValue(),u=s.name;s&&s!==o;)u=s.parentNode.name+"."+u,s=s.parentNode;return cn("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(e){var n=r.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=hT(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(lr);function $2t(r,t,e){for(var n=[r],i=[],a;a=n.pop();)if(i.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)n.push(o[s])}for(;a=i.pop();)t(a,e)}function Xp(r,t){for(var e=[r],n;n=e.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var a=i.length-1;a>=0;a--)e.push(i[a])}}function Y2t(r,t){r.eachSeriesByType("tree",function(e){X2t(e,t)})}function X2t(r,t){var e=C2t(r,t);r.layoutInfo=e;var n=r.get("layout"),i=0,a=0,o=null;n==="radial"?(i=2*Math.PI,a=Math.min(e.height,e.width)/2,o=n4(function(_,x){return(_.parentNode===x.parentNode?1:2)/_.depth})):(i=e.width,a=e.height,o=n4());var s=r.getData().tree.root,l=s.children[0];if(l){T2t(s),$2t(l,b2t,o),s.hierNode.modifier=-l.hierNode.prelim,Xp(l,E2t);var u=l,h=l,c=l;Xp(l,function(_){var x=_.getLayout().x;x<u.getLayout().x&&(u=_),x>h.getLayout().x&&(h=_),_.depth>c.depth&&(c=_)});var f=u===h?1:o(u,h)/2,d=f-u.getLayout().x,g=0,p=0,v=0,m=0;if(n==="radial")g=i/(h.getLayout().x+f+d),p=a/(c.depth-1||1),Xp(l,function(_){v=(_.getLayout().x+d)*g,m=(_.depth-1)*p;var x=Sv(v,m);_.setLayout({x:x.x,y:x.y,rawX:v,rawY:m},!0)});else{var y=r.getOrient();y==="RL"||y==="LR"?(p=a/(h.getLayout().x+f+d),g=i/(c.depth-1||1),Xp(l,function(_){m=(_.getLayout().x+d)*p,v=y==="LR"?(_.depth-1)*g:i-(_.depth-1)*g,_.setLayout({x:v,y:m},!0)})):(y==="TB"||y==="BT")&&(g=i/(h.getLayout().x+f+d),p=a/(c.depth-1||1),Xp(l,function(_){v=(_.getLayout().x+d)*g,m=y==="TB"?(_.depth-1)*p:a-(_.depth-1)*p,_.setLayout({x:v,y:m},!0)}))}}}function Z2t(r){r.eachSeriesByType("tree",function(t){var e=t.getData(),n=e.tree;n.eachNode(function(i){var a=i.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=e.ensureUniqueItemVisual(i.dataIndex,"style");tt(s,o)})})}function j2t(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,a=n.getData().tree,o=a.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e,n){e.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var a=i.coordinateSystem,o=JL(a,t,void 0,n);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}function K2t(r){r.registerChartView(O2t),r.registerSeriesModel(H2t),r.registerLayout(Y2t),r.registerVisual(Z2t),j2t(r)}var l4=["treemapZoomToNode","treemapRender","treemapMove"];function q2t(r){for(var t=0;t<l4.length;t++)r.registerAction({type:l4[t],update:"updateView"},Lr);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"treemap",query:e},i);function i(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=uy(e,s,a);if(l){var u=a.getViewRoot();u&&(e.direction=eD(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function wZ(r){var t=r.getData(),e=t.tree,n={};e.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var o=iI(r.ecModel,a.name||a.dataIndex+"",n);i.setVisual("decal",o)})}var J2t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return t.prototype.getInitialData=function(e,n){var i={name:e.name,children:e.data};TZ(i);var a=e.levels||[],o=this.designatedVisualItemStyle={},s=new Oe({itemStyle:o},this,n);a=e.levels=Q2t(a,n);var l=nt(a||[],function(c){return new Oe(c,s,n)},this),u=tD.createTree(i,this,h);function h(c){c.wrapMethod("getItemModel",function(f,d){var g=u.getNodeByDataIndex(d),p=g?l[g.depth]:null;return f.parentModel=p||s,f})}return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,n,i){var a=this.getData(),o=this.getRawValue(e),s=a.getName(e);return cn("nameValue",{name:s,value:o})},t.prototype.getDataParams=function(e){var n=r.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=hT(i,this),n.treePathInfo=n.treeAncestors,n},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},tt(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var n=this._idIndexMap;n||(n=this._idIndexMap=wt(),this._idIndexMapCount=0);var i=n.get(e);return i==null&&n.set(e,i=this._idIndexMapCount++),i},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;(!e||e!==n&&!n.contains(e))&&(this._viewRoot=n)},t.prototype.enableAriaDecal=function(){wZ(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(lr);function TZ(r){var t=0;I(r.children,function(n){TZ(n);var i=n.value;rt(i)&&(i=i[0]),t+=i});var e=r.value;rt(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),rt(r.value)?r.value[0]=e:r.value=e}function Q2t(r,t){var e=Ye(t.get("color")),n=Ye(t.get(["aria","decal","decals"]));if(e){r=r||[];var i,a;I(r,function(s){var l=new Oe(s),u=l.get("color"),h=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||h&&h!=="none")&&(a=!0)});var o=r[0]||(r[0]={});return i||(o.color=e.slice()),!a&&n&&(o.decal=n.slice()),r}}var tPt=8,u4=8,hC=5,ePt=function(){function r(t){this.group=new Dt,t.add(this.group)}return r.prototype.render=function(t,e,n,i){var a=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!n)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),u=s.getModel("textStyle"),h=l.getModel(["itemStyle","textStyle"]),c={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,c,u),this._renderContent(t,c,s,l,u,h,i),qw(o,c.pos,c.box)}},r.prototype._prepare=function(t,e,n){for(var i=t;i;i=i.parentNode){var a=Zr(i.getModel().get("name"),""),o=n.getTextRect(a),s=Math.max(o.width+tPt*2,e.emptyItemWidth);e.totalWidth+=s+u4,e.renderList.push({node:i,text:a,width:s})}},r.prototype._renderContent=function(t,e,n,i,a,o,s){for(var l=0,u=e.emptyItemWidth,h=t.get(["breadcrumb","height"]),c=cbt(e.pos,e.box),f=e.totalWidth,d=e.renderList,g=i.getModel("itemStyle").getItemStyle(),p=d.length-1;p>=0;p--){var v=d[p],m=v.node,y=v.width,_=v.text;f>c.width&&(f-=y-u,y=u,_=null);var x=new Ti({shape:{points:rPt(l,0,y,h,p===d.length-1,p===0)},style:It(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new xe({style:sr(a,{text:_})}),textConfig:{position:"inside"},z2:jg*1e4,onclick:Wt(s,m)});x.disableLabelAnimation=!0,x.getTextContent().ensureState("emphasis").style=sr(o,{text:_}),x.ensureState("emphasis").style=g,wr(x,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(x),nPt(x,t,m),l+=y+u4}},r.prototype.remove=function(){this.group.removeAll()},r}();function rPt(r,t,e,n,i,a){var o=[[i?r:r-hC,t],[r+e,t],[r+e,t+n],[i?r:r-hC,t+n]];return!a&&o.splice(2,0,[r+e+hC,t+n/2]),!i&&o.push([r,t+n/2]),o}function nPt(r,t,e){Ft(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&hT(e,t)}}var iPt=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(t,e,n,i,a){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:n,delay:i,easing:a}),!0)},r.prototype.finished=function(t){return this._finishedCallback=t,this},r.prototype.start=function(){for(var t=this,e=this._storage.length,n=function(){e--,e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:n,aborted:n})}return this},r}();function aPt(){return new iPt}var PI=Dt,h4=ve,c4=3,f4="label",d4="upperLabel",oPt=jg*10,sPt=jg*2,lPt=jg*3,Zh=Uc([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),g4=function(r){var t=Zh(r);return t.stroke=t.fill=t.lineWidth=null,t},pS=me(),uPt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage=Zp(),e}return t.prototype.render=function(e,n,i,a){var o=n.findComponents({mainType:"series",subType:"treemap",query:a});if(!(te(o,e)<0)){this.seriesModel=e,this.api=i,this.ecModel=n;var s=["treemapZoomToNode","treemapRootToNode"],l=uy(a,s,e),u=a&&a.type,h=e.layoutInfo,c=!this._oldTree,f=this._storage,d=u==="treemapRootToNode"&&l&&f?{rootNodeGroup:f.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,g=this._giveContainerGroup(h),p=e.get("animation"),v=this._doRender(g,e,d);p&&!c&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(g,v,e,d):v.renderFinally(),this._resetController(i),this._renderBreadcrumb(e,i,l)}},t.prototype._giveContainerGroup=function(e){var n=this._containerGroup;return n||(n=this._containerGroup=new PI,this._initEvents(n),this.group.add(n)),n.x=e.x,n.y=e.y,n},t.prototype._doRender=function(e,n,i){var a=n.getData().tree,o=this._oldTree,s=Zp(),l=Zp(),u=this._storage,h=[];function c(y,_,x,w){return hPt(n,l,u,i,s,h,y,_,x,w)}p(a.root?[a.root]:[],o&&o.root?[o.root]:[],e,a===o||!o,0);var f=v(u);if(this._oldTree=a,this._storage=l,this._controllerHost){var d=this.seriesModel.layoutInfo,g=a.root.getLayout();g.width===d.width&&g.height===d.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:f,renderFinally:m};function p(y,_,x,w,S){w?(_=y,I(y,function(E,C){!E.isRemoved()&&b(C,C)})):new cl(_,y,T,T).add(b).update(b).remove(Wt(b,null)).execute();function T(E){return E.getId()}function b(E,C){var M=E!=null?y[E]:null,A=C!=null?_[C]:null,R=c(M,A,x,S);R&&p(M&&M.viewChildren||[],A&&A.viewChildren||[],R,w,S+1)}}function v(y){var _=Zp();return y&&I(y,function(x,w){var S=_[w];I(x,function(T){T&&(S.push(T),pS(T).willDelete=!0)})}),_}function m(){I(f,function(y){I(y,function(_){_.parent&&_.parent.remove(_)})}),I(h,function(y){y.invisible=!0,y.dirty()})}},t.prototype._doAnimation=function(e,n,i,a){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(At(o)?0:o)||0,u=(At(s)?null:s)||"cubicOut",h=aPt();I(n.willDeleteEls,function(c,f){I(c,function(d,g){if(!d.invisible){var p=d.parent,v,m=pS(p);if(a&&a.direction==="drillDown")v=p===a.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,_=0;m.willDelete||(y=m.nodeWidth/2,_=m.nodeHeight/2),v=f==="nodeGroup"?{x:y,y:_,style:{opacity:0}}:{shape:{x:y,y:_,width:0,height:0},style:{opacity:0}}}v&&h.add(d,v,l,0,u)}})}),I(this._storage,function(c,f){I(c,function(d,g){var p=n.lastsForAnimation[f][g],v={};p&&(d instanceof Dt?p.oldX!=null&&(v.x=d.x,v.y=d.y,d.x=p.oldX,d.y=p.oldY):(p.oldShape&&(v.shape=tt({},d.shape),d.setShape(p.oldShape)),p.fadein?(d.setStyle("opacity",0),v.style={opacity:1}):d.style.opacity!==1&&(v.style={opacity:1})),h.add(d,v,l,0,u))})},this),this._state="animating",h.finished(_t(function(){this._state="ready",n.renderFinally()},this)).start()},t.prototype._resetController=function(e){var n=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),n||(n=this._controller=new u0(e.getZr()),n.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),n.on("pan",_t(this._onPan,this)),n.on("zoom",_t(this._onZoom,this)));var a=new jt(0,0,e.getWidth(),e.getHeight());n.setPointerChecker(function(o,s,l){return a.contain(s,l)})},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>c4||Math.abs(e.dy)>c4)){var n=this.seriesModel.getData().tree.root;if(!n)return;var i=n.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+e.dx,y:i.y+e.dy,width:i.width,height:i.height}})}},t.prototype._onZoom=function(e){var n=e.originX,i=e.originY,a=e.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new jt(s.x,s.y,s.width,s.height),u=null,h=this._controllerHost;u=h.zoomLimit;var c=h.zoom=h.zoom||1;if(c*=a,u){var f=u.min||0,d=u.max||1/0;c=Math.max(Math.min(d,c),f)}var g=c/h.zoom;h.zoom=c;var p=this.seriesModel.layoutInfo;n-=p.x,i-=p.y;var v=oa();fs(v,v,[-n,-i]),HP(v,v,[g,g]),fs(v,v,[n,i]),l.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},t.prototype._initEvents=function(e){var n=this;e.on("click",function(i){if(n._state==="ready"){var a=n.seriesModel.get("nodeClick",!0);if(a){var o=n.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)n._rootToNode(o);else if(a==="zoomToNode")n._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),h=l.get("target",!0)||"blank";u&&Qx(u,h)}}}}},this)},t.prototype._renderBreadcrumb=function(e,n,i){var a=this;i||(i=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2),i||(i={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new ePt(this.group))).render(e,n,i.node,function(o){a._state!=="animating"&&(eD(e.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Zp(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,n){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(e,n),u=s.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)i={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},t.type="treemap",t}(Ke);function Zp(){return{nodeGroup:[],background:[],content:[]}}function hPt(r,t,e,n,i,a,o,s,l,u){if(!o)return;var h=o.getLayout(),c=r.getData(),f=o.getModel();if(c.setItemGraphicEl(o.dataIndex,null),!h||!h.isInView)return;var d=h.width,g=h.height,p=h.borderWidth,v=h.invisible,m=o.getRawIndex(),y=s&&s.getRawIndex(),_=o.viewChildren,x=h.upperHeight,w=_&&_.length,S=f.getModel("itemStyle"),T=f.getModel(["emphasis","itemStyle"]),b=f.getModel(["blur","itemStyle"]),E=f.getModel(["select","itemStyle"]),C=S.get("borderRadius")||0,M=X("nodeGroup",PI);if(!M)return;if(l.add(M),M.x=h.x||0,M.y=h.y||0,M.markRedraw(),pS(M).nodeWidth=d,pS(M).nodeHeight=g,h.isAboveViewRoot)return M;var A=X("background",h4,u,sPt);A&&B(M,A,w&&h.upperLabelHeight);var R=f.getModel("emphasis"),P=R.get("focus"),L=R.get("blurScope"),D=R.get("disabled"),k=P==="ancestor"?o.getAncestorsIndices():P==="descendant"?o.getDescendantIndices():P;if(w)Km(M)&&cc(M,!1),A&&(cc(A,!D),c.setItemGraphicEl(o.dataIndex,A),KA(A,k,L));else{var F=X("content",h4,u,lPt);F&&V(M,F),A.disableMorphing=!0,A&&Km(A)&&cc(A,!1),cc(M,!D),c.setItemGraphicEl(o.dataIndex,M),KA(M,k,L)}return M;function B($,K,et){var W=Ft(K);if(W.dataIndex=o.dataIndex,W.seriesIndex=r.seriesIndex,K.setShape({x:0,y:0,width:d,height:g,r:C}),v)Y(K);else{K.invisible=!1;var Z=o.getVisual("style"),at=Z.stroke,O=g4(S);O.fill=at;var N=Zh(T);N.fill=T.get("borderColor");var H=Zh(b);H.fill=b.get("borderColor");var Q=Zh(E);if(Q.fill=E.get("borderColor"),et){var J=d-2*p;q(K,at,Z.opacity,{x:p,y:0,width:J,height:x})}else K.removeTextContent();K.setStyle(O),K.ensureState("emphasis").style=N,K.ensureState("blur").style=H,K.ensureState("select").style=Q,Wc(K)}$.add(K)}function V($,K){var et=Ft(K);et.dataIndex=o.dataIndex,et.seriesIndex=r.seriesIndex;var W=Math.max(d-2*p,0),Z=Math.max(g-2*p,0);if(K.culling=!0,K.setShape({x:p,y:p,width:W,height:Z,r:C}),v)Y(K);else{K.invisible=!1;var at=o.getVisual("style"),O=at.fill,N=g4(S);N.fill=O,N.decal=at.decal;var H=Zh(T),Q=Zh(b),J=Zh(E);q(K,O,at.opacity,null),K.setStyle(N),K.ensureState("emphasis").style=H,K.ensureState("blur").style=Q,K.ensureState("select").style=J,Wc(K)}$.add(K)}function Y($){!$.invisible&&a.push($)}function q($,K,et,W){var Z=f.getModel(W?d4:f4),at=Zr(f.get("name"),null),O=Z.getShallow("show");Nn($,hn(f,W?d4:f4),{defaultText:O?at:null,inheritColor:K,defaultOpacity:et,labelFetcher:r,labelDataIndex:o.dataIndex});var N=$.getTextContent();if(N){var H=N.style,Q=VP(H.padding||0);W&&($.setTextConfig({layoutRect:W}),N.disableLabelLayout=!0),N.beforeUpdate=function(){var ot=Math.max((W?W.width:$.shape.width)-Q[1]-Q[3],0),ct=Math.max((W?W.height:$.shape.height)-Q[0]-Q[2],0);(H.width!==ot||H.height!==ct)&&N.setStyle({width:ot,height:ct})},H.truncateMinChar=2,H.lineOverflow="truncate",lt(H,W,h);var J=N.getState("emphasis");lt(J?J.style:null,W,h)}}function lt($,K,et){var W=$?$.text:null;if(!K&&et.isLeafRoot&&W!=null){var Z=r.get("drillDownIcon",!0);$.text=Z?Z+" "+W:W}}function X($,K,et,W){var Z=y!=null&&e[$][y],at=i[$];return Z?(e[$][y]=null,St(at,Z)):v||(Z=new K,Z instanceof $a&&(Z.z2=cPt(et,W)),mt(at,Z)),t[$][m]=Z}function St($,K){var et=$[m]={};K instanceof PI?(et.oldX=K.x,et.oldY=K.y):et.oldShape=tt({},K.shape)}function mt($,K){var et=$[m]={},W=o.parentNode,Z=K instanceof Dt;if(W&&(!n||n.direction==="drillDown")){var at=0,O=0,N=i.background[W.getRawIndex()];!n&&N&&N.oldShape&&(at=N.oldShape.width,O=N.oldShape.height),Z?(et.oldX=0,et.oldY=O):et.oldShape={x:at,y:O,width:0,height:0}}et.fadein=!Z}}function cPt(r,t){return r*oPt+t}var hy=I,fPt=Rt,vS=-1,un=function(){function r(t){var e=t.mappingMethod,n=t.type,i=this.option=Pt(t);this.type=n,this.mappingMethod=e,this._normalizeData=pPt[e];var a=r.visualHandlers[n];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[e],e==="piecewise"?(cC(i),dPt(i)):e==="category"?i.categories?gPt(i):cC(i,!0):(xi(e!=="linear"||i.dataExtent),cC(i))}return r.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},r.prototype.getNormalizer=function(){return _t(this._normalizeData,this)},r.listVisualTypes=function(){return he(r.visualHandlers)},r.isValidType=function(t){return r.visualHandlers.hasOwnProperty(t)},r.eachVisual=function(t,e,n){Rt(t)?I(t,e,n):e.call(n,t)},r.mapVisual=function(t,e,n){var i,a=rt(t)?[]:Rt(t)?{}:(i=!0,null);return r.eachVisual(t,function(o,s){var l=e.call(n,o,s);i?a=l:a[s]=l}),a},r.retrieveVisuals=function(t){var e={},n;return t&&hy(r.visualHandlers,function(i,a){t.hasOwnProperty(a)&&(e[a]=t[a],n=!0)}),n?e:null},r.prepareVisualTypes=function(t){if(rt(t))t=t.slice();else if(fPt(t)){var e=[];hy(t,function(n,i){e.push(i)}),t=e}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},r.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e},r.findPieceIndex=function(t,e,n){for(var i,a=1/0,o=0,s=e.length;o<s;o++){var l=e[o].value;if(l!=null){if(l===t||yt(l)&&l===t+"")return o;n&&f(l,o)}}for(var o=0,s=e.length;o<s;o++){var u=e[o],h=u.interval,c=u.close;if(h){if(h[0]===-1/0){if(W_(c[1],t,h[1]))return o}else if(h[1]===1/0){if(W_(c[0],h[0],t))return o}else if(W_(c[0],h[0],t)&&W_(c[1],t,h[1]))return o;n&&f(h[0],o),n&&f(h[1],o)}}if(n)return t===1/0?e.length-1:t===-1/0?0:i;function f(d,g){var p=Math.abs(d-t);p<a&&(a=p,i=g)}},r.visualHandlers={color:{applyVisual:jp("color"),getColorMapper:function(){var t=this.option;return _t(t.mappingMethod==="category"?function(e,n){return!n&&(e=this._normalizeData(e)),wv.call(this,e)}:function(e,n,i){var a=!!i;return!n&&(e=this._normalizeData(e)),i=$b(e,t.parsedVisual,i),a?i:tl(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return tl($b(t,this.option.parsedVisual),"rgba")},category:wv,piecewise:function(t,e){var n=DI.call(this,e);return n==null&&(n=tl($b(t,this.option.parsedVisual),"rgba")),n},fixed:jh}},colorHue:U_(function(t,e){return jv(t,e)}),colorSaturation:U_(function(t,e){return jv(t,null,e)}),colorLightness:U_(function(t,e){return jv(t,null,null,e)}),colorAlpha:U_(function(t,e){return Vx(t,e)}),decal:{applyVisual:jp("decal"),_normalizedToVisual:{linear:null,category:wv,piecewise:null,fixed:null}},opacity:{applyVisual:jp("opacity"),_normalizedToVisual:LI([0,1])},liftZ:{applyVisual:jp("liftZ"),_normalizedToVisual:{linear:jh,category:jh,piecewise:jh,fixed:jh}},symbol:{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:p4,category:wv,piecewise:function(t,e){var n=DI.call(this,e);return n==null&&(n=p4.call(this,t)),n},fixed:jh}},symbolSize:{applyVisual:jp("symbolSize"),_normalizedToVisual:LI([0,1])}},r}();function dPt(r){var t=r.pieceList;r.hasSpecialVisual=!1,I(t,function(e,n){e.originIndex=n,e.visual!=null&&(r.hasSpecialVisual=!0)})}function gPt(r){var t=r.categories,e=r.categoryMap={},n=r.visual;if(hy(t,function(o,s){e[o]=s}),!rt(n)){var i=[];Rt(n)?hy(n,function(o,s){var l=e[s];i[l??vS]=o}):i[vS]=n,n=bZ(r,i)}for(var a=t.length-1;a>=0;a--)n[a]==null&&(delete e[t[a]],t.pop())}function cC(r,t){var e=r.visual,n=[];Rt(e)?hy(e,function(a){n.push(a)}):e!=null&&n.push(e);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(r.type)&&(n[1]=n[0]),bZ(r,n)}function U_(r){return{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);n("color",r(e("color"),i))},_normalizedToVisual:LI([0,1])}}function p4(r){var t=this.option.visual;return t[Math.round(Fe(r,[0,1],[0,t.length-1],!0))]||{}}function jp(r){return function(t,e,n){n(r,this.mapValueToVisual(t))}}function wv(r){var t=this.option.visual;return t[this.option.loop&&r!==vS?r%t.length:r]}function jh(){return this.option.visual[0]}function LI(r){return{linear:function(t){return Fe(t,r,this.option.visual,!0)},category:wv,piecewise:function(t,e){var n=DI.call(this,e);return n==null&&(n=Fe(t,r,this.option.visual,!0)),n},fixed:jh}}function DI(r){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var n=un.findPieceIndex(r,e),i=e[n];if(i&&i.visual)return i.visual[this.type]}}function bZ(r,t){return r.visual=t,r.type==="color"&&(r.parsedVisual=nt(t,function(e){var n=sa(e);return n||[0,0,0,1]})),t}var pPt={linear:function(r){return Fe(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var t=this.option.pieceList,e=un.findPieceIndex(r,t,!0);if(e!=null)return Fe(e,[0,t.length-1],[0,1],!0)},category:function(r){var t=this.option.categories?this.option.categoryMap[r]:r;return t??vS},fixed:Lr};function W_(r,t,e){return r?t<=e:t<e}var vPt="itemStyle",EZ=me();const mPt={seriesType:"treemap",reset:function(r){var t=r.getData().tree,e=t.root;e.isRemoved()||CZ(e,{},r.getViewRoot().getAncestors(),r)}};function CZ(r,t,e,n){var i=r.getModel(),a=r.getLayout(),o=r.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=i.getModel(vPt),l=yPt(s,t,n),u=o.ensureUniqueItemVisual(r.dataIndex,"style"),h=s.get("borderColor"),c=s.get("borderColorSaturation"),f;c!=null&&(f=v4(l),h=_Pt(c,f)),u.stroke=h;var d=r.viewChildren;if(!d||!d.length)f=v4(l),u.fill=f;else{var g=xPt(r,i,a,s,l,d);I(d,function(p,v){if(p.depth>=e.length||p===e[p.depth]){var m=SPt(i,l,p,v,g,n);CZ(p,m,e,n)}})}}}function yPt(r,t,e){var n=tt({},t),i=e.designatedVisualItemStyle;return I(["color","colorAlpha","colorSaturation"],function(a){i[a]=t[a];var o=r.get(a);i[a]=null,o!=null&&(n[a]=o)}),n}function v4(r){var t=fC(r,"color");if(t){var e=fC(r,"colorAlpha"),n=fC(r,"colorSaturation");return n&&(t=jv(t,null,null,n)),e&&(t=Vx(t,e)),t}}function _Pt(r,t){return t!=null?jv(t,null,null,r):null}function fC(r,t){var e=r[t];if(e!=null&&e!=="none")return e}function xPt(r,t,e,n,i,a){if(!(!a||!a.length)){var o=dC(t,"color")||i.color!=null&&i.color!=="none"&&(dC(t,"colorAlpha")||dC(t,"colorSaturation"));if(o){var s=t.get("visualMin"),l=t.get("visualMax"),u=e.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s),l!=null&&l>u[1]&&(u[1]=l);var h=t.get("colorMappingBy"),c={type:o.name,dataExtent:u,visual:o.range};c.type==="color"&&(h==="index"||h==="id")?(c.mappingMethod="category",c.loop=!0):c.mappingMethod="linear";var f=new un(c);return EZ(f).drColorMappingBy=h,f}}}function dC(r,t){var e=r.get(t);return rt(e)&&e.length?{name:t,range:e}:null}function SPt(r,t,e,n,i,a){var o=tt({},t);if(i){var s=i.type,l=s==="color"&&EZ(i).drColorMappingBy,u=l==="index"?n:l==="id"?a.mapIdToIndex(e.getId()):e.getValue(r.get("visualDimension"));o[s]=i.mapValueToVisual(u)}return o}var cy=Math.max,mS=Math.min,m4=Sn,rD=I,MZ=["itemStyle","borderWidth"],wPt=["itemStyle","gapWidth"],TPt=["upperLabel","show"],bPt=["upperLabel","height"];const EPt={seriesType:"treemap",reset:function(r,t,e,n){var i=e.getWidth(),a=e.getHeight(),o=r.option,s=qr(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),l=o.size||[],u=ft(m4(s.width,l[0]),i),h=ft(m4(s.height,l[1]),a),c=n&&n.type,f=["treemapZoomToNode","treemapRootToNode"],d=uy(n,f,r),g=c==="treemapRender"||c==="treemapMove"?n.rootRect:null,p=r.getViewRoot(),v=SZ(p);if(c!=="treemapMove"){var m=c==="treemapZoomToNode"?PPt(r,d,p,u,h):g?[g.width,g.height]:[u,h],y=o.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var _={squareRatio:o.squareRatio,sort:y,leafDepth:o.leafDepth};p.hostTree.clearLayouts();var x={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};p.setLayout(x),AZ(p,_,!1,0),x=p.getLayout(),rD(v,function(S,T){var b=(v[T+1]||p).getValue();S.setLayout(tt({dataExtent:[b,b],borderWidth:0,upperHeight:0},x))})}var w=r.getData().tree.root;w.setLayout(LPt(s,g,d),!0),r.setLayoutInfo(s),IZ(w,new jt(-s.x,-s.y,i,a),v,p,0)}};function AZ(r,t,e,n){var i,a;if(!r.isRemoved()){var o=r.getLayout();i=o.width,a=o.height;var s=r.getModel(),l=s.get(MZ),u=s.get(wPt)/2,h=RZ(s),c=Math.max(l,h),f=l-u,d=c-u;r.setLayout({borderWidth:l,upperHeight:c,upperLabelHeight:h},!0),i=cy(i-2*f,0),a=cy(a-f-d,0);var g=i*a,p=CPt(r,s,g,t,e,n);if(p.length){var v={x:f,y:d,width:i,height:a},m=mS(i,a),y=1/0,_=[];_.area=0;for(var x=0,w=p.length;x<w;){var S=p[x];_.push(S),_.area+=S.getLayout().area;var T=RPt(_,m,t.squareRatio);T<=y?(x++,y=T):(_.area-=_.pop().getLayout().area,y4(_,m,v,u,!1),m=mS(v.width,v.height),_.length=_.area=0,y=1/0)}if(_.length&&y4(_,m,v,u,!0),!e){var b=s.get("childrenVisibleMin");b!=null&&g<b&&(e=!0)}for(var x=0,w=p.length;x<w;x++)AZ(p[x],t,e,n+1)}}}function CPt(r,t,e,n,i,a){var o=r.children||[],s=n.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=n.leafDepth!=null&&n.leafDepth<=a;if(i&&!l)return r.viewChildren=[];o=ze(o,function(d){return!d.isRemoved()}),APt(o,s);var u=IPt(t,o,s);if(u.sum===0)return r.viewChildren=[];if(u.sum=MPt(t,e,u.sum,s,o),u.sum===0)return r.viewChildren=[];for(var h=0,c=o.length;h<c;h++){var f=o[h].getValue()/u.sum*e;o[h].setLayout({area:f})}return l&&(o.length&&r.setLayout({isLeafRoot:!0},!0),o.length=0),r.viewChildren=o,r.setLayout({dataExtent:u.dataExtent},!0),o}function MPt(r,t,e,n,i){if(!n)return e;for(var a=r.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var u=i[n==="asc"?o-l-1:l].getValue();u/e*t<a&&(s=l,e-=u)}return n==="asc"?i.splice(0,o-s):i.splice(s,o-s),e}function APt(r,t){return t&&r.sort(function(e,n){var i=t==="asc"?e.getValue()-n.getValue():n.getValue()-e.getValue();return i===0?t==="asc"?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:i}),r}function IPt(r,t,e){for(var n=0,i=0,a=t.length;i<a;i++)n+=t[i].getValue();var o=r.get("visualDimension"),s;return!t||!t.length?s=[NaN,NaN]:o==="value"&&e?(s=[t[t.length-1].getValue(),t[0].getValue()],e==="asc"&&s.reverse()):(s=[1/0,-1/0],rD(t,function(l){var u=l.getValue(o);u<s[0]&&(s[0]=u),u>s[1]&&(s[1]=u)})),{sum:n,dataExtent:s}}function RPt(r,t,e){for(var n=0,i=1/0,a=0,o=void 0,s=r.length;a<s;a++)o=r[a].getLayout().area,o&&(o<i&&(i=o),o>n&&(n=o));var l=r.area*r.area,u=t*t*e;return l?cy(u*n/l,l/(u*i)):1/0}function y4(r,t,e,n,i){var a=t===e.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=e[s[a]],h=t?r.area/t:0;(i||h>e[l[o]])&&(h=e[l[o]]);for(var c=0,f=r.length;c<f;c++){var d=r[c],g={},p=h?d.getLayout().area/h:0,v=g[l[o]]=cy(h-2*n,0),m=e[s[a]]+e[l[a]]-u,y=c===f-1||m<p?m:p,_=g[l[a]]=cy(y-2*n,0);g[s[o]]=e[s[o]]+mS(n,v/2),g[s[a]]=u+mS(n,_/2),u+=y,d.setLayout(g,!0)}e[s[o]]+=h,e[l[o]]-=h}function PPt(r,t,e,n,i){var a=(t||{}).node,o=[n,i];if(!a||a===e)return o;for(var s,l=n*i,u=l*r.option.zoomToNodeRatio;s=a.parentNode;){for(var h=0,c=s.children,f=0,d=c.length;f<d;f++)h+=c[f].getValue();var g=a.getValue();if(g===0)return o;u*=h/g;var p=s.getModel(),v=p.get(MZ),m=Math.max(v,RZ(p));u+=4*v*v+(3*v+m)*Math.pow(u,.5),u>P3&&(u=P3),a=s}u<l&&(u=l);var y=Math.pow(u/l,.5);return[n*y,i*y]}function LPt(r,t,e){if(t)return{x:t.x,y:t.y};var n={x:0,y:0};if(!e)return n;var i=e.node,a=i.getLayout();if(!a)return n;for(var o=[a.width/2,a.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:r.width/2-o[0],y:r.height/2-o[1]}}function IZ(r,t,e,n,i){var a=r.getLayout(),o=e[i],s=o&&o===r;if(!(o&&!s||i===e.length&&r!==n)){r.setLayout({isInView:!0,invisible:!s&&!t.intersect(a),isAboveViewRoot:s},!0);var l=new jt(t.x-a.x,t.y-a.y,t.width,t.height);rD(r.viewChildren||[],function(u){IZ(u,l,e,n,i+1)})}}function RZ(r){return r.get(TPt)?r.get(bPt):0}function DPt(r){r.registerSeriesModel(J2t),r.registerChartView(uPt),r.registerVisual(mPt),r.registerLayout(EPt),q2t(r)}function OPt(r){var t=r.findComponents({mainType:"legend"});!t||!t.length||r.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),i=e.getGraph(),a=i.data,o=n.mapArray(n.getName);a.filterSelf(function(s){var l=a.getItemModel(s),u=l.getShallow("category");if(u!=null){be(u)&&(u=o[u]);for(var h=0;h<t.length;h++)if(!t[h].isSelected(u))return!1}return!0})})}function NPt(r){var t={};r.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),i=e.getData(),a={};n.each(function(o){var s=n.getName(o);a["ec-"+s]=o;var l=n.getItemModel(o),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=e.getColorFromPalette(s,t)),n.setItemVisual(o,"style",u);for(var h=["symbol","symbolSize","symbolKeepAspect"],c=0;c<h.length;c++){var f=l.getShallow(h[c],!0);f!=null&&n.setItemVisual(o,h[c],f)}}),n.count()&&i.each(function(o){var s=i.getItemModel(o),l=s.getShallow("category");if(l!=null){yt(l)&&(l=a["ec-"+l]);var u=n.getItemVisual(l,"style"),h=i.ensureUniqueItemVisual(o,"style");tt(h,u);for(var c=["symbol","symbolSize","symbolKeepAspect"],f=0;f<c.length;f++)i.setItemVisual(o,c[f],n.getItemVisual(l,c[f]))}})})}function H_(r){return r instanceof Array||(r=[r,r]),r}function FPt(r){r.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),i=H_(t.get("edgeSymbol")),a=H_(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",a&&a[0]),n.setVisual("toSymbolSize",a&&a[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each(function(o){var s=n.getItemModel(o),l=e.getEdgeByIndex(o),u=H_(s.getShallow("symbol",!0)),h=H_(s.getShallow("symbolSize",!0)),c=s.getModel("lineStyle").getLineStyle(),f=n.ensureUniqueItemVisual(o,"style");switch(tt(f,c),f.stroke){case"source":{var d=l.node1.getVisual("style");f.stroke=d&&d.fill;break}case"target":{var d=l.node2.getVisual("style");f.stroke=d&&d.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),h[0]&&l.setVisual("fromSymbolSize",h[0]),h[1]&&l.setVisual("toSymbolSize",h[1])})})}var OI="-->",cT=function(r){return r.get("autoCurveness")||null},PZ=function(r,t){var e=cT(r),n=20,i=[];if(be(e))n=e;else if(rt(e)){r.__curvenessList=e;return}t>n&&(n=t);var a=n%2?n+2:n+3;i=[];for(var o=0;o<a;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));r.__curvenessList=i},fy=function(r,t,e){var n=[r.id,r.dataIndex].join("."),i=[t.id,t.dataIndex].join(".");return[e.uid,n,i].join(OI)},LZ=function(r){var t=r.split(OI);return[t[0],t[2],t[1]].join(OI)},kPt=function(r,t){var e=fy(r.node1,r.node2,t);return t.__edgeMap[e]},GPt=function(r,t){var e=NI(fy(r.node1,r.node2,t),t),n=NI(fy(r.node2,r.node1,t),t);return e+n},NI=function(r,t){var e=t.__edgeMap;return e[r]?e[r].length:0};function BPt(r){cT(r)&&(r.__curvenessList=[],r.__edgeMap={},PZ(r))}function zPt(r,t,e,n){if(cT(e)){var i=fy(r,t,e),a=e.__edgeMap,o=a[LZ(i)];a[i]&&!o?a[i].isForward=!0:o&&a[i]&&(o.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(n)}}function nD(r,t,e,n){var i=cT(t),a=rt(i);if(!i)return null;var o=kPt(r,t);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===e){s=l;break}var u=GPt(r,t);PZ(t,u),r.lineStyle=r.lineStyle||{};var h=fy(r.node1,r.node2,t),c=t.__curvenessList,f=a||u%2?0:1;if(o.isForward)return c[f+s];var d=LZ(h),g=NI(d,t),p=c[s+g+f];return n?a?i&&i[0]===0?(g+f)%2?p:-p:((g%2?0:1)+f)%2?p:-p:(g+f)%2?p:-p:c[s+g+f]}function DZ(r){var t=r.coordinateSystem;if(!(t&&t.type!=="view")){var e=r.getGraph();e.eachNode(function(n){var i=n.getModel();n.setLayout([+i.get("x"),+i.get("y")])}),iD(e,r)}}function iD(r,t){r.eachEdge(function(e,n){var i=os(e.getModel().get(["lineStyle","curveness"]),-nD(e,t,n,!0),0),a=Js(e.node1.getLayout()),o=Js(e.node2.getLayout()),s=[a,o];+i&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*i,(a[1]+o[1])/2-(o[0]-a[0])*i]),e.setLayout(s)})}function VPt(r,t){r.eachSeriesByType("graph",function(e){var n=e.get("layout"),i=e.coordinateSystem;if(i&&i.type!=="view"){var a=e.getData(),o=[];I(i.dimensions,function(f){o=o.concat(a.mapDimensionsAll(f))});for(var s=0;s<a.count();s++){for(var l=[],u=!1,h=0;h<o.length;h++){var c=a.get(o[h],s);isNaN(c)||(u=!0),l.push(c)}u?a.setItemLayout(s,i.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}iD(a.graph,e)}else(!n||n==="none")&&DZ(e)})}function Tv(r){var t=r.coordinateSystem;if(t.type!=="view")return 1;var e=r.option.nodeScaleRatio,n=t.scaleX,i=t.getZoom(),a=(i-1)*e+1;return a/n}function bv(r){var t=r.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var _4=Math.PI,gC=[];function aD(r,t,e,n){var i=r.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),o=r.getData(),s=o.graph,l=a.width/2+a.x,u=a.height/2+a.y,h=Math.min(a.width,a.height)/2,c=o.count();if(o.setLayout({cx:l,cy:u}),!!c){if(e){var f=i.pointToData(n),d=f[0],g=f[1],p=[d-l,g-u];Yg(p,p),S1(p,p,h),e.setLayout([l+p[0],u+p[1]],!0);var v=r.get(["circular","rotateLabel"]);OZ(e,v,l,u)}UPt[t](r,s,o,h,l,u,c),s.eachEdge(function(m,y){var _=os(m.getModel().get(["lineStyle","curveness"]),nD(m,r,y),0),x=Js(m.node1.getLayout()),w=Js(m.node2.getLayout()),S,T=(x[0]+w[0])/2,b=(x[1]+w[1])/2;+_&&(_*=3,S=[l*_+T*(1-_),u*_+b*(1-_)]),m.setLayout([x,w,S])})}}}var UPt={value:function(r,t,e,n,i,a,o){var s=0,l=e.getSum("value"),u=Math.PI*2/(l||o);t.eachNode(function(h){var c=h.getValue("value"),f=u*(l?c:1)/2;s+=f,h.setLayout([n*Math.cos(s)+i,n*Math.sin(s)+a]),s+=f})},symbolSize:function(r,t,e,n,i,a,o){var s=0;gC.length=o;var l=Tv(r);t.eachNode(function(c){var f=bv(c);isNaN(f)&&(f=2),f<0&&(f=0),f*=l;var d=Math.asin(f/2/n);isNaN(d)&&(d=_4/2),gC[c.dataIndex]=d,s+=d*2});var u=(2*_4-s)/o/2,h=0;t.eachNode(function(c){var f=u+gC[c.dataIndex];h+=f,(!c.getLayout()||!c.getLayout().fixed)&&c.setLayout([n*Math.cos(h)+i,n*Math.sin(h)+a]),h+=f})}};function OZ(r,t,e,n){var i=r.getGraphicEl();if(i){var a=r.getModel(),o=a.get(["label","rotate"])||0,s=i.getSymbolPath();if(t){var l=r.getLayout(),u=Math.atan2(l[1]-n,l[0]-e);u<0&&(u=Math.PI*2+u);var h=l[0]<e;h&&(u=u-Math.PI);var c=h?"left":"right";s.setTextConfig({rotation:-u,position:c,origin:"center"});var f=s.ensureState("emphasis");tt(f.textConfig||(f.textConfig={}),{position:c})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function WPt(r){r.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&aD(t,"symbolSize")})}var Bf=SA;function HPt(r,t,e){for(var n=r,i=t,a=e.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],u=e.gravity==null?.1:e.gravity,h=0;h<n.length;h++){var c=n[h];c.p||(c.p=ef(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),c.pp=Js(c.p),c.edges=null}var f=e.friction==null?.6:e.friction,d=f,g,p;return{warmUp:function(){d=f*.8},setFixed:function(v){n[v].fixed=!0},setUnfixed:function(v){n[v].fixed=!1},beforeStep:function(v){g=v},afterStep:function(v){p=v},step:function(v){g&&g(n,i);for(var m=[],y=n.length,_=0;_<i.length;_++){var x=i[_];if(!x.ignoreForceLayout){var w=x.n1,S=x.n2;uc(m,S.p,w.p);var T=wA(m)-x.d,b=S.w/(w.w+S.w);isNaN(b)&&(b=0),Yg(m,m),!w.fixed&&Bf(w.p,w.p,m,b*T*d),!S.fixed&&Bf(S.p,S.p,m,-(1-b)*T*d)}}for(var _=0;_<y;_++){var E=n[_];E.fixed||(uc(m,l,E.p),Bf(E.p,E.p,m,u*d))}for(var _=0;_<y;_++)for(var w=n[_],C=_+1;C<y;C++){var S=n[C];uc(m,S.p,w.p);var T=wA(m);T===0&&(xxt(m,Math.random()-.5,Math.random()-.5),T=1);var M=(w.rep+S.rep)/T/T;!w.fixed&&Bf(w.pp,w.pp,m,M),!S.fixed&&Bf(S.pp,S.pp,m,-M)}for(var A=[],_=0;_<y;_++){var E=n[_];E.fixed||(uc(A,E.p,E.pp),Bf(E.p,E.p,A,d),si(E.pp,E.p))}d=d*.992;var R=d<.01;p&&p(n,i,R),v&&v(R)}}}function $Pt(r){r.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view"))if(t.get("layout")==="force"){var n=t.preservedPoints||{},i=t.getGraph(),a=i.data,o=i.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?a.each(function(_){var x=a.getId(_);a.setItemLayout(_,n[x]||[NaN,NaN])}):!l||l==="none"?DZ(t):l==="circular"&&aD(t,"value");var u=a.getDataExtent("value"),h=o.getDataExtent("value"),c=s.get("repulsion"),f=s.get("edgeLength"),d=rt(c)?c:[c,c],g=rt(f)?f:[f,f];g=[g[1],g[0]];var p=a.mapArray("value",function(_,x){var w=a.getItemLayout(x),S=Fe(_,u,d);return isNaN(S)&&(S=(d[0]+d[1])/2),{w:S,rep:S,fixed:a.getItemModel(x).get("fixed"),p:!w||isNaN(w[0])||isNaN(w[1])?null:w}}),v=o.mapArray("value",function(_,x){var w=i.getEdgeByIndex(x),S=Fe(_,h,g);isNaN(S)&&(S=(g[0]+g[1])/2);var T=w.getModel(),b=os(w.getModel().get(["lineStyle","curveness"]),-nD(w,t,x,!0),0);return{n1:p[w.node1.dataIndex],n2:p[w.node2.dataIndex],d:S,curveness:b,ignoreForceLayout:T.get("ignoreForceLayout")}}),m=e.getBoundingRect(),y=HPt(p,v,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});y.beforeStep(function(_,x){for(var w=0,S=_.length;w<S;w++)_[w].fixed&&si(_[w].p,i.getNodeByIndex(w).getLayout())}),y.afterStep(function(_,x,w){for(var S=0,T=_.length;S<T;S++)_[S].fixed||i.getNodeByIndex(S).setLayout(_[S].p),n[a.getId(S)]=_[S].p;for(var S=0,T=x.length;S<T;S++){var b=x[S],E=i.getEdgeByIndex(S),C=b.n1.p,M=b.n2.p,A=E.getLayout();A=A?A.slice():[],A[0]=A[0]||[],A[1]=A[1]||[],si(A[0],C),si(A[1],M),+b.curveness&&(A[2]=[(C[0]+M[0])/2-(C[1]-M[1])*b.curveness,(C[1]+M[1])/2-(M[0]-C[0])*b.curveness]),E.setLayout(A)}}),t.forceLayout=y,t.preservedPoints=n,y.step()}else t.forceLayout=null})}function YPt(r,t,e){var n=tt(r.getBoxLayoutParams(),{aspect:e});return qr(n,{width:t.getWidth(),height:t.getHeight()})}function XPt(r,t){var e=[];return r.eachSeriesByType("graph",function(n){var i=n.get("coordinateSystem");if(!i||i==="view"){var a=n.getData(),o=a.mapArray(function(v){var m=a.getItemModel(v);return[+m.get("x"),+m.get("y")]}),s=[],l=[];Gw(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),h=YPt(n,t,u);isNaN(u)&&(s=[h.x,h.y],l=[h.x+h.width,h.y+h.height]);var c=l[0]-s[0],f=l[1]-s[1],d=h.width,g=h.height,p=n.coordinateSystem=new h0;p.zoomLimit=n.get("scaleLimit"),p.setBoundingRect(s[0],s[1],c,f),p.setViewRect(h.x,h.y,d,g),p.setCenter(n.get("center"),t),p.setZoom(n.get("zoom")),e.push(p)}}),e}var x4=sn.prototype,pC=jy.prototype,NZ=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}();(function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(NZ);function vC(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var ZPt=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new NZ},t.prototype.buildPath=function(e,n){vC(n)?x4.buildPath.call(this,e,n):pC.buildPath.call(this,e,n)},t.prototype.pointAt=function(e){return vC(this.shape)?x4.pointAt.call(this,e):pC.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var n=this.shape,i=vC(n)?[n.x2-n.x1,n.y2-n.y1]:pC.tangentAt.call(this,e);return Yg(i,i)},t}(ae),mC=["fromSymbol","toSymbol"];function S4(r){return"_"+r+"Type"}function w4(r,t,e){var n=t.getItemVisual(e,r);if(!n||n==="none")return n;var i=t.getItemVisual(e,r+"Size"),a=t.getItemVisual(e,r+"Rotate"),o=t.getItemVisual(e,r+"Offset"),s=t.getItemVisual(e,r+"KeepAspect"),l=ap(i),u=af(o||0,l);return n+l+u+(a||"")+(s||"")}function T4(r,t,e){var n=t.getItemVisual(e,r);if(!(!n||n==="none")){var i=t.getItemVisual(e,r+"Size"),a=t.getItemVisual(e,r+"Rotate"),o=t.getItemVisual(e,r+"Offset"),s=t.getItemVisual(e,r+"KeepAspect"),l=ap(i),u=af(o||0,l),h=Ur(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return h.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,h.name=r,h}}function jPt(r){var t=new ZPt({name:"line",subPixelOptimize:!0});return FI(t.shape,r),t}function FI(r,t){r.x1=t[0][0],r.y1=t[0][1],r.x2=t[1][0],r.y2=t[1][1],r.percent=1;var e=t[2];e?(r.cpx1=e[0],r.cpy1=e[1]):(r.cpx1=NaN,r.cpy1=NaN)}var oD=function(r){U(t,r);function t(e,n,i){var a=r.call(this)||this;return a._createLine(e,n,i),a}return t.prototype._createLine=function(e,n,i){var a=e.hostModel,o=e.getItemLayout(n),s=jPt(o);s.shape.percent=0,pr(s,{shape:{percent:1}},a,n),this.add(s),I(mC,function(l){var u=T4(l,e,n);this.add(u),this[S4(l)]=w4(l,e,n)},this),this._updateCommonStl(e,n,i)},t.prototype.updateData=function(e,n,i){var a=e.hostModel,o=this.childOfName("line"),s=e.getItemLayout(n),l={shape:{}};FI(l.shape,s),Ae(o,l,a,n),I(mC,function(u){var h=w4(u,e,n),c=S4(u);if(this[c]!==h){this.remove(this.childOfName(u));var f=T4(u,e,n);this.add(f)}this[c]=h},this),this._updateCommonStl(e,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,n,i){var a=e.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,h=i&&i.labelStatesModels,c=i&&i.emphasisDisabled,f=i&&i.focus,d=i&&i.blurScope;if(!i||e.hasItemOption){var g=e.getItemModel(n),p=g.getModel("emphasis");s=p.getModel("lineStyle").getLineStyle(),l=g.getModel(["blur","lineStyle"]).getLineStyle(),u=g.getModel(["select","lineStyle"]).getLineStyle(),c=p.get("disabled"),f=p.get("focus"),d=p.get("blurScope"),h=hn(g)}var v=e.getItemVisual(n,"style"),m=v.stroke;o.useStyle(v),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,I(mC,function(S){var T=this.childOfName(S);if(T){T.setColor(m),T.style.opacity=v.opacity;for(var b=0;b<Si.length;b++){var E=Si[b],C=o.getState(E);if(C){var M=C.style||{},A=T.ensureState(E),R=A.style||(A.style={});M.stroke!=null&&(R[T.__isEmptyBrush?"stroke":"fill"]=M.stroke),M.opacity!=null&&(R.opacity=M.opacity)}}T.markRedraw()}},this);var y=a.getRawValue(n);Nn(this,h,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,T){return a.getFormattedLabel(S,T,e.dataType)}},inheritColor:m||"#000",defaultOpacity:v.opacity,defaultText:(y==null?e.getName(n):isFinite(y)?Cr(y):y)+""});var _=this.getTextContent();if(_){var x=h.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=x.get("position")||"middle";var w=x.get("distance");rt(w)||(w=[w,w]),_.__labelDistance=w}this.setTextConfig({position:null,local:!0,inside:!1}),wr(this,f,d,c)},t.prototype.highlight=function(){ul(this)},t.prototype.downplay=function(){hl(this)},t.prototype.updateLayout=function(e,n){this.setLinePoints(e.getItemLayout(n))},t.prototype.setLinePoints=function(e){var n=this.childOfName("line");FI(n.shape,e),n.dirty()},t.prototype.beforeUpdate=function(){var e=this,n=e.childOfName("fromSymbol"),i=e.childOfName("toSymbol"),a=e.getTextContent();if(!n&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=e.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,h=l.pointAt(0),c=l.pointAt(u),f=uc([],c,h);Yg(f,f);function d(C,M){var A=C.__specifiedRotation;if(A==null){var R=l.tangentAt(M);C.attr("rotation",(M===1?-1:1)*Math.PI/2-Math.atan2(R[1],R[0]))}else C.attr("rotation",A)}if(n&&(n.setPosition(h),d(n,0),n.scaleX=n.scaleY=o*u,n.markRedraw()),i&&(i.setPosition(c),d(i,1),i.scaleX=i.scaleY=o*u,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var g=void 0,p=void 0,v=a.__labelDistance,m=v[0]*o,y=v[1]*o,_=u/2,x=l.tangentAt(_),w=[x[1],-x[0]],S=l.pointAt(_);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var T=x[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var b=-Math.atan2(x[1],x[0]);c[0]<h[0]&&(b=Math.PI+b),a.rotation=b}var E=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":E=-y,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":E=y,p="top";break;default:E=0,p="middle"}switch(a.__position){case"end":a.x=f[0]*m+c[0],a.y=f[1]*y+c[1],g=f[0]>.8?"left":f[0]<-.8?"right":"center",p=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":a.x=-f[0]*m+h[0],a.y=-f[1]*y+h[1],g=f[0]>.8?"right":f[0]<-.8?"left":"center",p=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=m*T+h[0],a.y=h[1]+E,g=x[0]<0?"right":"left",a.originX=-m*T,a.originY=-E;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=S[0],a.y=S[1]+E,g="center",a.originY=-E;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-m*T+c[0],a.y=c[1]+E,g=x[0]>=0?"right":"left",a.originX=m*T,a.originY=-E;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||p,align:a.__align||g})}},t}(Dt),sD=function(){function r(t){this.group=new Dt,this._LineCtor=t||oD}return r.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var n=this,i=n.group,a=n._lineData;n._lineData=t,a||i.removeAll();var o=b4(t);t.diff(a).add(function(s){e._doAdd(t,s,o)}).update(function(s,l){e._doUpdate(a,t,l,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},r.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=b4(t),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e){this._progressiveEls=[];function n(s){!s.isGroup&&!KPt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var a=e.getItemLayout(i);if(yC(a)){var o=new this._LineCtor(e,i,this._seriesScope);o.traverse(n),this.group.add(o),e.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(t){Qu(this._progressiveEls||this.group,t)},r.prototype._doAdd=function(t,e,n){var i=t.getItemLayout(e);if(yC(i)){var a=new this._LineCtor(t,e,n);t.setItemGraphicEl(e,a),this.group.add(a)}},r.prototype._doUpdate=function(t,e,n,i,a){var o=t.getItemGraphicEl(n);if(!yC(e.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(e,i,a):o=new this._LineCtor(e,i,a),e.setItemGraphicEl(i,o),this.group.add(o)},r}();function KPt(r){return r.animators&&r.animators.length>0}function b4(r){var t=r.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:hn(t)}}function E4(r){return isNaN(r[0])||isNaN(r[1])}function yC(r){return r&&!E4(r[0])&&!E4(r[1])}var _C=[],xC=[],SC=[],zf=vn,wC=wc,C4=Math.abs;function M4(r,t,e){for(var n=r[0],i=r[1],a=r[2],o=1/0,s,l=e*e,u=.1,h=.1;h<=.9;h+=.1){_C[0]=zf(n[0],i[0],a[0],h),_C[1]=zf(n[1],i[1],a[1],h);var c=C4(wC(_C,t)-l);c<o&&(o=c,s=h)}for(var f=0;f<32;f++){var d=s+u;xC[0]=zf(n[0],i[0],a[0],s),xC[1]=zf(n[1],i[1],a[1],s),SC[0]=zf(n[0],i[0],a[0],d),SC[1]=zf(n[1],i[1],a[1],d);var c=wC(xC,t)-l;if(C4(c)<.01)break;var g=wC(SC,t)-l;u/=2,c<0?g>=0?s=s+u:s=s-u:g>=0?s=s-u:s=s+u}return s}function TC(r,t){var e=[],n=Hm,i=[[],[],[]],a=[[],[]],o=[];t/=2,r.eachEdge(function(s,l){var u=s.getLayout(),h=s.getVisual("fromSymbol"),c=s.getVisual("toSymbol");u.__original||(u.__original=[Js(u[0]),Js(u[1])],u[2]&&u.__original.push(Js(u[2])));var f=u.__original;if(u[2]!=null){if(si(i[0],f[0]),si(i[1],f[2]),si(i[2],f[1]),h&&h!=="none"){var d=bv(s.node1),g=M4(i,f[0],d*t);n(i[0][0],i[1][0],i[2][0],g,e),i[0][0]=e[3],i[1][0]=e[4],n(i[0][1],i[1][1],i[2][1],g,e),i[0][1]=e[3],i[1][1]=e[4]}if(c&&c!=="none"){var d=bv(s.node2),g=M4(i,f[1],d*t);n(i[0][0],i[1][0],i[2][0],g,e),i[1][0]=e[1],i[2][0]=e[2],n(i[0][1],i[1][1],i[2][1],g,e),i[1][1]=e[1],i[2][1]=e[2]}si(u[0],i[0]),si(u[1],i[2]),si(u[2],i[1])}else{if(si(a[0],f[0]),si(a[1],f[1]),uc(o,a[1],a[0]),Yg(o,o),h&&h!=="none"){var d=bv(s.node1);SA(a[0],a[0],o,d*t)}if(c&&c!=="none"){var d=bv(s.node2);SA(a[1],a[1],o,-d*t)}si(u[0],a[0]),si(u[1],a[1])}})}function A4(r){return r.type==="view"}var qPt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,n){var i=new i0,a=new sD,o=this.group;this._controller=new u0(n.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},t.prototype.render=function(e,n,i){var a=this,o=e.coordinateSystem;this._model=e;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(A4(o)){var h={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(h):Ae(u,h,e)}TC(e.getGraph(),Tv(e));var c=e.getData();s.updateData(c);var f=e.getEdgeData();l.updateData(f),this._updateNodeAndLinkScale(),this._updateController(e,n,i),clearTimeout(this._layoutTimeout);var d=e.forceLayout,g=e.get(["force","layoutAnimation"]);d&&this._startForceLayoutIteration(d,g);var p=e.get("layout");c.graph.eachNode(function(_){var x=_.dataIndex,w=_.getGraphicEl(),S=_.getModel();if(w){w.off("drag").off("dragend");var T=S.get("draggable");T&&w.on("drag",function(E){switch(p){case"force":d.warmUp(),!a._layouting&&a._startForceLayoutIteration(d,g),d.setFixed(x),c.setItemLayout(x,[w.x,w.y]);break;case"circular":c.setItemLayout(x,[w.x,w.y]),_.setLayout({fixed:!0},!0),aD(e,"symbolSize",_,[E.offsetX,E.offsetY]),a.updateLayout(e);break;case"none":default:c.setItemLayout(x,[w.x,w.y]),iD(e.getGraph(),e),a.updateLayout(e);break}}).on("dragend",function(){d&&d.setUnfixed(x)}),w.setDraggable(T,!!S.get("cursor"));var b=S.get(["emphasis","focus"]);b==="adjacency"&&(Ft(w).focus=_.getAdjacentDataIndices())}}),c.graph.eachEdge(function(_){var x=_.getGraphicEl(),w=_.getModel().get(["emphasis","focus"]);x&&w==="adjacency"&&(Ft(x).focus={edge:[_.dataIndex],node:[_.node1.dataIndex,_.node2.dataIndex]})});var v=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),m=c.getLayout("cx"),y=c.getLayout("cy");c.graph.eachNode(function(_){OZ(_,v,m,y)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,n){var i=this;(function a(){e.step(function(o){i.updateLayout(i._model),(i._layouting=!o)&&(n?i._layoutTimeout=setTimeout(a,16):a())})})()},t.prototype._updateController=function(e,n,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(u,h,c){var f=l.getBoundingRect();return f.applyTransform(l.transform),f.contain(h,c)&&!lT(u,i,e)}),!A4(e.coordinateSystem)){o.disable();return}o.enable(e.get("roam")),s.zoomLimit=e.get("scaleLimit"),s.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){jL(s,u.dx,u.dy),i.dispatchAction({seriesId:e.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){KL(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(),TC(e.getGraph(),Tv(e)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,n=e.getData(),i=Tv(e);n.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(i)})},t.prototype.updateLayout=function(e){TC(e.getGraph(),Tv(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(Ke);function Vf(r){return"_EC_"+r}var JPt=function(){function r(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(t,e){t=t==null?""+e:""+t;var n=this._nodesMap;if(!n[Vf(t)]){var i=new Kh(t,e);return i.hostGraph=this,this.nodes.push(i),n[Vf(t)]=i,i}},r.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},r.prototype.getNodeById=function(t){return this._nodesMap[Vf(t)]},r.prototype.addEdge=function(t,e,n){var i=this._nodesMap,a=this._edgesMap;if(be(t)&&(t=this.nodes[t]),be(e)&&(e=this.nodes[e]),t instanceof Kh||(t=i[Vf(t)]),e instanceof Kh||(e=i[Vf(e)]),!(!t||!e)){var o=t.id+"-"+e.id,s=new FZ(t,e,n);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),e.inEdges.push(s)),t.edges.push(s),t!==e&&e.edges.push(s),this.edges.push(s),a[o]=s,s}},r.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},r.prototype.getEdge=function(t,e){t instanceof Kh&&(t=t.id),e instanceof Kh&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},r.prototype.eachNode=function(t,e){for(var n=this.nodes,i=n.length,a=0;a<i;a++)n[a].dataIndex>=0&&t.call(e,n[a],a)},r.prototype.eachEdge=function(t,e){for(var n=this.edges,i=n.length,a=0;a<i;a++)n[a].dataIndex>=0&&n[a].node1.dataIndex>=0&&n[a].node2.dataIndex>=0&&t.call(e,n[a],a)},r.prototype.breadthFirstTraverse=function(t,e,n,i){if(e instanceof Kh||(e=this._nodesMap[Vf(e)]),!!e){for(var a=n==="out"?"outEdges":n==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(i,e,null))for(var s=[e];s.length;)for(var l=s.shift(),u=l[a],o=0;o<u.length;o++){var h=u[o],c=h.node1===l?h.node2:h.node1;if(!c.__visited){if(t.call(i,c,l))return;s.push(c),c.__visited=!0}}}},r.prototype.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,a=0,o=n.length;a<o;a++)n[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)n[t.getRawIndex(a)].dataIndex=a;e.filterSelf(function(s){var l=i[e.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=e.count();a<o;a++)i[e.getRawIndex(a)].dataIndex=a},r.prototype.clone=function(){for(var t=new r(this._directed),e=this.nodes,n=this.edges,i=0;i<e.length;i++)t.addNode(e[i].id,e[i].dataIndex);for(var i=0;i<n.length;i++){var a=n[i];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t},r}(),Kh=function(){function r(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=e??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,n=e.data.getItemModel(this.dataIndex);return n.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var n=this.edges[e];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},r.prototype.getTrajectoryDataIndices=function(){for(var t=wt(),e=wt(),n=0;n<this.edges.length;n++){var i=this.edges[n];if(!(i.dataIndex<0)){t.set(i.dataIndex,!0);for(var a=[i.node1],o=[i.node2],s=0;s<a.length;){var l=a[s];s++,e.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)t.set(l.inEdges[u].dataIndex,!0),a.push(l.inEdges[u].node1)}for(s=0;s<o.length;){var h=o[s];s++,e.set(h.dataIndex,!0);for(var u=0;u<h.outEdges.length;u++)t.set(h.outEdges[u].dataIndex,!0),o.push(h.outEdges[u].node2)}}}return{edge:t.keys(),node:e.keys()}},r}(),FZ=function(){function r(t,e,n){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=n??-1}return r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,n=e.edgeData.getItemModel(this.dataIndex);return n.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var t=wt(),e=wt();t.set(this.dataIndex,!0);for(var n=[this.node1],i=[this.node2],a=0;a<n.length;){var o=n[a];a++,e.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)t.set(o.inEdges[s].dataIndex,!0),n.push(o.inEdges[s].node1)}for(a=0;a<i.length;){var l=i[a];a++,e.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)t.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:t.keys(),node:e.keys()}},r}();function kZ(r,t){return{getValue:function(e){var n=this[r][t];return n.getStore().get(n.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,n){this.dataIndex>=0&&this[r][t].setItemVisual(this.dataIndex,e,n)},getVisual:function(e){return this[r][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,n){this.dataIndex>=0&&this[r][t].setItemLayout(this.dataIndex,e,n)},getLayout:function(){return this[r][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][t].getRawIndex(this.dataIndex)}}}Hr(Kh,kZ("hostGraph","data"));Hr(FZ,kZ("hostGraph","edgeData"));function GZ(r,t,e,n,i){for(var a=new JPt(n),o=0;o<r.length;o++)a.addNode(Sn(r[o].id,r[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<t.length;o++){var h=t[o],c=h.source,f=h.target;a.addEdge(c,f,u)&&(l.push(h),s.push(Sn(Zr(h.id,null),c+" > "+f)),u++)}var d=e.get("coordinateSystem"),g;if(d==="cartesian2d"||d==="polar")g=Sl(r,e);else{var p=Qy.get(d),v=p?p.dimensions||[]:[];te(v,"value")<0&&v.concat(["value"]);var m=e0(r,{coordDimensions:v,encodeDefine:e.getEncode()}).dimensions;g=new vi(m,e),g.initData(r)}var y=new vi(["value"],e);return y.initData(l,s),i&&i(g,y),_Z({mainData:g,struct:a,structAttr:"graph",datas:{node:g,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var QPt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments);var n=this;function i(){return n._categoriesData}this.legendVisualProvider=new l0(i,i),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){r.prototype.mergeDefaultAndTheme.apply(this,arguments),zc(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,n){var i=e.edges||e.links||[],a=e.data||e.nodes||[],o=this;if(a&&i){BPt(this);var s=GZ(a,i,this,!0,l);return I(s.edges,function(u){zPt(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,h){u.wrapMethod("getItemModel",function(g){var p=o._categoriesModels,v=g.getShallow("category"),m=p[v];return m&&(m.parentModel=g.parentModel,g.parentModel=m),g});var c=Oe.prototype.getModel;function f(g,p){var v=c.call(this,g,p);return v.resolveParentPath=d,v}h.wrapMethod("getItemModel",function(g){return g.resolveParentPath=d,g.getModel=f,g});function d(g){if(g&&(g[0]==="label"||g[1]==="label")){var p=g.slice();return g[0]==="label"?p[0]="edgeLabel":g[1]==="label"&&(p[1]="edgeLabel"),p}return g}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,n,i){if(i==="edge"){var a=this.getData(),o=this.getDataParams(e,i),s=a.graph.getEdgeByIndex(e),l=a.getName(s.node1.dataIndex),u=a.getName(s.node2.dataIndex),h=[];return l!=null&&h.push(l),u!=null&&h.push(u),cn("nameValue",{name:h.join(" > "),value:o.value,noValue:o.value==null})}var c=lY({series:this,dataIndex:e,multipleSeries:n});return c},t.prototype._updateCategoriesData=function(){var e=nt(this.option.categories||[],function(i){return i.value!=null?i:tt({value:0},i)}),n=new vi(["value"],this);n.initData(e),this._categoriesData=n,this._categoriesModels=n.mapArray(function(i){return n.getItemModel(i)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(lr),tLt={type:"graphRoam",event:"graphRoam",update:"none"};function eLt(r){r.registerChartView(qPt),r.registerSeriesModel(QPt),r.registerProcessor(OPt),r.registerVisual(NPt),r.registerVisual(FPt),r.registerLayout(VPt),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,WPt),r.registerLayout($Pt),r.registerCoordinateSystem("graphView",{dimensions:h0.dimensions,create:XPt}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Lr),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Lr),r.registerAction(tLt,function(t,e,n){e.eachComponent({mainType:"series",query:t},function(i){var a=i.coordinateSystem,o=JL(a,t,void 0,n);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var rLt=function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r}(),nLt=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="pointer",n}return t.prototype.getDefaultShape=function(){return new rLt},t.prototype.buildPath=function(e,n){var i=Math.cos,a=Math.sin,o=n.r,s=n.width,l=n.angle,u=n.x-i(l)*s*(s>=o/3?1:2),h=n.y-a(l)*s*(s>=o/3?1:2);l=n.angle-Math.PI/2,e.moveTo(u,h),e.lineTo(n.x+i(l)*s,n.y+a(l)*s),e.lineTo(n.x+i(n.angle)*o,n.y+a(n.angle)*o),e.lineTo(n.x-i(l)*s,n.y-a(l)*s),e.lineTo(u,h)},t}(ae);function iLt(r,t){var e=r.get("center"),n=t.getWidth(),i=t.getHeight(),a=Math.min(n,i),o=ft(e[0],t.getWidth()),s=ft(e[1],t.getHeight()),l=ft(r.get("radius"),a/2);return{cx:o,cy:s,r:l}}function $_(r,t){var e=r==null?"":r+"";return t&&(yt(t)?e=t.replace("{value}",e):At(t)&&(e=t(r))),e}var aLt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){this.group.removeAll();var a=e.get(["axisLine","lineStyle","color"]),o=iLt(e,i);this._renderMain(e,n,i,a,o),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,n,i,a,o){var s=this.group,l=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,h=-e.get("endAngle")/180*Math.PI,c=e.getModel("axisLine"),f=c.get("roundCap"),d=f?fS:wi,g=c.get("show"),p=c.getModel("lineStyle"),v=p.get("width"),m=[u,h];QP(m,!l),u=m[0],h=m[1];for(var y=h-u,_=u,x=[],w=0;g&&w<a.length;w++){var S=Math.min(Math.max(a[w][0],0),1);h=u+y*S;var T=new d({shape:{startAngle:_,endAngle:h,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-v,r:o.r},silent:!0});T.setStyle({fill:a[w][1]}),T.setStyle(p.getLineStyle(["color","width"])),x.push(T),_=h}x.reverse(),I(x,function(E){return s.add(E)});var b=function(E){if(E<=0)return a[0][1];var C;for(C=0;C<a.length;C++)if(a[C][0]>=E&&(C===0?0:a[C-1][0])<E)return a[C][1];return a[C-1][1]};this._renderTicks(e,n,i,b,o,u,h,l,v),this._renderTitleAndDetail(e,n,i,b,o),this._renderAnchor(e,o),this._renderPointer(e,n,i,b,o,u,h,l,v)},t.prototype._renderTicks=function(e,n,i,a,o,s,l,u,h){for(var c=this.group,f=o.cx,d=o.cy,g=o.r,p=+e.get("min"),v=+e.get("max"),m=e.getModel("splitLine"),y=e.getModel("axisTick"),_=e.getModel("axisLabel"),x=e.get("splitNumber"),w=y.get("splitNumber"),S=ft(m.get("length"),g),T=ft(y.get("length"),g),b=s,E=(l-s)/x,C=E/w,M=m.getModel("lineStyle").getLineStyle(),A=y.getModel("lineStyle").getLineStyle(),R=m.get("distance"),P,L,D=0;D<=x;D++){if(P=Math.cos(b),L=Math.sin(b),m.get("show")){var k=R?R+h:h,F=new sn({shape:{x1:P*(g-k)+f,y1:L*(g-k)+d,x2:P*(g-S-k)+f,y2:L*(g-S-k)+d},style:M,silent:!0});M.stroke==="auto"&&F.setStyle({stroke:a(D/x)}),c.add(F)}if(_.get("show")){var k=_.get("distance")+R,B=$_(Cr(D/x*(v-p)+p),_.get("formatter")),V=a(D/x),Y=P*(g-S-k)+f,q=L*(g-S-k)+d,lt=_.get("rotate"),X=0;lt==="radial"?(X=-b+2*Math.PI,X>Math.PI/2&&(X+=Math.PI)):lt==="tangential"?X=-b-Math.PI/2:be(lt)&&(X=lt*Math.PI/180),X===0?c.add(new xe({style:sr(_,{text:B,x:Y,y:q,verticalAlign:L<-.8?"top":L>.8?"bottom":"middle",align:P<-.4?"left":P>.4?"right":"center"},{inheritColor:V}),silent:!0})):c.add(new xe({style:sr(_,{text:B,x:Y,y:q,verticalAlign:"middle",align:"center"},{inheritColor:V}),silent:!0,originX:Y,originY:q,rotation:X}))}if(y.get("show")&&D!==x){var k=y.get("distance");k=k?k+h:h;for(var St=0;St<=w;St++){P=Math.cos(b),L=Math.sin(b);var mt=new sn({shape:{x1:P*(g-k)+f,y1:L*(g-k)+d,x2:P*(g-T-k)+f,y2:L*(g-T-k)+d},silent:!0,style:A});A.stroke==="auto"&&mt.setStyle({stroke:a((D+St/w)/x)}),c.add(mt),b+=C}b-=C}else b+=E}},t.prototype._renderPointer=function(e,n,i,a,o,s,l,u,h){var c=this.group,f=this._data,d=this._progressEls,g=[],p=e.get(["pointer","show"]),v=e.getModel("progress"),m=v.get("show"),y=e.getData(),_=y.mapDimension("value"),x=+e.get("min"),w=+e.get("max"),S=[x,w],T=[s,l];function b(C,M){var A=y.getItemModel(C),R=A.getModel("pointer"),P=ft(R.get("width"),o.r),L=ft(R.get("length"),o.r),D=e.get(["pointer","icon"]),k=R.get("offsetCenter"),F=ft(k[0],o.r),B=ft(k[1],o.r),V=R.get("keepAspect"),Y;return D?Y=Ur(D,F-P/2,B-L,P,L,null,V):Y=new nLt({shape:{angle:-Math.PI/2,width:P,r:L,x:F,y:B}}),Y.rotation=-(M+Math.PI/2),Y.x=o.cx,Y.y=o.cy,Y}function E(C,M){var A=v.get("roundCap"),R=A?fS:wi,P=v.get("overlap"),L=P?v.get("width"):h/y.count(),D=P?o.r-L:o.r-(C+1)*L,k=P?o.r:o.r-C*L,F=new R({shape:{startAngle:s,endAngle:M,cx:o.cx,cy:o.cy,clockwise:u,r0:D,r:k}});return P&&(F.z2=w-y.get(_,C)%w),F}(m||p)&&(y.diff(f).add(function(C){var M=y.get(_,C);if(p){var A=b(C,s);pr(A,{rotation:-((isNaN(+M)?T[0]:Fe(M,S,T,!0))+Math.PI/2)},e),c.add(A),y.setItemGraphicEl(C,A)}if(m){var R=E(C,s),P=v.get("clip");pr(R,{shape:{endAngle:Fe(M,S,T,P)}},e),c.add(R),XA(e.seriesIndex,y.dataType,C,R),g[C]=R}}).update(function(C,M){var A=y.get(_,C);if(p){var R=f.getItemGraphicEl(M),P=R?R.rotation:s,L=b(C,P);L.rotation=P,Ae(L,{rotation:-((isNaN(+A)?T[0]:Fe(A,S,T,!0))+Math.PI/2)},e),c.add(L),y.setItemGraphicEl(C,L)}if(m){var D=d[M],k=D?D.shape.endAngle:s,F=E(C,k),B=v.get("clip");Ae(F,{shape:{endAngle:Fe(A,S,T,B)}},e),c.add(F),XA(e.seriesIndex,y.dataType,C,F),g[C]=F}}).execute(),y.each(function(C){var M=y.getItemModel(C),A=M.getModel("emphasis"),R=A.get("focus"),P=A.get("blurScope"),L=A.get("disabled");if(p){var D=y.getItemGraphicEl(C),k=y.getItemVisual(C,"style"),F=k.fill;if(D instanceof bn){var B=D.style;D.useStyle(tt({image:B.image,x:B.x,y:B.y,width:B.width,height:B.height},k))}else D.useStyle(k),D.type!=="pointer"&&D.setColor(F);D.setStyle(M.getModel(["pointer","itemStyle"]).getItemStyle()),D.style.fill==="auto"&&D.setStyle("fill",a(Fe(y.get(_,C),S,[0,1],!0))),D.z2EmphasisLift=0,On(D,M),wr(D,R,P,L)}if(m){var V=g[C];V.useStyle(y.getItemVisual(C,"style")),V.setStyle(M.getModel(["progress","itemStyle"]).getItemStyle()),V.z2EmphasisLift=0,On(V,M),wr(V,R,P,L)}}),this._progressEls=g)},t.prototype._renderAnchor=function(e,n){var i=e.getModel("anchor"),a=i.get("show");if(a){var o=i.get("size"),s=i.get("icon"),l=i.get("offsetCenter"),u=i.get("keepAspect"),h=Ur(s,n.cx-o/2+ft(l[0],n.r),n.cy-o/2+ft(l[1],n.r),o,o,null,u);h.z2=i.get("showAbove")?1:0,h.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(h)}},t.prototype._renderTitleAndDetail=function(e,n,i,a,o){var s=this,l=e.getData(),u=l.mapDimension("value"),h=+e.get("min"),c=+e.get("max"),f=new Dt,d=[],g=[],p=e.isAnimationEnabled(),v=e.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){d[m]=new xe({silent:!0}),g[m]=new xe({silent:!0})}).update(function(m,y){d[m]=s._titleEls[y],g[m]=s._detailEls[y]}).execute(),l.each(function(m){var y=l.getItemModel(m),_=l.get(u,m),x=new Dt,w=a(Fe(_,[h,c],[0,1],!0)),S=y.getModel("title");if(S.get("show")){var T=S.get("offsetCenter"),b=o.cx+ft(T[0],o.r),E=o.cy+ft(T[1],o.r),C=d[m];C.attr({z2:v?0:2,style:sr(S,{x:b,y:E,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:w})}),x.add(C)}var M=y.getModel("detail");if(M.get("show")){var A=M.get("offsetCenter"),R=o.cx+ft(A[0],o.r),P=o.cy+ft(A[1],o.r),L=ft(M.get("width"),o.r),D=ft(M.get("height"),o.r),k=e.get(["progress","show"])?l.getItemVisual(m,"style").fill:w,C=g[m],F=M.get("formatter");C.attr({z2:v?0:2,style:sr(M,{x:R,y:P,text:$_(_,F),width:isNaN(L)?null:L,height:isNaN(D)?null:D,align:"center",verticalAlign:"middle"},{inheritColor:k})}),f$(C,{normal:M},_,function(V){return $_(V,F)}),p&&d$(C,m,l,e,{getFormattedLabel:function(V,Y,q,lt,X,St){return $_(St?St.interpolatedValue:_,F)}}),x.add(C)}f.add(x)}),this.group.add(f),this._titleEls=d,this._detailEls=g},t.type="gauge",t}(Ke),oLt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="itemStyle",e}return t.prototype.getInitialData=function(e,n){return sp(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(lr);function sLt(r){r.registerChartView(aLt),r.registerSeriesModel(oLt)}var lLt=["itemStyle","opacity"],uLt=function(r){U(t,r);function t(e,n){var i=r.call(this)||this,a=i,o=new Ei,s=new xe;return a.setTextContent(s),i.setTextGuideLine(o),i.updateData(e,n,!0),i}return t.prototype.updateData=function(e,n,i){var a=this,o=e.hostModel,s=e.getItemModel(n),l=e.getItemLayout(n),u=s.getModel("emphasis"),h=s.get(lLt);h=h??1,i||xo(a),a.useStyle(e.getItemVisual(n,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,pr(a,{style:{opacity:h}},o,n)):Ae(a,{style:{opacity:h},shape:{points:l.points}},o,n),On(a,s),this._updateLabel(e,n),wr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,n){var i=this,a=this.getTextGuideLine(),o=i.getTextContent(),s=e.hostModel,l=e.getItemModel(n),u=e.getItemLayout(n),h=u.label,c=e.getItemVisual(n,"style"),f=c.fill;Nn(o,hn(l),{labelFetcher:e.hostModel,labelDataIndex:n,defaultOpacity:c.opacity,defaultText:e.getName(n)},{normal:{align:h.textAlign,verticalAlign:h.verticalAlign}}),i.setTextConfig({local:!0,inside:!!h.inside,insideStroke:f,outsideFill:f});var d=h.linePoints;a.setShape({points:d}),i.textGuideLineConfig={anchor:d?new $t(d[0][0],d[0][1]):null},Ae(o,{style:{x:h.x,y:h.y}},s,n),o.attr({rotation:h.rotation,originX:h.x,originY:h.y,z2:10}),GL(i,BL(l),{stroke:f})},t}(Ti),hLt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,n,i){var a=e.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var u=new uLt(a,l);a.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var h=o.getItemGraphicEl(u);h.updateData(a,l),s.add(h),a.setItemGraphicEl(l,h)}).remove(function(l){var u=o.getItemGraphicEl(l);qm(u,e,l)}).execute(),this._data=a},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(Ke),cLt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new l0(_t(this.getData,this),_t(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.getInitialData=function(e,n){return sp(this,{coordDimensions:["value"],encodeDefaulter:Wt(vL,this)})},t.prototype._defaultLabelLine=function(e){zc(e,"labelLine",["show"]);var n=e.labelLine,i=e.emphasis.labelLine;n.show=n.show&&e.label.show,i.show=i.show&&e.emphasis.label.show},t.prototype.getDataParams=function(e){var n=this.getData(),i=r.prototype.getDataParams.call(this,e),a=n.mapDimension("value"),o=n.getSum(a);return i.percent=o?+(n.get(a,e)/o*100).toFixed(2):0,i.$vars.push("percent"),i},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(lr);function fLt(r,t){return qr(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function dLt(r,t){for(var e=r.mapDimension("value"),n=r.mapArray(e,function(l){return l}),i=[],a=t==="ascending",o=0,s=r.count();o<s;o++)i[o]=o;return At(t)?i.sort(t):t!=="none"&&i.sort(function(l,u){return a?n[l]-n[u]:n[u]-n[l]}),i}function gLt(r){var t=r.hostModel,e=t.get("orient");r.each(function(n){var i=r.getItemModel(n),a=i.getModel("label"),o=a.get("position"),s=i.getModel("labelLine"),l=r.getItemLayout(n),u=l.points,h=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",c,f,d,g;if(h)o==="insideLeft"?(f=(u[0][0]+u[3][0])/2+5,d=(u[0][1]+u[3][1])/2,c="left"):o==="insideRight"?(f=(u[1][0]+u[2][0])/2-5,d=(u[1][1]+u[2][1])/2,c="right"):(f=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,d=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,c="center"),g=[[f,d],[f,d]];else{var p=void 0,v=void 0,m=void 0,y=void 0,_=s.get("length");o==="left"?(p=(u[3][0]+u[0][0])/2,v=(u[3][1]+u[0][1])/2,m=p-_,f=m-5,c="right"):o==="right"?(p=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,m=p+_,f=m+5,c="left"):o==="top"?(p=(u[3][0]+u[0][0])/2,v=(u[3][1]+u[0][1])/2,y=v-_,d=y-5,c="center"):o==="bottom"?(p=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,y=v+_,d=y+5,c="center"):o==="rightTop"?(p=e==="horizontal"?u[3][0]:u[1][0],v=e==="horizontal"?u[3][1]:u[1][1],e==="horizontal"?(y=v-_,d=y-5,c="center"):(m=p+_,f=m+5,c="top")):o==="rightBottom"?(p=u[2][0],v=u[2][1],e==="horizontal"?(y=v+_,d=y+5,c="center"):(m=p+_,f=m+5,c="bottom")):o==="leftTop"?(p=u[0][0],v=e==="horizontal"?u[0][1]:u[1][1],e==="horizontal"?(y=v-_,d=y-5,c="center"):(m=p-_,f=m-5,c="right")):o==="leftBottom"?(p=e==="horizontal"?u[1][0]:u[3][0],v=e==="horizontal"?u[1][1]:u[2][1],e==="horizontal"?(y=v+_,d=y+5,c="center"):(m=p-_,f=m-5,c="right")):(p=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,e==="horizontal"?(y=v+_,d=y+5,c="center"):(m=p+_,f=m+5,c="left")),e==="horizontal"?(m=p,f=m):(y=v,d=y),g=[[p,v],[m,y]]}l.label={linePoints:g,x:f,y:d,verticalAlign:"middle",textAlign:c,inside:h}})}function pLt(r,t){r.eachSeriesByType("funnel",function(e){var n=e.getData(),i=n.mapDimension("value"),a=e.get("sort"),o=fLt(e,t),s=e.get("orient"),l=o.width,u=o.height,h=dLt(n,a),c=o.x,f=o.y,d=s==="horizontal"?[ft(e.get("minSize"),u),ft(e.get("maxSize"),u)]:[ft(e.get("minSize"),l),ft(e.get("maxSize"),l)],g=n.getDataExtent(i),p=e.get("min"),v=e.get("max");p==null&&(p=Math.min(g[0],0)),v==null&&(v=g[1]);var m=e.get("funnelAlign"),y=e.get("gap"),_=s==="horizontal"?l:u,x=(_-y*(n.count()-1))/n.count(),w=function(P,L){if(s==="horizontal"){var D=n.get(i,P)||0,k=Fe(D,[p,v],d,!0),F=void 0;switch(m){case"top":F=f;break;case"center":F=f+(u-k)/2;break;case"bottom":F=f+(u-k);break}return[[L,F],[L,F+k]]}var B=n.get(i,P)||0,V=Fe(B,[p,v],d,!0),Y;switch(m){case"left":Y=c;break;case"center":Y=c+(l-V)/2;break;case"right":Y=c+l-V;break}return[[Y,L],[Y+V,L]]};a==="ascending"&&(x=-x,y=-y,s==="horizontal"?c+=l:f+=u,h=h.reverse());for(var S=0;S<h.length;S++){var T=h[S],b=h[S+1],E=n.getItemModel(T);if(s==="horizontal"){var C=E.get(["itemStyle","width"]);C==null?C=x:(C=ft(C,l),a==="ascending"&&(C=-C));var M=w(T,c),A=w(b,c+C);c+=C+y,n.setItemLayout(T,{points:M.concat(A.slice().reverse())})}else{var R=E.get(["itemStyle","height"]);R==null?R=x:(R=ft(R,u),a==="ascending"&&(R=-R));var M=w(T,f),A=w(b,f+R);f+=R+y,n.setItemLayout(T,{points:M.concat(A.slice().reverse())})}}gLt(n)})}function vLt(r){r.registerChartView(hLt),r.registerSeriesModel(cLt),r.registerLayout(pLt),r.registerProcessor(s0("funnel"))}var mLt=.3,yLt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._dataGroup=new Dt,e._initialized=!1,e}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,n,i,a){this._progressiveEls=null;var o=this._dataGroup,s=e.getData(),l=this._data,u=e.coordinateSystem,h=u.dimensions,c=R4(e);s.diff(l).add(f).update(d).remove(g).execute();function f(v){var m=I4(s,o,v,h,u);bC(m,s,v,c)}function d(v,m){var y=l.getItemGraphicEl(m),_=BZ(s,v,h,u);s.setItemGraphicEl(v,y),Ae(y,{shape:{points:_}},e,v),xo(y),bC(y,s,v,c)}function g(v){var m=l.getItemGraphicEl(v);o.remove(m)}if(!this._initialized){this._initialized=!0;var p=_Lt(u,e,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(p)}this._data=s},t.prototype.incrementalPrepareRender=function(e,n,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,n,i){for(var a=n.getData(),o=n.coordinateSystem,s=o.dimensions,l=R4(n),u=this._progressiveEls=[],h=e.start;h<e.end;h++){var c=I4(a,this._dataGroup,h,s,o);c.incremental=!0,bC(c,a,h,l),u.push(c)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(Ke);function _Lt(r,t,e){var n=r.model,i=r.getRect(),a=new ve({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o=n.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),pr(a,{shape:{width:i.width,height:i.height}},t,e),a}function BZ(r,t,e,n){for(var i=[],a=0;a<e.length;a++){var o=e[a],s=r.get(r.mapDimension(o),t);xLt(s,n.getAxis(o).type)||i.push(n.dataToPoint(s,o))}return i}function I4(r,t,e,n,i){var a=BZ(r,e,n,i),o=new Ei({shape:{points:a},z2:10});return t.add(o),r.setItemGraphicEl(e,o),o}function R4(r){var t=r.get("smooth",!0);return t===!0&&(t=mLt),t=ll(t),Wm(t)&&(t=0),{smooth:t}}function bC(r,t,e,n){r.useStyle(t.getItemVisual(e,"style")),r.style.fill=null,r.setShape("smooth",n.smooth);var i=t.getItemModel(e),a=i.getModel("emphasis");On(r,i,"lineStyle"),wr(r,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function xLt(r,t){return t==="category"?r==null:r==null||isNaN(r)}var SLt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.getInitialData=function(e,n){return Sl(null,this,{useEncodeDefaulter:_t(wLt,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var n=this.coordinateSystem,i=this.getData(),a=[];return n.eachActiveState(i,function(o,s){e===o&&a.push(i.getRawIndex(s))}),a},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(lr);function wLt(r){var t=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(t){var e={};return I(t.dimensions,function(n){var i=TLt(n);e[n]=i}),e}}function TLt(r){return+r.replace("dim","")}var bLt=["lineStyle","opacity"],ELt={seriesType:"parallel",reset:function(r,t){var e=r.coordinateSystem,n={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(i,a){e.eachActiveState(a,function(o,s){var l=n[o];if(o==="normal"&&a.hasItemOption){var u=a.getItemModel(s).get(bLt,!0);u!=null&&(l=u)}var h=a.ensureUniqueItemVisual(s,"style");h.opacity=l},i.start,i.end)}}}};function CLt(r){MLt(r),ALt(r)}function MLt(r){if(!r.parallel){var t=!1;I(r.series,function(e){e&&e.type==="parallel"&&(t=!0)}),t&&(r.parallel=[{}])}}function ALt(r){var t=Ye(r.parallelAxis);I(t,function(e){if(Rt(e)){var n=e.parallelIndex||0,i=Ye(r.parallel)[n];i&&i.parallelAxisDefault&&Zt(e,i.parallelAxisDefault,!1)}})}var ILt=5,RLt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){this._model=e,this._api=i,this._handlers||(this._handlers={},I(PLt,function(a,o){i.getZr().on(o,this._handlers[o]=_t(a,this))},this)),ip(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,n){ey(this,"_throttledDispatchExpand"),I(this._handlers,function(i,a){n.getZr().off(a,i)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(tt({type:"parallelAxisExpand"},e))},t.type="parallel",t}(yr),PLt={mousedown:function(r){EC(this,"click")&&(this._mouseDownPoint=[r.offsetX,r.offsetY])},mouseup:function(r){var t=this._mouseDownPoint;if(EC(this,"click")&&t){var e=[r.offsetX,r.offsetY],n=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);if(n>ILt)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(r){if(!(this._mouseDownPoint||!EC(this,"mousemove"))){var t=this._model,e=t.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]),n=e.behavior;n==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(n==="none"?null:{axisExpandWindow:e.axisExpandWindow,animation:n==="jump"?null:{duration:0}})}}};function EC(r,t){var e=r._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===t}var LLt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){var n=this.option;e&&Zt(n,e,!0),this._initDimensions()},t.prototype.contains=function(e,n){var i=e.get("parallelIndex");return i!=null&&n.getComponent("parallel",i)===this},t.prototype.setAxisExpand=function(e){I(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(n){e.hasOwnProperty(n)&&(this.option[n]=e[n])},this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],n=this.parallelAxisIndex=[],i=ze(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);I(i,function(a){e.push("dim"+a.get("dim")),n.push(a.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(ue),DLt=function(r){U(t,r);function t(e,n,i,a,o){var s=r.call(this,e,n,i)||this;return s.type=a||"value",s.axisIndex=o,s}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(wo);function uf(r,t,e,n,i,a){r=r||0;var o=e[1]-e[0];if(i!=null&&(i=Uf(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=Uf(s,[0,o]),i=a=Uf(s,[i,a]),n=0}t[0]=Uf(t[0],e),t[1]=Uf(t[1],e);var l=CC(t,n);t[n]+=r;var u=i||0,h=e.slice();l.sign<0?h[0]+=u:h[1]-=u,t[n]=Uf(t[n],h);var c;return c=CC(t,n),i!=null&&(c.sign!==l.sign||c.span<i)&&(t[1-n]=t[n]+l.sign*i),c=CC(t,n),a!=null&&c.span>a&&(t[1-n]=t[n]+c.sign*a),t}function CC(r,t){var e=r[t]-r[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function Uf(r,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,r))}var MC=I,zZ=Math.min,VZ=Math.max,P4=Math.floor,OLt=Math.ceil,L4=Cr,NLt=Math.PI,FLt=function(){function r(t,e,n){this.type="parallel",this._axesMap=wt(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}return r.prototype._init=function(t,e,n){var i=t.dimensions,a=t.parallelAxisIndex;MC(i,function(o,s){var l=a[s],u=e.getComponent("parallelAxis",l),h=this._axesMap.set(o,new DLt(o,oT(u),[0,0],u.get("type"),l)),c=h.type==="category";h.onBand=c&&u.get("boundaryGap"),h.inverse=u.get("inverse"),u.axis=h,h.model=u,h.coordinateSystem=u.coordinateSystem=this},this)},r.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},r.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,a=e.pixelDimIndex,o=t[1-a],s=t[a];return o>=n&&o<=n+e.axisLength&&s>=i&&s<=i+e.layoutLength},r.prototype.getModel=function(){return this._model},r.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var i=n.getData();MC(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),_g(o.scale,o.model)},this)}},this)},r.prototype.resize=function(t,e){this._rect=qr(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},r.prototype.getRect=function(){return this._rect},r.prototype._makeLayoutInfo=function(){var t=this._model,e=this._rect,n=["x","y"],i=["width","height"],a=t.get("layout"),o=a==="horizontal"?0:1,s=e[i[o]],l=[0,s],u=this.dimensions.length,h=Y_(t.get("axisExpandWidth"),l),c=Y_(t.get("axisExpandCount")||0,[0,u]),f=t.get("axisExpandable")&&u>3&&u>c&&c>1&&h>0&&s>0,d=t.get("axisExpandWindow"),g;if(d)g=Y_(d[1]-d[0],l),d[1]=d[0]+g;else{g=Y_(h*(c-1),l);var p=t.get("axisExpandCenter")||P4(u/2);d=[h*p-g/2],d[1]=d[0]+g}var v=(s-g)/(u-c);v<3&&(v=0);var m=[P4(L4(d[0]/h,1))+1,OLt(L4(d[1]/h,1))-1],y=v/h*d[0];return{layout:a,pixelDimIndex:o,layoutBase:e[n[o]],layoutLength:s,axisBase:e[n[1-o]],axisLength:e[i[1-o]],axisExpandable:f,axisExpandWidth:h,axisCollapseWidth:v,axisExpandWindow:d,axisCount:u,winInnerIndices:m,axisExpandWindow0Pos:y}},r.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;e.each(function(o){var s=[0,i.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),MC(n,function(o,s){var l=(i.axisExpandable?GLt:kLt)(s,i),u={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},h={horizontal:NLt/2,vertical:0},c=[u[a].x+t.x,u[a].y+t.y],f=h[a],d=oa();rf(d,d,f),fs(d,d,c),this._axesLayout[o]={position:c,rotation:f,transform:d,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},r.prototype.getAxis=function(t){return this._axesMap.get(t)},r.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},r.prototype.eachActiveState=function(t,e,n,i){n==null&&(n=0),i==null&&(i=t.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];I(o,function(v){s.push(t.mapDimension(v)),l.push(a.get(v).model)});for(var u=this.hasAxisBrushed(),h=n;h<i;h++){var c=void 0;if(!u)c="normal";else{c="active";for(var f=t.getValues(s,h),d=0,g=o.length;d<g;d++){var p=l[d].getActiveState(f[d]);if(p==="inactive"){c="inactive";break}}}e(c,h)}},r.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,a=t.length;i<a;i++)e.get(t[i]).model.getActiveState()!=="normal"&&(n=!0);return n},r.prototype.axisCoordToPoint=function(t,e){var n=this._axesLayout[e];return fo([t,0],n.transform)},r.prototype.getAxisLayout=function(t){return Pt(this._axesLayout[t])},r.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l,u="slide",h=e.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),f=c[0]!=null;if(h)f&&h&&s<a*c[0]?(u="jump",l=s-a*c[2]):f&&h&&s>a*(1-c[0])?(u="jump",l=s-a*(1-c[2])):(l=s-a*c[1])>=0&&(l=s-a*(1-c[1]))<=0&&(l=0),l*=e.axisExpandWidth/h,l?uf(l,i,o,"all"):u="none";else{var d=i[1]-i[0],g=o[1]*s/d;i=[VZ(0,g-d/2)],i[1]=zZ(o[1],i[0]+d),i[0]=i[1]-d}return{axisExpandWindow:i,behavior:u}},r}();function Y_(r,t){return zZ(VZ(r,t[0]),t[1])}function kLt(r,t){var e=t.layoutLength/(t.axisCount-1);return{position:e*r,axisNameAvailableWidth:e,axisLabelShow:!0}}function GLt(r,t){var e=t.layoutLength,n=t.axisExpandWidth,i=t.axisCount,a=t.axisCollapseWidth,o=t.winInnerIndices,s,l=a,u=!1,h;return r<o[0]?(s=r*a,h=a):r<=o[1]?(s=t.axisExpandWindow0Pos+r*n-t.axisExpandWindow[0],l=n,u=!0):(s=e-(i-1-r)*a,h=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:h}}function BLt(r,t){var e=[];return r.eachComponent("parallel",function(n,i){var a=new FLt(n,r,t);a.name="parallel_"+i,a.resize(n,t),n.coordinateSystem=a,a.model=n,e.push(a)}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="parallel"){var i=n.getReferringComponents("parallel",Br).models[0];n.coordinateSystem=i.coordinateSystem}}),e}var zLt={create:BLt},kI=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.activeIntervals=[],e}return t.prototype.getAreaSelectStyle=function(){return Uc([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var n=this.activeIntervals=Pt(e);if(n)for(var i=n.length-1;i>=0;i--)Ga(n[i])},t.prototype.getActiveState=function(e){var n=this.activeIntervals;if(!n.length)return"normal";if(e==null||isNaN(+e))return"inactive";if(n.length===1){var i=n[0];if(i[0]<=e&&e<=i[1])return"active"}else for(var a=0,o=n.length;a<o;a++)if(n[a][0]<=e&&e<=n[a][1])return"active";return"inactive"},t}(ue);Hr(kI,r0);var $c=!0,dy=Math.min,wg=Math.max,VLt=Math.pow,ULt=1e4,WLt=6,HLt=6,D4="globalPan",$Lt={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},YLt={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},O4={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},XLt=0,lD=function(r){U(t,r);function t(e){var n=r.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new Dt,n._uid="brushController_"+XLt++,I(tDt,function(i,a){this._handlers[a]=_t(i,this)},n),n}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var n=this._zr;this._enableGlobalPan||kRt(n,D4,this._uid),I(this._handlers,function(i,a){n.on(a,i)}),this._brushType=e.brushType,this._brushOption=Zt(Pt(O4),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;GRt(e,D4,this._uid),I(this._handlers,function(n,i){e.off(i,n)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var n=this._panels={};I(e,function(i){n[i.panelId]=Pt(i)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=n.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=nt(e,function(f){return Zt(Pt(O4),f,!0)});var n="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new cl(i,e,u,l).add(h).update(h).remove(c).execute(),this;function l(f,d){return(f.id!=null?f.id:n+d)+"-"+f.brushType}function u(f,d){return l(f.__brushOption,d)}function h(f,d){var g=e[f];if(d!=null&&i[d]===s)a[f]=i[d];else{var p=a[f]=d!=null?(i[d].__brushOption=g,i[d]):WZ(o,UZ(o,g));uD(o,p)}}function c(f){i[f]!==s&&o.group.remove(i[f])}},t.prototype.unmount=function(){return this.enableBrush(!1),GI(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Za);function UZ(r,t){var e=fT[t.brushType].createCover(r,t);return e.__brushOption=t,$Z(e,t),r.group.add(e),e}function WZ(r,t){var e=hD(t);return e.endCreating&&(e.endCreating(r,t),$Z(t,t.__brushOption)),t}function HZ(r,t){var e=t.__brushOption;hD(t).updateCoverShape(r,t,e.range,e)}function $Z(r,t){var e=t.z;e==null&&(e=ULt),r.traverse(function(n){n.z=e,n.z2=e})}function uD(r,t){hD(t).updateCommon(r,t),HZ(r,t)}function hD(r){return fT[r.__brushOption.brushType]}function cD(r,t,e){var n=r._panels;if(!n)return $c;var i,a=r._transform;return I(n,function(o){o.isTargetByCursor(t,e,a)&&(i=o)}),i}function YZ(r,t){var e=r._panels;if(!e)return $c;var n=t.__brushOption.panelId;return n!=null?e[n]:$c}function GI(r){var t=r._covers,e=t.length;return I(t,function(n){r.group.remove(n)},r),t.length=0,!!e}function Yc(r,t){var e=nt(r._covers,function(n){var i=n.__brushOption,a=Pt(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});r.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function ZLt(r){var t=r._track;if(!t.length)return!1;var e=t[t.length-1],n=t[0],i=e[0]-n[0],a=e[1]-n[1],o=VLt(i*i+a*a,.5);return o>WLt}function XZ(r){var t=r.length-1;return t<0&&(t=0),[r[0],r[t]]}function ZZ(r,t,e,n){var i=new Dt;return i.add(new ve({name:"main",style:fD(e),silent:!0,draggable:!0,cursor:"move",drift:Wt(N4,r,t,i,["n","s","w","e"]),ondragend:Wt(Yc,t,{isEnd:!0})})),I(n,function(a){i.add(new ve({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Wt(N4,r,t,i,a),ondragend:Wt(Yc,t,{isEnd:!0})}))}),i}function jZ(r,t,e,n){var i=n.brushStyle.lineWidth||0,a=wg(i,HLt),o=e[0][0],s=e[1][0],l=o-i/2,u=s-i/2,h=e[0][1],c=e[1][1],f=h-a+i/2,d=c-a+i/2,g=h-o,p=c-s,v=g+i,m=p+i;Rs(r,t,"main",o,s,g,p),n.transformable&&(Rs(r,t,"w",l,u,a,m),Rs(r,t,"e",f,u,a,m),Rs(r,t,"n",l,u,v,a),Rs(r,t,"s",l,d,v,a),Rs(r,t,"nw",l,u,a,a),Rs(r,t,"ne",f,u,a,a),Rs(r,t,"sw",l,d,a,a),Rs(r,t,"se",f,d,a,a))}function BI(r,t){var e=t.__brushOption,n=e.transformable,i=t.childAt(0);i.useStyle(fD(e)),i.attr({silent:!n,cursor:n?"move":"default"}),I([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=t.childOfName(a.join("")),s=a.length===1?zI(r,a[0]):KLt(r,a);o&&o.attr({silent:!n,invisible:!n,cursor:n?YLt[s]+"-resize":null})})}function Rs(r,t,e,n,i,a,o){var s=t.childOfName(e);s&&s.setShape(JLt(dD(r,t,[[n,i],[n+a,i+o]])))}function fD(r){return It({strokeNoScale:!0},r.brushStyle)}function KZ(r,t,e,n){var i=[dy(r,e),dy(t,n)],a=[wg(r,e),wg(t,n)];return[[i[0],a[0]],[i[1],a[1]]]}function jLt(r){return Mc(r.group)}function zI(r,t){var e={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},i=Hw(e[t],jLt(r));return n[i]}function KLt(r,t){var e=[zI(r,t[0]),zI(r,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function N4(r,t,e,n,i,a){var o=e.__brushOption,s=r.toRectRange(o.range),l=qZ(t,i,a);I(n,function(u){var h=$Lt[u];s[h[0]][h[1]]+=l[h[0]]}),o.range=r.fromRectRange(KZ(s[0][0],s[1][0],s[0][1],s[1][1])),uD(t,e),Yc(t,{isEnd:!1})}function qLt(r,t,e,n){var i=t.__brushOption.range,a=qZ(r,e,n);I(i,function(o){o[0]+=a[0],o[1]+=a[1]}),uD(r,t),Yc(r,{isEnd:!1})}function qZ(r,t,e){var n=r.group,i=n.transformCoordToLocal(t,e),a=n.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function dD(r,t,e){var n=YZ(r,t);return n&&n!==$c?n.clipPath(e,r._transform):Pt(e)}function JLt(r){var t=dy(r[0][0],r[1][0]),e=dy(r[0][1],r[1][1]),n=wg(r[0][0],r[1][0]),i=wg(r[0][1],r[1][1]);return{x:t,y:e,width:n-t,height:i-e}}function QLt(r,t,e){if(!(!r._brushType||eDt(r,t.offsetX,t.offsetY))){var n=r._zr,i=r._covers,a=cD(r,t,e);if(!r._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===$c||s.panelId===a.panelId)&&fT[s.brushType].contain(i[o],e[0],e[1]))return}a&&n.setCursorStyle("crosshair")}}function VI(r){var t=r.event;t.preventDefault&&t.preventDefault()}function UI(r,t,e){return r.childOfName("main").contain(t,e)}function JZ(r,t,e,n){var i=r._creatingCover,a=r._creatingPanel,o=r._brushOption,s;if(r._track.push(e.slice()),ZLt(r)||i){if(a&&!i){o.brushMode==="single"&&GI(r);var l=Pt(o);l.brushType=F4(l.brushType,a),l.panelId=a===$c?null:a.panelId,i=r._creatingCover=UZ(r,l),r._covers.push(i)}if(i){var u=fT[F4(r._brushType,a)],h=i.__brushOption;h.range=u.getCreatingRange(dD(r,i,r._track)),n&&(WZ(r,i),u.updateCommon(r,i)),HZ(r,i),s={isEnd:n}}}else n&&o.brushMode==="single"&&o.removeOnClick&&cD(r,t,e)&&GI(r)&&(s={isEnd:n,removeOnClick:!0});return s}function F4(r,t){return r==="auto"?t.defaultBrushType:r}var tDt={mousedown:function(r){if(this._dragging)k4(this,r);else if(!r.target||!r.target.draggable){VI(r);var t=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var e=this._creatingPanel=cD(this,r,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(r){var t=r.offsetX,e=r.offsetY,n=this.group.transformCoordToLocal(t,e);if(QLt(this,r,n),this._dragging){VI(r);var i=JZ(this,r,n,!1);i&&Yc(this,i)}},mouseup:function(r){k4(this,r)}};function k4(r,t){if(r._dragging){VI(t);var e=t.offsetX,n=t.offsetY,i=r.group.transformCoordToLocal(e,n),a=JZ(r,t,i,!0);r._dragging=!1,r._track=[],r._creatingCover=null,a&&Yc(r,a)}}function eDt(r,t,e){var n=r._zr;return t<0||t>n.getWidth()||e<0||e>n.getHeight()}var fT={lineX:G4(0),lineY:G4(1),rect:{createCover:function(r,t){function e(n){return n}return ZZ({toRectRange:e,fromRectRange:e},r,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var t=XZ(r);return KZ(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(r,t,e,n){jZ(r,t,e,n)},updateCommon:BI,contain:UI},polygon:{createCover:function(r,t){var e=new Dt;return e.add(new Ei({name:"main",style:fD(t),silent:!0})),e},getCreatingRange:function(r){return r},endCreating:function(r,t){t.remove(t.childAt(0)),t.add(new Ti({name:"main",draggable:!0,drift:Wt(qLt,r,t),ondragend:Wt(Yc,r,{isEnd:!0})}))},updateCoverShape:function(r,t,e,n){t.childAt(0).setShape({points:dD(r,t,e)})},updateCommon:BI,contain:UI}};function G4(r){return{createCover:function(t,e){return ZZ({toRectRange:function(n){var i=[n,[0,100]];return r&&i.reverse(),i},fromRectRange:function(n){return n[r]}},t,e,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(t){var e=XZ(t),n=dy(e[0][r],e[1][r]),i=wg(e[0][r],e[1][r]);return[n,i]},updateCoverShape:function(t,e,n,i){var a,o=YZ(t,e);if(o!==$c&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(r);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-r]]}var l=[n,a];r&&l.reverse(),jZ(t,e,l,i)},updateCommon:BI,contain:UI}}function QZ(r){return r=gD(r),function(t){return u$(t,r)}}function tj(r,t){return r=gD(r),function(e){var n=t??e,i=n?r.width:r.height,a=n?r.x:r.y;return[a,a+(i||0)]}}function ej(r,t,e){var n=gD(r);return function(i,a){return n.contain(a[0],a[1])&&!lT(i,t,e)}}function gD(r){return jt.create(r)}var rDt=["axisLine","axisTickLabel","axisName"],nDt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,n){r.prototype.init.apply(this,arguments),(this._brushController=new lD(n.getZr())).on("brush",_t(this._onBrush,this))},t.prototype.render=function(e,n,i,a){if(!iDt(e,n,a)){this.axisModel=e,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Dt,this.group.add(this._axisGroup),!!e.get("show")){var s=oDt(e,n),l=s.coordinateSystem,u=e.getAreaSelectStyle(),h=u.width,c=e.axis.dim,f=l.getAxisLayout(c),d=tt({strokeContainThreshold:h},f),g=new mi(e,d);I(rDt,g.add,g),this._axisGroup.add(g.getGroup()),this._refreshBrushController(d,u,e,s,h,i),qy(o,this._axisGroup,e)}}},t.prototype._refreshBrushController=function(e,n,i,a,o,s){var l=i.axis.getExtent(),u=l[1]-l[0],h=Math.min(30,Math.abs(u)*.1),c=jt.create({x:l[0],y:-o/2,width:u,height:o});c.x-=h,c.width+=2*h,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:QZ(c),isTargetByCursor:ej(c,s,a),getLinearBrushOtherExtent:tj(c,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(aDt(i))},t.prototype._onBrush=function(e){var n=e.areas,i=this.axisModel,a=i.axis,o=nt(n,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!i.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(yr);function iDt(r,t,e){return e&&e.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:e})[0]===r}function aDt(r){var t=r.axis;return nt(r.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}})}function oDt(r,t){return t.getComponent("parallel",r.get("parallelIndex"))}var sDt={type:"axisAreaSelect",event:"axisAreaSelected"};function lDt(r){r.registerAction(sDt,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(n){n.axis.model.setActiveIntervals(t.intervals)})}),r.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(n){n.setAxisExpand(t)})})}var uDt={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function rj(r){r.registerComponentView(RLt),r.registerComponentModel(LLt),r.registerCoordinateSystem("parallel",zLt),r.registerPreprocessor(CLt),r.registerComponentModel(kI),r.registerComponentView(nDt),Sg(r,"parallel",kI,uDt),lDt(r)}function hDt(r){ne(rj),r.registerChartView(yLt),r.registerSeriesModel(SLt),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,ELt)}var cDt=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return r}(),fDt=function(r){U(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new cDt},t.prototype.buildPath=function(e,n){var i=n.extent;e.moveTo(n.x1,n.y1),e.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(e.lineTo(n.x2+i,n.y2),e.bezierCurveTo(n.cpx2+i,n.cpy2,n.cpx1+i,n.cpy1,n.x1+i,n.y1)):(e.lineTo(n.x2,n.y2+i),e.bezierCurveTo(n.cpx2,n.cpy2+i,n.cpx1,n.cpy1+i,n.x1,n.y1+i)),e.closePath()},t.prototype.highlight=function(){ul(this)},t.prototype.downplay=function(){hl(this)},t}(ae),dDt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._focusAdjacencyDisabled=!1,e}return t.prototype.render=function(e,n,i){var a=this,o=e.getGraph(),s=this.group,l=e.layoutInfo,u=l.width,h=l.height,c=e.getData(),f=e.getData("edge"),d=e.get("orient");this._model=e,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(g){var p=new fDt,v=Ft(p);v.dataIndex=g.dataIndex,v.seriesIndex=e.seriesIndex,v.dataType="edge";var m=g.getModel(),y=m.getModel("lineStyle"),_=y.get("curveness"),x=g.node1.getLayout(),w=g.node1.getModel(),S=w.get("localX"),T=w.get("localY"),b=g.node2.getLayout(),E=g.node2.getModel(),C=E.get("localX"),M=E.get("localY"),A=g.getLayout(),R,P,L,D,k,F,B,V;p.shape.extent=Math.max(1,A.dy),p.shape.orient=d,d==="vertical"?(R=(S!=null?S*u:x.x)+A.sy,P=(T!=null?T*h:x.y)+x.dy,L=(C!=null?C*u:b.x)+A.ty,D=M!=null?M*h:b.y,k=R,F=P*(1-_)+D*_,B=L,V=P*_+D*(1-_)):(R=(S!=null?S*u:x.x)+x.dx,P=(T!=null?T*h:x.y)+A.sy,L=C!=null?C*u:b.x,D=(M!=null?M*h:b.y)+A.ty,k=R*(1-_)+L*_,F=P,B=R*_+L*(1-_),V=D),p.setShape({x1:R,y1:P,x2:L,y2:D,cpx1:k,cpy1:F,cpx2:B,cpy2:V}),p.useStyle(y.getItemStyle()),B4(p.style,d,g);var Y=""+m.get("value"),q=hn(m,"edgeLabel");Nn(p,q,{labelFetcher:{getFormattedLabel:function(St,mt,$,K,et,W){return e.getFormattedLabel(St,mt,"edge",K,os(et,q.normal&&q.normal.get("formatter"),Y),W)}},labelDataIndex:g.dataIndex,defaultText:Y}),p.setTextConfig({position:"inside"});var lt=m.getModel("emphasis");On(p,m,"lineStyle",function(St){var mt=St.getItemStyle();return B4(mt,d,g),mt}),s.add(p),f.setItemGraphicEl(g.dataIndex,p);var X=lt.get("focus");wr(p,X==="adjacency"?g.getAdjacentDataIndices():X==="trajectory"?g.getTrajectoryDataIndices():X,lt.get("blurScope"),lt.get("disabled"))}),o.eachNode(function(g){var p=g.getLayout(),v=g.getModel(),m=v.get("localX"),y=v.get("localY"),_=v.getModel("emphasis"),x=v.get(["itemStyle","borderRadius"])||0,w=new ve({shape:{x:m!=null?m*u:p.x,y:y!=null?y*h:p.y,width:p.dx,height:p.dy,r:x},style:v.getModel("itemStyle").getItemStyle(),z2:10});Nn(w,hn(v),{labelFetcher:{getFormattedLabel:function(T,b){return e.getFormattedLabel(T,b,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),w.disableLabelAnimation=!0,w.setStyle("fill",g.getVisual("color")),w.setStyle("decal",g.getVisual("style").decal),On(w,v),s.add(w),c.setItemGraphicEl(g.dataIndex,w),Ft(w).dataType="node";var S=_.get("focus");wr(w,S==="adjacency"?g.getAdjacentDataIndices():S==="trajectory"?g.getTrajectoryDataIndices():S,_.get("blurScope"),_.get("disabled"))}),c.eachItemGraphicEl(function(g,p){var v=c.getItemModel(p);v.get("draggable")&&(g.drift=function(m,y){a._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=y,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:c.getRawIndex(p),localX:this.shape.x/u,localY:this.shape.y/h})},g.ondragend=function(){a._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&e.isAnimationEnabled()&&s.setClipPath(gDt(s.getBoundingRect(),e,function(){s.removeClipPath()})),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(Ke);function B4(r,t,e){switch(r.fill){case"source":r.fill=e.node1.getVisual("color"),r.decal=e.node1.getVisual("style").decal;break;case"target":r.fill=e.node2.getVisual("color"),r.decal=e.node2.getVisual("style").decal;break;case"gradient":var n=e.node1.getVisual("color"),i=e.node2.getVisual("color");yt(n)&&yt(i)&&(r.fill=new Ky(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:n,offset:0},{color:i,offset:1}]))}}function gDt(r,t,e){var n=new ve({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return pr(n,{shape:{width:r.width+20}},t,e),n}var pDt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,n){var i=e.edges||e.links,a=e.data||e.nodes,o=e.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new Oe(o[l],this,n));if(a&&i){var u=GZ(a,i,this,!0,h);return u.data}function h(c,f){c.wrapMethod("getItemModel",function(d,g){var p=d.parentModel,v=p.getData().getItemLayout(g);if(v){var m=v.depth,y=p.levelModels[m];y&&(d.parentModel=y)}return d}),f.wrapMethod("getItemModel",function(d,g){var p=d.parentModel,v=p.getGraph().getEdgeByIndex(g),m=v.node1.getLayout();if(m){var y=m.depth,_=p.levelModels[y];_&&(d.parentModel=_)}return d})}},t.prototype.setNodePosition=function(e,n){var i=this.option.data||this.option.nodes,a=i[e];a.localX=n[0],a.localY=n[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,n,i){function a(d){return isNaN(d)||d==null}if(i==="edge"){var o=this.getDataParams(e,i),s=o.data,l=o.value,u=s.source+" -- "+s.target;return cn("nameValue",{name:u,value:l,noValue:a(l)})}else{var h=this.getGraph().getNodeByIndex(e),c=h.getLayout().value,f=this.getDataParams(e,i).data.name;return cn("nameValue",{name:f!=null?f+"":null,value:c,noValue:a(c)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(e,n){var i=r.prototype.getDataParams.call(this,e,n);if(i.value==null&&n==="node"){var a=this.getGraph().getNodeByIndex(e),o=a.getLayout().value;i.value=o}return i},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(lr);function vDt(r,t){r.eachSeriesByType("sankey",function(e){var n=e.get("nodeWidth"),i=e.get("nodeGap"),a=mDt(e,t);e.layoutInfo=a;var o=a.width,s=a.height,l=e.getGraph(),u=l.nodes,h=l.edges;_Dt(u);var c=ze(u,function(p){return p.getLayout().value===0}),f=c.length!==0?0:e.get("layoutIterations"),d=e.get("orient"),g=e.get("nodeAlign");yDt(u,h,n,i,o,s,f,d,g)})}function mDt(r,t){return qr(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function yDt(r,t,e,n,i,a,o,s,l){xDt(r,t,e,i,a,s,l),bDt(r,t,a,i,n,o,s),DDt(r,s)}function _Dt(r){I(r,function(t){var e=Tu(t.outEdges,yS),n=Tu(t.inEdges,yS),i=t.getValue()||0,a=Math.max(e,n,i);t.setLayout({value:a},!0)})}function xDt(r,t,e,n,i,a,o){for(var s=[],l=[],u=[],h=[],c=0,f=0;f<t.length;f++)s[f]=1;for(var f=0;f<r.length;f++)l[f]=r[f].inEdges.length,l[f]===0&&u.push(r[f]);for(var d=-1;u.length;){for(var g=0;g<u.length;g++){var p=u[g],v=p.hostGraph.data.getRawDataItem(p.dataIndex),m=v.depth!=null&&v.depth>=0;m&&v.depth>d&&(d=v.depth),p.setLayout({depth:m?v.depth:c},!0),a==="vertical"?p.setLayout({dy:e},!0):p.setLayout({dx:e},!0);for(var y=0;y<p.outEdges.length;y++){var _=p.outEdges[y],x=t.indexOf(_);s[x]=0;var w=_.node2,S=r.indexOf(w);--l[S]===0&&h.indexOf(w)<0&&h.push(w)}}++c,u=h,h=[]}for(var f=0;f<s.length;f++)if(s[f]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var T=d>c-1?d:c-1;o&&o!=="left"&&SDt(r,o,a,T);var b=a==="vertical"?(i-e)/T:(n-e)/T;TDt(r,b,a)}function nj(r){var t=r.hostGraph.data.getRawDataItem(r.dataIndex);return t.depth!=null&&t.depth>=0}function SDt(r,t,e,n){if(t==="right"){for(var i=[],a=r,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var h=l.inEdges[u];i.indexOf(h.node1)<0&&i.push(h.node1)}}a=i,i=[],++o}I(r,function(c){nj(c)||c.setLayout({depth:Math.max(0,n-c.getLayout().skNodeHeight)},!0)})}else t==="justify"&&wDt(r,n)}function wDt(r,t){I(r,function(e){!nj(e)&&!e.outEdges.length&&e.setLayout({depth:t},!0)})}function TDt(r,t,e){I(r,function(n){var i=n.getLayout().depth*t;e==="vertical"?n.setLayout({y:i},!0):n.setLayout({x:i},!0)})}function bDt(r,t,e,n,i,a,o){var s=EDt(r,o);CDt(s,t,e,n,i,o),AC(s,i,e,n,o);for(var l=1;a>0;a--)l*=.99,MDt(s,l,o),AC(s,i,e,n,o),LDt(s,l,o),AC(s,i,e,n,o)}function EDt(r,t){var e=[],n=t==="vertical"?"y":"x",i=WA(r,function(a){return a.getLayout()[n]});return i.keys.sort(function(a,o){return a-o}),I(i.keys,function(a){e.push(i.buckets.get(a))}),e}function CDt(r,t,e,n,i,a){var o=1/0;I(r,function(s){var l=s.length,u=0;I(s,function(c){u+=c.getLayout().value});var h=a==="vertical"?(n-(l-1)*i)/u:(e-(l-1)*i)/u;h<o&&(o=h)}),I(r,function(s){I(s,function(l,u){var h=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:h},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:h},!0))})}),I(t,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function AC(r,t,e,n,i){var a=i==="vertical"?"x":"y";I(r,function(o){o.sort(function(p,v){return p.getLayout()[a]-v.getLayout()[a]});for(var s,l,u,h=0,c=o.length,f=i==="vertical"?"dx":"dy",d=0;d<c;d++)l=o[d],u=h-l.getLayout()[a],u>0&&(s=l.getLayout()[a]+u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),h=l.getLayout()[a]+l.getLayout()[f]+t;var g=i==="vertical"?n:e;if(u=h-t-g,u>0){s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),h=s;for(var d=c-2;d>=0;--d)l=o[d],u=l.getLayout()[a]+l.getLayout()[f]+t-h,u>0&&(s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),h=l.getLayout()[a]}})}function MDt(r,t,e){I(r.slice().reverse(),function(n){I(n,function(i){if(i.outEdges.length){var a=Tu(i.outEdges,ADt,e)/Tu(i.outEdges,yS);if(isNaN(a)){var o=i.outEdges.length;a=o?Tu(i.outEdges,IDt,e)/o:0}if(e==="vertical"){var s=i.getLayout().x+(a-Wu(i,e))*t;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-Wu(i,e))*t;i.setLayout({y:l},!0)}}})})}function ADt(r,t){return Wu(r.node2,t)*r.getValue()}function IDt(r,t){return Wu(r.node2,t)}function RDt(r,t){return Wu(r.node1,t)*r.getValue()}function PDt(r,t){return Wu(r.node1,t)}function Wu(r,t){return t==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function yS(r){return r.getValue()}function Tu(r,t,e){for(var n=0,i=r.length,a=-1;++a<i;){var o=+t(r[a],e);isNaN(o)||(n+=o)}return n}function LDt(r,t,e){I(r,function(n){I(n,function(i){if(i.inEdges.length){var a=Tu(i.inEdges,RDt,e)/Tu(i.inEdges,yS);if(isNaN(a)){var o=i.inEdges.length;a=o?Tu(i.inEdges,PDt,e)/o:0}if(e==="vertical"){var s=i.getLayout().x+(a-Wu(i,e))*t;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-Wu(i,e))*t;i.setLayout({y:l},!0)}}})})}function DDt(r,t){var e=t==="vertical"?"x":"y";I(r,function(n){n.outEdges.sort(function(i,a){return i.node2.getLayout()[e]-a.node2.getLayout()[e]}),n.inEdges.sort(function(i,a){return i.node1.getLayout()[e]-a.node1.getLayout()[e]})}),I(r,function(n){var i=0,a=0;I(n.outEdges,function(o){o.setLayout({sy:i},!0),i+=o.getLayout().dy}),I(n.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function ODt(r){r.eachSeriesByType("sankey",function(t){var e=t.getGraph(),n=e.nodes,i=e.edges;if(n.length){var a=1/0,o=-1/0;I(n,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),I(n,function(s){var l=new un({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:t.get("color")}),u=l.mapValueToVisual(s.getLayout().value),h=s.getModel().get(["itemStyle","color"]);h!=null?(s.setVisual("color",h),s.setVisual("style",{fill:h})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}i.length&&I(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function NDt(r){r.registerChartView(dDt),r.registerSeriesModel(pDt),r.registerLayout(vDt),r.registerVisual(ODt),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(n){n.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var ij=function(){function r(){}return r.prototype.getInitialData=function(t,e){var n,i=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type"),l;o==="category"?(t.layout="horizontal",n=i.getOrdinalMeta(),l=!0):s==="category"?(t.layout="vertical",n=a.getOrdinalMeta(),l=!0):t.layout=t.layout||"horizontal";var u=["x","y"],h=t.layout==="horizontal"?0:1,c=this._baseAxisDim=u[h],f=u[1-h],d=[i,a],g=d[h].get("type"),p=d[1-h].get("type"),v=t.data;if(v&&l){var m=[];I(v,function(x,w){var S;rt(x)?(S=x.slice(),x.unshift(w)):rt(x.value)?(S=tt({},x),S.value=S.value.slice(),x.value.unshift(w)):S=x,m.push(S)}),t.data=m}var y=this.defaultValueDimensions,_=[{name:c,type:sS(g),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:sS(p),dimsDef:y.slice()}];return sp(this,{coordDimensions:_,dimensionsCount:y.length+1,encodeDefaulter:Wt(N$,_,this)})},r.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},r}(),aj=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(lr);Hr(aj,ij,!0);var FDt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a=e.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=e.get("layout")==="horizontal"?1:0;a.diff(s).add(function(u){if(a.hasValue(u)){var h=a.getItemLayout(u),c=z4(h,a,u,l,!0);a.setItemGraphicEl(u,c),o.add(c)}}).update(function(u,h){var c=s.getItemGraphicEl(h);if(!a.hasValue(u)){o.remove(c);return}var f=a.getItemLayout(u);c?(xo(c),oj(f,c,a,u)):c=z4(f,a,u,l),o.add(c),a.setItemGraphicEl(u,c)}).remove(function(u){var h=s.getItemGraphicEl(u);h&&o.remove(h)}).execute(),this._data=a},t.prototype.remove=function(e){var n=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&n.remove(a)})},t.type="boxplot",t}(Ke),kDt=function(){function r(){}return r}(),GDt=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="boxplotBoxPath",n}return t.prototype.getDefaultShape=function(){return new kDt},t.prototype.buildPath=function(e,n){var i=n.points,a=0;for(e.moveTo(i[a][0],i[a][1]),a++;a<4;a++)e.lineTo(i[a][0],i[a][1]);for(e.closePath();a<i.length;a++)e.moveTo(i[a][0],i[a][1]),a++,e.lineTo(i[a][0],i[a][1])},t}(ae);function z4(r,t,e,n,i){var a=r.ends,o=new GDt({shape:{points:i?BDt(a,n,r):a}});return oj(r,o,t,e,i),o}function oj(r,t,e,n,i){var a=e.hostModel,o=nf[i?"initProps":"updateProps"];o(t,{shape:{points:r.ends}},a,n),t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=e.getItemModel(n),l=s.getModel("emphasis");On(t,s),wr(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function BDt(r,t,e){return nt(r,function(n){return n=n.slice(),n[t]=e.initBaseline,n})}var sm=I;function zDt(r){var t=VDt(r);sm(t,function(e){var n=e.seriesModels;n.length&&(UDt(e),sm(n,function(i,a){WDt(i,e.boxOffsetList[a],e.boxWidthList[a])}))})}function VDt(r){var t=[],e=[];return r.eachSeriesByType("boxplot",function(n){var i=n.getBaseAxis(),a=te(e,i);a<0&&(a=e.length,e[a]=i,t[a]={axis:i,seriesModels:[]}),t[a].seriesModels.push(n)}),t}function UDt(r){var t=r.axis,e=r.seriesModels,n=e.length,i=r.boxWidthList=[],a=r.boxOffsetList=[],o=[],s;if(t.type==="category")s=t.getBandWidth();else{var l=0;sm(e,function(g){l=Math.max(l,g.getData().count())});var u=t.getExtent();s=Math.abs(u[1]-u[0])/l}sm(e,function(g){var p=g.get("boxWidth");rt(p)||(p=[p,p]),o.push([ft(p[0],s)||0,ft(p[1],s)||0])});var h=s*.8-2,c=h/n*.3,f=(h-c*(n-1))/n,d=f/2-h/2;sm(e,function(g,p){a.push(d),d+=c+f,i.push(Math.min(Math.max(f,o[p][0]),o[p][1]))})}function WDt(r,t,e){var n=r.coordinateSystem,i=r.getData(),a=e/2,o=r.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],u=i.mapDimension(l[o]),h=i.mapDimensionsAll(l[s]);if(u==null||h.length<5)return;for(var c=0;c<i.count();c++){var f=i.get(u,c),d=_(f,h[2],c),g=_(f,h[0],c),p=_(f,h[1],c),v=_(f,h[3],c),m=_(f,h[4],c),y=[];x(y,p,!1),x(y,v,!0),y.push(g,p,m,v),w(y,g),w(y,m),w(y,d),i.setItemLayout(c,{initBaseline:d[s],ends:y})}function _(S,T,b){var E=i.get(T,b),C=[];C[o]=S,C[s]=E;var M;return isNaN(S)||isNaN(E)?M=[NaN,NaN]:(M=n.dataToPoint(C),M[o]+=t),M}function x(S,T,b){var E=T.slice(),C=T.slice();E[o]+=a,C[o]-=a,b?S.push(E,C):S.push(C,E)}function w(S,T){var b=T.slice(),E=T.slice();b[o]-=a,E[o]+=a,S.push(b,E)}}function HDt(r,t){t=t||{};for(var e=[],n=[],i=t.boundIQR,a=i==="none"||i===0,o=0;o<r.length;o++){var s=Ga(r[o].slice()),l=nE(s,.25),u=nE(s,.5),h=nE(s,.75),c=s[0],f=s[s.length-1],d=(i??1.5)*(h-l),g=a?c:Math.max(c,l-d),p=a?f:Math.min(f,h+d),v=t.itemNameFormatter,m=At(v)?v({value:o}):yt(v)?v.replace("{value}",o+""):o+"";e.push([m,g,l,u,h,p]);for(var y=0;y<s.length;y++){var _=s[y];if(_<g||_>p){var x=[m,_];n.push(x)}}}return{boxData:e,outliers:n}}var $Dt={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==ti){var n="";Pe(n)}var i=HDt(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function YDt(r){r.registerSeriesModel(aj),r.registerChartView(FDt),r.registerLayout(zDt),r.registerTransform($Dt)}var XDt=["color","borderColor"],ZDt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,n,i){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,n,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,n):this._incrementalRenderNormal(e,n)},t.prototype.eachRendered=function(e){Qu(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(e){var n=e.getData(),i=this._data,a=this.group,o=n.getLayout("isSimpleBox"),s=e.get("clip",!0),l=e.coordinateSystem,u=l.getArea&&l.getArea();this._data||a.removeAll(),n.diff(i).add(function(h){if(n.hasValue(h)){var c=n.getItemLayout(h);if(s&&V4(u,c))return;var f=IC(c,h,!0);pr(f,{shape:{points:c.ends}},e,h),RC(f,n,h,o),a.add(f),n.setItemGraphicEl(h,f)}}).update(function(h,c){var f=i.getItemGraphicEl(c);if(!n.hasValue(h)){a.remove(f);return}var d=n.getItemLayout(h);if(s&&V4(u,d)){a.remove(f);return}f?(Ae(f,{shape:{points:d.ends}},e,h),xo(f)):f=IC(d),RC(f,n,h,o),a.add(f),n.setItemGraphicEl(h,f)}).remove(function(h){var c=i.getItemGraphicEl(h);c&&a.remove(c)}).execute(),this._data=n},t.prototype._renderLarge=function(e){this._clear(),U4(e,this.group);var n=e.get("clip",!0)?a0(e.coordinateSystem,!1,e):null;n?this.group.setClipPath(n):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,n){for(var i=n.getData(),a=i.getLayout("isSimpleBox"),o;(o=e.next())!=null;){var s=i.getItemLayout(o),l=IC(s);RC(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(e,n){U4(n,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(Ke),jDt=function(){function r(){}return r}(),KDt=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="normalCandlestickBox",n}return t.prototype.getDefaultShape=function(){return new jDt},t.prototype.buildPath=function(e,n){var i=n.points;this.__simpleBox?(e.moveTo(i[4][0],i[4][1]),e.lineTo(i[6][0],i[6][1])):(e.moveTo(i[0][0],i[0][1]),e.lineTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.closePath(),e.moveTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.moveTo(i[6][0],i[6][1]),e.lineTo(i[7][0],i[7][1]))},t}(ae);function IC(r,t,e){var n=r.ends;return new KDt({shape:{points:e?qDt(n,r):n},z2:100})}function V4(r,t){for(var e=!0,n=0;n<t.ends.length;n++)if(r.contain(t.ends[n][0],t.ends[n][1])){e=!1;break}return e}function RC(r,t,e,n){var i=t.getItemModel(e);r.useStyle(t.getItemVisual(e,"style")),r.style.strokeNoScale=!0,r.__simpleBox=n,On(r,i)}function qDt(r,t){return nt(r,function(e){return e=e.slice(),e[1]=t.initBaseline,e})}var JDt=function(){function r(){}return r}(),PC=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n.type="largeCandlestickBox",n}return t.prototype.getDefaultShape=function(){return new JDt},t.prototype.buildPath=function(e,n){for(var i=n.points,a=0;a<i.length;)if(this.__sign===i[a++]){var o=i[a++];e.moveTo(o,i[a++]),e.lineTo(o,i[a++])}else a+=3},t}(ae);function U4(r,t,e,n){var i=r.getData(),a=i.getLayout("largePoints"),o=new PC({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});t.add(o);var s=new PC({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new PC({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});t.add(l),LC(1,o,r),LC(-1,s,r),LC(0,l,r),n&&(o.incremental=!0,s.incremental=!0),e&&e.push(o,s)}function LC(r,t,e,n){var i=e.get(["itemStyle",r>0?"borderColor":"borderColor0"])||e.get(["itemStyle",r>0?"color":"color0"]);r===0&&(i=e.get(["itemStyle","borderColorDoji"]));var a=e.getModel("itemStyle").getItemStyle(XDt);t.useStyle(a),t.style.fill=null,t.style.stroke=i}var sj=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,n,i){var a=n.getItemLayout(e);return a&&i.rect(a.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(lr);Hr(sj,ij,!0);function QDt(r){!r||!rt(r.series)||I(r.series,function(t){Rt(t)&&t.type==="k"&&(t.type="candlestick")})}var tOt=["itemStyle","borderColor"],eOt=["itemStyle","borderColor0"],rOt=["itemStyle","borderColorDoji"],nOt=["itemStyle","color"],iOt=["itemStyle","color0"],aOt={seriesType:"candlestick",plan:np(),performRawSeries:!0,reset:function(r,t){function e(a,o){return o.get(a>0?nOt:iOt)}function n(a,o){return o.get(a===0?rOt:a>0?tOt:eOt)}if(!t.isSeriesFiltered(r)){var i=r.pipelineContext.large;return!i&&{progress:function(a,o){for(var s;(s=a.next())!=null;){var l=o.getItemModel(s),u=o.getItemLayout(s).sign,h=l.getItemStyle();h.fill=e(u,l),h.stroke=n(u,l)||h.fill;var c=o.ensureUniqueItemVisual(s,"style");tt(c,h)}}}}}},oOt={seriesType:"candlestick",plan:np(),reset:function(r){var t=r.coordinateSystem,e=r.getData(),n=sOt(r,e),i=0,a=1,o=["x","y"],s=e.getDimensionIndex(e.mapDimension(o[i])),l=nt(e.mapDimensionsAll(o[a]),e.getDimensionIndex,e),u=l[0],h=l[1],c=l[2],f=l[3];if(e.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),s<0||l.length<4)return;return{progress:r.pipelineContext.large?g:d};function d(p,v){for(var m,y=v.getStore();(m=p.next())!=null;){var _=y.get(s,m),x=y.get(u,m),w=y.get(h,m),S=y.get(c,m),T=y.get(f,m),b=Math.min(x,w),E=Math.max(x,w),C=k(b,_),M=k(E,_),A=k(S,_),R=k(T,_),P=[];F(P,M,0),F(P,C,1),P.push(V(R),V(M),V(A),V(C));var L=v.getItemModel(m),D=!!L.get(["itemStyle","borderColorDoji"]);v.setItemLayout(m,{sign:W4(y,m,x,w,h,D),initBaseline:x>w?M[a]:C[a],ends:P,brushRect:B(S,T,_)})}function k(Y,q){var lt=[];return lt[i]=q,lt[a]=Y,isNaN(q)||isNaN(Y)?[NaN,NaN]:t.dataToPoint(lt)}function F(Y,q,lt){var X=q.slice(),St=q.slice();X[i]=R1(X[i]+n/2,1,!1),St[i]=R1(St[i]-n/2,1,!0),lt?Y.push(X,St):Y.push(St,X)}function B(Y,q,lt){var X=k(Y,lt),St=k(q,lt);return X[i]-=n/2,St[i]-=n/2,{x:X[0],y:X[1],width:n,height:St[1]-X[1]}}function V(Y){return Y[i]=R1(Y[i],1),Y}}function g(p,v){for(var m=ts(p.count*4),y=0,_,x=[],w=[],S,T=v.getStore(),b=!!r.get(["itemStyle","borderColorDoji"]);(S=p.next())!=null;){var E=T.get(s,S),C=T.get(u,S),M=T.get(h,S),A=T.get(c,S),R=T.get(f,S);if(isNaN(E)||isNaN(A)||isNaN(R)){m[y++]=NaN,y+=3;continue}m[y++]=W4(T,S,C,M,h,b),x[i]=E,x[a]=A,_=t.dataToPoint(x,null,w),m[y++]=_?_[0]:NaN,m[y++]=_?_[1]:NaN,x[a]=R,_=t.dataToPoint(x,null,w),m[y++]=_?_[1]:NaN}v.setLayout("largePoints",m)}}};function W4(r,t,e,n,i,a){var o;return e>n?o=-1:e<n?o=1:o=a?0:t>0?r.get(i,t-1)<=n?1:-1:1,o}function sOt(r,t){var e=r.getBaseAxis(),n,i=e.type==="category"?e.getBandWidth():(n=e.getExtent(),Math.abs(n[1]-n[0])/t.count()),a=ft(Vt(r.get("barMaxWidth"),i),i),o=ft(Vt(r.get("barMinWidth"),1),i),s=r.get("barWidth");return s!=null?ft(s,i):Math.max(Math.min(i/2,a),o)}function lOt(r){r.registerChartView(ZDt),r.registerSeriesModel(sj),r.registerPreprocessor(QDt),r.registerVisual(aOt),r.registerLayout(oOt)}function H4(r,t){var e=t.rippleEffectColor||t.color;r.eachChild(function(n){n.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?e:null,fill:t.brushType==="fill"?e:null}})})}var uOt=function(r){U(t,r);function t(e,n){var i=r.call(this)||this,a=new n0(e,n),o=new Dt;return i.add(a),i.add(o),i.updateData(e,n),i}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var n=e.symbolType,i=e.color,a=e.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=Ur(n,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/a*e.period+e.effectOffset;l.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(e.period,{opacity:0}).delay(u).start(),o.add(l)}H4(o,e)},t.prototype.updateEffectAnimation=function(e){for(var n=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(n[s]!==e[s]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}H4(i,e)},t.prototype.highlight=function(){ul(this)},t.prototype.downplay=function(){hl(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,n){var i=this,a=e.hostModel;this.childAt(0).updateData(e,n);var o=this.childAt(1),s=e.getItemModel(n),l=e.getItemVisual(n,"symbol"),u=ap(e.getItemVisual(n,"symbolSize")),h=e.getItemVisual(n,"style"),c=h&&h.fill,f=s.getModel("emphasis");o.setScale(u),o.traverse(function(v){v.setStyle("fill",c)});var d=af(e.getItemVisual(n,"symbolOffset"),u);d&&(o.x=d[0],o.y=d[1]);var g=e.getItemVisual(n,"symbolRotate");o.rotation=(g||0)*Math.PI/180||0;var p={};p.showEffectOn=a.get("showEffectOn"),p.rippleScale=s.get(["rippleEffect","scale"]),p.brushType=s.get(["rippleEffect","brushType"]),p.period=s.get(["rippleEffect","period"])*1e3,p.effectOffset=n/e.count(),p.z=a.getShallow("z")||0,p.zlevel=a.getShallow("zlevel")||0,p.symbolType=l,p.color=c,p.rippleEffectColor=s.get(["rippleEffect","color"]),p.rippleNumber=s.get(["rippleEffect","number"]),p.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(v){v==="emphasis"?p.showEffectOn!=="render"&&i.startEffectAnimation(p):v==="normal"&&p.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=p,wr(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(Dt),hOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._symbolDraw=new i0(uOt)},t.prototype.render=function(e,n,i){var a=e.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(e)}),this.group.add(o.group)},t.prototype._getClipShape=function(e){var n=e.coordinateSystem,i=n&&n.getArea&&n.getArea();return e.get("clip",!0)?i:null},t.prototype.updateTransform=function(e,n,i){var a=e.getData();this.group.dirty();var o=o0("").reset(e,n,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var n=e.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=Fxt(n.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(Ke),cOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,n){return Sl(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,n,i){return i.point(n.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(lr);function fOt(r){r.registerChartView(hOt),r.registerSeriesModel(cOt),r.registerLayout(o0("effectScatter"))}var lj=function(r){U(t,r);function t(e,n,i){var a=r.call(this)||this;return a.add(a.createLine(e,n,i)),a._updateEffectSymbol(e,n),a}return t.prototype.createLine=function(e,n,i){return new oD(e,n,i)},t.prototype._updateEffectSymbol=function(e,n){var i=e.getItemModel(n),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");rt(o)||(o=[o,o]);var l=e.getItemVisual(n,"style"),u=a.get("color")||l&&l.stroke,h=this.childAt(1);this._symbolType!==s&&(this.remove(h),h=Ur(s,-.5,-.5,1,1,u),h.z2=100,h.culling=!0,this.add(h)),h&&(h.setStyle("shadowColor",u),h.setStyle(a.getItemStyle(["color"])),h.scaleX=o[0],h.scaleY=o[1],h.setColor(u),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(e,a,n))},t.prototype._updateEffectAnimation=function(e,n,i){var a=this.childAt(1);if(a){var o=e.getItemLayout(i),s=n.get("period")*1e3,l=n.get("loop"),u=n.get("roundTrip"),h=n.get("constantSpeed"),c=Sn(n.get("delay"),function(d){return d/e.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),h>0&&(s=this._getLineLength(a)/h*1e3),s!==this._period||l!==this._loop||u!==this._roundTrip){a.stopAnimation();var f=void 0;At(c)?f=c(i):f=c,a.__t>0&&(f=-s*a.__t),this._animateSymbol(a,s,f,l,u)}this._period=s,this._loop=l,this._roundTrip=u}},t.prototype._animateSymbol=function(e,n,i,a,o){if(n>0){e.__t=0;var s=this,l=e.animate("",a).when(o?n*2:n,{__t:o?2:1}).delay(i).during(function(){s._updateSymbolPosition(e)});a||l.done(function(){s.remove(e)}),l.start()}},t.prototype._getLineLength=function(e){return ou(e.__p1,e.__cp1)+ou(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,n){e.__p1=n[0],e.__p2=n[1],e.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},t.prototype.updateData=function(e,n,i){this.childAt(0).updateData(e,n,i),this._updateEffectSymbol(e,n)},t.prototype._updateSymbolPosition=function(e){var n=e.__p1,i=e.__p2,a=e.__cp1,o=e.__t<1?e.__t:2-e.__t,s=[e.x,e.y],l=s.slice(),u=vn,h=AA;s[0]=u(n[0],a[0],i[0],o),s[1]=u(n[1],a[1],i[1],o);var c=e.__t<1?h(n[0],a[0],i[0],o):h(i[0],a[0],n[0],1-o),f=e.__t<1?h(n[1],a[1],i[1],o):h(i[1],a[1],n[1],1-o);e.rotation=-Math.atan2(f,c)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=ou(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):e.__lastT===1?e.scaleY=2*ou(n,s):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=s[0],e.y=s[1]},t.prototype.updateLayout=function(e,n){this.childAt(0).updateLayout(e,n);var i=e.getItemModel(n).getModel("effect");this._updateEffectAnimation(e,i,n)},t}(Dt),uj=function(r){U(t,r);function t(e,n,i){var a=r.call(this)||this;return a._createPolyline(e,n,i),a}return t.prototype._createPolyline=function(e,n,i){var a=e.getItemLayout(n),o=new Ei({shape:{points:a}});this.add(o),this._updateCommonStl(e,n,i)},t.prototype.updateData=function(e,n,i){var a=e.hostModel,o=this.childAt(0),s={shape:{points:e.getItemLayout(n)}};Ae(o,s,a,n),this._updateCommonStl(e,n,i)},t.prototype._updateCommonStl=function(e,n,i){var a=this.childAt(0),o=e.getItemModel(n),s=i&&i.emphasisLineStyle,l=i&&i.focus,u=i&&i.blurScope,h=i&&i.emphasisDisabled;if(!i||e.hasItemOption){var c=o.getModel("emphasis");s=c.getModel("lineStyle").getLineStyle(),h=c.get("disabled"),l=c.get("focus"),u=c.get("blurScope")}a.useStyle(e.getItemVisual(n,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var f=a.ensureState("emphasis");f.style=s,wr(this,l,u,h)},t.prototype.updateLayout=function(e,n){var i=this.childAt(0);i.setShape("points",e.getItemLayout(n))},t}(Dt),dOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return t.prototype.createLine=function(e,n,i){return new uj(e,n,i)},t.prototype._updateAnimationPoints=function(e,n){this._points=n;for(var i=[0],a=0,o=1;o<n.length;o++){var s=n[o-1],l=n[o];a+=ou(s,l),i.push(a)}if(a===0){this._length=0;return}for(var o=0;o<i.length;o++)i[o]/=a;this._offsets=i,this._length=a},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var n=e.__t<1?e.__t:2-e.__t,i=this._points,a=this._offsets,o=i.length;if(a){var s=this._lastFrame,l;if(n<this._lastFramePercent){var u=Math.min(s+1,o-1);for(l=u;l>=0&&!(a[l]<=n);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>n);l++);l=Math.min(l-1,o-2)}var h=(n-a[l])/(a[l+1]-a[l]),c=i[l],f=i[l+1];e.x=c[0]*(1-h)+h*f[0],e.y=c[1]*(1-h)+h*f[1];var d=e.__t<1?f[0]-c[0]:c[0]-f[0],g=e.__t<1?f[1]-c[1]:c[1]-f[1];e.rotation=-Math.atan2(g,d)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=n,e.ignore=!1}},t}(lj),gOt=function(){function r(){this.polyline=!1,this.curveness=0,this.segs=[]}return r}(),pOt=function(r){U(t,r);function t(e){var n=r.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new gOt},t.prototype.buildPath=function(e,n){var i=n.segs,a=n.curveness,o;if(n.polyline)for(o=this._off;o<i.length;){var s=i[o++];if(s>0){e.moveTo(i[o++],i[o++]);for(var l=1;l<s;l++)e.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var u=i[o++],h=i[o++],c=i[o++],f=i[o++];if(e.moveTo(u,h),a>0){var d=(u+c)/2-(h-f)*a,g=(h+f)/2-(c-u)*a;e.quadraticCurveTo(d,g,c,f)}else e.lineTo(c,f)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(e,n){var i=this.shape,a=i.segs,o=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var l=0,u=0;u<a.length;){var h=a[u++];if(h>0)for(var c=a[u++],f=a[u++],d=1;d<h;d++){var g=a[u++],p=a[u++];if(Jl(c,f,g,p,s,e,n))return l}l++}else for(var l=0,u=0;u<a.length;){var c=a[u++],f=a[u++],g=a[u++],p=a[u++];if(o>0){var v=(c+g)/2-(f-p)*o,m=(f+p)/2-(g-c)*o;if(NH(c,f,v,m,g,p,s,e,n))return l}else if(Jl(c,f,g,p,s,e,n))return l;l++}return-1},t.prototype.contain=function(e,n){var i=this.transformCoordToLocal(e,n),a=this.getBoundingRect();if(e=i[0],n=i[1],a.contain(e,n)){var o=this.hoverDataIdx=this.findDataIndex(e,n);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,i=n.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<i.length;){var h=i[u++],c=i[u++];a=Math.min(h,a),s=Math.max(h,s),o=Math.min(c,o),l=Math.max(c,l)}e=this._rect=new jt(a,o,s,l)}return e},t}(ae),vOt=function(){function r(){this.group=new Dt}return r.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},r.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(t,e){var n=this._newAdded[0],i=e.getLayout("linesPoints"),a=n&&n.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+i.length);s.set(a),s.set(i,o),n.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,e),l.__startIndex=t.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new pOt({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},r.prototype._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var a=e.getVisual("style");a&&a.stroke&&t.setStyle("stroke",a.stroke),t.setStyle("fill",null);var o=Ft(t);o.seriesIndex=i.seriesIndex,t.on("mousemove",function(s){o.dataIndex=null;var l=t.hoverDataIdx;l>0&&(o.dataIndex=l+t.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),hj={seriesType:"lines",plan:np(),reset:function(r){var t=r.coordinateSystem;if(t){var e=r.get("polyline"),n=r.pipelineContext.large;return{progress:function(i,a){var o=[];if(n){var s=void 0,l=i.end-i.start;if(e){for(var u=0,h=i.start;h<i.end;h++)u+=r.getLineCoordsCount(h);s=new Float32Array(l+u*2)}else s=new Float32Array(l*4);for(var c=0,f=[],h=i.start;h<i.end;h++){var d=r.getLineCoords(h,o);e&&(s[c++]=d);for(var g=0;g<d;g++)f=t.dataToPoint(o[g],!1,f),s[c++]=f[0],s[c++]=f[1]}a.setLayout("linesPoints",s)}else for(var h=i.start;h<i.end;h++){var p=a.getItemModel(h),d=r.getLineCoords(h,o),v=[];if(e)for(var m=0;m<d;m++)v.push(t.dataToPoint(o[m]));else{v[0]=t.dataToPoint(o[0]),v[1]=t.dataToPoint(o[1]);var y=p.get(["lineStyle","curveness"]);+y&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*y,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*y])}a.setItemLayout(h,v)}}}}}},mOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a=e.getData(),o=this._updateLineDraw(a,e),s=e.get("zlevel"),l=e.get(["effect","trailLength"]),u=i.getZr(),h=u.painter.getType()==="svg";h||u.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!h&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&l>0&&(h||u.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var c=e.get("clip",!0)&&a0(e.coordinateSystem,!1,e);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,n,i){var a=e.getData(),o=this._updateLineDraw(a,e);o.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},t.prototype.incrementalRender=function(e,n,i){this._lineDraw.incrementalUpdate(e,n.getData()),this._finished=e.end===n.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,n,i){var a=e.getData(),o=e.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=hj.reset(e,n,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},t.prototype._updateLineDraw=function(e,n){var i=this._lineDraw,a=this._showEffect(n),o=!!n.get("polyline"),s=n.pipelineContext,l=s.large;return(!i||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new vOt:new sD(o?a?dOt:uj:a?lj:oD),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(i.group),i},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var n=e.getZr(),i=n.painter.getType()==="svg";!i&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},t.prototype.dispose=function(e,n){this.remove(e,n)},t.type="lines",t}(Ke),yOt=typeof Uint32Array>"u"?Array:Uint32Array,_Ot=typeof Float64Array>"u"?Array:Float64Array;function $4(r){var t=r.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(r.data=nt(t,function(e){var n=[e[0].coord,e[1].coord],i={coords:n};return e[0].name&&(i.fromName=e[0].name),e[1].name&&(i.toName=e[1].name),BP([i,e[0],e[1]])}))}var xOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.init=function(e){e.data=e.data||[],$4(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),r.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(e){if($4(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}r.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var n=this._processFlatCoordsArray(e.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=kx(this._flatCoords,n.flatCoords),this._flatCoordsOffset=kx(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),e.data=new Float32Array(n.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var n=this.getData().getItemModel(e),i=n.option instanceof Array?n.option:n.getShallow("coords");return i},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,n){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[e*2],a=this._flatCoordsOffset[e*2+1],o=0;o<a;o++)n[o]=n[o]||[],n[o][0]=this._flatCoords[i+o*2],n[o][1]=this._flatCoords[i+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(e),o=0;o<s.length;o++)n[o]=n[o]||[],n[o][0]=s[o][0],n[o][1]=s[o][1];return s.length}},t.prototype._processFlatCoordsArray=function(e){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),be(e[0])){for(var i=e.length,a=new yOt(i),o=new _Ot(i),s=0,l=0,u=0,h=0;h<i;){u++;var c=e[h++];a[l++]=s+n,a[l++]=c;for(var f=0;f<c;f++){var d=e[h++],g=e[h++];o[s++]=d,o[s++]=g}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,n){var i=new vi(["value"],this);return i.hasItemOption=!1,i.initData(e.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var u=a.value;if(u!=null)return u instanceof Array?u[l]:u}),i},t.prototype.formatTooltip=function(e,n,i){var a=this.getData(),o=a.getItemModel(e),s=o.get("name");if(s)return s;var l=o.get("fromName"),u=o.get("toName"),h=[];return l!=null&&h.push(l),u!=null&&h.push(u),cn("nameValue",{name:h.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),n=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&n>0?n+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(lr);function X_(r){return r instanceof Array||(r=[r,r]),r}var SOt={seriesType:"lines",reset:function(r){var t=X_(r.get("symbol")),e=X_(r.get("symbolSize")),n=r.getData();n.setVisual("fromSymbol",t&&t[0]),n.setVisual("toSymbol",t&&t[1]),n.setVisual("fromSymbolSize",e&&e[0]),n.setVisual("toSymbolSize",e&&e[1]);function i(a,o){var s=a.getItemModel(o),l=X_(s.getShallow("symbol",!0)),u=X_(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),u[0]&&a.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&a.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:n.hasItemOption?i:null}}};function wOt(r){r.registerChartView(mOt),r.registerSeriesModel(xOt),r.registerLayout(hj),r.registerVisual(SOt)}var TOt=256,bOt=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Gu.createCanvas();this.canvas=t}return r.prototype.update=function(t,e,n,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),h=this.pointSize+this.blurSize,c=this.canvas,f=c.getContext("2d"),d=t.length;c.width=e,c.height=n;for(var g=0;g<d;++g){var p=t[g],v=p[0],m=p[1],y=p[2],_=i(y);f.globalAlpha=_,f.drawImage(s,v-h,m-h)}if(!c.width||!c.height)return c;for(var x=f.getImageData(0,0,c.width,c.height),w=x.data,S=0,T=w.length,b=this.minOpacity,E=this.maxOpacity,C=E-b;S<T;){var _=w[S+3]/256,M=Math.floor(_*(TOt-1))*4;if(_>0){var A=o(_)?l:u;_>0&&(_=_*C+b),w[S++]=A[M],w[S++]=A[M+1],w[S++]=A[M+2],w[S++]=A[M+3]*_*256}else S+=4}return f.putImageData(x,0,0),c},r.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Gu.createCanvas()),e=this.pointSize+this.blurSize,n=e*2;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),t},r.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,i=n[e]||(n[e]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)t[e](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},r}();function EOt(r,t,e){var n=r[1]-r[0];t=nt(t,function(o){return{interval:[(o.interval[0]-r[0])/n,(o.interval[1]-r[0])/n]}});var i=t.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&e[s]}}function COt(r,t){var e=r[1]-r[0];return t=[(t[0]-r[0])/e,(t[1]-r[0])/e],function(n){return n>=t[0]&&n<=t[1]}}function Y4(r){var t=r.dimensions;return t[0]==="lng"&&t[1]==="lat"}var MOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a;n.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===e&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=e.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(e,i,0,e.getData().count()):Y4(o)&&this._renderOnGeo(o,e,a,i)},t.prototype.incrementalPrepareRender=function(e,n,i){this.group.removeAll()},t.prototype.incrementalRender=function(e,n,i,a){var o=n.coordinateSystem;o&&(Y4(o)?this.render(n,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(n,a,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){Qu(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,n,i,a,o){var s=e.coordinateSystem,l=sf(s,"cartesian2d"),u,h,c,f;if(l){var d=s.getAxis("x"),g=s.getAxis("y");u=d.getBandWidth()+.5,h=g.getBandWidth()+.5,c=d.scale.getExtent(),f=g.scale.getExtent()}for(var p=this.group,v=e.getData(),m=e.getModel(["emphasis","itemStyle"]).getItemStyle(),y=e.getModel(["blur","itemStyle"]).getItemStyle(),_=e.getModel(["select","itemStyle"]).getItemStyle(),x=e.get(["itemStyle","borderRadius"]),w=hn(e),S=e.getModel("emphasis"),T=S.get("focus"),b=S.get("blurScope"),E=S.get("disabled"),C=l?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],M=i;M<a;M++){var A=void 0,R=v.getItemVisual(M,"style");if(l){var P=v.get(C[0],M),L=v.get(C[1],M);if(isNaN(v.get(C[2],M))||isNaN(P)||isNaN(L)||P<c[0]||P>c[1]||L<f[0]||L>f[1])continue;var D=s.dataToPoint([P,L]);A=new ve({shape:{x:D[0]-u/2,y:D[1]-h/2,width:u,height:h},style:R})}else{if(isNaN(v.get(C[1],M)))continue;A=new ve({z2:1,shape:s.dataToRect([v.get(C[0],M)]).contentShape,style:R})}if(v.hasItemOption){var k=v.getItemModel(M),F=k.getModel("emphasis");m=F.getModel("itemStyle").getItemStyle(),y=k.getModel(["blur","itemStyle"]).getItemStyle(),_=k.getModel(["select","itemStyle"]).getItemStyle(),x=k.get(["itemStyle","borderRadius"]),T=F.get("focus"),b=F.get("blurScope"),E=F.get("disabled"),w=hn(k)}A.shape.r=x;var B=e.getRawValue(M),V="-";B&&B[2]!=null&&(V=B[2]+""),Nn(A,w,{labelFetcher:e,labelDataIndex:M,defaultOpacity:R.opacity,defaultText:V}),A.ensureState("emphasis").style=m,A.ensureState("blur").style=y,A.ensureState("select").style=_,wr(A,T,b,E),A.incremental=o,o&&(A.states.emphasis.hoverLayer=!0),p.add(A),v.setItemGraphicEl(M,A),this._progressiveEls&&this._progressiveEls.push(A)}},t.prototype._renderOnGeo=function(e,n,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=n.getData(),u=this._hmLayer||this._hmLayer||new bOt;u.blurSize=n.get("blurSize"),u.pointSize=n.get("pointSize"),u.minOpacity=n.get("minOpacity"),u.maxOpacity=n.get("maxOpacity");var h=e.getViewRect().clone(),c=e.getRoamTransform();h.applyTransform(c);var f=Math.max(h.x,0),d=Math.max(h.y,0),g=Math.min(h.width+h.x,a.getWidth()),p=Math.min(h.height+h.y,a.getHeight()),v=g-f,m=p-d,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],_=l.mapArray(y,function(T,b,E){var C=e.dataToPoint([T,b]);return C[0]-=f,C[1]-=d,C.push(E),C}),x=i.getExtent(),w=i.type==="visualMap.continuous"?COt(x,i.option.range):EOt(x,i.getPieceList(),i.option.selected);u.update(_,v,m,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},w);var S=new bn({style:{width:v,height:m,x:f,y:d,image:u.canvas},silent:!0});this.group.add(S)},t.type="heatmap",t}(Ke),AOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,n){return Sl(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=Qy.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(lr);function IOt(r){r.registerChartView(MOt),r.registerSeriesModel(AOt)}var ROt=["itemStyle","borderWidth"],X4=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],DC=new xl,POt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a=this.group,o=e.getData(),s=this._data,l=e.coordinateSystem,u=l.getBaseAxis(),h=u.isHorizontal(),c=l.master.getRect(),f={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:e,coordSys:l,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:h,valueDim:X4[+h],categoryDim:X4[1-+h]};o.diff(s).add(function(g){if(o.hasValue(g)){var p=j4(o,g),v=Z4(o,g,p,f),m=K4(o,f,v);o.setItemGraphicEl(g,m),a.add(m),J4(m,f,v)}}).update(function(g,p){var v=s.getItemGraphicEl(p);if(!o.hasValue(g)){a.remove(v);return}var m=j4(o,g),y=Z4(o,g,m,f),_=vj(o,y);v&&_!==v.__pictorialShapeStr&&(a.remove(v),o.setItemGraphicEl(g,null),v=null),v?GOt(v,f,y):v=K4(o,f,y,!0),o.setItemGraphicEl(g,v),v.__pictorialSymbolMeta=y,a.add(v),J4(v,f,y)}).remove(function(g){var p=s.getItemGraphicEl(g);p&&q4(s,g,p.__pictorialSymbolMeta.animationModel,p)}).execute();var d=e.get("clip",!0)?a0(e.coordinateSystem,!1,e):null;return d?a.setClipPath(d):a.removeClipPath(),this._data=o,this.group},t.prototype.remove=function(e,n){var i=this.group,a=this._data;e.get("animation")?a&&a.eachItemGraphicEl(function(o){q4(a,Ft(o).dataIndex,e,o)}):i.removeAll()},t.type="pictorialBar",t}(Ke);function Z4(r,t,e,n){var i=r.getItemLayout(t),a=e.get("symbolRepeat"),o=e.get("symbolClip"),s=e.get("symbolPosition")||"start",l=e.get("symbolRotate"),u=(l||0)*Math.PI/180||0,h=e.get("symbolPatternSize")||2,c=e.isAnimationEnabled(),f={dataIndex:t,layout:i,itemModel:e,symbolType:r.getItemVisual(t,"symbol")||"circle",style:r.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:h,rotation:u,animationModel:c?e:null,hoverScale:c&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};LOt(e,a,i,n,f),DOt(r,t,i,a,o,f.boundingLength,f.pxSign,h,n,f),OOt(e,f.symbolScale,u,n,f);var d=f.symbolSize,g=af(e.get("symbolOffset"),d);return NOt(e,d,i,a,o,g,s,f.valueLineWidth,f.boundingLength,f.repeatCutLength,n,f),f}function LOt(r,t,e,n,i){var a=n.valueDim,o=r.get("symbolBoundingData"),s=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),u=1-+(e[a.wh]<=0),h;if(rt(o)){var c=[OC(s,o[0])-l,OC(s,o[1])-l];c[1]<c[0]&&c.reverse(),h=c[u]}else o!=null?h=OC(s,o)-l:t?h=n.coordSysExtent[a.index][u]-l:h=e[a.wh];i.boundingLength=h,t&&(i.repeatCutLength=e[a.wh]),i.pxSign=h>0?1:-1}function OC(r,t){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(t)))}function DOt(r,t,e,n,i,a,o,s,l,u){var h=l.valueDim,c=l.categoryDim,f=Math.abs(e[c.wh]),d=r.getItemVisual(t,"symbolSize"),g;rt(d)?g=d.slice():d==null?g=["100%","100%"]:g=[d,d],g[c.index]=ft(g[c.index],f),g[h.index]=ft(g[h.index],n?f:Math.abs(a)),u.symbolSize=g;var p=u.symbolScale=[g[0]/s,g[1]/s];p[h.index]*=(l.isHorizontal?-1:1)*o}function OOt(r,t,e,n,i){var a=r.get(ROt)||0;a&&(DC.attr({scaleX:t[0],scaleY:t[1],rotation:e}),DC.updateTransform(),a/=DC.getLineScale(),a*=t[n.valueDim.index]),i.valueLineWidth=a||0}function NOt(r,t,e,n,i,a,o,s,l,u,h,c){var f=h.categoryDim,d=h.valueDim,g=c.pxSign,p=Math.max(t[d.index]+s,0),v=p;if(n){var m=Math.abs(l),y=Sn(r.get("symbolMargin"),"15%")+"",_=!1;y.lastIndexOf("!")===y.length-1&&(_=!0,y=y.slice(0,y.length-1));var x=ft(y,t[d.index]),w=Math.max(p+x*2,0),S=_?0:x*2,T=SH(n),b=T?n:Q4((m+S)/w),E=m-b*p;x=E/2/(_?b:Math.max(b-1,1)),w=p+x*2,S=_?0:x*2,!T&&n!=="fixed"&&(b=u?Q4((Math.abs(u)+S)/w):0),v=b*w-S,c.repeatTimes=b,c.symbolMargin=x}var C=g*(v/2),M=c.pathPosition=[];M[f.index]=e[f.wh]/2,M[d.index]=o==="start"?C:o==="end"?l-C:l/2,a&&(M[0]+=a[0],M[1]+=a[1]);var A=c.bundlePosition=[];A[f.index]=e[f.xy],A[d.index]=e[d.xy];var R=c.barRectShape=tt({},e);R[d.wh]=g*Math.max(Math.abs(e[d.wh]),Math.abs(M[d.index]+C)),R[f.wh]=e[f.wh];var P=c.clipShape={};P[f.xy]=-e[f.xy],P[f.wh]=h.ecSize[f.wh],P[d.xy]=0,P[d.wh]=e[d.wh]}function cj(r){var t=r.symbolPatternSize,e=Ur(r.symbolType,-t/2,-t/2,t,t);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function fj(r,t,e,n){var i=r.__pictorialBundle,a=e.symbolSize,o=e.valueLineWidth,s=e.pathPosition,l=t.valueDim,u=e.repeatTimes||0,h=0,c=a[t.valueDim.index]+o+e.symbolMargin*2;for(pD(r,function(p){p.__pictorialAnimationIndex=h,p.__pictorialRepeatTimes=u,h<u?Xd(p,null,g(h),e,n):Xd(p,null,{scaleX:0,scaleY:0},e,n,function(){i.remove(p)}),h++});h<u;h++){var f=cj(e);f.__pictorialAnimationIndex=h,f.__pictorialRepeatTimes=u,i.add(f);var d=g(h);Xd(f,{x:d.x,y:d.y,scaleX:0,scaleY:0},{scaleX:d.scaleX,scaleY:d.scaleY,rotation:d.rotation},e,n)}function g(p){var v=s.slice(),m=e.pxSign,y=p;return(e.symbolRepeatDirection==="start"?m>0:m<0)&&(y=u-1-p),v[l.index]=c*(y-u/2+.5)+s[l.index],{x:v[0],y:v[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function dj(r,t,e,n){var i=r.__pictorialBundle,a=r.__pictorialMainPath;a?Xd(a,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,n):(a=r.__pictorialMainPath=cj(e),i.add(a),Xd(a,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,n))}function gj(r,t,e){var n=tt({},t.barRectShape),i=r.__pictorialBarRect;i?Xd(i,null,{shape:n},t,e):(i=r.__pictorialBarRect=new ve({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,r.add(i))}function pj(r,t,e,n){if(e.symbolClip){var i=r.__pictorialClipPath,a=tt({},e.clipShape),o=t.valueDim,s=e.animationModel,l=e.dataIndex;if(i)Ae(i,{shape:a},s,l);else{a[o.wh]=0,i=new ve({shape:a}),r.__pictorialBundle.setClipPath(i),r.__pictorialClipPath=i;var u={};u[o.wh]=e.clipShape[o.wh],nf[n?"updateProps":"initProps"](i,{shape:u},s,l)}}}function j4(r,t){var e=r.getItemModel(t);return e.getAnimationDelayParams=FOt,e.isAnimationEnabled=kOt,e}function FOt(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function kOt(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function K4(r,t,e,n){var i=new Dt,a=new Dt;return i.add(a),i.__pictorialBundle=a,a.x=e.bundlePosition[0],a.y=e.bundlePosition[1],e.symbolRepeat?fj(i,t,e):dj(i,t,e),gj(i,e,n),pj(i,t,e,n),i.__pictorialShapeStr=vj(r,e),i.__pictorialSymbolMeta=e,i}function GOt(r,t,e){var n=e.animationModel,i=e.dataIndex,a=r.__pictorialBundle;Ae(a,{x:e.bundlePosition[0],y:e.bundlePosition[1]},n,i),e.symbolRepeat?fj(r,t,e,!0):dj(r,t,e,!0),gj(r,e,!0),pj(r,t,e,!0)}function q4(r,t,e,n){var i=n.__pictorialBarRect;i&&i.removeTextContent();var a=[];pD(n,function(o){a.push(o)}),n.__pictorialMainPath&&a.push(n.__pictorialMainPath),n.__pictorialClipPath&&(e=null),I(a,function(o){zu(o,{scaleX:0,scaleY:0},e,t,function(){n.parent&&n.parent.remove(n)})}),r.setItemGraphicEl(t,null)}function vj(r,t){return[r.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function pD(r,t,e){I(r.__pictorialBundle.children(),function(n){n!==r.__pictorialBarRect&&t.call(e,n)})}function Xd(r,t,e,n,i,a){t&&r.attr(t),n.symbolClip&&!i?e&&r.attr(e):e&&nf[i?"updateProps":"initProps"](r,e,n.animationModel,n.dataIndex,a)}function J4(r,t,e){var n=e.dataIndex,i=e.itemModel,a=i.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),u=i.getShallow("cursor"),h=a.get("focus"),c=a.get("blurScope"),f=a.get("scale");pD(r,function(p){if(p instanceof bn){var v=p.style;p.useStyle(tt({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},e.style))}else p.useStyle(e.style);var m=p.ensureState("emphasis");m.style=o,f&&(m.scaleX=p.scaleX*1.1,m.scaleY=p.scaleY*1.1),p.ensureState("blur").style=s,p.ensureState("select").style=l,u&&(p.cursor=u),p.z2=e.z2});var d=t.valueDim.posDesc[+(e.boundingLength>0)],g=r.__pictorialBarRect;g.ignoreClip=!0,Nn(g,hn(i),{labelFetcher:t.seriesModel,labelDataIndex:n,defaultText:xg(t.seriesModel.getData(),n),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:d}),wr(r,h,c,a.get("disabled"))}function Q4(r){var t=Math.round(r);return Math.abs(r-t)<1e-4?t:Math.ceil(r)}var BOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return t.prototype.getInitialData=function(e){return e.stack=null,r.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=th(sy.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(sy);function zOt(r){r.registerChartView(POt),r.registerSeriesModel(BOt),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Wt(QY,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,tX("pictorialBar"))}var VOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._layers=[],e}return t.prototype.render=function(e,n,i){var a=e.getData(),o=this,s=this.group,l=e.getLayerSeries(),u=a.getLayout("layoutInfo"),h=u.rect,c=u.boundaryGap;s.x=0,s.y=h.y+c[0];function f(v){return v.name}var d=new cl(this._layersSeries||[],l,f,f),g=[];d.add(_t(p,this,"add")).update(_t(p,this,"update")).remove(_t(p,this,"remove")).execute();function p(v,m,y){var _=o._layers;if(v==="remove"){s.remove(_[m]);return}for(var x=[],w=[],S,T=l[m].indices,b=0;b<T.length;b++){var E=a.getItemLayout(T[b]),C=E.x,M=E.y0,A=E.y;x.push(C,M),w.push(C,M+A),S=a.getItemVisual(T[b],"style")}var R,P=a.getItemLayout(T[0]),L=e.getModel("label"),D=L.get("margin"),k=e.getModel("emphasis");if(v==="add"){var F=g[m]=new Dt;R=new UX({shape:{points:x,stackedOnPoints:w,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),F.add(R),s.add(F),e.isAnimationEnabled()&&R.setClipPath(UOt(R.getBoundingRect(),e,function(){R.removeClipPath()}))}else{var F=_[y];R=F.childAt(0),s.add(F),g[m]=F,Ae(R,{shape:{points:x,stackedOnPoints:w}},e),xo(R)}Nn(R,hn(e),{labelDataIndex:T[b-1],defaultText:a.getName(T[b-1]),inheritColor:S.fill},{normal:{verticalAlign:"middle"}}),R.setTextConfig({position:null,local:!0});var B=R.getTextContent();B&&(B.x=P.x-D,B.y=P.y0+P.y/2),R.useStyle(S),a.setItemGraphicEl(m,R),On(R,e),wr(R,k.get("focus"),k.get("blurScope"),k.get("disabled"))}this._layersSeries=l,this._layers=g},t.type="themeRiver",t}(Ke);function UOt(r,t,e){var n=new ve({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return pr(n,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},t,e),n}var NC=2,WOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new l0(_t(this.getData,this),_t(this.getRawData,this))},t.prototype.fixData=function(e){var n=e.length,i={},a=WA(e,function(f){return i.hasOwnProperty(f[0]+"")||(i[f[0]+""]=-1),f[2]}),o=[];a.buckets.each(function(f,d){o.push({name:d,dataList:f})});for(var s=o.length,l=0;l<s;++l){for(var u=o[l].name,h=0;h<o[l].dataList.length;++h){var c=o[l].dataList[h][0]+"";i[c]=l}for(var c in i)i.hasOwnProperty(c)&&i[c]!==l&&(i[c]=l,e[n]=[c,0,u],n++)}return e},t.prototype.getInitialData=function(e,n){for(var i=this.getReferringComponents("singleAxis",Br).models[0],a=i.get("type"),o=ze(e.data,function(g){return g[2]!==void 0}),s=this.fixData(o||[]),l=[],u=this.nameMap=wt(),h=0,c=0;c<s.length;++c)l.push(s[c][NC]),u.get(s[c][NC])||(u.set(s[c][NC],h),h++);var f=e0(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:sS(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,d=new vi(f,this);return d.initData(s),d},t.prototype.getLayerSeries=function(){for(var e=this.getData(),n=e.count(),i=[],a=0;a<n;++a)i[a]=a;var o=e.mapDimension("single"),s=WA(i,function(u){return e.get("name",u)}),l=[];return s.buckets.each(function(u,h){u.sort(function(c,f){return e.get(o,c)-e.get(o,f)}),l.push({name:h,indices:u})}),l},t.prototype.getAxisTooltipData=function(e,n,i){rt(e)||(e=e?[e]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,u,h=0;h<l;++h){for(var c=Number.MAX_VALUE,f=-1,d=o[h].indices.length,g=0;g<d;++g){var p=a.get(e[0],o[h].indices[g]),v=Math.abs(p-n);v<=c&&(u=p,c=v,f=o[h].indices[g])}s.push(f)}return{dataIndices:s,nestestValue:u}},t.prototype.formatTooltip=function(e,n,i){var a=this.getData(),o=a.getName(e),s=a.get(a.mapDimension("value"),e);return cn("nameValue",{name:o,value:s})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(lr);function HOt(r,t){r.eachSeriesByType("themeRiver",function(e){var n=e.getData(),i=e.coordinateSystem,a={},o=i.getRect();a.rect=o;var s=e.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=ft(s[0],o.height),s[1]=ft(s[1],o.height);var u=o.height-s[0]-s[1];tz(n,e,u)}else{s[0]=ft(s[0],o.width),s[1]=ft(s[1],o.width);var h=o.width-s[0]-s[1];tz(n,e,h)}n.setLayout("layoutInfo",a)})}function tz(r,t,e){if(r.count())for(var n=t.coordinateSystem,i=t.getLayerSeries(),a=r.mapDimension("single"),o=r.mapDimension("value"),s=nt(i,function(v){return nt(v.indices,function(m){var y=n.dataToPoint(r.get(a,m));return y[1]=r.get(o,m),y})}),l=$Ot(s),u=l.y0,h=e/l.max,c=i.length,f=i[0].indices.length,d,g=0;g<f;++g){d=u[g]*h,r.setItemLayout(i[0].indices[g],{layerIndex:0,x:s[0][g][0],y0:d,y:s[0][g][1]*h});for(var p=1;p<c;++p)d+=s[p-1][g][1]*h,r.setItemLayout(i[p].indices[g],{layerIndex:p,x:s[p][g][0],y0:d,y:s[p][g][1]*h})}}function $Ot(r){for(var t=r.length,e=r[0].length,n=[],i=[],a=0,o=0;o<e;++o){for(var s=0,l=0;l<t;++l)s+=r[l][o][1];s>a&&(a=s),n.push(s)}for(var u=0;u<e;++u)i[u]=(a-n[u])/2;a=0;for(var h=0;h<e;++h){var c=n[h]+i[h];c>a&&(a=c)}return{y0:i,max:a}}function YOt(r){r.registerChartView(VOt),r.registerSeriesModel(WOt),r.registerLayout(HOt),r.registerProcessor(s0("themeRiver"))}var XOt=2,ZOt=4,ez=function(r){U(t,r);function t(e,n,i,a){var o=r.call(this)||this;o.z2=XOt,o.textConfig={inside:!0},Ft(o).seriesIndex=n.seriesIndex;var s=new xe({z2:ZOt,silent:e.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,e,n,i,a),o}return t.prototype.updateData=function(e,n,i,a,o){this.node=n,n.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var s=this;Ft(s).dataIndex=n.dataIndex;var l=n.getModel(),u=l.getModel("emphasis"),h=n.getLayout(),c=tt({},h);c.label=null;var f=n.getVisual("style");f.lineJoin="bevel";var d=n.getVisual("decal");d&&(f.decal=yg(d,o));var g=vc(l.getModel("itemStyle"),c,!0);tt(c,g),I(Si,function(y){var _=s.ensureState(y),x=l.getModel([y,"itemStyle"]);_.style=x.getItemStyle();var w=vc(x,c);w&&(_.shape=w)}),e?(s.setShape(c),s.shape.r=h.r0,pr(s,{shape:{r:h.r}},i,n.dataIndex)):(Ae(s,{shape:c},i),xo(s)),s.useStyle(f),this._updateLabel(i);var p=l.getShallow("cursor");p&&s.attr("cursor",p),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var v=u.get("focus"),m=v==="ancestor"?n.getAncestorsIndices():v==="descendant"?n.getDescendantIndices():v;wr(this,m,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e){var n=this,i=this.node.getModel(),a=i.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,u=Math.cos(l),h=Math.sin(l),c=this,f=c.getTextContent(),d=this.node.dataIndex,g=a.get("minAngle")/180*Math.PI,p=a.get("show")&&!(g!=null&&Math.abs(s)<g);f.ignore=!p,I(jm,function(m){var y=m==="normal"?i.getModel("label"):i.getModel([m,"label"]),_=m==="normal",x=_?f:f.ensureState(m),w=e.getFormattedLabel(d,m);_&&(w=w||n.node.name),x.style=sr(y,{},null,m!=="normal",!0),w&&(x.style.text=w);var S=y.get("show");S!=null&&!_&&(x.ignore=!S);var T=v(y,"position"),b=_?c:c.states[m],E=b.style.fill;b.textConfig={outsideFill:y.get("color")==="inherit"?E:null,inside:T!=="outside"};var C,M=v(y,"distance")||0,A=v(y,"align"),R=v(y,"rotate"),P=Math.PI*.5,L=Math.PI*1.5,D=aa(R==="tangential"?Math.PI/2-l:l),k=D>P&&!Xm(D-P)&&D<L;T==="outside"?(C=o.r+M,A=k?"right":"left"):!A||A==="center"?(s===2*Math.PI&&o.r0===0?C=0:C=(o.r+o.r0)/2,A="center"):A==="left"?(C=o.r0+M,A=k?"right":"left"):A==="right"&&(C=o.r-M,A=k?"left":"right"),x.style.align=A,x.style.verticalAlign=v(y,"verticalAlign")||"middle",x.x=C*u+o.cx,x.y=C*h+o.cy;var F=0;R==="radial"?F=aa(-l)+(k?Math.PI:0):R==="tangential"?F=aa(Math.PI/2-l)+(k?Math.PI:0):be(R)&&(F=R*Math.PI/180),x.rotation=aa(F)});function v(m,y){var _=m.get(y);return _??a.get(y)}f.dirtyStyle()},t}(wi),WI="sunburstRootToNode",rz="sunburstHighlight",jOt="sunburstUnhighlight";function KOt(r){r.registerAction({type:WI,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(i,a){var o=uy(t,[WI],i);if(o){var s=i.getViewRoot();s&&(t.direction=eD(s,o.node)?"rollUp":"drillDown"),i.resetViewRoot(o.node)}}}),r.registerAction({type:rz,update:"none"},function(t,e,n){t=tt({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},i);function i(a){var o=uy(t,[rz],a);o&&(t.dataIndex=o.node.dataIndex)}n.dispatchAction(tt(t,{type:"highlight"}))}),r.registerAction({type:jOt,update:"updateView"},function(t,e,n){t=tt({},t),n.dispatchAction(tt(t,{type:"downplay"}))})}var qOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i,a){var o=this;this.seriesModel=e,this.api=i,this.ecModel=n;var s=e.getData(),l=s.tree.root,u=e.getViewRoot(),h=this.group,c=e.get("renderLabelForZeroData"),f=[];u.eachNode(function(y){f.push(y)});var d=this._oldChildren||[];g(f,d),m(l,u),this._initEvents(),this._oldChildren=f;function g(y,_){if(y.length===0&&_.length===0)return;new cl(_,y,x,x).add(w).update(w).remove(Wt(w,null)).execute();function x(S){return S.getId()}function w(S,T){var b=S==null?null:y[S],E=T==null?null:_[T];p(b,E)}}function p(y,_){if(!c&&y&&!y.getValue()&&(y=null),y!==l&&_!==l){if(_&&_.piece)y?(_.piece.updateData(!1,y,e,n,i),s.setItemGraphicEl(y.dataIndex,_.piece)):v(_);else if(y){var x=new ez(y,e,n,i);h.add(x),s.setItemGraphicEl(y.dataIndex,x)}}}function v(y){y&&y.piece&&(h.remove(y.piece),y.piece=null)}function m(y,_){_.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,y,e,n,i):(o.virtualPiece=new ez(y,e,n,i),h.add(o.virtualPiece)),_.piece.off("click"),o.virtualPiece.on("click",function(x){o._rootToNode(_.parentNode)})):o.virtualPiece&&(h.remove(o.virtualPiece),o.virtualPiece=null)}},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(n){var i=!1,a=e.seriesModel.getViewRoot();a.eachNode(function(o){if(!i&&o.piece&&o.piece===n.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")e._rootToNode(o);else if(s==="link"){var l=o.getModel(),u=l.get("link");if(u){var h=l.get("target",!0)||"_blank";Qx(u,h)}}i=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:WI,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,n){var i=n.getData(),a=i.getItemLayout(0);if(a){var o=e[0]-a.cx,s=e[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="sunburst",t}(Ke),JOt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e,n){var i={name:e.name,children:e.data};mj(i);var a=this._levelModels=nt(e.levels||[],function(l){return new Oe(l,this,n)},this),o=tD.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(u,h){var c=o.getNodeByDataIndex(h),f=a[c.depth];return f&&(u.parentModel=f),u})}return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(e){var n=r.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=hT(i,this),n},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;(!e||e!==n&&!n.contains(e))&&(this._viewRoot=n)},t.prototype.enableAriaDecal=function(){wZ(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(lr);function mj(r){var t=0;I(r.children,function(n){mj(n);var i=n.value;rt(i)&&(i=i[0]),t+=i});var e=r.value;rt(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),rt(r.value)?r.value[0]=e:r.value=e}var nz=Math.PI/180;function QOt(r,t,e){t.eachSeriesByType(r,function(n){var i=n.get("center"),a=n.get("radius");rt(a)||(a=[0,a]),rt(i)||(i=[i,i]);var o=e.getWidth(),s=e.getHeight(),l=Math.min(o,s),u=ft(i[0],o),h=ft(i[1],s),c=ft(a[0],l/2),f=ft(a[1],l/2),d=-n.get("startAngle")*nz,g=n.get("minAngle")*nz,p=n.getData().tree.root,v=n.getViewRoot(),m=v.depth,y=n.get("sort");y!=null&&yj(v,y);var _=0;I(v.children,function(D){!isNaN(D.getValue())&&_++});var x=v.getValue(),w=Math.PI/(x||_)*2,S=v.depth>0,T=v.height-(S?-1:1),b=(f-c)/(T||1),E=n.get("clockwise"),C=n.get("stillShowZeroSum"),M=E?1:-1,A=function(D,k){if(D){var F=k;if(D!==p){var B=D.getValue(),V=x===0&&C?w:B*w;V<g&&(V=g),F=k+M*V;var Y=D.depth-m-(S?-1:1),q=c+b*Y,lt=c+b*(Y+1),X=n.getLevelModel(D);if(X){var St=X.get("r0",!0),mt=X.get("r",!0),$=X.get("radius",!0);$!=null&&(St=$[0],mt=$[1]),St!=null&&(q=ft(St,l/2)),mt!=null&&(lt=ft(mt,l/2))}D.setLayout({angle:V,startAngle:k,endAngle:F,clockwise:E,cx:u,cy:h,r0:q,r:lt})}if(D.children&&D.children.length){var K=0;I(D.children,function(et){K+=A(et,k+K)})}return F-k}};if(S){var R=c,P=c+b,L=Math.PI*2;p.setLayout({angle:L,startAngle:d,endAngle:d+L,clockwise:E,cx:u,cy:h,r0:R,r:P})}A(v,d)})}function yj(r,t){var e=r.children||[];r.children=tNt(e,t),e.length&&I(r.children,function(n){yj(n,t)})}function tNt(r,t){if(At(t)){var e=nt(r,function(i,a){var o=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return o}},index:a}});return e.sort(function(i,a){return t(i.params,a.params)}),nt(e,function(i){return r[i.index]})}else{var n=t==="asc";return r.sort(function(i,a){var o=(i.getValue()-a.getValue())*(n?1:-1);return o===0?(i.dataIndex-a.dataIndex)*(n?-1:1):o})}}function eNt(r){var t={};function e(n,i,a){for(var o=n;o&&o.depth>1;)o=o.parentNode;var s=i.getColorFromPalette(o.name||o.dataIndex+"",t);return n.depth>1&&yt(s)&&(s=PA(s,(n.depth-1)/(a-1)*.5)),s}r.eachSeriesByType("sunburst",function(n){var i=n.getData(),a=i.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=e(o,n,a.root.height));var u=i.ensureUniqueItemVisual(o.dataIndex,"style");tt(u,l)})})}function rNt(r){r.registerChartView(qOt),r.registerSeriesModel(JOt),r.registerLayout(Wt(QOt,"sunburst")),r.registerProcessor(Wt(s0,"sunburst")),r.registerVisual(eNt),KOt(r)}var iz={color:"fill",borderColor:"stroke"},nNt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},el=me(),iNt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,n){return Sl(null,this)},t.prototype.getDataParams=function(e,n,i){var a=r.prototype.getDataParams.call(this,e,n);return i&&(a.info=el(i).info),a},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(lr);function aNt(r,t){return t=t||[0,0],nt(["x","y"],function(e,n){var i=this.getAxis(e),a=t[n],o=r[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o))},this)}function oNt(r){var t=r.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:_t(aNt,r)}}}function sNt(r,t){return t=t||[0,0],nt([0,1],function(e){var n=t[e],i=r[e]/2,a=[],o=[];return a[e]=n-i,o[e]=n+i,a[1-e]=o[1-e]=t[1-e],Math.abs(this.dataToPoint(a)[e]-this.dataToPoint(o)[e])},this)}function lNt(r){var t=r.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:r.getZoom()},api:{coord:function(e){return r.dataToPoint(e)},size:_t(sNt,r)}}}function uNt(r,t){var e=this.getAxis(),n=t instanceof Array?t[0]:t,i=(r instanceof Array?r[0]:r)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(n-i)-e.dataToCoord(n+i))}function hNt(r){var t=r.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:_t(uNt,r)}}}function cNt(r,t){return t=t||[0,0],nt(["Radius","Angle"],function(e,n){var i="get"+e+"Axis",a=this[i](),o=t[n],s=r[n]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return e==="Angle"&&(l=l*Math.PI/180),l},this)}function fNt(r){var t=r.getRadiusAxis(),e=r.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:n[1],r0:n[0]},api:{coord:function(i){var a=t.dataToRadius(i[0]),o=e.dataToAngle(i[1]),s=r.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:_t(cNt,r)}}}function dNt(r){var t=r.getRect(),e=r.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(n,i){return r.dataToPoint(n,i)}}}}function _j(r,t,e,n){return r&&(r.legacy||r.legacy!==!1&&!e&&!n&&t!=="tspan"&&(t==="text"||xt(r,"text")))}function xj(r,t,e){var n=r,i,a,o;if(t==="text")o=n;else{o={},xt(n,"text")&&(o.text=n.text),xt(n,"rich")&&(o.rich=n.rich),xt(n,"textFill")&&(o.fill=n.textFill),xt(n,"textStroke")&&(o.stroke=n.textStroke),xt(n,"fontFamily")&&(o.fontFamily=n.fontFamily),xt(n,"fontSize")&&(o.fontSize=n.fontSize),xt(n,"fontStyle")&&(o.fontStyle=n.fontStyle),xt(n,"fontWeight")&&(o.fontWeight=n.fontWeight),a={type:"text",style:o,silent:!0},i={};var s=xt(n,"textPosition");e?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),xt(n,"textPosition")&&(i.position=n.textPosition),xt(n,"textOffset")&&(i.offset=n.textOffset),xt(n,"textRotation")&&(i.rotation=n.textRotation),xt(n,"textDistance")&&(i.distance=n.textDistance)}return az(o,r),I(o.rich,function(l){az(l,l)}),{textConfig:i,textContent:a}}function az(r,t){t&&(t.font=t.textFont||t.font,xt(t,"textStrokeWidth")&&(r.lineWidth=t.textStrokeWidth),xt(t,"textAlign")&&(r.align=t.textAlign),xt(t,"textVerticalAlign")&&(r.verticalAlign=t.textVerticalAlign),xt(t,"textLineHeight")&&(r.lineHeight=t.textLineHeight),xt(t,"textWidth")&&(r.width=t.textWidth),xt(t,"textHeight")&&(r.height=t.textHeight),xt(t,"textBackgroundColor")&&(r.backgroundColor=t.textBackgroundColor),xt(t,"textPadding")&&(r.padding=t.textPadding),xt(t,"textBorderColor")&&(r.borderColor=t.textBorderColor),xt(t,"textBorderWidth")&&(r.borderWidth=t.textBorderWidth),xt(t,"textBorderRadius")&&(r.borderRadius=t.textBorderRadius),xt(t,"textBoxShadowColor")&&(r.shadowColor=t.textBoxShadowColor),xt(t,"textBoxShadowBlur")&&(r.shadowBlur=t.textBoxShadowBlur),xt(t,"textBoxShadowOffsetX")&&(r.shadowOffsetX=t.textBoxShadowOffsetX),xt(t,"textBoxShadowOffsetY")&&(r.shadowOffsetY=t.textBoxShadowOffsetY))}function oz(r,t,e){var n=r;n.textPosition=n.textPosition||e.position||"inside",e.offset!=null&&(n.textOffset=e.offset),e.rotation!=null&&(n.textRotation=e.rotation),e.distance!=null&&(n.textDistance=e.distance);var i=n.textPosition.indexOf("inside")>=0,a=r.fill||"#000";sz(n,t);var o=n.textFill==null;return i?o&&(n.textFill=e.insideFill||"#fff",!n.textStroke&&e.insideStroke&&(n.textStroke=e.insideStroke),!n.textStroke&&(n.textStroke=a),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(o&&(n.textFill=r.fill||e.outsideFill||"#000"),!n.textStroke&&e.outsideStroke&&(n.textStroke=e.outsideStroke)),n.text=t.text,n.rich=t.rich,I(t.rich,function(s){sz(s,s)}),n}function sz(r,t){t&&(xt(t,"fill")&&(r.textFill=t.fill),xt(t,"stroke")&&(r.textStroke=t.fill),xt(t,"lineWidth")&&(r.textStrokeWidth=t.lineWidth),xt(t,"font")&&(r.font=t.font),xt(t,"fontStyle")&&(r.fontStyle=t.fontStyle),xt(t,"fontWeight")&&(r.fontWeight=t.fontWeight),xt(t,"fontSize")&&(r.fontSize=t.fontSize),xt(t,"fontFamily")&&(r.fontFamily=t.fontFamily),xt(t,"align")&&(r.textAlign=t.align),xt(t,"verticalAlign")&&(r.textVerticalAlign=t.verticalAlign),xt(t,"lineHeight")&&(r.textLineHeight=t.lineHeight),xt(t,"width")&&(r.textWidth=t.width),xt(t,"height")&&(r.textHeight=t.height),xt(t,"backgroundColor")&&(r.textBackgroundColor=t.backgroundColor),xt(t,"padding")&&(r.textPadding=t.padding),xt(t,"borderColor")&&(r.textBorderColor=t.borderColor),xt(t,"borderWidth")&&(r.textBorderWidth=t.borderWidth),xt(t,"borderRadius")&&(r.textBorderRadius=t.borderRadius),xt(t,"shadowColor")&&(r.textBoxShadowColor=t.shadowColor),xt(t,"shadowBlur")&&(r.textBoxShadowBlur=t.shadowBlur),xt(t,"shadowOffsetX")&&(r.textBoxShadowOffsetX=t.shadowOffsetX),xt(t,"shadowOffsetY")&&(r.textBoxShadowOffsetY=t.shadowOffsetY),xt(t,"textShadowColor")&&(r.textShadowColor=t.textShadowColor),xt(t,"textShadowBlur")&&(r.textShadowBlur=t.textShadowBlur),xt(t,"textShadowOffsetX")&&(r.textShadowOffsetX=t.textShadowOffsetX),xt(t,"textShadowOffsetY")&&(r.textShadowOffsetY=t.textShadowOffsetY))}var Sj={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},lz=he(Sj);cs(ds,function(r,t){return r[t]=1,r},{});ds.join(", ");var _S=["","style","shape","extra"],Tg=me();function vD(r,t,e,n,i){var a=r+"Animation",o=Kg(r,n,i)||{},s=Tg(t).userDuring;return o.duration>0&&(o.during=s?_t(yNt,{el:t,userDuring:s}):null,o.setToFinal=!0,o.scope=r),tt(o,e[a]),o}function F1(r,t,e,n){n=n||{};var i=n.dataIndex,a=n.isInit,o=n.clearStyle,s=e.isAnimationEnabled(),l=Tg(r),u=t.style;l.userDuring=t.during;var h={},c={};if(xNt(r,t,c),hz("shape",t,c),hz("extra",t,c),!a&&s&&(_Nt(r,t,h),uz("shape",r,t,h),uz("extra",r,t,h),SNt(r,t,u,h)),c.style=u,gNt(r,c,o),vNt(r,t),s)if(a){var f={};I(_S,function(g){var p=g?t[g]:t;p&&p.enterFrom&&(g&&(f[g]=f[g]||{}),tt(g?f[g]:f,p.enterFrom))});var d=vD("enter",r,t,e,i);d.duration>0&&r.animateFrom(f,d)}else pNt(r,t,i||0,e,h);wj(r,t),u?r.dirty():r.markRedraw()}function wj(r,t){for(var e=Tg(r).leaveToProps,n=0;n<_S.length;n++){var i=_S[n],a=i?t[i]:t;a&&a.leaveTo&&(e||(e=Tg(r).leaveToProps={}),i&&(e[i]=e[i]||{}),tt(i?e[i]:e,a.leaveTo))}}function dT(r,t,e,n){if(r){var i=r.parent,a=Tg(r).leaveToProps;if(a){var o=vD("update",r,t,e,0);o.done=function(){i.remove(r)},r.animateTo(a,o)}else i.remove(r)}}function Rc(r){return r==="all"}function gNt(r,t,e){var n=t.style;if(!r.isGroup&&n){if(e){r.useStyle({});for(var i=r.animators,a=0;a<i.length;a++){var o=i[a];o.targetName==="style"&&o.changeTarget(r.style)}}r.setStyle(n)}t&&(t.style=null,t&&r.attr(t),t.style=n)}function pNt(r,t,e,n,i){if(i){var a=vD("update",r,t,n,e);a.duration>0&&r.animateFrom(i,a)}}function vNt(r,t){xt(t,"silent")&&(r.silent=t.silent),xt(t,"ignore")&&(r.ignore=t.ignore),r instanceof $a&&xt(t,"invisible")&&(r.invisible=t.invisible),r instanceof ae&&xt(t,"autoBatch")&&(r.autoBatch=t.autoBatch)}var Go={},mNt={setTransform:function(r,t){return Go.el[r]=t,this},getTransform:function(r){return Go.el[r]},setShape:function(r,t){var e=Go.el,n=e.shape||(e.shape={});return n[r]=t,e.dirtyShape&&e.dirtyShape(),this},getShape:function(r){var t=Go.el.shape;if(t)return t[r]},setStyle:function(r,t){var e=Go.el,n=e.style;return n&&(n[r]=t,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(r){var t=Go.el.style;if(t)return t[r]},setExtra:function(r,t){var e=Go.el.extra||(Go.el.extra={});return e[r]=t,this},getExtra:function(r){var t=Go.el.extra;if(t)return t[r]}};function yNt(){var r=this,t=r.el;if(t){var e=Tg(t).userDuring,n=r.userDuring;if(e!==n){r.el=r.userDuring=null;return}Go.el=t,n(mNt)}}function uz(r,t,e,n){var i=e[r];if(i){var a=t[r],o;if(a){var s=e.transition,l=i.transition;if(l)if(!o&&(o=n[r]={}),Rc(l))tt(o,a);else for(var u=Ye(l),h=0;h<u.length;h++){var c=u[h],f=a[c];o[c]=f}else if(Rc(s)||te(s,r)>=0){!o&&(o=n[r]={});for(var d=he(a),h=0;h<d.length;h++){var c=d[h],f=a[c];wNt(i[c],f)&&(o[c]=f)}}}}}function hz(r,t,e){var n=t[r];if(n)for(var i=e[r]={},a=he(n),o=0;o<a.length;o++){var s=a[o];i[s]=Kv(n[s])}}function _Nt(r,t,e){for(var n=t.transition,i=Rc(n)?ds:Ye(n||[]),a=0;a<i.length;a++){var o=i[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=r[o];e[o]=s}}}function xNt(r,t,e){for(var n=0;n<lz.length;n++){var i=lz[n],a=Sj[i],o=t[i];o&&(e[a[0]]=o[0],e[a[1]]=o[1])}for(var n=0;n<ds.length;n++){var s=ds[n];t[s]!=null&&(e[s]=t[s])}}function SNt(r,t,e,n){if(e){var i=r.style,a;if(i){var o=e.transition,s=t.transition;if(o&&!Rc(o)){var l=Ye(o);!a&&(a=n.style={});for(var u=0;u<l.length;u++){var h=l[u],c=i[h];a[h]=c}}else if(r.getAnimationStyleProps&&(Rc(s)||Rc(o)||te(s,"style")>=0)){var f=r.getAnimationStyleProps(),d=f?f.style:null;if(d){!a&&(a=n.style={});for(var g=he(e),u=0;u<g.length;u++){var h=g[u];if(d[h]){var c=i[h];a[h]=c}}}}}}}function wNt(r,t){return Qn(r)?r!==t:r!=null&&isFinite(r)}var Tj=me(),TNt=["percent","easing","shape","style","extra"];function bj(r){r.stopAnimation("keyframe"),r.attr(Tj(r))}function xS(r,t,e){if(!(!e.isAnimationEnabled()||!t)){if(rt(t)){I(t,function(s){xS(r,s,e)});return}var n=t.keyframes,i=t.duration;if(e&&i==null){var a=Kg("enter",e,0);i=a&&a.duration}if(!(!n||!i)){var o=Tj(r);I(_S,function(s){if(!(s&&!r[s])){var l;n.sort(function(u,h){return u.percent-h.percent}),I(n,function(u){var h=r.animators,c=s?u[s]:u;if(c){var f=he(c);if(s||(f=ze(f,function(p){return te(TNt,p)<0})),!!f.length){l||(l=r.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<h.length;d++)h[d]!==l&&h[d].targetName===l.targetName&&h[d].stopTracks(f);s&&(o[s]=o[s]||{});var g=s?o[s]:o;I(f,function(p){g[p]=((s?r[s]:r)||{})[p]}),l.whenWithKeys(i*u.percent,c,f,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var rl="emphasis",du="normal",mD="blur",yD="select",Hu=[du,rl,mD,yD],FC={normal:["itemStyle"],emphasis:[rl,"itemStyle"],blur:[mD,"itemStyle"],select:[yD,"itemStyle"]},kC={normal:["label"],emphasis:[rl,"label"],blur:[mD,"label"],select:[yD,"label"]},bNt=["x","y"],ENt="e\0\0",Sa={normal:{},emphasis:{},blur:{},select:{}},CNt={cartesian2d:oNt,geo:lNt,single:hNt,polar:fNt,calendar:dNt};function HI(r){return r instanceof ae}function $I(r){return r instanceof $a}function MNt(r,t){t.copyTransform(r),$I(t)&&$I(r)&&(t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel,t.invisible=r.invisible,t.ignore=r.ignore,HI(t)&&HI(r)&&t.setShape(r.shape))}var ANt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i,a){this._progressiveEls=null;var o=this._data,s=e.getData(),l=this.group,u=cz(e,s,n,i);o||l.removeAll(),s.diff(o).add(function(c){GC(i,null,c,u(c,a),e,l,s)}).remove(function(c){var f=o.getItemGraphicEl(c);f&&dT(f,el(f).option,e)}).update(function(c,f){var d=o.getItemGraphicEl(f);GC(i,d,c,u(c,a),e,l,s)}).execute();var h=e.get("clip",!0)?a0(e.coordinateSystem,!1,e):null;h?l.setClipPath(h):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(e,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,n,i,a,o){var s=n.getData(),l=cz(n,s,i,a),u=this._progressiveEls=[];function h(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var c=e.start;c<e.end;c++){var f=GC(null,null,c,l(c,o),n,this.group,s);f&&(f.traverse(h),u.push(f))}},t.prototype.eachRendered=function(e){Qu(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,n,i,a){var o=n.element;if(o==null||i.name===o)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===o)return!0;return!1},t.type="custom",t}(Ke);function _D(r){var t=r.type,e;if(t==="path"){var n=r.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,a=Mj(n);e=Ww(a,null,i,n.layout||"center"),el(e).customPathData=a}else if(t==="image")e=new bn({}),el(e).customImagePath=r.style.image;else if(t==="text")e=new xe({});else if(t==="group")e=new Dt;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=lL(t);if(!o){var s="";Pe(s)}e=new o}return el(e).customGraphicType=t,e.name=r.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function xD(r,t,e,n,i,a,o){bj(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=bNt);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;xt(u,"textFill")&&(u.fill=u.textFill),xt(u,"textStroke")&&(u.stroke=u.textStroke)}var h=void 0,c=HI(t)?l.decal:null;r&&c&&(c.dirty=!0,h=yg(c,r)),l.__decalPattern=h}if($I(t)&&l){var h=l.__decalPattern;h&&(l.decal=h)}F1(t,n,a,{dataIndex:e,isInit:o,clearStyle:!0}),xS(t,n.keyframeAnimation,a)}function Ej(r,t,e,n,i){var a=t.isGroup?null:t,o=i&&i[r].cfg;if(a){var s=a.ensureState(r);if(n===!1){var l=a.getState(r);l&&(l.style=null)}else s.style=n||null;o&&(s.textConfig=o),Wc(a)}}function INt(r,t,e){if(!r.isGroup){var n=r,i=e.currentZ,a=e.currentZLevel;n.z=i,n.zlevel=a;var o=t.z2;o!=null&&(n.z2=o||0);for(var s=0;s<Hu.length;s++)RNt(n,t,Hu[s])}}function RNt(r,t,e){var n=e===du,i=n?t:SS(t,e),a=i?i.z2:null,o;a!=null&&(o=n?r:r.ensureState(e),o.z2=a||0)}function cz(r,t,e,n){var i=r.get("renderItem"),a=r.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):CNt[a.type](a));for(var s=It({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:x,style:S,ordinalRawValue:w,styleEmphasis:T,visual:C,barLayout:M,currentSeriesIndices:A,font:R},o.api||{}),l={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:PNt(r.getData())},u,h,c={},f={},d={},g={},p=0;p<Hu.length;p++){var v=Hu[p];d[v]=r.getModel(FC[v]),g[v]=r.getModel(kC[v])}function m(P){return P===u?h||(h=t.getItemModel(P)):t.getItemModel(P)}function y(P,L){return t.hasItemOption?P===u?c[L]||(c[L]=m(P).getModel(FC[L])):m(P).getModel(FC[L]):d[L]}function _(P,L){return t.hasItemOption?P===u?f[L]||(f[L]=m(P).getModel(kC[L])):m(P).getModel(kC[L]):g[L]}return function(P,L){return u=P,h=null,c={},f={},i&&i(It({dataIndexInside:P,dataIndex:t.getRawIndex(P),actionType:L?L.type:null},l),s)};function x(P,L){return L==null&&(L=u),t.getStore().get(t.getDimensionIndex(P||0),L)}function w(P,L){L==null&&(L=u),P=P||0;var D=t.getDimensionInfo(P);if(!D){var k=t.getDimensionIndex(P);return k>=0?t.getStore().get(k,L):void 0}var F=t.get(D.name,L),B=D&&D.ordinalMeta;return B?B.categories[F]:F}function S(P,L){L==null&&(L=u);var D=t.getItemVisual(L,"style"),k=D&&D.fill,F=D&&D.opacity,B=y(L,du).getItemStyle();k!=null&&(B.fill=k),F!=null&&(B.opacity=F);var V={inheritColor:yt(k)?k:"#000"},Y=_(L,du),q=sr(Y,null,V,!1,!0);q.text=Y.getShallow("show")?Vt(r.getFormattedLabel(L,du),xg(t,L)):null;var lt=qx(Y,V,!1);return E(P,B),B=oz(B,q,lt),P&&b(B,P),B.legacy=!0,B}function T(P,L){L==null&&(L=u);var D=y(L,rl).getItemStyle(),k=_(L,rl),F=sr(k,null,null,!0,!0);F.text=k.getShallow("show")?os(r.getFormattedLabel(L,rl),r.getFormattedLabel(L,du),xg(t,L)):null;var B=qx(k,null,!0);return E(P,D),D=oz(D,F,B),P&&b(D,P),D.legacy=!0,D}function b(P,L){for(var D in L)xt(L,D)&&(P[D]=L[D])}function E(P,L){P&&(P.textFill&&(L.textFill=P.textFill),P.textPosition&&(L.textPosition=P.textPosition))}function C(P,L){if(L==null&&(L=u),xt(iz,P)){var D=t.getItemVisual(L,"style");return D?D[iz[P]]:null}if(xt(nNt,P))return t.getItemVisual(L,P)}function M(P){if(a.type==="cartesian2d"){var L=a.getBaseAxis();return xMt(It({axis:L},P))}}function A(){return e.getCurrentSeriesIndices()}function R(P){return uL(P,e)}}function PNt(r){var t={};return I(r.dimensions,function(e){var n=r.getDimensionInfo(e);if(!n.isExtraCoord){var i=n.coordDim,a=t[i]=t[i]||[];a[n.coordDimIndex]=r.getDimensionIndex(e)}}),t}function GC(r,t,e,n,i,a,o){if(!n){a.remove(t);return}var s=SD(r,t,e,n,i,a);return s&&o.setItemGraphicEl(e,s),s&&wr(s,n.focus,n.blurScope,n.emphasisDisabled),s}function SD(r,t,e,n,i,a){var o=-1,s=t;t&&Cj(t,n,i)&&(o=te(a.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=_D(n),s&&MNt(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Sa.normal.cfg=Sa.normal.conOpt=Sa.emphasis.cfg=Sa.emphasis.conOpt=Sa.blur.cfg=Sa.blur.conOpt=Sa.select.cfg=Sa.select.conOpt=null,Sa.isLegacy=!1,DNt(u,e,n,i,l,Sa),LNt(u,e,n,i,l),xD(r,u,e,n,Sa,i,l),xt(n,"info")&&(el(u).info=n.info);for(var h=0;h<Hu.length;h++){var c=Hu[h];if(c!==du){var f=SS(n,c),d=wD(n,f,c);Ej(c,u,f,d,Sa)}}return INt(u,n,i),n.type==="group"&&ONt(r,u,e,n,i),o>=0?a.replaceAt(u,o):a.add(u),u}function Cj(r,t,e){var n=el(r),i=t.type,a=t.shape,o=t.style;return e.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&GNt(a)&&Mj(a)!==n.customPathData||i==="image"&&xt(o,"image")&&o.image!==n.customImagePath}function LNt(r,t,e,n,i){var a=e.clipPath;if(a===!1)r&&r.getClipPath()&&r.removeClipPath();else if(a){var o=r.getClipPath();o&&Cj(o,a,n)&&(o=null),o||(o=_D(a),r.setClipPath(o)),xD(null,o,t,a,null,n,i)}}function DNt(r,t,e,n,i,a){if(!r.isGroup){fz(e,null,a),fz(e,rl,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,u=a.select.conOpt;if(o!=null||s!=null||u!=null||l!=null){var h=r.getTextContent();if(o===!1)h&&r.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},h?h.clearStates():(h=_D(o),r.setTextContent(h)),xD(null,h,t,o,null,n,i);for(var c=o&&o.style,f=0;f<Hu.length;f++){var d=Hu[f];if(d!==du){var g=a[d].conOpt;Ej(d,h,g,wD(o,g,d),null)}}c?h.dirty():h.markRedraw()}}}}function fz(r,t,e){var n=t?SS(r,t):r,i=t?wD(r,n,rl):r.style,a=r.type,o=n?n.textConfig:null,s=r.textContent,l=s?t?SS(s,t):s:null;if(i&&(e.isLegacy||_j(i,a,!!o,!!l))){e.isLegacy=!0;var u=xj(i,a,!t);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var h=l;!h.type&&(h.type="text")}var c=t?e[t]:e.normal;c.cfg=o,c.conOpt=l}function SS(r,t){return t?r?r[t]:null:r}function wD(r,t,e){var n=t&&t.style;return n==null&&e===rl&&r&&(n=r.styleEmphasis),n}function ONt(r,t,e,n,i){var a=n.children,o=a?a.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!o&&!l&&!u)){if(l){FNt({api:r,oldChildren:t.children()||[],newChildren:a||[],dataIndex:e,seriesModel:i,group:t});return}u&&t.removeAll();for(var h=0;h<o;h++){var c=a[h],f=t.childAt(h);c?(c.ignore==null&&(c.ignore=!1),SD(r,f,e,c,i,t)):f.ignore=!0}for(var d=t.childCount()-1;d>=h;d--){var g=t.childAt(d);NNt(t,g,i)}}}function NNt(r,t,e){t&&dT(t,el(r).option,e)}function FNt(r){new cl(r.oldChildren,r.newChildren,dz,dz,r).add(gz).update(gz).remove(kNt).execute()}function dz(r,t){var e=r&&r.name;return e??ENt+t}function gz(r,t){var e=this.context,n=r!=null?e.newChildren[r]:null,i=t!=null?e.oldChildren[t]:null;SD(e.api,i,e.dataIndex,n,e.seriesModel,e.group)}function kNt(r){var t=this.context,e=t.oldChildren[r];e&&dT(e,el(e).option,t.seriesModel)}function Mj(r){return r&&(r.pathData||r.d)}function GNt(r){return r&&(xt(r,"pathData")||xt(r,"d"))}function BNt(r){r.registerChartView(ANt),r.registerSeriesModel(iNt)}var nc=me(),pz=Pt,BC=_t,TD=function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(t,e,n,i){var a=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,t,e,n);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(t,e);if(!s)s=this._group=new Dt,this.createPointerEl(s,u,t,e),this.createLabelEl(s,u,t,e),n.getZr().add(s);else{var f=Wt(vz,e,c);this.updatePointerEl(s,u,f),this.updateLabelEl(s,u,f,e)}yz(s,e,!0),this._renderHandle(a)}},r.prototype.remove=function(t){this.clear(t)},r.prototype.dispose=function(t){this.clear(t)},r.prototype.determineAnimation=function(t,e){var n=e.get("animation"),i=t.axis,a=i.type==="category",o=e.get("snap");if(!o&&!a)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=XL(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},r.prototype.makeElOption=function(t,e,n,i,a){},r.prototype.createPointerEl=function(t,e,n,i){var a=e.pointer;if(a){var o=nc(t).pointerEl=new nf[a.type](pz(e.pointer));t.add(o)}},r.prototype.createLabelEl=function(t,e,n,i){if(e.label){var a=nc(t).labelEl=new xe(pz(e.label));t.add(a),mz(a,i)}},r.prototype.updatePointerEl=function(t,e,n){var i=nc(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},r.prototype.updateLabelEl=function(t,e,n,i){var a=nc(t).labelEl;a&&(a.setStyle(e.label.style),n(a,{x:e.label.x,y:e.label.y}),mz(a,i))},r.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,n=this._api.getZr(),i=this._handle,a=e.getModel("handle"),o=e.get("status");if(!a.get("show")||!o||o==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=Jy(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){sl(u.event)},onmousedown:BC(this._onHandleDragMove,this,0,0),drift:BC(this._onHandleDragMove,this),ondragend:BC(this._onHandleDragEnd,this)}),n.add(i)),yz(i,e,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");rt(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,ip(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},r.prototype._moveHandleToValue=function(t,e){vz(this._axisPointerModel,!e&&this._moveAnimation,this._handle,zC(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(zC(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(zC(i)),nc(n).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),ey(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}},r}();function vz(r,t,e,n){Aj(nc(e).lastProp,n)||(nc(e).lastProp=n,t?Ae(e,n,r):(e.stopAnimation(),e.attr(n)))}function Aj(r,t){if(Rt(r)&&Rt(t)){var e=!0;return I(t,function(n,i){e=e&&Aj(r[i],n)}),!!e}else return r===t}function mz(r,t){r[t.get(["label","show"])?"show":"hide"]()}function zC(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function yz(r,t,e){var n=t.get("z"),i=t.get("zlevel");r&&r.traverse(function(a){a.type!=="group"&&(n!=null&&(a.z=n),i!=null&&(a.zlevel=i),a.silent=e)})}function bD(r){var t=r.get("type"),e=r.getModel(t+"Style"),n;return t==="line"?(n=e.getLineStyle(),n.fill=null):t==="shadow"&&(n=e.getAreaStyle(),n.stroke=null),n}function Ij(r,t,e,n,i){var a=e.get("value"),o=Rj(a,t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),s=e.getModel("label"),l=tp(s.get("padding")||0),u=s.getFont(),h=$y(o,u),c=i.position,f=h.width+l[1]+l[3],d=h.height+l[0]+l[2],g=i.align;g==="right"&&(c[0]-=f),g==="center"&&(c[0]-=f/2);var p=i.verticalAlign;p==="bottom"&&(c[1]-=d),p==="middle"&&(c[1]-=d/2),zNt(c,f,d,n);var v=s.get("backgroundColor");(!v||v==="auto")&&(v=t.get(["axisLine","lineStyle","color"])),r.label={x:c[0],y:c[1],style:sr(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function zNt(r,t,e,n){var i=n.getWidth(),a=n.getHeight();r[0]=Math.min(r[0]+t,i)-t,r[1]=Math.min(r[1]+e,a)-e,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function Rj(r,t,e,n,i){r=t.scale.parse(r);var a=t.scale.getLabel({value:r},{precision:i.precision}),o=i.formatter;if(o){var s={value:FL(t,{value:r}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};I(n,function(l){var u=e.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,c=u&&u.getDataParams(h);c&&s.seriesData.push(c)}),yt(o)?a=o.replace("{value}",a):At(o)&&(a=o(s))}return a}function ED(r,t,e){var n=oa();return rf(n,n,e.rotation),fs(n,n,e.position),fo([r.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],n)}function Pj(r,t,e,n,i,a){var o=mi.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=i.get(["label","margin"]),Ij(t,n,i,a,{position:ED(n.axis,r,e),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function CD(r,t,e){return e=e||0,{x1:r[e],y1:r[1-e],x2:t[e],y2:t[1-e]}}function Lj(r,t,e){return e=e||0,{x:r[e],y:r[1-e],width:t[e],height:t[1-e]}}function _z(r,t,e,n,i,a){return{cx:r,cy:t,r0:e,r:n,startAngle:i,endAngle:a,clockwise:!0}}var VNt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,n,i,a,o){var s=i.axis,l=s.grid,u=a.get("type"),h=xz(l,s).getOtherAxis(s).getGlobalExtent(),c=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var f=bD(a),d=UNt[u](s,c,h);d.style=f,e.graphicKey=d.type,e.pointer=d}var g=EI(l.model,i);Pj(n,e,g,i,a,o)},t.prototype.getHandleTransform=function(e,n,i){var a=EI(n.axis.grid.model,n,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=ED(n.axis,e,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,n,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),u=xz(s,o).getOtherAxis(o).getGlobalExtent(),h=o.dim==="x"?0:1,c=[e.x,e.y];c[h]+=n[h],c[h]=Math.min(l[1],c[h]),c[h]=Math.max(l[0],c[h]);var f=(u[1]+u[0])/2,d=[f,f];d[h]=c[h];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:e.rotation,cursorPoint:d,tooltipOption:g[h]}},t}(TD);function xz(r,t){var e={};return e[t.dim+"AxisIndex"]=t.index,r.getCartesian(e)}var UNt={line:function(r,t,e){var n=CD([t,e[0]],[t,e[1]],Sz(r));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(r,t,e){var n=Math.max(1,r.getBandWidth()),i=e[1]-e[0];return{type:"Rect",shape:Lj([t-n/2,e[0]],[n,i],Sz(r))}}};function Sz(r){return r.dim==="x"?0:1}var WNt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(ue),Hs=me(),HNt=I;function Dj(r,t,e){if(!le.node){var n=t.getZr();Hs(n).records||(Hs(n).records={}),$Nt(n,t);var i=Hs(n).records[r]||(Hs(n).records[r]={});i.handler=e}}function $Nt(r,t){if(Hs(r).initialized)return;Hs(r).initialized=!0,e("click",Wt(wz,"click")),e("mousemove",Wt(wz,"mousemove")),e("globalout",XNt);function e(n,i){r.on(n,function(a){var o=ZNt(t);HNt(Hs(r).records,function(s){s&&i(s,a,o.dispatchAction)}),YNt(o.pendings,t)})}}function YNt(r,t){var e=r.showTip.length,n=r.hideTip.length,i;e?i=r.showTip[e-1]:n&&(i=r.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function XNt(r,t,e){r.handler("leave",null,e)}function wz(r,t,e,n){t.handler(r,e,n)}function ZNt(r){var t={showTip:[],hideTip:[]},e=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=e,r.dispatchAction(n))};return{dispatchAction:e,pendings:t}}function YI(r,t){if(!le.node){var e=t.getZr(),n=(Hs(e).records||{})[r];n&&(Hs(e).records[r]=null)}}var jNt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a=n.getComponent("tooltip"),o=e.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Dj("axisPointer",i,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(e,n){YI("axisPointer",n)},t.prototype.dispose=function(e,n){YI("axisPointer",n)},t.type="axisPointer",t}(yr);function Oj(r,t){var e=[],n=r.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var a=i.getData(),o=Vc(a,r);if(o==null||o<0||rt(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)e=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(r.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),c=h.dim,f=u.dim,d=c==="x"||c==="radius"?1:0,g=a.mapDimension(f),p=[];p[d]=a.get(g,o),p[1-d]=a.get(a.getCalculationInfo("stackResultDimension"),o),e=l.dataToPoint(p)||[]}else e=l.dataToPoint(a.getValues(nt(l.dimensions,function(m){return a.mapDimension(m)}),o))||[];else if(s){var v=s.getBoundingRect().clone();v.applyTransform(s.transform),e=[v.x+v.width/2,v.y+v.height/2]}return{point:e,el:s}}var Tz=me();function KNt(r,t,e){var n=r.currTrigger,i=[r.x,r.y],a=r,o=r.dispatchAction||_t(e.dispatchAction,e),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){k1(i)&&(i=Oj({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var l=k1(i),u=a.axesInfo,h=s.axesInfo,c=n==="leave"||k1(i),f={},d={},g={list:[],map:{}},p={showPointer:Wt(JNt,d),showTooltip:Wt(QNt,g)};I(s.coordSysMap,function(m,y){var _=l||m.containPoint(i);I(s.coordSysAxesInfo[y],function(x,w){var S=x.axis,T=nFt(u,x);if(!c&&_&&(!u||T)){var b=T&&T.value;b==null&&!l&&(b=S.pointToData(i)),b!=null&&bz(x,b,p,!1,f)}})});var v={};return I(h,function(m,y){var _=m.linkGroup;_&&!d[y]&&I(_.axesInfo,function(x,w){var S=d[w];if(x!==m&&S){var T=S.value;_.mapper&&(T=m.axis.scale.parse(_.mapper(T,Ez(x),Ez(m)))),v[m.key]=T}})}),I(v,function(m,y){bz(h[y],m,p,!0,f)}),tFt(d,h,f),eFt(g,i,r,o),rFt(h,o,e),f}}function bz(r,t,e,n,i){var a=r.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!r.involveSeries){e.showPointer(r,t);return}var o=qNt(t,r),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&tt(i,s[0]),!n&&r.snap&&a.containData(l)&&l!=null&&(t=l),e.showPointer(r,t,s),e.showTooltip(r,o,l)}}function qNt(r,t){var e=t.axis,n=e.dim,i=r,a=[],o=Number.MAX_VALUE,s=-1;return I(t.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(n),c,f;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(h,r,e);f=d.dataIndices,c=d.nestestValue}else{if(f=l.getData().indicesOfNearest(h[0],r,e.type==="category"?.5:null),!f.length)return;c=l.getData().get(h[0],f[0])}if(!(c==null||!isFinite(c))){var g=r-c,p=Math.abs(g);p<=o&&((p<o||g>=0&&s<0)&&(o=p,s=g,i=c,a.length=0),I(f,function(v){a.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:a,snapToValue:i}}function JNt(r,t,e,n){r[t.key]={value:e,payloadBatch:n}}function QNt(r,t,e,n){var i=e.payloadBatch,a=t.axis,o=a.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=ly(l),h=r.map[u];h||(h=r.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},r.list.push(h)),h.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function tFt(r,t,e){var n=e.axesInfo=[];I(t,function(i,a){var o=i.axisPointerModel.option,s=r[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function eFt(r,t,e,n){if(k1(t)||!r.list.length){n({type:"hideTip"});return}var i=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:r.list})}function rFt(r,t,e){var n=e.getZr(),i="axisPointerLastHighlights",a=Tz(n)[i]||{},o=Tz(n)[i]={};I(r,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&u.triggerEmphasis&&I(c.seriesDataIndices,function(f){var d=f.seriesIndex+" | "+f.dataIndex;o[d]=f})});var s=[],l=[];I(a,function(u,h){!o[h]&&l.push(u)}),I(o,function(u,h){!a[h]&&s.push(u)}),l.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function nFt(r,t){for(var e=0;e<(r||[]).length;e++){var n=r[e];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function Ez(r){var t=r.axis.model,e={},n=e.axisDim=r.axis.dim;return e.axisIndex=e[n+"AxisIndex"]=t.componentIndex,e.axisName=e[n+"AxisName"]=t.name,e.axisId=e[n+"AxisId"]=t.id,e}function k1(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function c0(r){lf.registerAxisPointerClass("CartesianAxisPointer",VNt),r.registerComponentModel(WNt),r.registerComponentView(jNt),r.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!rt(e)&&(t.axisPointer.link=[e])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=dRt(t,e)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},KNt)}function iFt(r){ne(lZ),ne(c0)}var aFt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,n,i,a,o){var s=i.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,u=l.getOtherAxis(s),h=u.getExtent(),c=s.dataToCoord(n),f=a.get("type");if(f&&f!=="none"){var d=bD(a),g=sFt[f](s,l,c,h);g.style=d,e.graphicKey=g.type,e.pointer=g}var p=a.get(["label","margin"]),v=oFt(n,i,a,l,p);Ij(e,i,a,o,v)},t}(TD);function oFt(r,t,e,n,i){var a=t.axis,o=a.dataToCoord(r),s=n.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=n.getRadiusAxis().getExtent(),u,h,c;if(a.dim==="radius"){var f=oa();rf(f,f,s),fs(f,f,[n.cx,n.cy]),u=fo([o,-i],f);var d=t.getModel("axisLabel").get("rotate")||0,g=mi.innerTextLayout(s,d*Math.PI/180,-1);h=g.textAlign,c=g.textVerticalAlign}else{var p=l[1];u=n.coordToPoint([p+i,o]);var v=n.cx,m=n.cy;h=Math.abs(u[0]-v)/p<.3?"center":u[0]>v?"left":"right",c=Math.abs(u[1]-m)/p<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:h,verticalAlign:c}}var sFt={line:function(r,t,e,n){return r.dim==="angle"?{type:"Line",shape:CD(t.coordToPoint([n[0],e]),t.coordToPoint([n[1],e]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:e}}},shadow:function(r,t,e,n){var i=Math.max(1,r.getBandWidth()),a=Math.PI/180;return r.dim==="angle"?{type:"Sector",shape:_z(t.cx,t.cy,n[0],n[1],(-e-i/2)*a,(-e+i/2)*a)}:{type:"Sector",shape:_z(t.cx,t.cy,e-i/2,e+i/2,0,Math.PI*2)}}},lFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.findAxisModel=function(e){var n,i=this.ecModel;return i.eachComponent(e,function(a){a.getCoordSysModel()===this&&(n=a)},this),n},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(ue),MD=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Br).models[0]},t.type="polarAxis",t}(ue);Hr(MD,r0);var uFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="angleAxis",t}(MD),hFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="radiusAxis",t}(MD),AD=function(r){U(t,r);function t(e,n){return r.call(this,"radius",e,n)||this}return t.prototype.pointToData=function(e,n){return this.polar.pointToData(e,n)[this.dim==="radius"?0:1]},t}(wo);AD.prototype.dataToRadius=wo.prototype.dataToCoord;AD.prototype.radiusToData=wo.prototype.coordToData;var cFt=me(),ID=function(r){U(t,r);function t(e,n){return r.call(this,"angle",e,n||[0,360])||this}return t.prototype.pointToData=function(e,n){return this.polar.pointToData(e,n)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,n=e.getLabelModel(),i=e.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=e.dataToCoord(s+1)-e.dataToCoord(s),u=Math.abs(l),h=$y(s==null?"":s+"",n.getFont(),"center","top"),c=Math.max(h.height,7),f=c/u;isNaN(f)&&(f=1/0);var d=Math.max(0,Math.floor(f)),g=cFt(e.model),p=g.lastAutoInterval,v=g.lastTickCount;return p!=null&&v!=null&&Math.abs(p-d)<=1&&Math.abs(v-o)<=1&&p>d?d=p:(g.lastTickCount=o,g.lastAutoInterval=d),d},t}(wo);ID.prototype.dataToAngle=wo.prototype.dataToCoord;ID.prototype.angleToData=wo.prototype.coordToData;var Nj=["radius","angle"],fFt=function(){function r(t){this.dimensions=Nj,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new AD,this._angleAxis=new ID,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return r.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},r.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},r.prototype.getAxis=function(t){var e="_"+t+"Axis";return this[e]},r.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},r.prototype.getAxesByScale=function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},r.prototype.getAngleAxis=function(){return this._angleAxis},r.prototype.getRadiusAxis=function(){return this._radiusAxis},r.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},r.prototype.getTooltipAxes=function(t){var e=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},r.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},r.prototype.pointToData=function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},r.prototype.pointToCoord=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);i.inverse?o=s-360:s=o+360;var l=Math.sqrt(e*e+n*n);e/=l,n/=l;for(var u=Math.atan2(-n,e)/Math.PI*180,h=u<o?1:-1;u<o||u>s;)u+=h*360;return[l,u]},r.prototype.coordToPoint=function(t){var e=t[0],n=t[1]/180*Math.PI,i=Math.cos(n)*e+this.cx,a=-Math.sin(n)*e+this.cy;return[i,a]},r.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis(),n=e.getExtent().slice();n[0]>n[1]&&n.reverse();var i=t.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:t.inverse,contain:function(o,s){var l=o-this.cx,u=s-this.cy,h=l*l+u*u-1e-4,c=this.r,f=this.r0;return h<=c*c&&h>=f*f}}},r.prototype.convertToPixel=function(t,e,n){var i=Cz(e);return i===this?this.dataToPoint(n):null},r.prototype.convertFromPixel=function(t,e,n){var i=Cz(e);return i===this?this.pointToData(n):null},r}();function Cz(r){var t=r.seriesModel,e=r.polarModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function dFt(r,t,e){var n=t.get("center"),i=e.getWidth(),a=e.getHeight();r.cx=ft(n[0],i),r.cy=ft(n[1],a);var o=r.getRadiusAxis(),s=Math.min(i,a)/2,l=t.get("radius");l==null?l=[0,"100%"]:rt(l)||(l=[0,l]);var u=[ft(l[0],s),ft(l[1],s)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}function gFt(r,t){var e=this,n=e.getAngleAxis(),i=e.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),r.eachSeries(function(s){if(s.coordinateSystem===e){var l=s.getData();I(lS(l,"radius"),function(u){i.scale.unionExtentFromData(l,u)}),I(lS(l,"angle"),function(u){n.scale.unionExtentFromData(l,u)})}}),_g(n.scale,n.model),_g(i.scale,i.model),n.type==="category"&&!n.onBand){var a=n.getExtent(),o=360/n.scale.count();n.inverse?a[1]+=o:a[1]-=o,n.setExtent(a[0],a[1])}}function pFt(r){return r.mainType==="angleAxis"}function Mz(r,t){var e;if(r.type=t.get("type"),r.scale=oT(t),r.onBand=t.get("boundaryGap")&&r.type==="category",r.inverse=t.get("inverse"),pFt(t)){r.inverse=r.inverse!==t.get("clockwise");var n=t.get("startAngle"),i=(e=t.get("endAngle"))!==null&&e!==void 0?e:n+(r.inverse?-360:360);r.setExtent(n,i)}t.axis=r,r.model=t}var vFt={dimensions:Nj,create:function(r,t){var e=[];return r.eachComponent("polar",function(n,i){var a=new fFt(i+"");a.update=gFt;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=n.findAxisModel("radiusAxis"),u=n.findAxisModel("angleAxis");Mz(o,l),Mz(s,u),dFt(a,n,t),e.push(a),n.coordinateSystem=a,a.model=n}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="polar"){var i=n.getReferringComponents("polar",Br).models[0];n.coordinateSystem=i.coordinateSystem}}),e}},mFt=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Z_(r,t,e){t[1]>t[0]&&(t=t.slice().reverse());var n=r.coordToPoint([t[0],e]),i=r.coordToPoint([t[1],e]);return{x1:n[0],y1:n[1],x2:i[0],y2:i[1]}}function j_(r){var t=r.getRadiusAxis();return t.inverse?0:1}function Az(r){var t=r[0],e=r[r.length-1];t&&e&&Math.abs(Math.abs(t.coord-e.coord)-360)<1e-4&&r.pop()}var yFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return t.prototype.render=function(e,n){if(this.group.removeAll(),!!e.get("show")){var i=e.axis,a=i.polar,o=a.getRadiusAxis().getExtent(),s=i.getTicksCoords(),l=i.getMinorTicksCoords(),u=nt(i.getViewLabels(),function(h){h=Pt(h);var c=i.scale,f=c.type==="ordinal"?c.getRawOrdinalNumber(h.tickValue):h.tickValue;return h.coord=i.dataToCoord(f),h});Az(u),Az(s),I(mFt,function(h){e.get([h,"show"])&&(!i.scale.isBlank()||h==="axisLine")&&_Ft[h](this.group,e,a,s,l,o,u)},this)}},t.type="angleAxis",t}(lf),_Ft={axisLine:function(r,t,e,n,i,a){var o=t.getModel(["axisLine","lineStyle"]),s=e.getAngleAxis(),l=Math.PI/180,u=s.getExtent(),h=j_(e),c=h?0:1,f,d=Math.abs(u[1]-u[0])===360?"Circle":"Arc";a[c]===0?f=new nf[d]({shape:{cx:e.cx,cy:e.cy,r:a[h],startAngle:-u[0]*l,endAngle:-u[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):f=new Zy({shape:{cx:e.cx,cy:e.cy,r:a[h],r0:a[c]},style:o.getLineStyle(),z2:1,silent:!0}),f.style.fill=null,r.add(f)},axisTick:function(r,t,e,n,i,a){var o=t.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[j_(e)],u=nt(n,function(h){return new sn({shape:Z_(e,[l,l+s],h.coord)})});r.add(La(u,{style:It(o.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(r,t,e,n,i,a){if(i.length){for(var o=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),u=a[j_(e)],h=[],c=0;c<i.length;c++)for(var f=0;f<i[c].length;f++)h.push(new sn({shape:Z_(e,[u,u+l],i[c][f].coord)}));r.add(La(h,{style:It(s.getModel("lineStyle").getLineStyle(),It(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(r,t,e,n,i,a,o){var s=t.getCategories(!0),l=t.getModel("axisLabel"),u=l.get("margin"),h=t.get("triggerEvent");I(o,function(c,f){var d=l,g=c.tickValue,p=a[j_(e)],v=e.coordToPoint([p+u,c.coord]),m=e.cx,y=e.cy,_=Math.abs(v[0]-m)/p<.3?"center":v[0]>m?"left":"right",x=Math.abs(v[1]-y)/p<.3?"middle":v[1]>y?"top":"bottom";if(s&&s[g]){var w=s[g];Rt(w)&&w.textStyle&&(d=new Oe(w.textStyle,l,l.ecModel))}var S=new xe({silent:mi.isLabelSilent(t),style:sr(d,{x:v[0],y:v[1],fill:d.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:c.formattedLabel,align:_,verticalAlign:x})});if(r.add(S),h){var T=mi.makeAxisEventDataBase(t);T.targetType="axisLabel",T.value=c.rawLabel,Ft(S).eventData=T}},this)},splitLine:function(r,t,e,n,i,a){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=0;c<n.length;c++){var f=u++%l.length;h[f]=h[f]||[],h[f].push(new sn({shape:Z_(e,a,n[c].coord)}))}for(var c=0;c<h.length;c++)r.add(La(h[c],{style:It({stroke:l[c%l.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(r,t,e,n,i,a){if(i.length){for(var o=t.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],u=0;u<i.length;u++)for(var h=0;h<i[u].length;h++)l.push(new sn({shape:Z_(e,a,i[u][h].coord)}));r.add(La(l,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(r,t,e,n,i,a){if(n.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=Math.PI/180,f=-n[0].coord*c,d=Math.min(a[0],a[1]),g=Math.max(a[0],a[1]),p=t.get("clockwise"),v=1,m=n.length;v<=m;v++){var y=v===m?n[0].coord:n[v].coord,_=u++%l.length;h[_]=h[_]||[],h[_].push(new wi({shape:{cx:e.cx,cy:e.cy,r0:d,r:g,startAngle:f,endAngle:-y*c,clockwise:p},silent:!0})),f=-y*c}for(var v=0;v<h.length;v++)r.add(La(h[v],{style:It({fill:l[v%l.length]},s.getAreaStyle()),silent:!0}))}}},xFt=["axisLine","axisTickLabel","axisName"],SFt=["splitLine","splitArea","minorSplitLine"],wFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return t.prototype.render=function(e,n){if(this.group.removeAll(),!!e.get("show")){var i=this._axisGroup,a=this._axisGroup=new Dt;this.group.add(a);var o=e.axis,s=o.polar,l=s.getAngleAxis(),u=o.getTicksCoords(),h=o.getMinorTicksCoords(),c=l.getExtent()[0],f=o.getExtent(),d=bFt(s,e,c),g=new mi(e,d);I(xFt,g.add,g),a.add(g.getGroup()),qy(i,a,e),I(SFt,function(p){e.get([p,"show"])&&!o.scale.isBlank()&&TFt[p](this.group,e,s,c,f,u,h)},this)}},t.type="radiusAxis",t}(lf),TFt={splitLine:function(r,t,e,n,i,a){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0,h=e.getAngleAxis(),c=Math.PI/180,f=h.getExtent(),d=Math.abs(f[1]-f[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var g=[],p=0;p<a.length;p++){var v=u++%l.length;g[v]=g[v]||[],g[v].push(new nf[d]({shape:{cx:e.cx,cy:e.cy,r:Math.max(a[p].coord,0),startAngle:-f[0]*c,endAngle:-f[1]*c,clockwise:h.inverse}}))}for(var p=0;p<g.length;p++)r.add(La(g[p],{style:It({stroke:l[p%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(r,t,e,n,i,a,o){if(o.length){for(var s=t.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=[],h=0;h<o.length;h++)for(var c=0;c<o[h].length;c++)u.push(new xl({shape:{cx:e.cx,cy:e.cy,r:o[h][c].coord}}));r.add(La(u,{style:It({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(r,t,e,n,i,a){if(a.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=a[0].coord,f=1;f<a.length;f++){var d=u++%l.length;h[d]=h[d]||[],h[d].push(new wi({shape:{cx:e.cx,cy:e.cy,r0:c,r:a[f].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),c=a[f].coord}for(var f=0;f<h.length;f++)r.add(La(h[f],{style:It({fill:l[f%l.length]},s.getAreaStyle()),silent:!0}))}}};function bFt(r,t,e){return{position:[r.cx,r.cy],rotation:e/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function Fj(r){return r.get("stack")||"__ec_stack_"+r.seriesIndex}function kj(r,t){return t.dim+r.model.componentIndex}function EFt(r,t,e){var n={},i=CFt(ze(t.getSeriesByType(r),function(a){return!t.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));t.eachSeriesByType(r,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),u=kj(s,l),h=Fj(a),c=i[u][h],f=c.offset,d=c.width,g=s.getOtherAxis(l),p=a.coordinateSystem.cx,v=a.coordinateSystem.cy,m=a.get("barMinHeight")||0,y=a.get("barMinAngle")||0;n[h]=n[h]||[];for(var _=o.mapDimension(g.dim),x=o.mapDimension(l.dim),w=Uu(o,_),S=l.dim!=="radius"||!a.get("roundCap",!0),T=g.model,b=T.get("startValue"),E=g.dataToCoord(b||0),C=0,M=o.count();C<M;C++){var A=o.get(_,C),R=o.get(x,C),P=A>=0?"p":"n",L=E;w&&(n[h][R]||(n[h][R]={p:E,n:E}),L=n[h][R][P]);var D=void 0,k=void 0,F=void 0,B=void 0;if(g.dim==="radius"){var V=g.dataToCoord(A)-E,Y=l.dataToCoord(R);Math.abs(V)<m&&(V=(V<0?-1:1)*m),D=L,k=L+V,F=Y-f,B=F-d,w&&(n[h][R][P]=k)}else{var q=g.dataToCoord(A,S)-E,lt=l.dataToCoord(R);Math.abs(q)<y&&(q=(q<0?-1:1)*y),D=lt+f,k=D+d,F=L,B=L+q,w&&(n[h][R][P]=B)}o.setItemLayout(C,{cx:p,cy:v,r0:D,r:k,startAngle:-F*Math.PI/180,endAngle:-B*Math.PI/180,clockwise:F>=B})}}})}function CFt(r){var t={};I(r,function(n,i){var a=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=kj(o,s),u=s.getExtent(),h=s.type==="category"?s.getBandWidth():Math.abs(u[1]-u[0])/a.count(),c=t[l]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},f=c.stacks;t[l]=c;var d=Fj(n);f[d]||c.autoWidthCount++,f[d]=f[d]||{width:0,maxWidth:0};var g=ft(n.get("barWidth"),h),p=ft(n.get("barMaxWidth"),h),v=n.get("barGap"),m=n.get("barCategoryGap");g&&!f[d].width&&(g=Math.min(c.remainedWidth,g),f[d].width=g,c.remainedWidth-=g),p&&(f[d].maxWidth=p),v!=null&&(c.gap=v),m!=null&&(c.categoryGap=m)});var e={};return I(t,function(n,i){e[i]={};var a=n.stacks,o=n.bandWidth,s=ft(n.categoryGap,o),l=ft(n.gap,1),u=n.remainedWidth,h=n.autoWidthCount,c=(u-s)/(h+(h-1)*l);c=Math.max(c,0),I(a,function(p,v){var m=p.maxWidth;m&&m<c&&(m=Math.min(m,u),p.width&&(m=Math.min(m,p.width)),u-=m,p.width=m,h--)}),c=(u-s)/(h+(h-1)*l),c=Math.max(c,0);var f=0,d;I(a,function(p,v){p.width||(p.width=c),d=p,f+=p.width*(1+l)}),d&&(f-=d.width*l);var g=-f/2;I(a,function(p,v){e[i][v]=e[i][v]||{offset:g,width:p.width},g+=p.width*(1+l)})}),e}var MFt={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},AFt={splitNumber:5},IFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="polar",t}(yr);function RFt(r){ne(c0),lf.registerAxisPointerClass("PolarAxisPointer",aFt),r.registerCoordinateSystem("polar",vFt),r.registerComponentModel(lFt),r.registerComponentView(IFt),Sg(r,"angle",uFt,MFt),Sg(r,"radius",hFt,AFt),r.registerComponentView(yFt),r.registerComponentView(wFt),r.registerLayout(Wt(EFt,"bar"))}function XI(r,t){t=t||{};var e=r.coordinateSystem,n=r.axis,i={},a=n.position,o=n.orient,s=e.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[o==="vertical"?u.vertical[a]:l[0],o==="horizontal"?u.horizontal[a]:l[3]];var h={horizontal:0,vertical:1};i.rotation=Math.PI/2*h[o];var c={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=c[a],r.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Sn(t.labelInside,r.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var f=t.rotate;return f==null&&(f=r.get(["axisLabel","rotate"])),i.labelRotation=a==="top"?-f:f,i.z2=1,i}var PFt=["axisLine","axisTickLabel","axisName"],LFt=["splitArea","splitLine"],DFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="SingleAxisPointer",e}return t.prototype.render=function(e,n,i,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new Dt;var l=XI(e),u=new mi(e,l);I(PFt,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),I(LFt,function(h){e.get([h,"show"])&&OFt[h](this,this.group,this._axisGroup,e)},this),qy(s,this._axisGroup,e),r.prototype.render.call(this,e,n,i,a)},t.prototype.remove=function(){aZ(this)},t.type="singleAxis",t}(lf),OFt={splitLine:function(r,t,e,n){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),u=n.coordinateSystem.getRect(),h=i.isHorizontal(),c=[],f=0,d=i.getTicksCoords({tickModel:a}),g=[],p=[],v=0;v<d.length;++v){var m=i.toGlobalCoord(d[v].coord);h?(g[0]=m,g[1]=u.y,p[0]=m,p[1]=u.y+u.height):(g[0]=u.x,g[1]=m,p[0]=u.x+u.width,p[1]=m);var y=new sn({shape:{x1:g[0],y1:g[1],x2:p[0],y2:p[1]},silent:!0});vg(y.shape,l);var _=f++%s.length;c[_]=c[_]||[],c[_].push(y)}for(var x=o.getLineStyle(["color"]),v=0;v<c.length;++v)t.add(La(c[v],{style:It({stroke:s[v%s.length]},x),silent:!0}))}},splitArea:function(r,t,e,n){iZ(r,e,n,n)}},G1=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(ue);Hr(G1,r0.prototype);var NFt=function(r){U(t,r);function t(e,n,i,a,o){var s=r.call(this,e,n,i)||this;return s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.pointToData=function(e,n){return this.coordinateSystem.pointToData(e)[0]},t}(wo),Gj=["single"],FFt=function(){function r(t,e,n){this.type="single",this.dimension="single",this.dimensions=Gj,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,n)}return r.prototype._init=function(t,e,n){var i=this.dimension,a=new NFt(i,oT(t),[0,0],t.get("type"),t.get("position")),o=a.type==="category";a.onBand=o&&t.get("boundaryGap"),a.inverse=t.get("inverse"),a.orient=t.get("orient"),t.axis=a,a.model=t,a.coordinateSystem=this,this._axis=a},r.prototype.update=function(t,e){t.eachSeries(function(n){if(n.coordinateSystem===this){var i=n.getData();I(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),_g(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(t,e){this._rect=qr({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],a=e.inverse?1:0;e.setExtent(i[a],i[1-a]),this._updateAxisTransform(e,n?t.x:t.y)},r.prototype._updateAxisTransform=function(t,e){var n=t.getExtent(),i=n[0]+n[1],a=t.isHorizontal();t.toGlobalCoord=a?function(o){return o+e}:function(o){return i-o+e},t.toLocalCoord=a?function(o){return o-e}:function(o){return i-o+e}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(t){var e=this.getRect(),n=this.getAxis(),i=n.orient;return i==="horizontal"?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},r.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t[e.orient==="horizontal"?0:1]))]},r.prototype.dataToPoint=function(t){var e=this.getAxis(),n=this.getRect(),i=[],a=e.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),i[a]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-a]=a===0?n.y+n.height/2:n.x+n.width/2,i},r.prototype.convertToPixel=function(t,e,n){var i=Iz(e);return i===this?this.dataToPoint(n):null},r.prototype.convertFromPixel=function(t,e,n){var i=Iz(e);return i===this?this.pointToData(n):null},r}();function Iz(r){var t=r.seriesModel,e=r.singleAxisModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function kFt(r,t){var e=[];return r.eachComponent("singleAxis",function(n,i){var a=new FFt(n,r,t);a.name="single_"+i,a.resize(n,t),n.coordinateSystem=a,e.push(a)}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var i=n.getReferringComponents("singleAxis",Br).models[0];n.coordinateSystem=i&&i.coordinateSystem}}),e}var GFt={create:kFt,dimensions:Gj},Rz=["x","y"],BFt=["width","height"],zFt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,n,i,a,o){var s=i.axis,l=s.coordinateSystem,u=VC(l,1-wS(s)),h=l.dataToPoint(n)[0],c=a.get("type");if(c&&c!=="none"){var f=bD(a),d=VFt[c](s,h,u);d.style=f,e.graphicKey=d.type,e.pointer=d}var g=XI(i);Pj(n,e,g,i,a,o)},t.prototype.getHandleTransform=function(e,n,i){var a=XI(n,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=ED(n.axis,e,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,n,i,a){var o=i.axis,s=o.coordinateSystem,l=wS(o),u=VC(s,l),h=[e.x,e.y];h[l]+=n[l],h[l]=Math.min(u[1],h[l]),h[l]=Math.max(u[0],h[l]);var c=VC(s,1-l),f=(c[1]+c[0])/2,d=[f,f];return d[l]=h[l],{x:h[0],y:h[1],rotation:e.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}},t}(TD),VFt={line:function(r,t,e){var n=CD([t,e[0]],[t,e[1]],wS(r));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(r,t,e){var n=r.getBandWidth(),i=e[1]-e[0];return{type:"Rect",shape:Lj([t-n/2,e[0]],[n,i],wS(r))}}};function wS(r){return r.isHorizontal()?0:1}function VC(r,t){var e=r.getRect();return[e[Rz[t]],e[Rz[t]]+e[BFt[t]]]}var UFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="single",t}(yr);function WFt(r){ne(c0),lf.registerAxisPointerClass("SingleAxisPointer",zFt),r.registerComponentView(UFt),r.registerComponentView(DFt),r.registerComponentModel(G1),Sg(r,"single",G1,G1.defaultOption),r.registerCoordinateSystem("single",GFt)}var HFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,n,i){var a=ep(e);r.prototype.init.apply(this,arguments),Pz(e,a)},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),Pz(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(ue);function Pz(r,t){var e=r.cellSize,n;rt(e)?n=e:n=r.cellSize=[e,e],n.length===1&&(n[1]=n[0]);var i=nt([0,1],function(a){return fbt(t,a)&&(n[a]="auto"),n[a]!=null&&n[a]!=="auto"});Vu(r,t,{type:"box",ignoreSize:i})}var $Ft=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){var a=this.group;a.removeAll();var o=e.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),u=n.getLocaleModel();this._renderDayRect(e,s,a),this._renderLines(e,s,l,a),this._renderYearText(e,s,l,a),this._renderMonthText(e,u,l,a),this._renderWeekText(e,u,s,l,a)},t.prototype._renderDayRect=function(e,n,i){for(var a=e.coordinateSystem,o=e.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),u=n.start.time;u<=n.end.time;u=a.getNextNDay(u,1).time){var h=a.dataToRect([u],!1).tl,c=new ve({shape:{x:h[0],y:h[1],width:s,height:l},cursor:"default",style:o});i.add(c)}},t.prototype._renderLines=function(e,n,i,a){var o=this,s=e.coordinateSystem,l=e.getModel(["splitLine","lineStyle"]).getLineStyle(),u=e.get(["splitLine","show"]),h=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=n.start,f=0;c.time<=n.end.time;f++){g(c.formatedDate),f===0&&(c=s.getDateInfo(n.start.y+"-"+n.start.m));var d=c.date;d.setMonth(d.getMonth()+1),c=s.getDateInfo(d)}g(s.getNextNDay(n.end.time,1).formatedDate);function g(p){o._firstDayOfMonth.push(s.getDateInfo(p)),o._firstDayPoints.push(s.dataToRect([p],!1).tl);var v=o._getLinePointsOfOneWeek(e,p,i);o._tlpoints.push(v[0]),o._blpoints.push(v[v.length-1]),u&&o._drawSplitline(v,l,a)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,h,i),l,a),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,h,i),l,a)},t.prototype._getEdgesPoints=function(e,n,i){var a=[e[0].slice(),e[e.length-1].slice()],o=i==="horizontal"?0:1;return a[0][o]=a[0][o]-n/2,a[1][o]=a[1][o]+n/2,a},t.prototype._drawSplitline=function(e,n,i){var a=new Ei({z2:20,shape:{points:e},style:n});i.add(a)},t.prototype._getLinePointsOfOneWeek=function(e,n,i){for(var a=e.coordinateSystem,o=a.getDateInfo(n),s=[],l=0;l<7;l++){var u=a.getNextNDay(o.time,l),h=a.dataToRect([u.time],!1);s[2*u.day]=h.tl,s[2*u.day+1]=h[i==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(e,n){return yt(e)&&e?ubt(e,n):At(e)?e(n):n.nameMap},t.prototype._yearTextPositionControl=function(e,n,i,a,o){var s=n[0],l=n[1],u=["center","bottom"];a==="bottom"?(l+=o,u=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,u=["center","top"]):l-=o;var h=0;return(a==="left"||a==="right")&&(h=Math.PI/2),{rotation:h,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(e,n,i,a){var o=e.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=i!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],h=(u[0][0]+u[1][0])/2,c=(u[0][1]+u[1][1])/2,f=i==="horizontal"?0:1,d={top:[h,u[f][1]],bottom:[h,u[1-f][1]],left:[u[1-f][0],c],right:[u[f][0],c]},g=n.start.y;+n.end.y>+n.start.y&&(g=g+"-"+n.end.y);var p=o.get("formatter"),v={start:n.start.y,end:n.end.y,nameMap:g},m=this._formatterLabel(p,v),y=new xe({z2:30,style:sr(o,{text:m})});y.attr(this._yearTextPositionControl(y,d[l],i,l,s)),a.add(y)}},t.prototype._monthTextPositionControl=function(e,n,i,a,o){var s="left",l="top",u=e[0],h=e[1];return i==="horizontal"?(h=h+o,n&&(s="center"),a==="start"&&(l="bottom")):(u=u+o,n&&(l="middle"),a==="start"&&(s="right")),{x:u,y:h,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(e,n,i,a){var o=e.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),u=o.get("position"),h=o.get("align"),c=[this._tlpoints,this._blpoints];(!s||yt(s))&&(s&&(n=eI(s)||n),s=n.get(["time","monthAbbr"])||[]);var f=u==="start"?0:1,d=i==="horizontal"?0:1;l=u==="start"?-l:l;for(var g=h==="center",p=0;p<c[f].length-1;p++){var v=c[f][p].slice(),m=this._firstDayOfMonth[p];if(g){var y=this._firstDayPoints[p];v[d]=(y[d]+c[0][p+1][d])/2}var _=o.get("formatter"),x=s[+m.m-1],w={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:x},S=this._formatterLabel(_,w),T=new xe({z2:30,style:tt(sr(o,{text:S}),this._monthTextPositionControl(v,g,i,u,l))});a.add(T)}}},t.prototype._weekTextPositionControl=function(e,n,i,a,o){var s="center",l="middle",u=e[0],h=e[1],c=i==="start";return n==="horizontal"?(u=u+a+(c?1:-1)*o[0]/2,s=c?"right":"left"):(h=h+a+(c?1:-1)*o[1]/2,l=c?"bottom":"top"),{x:u,y:h,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(e,n,i,a,o){var s=e.getModel("dayLabel");if(s.get("show")){var l=e.coordinateSystem,u=s.get("position"),h=s.get("nameMap"),c=s.get("margin"),f=l.getFirstDayOfWeek();if(!h||yt(h)){h&&(n=eI(h)||n);var d=n.get(["time","dayOfWeekShort"]);h=d||nt(n.get(["time","dayOfWeekAbbr"]),function(w){return w[0]})}var g=l.getNextNDay(i.end.time,7-i.lweek).time,p=[l.getCellWidth(),l.getCellHeight()];c=ft(c,Math.min(p[1],p[0])),u==="start"&&(g=l.getNextNDay(i.start.time,-(7+i.fweek)).time,c=-c);for(var v=0;v<7;v++){var m=l.getNextNDay(g,v),y=l.dataToRect([m.time],!1).center,_=v;_=Math.abs((v+f)%7);var x=new xe({z2:30,style:tt(sr(s,{text:h[_]}),this._weekTextPositionControl(y,a,u,c,p))});o.add(x)}}},t.type="calendar",t}(yr),UC=864e5,YFt=function(){function r(t,e,n){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=t}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(t){t=gs(t);var e=t.getFullYear(),n=t.getMonth()+1,i=n<10?"0"+n:""+n,a=t.getDate(),o=a<10?"0"+a:""+a,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:e+"",m:i,d:o,day:s,time:t.getTime(),formatedDate:e+"-"+i+"-"+o,date:t}},r.prototype.getNextNDay=function(t,e){return e=e||0,e===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e),this.getDateInfo(t))},r.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[n,7]:[7,n];I([0,1],function(c){h(a,c)&&(o[i[c]]=a[c]*s[c])});var l={width:e.getWidth(),height:e.getHeight()},u=this._rect=qr(o,l);I([0,1],function(c){h(a,c)||(a[c]=u[i[c]]/s[c])});function h(c,f){return c[f]!=null&&c[f]!=="auto"}this._sw=a[0],this._sh=a[1]},r.prototype.dataToPoint=function(t,e){rt(t)&&(t=t[0]),e==null&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo,a=n.formatedDate;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+UC))return[NaN,NaN];var o=n.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},r.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},r.prototype.dataToRect=function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},r.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},r.prototype.convertToPixel=function(t,e,n){var i=Lz(e);return i===this?i.dataToPoint(n):null},r.prototype.convertFromPixel=function(t,e,n){var i=Lz(e);return i===this?i.pointToData(n):null},r.prototype.containPoint=function(t){return!1},r.prototype._initRangeOption=function(){var t=this._model.get("range"),e;if(rt(t)&&t.length===1&&(t=t[0]),rt(t))e=t;else{var n=t.toString();if(/^\d{4}$/.test(n)&&(e=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var i=this.getDateInfo(n),a=i.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);e=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(e=[n,n])}if(!e)return t;var s=this._getRangeInfo(e);return s.start.time>s.end.time&&e.reverse(),e},r.prototype._getRangeInfo=function(t){var e=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],n;e[0].time>e[1].time&&(n=!0,e.reverse());var i=Math.floor(e[1].time/UC)-Math.floor(e[0].time/UC)+1,a=new Date(e[0].time),o=a.getDate(),s=e[1].date.getDate();a.setDate(o+i-1);var l=a.getDate();if(l!==s)for(var u=a.getTime()-e[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-e[1].time)*u>0;)i-=u,a.setDate(l-u);var h=Math.floor((i+e[0].day+6)/7),c=n?-h+1:h-1;return n&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:i,weeks:h,nthWeek:c,fweek:e[0].day,lweek:e[1].day}},r.prototype._getDateByWeeksAndDay=function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||t===0&&e<i.fweek||t===i.weeks&&e>i.lweek)return null;var a=(t-1)*7-i.fweek+e,o=new Date(i.start.time);return o.setDate(+i.start.d+a),this.getDateInfo(o)},r.create=function(t,e){var n=[];return t.eachComponent("calendar",function(i){var a=new r(i);n.push(a),i.coordinateSystem=a}),t.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=n[i.get("calendarIndex")||0])}),n},r.dimensions=["time","value"],r}();function Lz(r){var t=r.calendarModel,e=r.seriesModel,n=t?t.coordinateSystem:e?e.coordinateSystem:null;return n}function XFt(r){r.registerComponentModel(HFt),r.registerComponentView($Ft),r.registerCoordinateSystem("calendar",YFt)}function ZFt(r,t){var e=r.existing;if(t.id=r.keyInfo.id,!t.type&&e&&(t.type=e.type),t.parentId==null){var n=t.parentOption;n?t.parentId=n.id:e&&(t.parentId=e.parentId)}t.parentOption=null}function Dz(r,t){var e;return I(t,function(n){r[n]!=null&&r[n]!=="auto"&&(e=!0)}),e}function jFt(r,t,e){var n=tt({},e),i=r[t],a=e.$action||"merge";a==="merge"?i?(Zt(i,n,!0),Vu(i,n,{ignoreSize:!0}),R$(e,i),K_(e,i),K_(e,i,"shape"),K_(e,i,"style"),K_(e,i,"extra"),e.clipPath=i.clipPath):r[t]=n:a==="replace"?r[t]=n:a==="remove"&&i&&(r[t]=null)}var Bj=["transition","enterFrom","leaveTo"],KFt=Bj.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function K_(r,t,e){if(e&&(!r[e]&&t[e]&&(r[e]={}),r=r[e],t=t[e]),!(!r||!t))for(var n=e?Bj:KFt,i=0;i<n.length;i++){var a=n[i];r[a]==null&&t[a]!=null&&(r[a]=t[a])}}function qFt(r,t){if(r&&(r.hv=t.hv=[Dz(t,["left","right"]),Dz(t,["top","bottom"])],r.type==="group")){var e=r,n=t;e.width==null&&(e.width=n.width=0),e.height==null&&(e.height=n.height=0)}}var JFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return t.prototype.mergeOption=function(e,n){var i=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,e,n),this.option.elements=i},t.prototype.optionUpdated=function(e,n){var i=this.option,a=(n?i:e).elements,o=i.elements=n?[]:i.elements,s=[];this._flatten(a,s,null);var l=CH(o,s,"normalMerge"),u=this._elOptionsToUpdate=[];I(l,function(h,c){var f=h.newOption;f&&(u.push(f),ZFt(h,f),jFt(o,c,f),qFt(o[c],f))},this),i.elements=ze(o,function(h){return h&&delete h.$action,h!=null})},t.prototype._flatten=function(e,n,i){I(e,function(a){if(a){i&&(a.parentOption=i),n.push(a);var o=a.children;o&&o.length&&this._flatten(o,n,a),delete a.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(ue),Oz={path:null,compoundPath:null,group:Dt,image:bn,text:xe},Aa=me(),QFt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._elMap=wt()},t.prototype.render=function(e,n,i){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,i)},t.prototype._updateElements=function(e){var n=e.useElOptionsToUpdate();if(n){var i=this._elMap,a=this.group,o=e.get("z"),s=e.get("zlevel");I(n,function(l){var u=Zr(l.id,null),h=u!=null?i.get(u):null,c=Zr(l.parentId,null),f=c!=null?i.get(c):a,d=l.type,g=l.style;d==="text"&&g&&l.hv&&l.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var p=l.textContent,v=l.textConfig;if(g&&_j(g,d,!!v,!!p)){var m=xj(g,d,!0);!v&&m.textConfig&&(v=l.textConfig=m.textConfig),!p&&m.textContent&&(p=m.textContent)}var y=tkt(l),_=l.$action||"merge",x=_==="merge",w=_==="replace";if(x){var S=!h,T=h;S?T=Nz(u,f,l.type,i):(T&&(Aa(T).isNew=!1),bj(T)),T&&(F1(T,y,e,{isInit:S}),Fz(T,l,o,s))}else if(w){B1(h,l,i,e);var b=Nz(u,f,l.type,i);b&&(F1(b,y,e,{isInit:!0}),Fz(b,l,o,s))}else _==="remove"&&(wj(h,l),B1(h,l,i,e));var E=i.get(u);if(E&&p)if(x){var C=E.getTextContent();C?C.attr(p):E.setTextContent(new xe(p))}else w&&E.setTextContent(new xe(p));if(E){var M=l.clipPath;if(M){var A=M.type,R=void 0,S=!1;if(x){var P=E.getClipPath();S=!P||Aa(P).type!==A,R=S?ZI(A):P}else w&&(S=!0,R=ZI(A));E.setClipPath(R),F1(R,M,e,{isInit:S}),xS(R,M.keyframeAnimation,e)}var L=Aa(E);E.setTextConfig(v),L.option=l,ekt(E,e,l),qg({el:E,componentModel:e,itemName:E.name,itemTooltipOption:l.tooltip}),xS(E,l.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,n){for(var i=e.option.elements,a=this.group,o=this._elMap,s=n.getWidth(),l=n.getHeight(),u=["x","y"],h=0;h<i.length;h++){var c=i[h],f=Zr(c.id,null),d=f!=null?o.get(f):null;if(!(!d||!d.isGroup)){var g=d.parent,p=g===a,v=Aa(d),m=Aa(g);v.width=ft(v.option.width,p?s:m.width)||0,v.height=ft(v.option.height,p?l:m.height)||0}}for(var h=i.length-1;h>=0;h--){var c=i[h],f=Zr(c.id,null),d=f!=null?o.get(f):null;if(d){var g=d.parent,m=Aa(g),y=g===a?{width:s,height:l}:{width:m.width,height:m.height},_={},x=qw(d,c,y,null,{hv:c.hv,boundingMode:c.bounding},_);if(!Aa(d).isNew&&x){for(var w=c.transition,S={},T=0;T<u.length;T++){var b=u[T],E=_[b];w&&(Rc(w)||te(w,b)>=0)?S[b]=E:d[b]=E}Ae(d,S,e,0)}else d.attr(_)}}},t.prototype._clear=function(){var e=this,n=this._elMap;n.each(function(i){B1(i,Aa(i).option,n,e._lastGraphicModel)}),this._elMap=wt()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(yr);function ZI(r){var t=xt(Oz,r)?Oz[r]:lL(r),e=new t({});return Aa(e).type=r,e}function Nz(r,t,e,n){var i=ZI(e);return t.add(i),n.set(r,i),Aa(i).id=r,Aa(i).isNew=!0,i}function B1(r,t,e,n){var i=r&&r.parent;i&&(r.type==="group"&&r.traverse(function(a){B1(a,t,e,n)}),dT(r,t,n),e.removeKey(Aa(r).id))}function Fz(r,t,e,n){r.isGroup||I([["cursor",$a.prototype.cursor],["zlevel",n||0],["z",e||0],["z2",0]],function(i){var a=i[0];xt(t,a)?r[a]=Vt(t[a],i[1]):r[a]==null&&(r[a]=i[1])}),I(he(t),function(i){if(i.indexOf("on")===0){var a=t[i];r[i]=At(a)?a:null}}),xt(t,"draggable")&&(r.draggable=t.draggable),t.name!=null&&(r.name=t.name),t.id!=null&&(r.id=t.id)}function tkt(r){return r=tt({},r),I(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(I$),function(t){delete r[t]}),r}function ekt(r,t,e){var n=Ft(r).eventData;!r.silent&&!r.ignore&&!n&&(n=Ft(r).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:r.name}),n&&(n.info=e.info)}function rkt(r){r.registerComponentModel(JFt),r.registerComponentView(QFt),r.registerPreprocessor(function(t){var e=t.graphic;rt(e)?!e[0]||!e[0].elements?t.graphic=[{elements:e}]:t.graphic=[t.graphic[0]]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}var kz=["x","y","radius","angle","single"],nkt=["cartesian2d","polar","singleAxis"];function ikt(r){var t=r.get("coordinateSystem");return te(nkt,t)>=0}function gu(r){return r+"Axis"}function akt(r,t){var e=wt(),n=[],i=wt();r.eachComponent({mainType:"dataZoom",query:t},function(h){i.get(h.uid)||s(h)});var a;do a=!1,r.eachComponent("dataZoom",o);while(a);function o(h){!i.get(h.uid)&&l(h)&&(s(h),a=!0)}function s(h){i.set(h.uid,!0),n.push(h),u(h)}function l(h){var c=!1;return h.eachTargetAxis(function(f,d){var g=e.get(f);g&&g[d]&&(c=!0)}),c}function u(h){h.eachTargetAxis(function(c,f){(e.get(c)||e.set(c,[]))[f]=!0})}return n}function zj(r){var t=r.ecModel,e={infoList:[],infoMap:wt()};return r.eachTargetAxis(function(n,i){var a=t.getComponent(gu(n),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=e.infoMap.get(s);l||(l={model:o,axisModels:[]},e.infoList.push(l),e.infoMap.set(s,l)),l.axisModels.push(a)}}}),e}var WC=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},r}(),gy=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return t.prototype.init=function(e,n,i){var a=Gz(e);this.settledOption=a,this.mergeDefaultAndTheme(e,i),this._doInit(a)},t.prototype.mergeOption=function(e){var n=Gz(e);Zt(this.option,e,!0),Zt(this.settledOption,n,!0),this._doInit(n)},t.prototype._doInit=function(e){var n=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var i=this.settledOption;I([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(n[a[0]]=i[a[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),n=this._targetAxisInfoMap=wt(),i=this._fillSpecifiedTargetAxis(n);i?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var n=!1;return I(kz,function(i){var a=this.getReferringComponents(gu(i),JSt);if(a.specified){n=!0;var o=new WC;I(a.models,function(s){o.add(s.componentIndex)}),e.set(i,o)}},this),n},t.prototype._fillAutoTargetAxisByOrient=function(e,n){var i=this.ecModel,a=!0;if(a){var o=n==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===n}});l(s,"single")}function l(u,h){var c=u[0];if(c){var f=new WC;if(f.add(c.componentIndex),e.set(h,f),a=!1,h==="x"||h==="y"){var d=c.getReferringComponents("grid",Br).models[0];d&&I(u,function(g){c.componentIndex!==g.componentIndex&&d===g.getReferringComponents("grid",Br).models[0]&&f.add(g.componentIndex)})}}}a&&I(kz,function(u){if(a){var h=i.findComponents({mainType:gu(u),filter:function(f){return f.get("type",!0)==="category"}});if(h[0]){var c=new WC;c.add(h[0].componentIndex),e.set(u,c),a=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(n){!e&&(e=n)},this),e==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var n=this._rangePropMode,i=this.get("rangeMode");I([["start","startValue"],["end","endValue"]],function(a,o){var s=e[a[0]]!=null,l=e[a[1]]!=null;s&&!l?n[o]="percent":!s&&l?n[o]="value":i?n[o]=i[o]:s&&(n[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(n,i){e==null&&(e=this.ecModel.getComponent(gu(n),i))},this),e},t.prototype.eachTargetAxis=function(e,n){this._targetAxisInfoMap.each(function(i,a){I(i.indexList,function(o){e.call(n,a,o)})})},t.prototype.getAxisProxy=function(e,n){var i=this.getAxisModel(e,n);if(i)return i.__dzAxisProxy},t.prototype.getAxisModel=function(e,n){var i=this._targetAxisInfoMap.get(e);if(i&&i.indexMap[n])return this.ecModel.getComponent(gu(e),n)},t.prototype.setRawRange=function(e){var n=this.option,i=this.settledOption;I([["start","startValue"],["end","endValue"]],function(a){(e[a[0]]!=null||e[a[1]]!=null)&&(n[a[0]]=i[a[0]]=e[a[0]],n[a[1]]=i[a[1]]=e[a[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var n=this.option;I(["start","startValue","end","endValue"],function(i){n[i]=e[i]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,n){if(e==null&&n==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(e,n).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var n,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;n||(n=u)}return n},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(ue);function Gz(r){var t={};return I(["start","end","startValue","endValue","throttle"],function(e){r.hasOwnProperty(e)&&(t[e]=r[e])}),t}var okt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(gy),RD=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i,a){this.dataZoomModel=e,this.ecModel=n,this.api=i},t.type="dataZoom",t}(yr),skt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(RD),od=I,Bz=Ga,lkt=function(){function r(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}return r.prototype.hostedBy=function(t){return this._dataZoomModel===t},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(ikt(e)){var n=gu(this._dimName),i=e.getReferringComponents(n,Br).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}},this),t},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return Pt(this._minMaxSpan)},r.prototype.calculateDataWindow=function(t){var e=this._dataExtent,n=this.getAxisModel(),i=n.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;od(["start","end"],function(f,d){var g=t[f],p=t[f+"Value"];a[d]==="percent"?(g==null&&(g=o[d]),p=i.parse(Fe(g,o,e))):(u=!0,p=p==null?e[d]:i.parse(p),g=Fe(p,e,o)),l[d]=p==null||isNaN(p)?e[d]:p,s[d]=g==null||isNaN(g)?o[d]:g}),Bz(l),Bz(s);var h=this._minMaxSpan;u?c(l,s,e,o,!1):c(s,l,o,e,!0);function c(f,d,g,p,v){var m=v?"Span":"ValueSpan";uf(0,f,g,"all",h["min"+m],h["max"+m]);for(var y=0;y<2;y++)d[y]=Fe(f[y],g,p,!0),v&&(d[y]=i.parse(d[y]))}return{valueWindow:l,percentWindow:s}},r.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=ukt(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(t,e){if(t!==this._dataZoomModel)return;var n=this._dimName,i=this.getTargetSeriesModels(),a=t.get("filterMode"),o=this._valueWindow;if(a==="none")return;od(i,function(l){var u=l.getData(),h=u.mapDimensionsAll(n);if(h.length){if(a==="weakFilter"){var c=u.getStore(),f=nt(h,function(d){return u.getDimensionIndex(d)},u);u.filterSelf(function(d){for(var g,p,v,m=0;m<h.length;m++){var y=c.get(f[m],d),_=!isNaN(y),x=y<o[0],w=y>o[1];if(_&&!x&&!w)return!0;_&&(v=!0),x&&(g=!0),w&&(p=!0)}return v&&g&&p})}else od(h,function(d){if(a==="empty")l.setData(u=u.map(d,function(p){return s(p)?p:NaN}));else{var g={};g[d]=o,u.selectRange(g)}});od(h,function(d){u.setApproximateExtent(o,d)})}});function s(l){return l>=o[0]&&l<=o[1]}},r.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;od(["min","max"],function(i){var a=e.get(i+"Span"),o=e.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=Fe(n[0]+o,n,[0,100],!0):a!=null&&(o=Fe(a,[0,100],n,!0)-n[0]),t[i+"Span"]=a,t[i+"ValueSpan"]=o},this)},r.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var i=yH(n,[0,500]);i=Math.min(i,20);var a=t.axis.scale.rawExtentInfo;e[0]!==0&&a.setDeterminedMinMax("min",+n[0].toFixed(i)),e[1]!==100&&a.setDeterminedMinMax("max",+n[1].toFixed(i)),a.freeze()}},r}();function ukt(r,t,e){var n=[1/0,-1/0];od(e,function(o){UMt(n,o.getData(),t)});var i=r.getAxisModel(),a=iX(i.axis.scale,i,n).calculate();return[a.min,a.max]}var hkt={getTargetSeries:function(r){function t(i){r.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=r.getComponent(gu(o),s);i(o,s,l,a)})})}t(function(i,a,o,s){o.__dzAxisProxy=null});var e=[];t(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new lkt(i,a,s,r),e.push(o.__dzAxisProxy))});var n=wt();return I(e,function(i){I(i.getTargetSeriesModels(),function(a){n.set(a.uid,a)})}),n},overallReset:function(r,t){r.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(n,i){e.getAxisProxy(n,i).reset(e)}),e.eachTargetAxis(function(n,i){e.getAxisProxy(n,i).filterData(e,t)})}),r.eachComponent("dataZoom",function(e){var n=e.findRepresentativeAxisProxy();if(n){var i=n.getDataPercentWindow(),a=n.getDataValueWindow();e.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function ckt(r){r.registerAction("dataZoom",function(t,e){var n=akt(e,t);I(n,function(i){i.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var zz=!1;function PD(r){zz||(zz=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,hkt),ckt(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function fkt(r){r.registerComponentModel(okt),r.registerComponentView(skt),PD(r)}var Ra=function(){function r(){}return r}(),Vj={};function sd(r,t){Vj[r]=t}function Uj(r){return Vj[r]}var dkt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;I(this.option.feature,function(n,i){var a=Uj(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(e)),Zt(n,a.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(ue);function gkt(r,t,e){var n=t.getBoxLayoutParams(),i=t.get("padding"),a={width:e.getWidth(),height:e.getHeight()},o=qr(n,a,i);Ac(t.get("orient"),r,t.get("itemGap"),o.width,o.height),qw(r,n,a,i)}function Wj(r,t){var e=tp(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),r=new ve({shape:{x:r.x-e[3],y:r.y-e[0],width:r.width+e[1]+e[3],height:r.height+e[0]+e[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),r}var pkt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,n,i,a){var o=this.group;if(o.removeAll(),!e.get("show"))return;var s=+e.get("itemSize"),l=e.get("orient")==="vertical",u=e.get("feature")||{},h=this._features||(this._features={}),c=[];I(u,function(g,p){c.push(p)}),new cl(this._featureNames||[],c).add(f).update(f).remove(Wt(f,null)).execute(),this._featureNames=c;function f(g,p){var v=c[g],m=c[p],y=u[v],_=new Oe(y,e,e.ecModel),x;if(a&&a.newTitle!=null&&a.featureName===v&&(y.title=a.newTitle),v&&!m){if(vkt(v))x={onclick:_.option.onclick,featureName:v};else{var w=Uj(v);if(!w)return;x=new w}h[v]=x}else if(x=h[m],!x)return;x.uid=Qg("toolbox-feature"),x.model=_,x.ecModel=n,x.api=i;var S=x instanceof Ra;if(!v&&m){S&&x.dispose&&x.dispose(n,i);return}if(!_.get("show")||S&&x.unusable){S&&x.remove&&x.remove(n,i);return}d(_,x,v),_.setIconStatus=function(T,b){var E=this.option,C=this.iconPaths;E.iconStatus=E.iconStatus||{},E.iconStatus[T]=b,C[T]&&(b==="emphasis"?ul:hl)(C[T])},x instanceof Ra&&x.render&&x.render(_,n,i,a)}function d(g,p,v){var m=g.getModel("iconStyle"),y=g.getModel(["emphasis","iconStyle"]),_=p instanceof Ra&&p.getIcons?p.getIcons():g.get("icon"),x=g.get("title")||{},w,S;yt(_)?(w={},w[v]=_):w=_,yt(x)?(S={},S[v]=x):S=x;var T=g.iconPaths={};I(w,function(b,E){var C=Jy(b,{},{x:-s/2,y:-s/2,width:s,height:s});C.setStyle(m.getItemStyle());var M=C.ensureState("emphasis");M.style=y.getItemStyle();var A=new xe({style:{text:S[E],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:uL({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},n)},ignore:!0});C.setTextContent(A),qg({el:C,componentModel:e,itemName:E,formatterParamsExtra:{title:S[E]}}),C.__title=S[E],C.on("mouseover",function(){var R=y.getItemStyle(),P=l?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";A.setStyle({fill:y.get("textFill")||R.fill||R.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),C.setTextConfig({position:y.get("textPosition")||P}),A.ignore=!e.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){g.get(["iconStatus",E])!=="emphasis"&&i.leaveEmphasis(this),A.hide()}),(g.get(["iconStatus",E])==="emphasis"?ul:hl)(C),o.add(C),C.on("click",_t(p.onclick,p,n,i,E)),T[E]=C})}gkt(o,e,i),o.add(Wj(o.getBoundingRect(),e)),l||o.eachChild(function(g){var p=g.__title,v=g.ensureState("emphasis"),m=v.textConfig||(v.textConfig={}),y=g.getTextContent(),_=y&&y.ensureState("emphasis");if(_&&!At(_)&&p){var x=_.style||(_.style={}),w=$y(p,xe.makeFont(x)),S=g.x+o.x,T=g.y+o.y+s,b=!1;T+w.height>i.getHeight()&&(m.position="top",b=!0);var E=b?-5-w.height:s+10;S+w.width/2>i.getWidth()?(m.position=["100%",E],x.align="right"):S-w.width/2<0&&(m.position=[0,E],x.align="left")}})},t.prototype.updateView=function(e,n,i,a){I(this._features,function(o){o instanceof Ra&&o.updateView&&o.updateView(o.model,n,i,a)})},t.prototype.remove=function(e,n){I(this._features,function(i){i instanceof Ra&&i.remove&&i.remove(e,n)}),this.group.removeAll()},t.prototype.dispose=function(e,n){I(this._features,function(i){i instanceof Ra&&i.dispose&&i.dispose(e,n)})},t.type="toolbox",t}(yr);function vkt(r){return r.indexOf("my")===0}var mkt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,n){var i=this.model,a=i.get("name")||e.get("title.0.text")||"echarts",o=n.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=n.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),u=le.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var h=document.createElement("a");h.download=a+"."+s,h.target="_blank",h.href=l;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});h.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||o){var f=l.split(","),d=f[0].indexOf("base64")>-1,g=o?decodeURIComponent(f[1]):f[1];d&&(g=window.atob(g));var p=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var v=g.length,m=new Uint8Array(v);v--;)m[v]=g.charCodeAt(v);var y=new Blob([m]);window.navigator.msSaveOrOpenBlob(y,p)}else{var _=document.createElement("iframe");document.body.appendChild(_);var x=_.contentWindow,w=x.document;w.open("image/svg+xml","replace"),w.write(g),w.close(),x.focus(),w.execCommand("SaveAs",!0,p),document.body.removeChild(_)}}else{var S=i.get("lang"),T='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(S&&S[0]||"")+'" /></body>',b=window.open();b.document.write(T),b.document.title=a}},t.getDefaultOption=function(e){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},t}(Ra),Vz="__ec_magicType_stack__",ykt=[["line","bar"],["stack"]],_kt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,n=e.get("icon"),i={};return I(e.get("type"),function(a){n[a]&&(i[a]=n[a])}),i},t.getDefaultOption=function(e){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},t.prototype.onclick=function(e,n,i){var a=this.model,o=a.get(["seriesIndex",i]);if(Uz[i]){var s={series:[]},l=function(c){var f=c.subType,d=c.id,g=Uz[i](f,d,c,a);g&&(It(g,c.option),s.series.push(g));var p=c.coordinateSystem;if(p&&p.type==="cartesian2d"&&(i==="line"||i==="bar")){var v=p.getAxesByScale("ordinal")[0];if(v){var m=v.dim,y=m+"Axis",_=c.getReferringComponents(y,Br).models[0],x=_.componentIndex;s[y]=s[y]||[];for(var w=0;w<=x;w++)s[y][x]=s[y][x]||{};s[y][x].boundaryGap=i==="bar"}}};I(ykt,function(c){te(c,i)>=0&&I(c,function(f){a.setIconStatus(f,"normal")})}),a.setIconStatus(i,"emphasis"),e.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,h=i;i==="stack"&&(u=Zt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(h="tiled")),n.dispatchAction({type:"changeMagicType",currentType:h,newOption:s,newTitle:u,featureName:"magicType"})}},t}(Ra),Uz={line:function(r,t,e,n){if(r==="bar")return Zt({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(r,t,e,n){if(r==="line")return Zt({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(r,t,e,n){var i=e.get("stack")===Vz;if(r==="line"||r==="bar")return n.setIconStatus("stack",i?"normal":"emphasis"),Zt({id:t,stack:i?"":Vz},n.get(["option","stack"])||{},!0)}};_s({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,t){t.mergeOption(r.newOption)});var gT=new Array(60).join("-"),bg="	";function xkt(r){var t={},e=[],n=[];return r.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},n.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(i)}else e.push(i)}else e.push(i)}),{seriesGroupByCategoryAxis:t,other:e,meta:n}}function Skt(r){var t=[];return I(r,function(e,n){var i=e.categoryAxis,a=e.valueAxis,o=a.dim,s=[" "].concat(nt(e.series,function(d){return d.name})),l=[i.model.getCategories()];I(e.series,function(d){var g=d.getRawData();l.push(d.getRawData().mapArray(g.mapDimension(o),function(p){return p}))});for(var u=[s.join(bg)],h=0;h<l[0].length;h++){for(var c=[],f=0;f<l.length;f++)c.push(l[f][h]);u.push(c.join(bg))}t.push(u.join(`
`))}),t.join(`

`+gT+`

`)}function wkt(r){return nt(r,function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=e.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];n.push((s?s+bg:"")+i.join(bg))}),n.join(`
`)}).join(`

`+gT+`

`)}function Tkt(r){var t=xkt(r);return{value:ze([Skt(t.seriesGroupByCategoryAxis),wkt(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+gT+`

`),meta:t.meta}}function TS(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function bkt(r){var t=r.slice(0,r.indexOf(`
`));if(t.indexOf(bg)>=0)return!0}var jI=new RegExp("["+bg+"]+","g");function Ekt(r){for(var t=r.split(/\n+/g),e=TS(t.shift()).split(jI),n=[],i=nt(e,function(l){return{name:l,data:[]}}),a=0;a<t.length;a++){var o=TS(t[a]).split(jI);n.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:n}}function Ckt(r){for(var t=r.split(/\n+/g),e=TS(t.shift()),n=[],i=0;i<t.length;i++){var a=TS(t[i]);if(a){var o=a.split(jI),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),n[i]={name:s,value:[]},l=n[i].value):l=n[i]=[];for(var h=0;h<o.length;h++)l.push(+o[h]);l.length===1&&(u?n[i].value=l[0]:n[i]=l[0])}}return{name:e,data:n}}function Mkt(r,t){var e=r.split(new RegExp(`
*`+gT+`
*`,"g")),n={series:[]};return I(e,function(i,a){if(bkt(i)){var o=Ekt(i),s=t[a],l=s.axisDim+"Axis";s&&(n[l]=n[l]||[],n[l][s.axisIndex]={data:o.categories},n.series=n.series.concat(o.series))}else{var o=Ckt(i);n.series.push(o)}}),n}var Akt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var i=n.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),h=document.createElement("textarea");u.style.cssText="overflow:auto";var c=a.get("optionToContent"),f=a.get("contentToOption"),d=Tkt(e);if(At(c)){var g=c(n.getOption());yt(g)?u.innerHTML=g:gg(g)&&u.appendChild(g)}else{h.readOnly=a.get("readOnly");var p=h.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=a.get("textColor"),p.borderColor=a.get("textareaBorderColor"),p.backgroundColor=a.get("textareaColor"),h.value=d.value,u.appendChild(h)}var v=d.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",_=document.createElement("div"),x=document.createElement("div");y+=";background-color:"+a.get("buttonColor"),y+=";color:"+a.get("buttonTextColor");var w=this;function S(){i.removeChild(o),w._dom=null}MA(_,"click",S),MA(x,"click",function(){if(f==null&&c!=null||f!=null&&c==null){S();return}var T;try{At(f)?T=f(u,n.getOption()):T=Mkt(h.value,v)}catch(b){throw S(),new Error("Data view format error "+b)}T&&n.dispatchAction({type:"changeDataView",newOption:T}),S()}),_.innerHTML=l[1],x.innerHTML=l[2],x.style.cssText=_.style.cssText=y,!a.get("readOnly")&&m.appendChild(x),m.appendChild(_),o.appendChild(s),o.appendChild(u),o.appendChild(m),u.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},t.prototype.remove=function(e,n){this._dom&&n.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,n){this.remove(e,n)},t.getDefaultOption=function(e){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},t}(Ra);function Ikt(r,t){return nt(r,function(e,n){var i=t&&t[n];if(Rt(i)&&!rt(i)){var a=Rt(e)&&!rt(e);a||(e={value:e});var o=i.name!=null&&e.name==null;return e=It(e,i),o&&delete e.name,e}else return e})}_s({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,t){var e=[];I(r.newOption.series,function(n){var i=t.getSeriesByName(n.name)[0];if(!i)e.push(tt({type:"scatter"},n));else{var a=i.get("data");e.push({name:n.name,data:Ikt(n.data,a)})}}),t.mergeOption(It({series:e},r.newOption))});var Hj=I,$j=me();function Rkt(r,t){var e=LD(r);Hj(t,function(n,i){for(var a=e.length-1;a>=0;a--){var o=e[a];if(o[i])break}if(a<0){var s=r.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();e[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),e.push(t)}function Pkt(r){var t=LD(r),e=t[t.length-1];t.length>1&&t.pop();var n={};return Hj(e,function(i,a){for(var o=t.length-1;o>=0;o--)if(i=t[o][a],i){n[a]=i;break}}),n}function Lkt(r){$j(r).snapshots=null}function Dkt(r){return LD(r).length}function LD(r){var t=$j(r);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var Okt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,n){Lkt(e),n.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return n},t}(Ra);_s({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,t){t.resetOption("recreate")});var Nkt=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],DD=function(){function r(t,e,n){var i=this;this._targetInfoList=[];var a=Wz(e,t);I(Fkt,function(o,s){(!n||!n.include||te(n.include,s)>=0)&&o(a,i._targetInfoList)})}return r.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(n,i,a){if((n.coordRanges||(n.coordRanges=[])).push(i),!n.coordRange){n.coordRange=i;var o=HC[n.brushType](0,a,i);n.__rangeOffset={offset:Xz[n.brushType](o.values,n.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},r.prototype.matchOutputRanges=function(t,e,n){I(t,function(i){var a=this.findTargetInfo(i,e);a&&a!==!0&&I(a.coordSyses,function(o){var s=HC[i.brushType](1,o,i.range,!0);n(i,s.values,o,e)})},this)},r.prototype.setInputRanges=function(t,e){I(t,function(n){var i=this.findTargetInfo(n,e);if(n.range=n.range||[],i&&i!==!0){n.panelId=i.panelId;var a=HC[n.brushType](0,i.coordSys,n.coordRange),o=n.__rangeOffset;n.range=o?Xz[n.brushType](a.values,o.offset,kkt(a.xyMinMax,o.xyMinMax)):a.values}},this)},r.prototype.makePanelOpts=function(t,e){return nt(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:QZ(i),isTargetByCursor:ej(i,t,n.coordSysModel),getLinearBrushOtherExtent:tj(i)}})},r.prototype.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return i===!0||i&&te(i.coordSyses,e.coordinateSystem)>=0},r.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=Wz(e,t),a=0;a<n.length;a++){var o=n[a],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<Hz.length;l++)if(Hz[l](i,o))return o}return!0},r}();function KI(r){return r[0]>r[1]&&r.reverse(),r}function Wz(r,t){return Jv(r,t,{includeMainTypes:Nkt})}var Fkt={grid:function(r,t){var e=r.xAxisModels,n=r.yAxisModels,i=r.gridModels,a=wt(),o={},s={};!e&&!n&&!i||(I(e,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),I(n,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),I(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,h=[];I(u.getCartesians(),function(c,f){(te(e,c.getAxis("x").model)>=0||te(n,c.getAxis("y").model)>=0)&&h.push(c)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:h[0],coordSyses:h,getPanelRect:$z.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(r,t){I(r.geoModels,function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:$z.geo})})}},Hz=[function(r,t){var e=r.xAxisModel,n=r.yAxisModel,i=r.gridModel;return!i&&e&&(i=e.axis.grid.model),!i&&n&&(i=n.axis.grid.model),i&&i===t.gridModel},function(r,t){var e=r.geoModel;return e&&e===t.geoModel}],$z={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,t=r.getBoundingRect().clone();return t.applyTransform(Mc(r)),t}},HC={lineX:Wt(Yz,0),lineY:Wt(Yz,1),rect:function(r,t,e,n){var i=r?t.pointToData([e[0][0],e[1][0]],n):t.dataToPoint([e[0][0],e[1][0]],n),a=r?t.pointToData([e[0][1],e[1][1]],n):t.dataToPoint([e[0][1],e[1][1]],n),o=[KI([i[0],a[0]]),KI([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(r,t,e,n){var i=[[1/0,-1/0],[1/0,-1/0]],a=nt(e,function(o){var s=r?t.pointToData(o,n):t.dataToPoint(o,n);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function Yz(r,t,e,n){var i=e.getAxis(["x","y"][r]),a=KI(nt([0,1],function(s){return t?i.coordToData(i.toLocalCoord(n[s]),!0):i.toGlobalCoord(i.dataToCoord(n[s]))})),o=[];return o[r]=a,o[1-r]=[NaN,NaN],{values:a,xyMinMax:o}}var Xz={lineX:Wt(Zz,0),lineY:Wt(Zz,1),rect:function(r,t,e){return[[r[0][0]-e[0]*t[0][0],r[0][1]-e[0]*t[0][1]],[r[1][0]-e[1]*t[1][0],r[1][1]-e[1]*t[1][1]]]},polygon:function(r,t,e){return nt(r,function(n,i){return[n[0]-e[0]*t[i][0],n[1]-e[1]*t[i][1]]})}};function Zz(r,t,e,n){return[t[0]-n[r]*e[0],t[1]-n[r]*e[1]]}function kkt(r,t){var e=jz(r),n=jz(t),i=[e[0]/n[0],e[1]/n[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function jz(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}var qI=I,Gkt=XSt("toolbox-dataZoom_"),Bkt=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,n,i,a){this._brushController||(this._brushController=new lD(i.getZr()),this._brushController.on("brush",_t(this._onBrush,this)).mount()),Ukt(e,n,this,a,i),Vkt(e,n)},t.prototype.onclick=function(e,n,i){zkt[i].call(this)},t.prototype.remove=function(e,n){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,n){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var n=e.areas;if(!e.isEnd||!n.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new DD(OD(this.model),a,{include:["grid"]});o.matchOutputRanges(n,a,function(u,h,c){if(c.type==="cartesian2d"){var f=u.brushType;f==="rect"?(s("x",c,h[0]),s("y",c,h[1])):s({lineX:"x",lineY:"y"}[f],c,h)}}),Rkt(a,i),this._dispatchZoomAction(i);function s(u,h,c){var f=h.getAxis(u),d=f.model,g=l(u,d,a),p=g.findRepresentativeAxisProxy(d).getMinMaxSpan();(p.minValueSpan!=null||p.maxValueSpan!=null)&&(c=uf(0,c.slice(),f.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),g&&(i[g.id]={dataZoomId:g.id,startValue:c[0],endValue:c[1]})}function l(u,h,c){var f;return c.eachComponent({mainType:"dataZoom",subType:"select"},function(d){var g=d.getAxisModel(u,h.componentIndex);g&&(f=d)}),f}},t.prototype._dispatchZoomAction=function(e){var n=[];qI(e,function(i,a){n.push(Pt(i))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},t.getDefaultOption=function(e){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},t}(Ra),zkt={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(Pkt(this.ecModel))}};function OD(r){var t={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function Vkt(r,t){r.setIconStatus("back",Dkt(t)>1?"emphasis":"normal")}function Ukt(r,t,e,n,i){var a=e._isZoomActive;n&&n.type==="takeGlobalCursor"&&(a=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),e._isZoomActive=a,r.setIconStatus("zoom",a?"emphasis":"normal");var o=new DD(OD(r),t,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}ybt("dataZoom",function(r){var t=r.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var n=t.getModel(e),i=[],a=OD(n),o=Jv(r,a);qI(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),qI(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,h){var c=l.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:Gkt+u+c};f[h]=c,i.push(f)}return i});function Wkt(r){r.registerComponentModel(dkt),r.registerComponentView(pkt),sd("saveAsImage",mkt),sd("magicType",_kt),sd("dataView",Akt),sd("dataZoom",Bkt),sd("restore",Okt),ne(fkt)}var Hkt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(ue);function Yj(r){var t=r.get("confine");return t!=null?!!t:r.get("renderMode")==="richText"}function Xj(r){if(le.domSupported){for(var t=document.documentElement.style,e=0,n=r.length;e<n;e++)if(r[e]in t)return r[e]}}var Zj=Xj(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$kt=Xj(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function jj(r,t){if(!r)return t;t=M$(t,!0);var e=r.indexOf(t);return r=e===-1?t:"-"+r.slice(0,e)+"-"+t,r.toLowerCase()}function Ykt(r,t){var e=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return e?e[t]:null}var Xkt=jj($kt,"transition"),ND=jj(Zj,"transform"),Zkt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(le.transform3dSupported?"will-change:transform;":"");function jkt(r){return r=r==="left"?"right":r==="right"?"left":r==="top"?"bottom":"top",r}function Kkt(r,t,e){if(!yt(e)||e==="inside")return"";var n=r.get("backgroundColor"),i=r.get("borderWidth");t=Hc(t);var a=jkt(e),o=Math.max(Math.round(i)*1.5,6),s="",l=ND+":",u;te(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=o+i,f=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),d=Math.round(((f-Math.SQRT2*i)/2+Math.SQRT2*i-(f-c)/2)*100)/100;s+=";"+a+":-"+d+"px";var g=t+" solid "+i+"px;",p=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+n+";"];return'<div style="'+p.join("")+'"></div>'}function qkt(r,t){var e="cubic-bezier(0.23,1,0.32,1)",n=" "+r/2+"s "+e,i="opacity"+n+",visibility"+n;return t||(n=" "+r+"s "+e,i+=le.transformSupported?","+ND+n:",left"+n+",top"+n),Xkt+":"+i}function Kz(r,t,e){var n=r.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!le.transformSupported)return e?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var a=le.transform3dSupported,o="translate"+(a?"3d":"")+"("+n+","+i+(a?",0":"")+")";return e?"top:0;left:0;"+ND+":"+o+";":[["top",0],["left",0],[Zj,o]]}function Jkt(r){var t=[],e=r.get("fontSize"),n=r.getTextColor();n&&t.push("color:"+n),t.push("font:"+r.getFont()),e&&t.push("line-height:"+Math.round(e*3/2)+"px");var i=r.get("textShadowColor"),a=r.get("textShadowBlur")||0,o=r.get("textShadowOffsetX")||0,s=r.get("textShadowOffsetY")||0;return i&&a&&t.push("text-shadow:"+o+"px "+s+"px "+a+"px "+i),I(["decoration","align"],function(l){var u=r.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function Qkt(r,t,e){var n=[],i=r.get("transitionDuration"),a=r.get("backgroundColor"),o=r.get("shadowBlur"),s=r.get("shadowColor"),l=r.get("shadowOffsetX"),u=r.get("shadowOffsetY"),h=r.getModel("textStyle"),c=sY(r,"html"),f=l+"px "+u+"px "+o+"px "+s;return n.push("box-shadow:"+f),t&&i&&n.push(qkt(i,e)),a&&n.push("background-color:"+a),I(["width","color","radius"],function(d){var g="border-"+d,p=M$(g),v=r.get(p);v!=null&&n.push(g+":"+v+(d==="color"?"":"px"))}),n.push(Jkt(h)),c!=null&&n.push("padding:"+tp(c).join("px ")+"px"),n.join(";")+";"}function qz(r,t,e,n,i){var a=t&&t.painter;if(e){var o=a&&a.getViewportRoot();o&&Ext(r,o,e,n,i)}else{r[0]=n,r[1]=i;var s=a&&a.getViewportRootOffset();s&&(r[0]+=s.offsetLeft,r[1]+=s.offsetTop)}r[2]=r[0]/t.getWidth(),r[3]=r[1]/t.getHeight()}var t3t=function(){function r(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,le.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var i=this._zr=t.getZr(),a=e.appendTo,o=a&&(yt(a)?document.querySelector(a):gg(a)?a:At(a)&&a(t.getDom()));qz(this._styleCoord,i,o,t.getWidth()/2,t.getHeight()/2),(o||t.getDom()).appendChild(n),this._api=t,this._container=o;var s=this;n.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},n.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=i.handler,h=i.painter.getViewportRoot();Ea(h,l,!0),u.dispatch("mousemove",l)}},n.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return r.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),n=Ykt(e,"position"),i=e.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative")}var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=t.get("className")||""},r.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,a=this._styleCoord;n.innerHTML?i.cssText=Zkt+Qkt(t,!this._firstShow,this._longHide)+Kz(a[0],a[1],!0)+("border-color:"+Hc(e)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(t,e,n,i,a){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(yt(a)&&n.get("trigger")==="item"&&!Yj(n)&&(s=Kkt(n,i,a)),yt(t))o.innerHTML=t+s;else if(t){o.innerHTML="",rt(t)||(t=[t]);for(var l=0;l<t.length;l++)gg(t[l])&&t[l].parentNode!==o&&o.appendChild(t[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},r.prototype.setEnterable=function(t){this._enterable=t},r.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},r.prototype.moveTo=function(t,e){var n=this._styleCoord;if(qz(n,this._zr,this._container,t,e),n[0]!=null&&n[1]!=null){var i=this.el.style,a=Kz(n[0],n[1]);I(a,function(o){i[o[0]]=o[1]})}},r.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},r.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",le.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},r.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(_t(this.hide,this),t)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},r}(),e3t=function(){function r(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),Qz(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return r.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(t,e,n,i,a){var o=this;Rt(t)&&Pe(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new xe({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:sY(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),I(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=n.get(u)}),I(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},r.prototype.setEnterable=function(t){this._enterable=t},r.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=Jz(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},r.prototype.moveTo=function(t,e){var n=this.el;if(n){var i=this._styleCoord;Qz(i,this._zr,t,e),t=i[0],e=i[1];var a=n.style,o=Hl(a.borderWidth||0),s=Jz(a);n.x=t+o+s.left,n.y=e+o+s.top,n.markRedraw()}},r.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(_t(this.hide,this),t)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r}();function Hl(r){return Math.max(0,r)}function Jz(r){var t=Hl(r.shadowBlur||0),e=Hl(r.shadowOffsetX||0),n=Hl(r.shadowOffsetY||0);return{left:Hl(t-e),right:Hl(t+e),top:Hl(t-n),bottom:Hl(t+n)}}function Qz(r,t,e,n){r[0]=e,r[1]=n,r[2]=r[0]/t.getWidth(),r[3]=r[1]/t.getHeight()}var r3t=new ve({shape:{x:-1,y:-1,width:2,height:2}}),n3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,n){if(!(le.node||!n.getDom())){var i=e.getComponent("tooltip"),a=this._renderMode=twt(i.get("renderMode"));this._tooltipContent=a==="richText"?new e3t(n):new t3t(n,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},t.prototype.render=function(e,n,i){if(!(le.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=n,this._api=i;var a=this._tooltipContent;a.update(e),a.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?ip(this,"_updatePosition",50,"fixRate"):ey(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel,n=e.get("triggerOn");Dj("itemTooltip",this._api,_t(function(i,a,o){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,n=this._ecModel,i=this._api,a=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(e,n,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,n,i,a){if(!(a.from===this.uid||le.node||!i.getDom())){var o=tV(a,i);this._ticket="";var s=a.dataByCoordSys,l=s3t(a,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var h=r3t;h.x=a.x,h.y=a.y,h.update(),Ft(h).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:h},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(e,n,i,a))return;var c=Oj(a,n),f=c.point[0],d=c.point[1];f!=null&&d!=null&&this._tryShow({offsetX:f,offsetY:d,target:c.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},t.prototype.manuallyHideTip=function(e,n,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(tV(a,i))},t.prototype._manuallyAxisShowTip=function(e,n,i,a){var o=a.seriesIndex,s=a.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=n.getSeriesByIndex(o);if(u){var h=u.getData(),c=Kp([h.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},t.prototype._tryShow=function(e,n){var i=e.target,a=this._tooltipModel;if(a){this._lastX=e.offsetX,this._lastY=e.offsetY;var o=e.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,e);else if(i){var s=Ft(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;dc(i,function(h){if(Ft(h).dataIndex!=null)return l=h,!0;if(Ft(h).tooltipConfig!=null)return u=h,!0},!0),l?this._showSeriesItemTooltip(e,l,n):u?this._showComponentItemTooltip(e,u,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(e,n){var i=e.get("showDelay");n=_t(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(e,n){var i=this._ecModel,a=this._tooltipModel,o=[n.offsetX,n.offsetY],s=Kp([n.tooltipOption],a),l=this._renderMode,u=[],h=cn("section",{blocks:[],noHeader:!0}),c=[],f=new IE;I(e,function(y){I(y.dataByAxis,function(_){var x=i.getComponent(_.axisDim+"Axis",_.axisIndex),w=_.value;if(!(!x||w==null)){var S=Rj(w,x.axis,i,_.seriesDataIndices,_.valueLabelOpt),T=cn("section",{header:S,noHeader:!so(S),sortBlocks:!0,blocks:[]});h.blocks.push(T),I(_.seriesDataIndices,function(b){var E=i.getSeriesByIndex(b.seriesIndex),C=b.dataIndexInside,M=E.getDataParams(C);if(!(M.dataIndex<0)){M.axisDim=_.axisDim,M.axisIndex=_.axisIndex,M.axisType=_.axisType,M.axisId=_.axisId,M.axisValue=FL(x.axis,{value:w}),M.axisValueLabel=S,M.marker=f.makeTooltipMarker("item",Hc(M.color),l);var A=z5(E.formatTooltip(C,!0,null)),R=A.frag;if(R){var P=Kp([E],a).get("valueFormatter");T.blocks.push(P?tt({valueFormatter:P},R):R)}A.text&&c.push(A.text),u.push(M)}})}})}),h.blocks.reverse(),c.reverse();var d=n.position,g=s.get("order"),p=Y5(h,f,l,g,i.get("useUTC"),s.get("textStyle"));p&&c.unshift(p);var v=l==="richText"?`

`:"<br/>",m=c.join(v);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(e,u)?this._updatePosition(s,d,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",o[0],o[1],d,null,f)})},t.prototype._showSeriesItemTooltip=function(e,n,i){var a=this._ecModel,o=Ft(n),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,h=o.dataIndex,c=o.dataType,f=u.getData(c),d=this._renderMode,g=e.positionDefault,p=Kp([f.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),v=p.get("trigger");if(!(v!=null&&v!=="item")){var m=u.getDataParams(h,c),y=new IE;m.marker=y.makeTooltipMarker("item",Hc(m.color),d);var _=z5(u.formatTooltip(h,!1,c)),x=p.get("order"),w=p.get("valueFormatter"),S=_.frag,T=S?Y5(w?tt({valueFormatter:w},S):S,y,d,x,a.get("useUTC"),p.get("textStyle")):_.text,b="item_"+u.name+"_"+h;this._showOrMove(p,function(){this._showTooltipContent(p,T,m,b,e.offsetX,e.offsetY,e.position,e.target,y)}),i({type:"showTip",dataIndexInside:h,dataIndex:f.getRawIndex(h),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,n,i){var a=this._renderMode==="html",o=Ft(n),s=o.tooltipConfig,l=s.option||{},u=l.encodeHTMLContent;if(yt(l)){var h=l;l={content:h,formatter:h},u=!0}u&&a&&l.content&&(l=Pt(l),l.content=Di(l.content));var c=[l],f=this._ecModel.getComponent(o.componentMainType,o.componentIndex);f&&c.push(f),c.push({formatter:l.content});var d=e.positionDefault,g=Kp(c,this._tooltipModel,d?{position:d}:null),p=g.get("content"),v=Math.random()+"",m=new IE;this._showOrMove(g,function(){var y=Pt(g.get("formatterParams")||{});this._showTooltipContent(g,p,y,v,e.offsetX,e.offsetY,e.position,n,m)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,n,i,a,o,s,l,u,h){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var c=this._tooltipContent;c.setEnterable(e.get("enterable"));var f=e.get("formatter");l=l||e.get("position");var d=n,g=this._getNearestPoint([o,s],i,e.get("trigger"),e.get("borderColor")),p=g.color;if(f)if(yt(f)){var v=e.ecModel.get("useUTC"),m=rt(i)?i[0]:i,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=f,y&&(d=Yw(m.axisValue,d,v)),d=A$(d,i,!0)}else if(At(f)){var _=_t(function(x,w){x===this._ticket&&(c.setContent(w,h,e,p,l),this._updatePosition(e,l,o,s,c,i,u))},this);this._ticket=a,d=f(i,a,_)}else d=f;c.setContent(d,h,e,p,l),c.show(e,p),this._updatePosition(e,l,o,s,c,i,u)}},t.prototype._getNearestPoint=function(e,n,i,a){if(i==="axis"||rt(n))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!rt(n))return{color:a||n.color||n.borderColor}},t.prototype._updatePosition=function(e,n,i,a,o,s,l){var u=this._api.getWidth(),h=this._api.getHeight();n=n||e.get("position");var c=o.getSize(),f=e.get("align"),d=e.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),At(n)&&(n=n([i,a],s,o.el,g,{viewSize:[u,h],contentSize:c.slice()})),rt(n))i=ft(n[0],u),a=ft(n[1],h);else if(Rt(n)){var p=n;p.width=c[0],p.height=c[1];var v=qr(p,{width:u,height:h});i=v.x,a=v.y,f=null,d=null}else if(yt(n)&&l){var m=o3t(n,g,c,e.get("borderWidth"));i=m[0],a=m[1]}else{var m=i3t(i,a,o,u,h,f?null:20,d?null:20);i=m[0],a=m[1]}if(f&&(i-=eV(f)?c[0]/2:f==="right"?c[0]:0),d&&(a-=eV(d)?c[1]/2:d==="bottom"?c[1]:0),Yj(e)){var m=a3t(i,a,o,u,h);i=m[0],a=m[1]}o.moveTo(i,a)},t.prototype._updateContentNotChangedOnAxis=function(e,n){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===e.length;return o&&I(i,function(s,l){var u=s.dataByAxis||[],h=e[l]||{},c=h.dataByAxis||[];o=o&&u.length===c.length,o&&I(u,function(f,d){var g=c[d]||{},p=f.seriesDataIndices||[],v=g.seriesDataIndices||[];o=o&&f.value===g.value&&f.axisType===g.axisType&&f.axisId===g.axisId&&p.length===v.length,o&&I(p,function(m,y){var _=v[y];o=o&&m.seriesIndex===_.seriesIndex&&m.dataIndex===_.dataIndex}),a&&I(f.seriesDataIndices,function(m){var y=m.seriesIndex,_=n[y],x=a[y];_&&x&&x.data!==_.data&&(o=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=n,!!o},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,n){le.node||!n.getDom()||(ey(this,"_updatePosition"),this._tooltipContent.dispose(),YI("itemTooltip",n))},t.type="tooltip",t}(yr);function Kp(r,t,e){var n=t.ecModel,i;e?(i=new Oe(e,n,n),i=new Oe(t.option,i,n)):i=t;for(var a=r.length-1;a>=0;a--){var o=r[a];o&&(o instanceof Oe&&(o=o.get("tooltip",!0)),yt(o)&&(o={formatter:o}),o&&(i=new Oe(o,i,n)))}return i}function tV(r,t){return r.dispatchAction||_t(t.dispatchAction,t)}function i3t(r,t,e,n,i,a,o){var s=e.getSize(),l=s[0],u=s[1];return a!=null&&(r+l+a+2>n?r-=l+a:r+=a),o!=null&&(t+u+o>i?t-=u+o:t+=o),[r,t]}function a3t(r,t,e,n,i){var a=e.getSize(),o=a[0],s=a[1];return r=Math.min(r+o,n)-o,t=Math.min(t+s,i)-s,r=Math.max(r,0),t=Math.max(t,0),[r,t]}function o3t(r,t,e,n){var i=e[0],a=e[1],o=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=t.width,h=t.height;switch(r){case"inside":s=t.x+u/2-i/2,l=t.y+h/2-a/2;break;case"top":s=t.x+u/2-i/2,l=t.y-a-o;break;case"bottom":s=t.x+u/2-i/2,l=t.y+h+o;break;case"left":s=t.x-i-o,l=t.y+h/2-a/2;break;case"right":s=t.x+u+o,l=t.y+h/2-a/2}return[s,l]}function eV(r){return r==="center"||r==="middle"}function s3t(r,t,e){var n=KP(r).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var a=Yy(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=e.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var h=Ft(u).tooltipConfig;if(h&&h.name===r.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function l3t(r){ne(c0),r.registerComponentModel(Hkt),r.registerComponentView(n3t),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Lr),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Lr)}var u3t=["rect","polygon","keep","clear"];function h3t(r,t){var e=Ye(r?r.brush:[]);if(e.length){var n=[];I(e,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(n=n.concat(u))});var i=r&&r.toolbox;rt(i)&&(i=i[0]),i||(i={feature:{}},r.toolbox=[i]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,n),c3t(s),t&&!s.length&&s.push.apply(s,u3t)}}function c3t(r){var t={};I(r,function(e){t[e]=1}),r.length=0,I(t,function(e,n){r.push(n)})}var rV=I;function nV(r){if(r){for(var t in r)if(r.hasOwnProperty(t))return!0}}function JI(r,t,e){var n={};return rV(t,function(a){var o=n[a]=i();rV(r[a],function(s,l){if(un.isValidType(l)){var u={type:l,visual:s};e&&e(u,a),o[l]=new un(u),l==="opacity"&&(u=Pt(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new un(u))}})}),n;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function Kj(r,t,e){var n;I(e,function(i){t.hasOwnProperty(i)&&nV(t[i])&&(n=!0)}),n&&I(e,function(i){t.hasOwnProperty(i)&&nV(t[i])?r[i]=Pt(t[i]):delete r[i]})}function f3t(r,t,e,n,i,a){var o={};I(r,function(c){var f=un.prepareVisualTypes(t[c]);o[c]=f});var s;function l(c){return EL(e,s,c)}function u(c,f){mY(e,s,c,f)}e.each(h);function h(c,f){s=c;var d=e.getRawDataItem(s);if(!(d&&d.visualMap===!1))for(var g=n.call(i,c),p=t[g],v=o[g],m=0,y=v.length;m<y;m++){var _=v[m];p[_]&&p[_].applyVisual(c,l,u)}}}function d3t(r,t,e,n){var i={};return I(r,function(a){var o=un.prepareVisualTypes(t[a]);i[a]=o}),{progress:function(o,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(w){return EL(s,c,w)}function h(w,S){mY(s,c,w,S)}for(var c,f=s.getStore();(c=o.next())!=null;){var d=s.getRawDataItem(c);if(!(d&&d.visualMap===!1))for(var g=n!=null?f.get(l,c):c,p=e(g),v=t[p],m=i[p],y=0,_=m.length;y<_;y++){var x=m[y];v[x]&&v[x].applyVisual(g,u,h)}}}}}function g3t(r){var t=r.brushType,e={point:function(n){return iV[t].point(n,e,r)},rect:function(n){return iV[t].rect(n,e,r)}};return e}var iV={lineX:aV(0),lineY:aV(1),rect:{point:function(r,t,e){return r&&e.boundingRect.contain(r[0],r[1])},rect:function(r,t,e){return r&&e.boundingRect.intersect(r)}},polygon:{point:function(r,t,e){return r&&e.boundingRect.contain(r[0],r[1])&&ec(e.range,r[0],r[1])},rect:function(r,t,e){var n=e.range;if(!r||n.length<=1)return!1;var i=r.x,a=r.y,o=r.width,s=r.height,l=n[0];if(ec(n,i,a)||ec(n,i+o,a)||ec(n,i,a+s)||ec(n,i+o,a+s)||jt.create(r).contain(l[0],l[1])||mv(i,a,i+o,a,n)||mv(i,a,i,a+s,n)||mv(i+o,a,i+o,a+s,n)||mv(i,a+s,i+o,a+s,n))return!0}}};function aV(r){var t=["x","y"],e=["width","height"];return{point:function(n,i,a){if(n){var o=a.range,s=n[r];return qp(s,o)}},rect:function(n,i,a){if(n){var o=a.range,s=[n[t[r]],n[t[r]]+n[e[r]]];return s[1]<s[0]&&s.reverse(),qp(s[0],o)||qp(s[1],o)||qp(o[0],s)||qp(o[1],s)}}}}function qp(r,t){return t[0]<=r&&r<=t[1]}var oV=["inBrush","outOfBrush"],$C="__ecBrushSelect",QI="__ecInBrushSelectEvent";function qj(r){r.eachComponent({mainType:"brush"},function(t){var e=t.brushTargetManager=new DD(t.option,r);e.setInputRanges(t.areas,r)})}function p3t(r,t,e){var n=[],i,a;r.eachComponent({mainType:"brush"},function(o){e&&e.type==="takeGlobalCursor"&&o.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),qj(r),r.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Pt(o.areas),selected:[]};n.push(l);var u=o.option,h=u.brushLink,c=[],f=[],d=[],g=!1;s||(i=u.throttleType,a=u.throttleDelay);var p=nt(o.areas,function(w){var S=_3t[w.brushType],T=It({boundingRect:S?S(w):void 0},w);return T.selectors=g3t(T),T}),v=JI(o.option,oV,function(w){w.mappingMethod="fixed"});rt(h)&&I(h,function(w){c[w]=1});function m(w){return h==="all"||!!c[w]}function y(w){return!!w.length}r.eachSeries(function(w,S){var T=d[S]=[];w.subType==="parallel"?_(w,S):x(w,S,T)});function _(w,S){var T=w.coordinateSystem;g=g||T.hasAxisBrushed(),m(S)&&T.eachActiveState(w.getData(),function(b,E){b==="active"&&(f[E]=1)})}function x(w,S,T){if(!(!w.brushSelector||y3t(o,S))&&(I(p,function(E){o.brushTargetManager.controlSeries(E,w,r)&&T.push(E),g=g||y(T)}),m(S)&&y(T))){var b=w.getData();b.each(function(E){sV(w,T,b,E)&&(f[E]=1)})}}r.eachSeries(function(w,S){var T={seriesId:w.id,seriesIndex:S,seriesName:w.name,dataIndex:[]};l.selected.push(T);var b=d[S],E=w.getData(),C=m(S)?function(M){return f[M]?(T.dataIndex.push(E.getRawIndex(M)),"inBrush"):"outOfBrush"}:function(M){return sV(w,b,E,M)?(T.dataIndex.push(E.getRawIndex(M)),"inBrush"):"outOfBrush"};(m(S)?g:y(b))&&f3t(oV,v,E,C)})}),v3t(t,i,a,n,e)}function v3t(r,t,e,n,i){if(i){var a=r.getZr();if(!a[QI]){a[$C]||(a[$C]=m3t);var o=ip(a,$C,e,t);o(r,n)}}}function m3t(r,t){if(!r.isDisposed()){var e=r.getZr();e[QI]=!0,r.dispatchAction({type:"brushSelect",batch:t}),e[QI]=!1}}function sV(r,t,e,n){for(var i=0,a=t.length;i<a;i++){var o=t[i];if(r.brushSelector(n,e,o.selectors,o))return!0}}function y3t(r,t){var e=r.option.seriesIndex;return e!=null&&e!=="all"&&(rt(e)?te(e,t)<0:t!==e)}var _3t={rect:function(r){return lV(r.range)},polygon:function(r){for(var t,e=r.range,n=0,i=e.length;n<i;n++){t=t||[[1/0,-1/0],[1/0,-1/0]];var a=e[n];a[0]<t[0][0]&&(t[0][0]=a[0]),a[0]>t[0][1]&&(t[0][1]=a[0]),a[1]<t[1][0]&&(t[1][0]=a[1]),a[1]>t[1][1]&&(t[1][1]=a[1])}return t&&lV(t)}};function lV(r){return new jt(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var x3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,n){this.ecModel=e,this.api=n,this.model,(this._brushController=new lD(n.getZr())).on("brush",_t(this._onBrush,this)).mount()},t.prototype.render=function(e,n,i,a){this.model=e,this._updateController(e,n,i,a)},t.prototype.updateTransform=function(e,n,i,a){qj(n),this._updateController(e,n,i,a)},t.prototype.updateVisual=function(e,n,i,a){this.updateTransform(e,n,i,a)},t.prototype.updateView=function(e,n,i,a){this._updateController(e,n,i,a)},t.prototype._updateController=function(e,n,i,a){(!a||a.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(i)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var n=this.model.id,i=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:Pt(i),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:Pt(i),$from:n})},t.type="brush",t}(yr),S3t="#ddd",w3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.areas=[],e.brushOption={},e}return t.prototype.optionUpdated=function(e,n){var i=this.option;!n&&Kj(i,e,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:S3t},a.hasOwnProperty("liftZ")||(a.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=nt(e,function(n){return uV(this.option,n)},this))},t.prototype.setBrushOption=function(e){this.brushOption=uV(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(ue);function uV(r,t){return Zt({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new Oe(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},t,!0)}var T3t=["rect","polygon","lineX","lineY","keep","clear"],b3t=function(r){U(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,n,i){var a,o,s;n.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,I(e.get("type",!0),function(l){e.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},t.prototype.updateView=function(e,n,i){this.render(e,n,i)},t.prototype.getIcons=function(){var e=this.model,n=e.get("icon",!0),i={};return I(e.get("type",!0),function(a){n[a]&&(i[a]=n[a])}),i},t.prototype.onclick=function(e,n,i){var a=this._brushType,o=this._brushMode;i==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?o==="multiple"?"single":"multiple":o}})},t.getDefaultOption=function(e){var n={show:!0,type:T3t.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])};return n},t}(Ra);function E3t(r){r.registerComponentView(x3t),r.registerComponentModel(w3t),r.registerPreprocessor(h3t),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,p3t),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(n){n.setAreas(t.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Lr),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Lr),sd("brush",b3t)}var C3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(ue),M3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,n,i){if(this.group.removeAll(),!!e.get("show")){var a=this.group,o=e.getModel("textStyle"),s=e.getModel("subtextStyle"),l=e.get("textAlign"),u=Vt(e.get("textBaseline"),e.get("textVerticalAlign")),h=new xe({style:sr(o,{text:e.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),f=e.get("subtext"),d=new xe({style:sr(s,{text:f,fill:s.getTextColor(),y:c.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=e.get("link"),p=e.get("sublink"),v=e.get("triggerEvent",!0);h.silent=!g&&!v,d.silent=!p&&!v,g&&h.on("click",function(){Qx(g,"_"+e.get("target"))}),p&&d.on("click",function(){Qx(p,"_"+e.get("subtarget"))}),Ft(h).eventData=Ft(d).eventData=v?{componentType:"title",componentIndex:e.componentIndex}:null,a.add(h),f&&a.add(d);var m=a.getBoundingRect(),y=e.getBoxLayoutParams();y.width=m.width,y.height=m.height;var _=qr(y,{width:i.getWidth(),height:i.getHeight()},e.get("padding"));l||(l=e.get("left")||e.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=e.get("top")||e.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),a.x=_.x,a.y=_.y,a.markRedraw();var x={align:l,verticalAlign:u};h.setStyle(x),d.setStyle(x),m=a.getBoundingRect();var w=_.margin,S=e.getItemStyle(["color","opacity"]);S.fill=e.get("backgroundColor");var T=new ve({shape:{x:m.x-w[3],y:m.y-w[0],width:m.width+w[1]+w[3],height:m.height+w[0]+w[2],r:e.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});a.add(T)}},t.type="title",t}(yr);function A3t(r){r.registerComponentModel(C3t),r.registerComponentView(M3t)}var hV=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return t.prototype.init=function(e,n,i){this.mergeDefaultAndTheme(e,i),this._initData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var n=this._data.count();this.option.loop?e=(e%n+n)%n:(e>=n&&(e=n-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e=this.option,n=e.data||[],i=e.axisType,a=this._names=[],o;i==="category"?(o=[],I(n,function(u,h){var c=Zr(Zg(u),""),f;Rt(u)?(f=Pt(u),f.value=h):f=h,o.push(f),a.push(c)})):o=n;var s={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new vi([{name:"value",type:s}],this);l.initData(o,a)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(ue),Jj=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline.slider",t.defaultOption=th(hV.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(hV);Hr(Jj,Qw.prototype);var I3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline",t}(yr),R3t=function(r){U(t,r);function t(e,n,i,a){var o=r.call(this,e,n,i)||this;return o.type=a||"value",o}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(wo),YC=Math.PI,cV=me(),P3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,n){this.api=n},t.prototype.render=function(e,n,i){if(this.model=e,this.api=i,this.ecModel=n,this.group.removeAll(),e.get("show",!0)){var a=this._layout(e,i),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,e);e.formatTooltip=function(u){var h=l.scale.getLabel({value:u});return cn("nameValue",{noName:!0,value:h})},I(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,o,l,e)},this),this._renderAxisLabel(a,s,l,e),this._position(a,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,n){var i=e.get(["label","position"]),a=e.get("orient"),o=D3t(e,n),s;i==null||i==="auto"?s=a==="horizontal"?o.y+o.height/2<n.getHeight()/2?"-":"+":o.x+o.width/2<n.getWidth()/2?"+":"-":yt(i)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:s=i;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},h={horizontal:0,vertical:YC/2},c=a==="vertical"?o.height:o.width,f=e.getModel("controlStyle"),d=f.get("show",!0),g=d?f.get("itemSize"):0,p=d?f.get("itemGap"):0,v=g+p,m=e.get(["label","rotate"])||0;m=m*YC/180;var y,_,x,w=f.get("position",!0),S=d&&f.get("showPlayBtn",!0),T=d&&f.get("showPrevBtn",!0),b=d&&f.get("showNextBtn",!0),E=0,C=c;w==="left"||w==="bottom"?(S&&(y=[0,0],E+=v),T&&(_=[E,0],E+=v),b&&(x=[C-g,0],C-=v)):(S&&(y=[C-g,0],C-=v),T&&(_=[0,0],E+=v),b&&(x=[C-g,0],C-=v));var M=[E,C];return e.get("inverse")&&M.reverse(),{viewRect:o,mainLength:c,orient:a,rotation:h[a],labelRotation:m,labelPosOpt:s,labelAlign:e.get(["label","align"])||l[a],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||u[a],playPosition:y,prevBtnPosition:_,nextBtnPosition:x,axisExtent:M,controlSize:g,controlGap:p}},t.prototype._position=function(e,n){var i=this._mainGroup,a=this._labelGroup,o=e.viewRect;if(e.orient==="vertical"){var s=oa(),l=o.x,u=o.y+o.height;fs(s,s,[-l,-u]),rf(s,s,-YC/2),fs(s,s,[l,u]),o=o.clone(),o.applyTransform(s)}var h=y(o),c=y(i.getBoundingRect()),f=y(a.getBoundingRect()),d=[i.x,i.y],g=[a.x,a.y];g[0]=d[0]=h[0][0];var p=e.labelPosOpt;if(p==null||yt(p)){var v=p==="+"?0:1;_(d,c,h,1,v),_(g,f,h,1,1-v)}else{var v=p>=0?0:1;_(d,c,h,1,v),g[1]=d[1]+p}i.setPosition(d),a.setPosition(g),i.rotation=a.rotation=e.rotation,m(i),m(a);function m(x){x.originX=h[0][0]-x.x,x.originY=h[1][0]-x.y}function y(x){return[[x.x,x.x+x.width],[x.y,x.y+x.height]]}function _(x,w,S,T,b){x[T]+=S[T][b]-w[T][b]}},t.prototype._createAxis=function(e,n){var i=n.getData(),a=n.get("axisType"),o=L3t(n,a);o.getTicks=function(){return i.mapArray(["value"],function(u){return{value:u}})};var s=i.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new R3t("value",o,e.axisExtent,a);return l.model=n,l},t.prototype._createGroup=function(e){var n=this[e]=new Dt;return this.group.add(n),n},t.prototype._renderAxisLine=function(e,n,i,a){var o=i.getExtent();if(a.get(["lineStyle","show"])){var s=new sn({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:tt({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(s);var l=this._progressLine=new sn({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:It({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},t.prototype._renderAxisTick=function(e,n,i,a){var o=this,s=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],I(l,function(u){var h=i.dataToCoord(u.value),c=s.getItemModel(u.value),f=c.getModel("itemStyle"),d=c.getModel(["emphasis","itemStyle"]),g=c.getModel(["progress","itemStyle"]),p={x:h,y:0,onclick:_t(o._changeTimeline,o,u.value)},v=fV(c,f,n,p);v.ensureState("emphasis").style=d.getItemStyle(),v.ensureState("progress").style=g.getItemStyle(),Cc(v);var m=Ft(v);c.get("tooltip")?(m.dataIndex=u.value,m.dataModel=a):m.dataIndex=m.dataModel=null,o._tickSymbols.push(v)})},t.prototype._renderAxisLabel=function(e,n,i,a){var o=this,s=i.getLabelModel();if(s.get("show")){var l=a.getData(),u=i.getViewLabels();this._tickLabels=[],I(u,function(h){var c=h.tickValue,f=l.getItemModel(c),d=f.getModel("label"),g=f.getModel(["emphasis","label"]),p=f.getModel(["progress","label"]),v=i.dataToCoord(h.tickValue),m=new xe({x:v,y:0,rotation:e.labelRotation-e.rotation,onclick:_t(o._changeTimeline,o,c),silent:!1,style:sr(d,{text:h.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});m.ensureState("emphasis").style=sr(g),m.ensureState("progress").style=sr(p),n.add(m),Cc(m),cV(m).dataIndex=c,o._tickLabels.push(m)})}},t.prototype._renderControl=function(e,n,i,a){var o=e.controlSize,s=e.rotation,l=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),h=a.getPlayState(),c=a.get("inverse",!0);f(e.nextBtnPosition,"next",_t(this._changeTimeline,this,c?"-":"+")),f(e.prevBtnPosition,"prev",_t(this._changeTimeline,this,c?"+":"-")),f(e.playPosition,h?"stop":"play",_t(this._handlePlayClick,this,!h),!0);function f(d,g,p,v){if(d){var m=_o(Vt(a.get(["controlStyle",g+"BtnSize"]),o),o),y=[0,-m/2,m,m],_=O3t(a,g+"Icon",y,{x:d[0],y:d[1],originX:o/2,originY:0,rotation:v?-s:0,rectHover:!0,style:l,onclick:p});_.ensureState("emphasis").style=u,n.add(_),Cc(_)}}},t.prototype._renderCurrentPointer=function(e,n,i,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),u=this,h={onCreate:function(c){c.draggable=!0,c.drift=_t(u._handlePointerDrag,u),c.ondragend=_t(u._handlePointerDragend,u),dV(c,u._progressLine,s,i,a,!0)},onUpdate:function(c){dV(c,u._progressLine,s,i,a)}};this._currentPointer=fV(l,l,this._mainGroup,{},this._currentPointer,h)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,n,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,n){var i=this._toAxisCoord(e)[0],a=this._axis,o=Ga(a.getExtent().slice());i>o[1]&&(i=o[1]),i<o[0]&&(i=o[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),u=this.model;(n||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=e.model;e._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){var n=this._mainGroup.getLocalTransform();return fo(e,n,!0)},t.prototype._findNearestTick=function(e){var n=this.model.getData(),i=1/0,a,o=this._axis;return n.each(["value"],function(s,l){var u=o.dataToCoord(s),h=Math.abs(u-e);h<i&&(i=h,a=l)}),a},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var n=this.model.getCurrentIndex();e==="+"?e=n+1:e==="-"&&(e=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),n=this._tickSymbols,i=this._tickLabels;if(n)for(var a=0;a<n.length;a++)n&&n[a]&&n[a].toggleState("progress",a<e);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",cV(i[a]).dataIndex<=e)},t.type="timeline.slider",t}(I3t);function L3t(r,t){if(t=t||r.get("type"),t)switch(t){case"category":return new aT({ordinalMeta:r.getCategories(),extent:[1/0,-1/0]});case"time":return new OL({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new fl}}function D3t(r,t){return qr(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},r.get("padding"))}function O3t(r,t,e,n){var i=n.style,a=Jy(r.get(["controlStyle",t]),n||{},new jt(e[0],e[1],e[2],e[3]));return i&&a.setStyle(i),a}function fV(r,t,e,n,i,a){var o=t.get("color");if(i)i.setColor(o),e.add(i),a&&a.onUpdate(i);else{var s=r.get("symbol");i=Ur(s,-1,-1,2,2,o),i.setStyle("strokeNoScale",!0),e.add(i),a&&a.onCreate(i)}var l=t.getItemStyle(["color"]);i.setStyle(l),n=Zt({rectHover:!0,z2:100},n,!0);var u=ap(r.get("symbolSize"));n.scaleX=u[0]/2,n.scaleY=u[1]/2;var h=af(r.get("symbolOffset"),u);h&&(n.x=(n.x||0)+h[0],n.y=(n.y||0)+h[1]);var c=r.get("symbolRotate");return n.rotation=(c||0)*Math.PI/180||0,i.attr(n),i.updateTransform(),i}function dV(r,t,e,n,i,a){if(!r.dragging){var o=i.getModel("checkpointStyle"),s=n.dataToCoord(i.getData().get("value",e));if(a||!o.get("animation",!0))r.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}function N3t(r){r.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,n){var i=e.getComponent("timeline");return i&&t.currentIndex!=null&&(i.setCurrentIndex(t.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),It({currentIndex:i.option.currentIndex},t)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&t.playState!=null&&n.setPlayState(t.playState)})}function F3t(r){var t=r&&r.timeline;rt(t)||(t=t?[t]:[]),I(t,function(e){e&&k3t(e)})}function k3t(r){var t=r.type,e={number:"value",time:"time"};if(e[t]&&(r.axisType=e[t],delete r.type),gV(r),ic(r,"controlPosition")){var n=r.controlStyle||(r.controlStyle={});ic(n,"position")||(n.position=r.controlPosition),n.position==="none"&&!ic(n,"show")&&(n.show=!1,delete n.position),delete r.controlPosition}I(r.data||[],function(i){Rt(i)&&!rt(i)&&(!ic(i,"value")&&ic(i,"name")&&(i.value=i.name),gV(i))})}function gV(r){var t=r.itemStyle||(r.itemStyle={}),e=t.emphasis||(t.emphasis={}),n=r.label||r.label||{},i=n.normal||(n.normal={}),a={normal:1,emphasis:1};I(n,function(o,s){!a[s]&&!ic(i,s)&&(i[s]=o)}),e.label&&!ic(n,"emphasis")&&(n.emphasis=e.label,delete e.label)}function ic(r,t){return r.hasOwnProperty(t)}function G3t(r){r.registerComponentModel(Jj),r.registerComponentView(P3t),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),N3t(r),r.registerPreprocessor(F3t)}function FD(r,t){if(!r)return!1;for(var e=rt(r)?r:[r],n=0;n<e.length;n++)if(e[n]&&e[n][t])return!0;return!1}function q_(r){zc(r,"label",["show"])}var J_=me(),gl=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return t.prototype.init=function(e,n,i){this.mergeDefaultAndTheme(e,i),this._mergeOption(e,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(le.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,n){this._mergeOption(e,n,!1,!1)},t.prototype._mergeOption=function(e,n,i,a){var o=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=J_(s)[o];if(!l||!l.data){J_(s)[o]=null;return}u?u._mergeOption(l,n,!0):(a&&q_(l),I(l.data,function(h){h instanceof Array?(q_(h[0]),q_(h[1])):q_(h)}),u=this.createMarkerModelFromSeries(l,this,n),tt(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),J_(s)[o]=u},this)},t.prototype.formatTooltip=function(e,n,i){var a=this.getData(),o=this.getRawValue(e),s=a.getName(e);return cn("section",{header:this.name,blocks:[cn("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.prototype.getDataParams=function(e,n){var i=Qw.prototype.getDataParams.call(this,e,n),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},t.getMarkerModelFromSeries=function(e,n){return J_(e)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(ue);Hr(gl,Qw.prototype);var B3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,n,i){return new t(e,n,i)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(gl);function tR(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function z3t(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function Q_(r,t,e,n,i,a){var o=[],s=Uu(t,n),l=s?t.getCalculationInfo("stackResultDimension"):n,u=kD(t,l,r),h=t.indicesOfNearest(l,u)[0];o[i]=t.get(e,h),o[a]=t.get(l,h);var c=t.get(n,h),f=Jo(t.get(n,h));return f=Math.min(f,20),f>=0&&(o[a]=+o[a].toFixed(f)),[o,c]}var XC={min:Wt(Q_,"min"),max:Wt(Q_,"max"),average:Wt(Q_,"average"),median:Wt(Q_,"median")};function py(r,t){if(t){var e=r.getData(),n=r.coordinateSystem,i=n&&n.dimensions;if(!z3t(t)&&!rt(t.coord)&&rt(i)){var a=Qj(t,e,n,r);if(t=Pt(t),t.type&&XC[t.type]&&a.baseAxis&&a.valueAxis){var o=te(i,a.baseAxis.dim),s=te(i,a.valueAxis.dim),l=XC[t.type](e,a.baseDataDim,a.valueDataDim,o,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!rt(i))t.coord=[];else for(var u=t.coord,h=0;h<2;h++)XC[u[h]]&&(u[h]=kD(e,e.mapDimension(i[h]),u[h]));return t}}function Qj(r,t,e,n){var i={};return r.valueIndex!=null||r.valueDim!=null?(i.valueDataDim=r.valueIndex!=null?t.getDimension(r.valueIndex):r.valueDim,i.valueAxis=e.getAxis(V3t(n,i.valueDataDim)),i.baseAxis=e.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=e.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function V3t(r,t){var e=r.getData().getDimensionInfo(t);return e&&e.coordDim}function vy(r,t){return r&&r.containData&&t.coord&&!tR(t)?r.containData(t.coord):!0}function U3t(r,t,e){return r&&r.containZone&&t.coord&&e.coord&&!tR(t)&&!tR(e)?r.containZone(t.coord,e.coord):!0}function tK(r,t){return r?function(e,n,i,a){var o=a<2?e.coord&&e.coord[a]:e.value;return wu(o,t[a])}:function(e,n,i,a){return wu(e.value,t[a])}}function kD(r,t,e){if(e==="average"){var n=0,i=0;return r.each(t,function(a,o){isNaN(a)||(n+=a,i++)}),n/i}else return e==="median"?r.getMedian(t):r.getDataExtent(t)[e==="max"?1:0]}var ZC=me(),GD=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this.markerGroupMap=wt()},t.prototype.render=function(e,n,i){var a=this,o=this.markerGroupMap;o.each(function(s){ZC(s).keep=!1}),n.eachSeries(function(s){var l=gl.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,n,i)}),o.each(function(s){!ZC(s).keep&&a.group.remove(s.group)})},t.prototype.markKeep=function(e){ZC(e).keep=!0},t.prototype.toggleBlurSeries=function(e,n){var i=this;I(e,function(a){var o=gl.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(n?$H(l):nL(l))})}})},t.type="marker",t}(yr);function pV(r,t,e){var n=t.coordinateSystem;r.each(function(i){var a=r.getItemModel(i),o,s=ft(a.get("x"),e.getWidth()),l=ft(a.get("y"),e.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(t.getMarkerPosition)o=t.getMarkerPosition(r.getValues(r.dimensions,i));else if(n){var u=r.get(n.dimensions[0],i),h=r.get(n.dimensions[1],i);o=n.dataToPoint([u,h])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),r.setItemLayout(i,o)})}var W3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,n,i){n.eachSeries(function(a){var o=gl.getMarkerModelFromSeries(a,"markPoint");o&&(pV(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(e,n,i,a){var o=e.coordinateSystem,s=e.id,l=e.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,new i0),c=H3t(o,e,n);n.setData(c),pV(n.getData(),e,a),c.each(function(f){var d=c.getItemModel(f),g=d.getShallow("symbol"),p=d.getShallow("symbolSize"),v=d.getShallow("symbolRotate"),m=d.getShallow("symbolOffset"),y=d.getShallow("symbolKeepAspect");if(At(g)||At(p)||At(v)||At(m)){var _=n.getRawValue(f),x=n.getDataParams(f);At(g)&&(g=g(_,x)),At(p)&&(p=p(_,x)),At(v)&&(v=v(_,x)),At(m)&&(m=m(_,x))}var w=d.getModel("itemStyle").getItemStyle(),S=t0(l,"color");w.fill||(w.fill=S),c.setItemVisual(f,{symbol:g,symbolSize:p,symbolRotate:v,symbolOffset:m,symbolKeepAspect:y,style:w})}),h.updateData(c),this.group.add(h.group),c.eachItemGraphicEl(function(f){f.traverse(function(d){Ft(d).dataModel=n})}),this.markKeep(h),h.group.silent=n.get("silent")||e.get("silent")},t.type="markPoint",t}(GD);function H3t(r,t,e){var n;r?n=nt(r&&r.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return tt(tt({},l),{name:s,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new vi(n,e),a=nt(e.get("data"),Wt(py,t));r&&(a=ze(a,Wt(vy,r)));var o=tK(!!r,n);return i.initData(a,null,o),i}function $3t(r){r.registerComponentModel(B3t),r.registerComponentView(W3t),r.registerPreprocessor(function(t){FD(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var Y3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,n,i){return new t(e,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(gl),t1=me(),X3t=function(r,t,e,n){var i=r.getData(),a;if(rt(n))a=n;else{var o=n.type;if(o==="min"||o==="max"||o==="average"||o==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=Sn(n.yAxis,n.xAxis);else{var u=Qj(n,i,t,r);s=u.valueAxis;var h=XY(i,u.valueDataDim);l=kD(i,h,o)}var c=s.dim==="x"?0:1,f=1-c,d=Pt(n),g={coord:[]};d.type=null,d.coord=[],d.coord[f]=-1/0,g.coord[f]=1/0;var p=e.get("precision");p>=0&&be(l)&&(l=+l.toFixed(Math.min(p,20))),d.coord[c]=g.coord[c]=l,a=[d,g,{type:o,valueIndex:n.valueIndex,value:l}]}else a=[]}var v=[py(r,a[0]),py(r,a[1]),tt({},a[2])];return v[2].type=v[2].type||null,Zt(v[2],v[0]),Zt(v[2],v[1]),v};function bS(r){return!isNaN(r)&&!isFinite(r)}function vV(r,t,e,n){var i=1-r,a=n.dimensions[r];return bS(t[i])&&bS(e[i])&&t[r]===e[r]&&n.getAxis(a).containData(t[r])}function Z3t(r,t){if(r.type==="cartesian2d"){var e=t[0].coord,n=t[1].coord;if(e&&n&&(vV(1,e,n,r)||vV(0,e,n,r)))return!0}return vy(r,t[0])&&vy(r,t[1])}function jC(r,t,e,n,i){var a=n.coordinateSystem,o=r.getItemModel(t),s,l=ft(o.get("x"),i.getWidth()),u=ft(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(r.getValues(r.dimensions,t));else{var h=a.dimensions,c=r.get(h[0],t),f=r.get(h[1],t);s=a.dataToPoint([c,f])}if(sf(a,"cartesian2d")){var d=a.getAxis("x"),g=a.getAxis("y"),h=a.dimensions;bS(r.get(h[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[e?0:1]):bS(r.get(h[1],t))&&(s[1]=g.toGlobalCoord(g.getExtent()[e?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}r.setItemLayout(t,s)}var j3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,n,i){n.eachSeries(function(a){var o=gl.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=t1(o).from,u=t1(o).to;l.each(function(h){jC(l,h,!0,a,i),jC(u,h,!1,a,i)}),s.each(function(h){s.setItemLayout(h,[l.getItemLayout(h),u.getItemLayout(h)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,n,i,a){var o=e.coordinateSystem,s=e.id,l=e.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,new sD);this.group.add(h.group);var c=K3t(o,e,n),f=c.from,d=c.to,g=c.line;t1(n).from=f,t1(n).to=d,n.setData(g);var p=n.get("symbol"),v=n.get("symbolSize"),m=n.get("symbolRotate"),y=n.get("symbolOffset");rt(p)||(p=[p,p]),rt(v)||(v=[v,v]),rt(m)||(m=[m,m]),rt(y)||(y=[y,y]),c.from.each(function(x){_(f,x,!0),_(d,x,!1)}),g.each(function(x){var w=g.getItemModel(x).getModel("lineStyle").getLineStyle();g.setItemLayout(x,[f.getItemLayout(x),d.getItemLayout(x)]),w.stroke==null&&(w.stroke=f.getItemVisual(x,"style").fill),g.setItemVisual(x,{fromSymbolKeepAspect:f.getItemVisual(x,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(x,"symbolOffset"),fromSymbolRotate:f.getItemVisual(x,"symbolRotate"),fromSymbolSize:f.getItemVisual(x,"symbolSize"),fromSymbol:f.getItemVisual(x,"symbol"),toSymbolKeepAspect:d.getItemVisual(x,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(x,"symbolOffset"),toSymbolRotate:d.getItemVisual(x,"symbolRotate"),toSymbolSize:d.getItemVisual(x,"symbolSize"),toSymbol:d.getItemVisual(x,"symbol"),style:w})}),h.updateData(g),c.line.eachItemGraphicEl(function(x){Ft(x).dataModel=n,x.traverse(function(w){Ft(w).dataModel=n})});function _(x,w,S){var T=x.getItemModel(w);jC(x,w,S,e,a);var b=T.getModel("itemStyle").getItemStyle();b.fill==null&&(b.fill=t0(l,"color")),x.setItemVisual(w,{symbolKeepAspect:T.get("symbolKeepAspect"),symbolOffset:Vt(T.get("symbolOffset",!0),y[S?0:1]),symbolRotate:Vt(T.get("symbolRotate",!0),m[S?0:1]),symbolSize:Vt(T.get("symbolSize"),v[S?0:1]),symbol:Vt(T.get("symbol",!0),p[S?0:1]),style:b})}this.markKeep(h),h.group.silent=n.get("silent")||e.get("silent")},t.type="markLine",t}(GD);function K3t(r,t,e){var n;r?n=nt(r&&r.dimensions,function(u){var h=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return tt(tt({},h),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new vi(n,e),a=new vi(n,e),o=new vi([],e),s=nt(e.get("data"),Wt(X3t,t,r,e));r&&(s=ze(s,Wt(Z3t,r)));var l=tK(!!r,n);return i.initData(nt(s,function(u){return u[0]}),null,l),a.initData(nt(s,function(u){return u[1]}),null,l),o.initData(nt(s,function(u){return u[2]})),o.hasItemOption=!0,{from:i,to:a,line:o}}function q3t(r){r.registerComponentModel(Y3t),r.registerComponentView(j3t),r.registerPreprocessor(function(t){FD(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var J3t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,n,i){return new t(e,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(gl),e1=me(),Q3t=function(r,t,e,n){var i=n[0],a=n[1];if(!(!i||!a)){var o=py(r,i),s=py(r,a),l=o.coord,u=s.coord;l[0]=Sn(l[0],-1/0),l[1]=Sn(l[1],-1/0),u[0]=Sn(u[0],1/0),u[1]=Sn(u[1],1/0);var h=BP([{},o,s]);return h.coord=[o.coord,s.coord],h.x0=o.x,h.y0=o.y,h.x1=s.x,h.y1=s.y,h}};function ES(r){return!isNaN(r)&&!isFinite(r)}function mV(r,t,e,n){var i=1-r;return ES(t[i])&&ES(e[i])}function t5t(r,t){var e=t.coord[0],n=t.coord[1],i={coord:e,x:t.x0,y:t.y0},a={coord:n,x:t.x1,y:t.y1};return sf(r,"cartesian2d")?e&&n&&(mV(1,e,n)||mV(0,e,n))?!0:U3t(r,i,a):vy(r,i)||vy(r,a)}function yV(r,t,e,n,i){var a=n.coordinateSystem,o=r.getItemModel(t),s,l=ft(o.get(e[0]),i.getWidth()),u=ft(o.get(e[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition){var h=r.getValues(["x0","y0"],t),c=r.getValues(["x1","y1"],t),f=a.clampData(h),d=a.clampData(c),g=[];e[0]==="x0"?g[0]=f[0]>d[0]?c[0]:h[0]:g[0]=f[0]>d[0]?h[0]:c[0],e[1]==="y0"?g[1]=f[1]>d[1]?c[1]:h[1]:g[1]=f[1]>d[1]?h[1]:c[1],s=n.getMarkerPosition(g,e,!0)}else{var p=r.get(e[0],t),v=r.get(e[1],t),m=[p,v];a.clampData&&a.clampData(m,m),s=a.dataToPoint(m,!0)}if(sf(a,"cartesian2d")){var y=a.getAxis("x"),_=a.getAxis("y"),p=r.get(e[0],t),v=r.get(e[1],t);ES(p)?s[0]=y.toGlobalCoord(y.getExtent()[e[0]==="x0"?0:1]):ES(v)&&(s[1]=_.toGlobalCoord(_.getExtent()[e[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var _V=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],e5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,n,i){n.eachSeries(function(a){var o=gl.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var u=nt(_V,function(c){return yV(s,l,c,a,i)});s.setItemLayout(l,u);var h=s.getItemGraphicEl(l);h.setShape("points",u)})}},this)},t.prototype.renderSeries=function(e,n,i,a){var o=e.coordinateSystem,s=e.id,l=e.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,{group:new Dt});this.group.add(h.group),this.markKeep(h);var c=r5t(o,e,n);n.setData(c),c.each(function(f){var d=nt(_V,function(b){return yV(c,f,b,e,a)}),g=o.getAxis("x").scale,p=o.getAxis("y").scale,v=g.getExtent(),m=p.getExtent(),y=[g.parse(c.get("x0",f)),g.parse(c.get("x1",f))],_=[p.parse(c.get("y0",f)),p.parse(c.get("y1",f))];Ga(y),Ga(_);var x=!(v[0]>y[1]||v[1]<y[0]||m[0]>_[1]||m[1]<_[0]),w=!x;c.setItemLayout(f,{points:d,allClipped:w});var S=c.getItemModel(f).getModel("itemStyle").getItemStyle(),T=t0(l,"color");S.fill||(S.fill=T,yt(S.fill)&&(S.fill=Vx(S.fill,.4))),S.stroke||(S.stroke=T),c.setItemVisual(f,"style",S)}),c.diff(e1(h).data).add(function(f){var d=c.getItemLayout(f);if(!d.allClipped){var g=new Ti({shape:{points:d.points}});c.setItemGraphicEl(f,g),h.group.add(g)}}).update(function(f,d){var g=e1(h).data.getItemGraphicEl(d),p=c.getItemLayout(f);p.allClipped?g&&h.group.remove(g):(g?Ae(g,{shape:{points:p.points}},n,f):g=new Ti({shape:{points:p.points}}),c.setItemGraphicEl(f,g),h.group.add(g))}).remove(function(f){var d=e1(h).data.getItemGraphicEl(f);h.group.remove(d)}).execute(),c.eachItemGraphicEl(function(f,d){var g=c.getItemModel(d),p=c.getItemVisual(d,"style");f.useStyle(c.getItemVisual(d,"style")),Nn(f,hn(g),{labelFetcher:n,labelDataIndex:d,defaultText:c.getName(d)||"",inheritColor:yt(p.fill)?Vx(p.fill,1):"#000"}),On(f,g),wr(f,null,null,g.get(["emphasis","disabled"])),Ft(f).dataModel=n}),e1(h).data=c,h.group.silent=n.get("silent")||e.get("silent")},t.type="markArea",t}(GD);function r5t(r,t,e){var n,i,a=["x0","y0","x1","y1"];if(r){var o=nt(r&&r.dimensions,function(u){var h=t.getData(),c=h.getDimensionInfo(h.mapDimension(u))||{};return tt(tt({},c),{name:u,ordinalMeta:null})});i=nt(a,function(u,h){return{name:u,type:o[h%2].type}}),n=new vi(i,e)}else i=[{name:"value",type:"float"}],n=new vi(i,e);var s=nt(e.get("data"),Wt(Q3t,t,r,e));r&&(s=ze(s,Wt(t5t,r)));var l=r?function(u,h,c,f){var d=u.coord[Math.floor(f/2)][f%2];return wu(d,i[f])}:function(u,h,c,f){return wu(u.value,i[f])};return n.initData(s,null,l),n.hasItemOption=!0,n}function n5t(r){r.registerComponentModel(J3t),r.registerComponentView(e5t),r.registerPreprocessor(function(t){FD(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var i5t=function(r,t){if(t==="all")return{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}},eR=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.prototype.init=function(e,n,i){this.mergeDefaultAndTheme(e,i),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,n){r.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},t.prototype._updateSelector=function(e){var n=e.selector,i=this.ecModel;n===!0&&(n=e.selector=["all","inverse"]),rt(n)&&I(n,function(a,o){yt(a)&&(a={type:a}),n[o]=Zt(a,i5t(i,a.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<e.length;i++){var a=e[i].get("name");if(this.isSelected(a)){this.select(a),n=!0;break}}!n&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var n=[],i=[];e.eachRawSeries(function(l){var u=l.name;i.push(u);var h;if(l.legendVisualProvider){var c=l.legendVisualProvider,f=c.getAllNames();e.isSeriesFiltered(l)||(i=i.concat(f)),f.length?n=n.concat(f):h=!0}else h=!0;h&&jP(l)&&n.push(l.name)}),this._availableNames=i;var a=this.get("data")||n,o=wt(),s=nt(a,function(l){return(yt(l)||be(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new Oe(l,this,this.ecModel))},this);this._data=ze(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;I(a,function(o){n[o.get("name")]=!1})}n[e]=!0},t.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var n=this.option.selected;n.hasOwnProperty(e)||(n[e]=!0),this[n[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,n=this.option.selected;I(e,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,n=this.option.selected;I(e,function(i){var a=i.get("name",!0);n.hasOwnProperty(a)||(n[a]=!0),n[a]=!n[a]})},t.prototype.isSelected=function(e){var n=this.option.selected;return!(n.hasOwnProperty(e)&&!n[e])&&te(this._availableNames,e)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(ue),Wf=Wt,rR=I,r1=Dt,eK=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return t.prototype.init=function(){this.group.add(this._contentGroup=new r1),this.group.add(this._selectorGroup=new r1),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,n,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var o=e.get("align"),s=e.get("orient");(!o||o==="auto")&&(o=e.get("left")==="right"&&s==="vertical"?"right":"left");var l=e.get("selector",!0),u=e.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,e,n,i,l,s,u);var h=e.getBoxLayoutParams(),c={width:i.getWidth(),height:i.getHeight()},f=e.get("padding"),d=qr(h,c,f),g=this.layoutInner(e,o,d,a,l,u),p=qr(It({width:g.width,height:g.height},h),c,f);this.group.x=p.x-g.x,this.group.y=p.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Wj(g,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,n,i,a,o,s,l){var u=this.getContentGroup(),h=wt(),c=n.get("selectedMode"),f=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&f.push(d.id)}),rR(n.getData(),function(d,g){var p=d.get("name");if(!this.newlineDisabled&&(p===""||p===`
`)){var v=new r1;v.newline=!0,u.add(v);return}var m=i.getSeriesByName(p)[0];if(!h.get(p))if(m){var y=m.getData(),_=y.getVisual("legendLineStyle")||{},x=y.getVisual("legendIcon"),w=y.getVisual("style"),S=this._createItem(m,p,g,d,n,e,_,w,x,c,a);S.on("click",Wf(xV,p,null,a,f)).on("mouseover",Wf(nR,m.name,null,a,f)).on("mouseout",Wf(iR,m.name,null,a,f)),i.ssr&&S.eachChild(function(T){var b=Ft(T);b.seriesIndex=m.seriesIndex,b.dataIndex=g,b.ssrType="legend"}),h.set(p,!0)}else i.eachRawSeries(function(T){if(!h.get(p)&&T.legendVisualProvider){var b=T.legendVisualProvider;if(!b.containName(p))return;var E=b.indexOfName(p),C=b.getItemVisual(E,"style"),M=b.getItemVisual(E,"legendIcon"),A=sa(C.fill);A&&A[3]===0&&(A[3]=.2,C=tt(tt({},C),{fill:tl(A,"rgba")}));var R=this._createItem(T,p,g,d,n,e,{},C,M,c,a);R.on("click",Wf(xV,null,p,a,f)).on("mouseover",Wf(nR,null,p,a,f)).on("mouseout",Wf(iR,null,p,a,f)),i.ssr&&R.eachChild(function(P){var L=Ft(P);L.seriesIndex=T.seriesIndex,L.dataIndex=g,L.ssrType="legend"}),h.set(p,!0)}},this)},this),o&&this._createSelector(o,n,a,s,l)},t.prototype._createSelector=function(e,n,i,a,o){var s=this.getSelectorGroup();rR(e,function(u){var h=u.type,c=new xe({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(c);var f=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);Nn(c,{normal:f,emphasis:d},{defaultText:u.title}),Cc(c)})},t.prototype._createItem=function(e,n,i,a,o,s,l,u,h,c,f){var d=e.visualDrawType,g=o.get("itemWidth"),p=o.get("itemHeight"),v=o.isSelected(n),m=a.get("symbolRotate"),y=a.get("symbolKeepAspect"),_=a.get("icon");h=_||h||"roundRect";var x=a5t(h,a,l,u,d,v,f),w=new r1,S=a.getModel("textStyle");if(At(e.getLegendIcon)&&(!_||_==="inherit"))w.add(e.getLegendIcon({itemWidth:g,itemHeight:p,icon:h,iconRotate:m,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:y}));else{var T=_==="inherit"&&e.getData().getVisual("symbol")?m==="inherit"?e.getData().getVisual("symbolRotate"):m:0;w.add(o5t({itemWidth:g,itemHeight:p,icon:h,iconRotate:T,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:y}))}var b=s==="left"?g+5:-5,E=s,C=o.get("formatter"),M=n;yt(C)&&C?M=C.replace("{name}",n??""):At(C)&&(M=C(n));var A=v?S.getTextColor():a.get("inactiveColor");w.add(new xe({style:sr(S,{text:M,x:b,y:p/2,fill:A,align:E,verticalAlign:"middle"},{inheritColor:A})}));var R=new ve({shape:w.getBoundingRect(),style:{fill:"transparent"}}),P=a.getModel("tooltip");return P.get("show")&&qg({el:R,componentModel:o,itemName:n,itemTooltipOption:P.option}),w.add(R),w.eachChild(function(L){L.silent=!0}),R.silent=!c,this.getContentGroup().add(w),Cc(w),w.__legendDataIndex=i,w},t.prototype.layoutInner=function(e,n,i,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Ac(e.get("orient"),l,e.get("itemGap"),i.width,i.height);var h=l.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),l.markRedraw(),o){Ac("horizontal",u,e.get("selectorItemGap",!0));var f=u.getBoundingRect(),d=[-f.x,-f.y],g=e.get("selectorButtonGap",!0),p=e.getOrient().index,v=p===0?"width":"height",m=p===0?"height":"width",y=p===0?"y":"x";s==="end"?d[p]+=h[v]+g:c[p]+=f[v]+g,d[1-p]+=h[m]/2-f[m]/2,u.x=d[0],u.y=d[1],l.x=c[0],l.y=c[1];var _={x:0,y:0};return _[v]=h[v]+g+f[v],_[m]=Math.max(h[m],f[m]),_[y]=Math.min(0,f[y]+d[1-p]),_}else return l.x=c[0],l.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(yr);function a5t(r,t,e,n,i,a,o){function s(v,m){v.lineWidth==="auto"&&(v.lineWidth=m.lineWidth>0?2:0),rR(v,function(y,_){v[_]==="inherit"&&(v[_]=m[_])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),h=r.lastIndexOf("empty",0)===0?"fill":"stroke",c=l.getShallow("decal");u.decal=!c||c==="inherit"?n.decal:yg(c,o),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[h]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:e).opacity),s(u,n);var f=t.getModel("lineStyle"),d=f.getLineStyle();if(s(d,e),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!a){var g=t.get("inactiveBorderWidth"),p=u[h];u.lineWidth=g==="auto"?n.lineWidth>0&&p?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=f.get("inactiveColor"),d.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function o5t(r){var t=r.icon||"roundRect",e=Ur(t,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return e.setStyle(r.itemStyle),e.rotation=(r.iconRotate||0)*Math.PI/180,e.setOrigin([r.itemWidth/2,r.itemHeight/2]),t.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function xV(r,t,e,n){iR(r,t,e,n),e.dispatchAction({type:"legendToggleSelect",name:r??t}),nR(r,t,e,n)}function rK(r){for(var t=r.getZr().storage.getDisplayList(),e,n=0,i=t.length;n<i&&!(e=t[n].states.emphasis);)n++;return e&&e.hoverLayer}function nR(r,t,e,n){rK(e)||e.dispatchAction({type:"highlight",seriesName:r,name:t,excludeSeriesId:n})}function iR(r,t,e,n){rK(e)||e.dispatchAction({type:"downplay",seriesName:r,name:t,excludeSeriesId:n})}function s5t(r){var t=r.findComponents({mainType:"legend"});t&&t.length&&r.filterSeries(function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0})}function Jp(r,t,e){var n={},i=r==="toggleSelected",a;return e.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](t.name):r==="allSelect"||r==="inverseSelect"?o[r]():(o[r](t.name),a=o.isSelected(t.name));var s=o.getData();I(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var h=o.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&h:n[u]=h}})}),r==="allSelect"||r==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function l5t(r){r.registerAction("legendToggleSelect","legendselectchanged",Wt(Jp,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",Wt(Jp,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",Wt(Jp,"inverseSelect")),r.registerAction("legendSelect","legendselected",Wt(Jp,"select")),r.registerAction("legendUnSelect","legendunselected",Wt(Jp,"unSelect"))}function nK(r){r.registerComponentModel(eR),r.registerComponentView(eK),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,s5t),r.registerSubTypeDefaulter("legend",function(){return"plain"}),l5t(r)}var u5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,n,i){var a=ep(e);r.prototype.init.call(this,e,n,i),SV(this,e,a)},t.prototype.mergeOption=function(e,n){r.prototype.mergeOption.call(this,e,n),SV(this,this.option,e)},t.type="legend.scroll",t.defaultOption=th(eR.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(eR);function SV(r,t,e){var n=r.getOrient(),i=[1,1];i[n.index]=0,Vu(t,e,{type:"box",ignoreSize:!!i})}var wV=Dt,KC=["width","height"],qC=["x","y"],h5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return t.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new wV),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new wV)},t.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,n,i,a,o,s,l){var u=this;r.prototype.renderInner.call(this,e,n,i,a,o,s,l);var h=this._controllerGroup,c=n.get("pageIconSize",!0),f=rt(c)?c:[c,c];g("pagePrev",0);var d=n.getModel("pageTextStyle");h.add(new xe({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(p,v){var m=p+"DataIndex",y=Jy(n.get("pageIcons",!0)[n.getOrient().name][v],{onclick:_t(u._pageGo,u,m,n,a)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});y.name=p,h.add(y)}},t.prototype.layoutInner=function(e,n,i,a,o,s){var l=this.getSelectorGroup(),u=e.getOrient().index,h=KC[u],c=qC[u],f=KC[1-u],d=qC[1-u];o&&Ac("horizontal",l,e.get("selectorItemGap",!0));var g=e.get("selectorButtonGap",!0),p=l.getBoundingRect(),v=[-p.x,-p.y],m=Pt(i);o&&(m[h]=i[h]-p[h]-g);var y=this._layoutContentAndController(e,a,m,u,h,f,d,c);if(o){if(s==="end")v[u]+=y[h]+g;else{var _=p[h]+g;v[u]-=_,y[c]-=_}y[h]+=p[h]+g,v[1-u]+=y[d]+y[f]/2-p[f]/2,y[f]=Math.max(y[f],p[f]),y[d]=Math.min(y[d],p[d]+v[1-u]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(e,n,i,a,o,s,l,u){var h=this.getContentGroup(),c=this._containerGroup,f=this._controllerGroup;Ac(e.get("orient"),h,e.get("itemGap"),a?i.width:null,a?null:i.height),Ac("horizontal",f,e.get("pageButtonItemGap",!0));var d=h.getBoundingRect(),g=f.getBoundingRect(),p=this._showController=d[o]>i[o],v=[-d.x,-d.y];n||(v[a]=h[u]);var m=[0,0],y=[-g.x,-g.y],_=Vt(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(p){var x=e.get("pageButtonPosition",!0);x==="end"?y[a]+=i[o]-g[o]:m[a]+=g[o]+_}y[1-a]+=d[s]/2-g[s]/2,h.setPosition(v),c.setPosition(m),f.setPosition(y);var w={x:0,y:0};if(w[o]=p?i[o]:d[o],w[s]=Math.max(d[s],g[s]),w[l]=Math.min(0,g[l]+y[1-a]),c.__rectSize=i[o],p){var S={x:0,y:0};S[o]=Math.max(i[o]-g[o]-_,0),S[s]=w[s],c.setClipPath(new ve({shape:S})),c.__rectSize=S[o]}else f.eachChild(function(b){b.attr({invisible:!0,silent:!0})});var T=this._getPageInfo(e);return T.pageIndex!=null&&Ae(h,{x:T.contentPosition[0],y:T.contentPosition[1]},p?e:null),this._updatePageInfoView(e,T),w},t.prototype._pageGo=function(e,n,i){var a=this._getPageInfo(n)[e];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:n.id})},t.prototype._updatePageInfoView=function(e,n){var i=this._controllerGroup;I(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",f=n[c]!=null,d=i.childOfName(h);d&&(d.setStyle("fill",f?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),d.cursor=f?"pointer":"default")});var a=i.childOfName("pageText"),o=e.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;a&&o&&a.setStyle("text",yt(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},t.prototype._getPageInfo=function(e){var n=e.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=e.getOrient().index,s=KC[o],l=qC[o],u=this._findTargetItemIndex(n),h=i.children(),c=h[u],f=h.length,d=f?1:0,g={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return g;var p=x(c);g.contentPosition[o]=-p.s;for(var v=u+1,m=p,y=p,_=null;v<=f;++v)_=x(h[v]),(!_&&y.e>m.s+a||_&&!w(_,m.s))&&(y.i>m.i?m=y:m=_,m&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=m.i),++g.pageCount)),y=_;for(var v=u-1,m=p,y=p,_=null;v>=-1;--v)_=x(h[v]),(!_||!w(y,_.s))&&m.i<y.i&&(y=m,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=m.i),++g.pageCount,++g.pageIndex),m=_;return g;function x(S){if(S){var T=S.getBoundingRect(),b=T[l]+S[l];return{s:b,e:b+T[s],i:S.__legendDataIndex}}}function w(S,T){return S.e>=T&&S.s<=T+a}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var n,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===e&&(n=s)}),n??a},t.type="legend.scroll",t}(eK);function c5t(r){r.registerAction("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;n!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function f5t(r){ne(nK),r.registerComponentModel(u5t),r.registerComponentView(h5t),c5t(r)}function d5t(r){ne(nK),ne(f5t)}var g5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.inside",t.defaultOption=th(gy.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(gy),BD=me();function p5t(r,t,e){BD(r).coordSysRecordMap.each(function(n){var i=n.dataZoomInfoMap.get(t.uid);i&&(i.getRange=e)})}function v5t(r,t){for(var e=BD(r).coordSysRecordMap,n=e.keys(),i=0;i<n.length;i++){var a=n[i],o=e.get(a),s=o.dataZoomInfoMap;if(s){var l=t.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||iK(e,o))}}}function iK(r,t){if(t){r.removeKey(t.model.uid);var e=t.controller;e&&e.dispose()}}function m5t(r,t){var e={model:t,containsPoint:Wt(_5t,t),dispatchAction:Wt(y5t,r),dataZoomInfoMap:null,controller:null},n=e.controller=new u0(r.getZr());return I(["pan","zoom","scrollMove"],function(i){n.on(i,function(a){var o=[];e.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,e.model.mainType,e.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&e.dispatchAction(o)})}),e}function y5t(r,t){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function _5t(r,t,e,n){return r.coordinateSystem.containPoint([e,n])}function x5t(r){var t,e="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return r.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;n[e+s]>n[e+t]&&(t=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function S5t(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(t,e){var n=BD(e),i=n.coordSysRecordMap||(n.coordSysRecordMap=wt());i.each(function(a){a.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=zj(a);I(o.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,m5t(e,s.model)),h=u.dataZoomInfoMap||(u.dataZoomInfoMap=wt());h.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){iK(i,a);return}var h=x5t(l);o.enable(h.controlType,h.opt),o.setPointerChecker(a.containsPoint),ip(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var w5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return t.prototype.render=function(e,n,i){if(r.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),p5t(i,e,{pan:_t(JC.pan,this),zoom:_t(JC.zoom,this),scrollMove:_t(JC.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){v5t(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(RD),JC={zoom:function(r,t,e,n){var i=this.range,a=i.slice(),o=r.axisModels[0];if(o){var s=QC[t](null,[n.originX,n.originY],o,e,r),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/n.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(uf(0,a,[0,100],0,h.minSpan,h.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:TV(function(r,t,e,n,i,a){var o=QC[n]([a.oldX,a.oldY],[a.newX,a.newY],t,i,e);return o.signal*(r[1]-r[0])*o.pixel/o.pixelLength}),scrollMove:TV(function(r,t,e,n,i,a){var o=QC[n]([0,0],[a.scrollDelta,a.scrollDelta],t,i,e);return o.signal*(r[1]-r[0])*a.scrollDelta})};function TV(r){return function(t,e,n,i){var a=this.range,o=a.slice(),s=t.axisModels[0];if(s){var l=r(o,s,t,e,n,i);if(uf(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var QC={grid:function(r,t,e,n,i){var a=e.axis,o={},s=i.model.coordinateSystem.getRect();return r=r||[0,0],a.dim==="x"?(o.pixel=t[0]-r[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=t[1]-r[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(r,t,e,n,i){var a=e.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return r=r?s.pointToCoord(r):[0,0],t=s.pointToCoord(t),e.mainType==="radiusAxis"?(o.pixel=t[0]-r[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=t[1]-r[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(r,t,e,n,i){var a=e.axis,o=i.model.coordinateSystem.getRect(),s={};return r=r||[0,0],a.orient==="horizontal"?(s.pixel=t[0]-r[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-r[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function aK(r){PD(r),r.registerComponentModel(g5t),r.registerComponentView(w5t),S5t(r)}var T5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=th(gy.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(gy),Qp=ve,bV=7,b5t=1,tM=30,E5t=7,tv="horizontal",EV="vertical",C5t=5,M5t=["line","bar","candlestick","scatter"],A5t={easing:"cubicOut",duration:100,delay:0},I5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._displayables={},e}return t.prototype.init=function(e,n){this.api=n,this._onBrush=_t(this._onBrush,this),this._onBrushEnd=_t(this._onBrushEnd,this)},t.prototype.render=function(e,n,i,a){if(r.prototype.render.apply(this,arguments),ip(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){ey(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new Dt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(n),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,n=this.api,i=e.get("brushSelect"),a=i?E5t:0,o=this._findCoordRect(),s={width:n.getWidth(),height:n.getHeight()},l=this._orient===tv?{right:s.width-o.x-o.width,top:s.height-tM-bV-a,width:o.width,height:tM}:{right:bV,top:o.y,width:tM,height:o.height},u=ep(e.option);I(["right","top","width","height"],function(c){u[c]==="ph"&&(u[c]=l[c])});var h=qr(u,s);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===EV&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,n=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===tv&&!o?{scaleY:l?1:-1,scaleX:1}:i===tv&&o?{scaleY:l?1:-1,scaleX:-1}:i===EV&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=e.getBoundingRect([s]);e.x=n.x-u.x,e.y=n.y-u.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,n=this._size,i=this._displayables.sliderGroup,a=e.get("brushSelect");i.add(new Qp({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new Qp({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:_t(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var n=this._size,i=this._shadowSize||[],a=e.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():e.otherDim;if(l==null)return;var u=this._shadowPolygonPts,h=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||n[0]!==i[0]||n[1]!==i[1]){var c=o.getDataExtent(l),f=(c[1]-c[0])*.3;c=[c[0]-f,c[1]+f];var d=[0,n[1]],g=[0,n[0]],p=[[n[0],0],[0,0]],v=[],m=g[1]/(o.count()-1),y=0,_=Math.round(o.count()/n[0]),x;o.each([l],function(E,C){if(_>0&&C%_){y+=m;return}var M=E==null||isNaN(E)||E==="",A=M?0:Fe(E,c,d,!0);M&&!x&&C?(p.push([p[p.length-1][0],0]),v.push([v[v.length-1][0],0])):!M&&x&&(p.push([y,0]),v.push([y,0])),p.push([y,A]),v.push([y,A]),y+=m,x=M}),u=this._shadowPolygonPts=p,h=this._shadowPolylinePts=v}this._shadowData=o,this._shadowDim=l,this._shadowSize=[n[0],n[1]];var w=this.dataZoomModel;function S(E){var C=w.getModel(E?"selectedDataBackground":"dataBackground"),M=new Dt,A=new Ti({shape:{points:u},segmentIgnoreThreshold:1,style:C.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),R=new Ei({shape:{points:h},segmentIgnoreThreshold:1,style:C.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return M.add(A),M.add(R),M}for(var T=0;T<3;T++){var b=S(T===1);this._displayables.sliderGroup.add(b),this._displayables.dataShadowSegs.push(b)}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,n=e.get("showDataShadow");if(n!==!1){var i,a=this.ecModel;return e.eachTargetAxis(function(o,s){var l=e.getAxisProxy(o,s).getTargetSeriesModels();I(l,function(u){if(!i&&!(n!==!0&&te(M5t,u.get("type"))<0)){var h=a.getComponent(gu(o),s).axis,c=R5t(o),f,d=u.coordinateSystem;c!=null&&d.getOtherAxis&&(f=d.getOtherAxis(h).inverse),c=u.getData().mapDimension(c),i={thisAxis:h,series:u,thisDim:o,otherDim:c,otherAxisInverse:f}}},this)},this),i}},t.prototype._renderHandle=function(){var e=this.group,n=this._displayables,i=n.handles=[null,null],a=n.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,h=l.get("borderRadius")||0,c=l.get("brushSelect"),f=n.filler=new Qp({silent:c,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(f),o.add(new Qp({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:h},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:b5t,fill:"rgba(0,0,0,0)"}})),I([0,1],function(_){var x=l.get("handleIcon");!rS[x]&&x.indexOf("path://")<0&&x.indexOf("image://")<0&&(x="path://"+x);var w=Ur(x,-1,0,2,2,null,!0);w.attr({cursor:CV(this._orient),draggable:!0,drift:_t(this._onDragMove,this,_),ondragend:_t(this._onDragEnd,this),onmouseover:_t(this._showDataInfo,this,!0),onmouseout:_t(this._showDataInfo,this,!1),z2:5});var S=w.getBoundingRect(),T=l.get("handleSize");this._handleHeight=ft(T,this._size[1]),this._handleWidth=S.width/S.height*this._handleHeight,w.setStyle(l.getModel("handleStyle").getItemStyle()),w.style.strokeNoScale=!0,w.rectHover=!0,w.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Cc(w);var b=l.get("handleColor");b!=null&&(w.style.fill=b),o.add(i[_]=w);var E=l.getModel("textStyle");e.add(a[_]=new xe({silent:!0,invisible:!0,style:sr(E,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:E.getTextColor(),font:E.getFont()}),z2:10}))},this);var d=f;if(c){var g=ft(l.get("moveHandleSize"),s[1]),p=n.moveHandle=new ve({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:g}}),v=g*.8,m=n.moveHandleIcon=Ur(l.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);m.silent=!0,m.y=s[1]+g/2-.5,p.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(s[1]/2,Math.max(g,10));d=n.moveZone=new ve({invisible:!0,shape:{y:s[1]-y,height:g+y}}),d.on("mouseover",function(){u.enterEmphasis(p)}).on("mouseout",function(){u.leaveEmphasis(p)}),o.add(p),o.add(m),o.add(d)}d.attr({draggable:!0,cursor:CV(this._orient),drift:_t(this._onDragMove,this,"all"),ondragstart:_t(this._showDataInfo,this,!0),ondragend:_t(this._onDragEnd,this),onmouseover:_t(this._showDataInfo,this,!0),onmouseout:_t(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[Fe(e[0],[0,100],n,!0),Fe(e[1],[0,100],n,!0)]},t.prototype._updateInterval=function(e,n){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];uf(n,a,o,i.get("zoomLock")?"all":e,s.minSpan!=null?Fe(s.minSpan,l,o,!0):null,s.maxSpan!=null?Fe(s.maxSpan,l,o,!0):null);var u=this._range,h=this._range=Ga([Fe(a[0],o,l,!0),Fe(a[1],o,l,!0)]);return!u||u[0]!==h[0]||u[1]!==h[1]},t.prototype._updateView=function(e){var n=this._displayables,i=this._handleEnds,a=Ga(i.slice()),o=this._size;I([0,1],function(d){var g=n.handles[d],p=this._handleHeight;g.attr({scaleX:p/2,scaleY:p/2,x:i[d]+(d?-1:1),y:o[1]/2-p/2})},this),n.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};n.moveHandle&&(n.moveHandle.setShape(s),n.moveZone.setShape(s),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=n.dataShadowSegs,u=[0,a[0],a[1],o[0]],h=0;h<l.length;h++){var c=l[h],f=c.getClipPath();f||(f=new ve,c.setClipPath(f)),f.setShape({x:u[h],y:0,width:u[h+1]-u[h],height:o[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var n=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(n.get("showDetail")){var l=n.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,h=this._range,c=e?l.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(c[0],u),this._formatLabel(c[1],u)]}}var f=Ga(this._handleEnds.slice());d.call(this,0),d.call(this,1);function d(g){var p=Mc(i.handles[g].parent,this.group),v=Hw(g===0?"right":"left",p),m=this._handleWidth/2+C5t,y=fo([f[g]+(g===0?-m:m),this._size[1]/2],p);a[g].setStyle({x:y[0],y:y[1],verticalAlign:o===tv?"middle":v,align:o===tv?v:"center",text:s[g]})}},t.prototype._formatLabel=function(e,n){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=n.getPixelPrecision());var s=e==null||isNaN(e)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return At(a)?a(e,s):yt(a)?a.replace("{value}",s):s},t.prototype._showDataInfo=function(e){e=this._dragging||e;var n=this._displayables,i=n.handleLabels;i[0].attr("invisible",!e),i[1].attr("invisible",!e),n.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](n.moveHandle,1)},t.prototype._onDragMove=function(e,n,i,a){this._dragging=!0,sl(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=fo([n,i],o,!0),l=this._updateInterval(e,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var n=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(i[0]<0||i[0]>n[0]||i[1]<0||i[1]>n[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var n=e.offsetX,i=e.offsetY;this._brushStart=new $t(n,i),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var i=n.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Ga([Fe(i.x,o,s,!0),Fe(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(sl(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,n){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new Qp({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(e,n),h=l.transformCoordToLocal(s.x,s.y),c=this._size;u[0]=Math.max(Math.min(c[0],u[0]),0),o.setShape({x:h[0],y:0,width:u[0]-h[0],height:c[1]})},t.prototype._dispatchZoomAction=function(e){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?A5t:null,start:n[0],end:n[1]})},t.prototype._findCoordRect=function(){var e,n=zj(this.dataZoomModel).infoList;if(!e&&n.length){var i=n[0].model.coordinateSystem;e=i.getRect&&i.getRect()}if(!e){var a=this.api.getWidth(),o=this.api.getHeight();e={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return e},t.type="dataZoom.slider",t}(RD);function R5t(r){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[r]}function CV(r){return r==="vertical"?"ns-resize":"ew-resize"}function oK(r){r.registerComponentModel(T5t),r.registerComponentView(I5t),PD(r)}function P5t(r){ne(aK),ne(oK)}var sK={get:function(r,t,e){var n=Pt((L5t[r]||{})[t]);return e&&rt(n)?n[n.length-1]:n}},L5t={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},MV=un.mapVisual,D5t=un.eachVisual,O5t=rt,AV=I,N5t=Ga,F5t=Fe,CS=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return t.prototype.init=function(e,n,i){this.mergeDefaultAndTheme(e,i)},t.prototype.optionUpdated=function(e,n){var i=this.option;!n&&Kj(i,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var n=this.stateList;e=_t(e,this),this.controllerVisuals=JI(this.option.controller,n,e),this.targetVisuals=JI(this.option.target,n,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,n=[];return e==null||e==="all"?this.ecModel.eachSeries(function(i,a){n.push(a)}):n=Ye(e),n},t.prototype.eachTargetSeries=function(e,n){I(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&e.call(n,a)},this)},t.prototype.isTargetSeries=function(e){var n=!1;return this.eachTargetSeries(function(i){i===e&&(n=!0)}),n},t.prototype.formatValueText=function(e,n,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;i=i||["<",">"],rt(e)&&(e=e.slice(),u=!0);var h=n?e:u?[c(e[0]),c(e[1])]:c(e);if(yt(l))return l.replace("{value}",u?h[0]:h).replace("{value2}",u?h[1]:h);if(At(l))return u?l(e[0],e[1]):l(e);if(u)return e[0]===s[0]?i[0]+" "+h[1]:e[1]===s[1]?i[1]+" "+h[0]:h[0]+" - "+h[1];return h;function c(f){return f===s[0]?"min":f===s[1]?"max":(+f).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var e=this.option,n=N5t([e.min,e.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(e){var n=this.option.dimension;if(n!=null)return e.getDimensionIndex(n);for(var i=e.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=e.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},a=n.target||(n.target={}),o=n.controller||(n.controller={});Zt(a,i),Zt(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),h.call(this,o);function l(c){O5t(n.color)&&!c.inRange&&(c.inRange={color:n.color.slice().reverse()}),c.inRange=c.inRange||{color:e.get("gradientColor")}}function u(c,f,d){var g=c[f],p=c[d];g&&!p&&(p=c[d]={},AV(g,function(v,m){if(un.isValidType(m)){var y=sK.get(m,"inactive",s);y!=null&&(p[m]=y,m==="color"&&!p.hasOwnProperty("opacity")&&!p.hasOwnProperty("colorAlpha")&&(p.opacity=[0,0]))}}))}function h(c){var f=(c.inRange||{}).symbol||(c.outOfRange||{}).symbol,d=(c.inRange||{}).symbolSize||(c.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),p=this.getItemSymbol(),v=p||"roundRect";AV(this.stateList,function(m){var y=this.itemSize,_=c[m];_||(_=c[m]={color:s?g:[g]}),_.symbol==null&&(_.symbol=f&&Pt(f)||(s?v:[v])),_.symbolSize==null&&(_.symbolSize=d&&Pt(d)||(s?y[0]:[y[0],y[0]])),_.symbol=MV(_.symbol,function(S){return S==="none"?v:S});var x=_.symbolSize;if(x!=null){var w=-1/0;D5t(x,function(S){S>w&&(w=S)}),_.symbolSize=MV(x,function(S){return F5t(S,[0,w],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(ue),IV=[20,140],k5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(e,n){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){r.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=IV[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=IV[1])},t.prototype._resetRange=function(){var e=this.getExtent(),n=this.option.range;!n||n.auto?(e.auto=1,this.option.range=e):rt(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],e[0]),n[1]=Math.min(n[1],e[1]))},t.prototype.completeVisualOption=function(){r.prototype.completeVisualOption.apply(this,arguments),I(this.stateList,function(e){var n=this.option.controller[e].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),n=Ga((this.get("range")||[]).slice());return n[0]>e[1]&&(n[0]=e[1]),n[1]>e[1]&&(n[1]=e[1]),n[0]<e[0]&&(n[0]=e[0]),n[1]<e[0]&&(n[1]=e[0]),n},t.prototype.getValueState=function(e){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=e)&&(n[1]>=i[1]||e<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var n=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){e[0]<=s&&s<=e[1]&&a.push(l)},this),n.push({seriesId:i.id,dataIndex:a})},this),n},t.prototype.getVisualMeta=function(e){var n=RV(this,"outOfRange",this.getExtent()),i=RV(this,"inRange",this.option.range.slice()),a=[];function o(d,g){a.push({value:d,color:e(d,g)})}for(var s=0,l=0,u=i.length,h=n.length;l<h&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&o(n[l],"outOfRange");for(var c=1;s<u;s++,c=0)c&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var c=1;l<h;l++)(!i.length||i[i.length-1]<n[l])&&(c&&(a.length&&o(a[a.length-1].value,"outOfRange"),c=0),o(n[l],"outOfRange"));var f=a.length;return{stops:a,outerColors:[f?a[0].color:"transparent",f?a[f-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=th(CS.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(CS);function RV(r,t,e){if(e[0]===e[1])return e.slice();for(var n=200,i=(e[1]-e[0])/n,a=e[0],o=[],s=0;s<=n&&a<e[1];s++)o.push(a),a+=i;return o.push(e[1]),o}var lK=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return t.prototype.init=function(e,n){this.ecModel=e,this.api=n},t.prototype.render=function(e,n,i,a){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,n,i,a)},t.prototype.renderBackground=function(e){var n=this.visualMapModel,i=tp(n.get("padding")||0),a=e.getBoundingRect();e.add(new ve({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,n,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(n==="color"){var l=o.get("contentColor");s.color=l}function u(d){return s[d]}function h(d,g){s[d]=g}var c=o.controllerVisuals[a||o.getValueState(e)],f=un.prepareVisualTypes(c);return I(f,function(d){var g=c[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",g=c.__alphaForOpacity),un.dependsOn(d,n)&&g&&g.applyVisual(e,u,h)}),s[n]},t.prototype.positionGroup=function(e){var n=this.visualMapModel,i=this.api;qw(e,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(e,n,i,a){},t.type="visualMap",t}(yr),PV=[["left","right","width"],["top","bottom","height"]];function uK(r,t,e){var n=r.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var a={width:t.getWidth(),height:t.getHeight()},o=n.orient==="horizontal"?1:0,s=PV[o],l=[0,null,10],u={},h=0;h<3;h++)u[PV[1-o][h]]=l[h],u[s[h]]=h===2?e[0]:n[s[h]];var c=[["x","width",3],["y","height",0]][o],f=qr(u,a,n.padding);return s[(f.margin[c[2]]||0)+f[c[0]]+f[c[1]]*.5<a[c[1]]*.5?0:1]}function z1(r,t){return I(r||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),r}var Bo=Fe,G5t=I,LV=Math.min,eM=Math.max,B5t=12,z5t=6,V5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return t.prototype.init=function(e,n){r.prototype.init.call(this,e,n),this._hoverLinkFromSeriesMouseOver=_t(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=_t(this._hideIndicator,this)},t.prototype.doRender=function(e,n,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,n=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(n);var i=e.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(e,n,i){if(n){var a=n[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,h=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),c=this._applyTransform(i===0?"bottom":"top",u),f=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new xe({style:sr(d,{x:h[0],y:h[1],verticalAlign:f==="horizontal"?"middle":c,align:f==="horizontal"?c:"center",text:a})}))}},t.prototype._renderBar=function(e){var n=this.visualMapModel,i=this._shapes,a=n.itemSize,o=this._orient,s=this._useHandle,l=uK(n,this.api,a),u=i.mainGroup=this._createBarGroup(l),h=new Dt;u.add(h),h.add(i.outOfRange=DV()),h.add(i.inRange=DV(null,s?NV(this._orient):null,_t(this._dragHandle,this,"all",!1),_t(this._dragHandle,this,"all",!0))),h.setClipPath(new ve({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var c=n.textStyleModel.getTextRect(""),f=eM(c.width,c.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,a,f,o),this._createHandle(n,u,1,a,f,o)),this._createIndicator(n,u,a,f,o),e.add(u)},t.prototype._createHandle=function(e,n,i,a,o,s){var l=_t(this._dragHandle,this,i,!1),u=_t(this._dragHandle,this,i,!0),h=_o(e.get("handleSize"),a[0]),c=Ur(e.get("handleIcon"),-h/2,-h/2,h,h,null,!0),f=NV(this._orient);c.attr({cursor:f,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){sl(m.event)}}),c.x=a[0]/2,c.useStyle(e.getModel("handleStyle").getItemStyle()),c.setStyle({strokeNoScale:!0,strokeFirst:!0}),c.style.lineWidth*=2,c.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),cc(c,!0),n.add(c);var d=this.visualMapModel.textStyleModel,g=new xe({cursor:f,draggable:!0,drift:l,onmousemove:function(m){sl(m.event)},ondragend:u,style:sr(d,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var p=[h,0],v=this._shapes;v.handleThumbs[i]=c,v.handleLabelPoints[i]=p,v.handleLabels[i]=g},t.prototype._createIndicator=function(e,n,i,a,o){var s=_o(e.get("indicatorSize"),i[0]),l=Ur(e.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=e.getModel("indicatorStyle").getItemStyle();if(l instanceof bn){var h=l.style;l.useStyle(tt({image:h.image,x:h.x,y:h.y,width:h.width,height:h.height},u))}else l.useStyle(u);n.add(l);var c=this.visualMapModel.textStyleModel,f=new xe({silent:!0,invisible:!0,style:sr(c,{x:0,y:0,text:""})});this.group.add(f);var d=[(o==="horizontal"?a/2:z5t)+i[0]/2,0],g=this._shapes;g.indicator=l,g.indicatorLabel=f,g.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,n,i,a){if(this._useHandle){if(this._dragging=!n,!n){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():OV(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,n=this._dataInterval=e.getSelected(),i=e.getExtent(),a=[0,e.itemSize[1]];this._handleEnds=[Bo(n[0],i,a,!0),Bo(n[1],i,a,!0)]},t.prototype._updateInterval=function(e,n){n=n||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];uf(n,a,o,e,0);var s=i.getExtent();this._dataInterval=[Bo(a[0],o,s,!0),Bo(a[1],o,s,!0)]},t.prototype._updateView=function(e){var n=this.visualMapModel,i=n.getExtent(),a=this._shapes,o=[0,n.itemSize[1]],s=e?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(e,n,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(e,o),l=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],u=this._createBarPoints(i,l);return{barColor:new Ky(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(e,n){var i=100,a=[],o=(e[1]-e[0])/i;a.push({color:this.getControllerVisual(e[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=e[0]+o*s;if(l>e[1])break;a.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return a.push({color:this.getControllerVisual(e[1],"color",n),offset:1}),a},t.prototype._createBarPoints=function(e,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],e[0]],[i[0],e[0]],[i[0],e[1]],[i[0]-n[1],e[1]]]},t.prototype._createBarGroup=function(e){var n=this._orient,i=this.visualMapModel.get("inverse");return new Dt(n==="horizontal"&&!i?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},t.prototype._updateHandle=function(e,n){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,u=a.getExtent();G5t([0,1],function(h){var c=o[h];c.setStyle("fill",n.handlesColor[h]),c.y=e[h];var f=Bo(e[h],[0,l[1]],u,!0),d=this.getControllerVisual(f,"symbolSize");c.scaleX=c.scaleY=d/l[0],c.x=l[0]-d/2;var g=fo(i.handleLabelPoints[h],Mc(c,this.group));s[h].setStyle({x:g[0],y:g[1],text:a.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,n,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],h=this._shapes,c=h.indicator;if(c){c.attr("invisible",!1);var f={convertOpacityToAlpha:!0},d=this.getControllerVisual(e,"color",f),g=this.getControllerVisual(e,"symbolSize"),p=Bo(e,s,u,!0),v=l[0]-g/2,m={x:c.x,y:c.y};c.y=p,c.x=v;var y=fo(h.indicatorLabelPoint,Mc(c,this.group)),_=h.indicatorLabel;_.attr("invisible",!1);var x=this._applyTransform("left",h.mainGroup),w=this._orient,S=w==="horizontal";_.setStyle({text:(i||"")+o.formatValueText(n),verticalAlign:S?x:"middle",align:S?"center":x});var T={x:v,y:p,style:{fill:d}},b={style:{x:y[0],y:y[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var E={duration:100,easing:"cubicInOut",additive:!0};c.x=m.x,c.y=m.y,c.animateTo(T,E),_.animateTo(b,E)}else c.attr(T),_.attr(b);this._firstShowIndicator=!1;var C=this._shapes.handleLabels;if(C)for(var M=0;M<C.length;M++)this.api.enterBlur(C[M])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(n){if(e._hovering=!0,!e._dragging){var i=e.visualMapModel.itemSize,a=e._applyTransform([n.offsetX,n.offsetY],e._shapes.mainGroup,!0,!0);a[1]=LV(eM(0,a[1]),i[1]),e._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,n){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();e=LV(eM(o[0],e),o[1]);var l=U5t(i,s,o),u=[e-l,e+l],h=Bo(e,o,s,!0),c=[Bo(u[0],o,s,!0),Bo(u[1],o,s,!0)];u[0]<o[0]&&(c[0]=-1/0),u[1]>o[1]&&(c[1]=1/0),n&&(c[0]===-1/0?this._showIndicator(h,c[1],"< ",l):c[1]===1/0?this._showIndicator(h,c[0],"> ",l):this._showIndicator(h,h," ",l));var f=this._hoverLinkDataIndices,d=[];(n||OV(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(c));var g=KSt(f,d);this._dispatchHighDown("downplay",z1(g[0],i)),this._dispatchHighDown("highlight",z1(g[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var n;if(dc(e.target,function(l){var u=Ft(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(n.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this.api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",z1(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,n,i,a){var o=Mc(n,a?null:this.group);return rt(e)?fo(e,o,i):Hw(e,o,i)},t.prototype._dispatchHighDown=function(e,n){n&&n.length&&this.api.dispatchAction({type:e,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(lK);function DV(r,t,e,n){return new Ti({shape:{points:r},draggable:!!e,cursor:t,drift:e,onmousemove:function(i){sl(i.event)},ondragend:n})}function U5t(r,t,e){var n=B5t/2,i=r.get("hoverLinkDataSize");return i&&(n=Bo(i,t,e,!0)/2),n}function OV(r){var t=r.get("hoverLinkOnHandle");return!!(t??r.get("realtime"))}function NV(r){return r==="vertical"?"ns-resize":"ew-resize"}var W5t={type:"selectDataRange",event:"dataRangeSelected",update:"update"},H5t=function(r,t){t.eachComponent({mainType:"visualMap",query:r},function(e){e.setSelected(r.selected)})},$5t=[{createOnAllSeries:!0,reset:function(r,t){var e=[];return t.eachComponent("visualMap",function(n){var i=r.pipelineContext;!n.isTargetSeries(r)||i&&i.large||e.push(d3t(n.stateList,n.targetVisuals,_t(n.getValueState,n),n.getDataDimensionIndex(r.getData())))}),e}},{createOnAllSeries:!0,reset:function(r,t){var e=r.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(r)){var a=i.getVisualMeta(_t(Y5t,null,r,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(e);o>=0&&(a.dimension=o,n.push(a))}}),r.getData().setVisual("visualMeta",n)}}];function Y5t(r,t,e,n){for(var i=t.targetVisuals[n],a=un.prepareVisualTypes(i),o={color:t0(r.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],h=i[u==="opacity"?"__alphaForOpacity":u];h&&h.applyVisual(e,c,f)}return o.color;function c(d){return o[d]}function f(d,g){o[d]=g}}var FV=I;function X5t(r){var t=r&&r.visualMap;rt(t)||(t=t?[t]:[]),FV(t,function(e){if(e){Hf(e,"splitList")&&!Hf(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var n=e.pieces;n&&rt(n)&&FV(n,function(i){Rt(i)&&(Hf(i,"start")&&!Hf(i,"min")&&(i.min=i.start),Hf(i,"end")&&!Hf(i,"max")&&(i.max=i.end))})}})}function Hf(r,t){return r&&r.hasOwnProperty&&r.hasOwnProperty(t)}var kV=!1;function hK(r){kV||(kV=!0,r.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),r.registerAction(W5t,H5t),I($5t,function(t){r.registerVisual(r.PRIORITY.VISUAL.COMPONENT,t)}),r.registerPreprocessor(X5t))}function cK(r){r.registerComponentModel(k5t),r.registerComponentView(V5t),hK(r)}var Z5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._pieceList=[],e}return t.prototype.optionUpdated=function(e,n){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],j5t[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=Pt(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=nt(this._pieceList,function(l){return l=Pt(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var e=this.option,n={},i=un.listVisualTypes(),a=this.isCategory();I(e.pieces,function(s){I(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),I(n,function(s,l){var u=!1;I(this.stateList,function(h){u=u||o(e,h,l)||o(e.target,h,l)},this),!u&&I(this.stateList,function(h){(e[h]||(e[h]={}))[l]=sK.get(l,h==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}r.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,n){var i=this.option,a=this._pieceList,o=(n?i:e).selected||{};if(i.selected=o,I(a,function(l,u){var h=this.getSelectedMapKey(l);o.hasOwnProperty(h)||(o[h]=!0)},this),i.selectedMode==="single"){var s=!1;I(a,function(l,u){var h=this.getSelectedMapKey(l);o[h]&&(s?o[h]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=Pt(e)},t.prototype.getValueState=function(e){var n=un.findPieceIndex(e,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var n=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var h=un.findPieceIndex(l,i);h===e&&o.push(u)},this),n.push({seriesId:a.id,dataIndex:o})},this),n},t.prototype.getRepresentValue=function(e){var n;if(this.isCategory())n=e.value;else if(e.value!=null)n=e.value;else{var i=e.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(e){if(this.isCategory())return;var n=[],i=["",""],a=this;function o(h,c){var f=a.getRepresentValue({interval:h});c||(c=a.getValueState(f));var d=e(f,c);h[0]===-1/0?i[0]=d:h[1]===1/0?i[1]=d:n.push({value:h[0],color:d},{value:h[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return I(s,function(h){var c=h.interval;c&&(c[0]>u&&o([u,c[0]],"outOfRange"),o(c.slice()),u=c[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=th(CS.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(CS),j5t={splitNumber:function(r){var t=this.option,e=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var a=(n[1]-n[0])/i;+a.toFixed(e)!==a&&e<5;)e++;t.precision=e,a=+a.toFixed(e),t.minOpen&&r.push({interval:[-1/0,n[0]],close:[0,0]});for(var o=0,s=n[0];o<i;s+=a,o++){var l=o===i-1?n[1]:s+a;r.push({interval:[s,l],close:[1,1]})}t.maxOpen&&r.push({interval:[n[1],1/0],close:[0,0]}),L3(r),I(r,function(u,h){u.index=h,u.text=this.formatValueText(u.interval)},this)},categories:function(r){var t=this.option;I(t.categories,function(e){r.push({text:this.formatValueText(e,!0),value:e})},this),GV(t,r)},pieces:function(r){var t=this.option;I(t.pieces,function(e,n){Rt(e)||(e={value:e});var i={text:"",index:n};if(e.label!=null&&(i.text=e.label),e.hasOwnProperty("value")){var a=i.value=e.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],h=[],c=0;c<2;c++){for(var f=[["gte","gt","min"],["lte","lt","max"]][c],d=0;d<3&&o[c]==null;d++)o[c]=e[f[d]],s[c]=l[d],h[c]=d===2;o[c]==null&&(o[c]=u[c])}h[0]&&o[1]===1/0&&(s[0]=0),h[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=un.retrieveVisuals(e),r.push(i)},this),GV(t,r),L3(r),I(r,function(e){var n=e.close,i=[["<",""][n[1]],[">",""][n[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,i)},this)}};function GV(r,t){var e=r.inverse;(r.orient==="vertical"?!e:e)&&t.reverse()}var K5t=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.doRender=function(){var e=this.group;e.removeAll();var n=this.visualMapModel,i=n.get("textGap"),a=n.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=n.itemSize,h=this._getViewData(),c=h.endsText,f=Sn(n.get("showLabel",!0),!c);c&&this._renderEndsText(e,c[0],u,f,l),I(h.viewPieceList,function(d){var g=d.piece,p=new Dt;p.onclick=_t(this._onItemClick,this,g),this._enableHoverLink(p,d.indexInModelPieceList);var v=n.getRepresentValue(g);if(this._createItemSymbol(p,v,[0,0,u[0],u[1]]),f){var m=this.visualMapModel.getValueState(v);p.add(new xe({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:g.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:m==="outOfRange"?.5:1}}))}e.add(p)},this),c&&this._renderEndsText(e,c[1],u,f,l),Ac(n.get("orient"),e,n.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,n){var i=this;e.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:z1(s.findTargetDataIndices(n),s)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,n=e.option;if(n.orient==="vertical")return uK(e,this.api,e.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(e,n,i,a,o){if(n){var s=new Dt,l=this.visualMapModel.textStyleModel;s.add(new xe({style:sr(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:n})})),e.add(s)}},t.prototype._getViewData=function(){var e=this.visualMapModel,n=nt(e.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=e.get("text"),a=e.get("orient"),o=e.get("inverse");return(a==="horizontal"?o:!o)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(e,n,i){e.add(Ur(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(e){var n=this.visualMapModel,i=n.option,a=i.selectedMode;if(a){var o=Pt(i.selected),s=n.getSelectedMapKey(e);a==="single"||a===!0?(o[s]=!0,I(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(lK);function fK(r){r.registerComponentModel(Z5t),r.registerComponentView(K5t),hK(r)}function q5t(r){ne(cK),ne(fK)}var J5t={label:{enabled:!0},decal:{show:!1}},BV=me(),Q5t={};function tGt(r,t){var e=r.getModel("aria");if(!e.get("enabled"))return;var n=Pt(J5t);Zt(n.label,r.getLocaleModel().get("aria"),!1),Zt(e.option,n,!1),i(),a();function i(){var u=e.getModel("decal"),h=u.get("show");if(h){var c=wt();r.eachSeries(function(f){if(!f.isColorBySeries()){var d=c.get(f.type);d||(d={},c.set(f.type,d)),BV(f).scope=d}}),r.eachRawSeries(function(f){if(r.isSeriesFiltered(f))return;if(At(f.enableAriaDecal)){f.enableAriaDecal();return}var d=f.getData();if(f.isColorBySeries()){var y=iI(f.ecModel,f.name,Q5t,r.getSeriesCount()),_=d.getVisual("decal");d.setVisual("decal",x(_,y))}else{var g=f.getRawData(),p={},v=BV(f).scope;d.each(function(w){var S=d.getRawIndex(w);p[S]=w});var m=g.count();g.each(function(w){var S=p[w],T=g.getName(w)||w+"",b=iI(f.ecModel,T,v,m),E=d.getItemVisual(S,"decal");d.setItemVisual(S,"decal",x(E,b))})}function x(w,S){var T=w?tt(tt({},S),w):S;return T.dirty=!0,T}})}}function a(){var u=t.getZr().dom;if(u){var h=r.getLocaleModel().get("aria"),c=e.getModel("label");if(c.option=It(c.option,h),!!c.get("enabled")){if(c.get("description")){u.setAttribute("aria-label",c.get("description"));return}var f=r.getSeriesCount(),d=c.get(["data","maxCount"])||10,g=c.get(["series","maxCount"])||10,p=Math.min(f,g),v;if(!(f<1)){var m=s();if(m){var y=c.get(["general","withTitle"]);v=o(y,{title:m})}else v=c.get(["general","withoutTitle"]);var _=[],x=f>1?c.get(["series","multiple","prefix"]):c.get(["series","single","prefix"]);v+=o(x,{seriesCount:f}),r.eachSeries(function(b,E){if(E<p){var C=void 0,M=b.get("name"),A=M?"withName":"withoutName";C=f>1?c.get(["series","multiple",A]):c.get(["series","single",A]),C=o(C,{seriesId:b.seriesIndex,seriesName:b.get("name"),seriesType:l(b.subType)});var R=b.getData();if(R.count()>d){var P=c.get(["data","partialData"]);C+=o(P,{displayCnt:d})}else C+=c.get(["data","allData"]);for(var L=c.get(["data","separator","middle"]),D=c.get(["data","separator","end"]),k=[],F=0;F<R.count();F++)if(F<d){var B=R.getName(F),V=R.getValues(F),Y=c.get(["data",B?"withName":"withoutName"]);k.push(o(Y,{name:B,value:V.join(L)}))}C+=k.join(L)+D,_.push(C)}});var w=c.getModel(["series","multiple","separator"]),S=w.get("middle"),T=w.get("end");v+=_.join(S)+T,u.setAttribute("aria-label",v)}}}}function o(u,h){if(!yt(u))return u;var c=u;return I(h,function(f,d){c=c.replace(new RegExp("\\{\\s*"+d+"\\s*\\}","g"),f)}),c}function s(){var u=r.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){var h=r.getLocaleModel().get(["series","typeNames"]);return h[u]||h.chart}}function eGt(r){if(!(!r||!r.aria)){var t=r.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},I(["description","general","series","data"],function(e){t[e]!=null&&(t.label[e]=t[e])})}}function rGt(r){r.registerPreprocessor(eGt),r.registerVisual(r.PRIORITY.VISUAL.ARIA,tGt)}var zV={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},nGt=function(){function r(t){var e=this._condVal=yt(t)?new RegExp(t):vxt(t)?t:null;if(e==null){var n="";Pe(n)}}return r.prototype.evaluate=function(t){var e=typeof t;return yt(e)?this._condVal.test(t):be(e)?this._condVal.test(t+""):!1},r}(),iGt=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),aGt=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},r}(),oGt=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},r}(),sGt=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),lGt=function(){function r(){}return r.prototype.evaluate=function(){for(var t=!!this.valueParser,e=this.getValue,n=e(this.valueGetterParam),i=t?this.valueParser(n):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(t?i:n))return!1;return!0},r}();function zD(r,t){if(r===!0||r===!1){var e=new iGt;return e.value=r,e}var n="";return dK(r)||Pe(n),r.and?VV("and",r,t):r.or?VV("or",r,t):r.not?uGt(r,t):hGt(r,t)}function VV(r,t,e){var n=t[r],i="";rt(n)||Pe(i),n.length||Pe(i);var a=r==="and"?new aGt:new oGt;return a.children=nt(n,function(o){return zD(o,e)}),a.children.length||Pe(i),a}function uGt(r,t){var e=r.not,n="";dK(e)||Pe(n);var i=new sGt;return i.child=zD(e,t),i.child||Pe(n),i}function hGt(r,t){for(var e="",n=t.prepareGetValue(r),i=[],a=he(r),o=r.parser,s=o?Z$(o):null,l=0;l<a.length;l++){var u=a[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var h=xt(zV,u)?zV[u]:u,c=r[u],f=s?s(c):c,d=Qbt(h,f)||h==="reg"&&new nGt(f);d||Pe(e),i.push(d)}}i.length||Pe(e);var g=new lGt;return g.valueGetterParam=n,g.valueParser=s,g.getValue=t.getValue,g.subCondList=i,g}function dK(r){return Rt(r)&&!Qn(r)}var cGt=function(){function r(t,e){this._cond=zD(t,e)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}();function fGt(r,t){return new cGt(r,t)}var dGt={type:"echarts:filter",transform:function(r){for(var t=r.upstream,e,n=fGt(r.config,{valueGetterAttrMap:wt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;xt(s,"dimension")||Pe(l);var h=t.getDimensionInfo(u);return h||Pe(l),{dimIdx:h.index}},getValue:function(s){return t.retrieveValueFromItem(e,s.dimIdx)}}),i=[],a=0,o=t.count();a<o;a++)e=t.getRawDataItem(a),n.evaluate()&&i.push(e);return{data:i}}},gGt={type:"echarts:sort",transform:function(r){var t=r.upstream,e=r.config,n="",i=Ye(e);i.length||Pe(n);var a=[];I(i,function(h){var c=h.dimension,f=h.order,d=h.parser,g=h.incomparable;if(c==null&&Pe(n),f!=="asc"&&f!=="desc"&&Pe(n),g&&g!=="min"&&g!=="max"){var p="";Pe(p)}if(f!=="asc"&&f!=="desc"){var v="";Pe(v)}var m=t.getDimensionInfo(c);m||Pe(n);var y=d?Z$(d):null;d&&!y&&Pe(n),a.push({dimIdx:m.index,parser:y,comparator:new K$(f,g)})});var o=t.sourceFormat;o!==ti&&o!==Ka&&Pe(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(h,c){for(var f=0;f<a.length;f++){var d=a[f],g=t.retrieveValueFromItem(h,d.dimIdx),p=t.retrieveValueFromItem(c,d.dimIdx);d.parser&&(g=d.parser(g),p=d.parser(p));var v=d.comparator.evaluate(g,p);if(v!==0)return v}return 0}),{data:s}}};function pGt(r){r.registerTransform(dGt),r.registerTransform(gGt)}var vGt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataset",e}return t.prototype.init=function(e,n,i){r.prototype.init.call(this,e,n,i),this._sourceManager=new tY(this),H5(this)},t.prototype.mergeOption=function(e,n){r.prototype.mergeOption.call(this,e,n),H5(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:ss},t}(ue),mGt=function(r){U(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataset",e}return t.type="dataset",t}(yr);function yGt(r){r.registerComponentModel(vGt),r.registerComponentView(mGt)}var Fo=ps.CMD;function Td(r,t){return Math.abs(r-t)<1e-5}function aR(r){var t=r.data,e=r.len(),n=[],i,a=0,o=0,s=0,l=0;function u(R,P){i&&i.length>2&&n.push(i),i=[R,P]}function h(R,P,L,D){Td(R,L)&&Td(P,D)||i.push(R,P,L,D,L,D)}function c(R,P,L,D,k,F){var B=Math.abs(P-R),V=Math.tan(B/4)*4/3,Y=P<R?-1:1,q=Math.cos(R),lt=Math.sin(R),X=Math.cos(P),St=Math.sin(P),mt=q*k+L,$=lt*F+D,K=X*k+L,et=St*F+D,W=k*V*Y,Z=F*V*Y;i.push(mt-W*lt,$+Z*q,K+W*St,et-Z*X,K,et)}for(var f,d,g,p,v=0;v<e;){var m=t[v++],y=v===1;switch(y&&(a=t[v],o=t[v+1],s=a,l=o,(m===Fo.L||m===Fo.C||m===Fo.Q)&&(i=[s,l])),m){case Fo.M:a=s=t[v++],o=l=t[v++],u(s,l);break;case Fo.L:f=t[v++],d=t[v++],h(a,o,f,d),a=f,o=d;break;case Fo.C:i.push(t[v++],t[v++],t[v++],t[v++],a=t[v++],o=t[v++]);break;case Fo.Q:f=t[v++],d=t[v++],g=t[v++],p=t[v++],i.push(a+2/3*(f-a),o+2/3*(d-o),g+2/3*(f-g),p+2/3*(d-p),g,p),a=g,o=p;break;case Fo.A:var _=t[v++],x=t[v++],w=t[v++],S=t[v++],T=t[v++],b=t[v++]+T;v+=1;var E=!t[v++];f=Math.cos(T)*w+_,d=Math.sin(T)*S+x,y?(s=f,l=d,u(s,l)):h(a,o,f,d),a=Math.cos(b)*w+_,o=Math.sin(b)*S+x;for(var C=(E?-1:1)*Math.PI/2,M=T;E?M>b:M<b;M+=C){var A=E?Math.max(M+C,b):Math.min(M+C,b);c(M,A,_,x,w,S)}break;case Fo.R:s=a=t[v++],l=o=t[v++],f=s+t[v++],d=l+t[v++],u(f,l),h(f,l,f,d),h(f,d,s,d),h(s,d,s,l),h(s,l,f,l);break;case Fo.Z:i&&h(a,o,s,l),a=s,o=l;break}}return i&&i.length>2&&n.push(i),n}function oR(r,t,e,n,i,a,o,s,l,u){if(Td(r,e)&&Td(t,n)&&Td(i,o)&&Td(a,s)){l.push(o,s);return}var h=2/u,c=h*h,f=o-r,d=s-t,g=Math.sqrt(f*f+d*d);f/=g,d/=g;var p=e-r,v=n-t,m=i-o,y=a-s,_=p*p+v*v,x=m*m+y*y;if(_<c&&x<c){l.push(o,s);return}var w=f*p+d*v,S=-f*m-d*y,T=_-w*w,b=x-S*S;if(T<c&&w>=0&&b<c&&S>=0){l.push(o,s);return}var E=[],C=[];Bu(r,e,i,o,.5,E),Bu(t,n,a,s,.5,C),oR(E[0],C[0],E[1],C[1],E[2],C[2],E[3],C[3],l,u),oR(E[4],C[4],E[5],C[5],E[6],C[6],E[7],C[7],l,u)}function _Gt(r,t){var e=aR(r),n=[];t=t||1;for(var i=0;i<e.length;i++){var a=e[i],o=[],s=a[0],l=a[1];o.push(s,l);for(var u=2;u<a.length;){var h=a[u++],c=a[u++],f=a[u++],d=a[u++],g=a[u++],p=a[u++];oR(s,l,h,c,f,d,g,p,o,t),s=g,l=p}n.push(o)}return n}function gK(r,t,e){var n=r[t],i=r[1-t],a=Math.abs(n/i),o=Math.ceil(Math.sqrt(a*e)),s=Math.floor(e/o);s===0&&(s=1,o=e);for(var l=[],u=0;u<o;u++)l.push(s);var h=o*s,c=e-h;if(c>0)for(var u=0;u<c;u++)l[u%o]+=1;return l}function UV(r,t,e){for(var n=r.r0,i=r.r,a=r.startAngle,o=r.endAngle,s=Math.abs(o-a),l=s*i,u=i-n,h=l>Math.abs(u),c=gK([l,u],h?0:1,t),f=(h?s:u)/c.length,d=0;d<c.length;d++)for(var g=(h?u:s)/c[d],p=0;p<c[d];p++){var v={};h?(v.startAngle=a+f*d,v.endAngle=a+f*(d+1),v.r0=n+g*p,v.r=n+g*(p+1)):(v.startAngle=a+g*p,v.endAngle=a+g*(p+1),v.r0=n+f*d,v.r=n+f*(d+1)),v.clockwise=r.clockwise,v.cx=r.cx,v.cy=r.cy,e.push(v)}}function xGt(r,t,e){for(var n=r.width,i=r.height,a=n>i,o=gK([n,i],a?0:1,t),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",h=a?"y":"x",c=r[s]/o.length,f=0;f<o.length;f++)for(var d=r[l]/o[f],g=0;g<o[f];g++){var p={};p[u]=f*c,p[h]=g*d,p[s]=c,p[l]=d,p.x+=r.x,p.y+=r.y,e.push(p)}}function WV(r,t,e,n){return r*n-e*t}function SGt(r,t,e,n,i,a,o,s){var l=e-r,u=n-t,h=o-i,c=s-a,f=WV(h,c,l,u);if(Math.abs(f)<1e-6)return null;var d=r-i,g=t-a,p=WV(d,g,h,c)/f;return p<0||p>1?null:new $t(p*l+r,p*u+t)}function wGt(r,t,e){var n=new $t;$t.sub(n,e,t),n.normalize();var i=new $t;$t.sub(i,r,t);var a=i.dot(n);return a}function $f(r,t){var e=r[r.length-1];e&&e[0]===t[0]&&e[1]===t[1]||r.push(t)}function TGt(r,t,e){for(var n=r.length,i=[],a=0;a<n;a++){var o=r[a],s=r[(a+1)%n],l=SGt(o[0],o[1],s[0],s[1],t.x,t.y,e.x,e.y);l&&i.push({projPt:wGt(l,t,e),pt:l,idx:a})}if(i.length<2)return[{points:r},{points:r}];i.sort(function(v,m){return v.projPt-m.projPt});var u=i[0],h=i[i.length-1];if(h.idx<u.idx){var c=u;u=h,h=c}for(var f=[u.pt.x,u.pt.y],d=[h.pt.x,h.pt.y],g=[f],p=[d],a=u.idx+1;a<=h.idx;a++)$f(g,r[a].slice());$f(g,d),$f(g,f);for(var a=h.idx+1;a<=u.idx+n;a++)$f(p,r[a%n].slice());return $f(p,f),$f(p,d),[{points:g},{points:p}]}function HV(r){var t=r.points,e=[],n=[];Gw(t,e,n);var i=new jt(e[0],e[1],n[0]-e[0],n[1]-e[1]),a=i.width,o=i.height,s=i.x,l=i.y,u=new $t,h=new $t;return a>o?(u.x=h.x=s+a/2,u.y=l,h.y=l+o):(u.y=h.y=l+o/2,u.x=s,h.x=s+a),TGt(t,u,h)}function MS(r,t,e,n){if(e===1)n.push(t);else{var i=Math.floor(e/2),a=r(t);MS(r,a[0],i,n),MS(r,a[1],e-i,n)}return n}function bGt(r,t){for(var e=[],n=0;n<t;n++)e.push(aL(r));return e}function EGt(r,t){t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel}function CGt(r){for(var t=[],e=0;e<r.length;)t.push([r[e++],r[e++]]);return t}function MGt(r,t){var e=[],n=r.shape,i;switch(r.type){case"rect":xGt(n,t,e),i=ve;break;case"sector":UV(n,t,e),i=wi;break;case"circle":UV({r0:0,r:n.r,startAngle:0,endAngle:Math.PI*2,cx:n.cx,cy:n.cy},t,e),i=wi;break;default:var a=r.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=nt(_Gt(r.getUpdatedPathProxy(),o),function(m){return CGt(m)}),l=s.length;if(l===0)MS(HV,{points:s[0]},t,e);else if(l===t)for(var u=0;u<l;u++)e.push({points:s[u]});else{var h=0,c=nt(s,function(m){var y=[],_=[];Gw(m,y,_);var x=(_[1]-y[1])*(_[0]-y[0]);return h+=x,{poly:m,area:x}});c.sort(function(m,y){return y.area-m.area});for(var f=t,u=0;u<l;u++){var d=c[u];if(f<=0)break;var g=u===l-1?f:Math.ceil(d.area/h*t);g<0||(MS(HV,{points:d.poly},g,e),f-=g)}}i=Ti;break}if(!i)return bGt(r,t);for(var p=[],u=0;u<e.length;u++){var v=new i;v.setShape(e[u]),EGt(r,v),p.push(v)}return p}function AGt(r,t){var e=r.length,n=t.length;if(e===n)return[r,t];for(var i=[],a=[],o=e<n?r:t,s=Math.min(e,n),l=Math.abs(n-e)/6,u=(s-2)/6,h=Math.ceil(l/u)+1,c=[o[0],o[1]],f=l,d=2;d<s;){var g=o[d-2],p=o[d-1],v=o[d++],m=o[d++],y=o[d++],_=o[d++],x=o[d++],w=o[d++];if(f<=0){c.push(v,m,y,_,x,w);continue}for(var S=Math.min(f,h-1)+1,T=1;T<=S;T++){var b=T/S;Bu(g,v,y,x,b,i),Bu(p,m,_,w,b,a),g=i[3],p=a[3],c.push(i[1],a[1],i[2],a[2],g,p),v=i[5],m=a[5],y=i[6],_=a[6]}f-=S-1}return o===r?[c,t]:[r,c]}function $V(r,t){for(var e=r.length,n=r[e-2],i=r[e-1],a=[],o=0;o<t.length;)a[o++]=n,a[o++]=i;return a}function IGt(r,t){for(var e,n,i,a=[],o=[],s=0;s<Math.max(r.length,t.length);s++){var l=r[s],u=t[s],h=void 0,c=void 0;l?u?(e=AGt(l,u),h=e[0],c=e[1],n=h,i=c):(c=$V(i||l,l),h=l):(h=$V(n||u,u),c=u),a.push(h),o.push(c)}return[a,o]}function YV(r){for(var t=0,e=0,n=0,i=r.length,a=0,o=i-2;a<i;o=a,a+=2){var s=r[o],l=r[o+1],u=r[a],h=r[a+1],c=s*h-u*l;t+=c,e+=(s+u)*c,n+=(l+h)*c}return t===0?[r[0]||0,r[1]||0]:[e/t/3,n/t/3,t]}function RGt(r,t,e,n){for(var i=(r.length-2)/6,a=1/0,o=0,s=r.length,l=s-2,u=0;u<i;u++){for(var h=u*6,c=0,f=0;f<s;f+=2){var d=f===0?h:(h+f-2)%l+2,g=r[d]-e[0],p=r[d+1]-e[1],v=t[f]-n[0],m=t[f+1]-n[1],y=v-g,_=m-p;c+=y*y+_*_}c<a&&(a=c,o=u)}return o}function PGt(r){for(var t=[],e=r.length,n=0;n<e;n+=2)t[n]=r[e-n-2],t[n+1]=r[e-n-1];return t}function LGt(r,t,e,n){for(var i=[],a,o=0;o<r.length;o++){var s=r[o],l=t[o],u=YV(s),h=YV(l);a==null&&(a=u[2]<0!=h[2]<0);var c=[],f=[],d=0,g=1/0,p=[],v=s.length;a&&(s=PGt(s));for(var m=RGt(s,l,u,h)*6,y=v-2,_=0;_<y;_+=2){var x=(m+_)%y+2;c[_+2]=s[x]-u[0],c[_+3]=s[x+1]-u[1]}c[0]=s[m]-u[0],c[1]=s[m+1]-u[1];for(var w=n/e,S=-n/2;S<=n/2;S+=w){for(var T=Math.sin(S),b=Math.cos(S),E=0,_=0;_<s.length;_+=2){var C=c[_],M=c[_+1],A=l[_]-h[0],R=l[_+1]-h[1],P=A*b-R*T,L=A*T+R*b;p[_]=P,p[_+1]=L;var D=P-C,k=L-M;E+=D*D+k*k}if(E<g){g=E,d=S;for(var F=0;F<p.length;F++)f[F]=p[F]}}i.push({from:c,to:f,fromCp:u,toCp:h,rotation:-d})}return i}function AS(r){return r.__isCombineMorphing}var pK="__mOriginal_";function IS(r,t,e){var n=pK+t,i=r[n]||r[t];r[n]||(r[n]=r[t]);var a=e.replace,o=e.after,s=e.before;r[t]=function(){var l=arguments,u;return s&&s.apply(this,l),a?u=a.apply(this,l):u=i.apply(this,l),o&&o.apply(this,l),u}}function lm(r,t){var e=pK+t;r[e]&&(r[t]=r[e],r[e]=null)}function XV(r,t){for(var e=0;e<r.length;e++)for(var n=r[e],i=0;i<n.length;){var a=n[i],o=n[i+1];n[i++]=t[0]*a+t[2]*o+t[4],n[i++]=t[1]*a+t[3]*o+t[5]}}function vK(r,t){var e=r.getUpdatedPathProxy(),n=t.getUpdatedPathProxy(),i=IGt(aR(e),aR(n)),a=i[0],o=i[1],s=r.getComputedTransform(),l=t.getComputedTransform();function u(){this.transform=null}s&&XV(a,s),l&&XV(o,l),IS(t,"updateTransform",{replace:u}),t.transform=null;var h=LGt(a,o,10,Math.PI),c=[];IS(t,"buildPath",{replace:function(f){for(var d=t.__morphT,g=1-d,p=[],v=0;v<h.length;v++){var m=h[v],y=m.from,_=m.to,x=m.rotation*d,w=m.fromCp,S=m.toCp,T=Math.sin(x),b=Math.cos(x);w1(p,w,S,d);for(var E=0;E<y.length;E+=2){var C=y[E],M=y[E+1],A=_[E],R=_[E+1],P=C*g+A*d,L=M*g+R*d;c[E]=P*b-L*T+p[0],c[E+1]=P*T+L*b+p[1]}var D=c[0],k=c[1];f.moveTo(D,k);for(var E=2;E<y.length;){var A=c[E++],R=c[E++],F=c[E++],B=c[E++],V=c[E++],Y=c[E++];D===A&&k===R&&F===V&&B===Y?f.lineTo(V,Y):f.bezierCurveTo(A,R,F,B,V,Y),D=V,k=Y}}}})}function VD(r,t,e){if(!r||!t)return t;var n=e.done,i=e.during;vK(r,t),t.__morphT=0;function a(){lm(t,"buildPath"),lm(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},It({during:function(o){t.dirtyShape(),i&&i(o)},done:function(){a(),n&&n()}},e)),t}function DGt(r,t,e,n,i,a){var o=16;r=i===e?0:Math.round(32767*(r-e)/(i-e)),t=a===n?0:Math.round(32767*(t-n)/(a-n));for(var s=0,l,u=(1<<o)/2;u>0;u/=2){var h=0,c=0;(r&u)>0&&(h=1),(t&u)>0&&(c=1),s+=u*u*(3*h^c),c===0&&(h===1&&(r=u-1-r,t=u-1-t),l=r,r=t,t=l)}return s}function RS(r){var t=1/0,e=1/0,n=-1/0,i=-1/0,a=nt(r,function(s){var l=s.getBoundingRect(),u=s.getComputedTransform(),h=l.x+l.width/2+(u?u[4]:0),c=l.y+l.height/2+(u?u[5]:0);return t=Math.min(h,t),e=Math.min(c,e),n=Math.max(h,n),i=Math.max(c,i),[h,c]}),o=nt(a,function(s,l){return{cp:s,z:DGt(s[0],s[1],t,e,n,i),path:r[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function mK(r){return MGt(r.path,r.count)}function sR(){return{fromIndividuals:[],toIndividuals:[],count:0}}function OGt(r,t,e){var n=[];function i(w){for(var S=0;S<w.length;S++){var T=w[S];AS(T)?i(T.childrenRef()):T instanceof ae&&n.push(T)}}i(r);var a=n.length;if(!a)return sR();var o=e.dividePath||mK,s=o({path:t,count:a});if(s.length!==a)return sR();n=RS(n),s=RS(s);for(var l=e.done,u=e.during,h=e.individualDelay,c=new Ws,f=0;f<a;f++){var d=n[f],g=s[f];g.parent=t,g.copyTransform(c),h||vK(d,g)}t.__isCombineMorphing=!0,t.childrenRef=function(){return s};function p(w){for(var S=0;S<s.length;S++)s[S].addSelfToZr(w)}IS(t,"addSelfToZr",{after:function(w){p(w)}}),IS(t,"removeSelfFromZr",{after:function(w){for(var S=0;S<s.length;S++)s[S].removeSelfFromZr(w)}});function v(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,lm(t,"addSelfToZr"),lm(t,"removeSelfFromZr")}var m=s.length;if(h)for(var y=m,_=function(){y--,y===0&&(v(),l&&l())},f=0;f<m;f++){var x=h?It({delay:(e.delay||0)+h(f,m,n[f],s[f]),done:_},e):e;VD(n[f],s[f],x)}else t.__morphT=0,t.animateTo({__morphT:1},It({during:function(w){for(var S=0;S<m;S++){var T=s[S];T.__morphT=t.__morphT,T.dirtyShape()}u&&u(w)},done:function(){v();for(var w=0;w<r.length;w++)lm(r[w],"updateTransform");l&&l()}},e));return t.__zr&&p(t.__zr),{fromIndividuals:n,toIndividuals:s,count:m}}function NGt(r,t,e){var n=t.length,i=[],a=e.dividePath||mK;function o(d){for(var g=0;g<d.length;g++){var p=d[g];AS(p)?o(p.childrenRef()):p instanceof ae&&i.push(p)}}if(AS(r)){o(r.childrenRef());var s=i.length;if(s<n)for(var l=0,u=s;u<n;u++)i.push(aL(i[l++%s]));i.length=n}else{i=a({path:r,count:n});for(var h=r.getComputedTransform(),u=0;u<i.length;u++)i[u].setLocalTransform(h);if(i.length!==n)return sR()}i=RS(i),t=RS(t);for(var c=e.individualDelay,u=0;u<n;u++){var f=c?It({delay:(e.delay||0)+c(u,n,i[u],t[u])},e):e;VD(i[u],t[u],f)}return{fromIndividuals:i,toIndividuals:t,count:t.length}}function ZV(r){return rt(r[0])}function jV(r,t){for(var e=[],n=r.length,i=0;i<n;i++)e.push({one:r[i],many:[]});for(var i=0;i<t.length;i++){var a=t[i].length,o=void 0;for(o=0;o<a;o++)e[o%n].many.push(t[i][o])}for(var s=0,i=n-1;i>=0;i--)if(!e[i].many.length){var l=e[s].many;if(l.length<=1)if(s)s=0;else return e;var a=l.length,u=Math.ceil(a/2);e[i].many=l.slice(u,a),e[s].many=l.slice(0,u),s++}return e}var FGt={clone:function(r){for(var t=[],e=1-Math.pow(1-r.path.style.opacity,1/r.count),n=0;n<r.count;n++){var i=aL(r.path);i.setStyle("opacity",e),t.push(i)}return t},split:null};function rM(r,t,e,n,i,a){if(!r.length||!t.length)return;var o=Kg("update",n,i);if(!(o&&o.duration>0))return;var s=n.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),u,h;ZV(r)&&(u=r,h=t),ZV(t)&&(u=t,h=r);function c(m,y,_,x,w){var S=m.many,T=m.one;if(S.length===1&&!w){var b=y?S[0]:T,E=y?T:S[0];if(AS(b))c({many:[b],one:E},!0,_,x,!0);else{var C=s?It({delay:s(_,x)},l):l;VD(b,E,C),a(b,E,b,E,C)}}else for(var M=It({dividePath:FGt[e],individualDelay:s&&function(k,F,B,V){return s(k+_,x)}},l),A=y?OGt(S,T,M):NGt(T,S,M),R=A.fromIndividuals,P=A.toIndividuals,L=R.length,D=0;D<L;D++){var C=s?It({delay:s(D,L)},l):l;a(R[D],P[D],y?S[D]:m.one,y?m.one:S[D],C)}}for(var f=u?u===r:r.length>t.length,d=u?jV(h,u):jV(f?t:r,[f?r:t]),g=0,p=0;p<d.length;p++)g+=d[p].many.length;for(var v=0,p=0;p<d.length;p++)c(d[p],f,v,g),v+=d[p].many.length}function qh(r){if(!r)return[];if(rt(r)){for(var t=[],e=0;e<r.length;e++)t.push(qh(r[e]));return t}var n=[];return r.traverse(function(i){i instanceof ae&&!i.disableMorphing&&!i.invisible&&!i.ignore&&n.push(i)}),n}var yK=1e4,kGt=0,KV=1,qV=2,GGt=me();function BGt(r,t){for(var e=r.dimensions,n=0;n<e.length;n++){var i=r.getDimensionInfo(e[n]);if(i&&i.otherDims[t]===0)return e[n]}}function zGt(r,t,e){var n=r.getDimensionInfo(e),i=n&&n.ordinalMeta;if(n){var a=r.get(n.name,t);return i&&i.categories[a]||a+""}}function JV(r,t,e,n){var i=n?"itemChildGroupId":"itemGroupId",a=BGt(r,i);if(a){var o=zGt(r,t,a);return o}var s=r.getRawDataItem(t),l=n?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!n)return e||r.getId(t)}function QV(r){var t=[];return I(r,function(e){var n=e.data,i=e.dataGroupId;if(!(n.count()>yK))for(var a=n.getIndices(),o=0;o<a.length;o++)t.push({data:n,groupId:JV(n,o,i,!1),childGroupId:JV(n,o,i,!0),divide:e.divide,dataIndex:o})}),t}function nM(r,t,e){r.traverse(function(n){n instanceof ae&&pr(n,{style:{opacity:0}},t,{dataIndex:e,isFrom:!0})})}function iM(r){if(r.parent){var t=r.getComputedTransform();r.setLocalTransform(t),r.parent.remove(r)}}function Yf(r){r.stopAnimation(),r.isGroup&&r.traverse(function(t){t.stopAnimation()})}function VGt(r,t,e){var n=Kg("update",e,t);n&&r.traverse(function(i){if(i instanceof $a){var a=FTt(i);a&&i.animateFrom({style:a},n)}})}function UGt(r,t){var e=r.length;if(e!==t.length)return!1;for(var n=0;n<e;n++){var i=r[n],a=t[n];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function _K(r,t,e){var n=QV(r),i=QV(t);function a(_,x,w,S,T){(w||_)&&x.animateFrom({style:w&&w!==_?tt(tt({},w.style),_.style):_.style},T)}var o=!1,s=kGt,l=wt(),u=wt();n.forEach(function(_){_.groupId&&l.set(_.groupId,!0),_.childGroupId&&u.set(_.childGroupId,!0)});for(var h=0;h<i.length;h++){var c=i[h].groupId;if(u.get(c)){s=KV;break}var f=i[h].childGroupId;if(f&&l.get(f)){s=qV;break}}function d(_,x){return function(w){var S=w.data,T=w.dataIndex;return x?S.getId(T):_?s===KV?w.childGroupId:w.groupId:s===qV?w.childGroupId:w.groupId}}var g=UGt(n,i),p={};if(!g)for(var h=0;h<i.length;h++){var v=i[h],m=v.data.getItemGraphicEl(v.dataIndex);m&&(p[m.id]=!0)}function y(_,x){var w=n[x],S=i[_],T=S.data.hostModel,b=w.data.getItemGraphicEl(w.dataIndex),E=S.data.getItemGraphicEl(S.dataIndex);if(b===E){E&&VGt(E,S.dataIndex,T);return}b&&p[b.id]||E&&(Yf(E),b?(Yf(b),iM(b),o=!0,rM(qh(b),qh(E),S.divide,T,_,a)):nM(E,T,_))}new cl(n,i,d(!0,g),d(!1,g),null,"multiple").update(y).updateManyToOne(function(_,x){var w=i[_],S=w.data,T=S.hostModel,b=S.getItemGraphicEl(w.dataIndex),E=ze(nt(x,function(C){return n[C].data.getItemGraphicEl(n[C].dataIndex)}),function(C){return C&&C!==b&&!p[C.id]});b&&(Yf(b),E.length?(I(E,function(C){Yf(C),iM(C)}),o=!0,rM(qh(E),qh(b),w.divide,T,_,a)):nM(b,T,w.dataIndex))}).updateOneToMany(function(_,x){var w=n[x],S=w.data.getItemGraphicEl(w.dataIndex);if(!(S&&p[S.id])){var T=ze(nt(_,function(E){return i[E].data.getItemGraphicEl(i[E].dataIndex)}),function(E){return E&&E!==S}),b=i[_[0]].data.hostModel;T.length&&(I(T,function(E){return Yf(E)}),S?(Yf(S),iM(S),o=!0,rM(qh(S),qh(T),w.divide,b,_[0],a)):I(T,function(E){return nM(E,b,_[0])}))}}).updateManyToMany(function(_,x){new cl(x,_,function(w){return n[w].data.getId(n[w].dataIndex)},function(w){return i[w].data.getId(i[w].dataIndex)}).update(function(w,S){y(_[w],x[S])}).execute()}).execute(),o&&I(t,function(_){var x=_.data,w=x.hostModel,S=w&&e.getViewOfSeriesModel(w),T=Kg("update",w,0);S&&w.isAnimationEnabled()&&T&&T.duration>0&&S.group.traverse(function(b){b instanceof ae&&!b.animators.length&&b.animateFrom({style:{opacity:0}},T)})})}function t6(r){var t=r.getModel("universalTransition").get("seriesKey");return t||r.id}function e6(r){return rt(r)?r.sort().join(","):r}function Ql(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function WGt(r,t){var e=wt(),n=wt(),i=wt();return I(r.oldSeries,function(a,o){var s=r.oldDataGroupIds[o],l=r.oldData[o],u=t6(a),h=e6(u);n.set(h,{dataGroupId:s,data:l}),rt(u)&&I(u,function(c){i.set(c,{key:h,dataGroupId:s,data:l})})}),I(t.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=t6(a),u=e6(l),h=n.get(u);if(h)e.set(u,{oldSeries:[{dataGroupId:h.dataGroupId,divide:Ql(h.data),data:h.data}],newSeries:[{dataGroupId:o,divide:Ql(s),data:s}]});else if(rt(l)){var c=[];I(l,function(g){var p=n.get(g);p.data&&c.push({dataGroupId:p.dataGroupId,divide:Ql(p.data),data:p.data})}),c.length&&e.set(u,{oldSeries:c,newSeries:[{dataGroupId:o,data:s,divide:Ql(s)}]})}else{var f=i.get(l);if(f){var d=e.get(f.key);d||(d={oldSeries:[{dataGroupId:f.dataGroupId,data:f.data,divide:Ql(f.data)}],newSeries:[]},e.set(f.key,d)),d.newSeries.push({dataGroupId:o,data:s,divide:Ql(s)})}}}}),e}function r6(r,t){for(var e=0;e<r.length;e++){var n=t.seriesIndex!=null&&t.seriesIndex===r[e].seriesIndex||t.seriesId!=null&&t.seriesId===r[e].id;if(n)return e}}function HGt(r,t,e,n){var i=[],a=[];I(Ye(r.from),function(o){var s=r6(t.oldSeries,o);s>=0&&i.push({dataGroupId:t.oldDataGroupIds[s],data:t.oldData[s],divide:Ql(t.oldData[s]),groupIdDim:o.dimension})}),I(Ye(r.to),function(o){var s=r6(e.updatedSeries,o);if(s>=0){var l=e.updatedSeries[s].getData();a.push({dataGroupId:t.oldDataGroupIds[s],data:l,divide:Ql(l),groupIdDim:o.dimension})}}),i.length>0&&a.length>0&&_K(i,a,n)}function $Gt(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,e,n){I(Ye(n.seriesTransition),function(i){I(Ye(i.to),function(a){for(var o=n.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][D1]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(t,e,n){var i=GGt(e);if(i.oldSeries&&n.updatedSeries&&n.optionChanged){var a=n.seriesTransition;if(a)I(Ye(a),function(d){HGt(d,i,n,e)});else{var o=WGt(i,n);I(o.keys(),function(d){var g=o.get(d);_K(g.oldSeries,g.newSeries,e)})}I(n.updatedSeries,function(d){d[D1]&&(d[D1]=!1)})}for(var s=t.getSeries(),l=i.oldSeries=[],u=i.oldDataGroupIds=[],h=i.oldData=[],c=0;c<s.length;c++){var f=s[c].getData();f.count()<yK&&(l.push(s[c]),u.push(s[c].get("dataGroupId")),h.push(f))}})}ne([eIt]);ne([KAt]);ne([SIt,FIt,YIt,ERt,FRt,w2t,K2t,DPt,eLt,sLt,vLt,hDt,NDt,YDt,lOt,fOt,wOt,IOt,zOt,YOt,rNt,BNt]);ne(iFt);ne(RFt);ne(mZ);ne(WFt);ne(rj);ne(XFt);ne(rkt);ne(Wkt);ne(l3t);ne(c0);ne(E3t);ne(A3t);ne(G3t);ne($3t);ne(q3t);ne(n5t);ne(d5t);ne(P5t);ne(aK);ne(oK);ne(q5t);ne(cK);ne(fK);ne(rGt);ne(pGt);ne(yGt);ne($Gt);ne(vAt);/*!
 * author: sakitam-fdd <smilefdd@gmail.com> 
 * ol-echarts v4.0.1
 * build-time: 2024-5-30 0:2
 * LICENSE: MIT
 * (c) 2017-2024 https://sakitam-fdd.github.io/ol3Echarts
 */function PS(){return[1,0,0,1,0,0]}function YGt(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function XGt(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function aM(r,t,e){var n=t[0]*e[0]+t[2]*e[1],i=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],o=t[1]*e[2]+t[3]*e[3],s=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r}function n6(r,t,e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4]+e[0],r[5]=t[5]+e[1],r}function ZGt(r,t,e){var n=t[0],i=t[2],a=t[4],o=t[1],s=t[3],l=t[5],u=Math.sin(e),h=Math.cos(e);return r[0]=n*h+o*u,r[1]=-n*u+o*h,r[2]=i*h+s*u,r[3]=-i*u+h*s,r[4]=h*a+u*l,r[5]=h*l-u*a,r}function jGt(r,t,e){var n=e[0],i=e[1];return r[0]=t[0]*n,r[1]=t[1]*i,r[2]=t[2]*n,r[3]=t[3]*i,r[4]=t[4]*n,r[5]=t[5]*i,r}function KGt(r,t){var e=t[0],n=t[2],i=t[4],a=t[1],o=t[3],s=t[5],l=e*o-a*n;return l?(l=1/l,r[0]=o*l,r[1]=-a*l,r[2]=-n*l,r[3]=e*l,r[4]=(n*s-o*i)*l,r[5]=(a*i-e*s)*l,r):null}function i6(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[2]*i+e[4],r[1]=e[1]*n+e[3]*i+e[5],r}var a6=YGt,o6=5e-5;function Oh(r){return r>o6||r<-o6}var Nh=[],Xf=[],oM=PS(),sM=Math.abs,lM=function(){function r(){}return r.prototype.getLocalTransform=function(t){return r.getLocalTransform(this,t)},r.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},r.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},r.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},r.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},r.prototype.needLocalTransform=function(){return Oh(this.rotation)||Oh(this.x)||Oh(this.y)||Oh(this.scaleX-1)||Oh(this.scaleY-1)||Oh(this.skewX)||Oh(this.skewY)},r.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),n=this.transform;if(!(e||t)){n&&a6(n);return}n=n||PS(),e?this.getLocalTransform(n):a6(n),t&&(e?aM(n,t,n):XGt(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},r.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(e!=null&&e!==1){this.getGlobalScale(Nh);var n=Nh[0]<0?-1:1,i=Nh[1]<0?-1:1,a=((Nh[0]-n)*e+n)/Nh[0]||0,o=((Nh[1]-i)*e+i)/Nh[1]||0;t[0]*=a,t[1]*=a,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||PS(),KGt(this.invTransform,t)},r.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},r.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),a=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(a),e=Math.sqrt(e),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=n,this.originX=0,this.originY=0}},r.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(aM(Xf,t.invTransform,e),e=Xf);var n=this.originX,i=this.originY;(n||i)&&(oM[4]=n,oM[5]=i,aM(Xf,e,oM),Xf[4]-=n,Xf[5]-=i,e=Xf),this.setLocalTransform(e)}},r.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},r.prototype.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&i6(n,n,i),n},r.prototype.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&i6(n,n,i),n},r.prototype.getLineScale=function(){var t=this.transform;return t&&sM(t[0]-1)>1e-10&&sM(t[3]-1)>1e-10?Math.sqrt(sM(t[0]*t[3]-t[2]*t[1])):1},r.prototype.copyTransform=function(t){qGt(this,t)},r.getLocalTransform=function(t,e){e=e||[];var n=t.originX||0,i=t.originY||0,a=t.scaleX,o=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,h=t.x,c=t.y,f=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var g=n+s,p=i+l;e[4]=-g*a-f*p*o,e[5]=-p*o-d*g*a}else e[4]=e[5]=0;return e[0]=a,e[3]=o,e[1]=d*a,e[2]=f*o,u&&ZGt(e,e,u),e[4]+=n+h,e[5]+=i+c,e},r.initDefaultProps=function(){var t=r.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),r}(),s6=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function qGt(r,t){for(var e=0;e<s6.length;e++){var n=s6[e];r[n]=t[n]}}var li=function(){function r(t,e){this.x=t||0,this.y=e||0}return r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set=function(t,e){return this.x=t,this.y=e,this},r.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.scale=function(t){this.x*=t,this.y*=t},r.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y},r.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},r.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},r.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},r.prototype.distanceSquare=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.transform=function(t){if(t){var e=this.x,n=this.y;return this.x=t[0]*e+t[2]*n+t[4],this.y=t[1]*e+t[3]*n+t[5],this}},r.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},r.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},r.set=function(t,e,n){t.x=e,t.y=n},r.copy=function(t,e){t.x=e.x,t.y=e.y},r.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},r.lenSquare=function(t){return t.x*t.x+t.y*t.y},r.dot=function(t,e){return t.x*e.x+t.y*e.y},r.add=function(t,e,n){t.x=e.x+n.x,t.y=e.y+n.y},r.sub=function(t,e,n){t.x=e.x-n.x,t.y=e.y-n.y},r.scale=function(t,e,n){t.x=e.x*n,t.y=e.y*n},r.scaleAndAdd=function(t,e,n,i){t.x=e.x+n.x*i,t.y=e.y+n.y*i},r.lerp=function(t,e,n,i){var a=1-i;t.x=a*e.x+i*n.x,t.y=a*e.y+i*n.y},r}(),n1=Math.min,i1=Math.max,Fh=new li,kh=new li,Gh=new li,Bh=new li,ev=new li,rv=new li,l6=function(){function r(t,e,n,i){n<0&&(t=t+n,n=-n),i<0&&(e=e+i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}return r.prototype.union=function(t){var e=n1(t.x,this.x),n=n1(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=i1(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=i1(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=e,this.y=n},r.prototype.applyTransform=function(t){r.applyTransform(this,this,t)},r.prototype.calculateTransform=function(t){var e=this,n=t.width/e.width,i=t.height/e.height,a=PS();return n6(a,a,[-e.x,-e.y]),jGt(a,a,[n,i]),n6(a,a,[t.x,t.y]),a},r.prototype.intersect=function(t,e){if(!t)return!1;t instanceof r||(t=r.create(t));var n=this,i=n.x,a=n.x+n.width,o=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,h=t.y,c=t.y+t.height,f=!(a<l||u<i||s<h||c<o);if(e){var d=1/0,g=0,p=Math.abs(a-l),v=Math.abs(u-i),m=Math.abs(s-h),y=Math.abs(c-o),_=Math.min(p,v),x=Math.min(m,y);a<l||u<i?_>g&&(g=_,p<v?li.set(rv,-p,0):li.set(rv,v,0)):_<d&&(d=_,p<v?li.set(ev,p,0):li.set(ev,-v,0)),s<h||c<o?x>g&&(g=x,m<y?li.set(rv,0,-m):li.set(rv,0,y)):_<d&&(d=_,m<y?li.set(ev,0,m):li.set(ev,0,-y))}return e&&li.copy(e,f?ev:rv),f},r.prototype.contain=function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copy=function(t){r.copy(this,t)},r.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},r.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},r.prototype.isZero=function(){return this.width===0||this.height===0},r.create=function(t){return new r(t.x,t.y,t.width,t.height)},r.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},r.applyTransform=function(t,e,n){if(!n){t!==e&&r.copy(t,e);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],a=n[3],o=n[4],s=n[5];t.x=e.x*i+o,t.y=e.y*a+s,t.width=e.width*i,t.height=e.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Fh.x=Gh.x=e.x,Fh.y=Bh.y=e.y,kh.x=Bh.x=e.x+e.width,kh.y=Gh.y=e.y+e.height,Fh.transform(n),Bh.transform(n),kh.transform(n),Gh.transform(n),t.x=n1(Fh.x,kh.x,Gh.x,Bh.x),t.y=n1(Fh.y,kh.y,Gh.y,Bh.y);var l=i1(Fh.x,kh.x,Gh.x,Bh.x),u=i1(Fh.y,kh.y,Gh.y,Bh.y);t.width=l-t.x,t.height=u-t.y},r}(),Xc=r=>{var t=typeof r;return r!==null&&(t==="object"||t==="function")},xK=(r,t)=>(Object.keys(t).forEach(e=>{Xc(t[e])&&Xc(r[e])?xK(r[e],t[e]):r[e]=t[e]}),r),lR=function(r,t,...e){return function(...n){return r.apply(t,e.concat(Array.prototype.slice.call(n)))}},SK=function(r,t){for(var e=0,n,i=r.length;e<i;e++)if(r[e].index===t.index){n=e;break}return n===void 0?r.push(t):r[n]=t,r},wK=function(){function r(t){return t?(t^Math.random()*16>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}return r()};function TK(r,t){r.forEach(e=>{t[e]&&(t[e]=t[e].bind(t))})}function uR(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function a1(r,t){var e=new MouseEvent(r,{bubbles:!0,cancelable:!0,button:t.pointerEvent.button,buttons:t.pointerEvent.buttons,clientX:t.pointerEvent.clientX,clientY:t.pointerEvent.clientY,zrX:t.pointerEvent.offsetX,zrY:t.pointerEvent.offsetY,movementX:t.pointerEvent.movementX,movementY:t.pointerEvent.movementY,relatedTarget:t.pointerEvent.relatedTarget,screenX:t.pointerEvent.screenX,screenY:t.pointerEvent.screenY,view:window});return e.zrX=t.pointerEvent.offsetX,e.zrY=t.pointerEvent.offsetY,e.event=e,e}function JGt(r,t){for(var e=r.split("."),n=t.split("."),i=0;i<3;i++){var a=Number(e[i]),o=Number(n[i]);if(a>o)return 1;if(o>a)return-1;if(!isNaN(a)&&isNaN(o))return 1;if(isNaN(a)&&!isNaN(o))return-1}return 0}var QGt=r=>!r.UTF8Encoding,u6=(r,t,e)=>{for(var n=[],i=[t[0],t[1]],a=i[0],o=i[1],s=0;s<r.length;s+=2){var l=r.charCodeAt(s)-64,u=r.charCodeAt(s+1)-64;l=l>>1^-(l&1),u=u>>1^-(u&1),l+=a,u+=o,a=l,o=u,n.push([l/e,u/e])}return n},tBt=r=>{if(QGt(r))return r;var t=r.UTF8Scale;t==null&&(t=1024);for(var e=r.features,n=0;n<e.length;n++)for(var i=e[n],a=i.geometry,o=[a.coordinates,a.encodeOffsets],s=o[0],l=o[1],u=0;u<s.length;u++){var h=s[u];if(a.type==="Polygon")s[u]=u6(h,l[u],t);else if(a.type==="MultiPolygon")for(var c=0;c<h.length;c++){var f=h[c];h[c]=u6(f,l[u][c],t)}}return r.UTF8Encoding=!1,r};function eBt(r){var t=tBt(r),e=t.features.filter(i=>i.geometry&&i.properties&&i.geometry.coordinates.length>0),n=e.map(i=>{var a=i.properties,o=i.geometry,s=o.coordinates,l=[];return o.type==="Polygon"&&l.push(s[0]),o.type==="MultiPolygon"&&s.forEach(u=>{u[0]&&l.push(u[0])}),{properties:a,type:"Feature",geometry:{type:"Polygon",coordinates:l}}});return{type:"FeatureCollection",crs:{},features:n}}var rBt=function(r,t,e){return t.center=e.dataToPoint(t.coordinates),t},nBt=function(r,t,e){return Xc(r.grid)&&!Array.isArray(r.grid)||Array.isArray(r.grid)&&(r.grid=r.grid.map((n,i)=>{var a=e.dataToPoint(r.series[i].coordinates);return n.left=a[0]-parseFloat(n.width)/2,n.top=a[1]-parseFloat(n.height)/2,n})),t},iBt=function(r,t,e){return Xc(r.grid)&&!Array.isArray(r.grid)||Array.isArray(r.grid)&&(r.grid=r.grid.map((n,i)=>{var a=e.dataToPoint(r.series[i].coordinates);return n.left=a[0]-parseFloat(n.width)/2,n.top=a[1]-parseFloat(n.height)/2,n})),t},aBt=Object.freeze({pie:rBt,bar:nBt,line:iBt}),oBt={forcedRerender:!1,forcedPrecomposeRerender:!1,hideOnZooming:!1,hideOnMoving:!1,hideOnRotating:!1,convertTypes:["pie","line","bar"],insertFirst:!1,stopEvent:!1,polyfillEvents:JGt(dtt,"6.1.1")<=0};class wl extends Xa{constructor(t,e,n){var i=Object.assign(oBt,e);super(i),this._options=i,this._chartOptions=t,this.set("chartOptions",t),this.$chart=null,this.$container=void 0,this._isRegistered=!1,this._initEvent=!1,this._incremental=[],this._coordinateSystem=null,this.coordinateSystemId="",this.prevVisibleState="",TK(["redraw","onResize","onZoomEnd","onCenterChange","onDragRotateEnd","onMoveStart","onMoveEnd","mouseDown","mouseUp","onClick","mouseMove"],this),n&&this.setMap(n)}appendTo(t,e=!1){this.setMap(t,e)}getMap(){return this._map}setMap(t,e=!1){if(t&&(e||t instanceof w2))this._map=t,this._map.once("postrender",()=>{this.handleMapChanged()}),this._map.renderSync();else throw new Error("not ol map object")}getChartOptions(){return this.get("chartOptions")}setChartOptions(t={}){return this._chartOptions=t,this.set("chartOptions",t),this.clearAndRedraw(),this}appendData(t,e=!0){return t&&(e&&(this._incremental=SK(this._incremental,{index:this._incremental.length,data:t.data,seriesIndex:t.seriesIndex})),this.$chart.appendData({data:t.data.copyWithin(),seriesIndex:t.seriesIndex})),this}clear(t){t||(this._incremental=[]),this.$chart&&this.$chart.clear()}remove(){this.clear(),this.$chart&&this.$chart.dispose(),this._initEvent&&this.$container&&(this.$container&&uR(this.$container),this.unBindEvent()),delete this.$chart,delete this._map}show(){this.setVisible(!0)}innerShow(){this.$container&&(this.$container.style.display=this.prevVisibleState,this.prevVisibleState="")}hide(){this.setVisible(!1)}innerHide(){this.$container&&(this.prevVisibleState=this.$container.style.display,this.$container.style.display="none")}isVisible(){return this.$container&&this.$container.style.display!=="none"}showLoading(){this.$chart&&this.$chart.showLoading()}hideLoading(){this.$chart&&this.$chart.hideLoading()}setZIndex(t){this.$container&&(typeof t=="number"&&(t=String(t)),this.$container.style.zIndex=t)}getZIndex(){return this.$container&&this.$container.style.zIndex}setVisible(t){t?(this.$container&&(this.$container.style.display=""),this._chartOptions=this.getChartOptions(),this.clearAndRedraw()):(this.$container&&(this.$container.style.display="none"),this.clear(!0),this._chartOptions={},this.clearAndRedraw())}render(){!this.$chart&&this.$container?(this.$chart=zCt(this.$container),this._chartOptions&&(this.registerMap(),this.$chart.setOption(this.convertData(this._chartOptions),!1)),this.dispatchEvent({type:"load",source:this,value:this.$chart})):this.isVisible()&&this.redraw()}redraw(){this.clearAndRedraw()}updateViewSize(t){this.$container&&(this.$container.style.width=`${t[0]}px`,this.$container.style.height=`${t[1]}px`,this.$container.setAttribute("width",String(t[0])),this.$container.setAttribute("height",String(t[1])))}onResize(t){var e=this.getMap();if(e){var n=e.getSize();this.updateViewSize(n),this.clearAndRedraw(),t&&this.dispatchEvent({type:"change:size",source:this,value:n})}}onZoomEnd(){this._options.hideOnZooming&&this.innerShow();var t=this.getMap();t&&t.getView()&&(this.clearAndRedraw(),this.dispatchEvent({type:"zoomend",source:this,value:t.getView().getZoom()}))}onDragRotateEnd(){this._options.hideOnRotating&&this.innerShow();var t=this.getMap();t&&t.getView()&&(this.clearAndRedraw(),this.dispatchEvent({type:"change:rotation",source:this,value:t.getView().getRotation()}))}onMoveStart(){this._options.hideOnMoving&&this.innerHide();var t=this.getMap();t&&t.getView()&&this.dispatchEvent({type:"movestart",source:this,value:t.getView().getCenter()})}onMoveEnd(){this._options.hideOnMoving&&this.innerShow();var t=this.getMap();t&&t.getView()&&(this.clearAndRedraw(),this.dispatchEvent({type:"moveend",source:this,value:t.getView().getCenter()}))}onClick(t){this.$chart&&this.$chart.getZr().painter.getViewportRoot().dispatchEvent(a1("click",t))}mouseDown(t){this.$chart&&this.$chart.getZr().painter.getViewportRoot().dispatchEvent(a1("mousedown",t))}mouseUp(t){this.$chart&&this.$chart.getZr().painter.getViewportRoot().dispatchEvent(a1("mouseup",t))}mouseMove(t){if(this.$chart)for(var e=t.originalEvent.target;e;){if(e.className==="ol-overlaycontainer-stopevent"){this.$chart.getZr().painter.getViewportRoot().dispatchEvent(a1("mousemove",t));return}e=e.parentElement}}onCenterChange(){var t=this.getMap();t&&t.getView()&&(this.clearAndRedraw(),this.dispatchEvent({type:"change:center",source:this,value:t.getView().getCenter()}))}handleMapChanged(){var t=this.getMap();if(this._initEvent&&this.$container&&(this.$container&&uR(this.$container),this.unBindEvent()),this.$container||(this.createLayerContainer(),this.onResize(!1)),t){var e=this._options.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this._options.insertFirst?e.insertBefore(this.$container,e.childNodes[0]||null):e.appendChild(this.$container),this.render(),this.bindEvent(t)}}createLayerContainer(){this.$container=document.createElement("div"),this.$container.style.position="absolute",this.$container.style.top="0px",this.$container.style.left="0px",this.$container.style.right="0px",this.$container.style.bottom="0px",this.$container.style.pointerEvents="auto"}bindEvent(t){var e=t.getView();this._options.forcedPrecomposeRerender&&t.on("precompose",this.redraw),t.on("change:size",this.onResize),e.on("change:resolution",this.onZoomEnd),e.on("change:center",this.onCenterChange),e.on("change:rotation",this.onDragRotateEnd),t.on("movestart",this.onMoveStart),t.on("moveend",this.onMoveEnd),this._options.polyfillEvents&&(t.on("pointerdown",this.mouseDown),t.on("pointerup",this.mouseUp),t.on("pointermove",this.mouseMove),t.on("click",this.onClick)),this._initEvent=!0}unBindEvent(){var t=this.getMap();if(t){var e=t.getView();e&&(t.un("precompose",this.redraw),t.un("change:size",this.onResize),e.un("change:resolution",this.onZoomEnd),e.un("change:center",this.onCenterChange),e.un("change:rotation",this.onDragRotateEnd),t.un("movestart",this.onMoveStart),t.un("moveend",this.onMoveEnd),this._options.polyfillEvents&&(t.un("pointerdown",this.mouseDown),t.un("pointerup",this.mouseUp),t.un("pointermove",this.mouseMove),t.un("click",this.onClick)),this._initEvent=!1)}}clearAndRedraw(){if(!(!this.$chart||!this.isVisible())){if(this._options.forcedRerender&&this.$chart.clear(),this.$chart.resize(),this._chartOptions&&(this.registerMap(),this.$chart.setOption(this.convertData(this._chartOptions),!1),this._incremental&&this._incremental.length>0))for(var t=0;t<this._incremental.length;t++)this.appendData(this._incremental[t],!1);this.dispatchEvent({type:"redraw",source:this})}}registerMap(){if(this._isRegistered||(this.coordinateSystemId=`openlayers_${wK()}`,zY(this.coordinateSystemId,this.getCoordinateSystem(this._options)),this._isRegistered=!0),this._chartOptions){var t=this._chartOptions.series;if(t&&Xc(t)){var e=this._options.convertTypes;if(e)for(var n=t.length-1;n>=0;n--)e.indexOf(t[n].type)>-1||(t[n].coordinateSystem=this.coordinateSystemId),t[n].animation=!1}}}convertData(t){var e=t.series;if(e&&e.length>0){if(!this._coordinateSystem){var n=this.getCoordinateSystem(this._options);this._coordinateSystem=new n(this.getMap())}if(e&&Xc(e)){var i=this._options.convertTypes;if(i)for(var a=e.length-1;a>=0;a--)i.indexOf(e[a].type)>-1&&e[a]&&e[a].hasOwnProperty("coordinates")&&(e[a]=aBt[e[a].type](t,e[a],this._coordinateSystem))}}return t}getCoordinateSystem(t){var e=this.getMap(),n=this.coordinateSystemId;class i{constructor(o){this._mapOffset=[0,0],this.dimensions=["lng","lat"],this._roamTransformable=new lM,this._rawTransformable=new lM,this._viewRect=new l6(0,0,0,0),this.map=o,this.dimensions=["lng","lat"],this.projCode=i.getProjectionCode(this.map)}getZoom(){return this.map.getView().getZoom()}setZoom(o){return this.map.getView().setZoom(o)}getViewRectAfterRoam(){return this.getViewRect().clone()}setMapOffset(o){this._mapOffset=o}dataToPoint(o){var s;if(o&&Array.isArray(o)&&o.length>0){s=o.map(f=>{var d=0;return typeof f=="string"?d=Number(f):d=f,d});var l=t&&t.source||"EPSG:4326",u=t&&t.destination||this.projCode,h=this.map.getPixelFromCoordinate(Ig(s,l,u)),c=this._mapOffset;return[h[0]-c[0],h[1]-c[1]]}return[0,0]}pointToData(o){var s=this._mapOffset;return this.map.getCoordinateFromPixel([o[0]+s[0],o[1]+s[1]])}setViewRect(){var o=this.map.getSize();this._viewRect=new l6(0,0,o[0],o[1])}getViewRect(){return this._viewRect}getRoamTransform(){return this._roamTransformable.getLocalTransform()}prepareCustoms(){var o=this.getViewRect();return{coordSys:{type:n,x:o.x,y:o.y,width:o.width,height:o.height},api:{coord:lR(this.dataToPoint,this),size:lR(this.dataToCoordsSize,this)}}}dataToCoordsSize(o,s=[0,0]){return[0,1].map(l=>{var u=s[l],h=[],c=[],f=o[l]/2;h[l]=u-f,c[l]=u+f,h[1-l]=s[1-l],c[1-l]=s[1-l];var d=this.dataToPoint(h)[l]-this.dataToPoint(c)[l];return Math.abs(d)})}getTransformInfo(){var o=this._rawTransformable,s=this._roamTransformable,l=new lM;return l.transform=s.transform,l.decomposeTransform(),{roam:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY},raw:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY}}}}return i.dimensions=i.prototype.dimensions||["lng","lat"],i.create=function(a){a.eachSeries(o=>{o.get("coordinateSystem")===n&&(o.coordinateSystem=new i(e))})},i.getProjectionCode=function(a){var o="";return a?o=a.getView()&&a.getView().getProjection().getCode():o="EPSG:3857",o},i}dispatchEvent(t){return super.dispatchEvent(t)}set(t,e,n){return super.set(t,e,n)}get(t){return super.get(t)}unset(t,e){return super.unset(t,e)}on(t,e){return super.on(t,e)}un(t,e){return super.un(t,e)}}wl.formatGeoJSON=eBt;wl.bind=lR;wl.merge=xK;wl.uuid=wK;wl.bindAll=TK;wl.arrayAdd=SK;wl.removeNode=uR;wl.isObject=Xc;const sBt=Wr({__name:"index",props:{chartOptions:{},options:{},zIndex:{},visible:{type:Boolean,default:!0}},emits:["load"],setup(r,{emit:t}){const e=$e("VMap"),n=qt(e).map;let i=Er(),a=ir(!1);const o=r,s=t,l=()=>{var u;i.value=new wl(o.chartOptions,o.options),i.value.on("load",()=>{a.value=!0,s("load")}),o.zIndex&&i.value.setZIndex(o.zIndex),i.value.setVisible(o.visible),(u=i.value)==null||u.appendTo(n)};return He(()=>o.visible,u=>{var h;(h=i.value)==null||h.setVisible(u)}),He(()=>o.zIndex,u=>{var h;(u||u===0||u===null)&&((h=i.value)==null||h.setZIndex(u))}),He(()=>o.chartOptions,u=>{var h;u&&((h=i.value)==null||h.setChartOptions(u))},{deep:!0}),fn(()=>{l()}),jc(()=>{var u;(u=i.value)==null||u.remove()}),(u,h)=>qt(a)?Ya(u.$slots,"default",{key:0}):Xu("",!0)}}),lBt=[{name:"OlMap",component:put},{name:"OlTile",component:Nft},{name:"OlImage",component:Fft},{name:"OlVector",component:f9},{name:"OlWfs",component:i0t},{name:"OlWms",component:a0t},{name:"OlHeatmap",component:o0t},{name:"OlTiff",component:s0t},{name:"OlFeature",component:fv},{name:"OlCluster",component:f0t},{name:"OlOverlay",component:d0t},{name:"OlOverview",component:g0t},{name:"OlDraw",component:y0t},{name:"OlMeasure",component:_0t},{name:"OlPath",component:P0t},{name:"OlRoute",component:Q1t},{name:"OlEcharts",component:sBt}],uM={TDT:{ak:"",Normal:"https://t0.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=",Normal_Label:"https://t0.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=",Satellite:"https://t0.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk=",Satellite_Label:"https://t0.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk=",Terrain:"https://t0.tianditu.gov.cn/DataServer?T=ter_w&X={x}&Y={y}&L={z}&tk=",Terrain_Label:"https://t0.tianditu.gov.cn/DataServer?T=cta_w&X={x}&Y={y}&L={z}&tk="},Baidu:{ak:"",Normal:"https://maponline1.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles=pl&scaler=1&udt=20220113&from=jsapi2_0",Satellite:"https://maponline3.bdimg.com/starpic/?qt=satepc&u=x={x};y={y};z={z};v=009;type=sate&fm=46&udt=20240910",Satellite_Label:"https://maponline0.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles=sl&udt=20240910",midnight:"http://api0.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&udt=20220819&scale=1&customid=midnight&ak="},AMap:{Normal:"http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",Satellite:"http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",Satellite_Label:"http://webst01.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}"}},uBt=(r,t)=>{lBt.forEach(e=>{r.component(e.name,e.component)}),t&&(r.config.globalProperties.$OlMapConfig=t,r.provide("$OlMapConfig",{TDT:{...uM.TDT,...t.TDT},Baidu:{...uM.Baidu,...t.Baidu},AMap:{...uM.AMap,...t.AMap}}))},hBt={install:uBt},UD=jJ(ntt);UD.use(stt);UD.use(hBt,{TDT:{ak:"88e2f1d5ab64a7477a7361edd6b5f68a"},Baidu:{ak:"5ieMMexWmzB9jivTq6oCRX9j"}});UD.mount("#app");export{He as A,MO as B,SR as C,F2 as D,Na as E,Pi as F,_d as G,Pa as H,or as I,Ee as J,Kn as K,XU as L,w2 as M,QU as N,mw as O,PBt as P,LBt as Q,Te as S,dBt as T,ao as V,J7 as W,HW as X,rtt as _,ttt as a,q6 as b,Y1 as c,Wr as d,Ta as e,hJ as f,an as g,ir as h,gm as i,qD as j,wn as k,zS as l,fn as m,Cd as n,nl as o,gBt as p,fut as q,fBt as r,Er as s,v6 as t,qt as u,pBt as v,TR as w,Xu as x,Zn as y,AR as z};
